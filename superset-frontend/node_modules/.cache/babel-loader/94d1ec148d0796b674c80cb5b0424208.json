{"ast":null,"code":"/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport var AnnotationType;\n(function (AnnotationType) {\n  AnnotationType[\"Event\"] = \"EVENT\";\n  AnnotationType[\"Formula\"] = \"FORMULA\";\n  AnnotationType[\"Interval\"] = \"INTERVAL\";\n  AnnotationType[\"Timeseries\"] = \"TIME_SERIES\";\n})(AnnotationType || (AnnotationType = {}));\nexport var AnnotationSourceType;\n(function (AnnotationSourceType) {\n  AnnotationSourceType[\"Line\"] = \"line\";\n  AnnotationSourceType[\"Native\"] = \"NATIVE\";\n  AnnotationSourceType[\"Table\"] = \"table\";\n  AnnotationSourceType[\"Undefined\"] = \"\";\n})(AnnotationSourceType || (AnnotationSourceType = {}));\nexport var AnnotationOpacity;\n(function (AnnotationOpacity) {\n  AnnotationOpacity[\"High\"] = \"opacityHigh\";\n  AnnotationOpacity[\"Low\"] = \"opacityLow\";\n  AnnotationOpacity[\"Medium\"] = \"opacityMedium\";\n  AnnotationOpacity[\"Undefined\"] = \"\";\n})(AnnotationOpacity || (AnnotationOpacity = {}));\nexport var AnnotationStyle;\n(function (AnnotationStyle) {\n  AnnotationStyle[\"Dashed\"] = \"dashed\";\n  AnnotationStyle[\"Dotted\"] = \"dotted\";\n  AnnotationStyle[\"Solid\"] = \"solid\";\n  AnnotationStyle[\"LongDashed\"] = \"longDashed\";\n})(AnnotationStyle || (AnnotationStyle = {}));\nexport function isFormulaAnnotationLayer(layer) {\n  return layer.annotationType === AnnotationType.Formula;\n}\nexport function isEventAnnotationLayer(layer) {\n  return layer.annotationType === AnnotationType.Event;\n}\nexport function isIntervalAnnotationLayer(layer) {\n  return layer.annotationType === AnnotationType.Interval;\n}\nexport function isTimeseriesAnnotationLayer(layer) {\n  return layer.annotationType === AnnotationType.Timeseries;\n}\nexport function isTableAnnotationLayer(layer) {\n  return layer.sourceType === AnnotationSourceType.Table;\n}\nexport function isTimeseriesAnnotationResult(result) {\n  return Array.isArray(result);\n}\nexport function isRecordAnnotationResult(result) {\n  return Array.isArray(result == null ? void 0 : result.records);\n}","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;;;;AAuBA,WAAYA,cAAZ;AAAA,WAAYA,cAAZ,EAA0B;EACxBA;EACAA;EACAA;EACAA;AACD,CALD,EAAYA,cAAc,KAAdA,cAAc,MAA1B;AAOA,WAAYC,oBAAZ;AAAA,WAAYA,oBAAZ,EAAgC;EAC9BA;EACAA;EACAA;EACAA;AACD,CALD,EAAYA,oBAAoB,KAApBA,oBAAoB,MAAhC;AAOA,WAAYC,iBAAZ;AAAA,WAAYA,iBAAZ,EAA6B;EAC3BA;EACAA;EACAA;EACAA;AACD,CALD,EAAYA,iBAAiB,KAAjBA,iBAAiB,MAA7B;AAOA,WAAYC,eAAZ;AAAA,WAAYA,eAAZ,EAA2B;EACzBA;EACAA;EACAA;EACAA;AACD,CALD,EAAYA,eAAe,KAAfA,eAAe,MAA3B;AAsFA,OAAM,SAAUC,wBAAV,CACJC,KADI,EACkB;EAEtB,OAAOA,KAAK,CAACC,cAAN,KAAyBN,cAAc,CAACO,OAA/C;AACD;AAED,OAAM,SAAUC,sBAAV,CACJH,KADI,EACkB;EAEtB,OAAOA,KAAK,CAACC,cAAN,KAAyBN,cAAc,CAACS,KAA/C;AACD;AAED,OAAM,SAAUC,yBAAV,CACJL,KADI,EACkB;EAEtB,OAAOA,KAAK,CAACC,cAAN,KAAyBN,cAAc,CAACW,QAA/C;AACD;AAED,OAAM,SAAUC,2BAAV,CACJP,KADI,EACkB;EAEtB,OAAOA,KAAK,CAACC,cAAN,KAAyBN,cAAc,CAACa,UAA/C;AACD;AAED,OAAM,SAAUC,sBAAV,CACJT,KADI,EACkB;EAEtB,OAAOA,KAAK,CAACU,UAAN,KAAqBd,oBAAoB,CAACe,KAAjD;AACD;AAeD,OAAM,SAAUC,4BAAV,CACJC,MADI,EACoB;EAExB,OAAOC,KAAK,CAACC,OAAN,CAAcF,MAAd,CAAP;AACD;AAED,OAAM,SAAUG,wBAAV,CACJH,MADI,EACO;EAEX,OAAOC,KAAK,CAACC,OAAN,CAAcF,MAAd,oBAAcA,MAAM,CAAEI,OAAtB,CAAP;AACD","names":["AnnotationType","AnnotationSourceType","AnnotationOpacity","AnnotationStyle","isFormulaAnnotationLayer","layer","annotationType","Formula","isEventAnnotationLayer","Event","isIntervalAnnotationLayer","Interval","isTimeseriesAnnotationLayer","Timeseries","isTableAnnotationLayer","sourceType","Table","isTimeseriesAnnotationResult","result","Array","isArray","isRecordAnnotationResult","records"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/packages/superset-ui-core/src/query/types/AnnotationLayer.ts"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint camelcase: 0 */\nimport { DataRecord } from './QueryResponse';\nimport { TimeGranularity } from '../../time-format';\n\nexport enum AnnotationType {\n  Event = 'EVENT',\n  Formula = 'FORMULA',\n  Interval = 'INTERVAL',\n  Timeseries = 'TIME_SERIES',\n}\n\nexport enum AnnotationSourceType {\n  Line = 'line',\n  Native = 'NATIVE',\n  Table = 'table',\n  Undefined = '',\n}\n\nexport enum AnnotationOpacity {\n  High = 'opacityHigh',\n  Low = 'opacityLow',\n  Medium = 'opacityMedium',\n  Undefined = '',\n}\n\nexport enum AnnotationStyle {\n  Dashed = 'dashed',\n  Dotted = 'dotted',\n  Solid = 'solid',\n  LongDashed = 'longDashed',\n}\n\ntype BaseAnnotationLayer = {\n  color?: string | null;\n  name: string;\n  opacity?: AnnotationOpacity;\n  show: boolean;\n  showLabel: boolean;\n  style: AnnotationStyle;\n  width?: number;\n};\n\ntype AnnotationOverrides = {\n  granularity?: string | null;\n  time_grain_sqla?: TimeGranularity | null;\n  time_range?: string | null;\n  time_shift?: string | null;\n};\n\ntype LineSourceAnnotationLayer = {\n  hideLine?: boolean;\n  overrides?: AnnotationOverrides;\n  sourceType: AnnotationSourceType.Line;\n  titleColumn?: string;\n  // viz id\n  value: number;\n};\n\ntype NativeSourceAnnotationLayer = {\n  sourceType: AnnotationSourceType.Native;\n  // annotation id\n  value: number;\n};\n\ntype TableSourceAnnotationLayer = {\n  descriptionColumns?: string[];\n  timeColumn?: string;\n  intervalEndColumn?: string;\n  overrides?: AnnotationOverrides;\n  sourceType: AnnotationSourceType.Table;\n  titleColumn?: string;\n  // viz id\n  value: number;\n};\n\nexport type EventAnnotationLayer = BaseAnnotationLayer &\n  (TableSourceAnnotationLayer | NativeSourceAnnotationLayer) & {\n    annotationType: AnnotationType.Event;\n  };\n\nexport type IntervalAnnotationLayer = BaseAnnotationLayer &\n  (TableSourceAnnotationLayer | NativeSourceAnnotationLayer) & {\n    annotationType: AnnotationType.Interval;\n  };\n\nexport type TableAnnotationLayer = BaseAnnotationLayer &\n  TableSourceAnnotationLayer & {\n    annotationType: AnnotationType.Event | AnnotationType.Interval;\n  };\n\nexport type FormulaAnnotationLayer = BaseAnnotationLayer & {\n  annotationType: AnnotationType.Formula;\n  // the mathjs parseable formula\n  sourceType?: AnnotationSourceType.Undefined;\n  value: string;\n};\n\nexport type TimeseriesAnnotationLayer = BaseAnnotationLayer &\n  LineSourceAnnotationLayer & {\n    annotationType: AnnotationType.Timeseries;\n    showMarkers?: boolean;\n    value: number;\n  };\n\nexport type AnnotationLayer =\n  | EventAnnotationLayer\n  | IntervalAnnotationLayer\n  | FormulaAnnotationLayer\n  | TimeseriesAnnotationLayer\n  | TableAnnotationLayer;\n\nexport function isFormulaAnnotationLayer(\n  layer: AnnotationLayer,\n): layer is FormulaAnnotationLayer {\n  return layer.annotationType === AnnotationType.Formula;\n}\n\nexport function isEventAnnotationLayer(\n  layer: AnnotationLayer,\n): layer is EventAnnotationLayer {\n  return layer.annotationType === AnnotationType.Event;\n}\n\nexport function isIntervalAnnotationLayer(\n  layer: AnnotationLayer,\n): layer is IntervalAnnotationLayer {\n  return layer.annotationType === AnnotationType.Interval;\n}\n\nexport function isTimeseriesAnnotationLayer(\n  layer: AnnotationLayer,\n): layer is TimeseriesAnnotationLayer {\n  return layer.annotationType === AnnotationType.Timeseries;\n}\n\nexport function isTableAnnotationLayer(\n  layer: AnnotationLayer,\n): layer is TableAnnotationLayer {\n  return layer.sourceType === AnnotationSourceType.Table;\n}\n\nexport type RecordAnnotationResult = {\n  records: DataRecord[];\n};\n\nexport type TimeseriesAnnotationResult = {\n  key: string;\n  values: { x: string | number; y?: number }[];\n}[];\n\nexport type AnnotationResult =\n  | RecordAnnotationResult\n  | TimeseriesAnnotationResult;\n\nexport function isTimeseriesAnnotationResult(\n  result: AnnotationResult,\n): result is TimeseriesAnnotationResult {\n  return Array.isArray(result);\n}\n\nexport function isRecordAnnotationResult(\n  result: any,\n): result is RecordAnnotationResult {\n  return Array.isArray(result?.records);\n}\n\nexport type AnnotationData = { [key: string]: AnnotationResult };\n\nexport type Annotation = {\n  descriptions?: string[];\n  intervalEnd?: string;\n  time?: string;\n  title?: string;\n};\n"]},"metadata":{},"sourceType":"module"}