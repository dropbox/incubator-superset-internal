{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Global, css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Popover from 'src/components/Popover';\nimport { FiltersContainer, FiltersDetailsContainer, Separator, SectionName } from 'src/dashboard/components/FiltersBadge/Styles';\nimport FilterIndicator from 'src/dashboard/components/FiltersBadge/FilterIndicator';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst DetailsPanelPopover = (_ref) => {let { appliedCrossFilterIndicators = [], appliedIndicators = [], onHighlightFilterSource, children } = _ref;\n  const [visible, setVisible] = useState(false);\n  const activeTabs = useSelector((state) => {var _state$dashboardState;return (_state$dashboardState = state.dashboardState) == null ? void 0 : _state$dashboardState.activeTabs;});\n  // we don't need to clean up useEffect, setting { once: true } removes the event listener after handle function is called\n  useEffect(() => {\n    if (visible) {\n      window.addEventListener('resize', () => setVisible(false), {\n        once: true });\n\n    }\n  }, [visible]);\n  // if tabs change, popover doesn't close automatically\n  useEffect(() => {\n    setVisible(false);\n  }, [activeTabs]);\n  function handlePopoverStatus(isOpen) {\n    setVisible(isOpen);\n  }\n  const indicatorKey = (indicator) => `${indicator.column} - ${indicator.name}`;\n  const content = ___EmotionJSX(FiltersDetailsContainer, null,\n  ___EmotionJSX(Global, { styles: (theme) => /*#__PURE__*/css(\".filterStatusPopover{.ant-popover-inner{background-color:\",\n\n\n    theme.colors.grayscale.dark2, \"cc;.ant-popover-inner-content{padding:\",\n\n    theme.gridUnit * 2, \"px;}}&.ant-popover-placement-bottom,&.ant-popover-placement-bottomLeft,&.ant-popover-placement-bottomRight{&>.ant-popover-content>.ant-popover-arrow{border-top-color:\",\n\n\n\n\n\n\n    theme.colors.grayscale.dark2, \"cc;border-left-color:\",\n    theme.colors.grayscale.dark2, \"cc;}}&.ant-popover-placement-top,&.ant-popover-placement-topLeft,&.ant-popover-placement-topRight{&>.ant-popover-content>.ant-popover-arrow{border-bottom-color:\",\n\n\n\n\n\n\n    theme.colors.grayscale.dark2, \"cc;border-right-color:\",\n    theme.colors.grayscale.dark2, \"cc;}}&.ant-popover-placement-left,&.ant-popover-placement-leftTop,&.ant-popover-placement-leftBottom{&>.ant-popover-content>.ant-popover-arrow{border-top-color:\",\n\n\n\n\n\n\n    theme.colors.grayscale.dark2, \"cc;border-right-color:\",\n    theme.colors.grayscale.dark2, \"cc;}}&.ant-popover-placement-right,&.ant-popover-placement-rightTop,&.ant-popover-placement-rightBottom{&>.ant-popover-content>.ant-popover-arrow{border-bottom-color:\",\n\n\n\n\n\n\n    theme.colors.grayscale.dark2, \"cc;border-left-color:\",\n    theme.colors.grayscale.dark2, \"cc;}}&.ant-popover{color:\",\n\n\n\n    theme.colors.grayscale.light4, \";z-index:99;}}\" + (process.env.NODE_ENV === \"production\" ? \"\" : \";label:content;\"), process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96aGFvcnVpL3NyYy9pbmN1YmF0b3Itc3VwZXJzZXQtaW50ZXJuYWwvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2Rhc2hib2FyZC9jb21wb25lbnRzL0ZpbHRlcnNCYWRnZS9EZXRhaWxzUGFuZWwvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTZDbUMiLCJmaWxlIjoiL1VzZXJzL3poYW9ydWkvc3JjL2luY3ViYXRvci1zdXBlcnNldC1pbnRlcm5hbC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvRmlsdGVyc0JhZGdlL0RldGFpbHNQYW5lbC9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgR2xvYmFsLCBjc3MgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IFBvcG92ZXIgZnJvbSAnc3JjL2NvbXBvbmVudHMvUG9wb3Zlcic7XG5pbXBvcnQgeyBGaWx0ZXJzQ29udGFpbmVyLCBGaWx0ZXJzRGV0YWlsc0NvbnRhaW5lciwgU2VwYXJhdG9yLCBTZWN0aW9uTmFtZSwgfSBmcm9tICdzcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvRmlsdGVyc0JhZGdlL1N0eWxlcyc7XG5pbXBvcnQgRmlsdGVySW5kaWNhdG9yIGZyb20gJ3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9GaWx0ZXJzQmFkZ2UvRmlsdGVySW5kaWNhdG9yJztcbmNvbnN0IERldGFpbHNQYW5lbFBvcG92ZXIgPSAoeyBhcHBsaWVkQ3Jvc3NGaWx0ZXJJbmRpY2F0b3JzID0gW10sIGFwcGxpZWRJbmRpY2F0b3JzID0gW10sIG9uSGlnaGxpZ2h0RmlsdGVyU291cmNlLCBjaGlsZHJlbiwgfSkgPT4ge1xuICAgIGNvbnN0IFt2aXNpYmxlLCBzZXRWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBhY3RpdmVUYWJzID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUuZGFzaGJvYXJkU3RhdGU/LmFjdGl2ZVRhYnMpO1xuICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gY2xlYW4gdXAgdXNlRWZmZWN0LCBzZXR0aW5nIHsgb25jZTogdHJ1ZSB9IHJlbW92ZXMgdGhlIGV2ZW50IGxpc3RlbmVyIGFmdGVyIGhhbmRsZSBmdW5jdGlvbiBpcyBjYWxsZWRcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHNldFZpc2libGUoZmFsc2UpLCB7XG4gICAgICAgICAgICAgICAgb25jZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgW3Zpc2libGVdKTtcbiAgICAvLyBpZiB0YWJzIGNoYW5nZSwgcG9wb3ZlciBkb2Vzbid0IGNsb3NlIGF1dG9tYXRpY2FsbHlcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9LCBbYWN0aXZlVGFic10pO1xuICAgIGZ1bmN0aW9uIGhhbmRsZVBvcG92ZXJTdGF0dXMoaXNPcGVuKSB7XG4gICAgICAgIHNldFZpc2libGUoaXNPcGVuKTtcbiAgICB9XG4gICAgY29uc3QgaW5kaWNhdG9yS2V5ID0gKGluZGljYXRvcikgPT4gYCR7aW5kaWNhdG9yLmNvbHVtbn0gLSAke2luZGljYXRvci5uYW1lfWA7XG4gICAgY29uc3QgY29udGVudCA9ICg8RmlsdGVyc0RldGFpbHNDb250YWluZXI+XG4gICAgICA8R2xvYmFsIHN0eWxlcz17dGhlbWUgPT4gY3NzIGBcbiAgICAgICAgICAuZmlsdGVyU3RhdHVzUG9wb3ZlciB7XG4gICAgICAgICAgICAuYW50LXBvcG92ZXItaW5uZXIge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuZGFyazJ9Y2M7XG4gICAgICAgICAgICAgIC5hbnQtcG9wb3Zlci1pbm5lci1jb250ZW50IHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAke3RoZW1lLmdyaWRVbml0ICogMn1weDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJi5hbnQtcG9wb3Zlci1wbGFjZW1lbnQtYm90dG9tLFxuICAgICAgICAgICAgJi5hbnQtcG9wb3Zlci1wbGFjZW1lbnQtYm90dG9tTGVmdCxcbiAgICAgICAgICAgICYuYW50LXBvcG92ZXItcGxhY2VtZW50LWJvdHRvbVJpZ2h0IHtcbiAgICAgICAgICAgICAgJiA+IC5hbnQtcG9wb3Zlci1jb250ZW50ID4gLmFudC1wb3BvdmVyLWFycm93IHtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuZGFyazJ9Y2M7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5kYXJrMn1jYztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJi5hbnQtcG9wb3Zlci1wbGFjZW1lbnQtdG9wLFxuICAgICAgICAgICAgJi5hbnQtcG9wb3Zlci1wbGFjZW1lbnQtdG9wTGVmdCxcbiAgICAgICAgICAgICYuYW50LXBvcG92ZXItcGxhY2VtZW50LXRvcFJpZ2h0IHtcbiAgICAgICAgICAgICAgJiA+IC5hbnQtcG9wb3Zlci1jb250ZW50ID4gLmFudC1wb3BvdmVyLWFycm93IHtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuZGFyazJ9Y2M7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuZGFyazJ9Y2M7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICYuYW50LXBvcG92ZXItcGxhY2VtZW50LWxlZnQsXG4gICAgICAgICAgICAmLmFudC1wb3BvdmVyLXBsYWNlbWVudC1sZWZ0VG9wLFxuICAgICAgICAgICAgJi5hbnQtcG9wb3Zlci1wbGFjZW1lbnQtbGVmdEJvdHRvbSB7XG4gICAgICAgICAgICAgICYgPiAuYW50LXBvcG92ZXItY29udGVudCA+IC5hbnQtcG9wb3Zlci1hcnJvdyB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmRhcmsyfWNjO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmRhcmsyfWNjO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAmLmFudC1wb3BvdmVyLXBsYWNlbWVudC1yaWdodCxcbiAgICAgICAgICAgICYuYW50LXBvcG92ZXItcGxhY2VtZW50LXJpZ2h0VG9wLFxuICAgICAgICAgICAgJi5hbnQtcG9wb3Zlci1wbGFjZW1lbnQtcmlnaHRCb3R0b20ge1xuICAgICAgICAgICAgICAmID4gLmFudC1wb3BvdmVyLWNvbnRlbnQgPiAuYW50LXBvcG92ZXItYXJyb3cge1xuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5kYXJrMn1jYztcbiAgICAgICAgICAgICAgICBib3JkZXItbGVmdC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmRhcmsyfWNjO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAmLmFudC1wb3BvdmVyIHtcbiAgICAgICAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDR9O1xuICAgICAgICAgICAgICB6LWluZGV4OiA5OTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIGB9Lz5cbiAgICAgIDxkaXY+XG4gICAgICAgIHthcHBsaWVkQ3Jvc3NGaWx0ZXJJbmRpY2F0b3JzLmxlbmd0aCA/ICg8ZGl2PlxuICAgICAgICAgICAgPFNlY3Rpb25OYW1lPlxuICAgICAgICAgICAgICB7dCgnQXBwbGllZCBjcm9zcy1maWx0ZXJzICglZCknLCBhcHBsaWVkQ3Jvc3NGaWx0ZXJJbmRpY2F0b3JzLmxlbmd0aCl9XG4gICAgICAgICAgICA8L1NlY3Rpb25OYW1lPlxuICAgICAgICAgICAgPEZpbHRlcnNDb250YWluZXI+XG4gICAgICAgICAgICAgIHthcHBsaWVkQ3Jvc3NGaWx0ZXJJbmRpY2F0b3JzLm1hcChpbmRpY2F0b3IgPT4gKDxGaWx0ZXJJbmRpY2F0b3Iga2V5PXtpbmRpY2F0b3JLZXkoaW5kaWNhdG9yKX0gaW5kaWNhdG9yPXtpbmRpY2F0b3J9IG9uQ2xpY2s9e29uSGlnaGxpZ2h0RmlsdGVyU291cmNlfS8+KSl9XG4gICAgICAgICAgICA8L0ZpbHRlcnNDb250YWluZXI+XG4gICAgICAgICAgPC9kaXY+KSA6IG51bGx9XG4gICAgICAgIHthcHBsaWVkQ3Jvc3NGaWx0ZXJJbmRpY2F0b3JzLmxlbmd0aCAmJiBhcHBsaWVkSW5kaWNhdG9ycy5sZW5ndGggPyAoPFNlcGFyYXRvciAvPikgOiBudWxsfVxuICAgICAgICB7YXBwbGllZEluZGljYXRvcnMubGVuZ3RoID8gKDxkaXY+XG4gICAgICAgICAgICA8U2VjdGlvbk5hbWU+XG4gICAgICAgICAgICAgIHt0KCdBcHBsaWVkIGZpbHRlcnMgKCVkKScsIGFwcGxpZWRJbmRpY2F0b3JzLmxlbmd0aCl9XG4gICAgICAgICAgICA8L1NlY3Rpb25OYW1lPlxuICAgICAgICAgICAgPEZpbHRlcnNDb250YWluZXI+XG4gICAgICAgICAgICAgIHthcHBsaWVkSW5kaWNhdG9ycy5tYXAoaW5kaWNhdG9yID0+ICg8RmlsdGVySW5kaWNhdG9yIGtleT17aW5kaWNhdG9yS2V5KGluZGljYXRvcil9IGluZGljYXRvcj17aW5kaWNhdG9yfSBvbkNsaWNrPXtvbkhpZ2hsaWdodEZpbHRlclNvdXJjZX0vPikpfVxuICAgICAgICAgICAgPC9GaWx0ZXJzQ29udGFpbmVyPlxuICAgICAgICAgIDwvZGl2PikgOiBudWxsfVxuICAgICAgPC9kaXY+XG4gICAgPC9GaWx0ZXJzRGV0YWlsc0NvbnRhaW5lcj4pO1xuICAgIHJldHVybiAoPFBvcG92ZXIgb3ZlcmxheUNsYXNzTmFtZT1cImZpbHRlclN0YXR1c1BvcG92ZXJcIiBjb250ZW50PXtjb250ZW50fSB2aXNpYmxlPXt2aXNpYmxlfSBvblZpc2libGVDaGFuZ2U9e2hhbmRsZVBvcG92ZXJTdGF0dXN9IHBsYWNlbWVudD1cImJvdHRvbVJpZ2h0XCIgdHJpZ2dlcj1cImhvdmVyXCI+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9Qb3BvdmVyPik7XG59O1xuZXhwb3J0IGRlZmF1bHQgRGV0YWlsc1BhbmVsUG9wb3ZlcjtcbiJdfQ== */\") }),\n\n\n\n\n  ___EmotionJSX(\"div\", null,\n  appliedCrossFilterIndicators.length ? ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(SectionName, null,\n  t('Applied cross-filters (%d)', appliedCrossFilterIndicators.length)),\n\n  ___EmotionJSX(FiltersContainer, null,\n  appliedCrossFilterIndicators.map((indicator) => ___EmotionJSX(FilterIndicator, { key: indicatorKey(indicator), indicator: indicator, onClick: onHighlightFilterSource })))) :\n\n  null,\n  appliedCrossFilterIndicators.length && appliedIndicators.length ? ___EmotionJSX(Separator, null) : null,\n  appliedIndicators.length ? ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(SectionName, null,\n  t('Applied filters (%d)', appliedIndicators.length)),\n\n  ___EmotionJSX(FiltersContainer, null,\n  appliedIndicators.map((indicator) => ___EmotionJSX(FilterIndicator, { key: indicatorKey(indicator), indicator: indicator, onClick: onHighlightFilterSource })))) :\n\n  null));\n\n\n  return ___EmotionJSX(Popover, { overlayClassName: \"filterStatusPopover\", content: content, visible: visible, onVisibleChange: handlePopoverStatus, placement: \"bottomRight\", trigger: \"hover\" },\n  children);\n\n};\nexport default DetailsPanelPopover;","map":{"version":3,"mappings":"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","names":["React","useEffect","useState","useSelector","Global","css","t","Popover","FiltersContainer","FiltersDetailsContainer","Separator","SectionName","FilterIndicator","DetailsPanelPopover","appliedCrossFilterIndicators","appliedIndicators","onHighlightFilterSource","children","visible","setVisible","activeTabs","state","dashboardState","window","addEventListener","once","handlePopoverStatus","isOpen","indicatorKey","indicator","column","name","content","theme","colors","grayscale","dark2","gridUnit","light4","length","map"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/dashboard/components/FiltersBadge/DetailsPanel/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Global, css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Popover from 'src/components/Popover';\nimport {\n  FiltersContainer,\n  FiltersDetailsContainer,\n  Separator,\n  SectionName,\n} from 'src/dashboard/components/FiltersBadge/Styles';\nimport { Indicator } from 'src/dashboard/components/nativeFilters/selectors';\nimport FilterIndicator from 'src/dashboard/components/FiltersBadge/FilterIndicator';\nimport { RootState } from 'src/dashboard/types';\n\nexport interface DetailsPanelProps {\n  appliedCrossFilterIndicators: Indicator[];\n  appliedIndicators: Indicator[];\n  onHighlightFilterSource: (path: string[]) => void;\n  children: JSX.Element;\n}\n\nconst DetailsPanelPopover = ({\n  appliedCrossFilterIndicators = [],\n  appliedIndicators = [],\n  onHighlightFilterSource,\n  children,\n}: DetailsPanelProps) => {\n  const [visible, setVisible] = useState(false);\n  const activeTabs = useSelector<RootState>(\n    state => state.dashboardState?.activeTabs,\n  );\n\n  // we don't need to clean up useEffect, setting { once: true } removes the event listener after handle function is called\n  useEffect(() => {\n    if (visible) {\n      window.addEventListener('resize', () => setVisible(false), {\n        once: true,\n      });\n    }\n  }, [visible]);\n\n  // if tabs change, popover doesn't close automatically\n  useEffect(() => {\n    setVisible(false);\n  }, [activeTabs]);\n\n  function handlePopoverStatus(isOpen: boolean) {\n    setVisible(isOpen);\n  }\n\n  const indicatorKey = (indicator: Indicator): string =>\n    `${indicator.column} - ${indicator.name}`;\n\n  const content = (\n    <FiltersDetailsContainer>\n      <Global\n        styles={theme => css`\n          .filterStatusPopover {\n            .ant-popover-inner {\n              background-color: ${theme.colors.grayscale.dark2}cc;\n              .ant-popover-inner-content {\n                padding: ${theme.gridUnit * 2}px;\n              }\n            }\n            &.ant-popover-placement-bottom,\n            &.ant-popover-placement-bottomLeft,\n            &.ant-popover-placement-bottomRight {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-top-color: ${theme.colors.grayscale.dark2}cc;\n                border-left-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover-placement-top,\n            &.ant-popover-placement-topLeft,\n            &.ant-popover-placement-topRight {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-bottom-color: ${theme.colors.grayscale.dark2}cc;\n                border-right-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover-placement-left,\n            &.ant-popover-placement-leftTop,\n            &.ant-popover-placement-leftBottom {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-top-color: ${theme.colors.grayscale.dark2}cc;\n                border-right-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover-placement-right,\n            &.ant-popover-placement-rightTop,\n            &.ant-popover-placement-rightBottom {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-bottom-color: ${theme.colors.grayscale.dark2}cc;\n                border-left-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover {\n              color: ${theme.colors.grayscale.light4};\n              z-index: 99;\n            }\n          }\n        `}\n      />\n      <div>\n        {appliedCrossFilterIndicators.length ? (\n          <div>\n            <SectionName>\n              {t(\n                'Applied cross-filters (%d)',\n                appliedCrossFilterIndicators.length,\n              )}\n            </SectionName>\n            <FiltersContainer>\n              {appliedCrossFilterIndicators.map(indicator => (\n                <FilterIndicator\n                  key={indicatorKey(indicator)}\n                  indicator={indicator}\n                  onClick={onHighlightFilterSource}\n                />\n              ))}\n            </FiltersContainer>\n          </div>\n        ) : null}\n        {appliedCrossFilterIndicators.length && appliedIndicators.length ? (\n          <Separator />\n        ) : null}\n        {appliedIndicators.length ? (\n          <div>\n            <SectionName>\n              {t('Applied filters (%d)', appliedIndicators.length)}\n            </SectionName>\n            <FiltersContainer>\n              {appliedIndicators.map(indicator => (\n                <FilterIndicator\n                  key={indicatorKey(indicator)}\n                  indicator={indicator}\n                  onClick={onHighlightFilterSource}\n                />\n              ))}\n            </FiltersContainer>\n          </div>\n        ) : null}\n      </div>\n    </FiltersDetailsContainer>\n  );\n\n  return (\n    <Popover\n      overlayClassName=\"filterStatusPopover\"\n      content={content}\n      visible={visible}\n      onVisibleChange={handlePopoverStatus}\n      placement=\"bottomRight\"\n      trigger=\"hover\"\n    >\n      {children}\n    </Popover>\n  );\n};\n\nexport default DetailsPanelPopover;\n"]},"metadata":{},"sourceType":"module"}