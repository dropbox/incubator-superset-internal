{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\n\nimport {\nFETCH_ALL_SLICES_FAILED,\nFETCH_ALL_SLICES_STARTED,\nADD_SLICES,\nSET_SLICES } from\n'../actions/sliceEntities';\nimport { HYDRATE_DASHBOARD } from '../actions/hydrate';\n\nexport const initSliceEntities = {\n  slices: {},\n  isLoading: true,\n  errorMessage: null,\n  lastUpdated: 0 };\n\n\nexport default function sliceEntitiesReducer(\nstate,\naction)\n{if (state === void 0) {state = initSliceEntities;}\n  const actionHandlers = {\n    [HYDRATE_DASHBOARD]() {\n      return {\n        ...action.data.sliceEntities };\n\n    },\n    [FETCH_ALL_SLICES_STARTED]() {\n      return {\n        ...state,\n        isLoading: true };\n\n    },\n    [ADD_SLICES]() {\n      return {\n        ...state,\n        isLoading: false,\n        slices: { ...state.slices, ...action.payload.slices },\n        lastUpdated: new Date().getTime() };\n\n    },\n    [SET_SLICES]() {\n      return {\n        isLoading: false,\n        slices: { ...action.payload.slices },\n        lastUpdated: new Date().getTime() };\n\n    },\n    [FETCH_ALL_SLICES_FAILED]() {\n      return {\n        ...state,\n        isLoading: false,\n        lastUpdated: new Date().getTime(),\n        errorMessage:\n        action.payload.error || t('Could not fetch all saved charts') };\n\n    } };\n\n\n  if (action.type in actionHandlers) {\n    return actionHandlers[action.type]();\n  }\n  return state;\n}","map":{"version":3,"names":["t","FETCH_ALL_SLICES_FAILED","FETCH_ALL_SLICES_STARTED","ADD_SLICES","SET_SLICES","HYDRATE_DASHBOARD","initSliceEntities","slices","isLoading","errorMessage","lastUpdated","sliceEntitiesReducer","state","action","actionHandlers","data","sliceEntities","payload","Date","getTime","error","type"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/reducers/sliceEntities.js"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\n\nimport {\n  FETCH_ALL_SLICES_FAILED,\n  FETCH_ALL_SLICES_STARTED,\n  ADD_SLICES,\n  SET_SLICES,\n} from '../actions/sliceEntities';\nimport { HYDRATE_DASHBOARD } from '../actions/hydrate';\n\nexport const initSliceEntities = {\n  slices: {},\n  isLoading: true,\n  errorMessage: null,\n  lastUpdated: 0,\n};\n\nexport default function sliceEntitiesReducer(\n  state = initSliceEntities,\n  action,\n) {\n  const actionHandlers = {\n    [HYDRATE_DASHBOARD]() {\n      return {\n        ...action.data.sliceEntities,\n      };\n    },\n    [FETCH_ALL_SLICES_STARTED]() {\n      return {\n        ...state,\n        isLoading: true,\n      };\n    },\n    [ADD_SLICES]() {\n      return {\n        ...state,\n        isLoading: false,\n        slices: { ...state.slices, ...action.payload.slices },\n        lastUpdated: new Date().getTime(),\n      };\n    },\n    [SET_SLICES]() {\n      return {\n        isLoading: false,\n        slices: { ...action.payload.slices },\n        lastUpdated: new Date().getTime(),\n      };\n    },\n    [FETCH_ALL_SLICES_FAILED]() {\n      return {\n        ...state,\n        isLoading: false,\n        lastUpdated: new Date().getTime(),\n        errorMessage:\n          action.payload.error || t('Could not fetch all saved charts'),\n      };\n    },\n  };\n\n  if (action.type in actionHandlers) {\n    return actionHandlers[action.type]();\n  }\n  return state;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,CAAT,QAAkB,mBAAlB;;AAEA;AACEC,uBADF;AAEEC,wBAFF;AAGEC,UAHF;AAIEC,UAJF;AAKO,0BALP;AAMA,SAASC,iBAAT,QAAkC,oBAAlC;;AAEA,OAAO,MAAMC,iBAAiB,GAAG;EAC/BC,MAAM,EAAE,EADuB;EAE/BC,SAAS,EAAE,IAFoB;EAG/BC,YAAY,EAAE,IAHiB;EAI/BC,WAAW,EAAE,CAJkB,EAA1B;;;AAOP,eAAe,SAASC,oBAAT;AACbC,KADa;AAEbC,MAFa;AAGb,KAFAD,KAEA,cAFAA,KAEA,GAFQN,iBAER;EACA,MAAMQ,cAAc,GAAG;IACrB,CAACT,iBAAD,IAAsB;MACpB,OAAO;QACL,GAAGQ,MAAM,CAACE,IAAP,CAAYC,aADV,EAAP;;IAGD,CALoB;IAMrB,CAACd,wBAAD,IAA6B;MAC3B,OAAO;QACL,GAAGU,KADE;QAELJ,SAAS,EAAE,IAFN,EAAP;;IAID,CAXoB;IAYrB,CAACL,UAAD,IAAe;MACb,OAAO;QACL,GAAGS,KADE;QAELJ,SAAS,EAAE,KAFN;QAGLD,MAAM,EAAE,EAAE,GAAGK,KAAK,CAACL,MAAX,EAAmB,GAAGM,MAAM,CAACI,OAAP,CAAeV,MAArC,EAHH;QAILG,WAAW,EAAE,IAAIQ,IAAJ,GAAWC,OAAX,EAJR,EAAP;;IAMD,CAnBoB;IAoBrB,CAACf,UAAD,IAAe;MACb,OAAO;QACLI,SAAS,EAAE,KADN;QAELD,MAAM,EAAE,EAAE,GAAGM,MAAM,CAACI,OAAP,CAAeV,MAApB,EAFH;QAGLG,WAAW,EAAE,IAAIQ,IAAJ,GAAWC,OAAX,EAHR,EAAP;;IAKD,CA1BoB;IA2BrB,CAAClB,uBAAD,IAA4B;MAC1B,OAAO;QACL,GAAGW,KADE;QAELJ,SAAS,EAAE,KAFN;QAGLE,WAAW,EAAE,IAAIQ,IAAJ,GAAWC,OAAX,EAHR;QAILV,YAAY;QACVI,MAAM,CAACI,OAAP,CAAeG,KAAf,IAAwBpB,CAAC,CAAC,kCAAD,CALtB,EAAP;;IAOD,CAnCoB,EAAvB;;;EAsCA,IAAIa,MAAM,CAACQ,IAAP,IAAeP,cAAnB,EAAmC;IACjC,OAAOA,cAAc,CAACD,MAAM,CAACQ,IAAR,CAAd,EAAP;EACD;EACD,OAAOT,KAAP;AACD"},"metadata":{},"sourceType":"module"}