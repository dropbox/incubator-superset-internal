{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, styled, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport Alert from 'src/components/Alert';\nimport Table, { TableSize } from 'src/components/Table';\nimport { alphabeticalSort } from 'src/components/Table/sorters';\n// @ts-ignore\nimport LOADING_GIF from 'src/assets/images/loading.gif';\nimport MessageContent from './MessageContent';\n/**\n * Enum defining CSS position options\n */import { jsx as ___EmotionJSX } from \"@emotion/react\";\nvar EPosition;\n(function (EPosition) {\n  EPosition[\"ABSOLUTE\"] = \"absolute\";\n  EPosition[\"RELATIVE\"] = \"relative\";\n})(EPosition || (EPosition = {}));\nconst LOADER_WIDTH = 200;\nconst SPINNER_WIDTH = 120;\nconst HALF = 0.5;\nconst MARGIN_MULTIPLIER = 3;\nconst StyledHeader = styled.div`\n  ${(_ref) => {let { theme, position } = _ref;return `\n  position: ${position};\n  margin: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  font-size: ${theme.gridUnit * 6}px;\n  font-weight: ${theme.typography.weights.medium};\n  padding-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  .anticon:first-of-type {\n    margin-right: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  }\n\n  .anticon:nth-of-type(2) {\n    margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  `;}}\n`;\nconst StyledTitle = styled.div`\n  ${(_ref2) => {let { theme } = _ref2;return `\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  margin-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  font-weight: ${theme.typography.weights.bold};\n  `;}}\n`;\nconst LoaderContainer = styled.div`\n  ${(_ref3) => {let { theme } = _ref3;return `\n  padding: ${theme.gridUnit * 8}px\n    ${theme.gridUnit * 6}px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  `;}}\n`;\nconst StyledLoader = styled.div`\n  ${(_ref4) => {let { theme } = _ref4;return `\n  max-width: 50%;\n  width: ${LOADER_WIDTH}px;\n\n  img {\n    width: ${SPINNER_WIDTH}px;\n    margin-left: ${(LOADER_WIDTH - SPINNER_WIDTH) * HALF}px;\n  }\n\n  div {\n    width: 100%;\n    margin-top: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n    text-align: center;\n    font-weight: ${theme.typography.weights.normal};\n    font-size: ${theme.typography.sizes.l}px;\n    color: ${theme.colors.grayscale.light1};\n  }\n  `;}}\n`;\nconst TableContainerWithBanner = styled.div`\n  ${(_ref5) => {let { theme } = _ref5;return `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 60}px);\n  overflow: auto;\n  `;}}\n`;\nconst TableContainerWithoutBanner = styled.div`\n  ${(_ref6) => {let { theme } = _ref6;return `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 30}px);\n  overflow: auto;\n  `;}}\n`;\nconst TableScrollContainer = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n`;\nconst StyledAlert = styled(Alert)`\n  ${(_ref7) => {let { theme } = _ref7;return `\n  border: 1px solid ${theme.colors.info.base};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 6}px ${theme.gridUnit * 6}px\n    ${theme.gridUnit * 8}px;\n  .view-dataset-button {\n    position: absolute;\n    top: ${theme.gridUnit * 4}px;\n    right: ${theme.gridUnit * 4}px;\n    font-weight: ${theme.typography.weights.normal};\n\n    &:hover {\n      color: ${theme.colors.secondary.dark3};\n      text-decoration: underline;\n    }\n  }\n  `;}}\n`;\nexport const REFRESHING = t('Refreshing columns');\nexport const COLUMN_TITLE = t('Table columns');\nexport const ALT_LOADING = t('Loading');\nconst pageSizeOptions = ['5', '10', '15', '25'];\nconst DEFAULT_PAGE_SIZE = 25;\n// Define the columns for Table instance\nexport const tableColumnDefinition = [\n{\n  title: 'Column Name',\n  dataIndex: 'name',\n  key: 'name',\n  sorter: (a, b) => alphabeticalSort('name', a, b) },\n\n{\n  title: 'Datatype',\n  dataIndex: 'type',\n  key: 'type',\n  width: '100px',\n  sorter: (a, b) => alphabeticalSort('type', a, b) }];\n\n\nconst EXISTING_DATASET_DESCRIPTION = t('This table already has a dataset associated with it. You can only associate one dataset with a table.\\n');\nconst VIEW_DATASET = t('View Dataset');\nconst renderExistingDatasetAlert = (dataset) => ___EmotionJSX(StyledAlert, { closable: false, type: \"info\", showIcon: true, message: t('This table already has a dataset'), description: ___EmotionJSX(React.Fragment, null,\n  EXISTING_DATASET_DESCRIPTION,\n  ___EmotionJSX(\"span\", { role: \"button\", onClick: () => {\n      window.open(dataset == null ? void 0 : dataset.explore_url, '_blank', 'noreferrer noopener popup=false');\n    }, tabIndex: 0, className: \"view-dataset-button\" },\n  VIEW_DATASET)) });\n\n\nconst DatasetPanel = (_ref8) => {var _ref9;let { tableName, columnList, loading, hasError, datasets } = _ref8;\n  const theme = useTheme();\n  const hasColumns = (_ref9 = (columnList == null ? void 0 : columnList.length) > 0) != null ? _ref9 : false;\n  const datasetNames = datasets == null ? void 0 : datasets.map((dataset) => dataset.table_name);\n  const tableWithDataset = datasets == null ? void 0 : datasets.find((dataset) => dataset.table_name === tableName);\n  let component;\n  let loader;\n  if (loading) {\n    loader = ___EmotionJSX(LoaderContainer, null,\n    ___EmotionJSX(StyledLoader, null,\n    ___EmotionJSX(\"img\", { alt: ALT_LOADING, src: LOADING_GIF }),\n    ___EmotionJSX(\"div\", null, REFRESHING)));\n\n\n  }\n  if (!loading) {\n    if (!loading && tableName && hasColumns && !hasError) {\n      component = ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(StyledTitle, null, COLUMN_TITLE),\n      tableWithDataset ? ___EmotionJSX(TableContainerWithBanner, null,\n      ___EmotionJSX(TableScrollContainer, null,\n      ___EmotionJSX(Table, { loading: loading, size: TableSize.SMALL, columns: tableColumnDefinition, data: columnList, pageSizeOptions: pageSizeOptions, defaultPageSize: DEFAULT_PAGE_SIZE }))) :\n\n      ___EmotionJSX(TableContainerWithoutBanner, null,\n      ___EmotionJSX(TableScrollContainer, null,\n      ___EmotionJSX(Table, { loading: loading, size: TableSize.SMALL, columns: tableColumnDefinition, data: columnList, pageSizeOptions: pageSizeOptions, defaultPageSize: DEFAULT_PAGE_SIZE }))));\n\n\n\n    } else\n    {\n      component = ___EmotionJSX(MessageContent, { hasColumns: hasColumns, hasError: hasError, tableName: tableName });\n    }\n  }\n  return ___EmotionJSX(React.Fragment, null,\n  tableName && ___EmotionJSX(React.Fragment, null,\n  (datasetNames == null ? void 0 : _includesInstanceProperty(datasetNames).call(datasetNames, tableName)) &&\n  renderExistingDatasetAlert(tableWithDataset),\n  ___EmotionJSX(StyledHeader, { position: !loading && hasColumns ? EPosition.RELATIVE : EPosition.ABSOLUTE, title: tableName || '' },\n  tableName && ___EmotionJSX(Icons.Table, { iconColor: theme.colors.grayscale.base }),\n  tableName)),\n\n\n  component,\n  loader);\n\n};__signature__(DatasetPanel, \"useTheme{theme}\", () => [useTheme]);const _default =\nDatasetPanel;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(EPosition, \"EPosition\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(LOADER_WIDTH, \"LOADER_WIDTH\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(SPINNER_WIDTH, \"SPINNER_WIDTH\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(HALF, \"HALF\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(MARGIN_MULTIPLIER, \"MARGIN_MULTIPLIER\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(StyledHeader, \"StyledHeader\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(StyledTitle, \"StyledTitle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(LoaderContainer, \"LoaderContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(StyledLoader, \"StyledLoader\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(TableContainerWithBanner, \"TableContainerWithBanner\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(TableContainerWithoutBanner, \"TableContainerWithoutBanner\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(TableScrollContainer, \"TableScrollContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(StyledAlert, \"StyledAlert\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(REFRESHING, \"REFRESHING\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(COLUMN_TITLE, \"COLUMN_TITLE\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(ALT_LOADING, \"ALT_LOADING\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(pageSizeOptions, \"pageSizeOptions\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(DEFAULT_PAGE_SIZE, \"DEFAULT_PAGE_SIZE\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(tableColumnDefinition, \"tableColumnDefinition\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(EXISTING_DATASET_DESCRIPTION, \"EXISTING_DATASET_DESCRIPTION\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(VIEW_DATASET, \"VIEW_DATASET\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(renderExistingDatasetAlert, \"renderExistingDatasetAlert\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(DatasetPanel, \"DatasetPanel\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["React","t","styled","useTheme","Icons","Alert","Table","TableSize","alphabeticalSort","LOADING_GIF","MessageContent","EPosition","LOADER_WIDTH","SPINNER_WIDTH","HALF","MARGIN_MULTIPLIER","StyledHeader","div","theme","position","gridUnit","typography","weights","medium","StyledTitle","bold","LoaderContainer","StyledLoader","normal","sizes","l","colors","grayscale","light1","TableContainerWithBanner","TableContainerWithoutBanner","TableScrollContainer","StyledAlert","info","base","secondary","dark3","REFRESHING","COLUMN_TITLE","ALT_LOADING","pageSizeOptions","DEFAULT_PAGE_SIZE","tableColumnDefinition","title","dataIndex","key","sorter","a","b","width","EXISTING_DATASET_DESCRIPTION","VIEW_DATASET","renderExistingDatasetAlert","dataset","window","open","explore_url","DatasetPanel","tableName","columnList","loading","hasError","datasets","hasColumns","length","datasetNames","map","table_name","tableWithDataset","find","component","loader","SMALL","RELATIVE","ABSOLUTE"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, styled, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport Alert from 'src/components/Alert';\nimport Table, { ColumnsType, TableSize } from 'src/components/Table';\nimport { alphabeticalSort } from 'src/components/Table/sorters';\n// @ts-ignore\nimport LOADING_GIF from 'src/assets/images/loading.gif';\nimport { DatasetObject } from 'src/features/datasets/AddDataset/types';\nimport { ITableColumn } from './types';\nimport MessageContent from './MessageContent';\n\n/**\n * Enum defining CSS position options\n */\nenum EPosition {\n  ABSOLUTE = 'absolute',\n  RELATIVE = 'relative',\n}\n\n/**\n * Interface for StyledHeader\n */\ninterface StyledHeaderProps {\n  /**\n   * Determine the CSS positioning type\n   * Vertical centering of loader, No columns screen, and select table screen\n   * gets offset when the header position is relative and needs to be absolute, but table\n   * needs this positioned relative to render correctly\n   */\n  position: EPosition;\n}\n\nconst LOADER_WIDTH = 200;\nconst SPINNER_WIDTH = 120;\nconst HALF = 0.5;\nconst MARGIN_MULTIPLIER = 3;\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n  ${({ theme, position }) => `\n  position: ${position};\n  margin: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  font-size: ${theme.gridUnit * 6}px;\n  font-weight: ${theme.typography.weights.medium};\n  padding-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  .anticon:first-of-type {\n    margin-right: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  }\n\n  .anticon:nth-of-type(2) {\n    margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  `}\n`;\n\nconst StyledTitle = styled.div`\n  ${({ theme }) => `\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  margin-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nconst LoaderContainer = styled.div`\n  ${({ theme }) => `\n  padding: ${theme.gridUnit * 8}px\n    ${theme.gridUnit * 6}px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  `}\n`;\n\nconst StyledLoader = styled.div`\n  ${({ theme }) => `\n  max-width: 50%;\n  width: ${LOADER_WIDTH}px;\n\n  img {\n    width: ${SPINNER_WIDTH}px;\n    margin-left: ${(LOADER_WIDTH - SPINNER_WIDTH) * HALF}px;\n  }\n\n  div {\n    width: 100%;\n    margin-top: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n    text-align: center;\n    font-weight: ${theme.typography.weights.normal};\n    font-size: ${theme.typography.sizes.l}px;\n    color: ${theme.colors.grayscale.light1};\n  }\n  `}\n`;\n\nconst TableContainerWithBanner = styled.div`\n  ${({ theme }) => `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 60}px);\n  overflow: auto;\n  `}\n`;\n\nconst TableContainerWithoutBanner = styled.div`\n  ${({ theme }) => `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 30}px);\n  overflow: auto;\n  `}\n`;\n\nconst TableScrollContainer = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst StyledAlert = styled(Alert)`\n  ${({ theme }) => `\n  border: 1px solid ${theme.colors.info.base};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 6}px ${theme.gridUnit * 6}px\n    ${theme.gridUnit * 8}px;\n  .view-dataset-button {\n    position: absolute;\n    top: ${theme.gridUnit * 4}px;\n    right: ${theme.gridUnit * 4}px;\n    font-weight: ${theme.typography.weights.normal};\n\n    &:hover {\n      color: ${theme.colors.secondary.dark3};\n      text-decoration: underline;\n    }\n  }\n  `}\n`;\n\nexport const REFRESHING = t('Refreshing columns');\nexport const COLUMN_TITLE = t('Table columns');\nexport const ALT_LOADING = t('Loading');\n\nconst pageSizeOptions = ['5', '10', '15', '25'];\nconst DEFAULT_PAGE_SIZE = 25;\n\n// Define the columns for Table instance\nexport const tableColumnDefinition: ColumnsType<ITableColumn> = [\n  {\n    title: 'Column Name',\n    dataIndex: 'name',\n    key: 'name',\n    sorter: (a: ITableColumn, b: ITableColumn) =>\n      alphabeticalSort('name', a, b),\n  },\n  {\n    title: 'Datatype',\n    dataIndex: 'type',\n    key: 'type',\n    width: '100px',\n    sorter: (a: ITableColumn, b: ITableColumn) =>\n      alphabeticalSort('type', a, b),\n  },\n];\n\n/**\n * Props interface for DatasetPanel\n */\nexport interface IDatasetPanelProps {\n  /**\n   * Name of the database table\n   */\n  tableName?: string | null;\n  /**\n   * Array of ITableColumn instances with name and type attributes\n   */\n  columnList: ITableColumn[];\n  /**\n   * Boolean indicating if there is an error state\n   */\n  hasError: boolean;\n  /**\n   * Boolean indicating if the component is in a loading state\n   */\n  loading: boolean;\n  datasets?: DatasetObject[] | undefined;\n}\n\nconst EXISTING_DATASET_DESCRIPTION = t(\n  'This table already has a dataset associated with it. You can only associate one dataset with a table.\\n',\n);\nconst VIEW_DATASET = t('View Dataset');\n\nconst renderExistingDatasetAlert = (dataset?: DatasetObject) => (\n  <StyledAlert\n    closable={false}\n    type=\"info\"\n    showIcon\n    message={t('This table already has a dataset')}\n    description={\n      <>\n        {EXISTING_DATASET_DESCRIPTION}\n        <span\n          role=\"button\"\n          onClick={() => {\n            window.open(\n              dataset?.explore_url,\n              '_blank',\n              'noreferrer noopener popup=false',\n            );\n          }}\n          tabIndex={0}\n          className=\"view-dataset-button\"\n        >\n          {VIEW_DATASET}\n        </span>\n      </>\n    }\n  />\n);\n\nconst DatasetPanel = ({\n  tableName,\n  columnList,\n  loading,\n  hasError,\n  datasets,\n}: IDatasetPanelProps) => {\n  const theme = useTheme();\n  const hasColumns = columnList?.length > 0 ?? false;\n  const datasetNames = datasets?.map(dataset => dataset.table_name);\n  const tableWithDataset = datasets?.find(\n    dataset => dataset.table_name === tableName,\n  );\n\n  let component;\n  let loader;\n  if (loading) {\n    loader = (\n      <LoaderContainer>\n        <StyledLoader>\n          <img alt={ALT_LOADING} src={LOADING_GIF} />\n          <div>{REFRESHING}</div>\n        </StyledLoader>\n      </LoaderContainer>\n    );\n  }\n  if (!loading) {\n    if (!loading && tableName && hasColumns && !hasError) {\n      component = (\n        <>\n          <StyledTitle>{COLUMN_TITLE}</StyledTitle>\n          {tableWithDataset ? (\n            <TableContainerWithBanner>\n              <TableScrollContainer>\n                <Table\n                  loading={loading}\n                  size={TableSize.SMALL}\n                  columns={tableColumnDefinition}\n                  data={columnList}\n                  pageSizeOptions={pageSizeOptions}\n                  defaultPageSize={DEFAULT_PAGE_SIZE}\n                />\n              </TableScrollContainer>\n            </TableContainerWithBanner>\n          ) : (\n            <TableContainerWithoutBanner>\n              <TableScrollContainer>\n                <Table\n                  loading={loading}\n                  size={TableSize.SMALL}\n                  columns={tableColumnDefinition}\n                  data={columnList}\n                  pageSizeOptions={pageSizeOptions}\n                  defaultPageSize={DEFAULT_PAGE_SIZE}\n                />\n              </TableScrollContainer>\n            </TableContainerWithoutBanner>\n          )}\n        </>\n      );\n    } else {\n      component = (\n        <MessageContent\n          hasColumns={hasColumns}\n          hasError={hasError}\n          tableName={tableName}\n        />\n      );\n    }\n  }\n\n  return (\n    <>\n      {tableName && (\n        <>\n          {datasetNames?.includes(tableName) &&\n            renderExistingDatasetAlert(tableWithDataset)}\n          <StyledHeader\n            position={\n              !loading && hasColumns ? EPosition.RELATIVE : EPosition.ABSOLUTE\n            }\n            title={tableName || ''}\n          >\n            {tableName && (\n              <Icons.Table iconColor={theme.colors.grayscale.base} />\n            )}\n            {tableName}\n          </StyledHeader>\n        </>\n      )}\n      {component}\n      {loader}\n    </>\n  );\n};\n\nexport default DatasetPanel;\n"]},"metadata":{},"sourceType":"module"}