{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\n/* eslint-disable react/sort-prop-types */\nimport d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { sankey as d3Sankey } from 'd3-sankey';\nimport {\ngetNumberFormatter,\nNumberFormats,\nCategoricalColorNamespace } from\n'@superset-ui/core';\nimport { getOverlappingElements } from './utils';\n\nconst propTypes = {\n  data: PropTypes.arrayOf(\n  PropTypes.shape({\n    source: PropTypes.string,\n    target: PropTypes.string,\n    value: PropTypes.number })),\n\n\n  width: PropTypes.number,\n  height: PropTypes.number,\n  colorScheme: PropTypes.string };\n\n\nconst formatNumber = getNumberFormatter(NumberFormats.FLOAT);\n\nfunction Sankey(element, props) {\n  const { data, width, height, colorScheme, sliceId } = props;\n  const div = d3.select(element);\n  div.classed(`superset-legacy-chart-sankey`, true);\n  const margin = {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5 };\n\n  const innerWidth = width - margin.left - margin.right;\n  const innerHeight = height - margin.top - margin.bottom;\n\n  div.selectAll('*').remove();\n  const tooltip = div.\n  append('div').\n  attr('class', 'sankey-tooltip').\n  style('opacity', 0);\n  const svg = div.\n  append('svg').\n  attr('width', innerWidth + margin.left + margin.right).\n  attr('height', innerHeight + margin.top + margin.bottom).\n  append('g').\n  attr('transform', `translate(${margin.left},${margin.top})`);\n\n  const colorFn = CategoricalColorNamespace.getScale(colorScheme);\n\n  const sankey = d3Sankey().\n  nodeWidth(15).\n  nodePadding(10).\n  size([innerWidth, innerHeight]);\n\n  const path = sankey.link();\n\n  let nodes = {};\n  // Compute the distinct nodes from the links.\n  const links = data.map((row) => {\n    const link = { ...row };\n    link.source =\n    nodes[link.source] || (nodes[link.source] = { name: link.source });\n    link.target =\n    nodes[link.target] || (nodes[link.target] = { name: link.target });\n    link.value = Number(link.value);\n\n    return link;\n  });\n  nodes = d3.values(nodes);\n\n  sankey.nodes(nodes).links(links).layout(32);\n\n  function getTooltipHtml(d) {\n    let html;\n\n    if (d.sourceLinks) {\n      // is node\n      html = `${d.name} Value: <span class='emph'>${formatNumber(\n      d.value)\n      }</span>`;\n    } else {\n      const val = formatNumber(d.value);\n      const sourcePercent = d3.round(d.value / d.source.value * 100, 1);\n      const targetPercent = d3.round(d.value / d.target.value * 100, 1);\n\n      html = [\n      \"<div class=''>Path Value: <span class='emph'>\",\n      val,\n      '</span></div>',\n      \"<div class='percents'>\",\n      \"<span class='emph'>\",\n      Number.isFinite(sourcePercent) ? sourcePercent : '100',\n      '%</span> of ',\n      d.source.name,\n      '<br/>',\n      `<span class='emph'>${\n      Number.isFinite(targetPercent) ? targetPercent : '--'\n      }%</span> of `,\n      d.target.name,\n      '</div>'].\n      join('');\n    }\n\n    return html;\n  }\n\n  function onmouseover(d) {\n    tooltip.\n    html(() => getTooltipHtml(d)).\n    transition().\n    duration(200);\n    const { height: tooltipHeight, width: tooltipWidth } = tooltip.\n    node().\n    getBoundingClientRect();\n    tooltip.\n    style(\n    'left',\n    `${Math.min(d3.event.offsetX + 10, width - tooltipWidth)}px`).\n\n    style(\n    'top',\n    `${Math.min(d3.event.offsetY + 10, height - tooltipHeight)}px`).\n\n    style('position', 'absolute').\n    style('opacity', 0.95);\n  }\n\n  function onmouseout() {\n    tooltip.transition().duration(100).style('opacity', 0);\n  }\n\n  const link = svg.\n  append('g').\n  selectAll('.link').\n  data(links).\n  enter().\n  append('path').\n  attr('class', 'link').\n  attr('d', path).\n  style('stroke-width', (d) => Math.max(1, d.dy)).\n  sort((a, b) => b.dy - a.dy).\n  on('mouseover', onmouseover).\n  on('mouseout', onmouseout);\n\n  function dragmove(d) {\n    d3.select(this).attr(\n    'transform',\n    `translate(${d.x},${d.y = Math.max(\n    0,\n    Math.min(height - d.dy, d3.event.y))\n    })`);\n\n    sankey.relayout();\n    link.attr('d', path);\n  }\n\n  function checkVisibility() {var _div$selectAll$;\n    const elements = (_div$selectAll$ = div.selectAll('.node')[0]) != null ? _div$selectAll$ : [];\n    const overlappingElements = getOverlappingElements(elements);\n\n    elements.forEach((el) => {\n      const text = el.getElementsByTagName('text')[0];\n\n      if (text) {\n        if (_includesInstanceProperty(overlappingElements).call(overlappingElements, el)) {\n          text.classList.add('opacity-0');\n        } else {\n          text.classList.remove('opacity-0');\n        }\n      }\n    });\n  }\n\n  const node = svg.\n  append('g').\n  selectAll('.node').\n  data(nodes).\n  enter().\n  append('g').\n  attr('class', 'node').\n  attr('transform', (d) => `translate(${d.x},${d.y})`).\n  call(\n  d3.behavior.\n  drag().\n  origin((d) => d).\n  on('dragstart', function dragStart() {\n    this.parentNode.append(this);\n  }).\n  on('drag', dragmove).\n  on('dragend', checkVisibility));\n\n  const minRectHeight = 5;\n  node.\n  append('rect').\n  attr('height', (d) => d.dy > minRectHeight ? d.dy : minRectHeight).\n  attr('width', sankey.nodeWidth()).\n  style('fill', (d) => {\n    const name = d.name || 'N/A';\n    d.color = colorFn(name, sliceId);\n\n    return d.color;\n  }).\n  style('stroke', (d) => d3.rgb(d.color).darker(2)).\n  on('mouseover', onmouseover).\n  on('mouseout', onmouseout);\n\n  node.\n  append('text').\n  attr('x', -6).\n  attr('y', (d) => d.dy / 2).\n  attr('dy', '.35em').\n  attr('text-anchor', 'end').\n  attr('transform', null).\n  text((d) => d.name).\n  attr('class', 'opacity-0').\n  filter((d) => d.x < innerWidth / 2).\n  attr('x', 6 + sankey.nodeWidth()).\n  attr('text-anchor', 'start');\n\n  checkVisibility();\n}\n\nSankey.displayName = 'Sankey';\nSankey.propTypes = propTypes;const _default =\n\nSankey;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/legacy-plugin-chart-sankey/src/Sankey.js\");reactHotLoader.register(formatNumber, \"formatNumber\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/legacy-plugin-chart-sankey/src/Sankey.js\");reactHotLoader.register(Sankey, \"Sankey\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/legacy-plugin-chart-sankey/src/Sankey.js\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/legacy-plugin-chart-sankey/src/Sankey.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["d3","PropTypes","sankey","d3Sankey","getNumberFormatter","NumberFormats","CategoricalColorNamespace","getOverlappingElements","propTypes","data","arrayOf","shape","source","string","target","value","number","width","height","colorScheme","formatNumber","FLOAT","Sankey","element","props","sliceId","div","select","classed","margin","top","right","bottom","left","innerWidth","innerHeight","selectAll","remove","tooltip","append","attr","style","svg","colorFn","getScale","nodeWidth","nodePadding","size","path","link","nodes","links","map","row","name","Number","values","layout","getTooltipHtml","d","html","sourceLinks","val","sourcePercent","round","targetPercent","isFinite","join","onmouseover","transition","duration","tooltipHeight","tooltipWidth","node","getBoundingClientRect","Math","min","event","offsetX","offsetY","onmouseout","enter","max","dy","sort","a","b","on","dragmove","x","y","relayout","checkVisibility","elements","overlappingElements","forEach","el","text","getElementsByTagName","classList","add","call","behavior","drag","origin","dragStart","parentNode","minRectHeight","color","rgb","darker","filter","displayName"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/legacy-plugin-chart-sankey/src/Sankey.js"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\n/* eslint-disable react/sort-prop-types */\nimport d3 from 'd3';\nimport PropTypes from 'prop-types';\nimport { sankey as d3Sankey } from 'd3-sankey';\nimport {\n  getNumberFormatter,\n  NumberFormats,\n  CategoricalColorNamespace,\n} from '@superset-ui/core';\nimport { getOverlappingElements } from './utils';\n\nconst propTypes = {\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      source: PropTypes.string,\n      target: PropTypes.string,\n      value: PropTypes.number,\n    }),\n  ),\n  width: PropTypes.number,\n  height: PropTypes.number,\n  colorScheme: PropTypes.string,\n};\n\nconst formatNumber = getNumberFormatter(NumberFormats.FLOAT);\n\nfunction Sankey(element, props) {\n  const { data, width, height, colorScheme, sliceId } = props;\n  const div = d3.select(element);\n  div.classed(`superset-legacy-chart-sankey`, true);\n  const margin = {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5,\n  };\n  const innerWidth = width - margin.left - margin.right;\n  const innerHeight = height - margin.top - margin.bottom;\n\n  div.selectAll('*').remove();\n  const tooltip = div\n    .append('div')\n    .attr('class', 'sankey-tooltip')\n    .style('opacity', 0);\n  const svg = div\n    .append('svg')\n    .attr('width', innerWidth + margin.left + margin.right)\n    .attr('height', innerHeight + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  const colorFn = CategoricalColorNamespace.getScale(colorScheme);\n\n  const sankey = d3Sankey()\n    .nodeWidth(15)\n    .nodePadding(10)\n    .size([innerWidth, innerHeight]);\n\n  const path = sankey.link();\n\n  let nodes = {};\n  // Compute the distinct nodes from the links.\n  const links = data.map(row => {\n    const link = { ...row };\n    link.source =\n      nodes[link.source] || (nodes[link.source] = { name: link.source });\n    link.target =\n      nodes[link.target] || (nodes[link.target] = { name: link.target });\n    link.value = Number(link.value);\n\n    return link;\n  });\n  nodes = d3.values(nodes);\n\n  sankey.nodes(nodes).links(links).layout(32);\n\n  function getTooltipHtml(d) {\n    let html;\n\n    if (d.sourceLinks) {\n      // is node\n      html = `${d.name} Value: <span class='emph'>${formatNumber(\n        d.value,\n      )}</span>`;\n    } else {\n      const val = formatNumber(d.value);\n      const sourcePercent = d3.round((d.value / d.source.value) * 100, 1);\n      const targetPercent = d3.round((d.value / d.target.value) * 100, 1);\n\n      html = [\n        \"<div class=''>Path Value: <span class='emph'>\",\n        val,\n        '</span></div>',\n        \"<div class='percents'>\",\n        \"<span class='emph'>\",\n        Number.isFinite(sourcePercent) ? sourcePercent : '100',\n        '%</span> of ',\n        d.source.name,\n        '<br/>',\n        `<span class='emph'>${\n          Number.isFinite(targetPercent) ? targetPercent : '--'\n        }%</span> of `,\n        d.target.name,\n        '</div>',\n      ].join('');\n    }\n\n    return html;\n  }\n\n  function onmouseover(d) {\n    tooltip\n      .html(() => getTooltipHtml(d))\n      .transition()\n      .duration(200);\n    const { height: tooltipHeight, width: tooltipWidth } = tooltip\n      .node()\n      .getBoundingClientRect();\n    tooltip\n      .style(\n        'left',\n        `${Math.min(d3.event.offsetX + 10, width - tooltipWidth)}px`,\n      )\n      .style(\n        'top',\n        `${Math.min(d3.event.offsetY + 10, height - tooltipHeight)}px`,\n      )\n      .style('position', 'absolute')\n      .style('opacity', 0.95);\n  }\n\n  function onmouseout() {\n    tooltip.transition().duration(100).style('opacity', 0);\n  }\n\n  const link = svg\n    .append('g')\n    .selectAll('.link')\n    .data(links)\n    .enter()\n    .append('path')\n    .attr('class', 'link')\n    .attr('d', path)\n    .style('stroke-width', d => Math.max(1, d.dy))\n    .sort((a, b) => b.dy - a.dy)\n    .on('mouseover', onmouseover)\n    .on('mouseout', onmouseout);\n\n  function dragmove(d) {\n    d3.select(this).attr(\n      'transform',\n      `translate(${d.x},${(d.y = Math.max(\n        0,\n        Math.min(height - d.dy, d3.event.y),\n      ))})`,\n    );\n    sankey.relayout();\n    link.attr('d', path);\n  }\n\n  function checkVisibility() {\n    const elements = div.selectAll('.node')[0] ?? [];\n    const overlappingElements = getOverlappingElements(elements);\n\n    elements.forEach(el => {\n      const text = el.getElementsByTagName('text')[0];\n\n      if (text) {\n        if (overlappingElements.includes(el)) {\n          text.classList.add('opacity-0');\n        } else {\n          text.classList.remove('opacity-0');\n        }\n      }\n    });\n  }\n\n  const node = svg\n    .append('g')\n    .selectAll('.node')\n    .data(nodes)\n    .enter()\n    .append('g')\n    .attr('class', 'node')\n    .attr('transform', d => `translate(${d.x},${d.y})`)\n    .call(\n      d3.behavior\n        .drag()\n        .origin(d => d)\n        .on('dragstart', function dragStart() {\n          this.parentNode.append(this);\n        })\n        .on('drag', dragmove)\n        .on('dragend', checkVisibility),\n    );\n  const minRectHeight = 5;\n  node\n    .append('rect')\n    .attr('height', d => (d.dy > minRectHeight ? d.dy : minRectHeight))\n    .attr('width', sankey.nodeWidth())\n    .style('fill', d => {\n      const name = d.name || 'N/A';\n      d.color = colorFn(name, sliceId);\n\n      return d.color;\n    })\n    .style('stroke', d => d3.rgb(d.color).darker(2))\n    .on('mouseover', onmouseover)\n    .on('mouseout', onmouseout);\n\n  node\n    .append('text')\n    .attr('x', -6)\n    .attr('y', d => d.dy / 2)\n    .attr('dy', '.35em')\n    .attr('text-anchor', 'end')\n    .attr('transform', null)\n    .text(d => d.name)\n    .attr('class', 'opacity-0')\n    .filter(d => d.x < innerWidth / 2)\n    .attr('x', 6 + sankey.nodeWidth())\n    .attr('text-anchor', 'start');\n\n  checkVisibility();\n}\n\nSankey.displayName = 'Sankey';\nSankey.propTypes = propTypes;\n\nexport default Sankey;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}