{"ast":null,"code":"import _isEmpty from \"lodash/isEmpty\";import _isEqual from \"lodash/isEqual\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { styled, t } from '@superset-ui/core';\nimport { sanitizeFormData } from 'src/explore/exploreUtils/formData';\nimport getControlsForVizType from 'src/utils/getControlsForVizType';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ModalTrigger from '../ModalTrigger';\nimport TableView from '../TableView';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  origFormData: PropTypes.object.isRequired,\n  currentFormData: PropTypes.object.isRequired };\n\n\nconst StyledLabel = styled.span`\n  ${(_ref) => {let { theme } = _ref;return `\n    font-size: ${theme.typography.sizes.s}px;\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.alert.base};\n\n    &: hover {\n      background-color: ${theme.colors.alert.dark1};\n    }\n  `;}}\n`;\n\nfunction alterForComparison(value) {\n  // Considering `[]`, `{}`, `null` and `undefined` as identical\n  // for this purpose\n  if (value === undefined || value === null || value === '') {\n    return null;\n  }\n  if (typeof value === 'object') {\n    if (Array.isArray(value) && value.length === 0) {\n      return null;\n    }\n    const keys = Object.keys(value);\n    if (keys && keys.length === 0) {\n      return null;\n    }\n  }\n  return value;\n}\n\nexport default class AlteredSliceTag extends React.Component {\n  constructor(props) {\n    super(props);\n    const diffs = this.getDiffs(props);\n    const controlsMap = getControlsForVizType(this.props.origFormData.viz_type);\n    const rows = this.getRowsFromDiffs(diffs, controlsMap);\n\n    this.state = { rows, hasDiffs: !_isEmpty(diffs), controlsMap };\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    // Update differences if need be\n    if (_isEqual(this.props, newProps)) {\n      return;\n    }\n    const diffs = this.getDiffs(newProps);\n    this.setState((prevState) => ({\n      rows: this.getRowsFromDiffs(diffs, prevState.controlsMap),\n      hasDiffs: !_isEmpty(diffs) }));\n\n  }\n\n  getRowsFromDiffs(diffs, controlsMap) {\n    return Object.entries(diffs).map((_ref2) => {let [key, diff] = _ref2;return {\n        control: controlsMap[key] && controlsMap[key].label || key,\n        before: this.formatValue(diff.before, key, controlsMap),\n        after: this.formatValue(diff.after, key, controlsMap) };});\n\n  }\n\n  getDiffs(props) {\n    // Returns all properties that differ in the\n    // current form data and the saved form data\n    const ofd = sanitizeFormData(props.origFormData);\n    const cfd = sanitizeFormData(props.currentFormData);\n\n    const fdKeys = Object.keys(cfd);\n    const diffs = {};\n    fdKeys.forEach((fdKey) => {var _context;\n      if (!ofd[fdKey] && !cfd[fdKey]) {\n        return;\n      }\n      if (_includesInstanceProperty(_context = ['filters', 'having', 'having_filters', 'where']).call(_context, fdKey)) {\n        return;\n      }\n      if (!this.isEqualish(ofd[fdKey], cfd[fdKey])) {\n        diffs[fdKey] = { before: ofd[fdKey], after: cfd[fdKey] };\n      }\n    });\n    return diffs;\n  }\n\n  isEqualish(val1, val2) {\n    return _isEqual(alterForComparison(val1), alterForComparison(val2));\n  }\n\n  formatValue(value, key, controlsMap) {var _controlsMap$key, _controlsMap$key2, _controlsMap$key3, _controlsMap$key4;\n    // Format display value based on the control type\n    // or the value type\n    if (value === undefined) {\n      return 'N/A';\n    }\n    if (value === null) {\n      return 'null';\n    }\n    if (((_controlsMap$key = controlsMap[key]) == null ? void 0 : _controlsMap$key.type) === 'AdhocFilterControl') {\n      if (!value.length) {\n        return '[]';\n      }\n      return value.\n      map((v) => {\n        const filterVal =\n        v.comparator && v.comparator.constructor === Array ?\n        `[${v.comparator.join(', ')}]` :\n        v.comparator;\n        return `${v.subject} ${v.operator} ${filterVal}`;\n      }).\n      join(', ');\n    }\n    if (((_controlsMap$key2 = controlsMap[key]) == null ? void 0 : _controlsMap$key2.type) === 'BoundsControl') {\n      return `Min: ${value[0]}, Max: ${value[1]}`;\n    }\n    if (((_controlsMap$key3 = controlsMap[key]) == null ? void 0 : _controlsMap$key3.type) === 'CollectionControl') {\n      return value.map((v) => safeStringify(v)).join(', ');\n    }\n    if (\n    ((_controlsMap$key4 = controlsMap[key]) == null ? void 0 : _controlsMap$key4.type) === 'MetricsControl' &&\n    value.constructor === Array)\n    {\n      const formattedValue = value.map((v) => {var _v$label;return (_v$label = v == null ? void 0 : v.label) != null ? _v$label : v;});\n      return formattedValue.length ? formattedValue.join(', ') : '[]';\n    }\n    if (typeof value === 'boolean') {\n      return value ? 'true' : 'false';\n    }\n    if (value.constructor === Array) {\n      const formattedValue = value.map((v) => {var _v$label2;return (_v$label2 = v == null ? void 0 : v.label) != null ? _v$label2 : v;});\n      return formattedValue.length ? formattedValue.join(', ') : '[]';\n    }\n    if (typeof value === 'string' || typeof value === 'number') {\n      return value;\n    }\n    return safeStringify(value);\n  }\n\n  renderModalBody() {\n    const columns = [\n    {\n      accessor: 'control',\n      Header: t('Control') },\n\n    {\n      accessor: 'before',\n      Header: t('Before') },\n\n    {\n      accessor: 'after',\n      Header: t('After') }];\n\n\n    // set the wrap text in the specific columns.\n    const columnsForWrapText = ['Control', 'Before', 'After'];\n\n    return (\n      ___EmotionJSX(TableView, {\n        columns: columns,\n        data: this.state.rows,\n        pageSize: 50,\n        className: \"table-condensed\",\n        columnsForWrapText: columnsForWrapText }));\n\n\n  }\n\n  renderTriggerNode() {\n    return (\n      ___EmotionJSX(Tooltip, { id: \"difference-tooltip\", title: t('Click to see difference') },\n      ___EmotionJSX(StyledLabel, { className: \"label\" }, t('Altered'))));\n\n\n  }\n\n  render() {\n    // Return nothing if there are no differences\n    if (!this.state.hasDiffs) {\n      return null;\n    }\n    // Render the label-warning 'Altered' tag which the user may\n    // click to open a modal containing a table summarizing the\n    // differences in the slice\n    return (\n      ___EmotionJSX(ModalTrigger, {\n        triggerNode: this.renderTriggerNode(),\n        modalTitle: t('Chart changes'),\n        modalBody: this.renderModalBody(),\n        responsive: true }));\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAlteredSliceTag.propTypes = propTypes;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/AlteredSliceTag/index.jsx\");reactHotLoader.register(StyledLabel, \"StyledLabel\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/AlteredSliceTag/index.jsx\");reactHotLoader.register(alterForComparison, \"alterForComparison\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/AlteredSliceTag/index.jsx\");reactHotLoader.register(AlteredSliceTag, \"AlteredSliceTag\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/AlteredSliceTag/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","PropTypes","styled","t","sanitizeFormData","getControlsForVizType","safeStringify","Tooltip","ModalTrigger","TableView","propTypes","origFormData","object","isRequired","currentFormData","StyledLabel","span","theme","typography","sizes","s","colors","grayscale","dark1","alert","base","alterForComparison","value","undefined","Array","isArray","length","keys","Object","AlteredSliceTag","Component","constructor","props","diffs","getDiffs","controlsMap","viz_type","rows","getRowsFromDiffs","state","hasDiffs","UNSAFE_componentWillReceiveProps","newProps","setState","prevState","entries","map","key","diff","control","label","before","formatValue","after","ofd","cfd","fdKeys","forEach","fdKey","isEqualish","val1","val2","type","v","filterVal","comparator","join","subject","operator","formattedValue","renderModalBody","columns","accessor","Header","columnsForWrapText","renderTriggerNode","render"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/AlteredSliceTag/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isEqual, isEmpty } from 'lodash';\nimport { styled, t } from '@superset-ui/core';\nimport { sanitizeFormData } from 'src/explore/exploreUtils/formData';\nimport getControlsForVizType from 'src/utils/getControlsForVizType';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ModalTrigger from '../ModalTrigger';\nimport TableView from '../TableView';\n\nconst propTypes = {\n  origFormData: PropTypes.object.isRequired,\n  currentFormData: PropTypes.object.isRequired,\n};\n\nconst StyledLabel = styled.span`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.s}px;\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.alert.base};\n\n    &: hover {\n      background-color: ${theme.colors.alert.dark1};\n    }\n  `}\n`;\n\nfunction alterForComparison(value) {\n  // Considering `[]`, `{}`, `null` and `undefined` as identical\n  // for this purpose\n  if (value === undefined || value === null || value === '') {\n    return null;\n  }\n  if (typeof value === 'object') {\n    if (Array.isArray(value) && value.length === 0) {\n      return null;\n    }\n    const keys = Object.keys(value);\n    if (keys && keys.length === 0) {\n      return null;\n    }\n  }\n  return value;\n}\n\nexport default class AlteredSliceTag extends React.Component {\n  constructor(props) {\n    super(props);\n    const diffs = this.getDiffs(props);\n    const controlsMap = getControlsForVizType(this.props.origFormData.viz_type);\n    const rows = this.getRowsFromDiffs(diffs, controlsMap);\n\n    this.state = { rows, hasDiffs: !isEmpty(diffs), controlsMap };\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    // Update differences if need be\n    if (isEqual(this.props, newProps)) {\n      return;\n    }\n    const diffs = this.getDiffs(newProps);\n    this.setState(prevState => ({\n      rows: this.getRowsFromDiffs(diffs, prevState.controlsMap),\n      hasDiffs: !isEmpty(diffs),\n    }));\n  }\n\n  getRowsFromDiffs(diffs, controlsMap) {\n    return Object.entries(diffs).map(([key, diff]) => ({\n      control: (controlsMap[key] && controlsMap[key].label) || key,\n      before: this.formatValue(diff.before, key, controlsMap),\n      after: this.formatValue(diff.after, key, controlsMap),\n    }));\n  }\n\n  getDiffs(props) {\n    // Returns all properties that differ in the\n    // current form data and the saved form data\n    const ofd = sanitizeFormData(props.origFormData);\n    const cfd = sanitizeFormData(props.currentFormData);\n\n    const fdKeys = Object.keys(cfd);\n    const diffs = {};\n    fdKeys.forEach(fdKey => {\n      if (!ofd[fdKey] && !cfd[fdKey]) {\n        return;\n      }\n      if (['filters', 'having', 'having_filters', 'where'].includes(fdKey)) {\n        return;\n      }\n      if (!this.isEqualish(ofd[fdKey], cfd[fdKey])) {\n        diffs[fdKey] = { before: ofd[fdKey], after: cfd[fdKey] };\n      }\n    });\n    return diffs;\n  }\n\n  isEqualish(val1, val2) {\n    return isEqual(alterForComparison(val1), alterForComparison(val2));\n  }\n\n  formatValue(value, key, controlsMap) {\n    // Format display value based on the control type\n    // or the value type\n    if (value === undefined) {\n      return 'N/A';\n    }\n    if (value === null) {\n      return 'null';\n    }\n    if (controlsMap[key]?.type === 'AdhocFilterControl') {\n      if (!value.length) {\n        return '[]';\n      }\n      return value\n        .map(v => {\n          const filterVal =\n            v.comparator && v.comparator.constructor === Array\n              ? `[${v.comparator.join(', ')}]`\n              : v.comparator;\n          return `${v.subject} ${v.operator} ${filterVal}`;\n        })\n        .join(', ');\n    }\n    if (controlsMap[key]?.type === 'BoundsControl') {\n      return `Min: ${value[0]}, Max: ${value[1]}`;\n    }\n    if (controlsMap[key]?.type === 'CollectionControl') {\n      return value.map(v => safeStringify(v)).join(', ');\n    }\n    if (\n      controlsMap[key]?.type === 'MetricsControl' &&\n      value.constructor === Array\n    ) {\n      const formattedValue = value.map(v => v?.label ?? v);\n      return formattedValue.length ? formattedValue.join(', ') : '[]';\n    }\n    if (typeof value === 'boolean') {\n      return value ? 'true' : 'false';\n    }\n    if (value.constructor === Array) {\n      const formattedValue = value.map(v => v?.label ?? v);\n      return formattedValue.length ? formattedValue.join(', ') : '[]';\n    }\n    if (typeof value === 'string' || typeof value === 'number') {\n      return value;\n    }\n    return safeStringify(value);\n  }\n\n  renderModalBody() {\n    const columns = [\n      {\n        accessor: 'control',\n        Header: t('Control'),\n      },\n      {\n        accessor: 'before',\n        Header: t('Before'),\n      },\n      {\n        accessor: 'after',\n        Header: t('After'),\n      },\n    ];\n    // set the wrap text in the specific columns.\n    const columnsForWrapText = ['Control', 'Before', 'After'];\n\n    return (\n      <TableView\n        columns={columns}\n        data={this.state.rows}\n        pageSize={50}\n        className=\"table-condensed\"\n        columnsForWrapText={columnsForWrapText}\n      />\n    );\n  }\n\n  renderTriggerNode() {\n    return (\n      <Tooltip id=\"difference-tooltip\" title={t('Click to see difference')}>\n        <StyledLabel className=\"label\">{t('Altered')}</StyledLabel>\n      </Tooltip>\n    );\n  }\n\n  render() {\n    // Return nothing if there are no differences\n    if (!this.state.hasDiffs) {\n      return null;\n    }\n    // Render the label-warning 'Altered' tag which the user may\n    // click to open a modal containing a table summarizing the\n    // differences in the slice\n    return (\n      <ModalTrigger\n        triggerNode={this.renderTriggerNode()}\n        modalTitle={t('Chart changes')}\n        modalBody={this.renderModalBody()}\n        responsive\n      />\n    );\n  }\n}\n\nAlteredSliceTag.propTypes = propTypes;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}