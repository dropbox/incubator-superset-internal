{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled, css, useTheme, getColumnLabel, useCSSTextTruncation } from '@superset-ui/core';\nimport { Tag } from 'src/components';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { FilterBarOrientation } from 'src/dashboard/types';\nimport { ellipsisCss } from './styles';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledCrossFilterValue = styled.b`\n  ${(_ref) => {let { theme } = _ref;return `\n    max-width: ${theme.gridUnit * 25}px;\n  `;}}\n  ${ellipsisCss}\n`;\nconst StyledCrossFilterColumn = styled('span')`\n  ${(_ref2) => {let { theme } = _ref2;return `\n    max-width: ${theme.gridUnit * 25}px;\n    padding-right: ${theme.gridUnit}px;\n  `;}}\n  ${ellipsisCss}\n`;\nconst StyledTag = styled(Tag)`\n  ${(_ref3) => {let { theme } = _ref3;return `\n    border: 1px solid ${theme.colors.grayscale.light3};\n    border-radius: 2px;\n    .anticon-close {\n      vertical-align: middle;\n    }\n  `;}}\n`;\nconst CrossFilterTag = (props) => {var _filter$column;\n  const { filter, orientation, removeCrossFilter } = props;\n  const theme = useTheme();\n  const [columnRef, columnIsTruncated] = useCSSTextTruncation();\n  const [valueRef, valueIsTruncated] = useCSSTextTruncation();\n  const columnLabel = getColumnLabel((_filter$column = filter.column) != null ? _filter$column : '');\n  return ___EmotionJSX(StyledTag, { css: css`\n        ${orientation === FilterBarOrientation.VERTICAL ?\n    `\n            margin-top: ${theme.gridUnit * 2}px;\n          ` :\n    `\n            margin-left: ${theme.gridUnit * 2}px;\n          `}\n      `, closable: true, onClose: () => removeCrossFilter(filter.emitterId) },\n  ___EmotionJSX(Tooltip, { title: columnIsTruncated ? columnLabel : null },\n  ___EmotionJSX(StyledCrossFilterColumn, { ref: columnRef },\n  columnLabel)),\n\n\n  ___EmotionJSX(Tooltip, { title: valueIsTruncated ? filter.value : null },\n  ___EmotionJSX(StyledCrossFilterValue, { ref: valueRef },\n  filter.value)));\n\n\n\n};\nexport default CrossFilterTag;","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;;;;AAmBA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,MADF,EAEEC,GAFF,EAGEC,QAHF,EAIEC,cAJF,EAKEC,oBALF,QAMO,mBANP;AAQA,SAASC,GAAT,QAAoB,gBAApB;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,oBAAT,QAAqC,qBAArC;AACA,SAASC,WAAT,QAA4B,UAA5B,C;AAEA,MAAMC,sBAAsB,GAAGT,MAAM,CAACU,CAAC;IACnC,eAAC,EAAEC,KAAF,EAAD,eAAe;iBACFA,KAAK,CAACC,QAAN,GAAiB,EAAE;GADhC,EAED;IACCJ,WAAW;CAJf;AAOA,MAAMK,uBAAuB,GAAGb,MAAM,CAAC,MAAD,CAAQ;IAC1C,gBAAC,EAAEW,KAAF,EAAD,gBAAe;iBACFA,KAAK,CAACC,QAAN,GAAiB,EAAE;qBACfD,KAAK,CAACC,QAAQ;GAF/B,EAGD;IACCJ,WAAW;CALf;AAQA,MAAMM,SAAS,GAAGd,MAAM,CAACK,GAAD,CAAK;IACzB,gBAAC,EAAEM,KAAF,EAAD,gBAAe;wBACKA,KAAK,CAACI,MAAN,CAAaC,SAAb,CAAuBC,MAAM;;;;;GADjD,EAMD;CAPH;AAUA,MAAMC,cAAc,GAAG,CAACC,KAAD,KAIlB;EACH,MAAM,EAAEC,MAAF,EAAUC,WAAV,EAAuBC,iBAAvB,KAA6CH,KAAnD;EACA,MAAMR,KAAK,GAAGT,QAAQ,EAAtB;EACA,MAAM,CAACqB,SAAD,EAAYC,iBAAZ,IACJpB,oBAAoB,EADtB;EAEA,MAAM,CAACqB,QAAD,EAAWC,gBAAX,IAA+BtB,oBAAoB,EAAzD;EAEA,MAAMuB,WAAW,GAAGxB,cAAc,mBAACiB,MAAM,CAACQ,MAAR,6BAAkB,EAAlB,CAAlC;EACA,OACE,cAAC,SAAD,IACE,GAAG,EAAE3B,GAAG;UACJoB,WAAW,KAAKd,oBAAoB,CAACsB,QAArC;IACE;0BACclB,KAAK,CAACC,QAAN,GAAiB,CAAC;WAFlC;IAIE;2BACeD,KAAK,CAACC,QAAN,GAAiB,CAAC;WAClC;OARP,EAUE,QAAQ,MAVV,EAWE,OAAO,EAAE,MAAMU,iBAAiB,CAACF,MAAM,CAACU,SAAR,CAXlC;EAaE,cAAC,OAAD,IAAS,KAAK,EAAEN,iBAAiB,GAAGG,WAAH,GAAiB,IAAlD;EACE,cAAC,uBAAD,IAAyB,GAAG,EAAEJ,SAA9B;EACGI,WADH,CADF,CAbF;;;EAkBE,cAAC,OAAD,IAAS,KAAK,EAAED,gBAAgB,GAAGN,MAAM,CAACW,KAAV,GAAkB,IAAlD;EACE,cAAC,sBAAD,IAAwB,GAAG,EAAEN,QAA7B;EACGL,MAAM,CAACW,KADV,CADF,CAlBF,CADF;;;;AA0BD,CAtCD;AAwCA,eAAeb,cAAf","names":["React","styled","css","useTheme","getColumnLabel","useCSSTextTruncation","Tag","Tooltip","FilterBarOrientation","ellipsisCss","StyledCrossFilterValue","b","theme","gridUnit","StyledCrossFilterColumn","StyledTag","colors","grayscale","light3","CrossFilterTag","props","filter","orientation","removeCrossFilter","columnRef","columnIsTruncated","valueRef","valueIsTruncated","columnLabel","column","VERTICAL","emitterId","value"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/CrossFilters/CrossFilterTag.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport {\n  styled,\n  css,\n  useTheme,\n  getColumnLabel,\n  useCSSTextTruncation,\n} from '@superset-ui/core';\nimport { CrossFilterIndicator } from 'src/dashboard/components/nativeFilters/selectors';\nimport { Tag } from 'src/components';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { FilterBarOrientation } from 'src/dashboard/types';\nimport { ellipsisCss } from './styles';\n\nconst StyledCrossFilterValue = styled.b`\n  ${({ theme }) => `\n    max-width: ${theme.gridUnit * 25}px;\n  `}\n  ${ellipsisCss}\n`;\n\nconst StyledCrossFilterColumn = styled('span')`\n  ${({ theme }) => `\n    max-width: ${theme.gridUnit * 25}px;\n    padding-right: ${theme.gridUnit}px;\n  `}\n  ${ellipsisCss}\n`;\n\nconst StyledTag = styled(Tag)`\n  ${({ theme }) => `\n    border: 1px solid ${theme.colors.grayscale.light3};\n    border-radius: 2px;\n    .anticon-close {\n      vertical-align: middle;\n    }\n  `}\n`;\n\nconst CrossFilterTag = (props: {\n  filter: CrossFilterIndicator;\n  orientation: FilterBarOrientation;\n  removeCrossFilter: (filterId: number) => void;\n}) => {\n  const { filter, orientation, removeCrossFilter } = props;\n  const theme = useTheme();\n  const [columnRef, columnIsTruncated] =\n    useCSSTextTruncation<HTMLSpanElement>();\n  const [valueRef, valueIsTruncated] = useCSSTextTruncation<HTMLSpanElement>();\n\n  const columnLabel = getColumnLabel(filter.column ?? '');\n  return (\n    <StyledTag\n      css={css`\n        ${orientation === FilterBarOrientation.VERTICAL\n          ? `\n            margin-top: ${theme.gridUnit * 2}px;\n          `\n          : `\n            margin-left: ${theme.gridUnit * 2}px;\n          `}\n      `}\n      closable\n      onClose={() => removeCrossFilter(filter.emitterId)}\n    >\n      <Tooltip title={columnIsTruncated ? columnLabel : null}>\n        <StyledCrossFilterColumn ref={columnRef}>\n          {columnLabel}\n        </StyledCrossFilterColumn>\n      </Tooltip>\n      <Tooltip title={valueIsTruncated ? filter.value : null}>\n        <StyledCrossFilterValue ref={valueRef}>\n          {filter.value}\n        </StyledCrossFilterValue>\n      </Tooltip>\n    </StyledTag>\n  );\n};\n\nexport default CrossFilterTag;\n"]},"metadata":{},"sourceType":"module"}