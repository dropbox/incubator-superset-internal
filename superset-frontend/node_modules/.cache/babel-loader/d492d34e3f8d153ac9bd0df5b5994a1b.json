{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/sort-prop-types, react/jsx-sort-default-props */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { ParentSize } from '@vx/responsive';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  renderChart: PropTypes.func.isRequired,\n  renderLegend: PropTypes.func.isRequired,\n  position: PropTypes.oneOf(['top', 'left', 'bottom', 'right']),\n  legendJustifyContent: PropTypes.oneOf(['center', 'flex-start', 'flex-end']) };\n\nconst defaultProps = {\n  className: '',\n  width: 'auto',\n  height: 'auto',\n  position: 'top',\n  legendJustifyContent: undefined };\n\n\nconst LEGEND_STYLE_BASE = {\n  display: 'flex',\n  flexGrow: 0,\n  flexShrink: 0,\n  order: -1,\n  paddingTop: '5px',\n  fontSize: '0.9em' };\n\n\nconst CHART_STYLE_BASE = {\n  flexGrow: 1,\n  flexShrink: 1,\n  flexBasis: 'auto',\n  position: 'relative' };\n\n\nclass WithLegend extends React.Component {\n  getContainerDirection() {\n    const { position } = this.props;\n    switch (position) {\n      case 'left':\n        return 'row';\n      case 'right':\n        return 'row-reverse';\n      case 'bottom':\n        return 'column-reverse';\n      default:\n      case 'top':\n        return 'column';}\n\n  }\n\n  getLegendJustifyContent() {\n    const { legendJustifyContent, position } = this.props;\n    if (legendJustifyContent) {\n      return legendJustifyContent;\n    }\n    switch (position) {\n      case 'left':\n        return 'flex-start';\n      case 'right':\n        return 'flex-start';\n      case 'bottom':\n        return 'flex-end';\n      default:\n      case 'top':\n        return 'flex-end';}\n\n  }\n\n  render() {\n    const { className, width, height, position, renderChart, renderLegend } =\n    this.props;\n\n    const isHorizontal = position === 'left' || position === 'right';\n\n    const style = {\n      display: 'flex',\n      flexDirection: this.getContainerDirection() };\n\n    if (width) {\n      style.width = width;\n    }\n    if (height) {\n      style.height = height;\n    }\n\n    const chartStyle = { ...CHART_STYLE_BASE };\n    if (isHorizontal) {\n      chartStyle.width = 0;\n    } else {\n      chartStyle.height = 0;\n    }\n\n    const legendDirection = isHorizontal ? 'column' : 'row';\n    const legendStyle = {\n      ...LEGEND_STYLE_BASE,\n      flexDirection: legendDirection,\n      justifyContent: this.getLegendJustifyContent() };\n\n    const legendContainerStyle = {\n      flexWrap: 'wrap',\n      display: 'flex',\n      flexDirection: legendDirection };\n\n    return (\n      ___EmotionJSX(\"div\", { className: `with-legend ${className}`, style: style },\n      ___EmotionJSX(\"div\", { className: \"legend-container\", style: legendStyle },\n      renderLegend({\n        // Pass flexDirection for @vx/legend to arrange legend items\n        direction: legendDirection,\n        style: legendContainerStyle })),\n\n\n      ___EmotionJSX(\"div\", { className: \"main-container\", style: chartStyle },\n      ___EmotionJSX(ParentSize, null,\n      (parent) =>\n      parent.width > 0 && parent.height > 0 ?\n      // Only render when necessary\n      renderChart(parent) :\n      null))));\n\n\n\n\n\n  }}\n\n\nWithLegend.propTypes = propTypes;\nWithLegend.defaultProps = defaultProps;\n\nexport default WithLegend;","map":{"version":3,"names":["React","PropTypes","ParentSize","propTypes","className","string","width","oneOfType","number","height","renderChart","func","isRequired","renderLegend","position","oneOf","legendJustifyContent","defaultProps","undefined","LEGEND_STYLE_BASE","display","flexGrow","flexShrink","order","paddingTop","fontSize","CHART_STYLE_BASE","flexBasis","WithLegend","Component","getContainerDirection","props","getLegendJustifyContent","render","isHorizontal","style","flexDirection","chartStyle","legendDirection","legendStyle","justifyContent","legendContainerStyle","flexWrap","direction","parent"],"sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/plugins/legacy-plugin-chart-histogram/src/WithLegend.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/sort-prop-types, react/jsx-sort-default-props */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { ParentSize } from '@vx/responsive';\n\nconst propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  renderChart: PropTypes.func.isRequired,\n  renderLegend: PropTypes.func.isRequired,\n  position: PropTypes.oneOf(['top', 'left', 'bottom', 'right']),\n  legendJustifyContent: PropTypes.oneOf(['center', 'flex-start', 'flex-end']),\n};\nconst defaultProps = {\n  className: '',\n  width: 'auto',\n  height: 'auto',\n  position: 'top',\n  legendJustifyContent: undefined,\n};\n\nconst LEGEND_STYLE_BASE = {\n  display: 'flex',\n  flexGrow: 0,\n  flexShrink: 0,\n  order: -1,\n  paddingTop: '5px',\n  fontSize: '0.9em',\n};\n\nconst CHART_STYLE_BASE = {\n  flexGrow: 1,\n  flexShrink: 1,\n  flexBasis: 'auto',\n  position: 'relative',\n};\n\nclass WithLegend extends React.Component {\n  getContainerDirection() {\n    const { position } = this.props;\n    switch (position) {\n      case 'left':\n        return 'row';\n      case 'right':\n        return 'row-reverse';\n      case 'bottom':\n        return 'column-reverse';\n      default:\n      case 'top':\n        return 'column';\n    }\n  }\n\n  getLegendJustifyContent() {\n    const { legendJustifyContent, position } = this.props;\n    if (legendJustifyContent) {\n      return legendJustifyContent;\n    }\n    switch (position) {\n      case 'left':\n        return 'flex-start';\n      case 'right':\n        return 'flex-start';\n      case 'bottom':\n        return 'flex-end';\n      default:\n      case 'top':\n        return 'flex-end';\n    }\n  }\n\n  render() {\n    const { className, width, height, position, renderChart, renderLegend } =\n      this.props;\n\n    const isHorizontal = position === 'left' || position === 'right';\n\n    const style = {\n      display: 'flex',\n      flexDirection: this.getContainerDirection(),\n    };\n    if (width) {\n      style.width = width;\n    }\n    if (height) {\n      style.height = height;\n    }\n\n    const chartStyle = { ...CHART_STYLE_BASE };\n    if (isHorizontal) {\n      chartStyle.width = 0;\n    } else {\n      chartStyle.height = 0;\n    }\n\n    const legendDirection = isHorizontal ? 'column' : 'row';\n    const legendStyle = {\n      ...LEGEND_STYLE_BASE,\n      flexDirection: legendDirection,\n      justifyContent: this.getLegendJustifyContent(),\n    };\n    const legendContainerStyle = {\n      flexWrap: 'wrap',\n      display: 'flex',\n      flexDirection: legendDirection,\n    };\n    return (\n      <div className={`with-legend ${className}`} style={style}>\n        <div className=\"legend-container\" style={legendStyle}>\n          {renderLegend({\n            // Pass flexDirection for @vx/legend to arrange legend items\n            direction: legendDirection,\n            style: legendContainerStyle,\n          })}\n        </div>\n        <div className=\"main-container\" style={chartStyle}>\n          <ParentSize>\n            {parent =>\n              parent.width > 0 && parent.height > 0\n                ? // Only render when necessary\n                  renderChart(parent)\n                : null\n            }\n          </ParentSize>\n        </div>\n      </div>\n    );\n  }\n}\n\nWithLegend.propTypes = propTypes;\nWithLegend.defaultProps = defaultProps;\n\nexport default WithLegend;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}