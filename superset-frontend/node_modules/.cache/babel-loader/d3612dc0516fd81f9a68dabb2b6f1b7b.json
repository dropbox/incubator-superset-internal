{"ast":null,"code":"import _debounce from \"lodash/debounce\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { styled, css, t } from '@superset-ui/core';\nimport cx from 'classnames';\nimport { Tooltip } from 'src/components/Tooltip';\n\nimport { Row } from 'src/components';\nimport { Menu, MainNav as DropdownMenu } from 'src/components/Menu';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledHeader = styled.div`\n  margin-bottom: ${(_ref) => {let { theme } = _ref;return theme.gridUnit * 4;}}px;\n  .header {\n    font-weight: ${(_ref2) => {let { theme } = _ref2;return theme.typography.weights.bold;}};\n    margin-right: ${(_ref3) => {let { theme } = _ref3;return theme.gridUnit * 3;}}px;\n    text-align: left;\n    font-size: 18px;\n    padding: ${(_ref4) => {let { theme } = _ref4;return theme.gridUnit * 3;}}px;\n    display: inline-block;\n    line-height: ${(_ref5) => {let { theme } = _ref5;return theme.gridUnit * 9;}}px;\n  }\n  .nav-right {\n    display: flex;\n    align-items: center;\n    padding: ${(_ref6) => {let { theme } = _ref6;return theme.gridUnit * 3.5;}}px 0;\n    margin-right: ${(_ref7) => {let { theme } = _ref7;return theme.gridUnit * 3;}}px;\n    float: right;\n    position: absolute;\n    right: 0;\n    ul.ant-menu-root {\n      padding: 0px;\n    }\n    li[role='menuitem'] {\n      border: 0;\n      border-bottom: none;\n      &:hover {\n        border-bottom: transparent;\n      }\n    }\n  }\n  .nav-right-collapse {\n    display: flex;\n    align-items: center;\n    padding: 14px 0;\n    margin-right: 0;\n    float: left;\n    padding-left: 10px;\n  }\n  .menu {\n    background-color: ${(_ref8) => {let { theme } = _ref8;return theme.colors.grayscale.light5;}};\n    .ant-menu-horizontal {\n      line-height: inherit;\n      .ant-menu-item {\n        border-bottom: none;\n        &:hover {\n          border-bottom: none;\n          text-decoration: none;\n        }\n      }\n    }\n    .ant-menu {\n      padding: ${(_ref9) => {let { theme } = _ref9;return theme.gridUnit * 4;}}px 0px;\n    }\n  }\n\n  .ant-menu-horizontal:not(.ant-menu-dark) > .ant-menu-item {\n    margin: 0 ${(_ref10) => {let { theme } = _ref10;return theme.gridUnit + 1;}}px;\n  }\n\n  .menu .ant-menu-item {\n    li,\n    div {\n      a,\n      div {\n        font-size: ${(_ref11) => {let { theme } = _ref11;return theme.typography.sizes.s;}}px;\n        color: ${(_ref12) => {let { theme } = _ref12;return theme.colors.secondary.dark1;}};\n\n        a {\n          margin: 0;\n          padding: ${(_ref13) => {let { theme } = _ref13;return theme.gridUnit * 2;}}px\n            ${(_ref14) => {let { theme } = _ref14;return theme.gridUnit * 4;}}px;\n          line-height: ${(_ref15) => {let { theme } = _ref15;return theme.gridUnit * 5;}}px;\n\n          &:hover {\n            text-decoration: none;\n          }\n        }\n      }\n\n      &.no-router a {\n        padding: ${(_ref16) => {let { theme } = _ref16;return theme.gridUnit * 2;}}px\n          ${(_ref17) => {let { theme } = _ref17;return theme.gridUnit * 4;}}px;\n      }\n\n      &.active a {\n        background: ${(_ref18) => {let { theme } = _ref18;return theme.colors.secondary.light4;}};\n        border-radius: ${(_ref19) => {let { theme } = _ref19;return theme.borderRadius;}}px;\n      }\n    }\n\n    li.active > a,\n    li.active > div,\n    div.active > div,\n    li > a:hover,\n    li > a:focus,\n    li > div:hover,\n    div > div:hover,\n    div > a:hover {\n      background: ${(_ref20) => {let { theme } = _ref20;return theme.colors.secondary.light4;}};\n      border-bottom: none;\n      border-radius: ${(_ref21) => {let { theme } = _ref21;return theme.borderRadius;}}px;\n      margin-bottom: ${(_ref22) => {let { theme } = _ref22;return theme.gridUnit * 2;}}px;\n      text-decoration: none;\n    }\n  }\n\n  .btn-link {\n    padding: 10px 0;\n  }\n  .ant-menu-horizontal {\n    border: none;\n  }\n  @media (max-width: 767px) {\n    .header,\n    .nav-right {\n      position: relative;\n      margin-left: ${(_ref23) => {let { theme } = _ref23;return theme.gridUnit * 2;}}px;\n    }\n  }\n  .ant-menu-submenu {\n    span[role='img'] {\n      position: absolute;\n      right: ${(_ref24) => {let { theme } = _ref24;return -theme.gridUnit + -2;}}px;\n      top: ${(_ref25) => {let { theme } = _ref25;return theme.gridUnit + 1;}}px !important;\n    }\n  }\n  .dropdown-menu-links > div.ant-menu-submenu-title,\n  .ant-menu-submenu-open.ant-menu-submenu-active > div.ant-menu-submenu-title {\n    color: ${(_ref26) => {let { theme } = _ref26;return theme.colors.primary.dark1;}};\n  }\n`;\nconst styledDisabled = (theme) => css`\n  color: ${theme.colors.grayscale.light1};\n\n  .ant-menu-item-active {\n    color: ${theme.colors.grayscale.light1};\n    cursor: default;\n  }\n`;\nconst { SubMenu } = DropdownMenu;\nconst SubMenuComponent = (props) => {var _props$tabs, _props$dropDownLinks, _props$buttons;\n  const [showMenu, setMenu] = useState('horizontal');\n  const [navRightStyle, setNavRightStyle] = useState('nav-right');\n  let hasHistory = true;\n  // If no parent <Router> component exists, useHistory throws an error\n  try {\n    useHistory();\n  }\n  catch (err) {\n    // If error is thrown, we know not to use <Link> in render\n    hasHistory = false;\n  }\n  useEffect(() => {\n    function handleResize() {\n      if (window.innerWidth <= 767)\n      setMenu('inline');else\n\n      setMenu('horizontal');\n      if (props.buttons &&\n      props.buttons.length >= 3 &&\n      window.innerWidth >= 795) {\n        // eslint-disable-next-line no-unused-expressions\n        setNavRightStyle('nav-right');\n      } else\n      if (props.buttons &&\n      props.buttons.length >= 3 &&\n      window.innerWidth <= 795) {\n        setNavRightStyle('nav-right-collapse');\n      }\n    }\n    handleResize();\n    const resize = _debounce(handleResize, 10);\n    window.addEventListener('resize', resize);\n    return () => window.removeEventListener('resize', resize);\n  }, [props.buttons]);\n  return ___EmotionJSX(StyledHeader, null,\n  ___EmotionJSX(Row, { className: \"menu\", role: \"navigation\" },\n  props.name && ___EmotionJSX(\"div\", { className: \"header\" }, props.name),\n  ___EmotionJSX(Menu, { mode: showMenu, style: { backgroundColor: 'transparent' } }, (_props$tabs =\n  props.tabs) == null ? void 0 : _props$tabs.map((tab) => {\n    if ((props.usesRouter || hasHistory) && !!tab.usesRouter) {\n      return ___EmotionJSX(Menu.Item, { key: tab.label },\n      ___EmotionJSX(\"div\", { role: \"tab\", className: tab.name === props.activeChild ? 'active' : '' },\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(Link, { to: tab.url || '' }, tab.label))));\n\n\n\n    }\n    return ___EmotionJSX(Menu.Item, { key: tab.label },\n    ___EmotionJSX(\"div\", { className: cx('no-router', {\n        active: tab.name === props.activeChild }),\n      role: \"tab\" },\n    ___EmotionJSX(\"a\", { href: tab.url, onClick: tab.onClick },\n    tab.label)));\n\n\n\n  })),\n\n  ___EmotionJSX(\"div\", { className: navRightStyle },\n  ___EmotionJSX(Menu, { mode: \"horizontal\", triggerSubMenuAction: \"click\" }, (_props$dropDownLinks =\n  props.dropDownLinks) == null ? void 0 : _props$dropDownLinks.map((link, i) => {var _link$childs;return ___EmotionJSX(SubMenu, { key: i, title: link.label, icon: ___EmotionJSX(Icons.TriangleDown, null), popupOffset: [10, 20], className: \"dropdown-menu-links\" }, (_link$childs =\n    link.childs) == null ? void 0 : _link$childs.map((item) => {\n      if (typeof item === 'object') {\n        return item.disable ? ___EmotionJSX(DropdownMenu.Item, { key: item.label, css: styledDisabled },\n        ___EmotionJSX(Tooltip, { placement: \"top\", title: t(\"Enable 'Allow file uploads to database' in any database's settings\") },\n        item.label)) :\n\n        ___EmotionJSX(DropdownMenu.Item, { key: item.label },\n        ___EmotionJSX(\"a\", { href: item.url }, item.label));\n\n      }\n      return null;\n    }));})), (_props$buttons =\n\n\n  props.buttons) == null ? void 0 : _props$buttons.map((btn, i) => ___EmotionJSX(Button, { key: i, buttonStyle: btn.buttonStyle, onClick: btn.onClick },\n  btn.name)))),\n\n\n\n  props.children);\n\n};\nexport default SubMenuComponent;","map":{"version":3,"mappings":"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","names":["React","useState","useEffect","Link","useHistory","styled","css","t","cx","Tooltip","Row","Menu","MainNav","DropdownMenu","Button","Icons","StyledHeader","div","theme","gridUnit","typography","weights","bold","colors","grayscale","light5","sizes","s","secondary","dark1","light4","borderRadius","primary","styledDisabled","light1","SubMenu","SubMenuComponent","showMenu","setMenu","navRightStyle","setNavRightStyle","hasHistory","err","handleResize","window","innerWidth","props","buttons","length","resize","addEventListener","removeEventListener","name","backgroundColor","tabs","map","usesRouter","tab","label","activeChild","url","active","onClick","dropDownLinks","link","i","childs","item","disable","btn","buttonStyle","children"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/features/home/SubMenu.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode, useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { styled, SupersetTheme, css, t } from '@superset-ui/core';\nimport cx from 'classnames';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { debounce } from 'lodash';\nimport { Row } from 'src/components';\nimport { Menu, MenuMode, MainNav as DropdownMenu } from 'src/components/Menu';\nimport Button, { OnClickHandler } from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport { MenuObjectProps } from 'src/types/bootstrapTypes';\n\nconst StyledHeader = styled.div`\n  margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\n  .header {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n    margin-right: ${({ theme }) => theme.gridUnit * 3}px;\n    text-align: left;\n    font-size: 18px;\n    padding: ${({ theme }) => theme.gridUnit * 3}px;\n    display: inline-block;\n    line-height: ${({ theme }) => theme.gridUnit * 9}px;\n  }\n  .nav-right {\n    display: flex;\n    align-items: center;\n    padding: ${({ theme }) => theme.gridUnit * 3.5}px 0;\n    margin-right: ${({ theme }) => theme.gridUnit * 3}px;\n    float: right;\n    position: absolute;\n    right: 0;\n    ul.ant-menu-root {\n      padding: 0px;\n    }\n    li[role='menuitem'] {\n      border: 0;\n      border-bottom: none;\n      &:hover {\n        border-bottom: transparent;\n      }\n    }\n  }\n  .nav-right-collapse {\n    display: flex;\n    align-items: center;\n    padding: 14px 0;\n    margin-right: 0;\n    float: left;\n    padding-left: 10px;\n  }\n  .menu {\n    background-color: ${({ theme }) => theme.colors.grayscale.light5};\n    .ant-menu-horizontal {\n      line-height: inherit;\n      .ant-menu-item {\n        border-bottom: none;\n        &:hover {\n          border-bottom: none;\n          text-decoration: none;\n        }\n      }\n    }\n    .ant-menu {\n      padding: ${({ theme }) => theme.gridUnit * 4}px 0px;\n    }\n  }\n\n  .ant-menu-horizontal:not(.ant-menu-dark) > .ant-menu-item {\n    margin: 0 ${({ theme }) => theme.gridUnit + 1}px;\n  }\n\n  .menu .ant-menu-item {\n    li,\n    div {\n      a,\n      div {\n        font-size: ${({ theme }) => theme.typography.sizes.s}px;\n        color: ${({ theme }) => theme.colors.secondary.dark1};\n\n        a {\n          margin: 0;\n          padding: ${({ theme }) => theme.gridUnit * 2}px\n            ${({ theme }) => theme.gridUnit * 4}px;\n          line-height: ${({ theme }) => theme.gridUnit * 5}px;\n\n          &:hover {\n            text-decoration: none;\n          }\n        }\n      }\n\n      &.no-router a {\n        padding: ${({ theme }) => theme.gridUnit * 2}px\n          ${({ theme }) => theme.gridUnit * 4}px;\n      }\n\n      &.active a {\n        background: ${({ theme }) => theme.colors.secondary.light4};\n        border-radius: ${({ theme }) => theme.borderRadius}px;\n      }\n    }\n\n    li.active > a,\n    li.active > div,\n    div.active > div,\n    li > a:hover,\n    li > a:focus,\n    li > div:hover,\n    div > div:hover,\n    div > a:hover {\n      background: ${({ theme }) => theme.colors.secondary.light4};\n      border-bottom: none;\n      border-radius: ${({ theme }) => theme.borderRadius}px;\n      margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n      text-decoration: none;\n    }\n  }\n\n  .btn-link {\n    padding: 10px 0;\n  }\n  .ant-menu-horizontal {\n    border: none;\n  }\n  @media (max-width: 767px) {\n    .header,\n    .nav-right {\n      position: relative;\n      margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n  .ant-menu-submenu {\n    span[role='img'] {\n      position: absolute;\n      right: ${({ theme }) => -theme.gridUnit + -2}px;\n      top: ${({ theme }) => theme.gridUnit + 1}px !important;\n    }\n  }\n  .dropdown-menu-links > div.ant-menu-submenu-title,\n  .ant-menu-submenu-open.ant-menu-submenu-active > div.ant-menu-submenu-title {\n    color: ${({ theme }) => theme.colors.primary.dark1};\n  }\n`;\n\nconst styledDisabled = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light1};\n\n  .ant-menu-item-active {\n    color: ${theme.colors.grayscale.light1};\n    cursor: default;\n  }\n`;\n\ntype MenuChild = {\n  label: string;\n  name: string;\n  url?: string;\n  usesRouter?: boolean;\n  onClick?: () => void;\n  'data-test'?: string;\n};\n\nexport interface ButtonProps {\n  name: ReactNode;\n  onClick: OnClickHandler;\n  'data-test'?: string;\n  buttonStyle:\n    | 'primary'\n    | 'secondary'\n    | 'dashed'\n    | 'link'\n    | 'warning'\n    | 'success'\n    | 'tertiary';\n}\n\nexport interface SubMenuProps {\n  buttons?: Array<ButtonProps>;\n  name?: string | ReactNode;\n  tabs?: MenuChild[];\n  activeChild?: MenuChild['name'];\n  /* If usesRouter is true, a react-router <Link> component will be used instead of href.\n   *  ONLY set usesRouter to true if SubMenu is wrapped in a react-router <Router>;\n   *  otherwise, a 'You should not use <Link> outside a <Router>' error will be thrown */\n  usesRouter?: boolean;\n  color?: string;\n  dropDownLinks?: Array<MenuObjectProps>;\n}\n\nconst { SubMenu } = DropdownMenu;\n\nconst SubMenuComponent: React.FunctionComponent<SubMenuProps> = props => {\n  const [showMenu, setMenu] = useState<MenuMode>('horizontal');\n  const [navRightStyle, setNavRightStyle] = useState('nav-right');\n\n  let hasHistory = true;\n  // If no parent <Router> component exists, useHistory throws an error\n  try {\n    useHistory();\n  } catch (err) {\n    // If error is thrown, we know not to use <Link> in render\n    hasHistory = false;\n  }\n\n  useEffect(() => {\n    function handleResize() {\n      if (window.innerWidth <= 767) setMenu('inline');\n      else setMenu('horizontal');\n\n      if (\n        props.buttons &&\n        props.buttons.length >= 3 &&\n        window.innerWidth >= 795\n      ) {\n        // eslint-disable-next-line no-unused-expressions\n        setNavRightStyle('nav-right');\n      } else if (\n        props.buttons &&\n        props.buttons.length >= 3 &&\n        window.innerWidth <= 795\n      ) {\n        setNavRightStyle('nav-right-collapse');\n      }\n    }\n    handleResize();\n    const resize = debounce(handleResize, 10);\n    window.addEventListener('resize', resize);\n    return () => window.removeEventListener('resize', resize);\n  }, [props.buttons]);\n\n  return (\n    <StyledHeader>\n      <Row className=\"menu\" role=\"navigation\">\n        {props.name && <div className=\"header\">{props.name}</div>}\n        <Menu mode={showMenu} style={{ backgroundColor: 'transparent' }}>\n          {props.tabs?.map(tab => {\n            if ((props.usesRouter || hasHistory) && !!tab.usesRouter) {\n              return (\n                <Menu.Item key={tab.label}>\n                  <div\n                    role=\"tab\"\n                    data-test={tab['data-test']}\n                    className={tab.name === props.activeChild ? 'active' : ''}\n                  >\n                    <div>\n                      <Link to={tab.url || ''}>{tab.label}</Link>\n                    </div>\n                  </div>\n                </Menu.Item>\n              );\n            }\n\n            return (\n              <Menu.Item key={tab.label}>\n                <div\n                  className={cx('no-router', {\n                    active: tab.name === props.activeChild,\n                  })}\n                  role=\"tab\"\n                >\n                  <a href={tab.url} onClick={tab.onClick}>\n                    {tab.label}\n                  </a>\n                </div>\n              </Menu.Item>\n            );\n          })}\n        </Menu>\n        <div className={navRightStyle}>\n          <Menu mode=\"horizontal\" triggerSubMenuAction=\"click\">\n            {props.dropDownLinks?.map((link, i) => (\n              <SubMenu\n                key={i}\n                title={link.label}\n                icon={<Icons.TriangleDown />}\n                popupOffset={[10, 20]}\n                className=\"dropdown-menu-links\"\n              >\n                {link.childs?.map(item => {\n                  if (typeof item === 'object') {\n                    return item.disable ? (\n                      <DropdownMenu.Item key={item.label} css={styledDisabled}>\n                        <Tooltip\n                          placement=\"top\"\n                          title={t(\n                            \"Enable 'Allow file uploads to database' in any database's settings\",\n                          )}\n                        >\n                          {item.label}\n                        </Tooltip>\n                      </DropdownMenu.Item>\n                    ) : (\n                      <DropdownMenu.Item key={item.label}>\n                        <a href={item.url}>{item.label}</a>\n                      </DropdownMenu.Item>\n                    );\n                  }\n                  return null;\n                })}\n              </SubMenu>\n            ))}\n          </Menu>\n          {props.buttons?.map((btn, i) => (\n            <Button\n              key={i}\n              buttonStyle={btn.buttonStyle}\n              onClick={btn.onClick}\n              data-test={btn['data-test']}\n            >\n              {btn.name}\n            </Button>\n          ))}\n        </div>\n      </Row>\n      {props.children}\n    </StyledHeader>\n  );\n};\n\nexport default SubMenuComponent;\n"]},"metadata":{},"sourceType":"module"}