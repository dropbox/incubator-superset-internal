{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\nimport getToastsFromPyFlashMessages from 'src/components/MessageToasts/getToastsFromPyFlashMessages';\n\nexport function dedupeTabHistory(tabHistory) {\n  return tabHistory.reduce(\n  (result, tabId) =>\n  result.slice(-1)[0] === tabId ? result : result.concat(tabId),\n  []);\n\n}\n\nexport default function getInitialState(_ref)\n\n\n\n\n\n\n\n\n{let { defaultDbId, common, active_tab: activeTab, tab_state_ids: tabStateIds = [], databases, queries: queries_, requested_query: requestedQuery, user } = _ref;\n  /**\n   * Before YYYY-MM-DD, the state for SQL Lab was stored exclusively in the\n   * browser's localStorage. The feature flag `SQLLAB_BACKEND_PERSISTENCE`\n   * moves the state to the backend instead, migrating it from local storage.\n   *\n   * To allow for a transparent migration, the initial state is a combination\n   * of the backend state (if any) with the browser state (if any).\n   */\n  let queryEditors = {};\n  const defaultQueryEditor = {\n    id: null,\n    loaded: true,\n    name: t('Untitled query'),\n    sql: 'SELECT *\\nFROM\\nWHERE',\n    selectedText: null,\n    latestQueryId: null,\n    autorun: false,\n    templateParams: null,\n    dbId: defaultDbId,\n    functionNames: [],\n    queryLimit: common.conf.DEFAULT_SQLLAB_LIMIT,\n    validationResult: {\n      id: null,\n      errors: [],\n      completed: false },\n\n    hideLeftBar: false };\n\n  let unsavedQueryEditor = {};\n\n  /**\n   * Load state from the backend. This will be empty if the feature flag\n   * `SQLLAB_BACKEND_PERSISTENCE` is off.\n   */\n  tabStateIds.forEach((_ref2) => {let { id, label } = _ref2;\n    let queryEditor;\n    if (activeTab && activeTab.id === id) {var _activeTab$saved_quer;\n      queryEditor = {\n        id: id.toString(),\n        loaded: true,\n        name: activeTab.label,\n        sql: activeTab.sql || undefined,\n        selectedText: undefined,\n        latestQueryId: activeTab.latest_query ?\n        activeTab.latest_query.id :\n        null,\n        remoteId: (_activeTab$saved_quer = activeTab.saved_query) == null ? void 0 : _activeTab$saved_quer.id,\n        autorun: activeTab.autorun,\n        templateParams: activeTab.template_params || undefined,\n        dbId: activeTab.database_id,\n        functionNames: [],\n        schema: activeTab.schema,\n        queryLimit: activeTab.query_limit,\n        validationResult: {\n          id: null,\n          errors: [],\n          completed: false },\n\n        hideLeftBar: activeTab.hide_left_bar };\n\n    } else {\n      // dummy state, actual state will be loaded on tab switch\n      queryEditor = {\n        ...defaultQueryEditor,\n        id: id.toString(),\n        loaded: false,\n        name: label };\n\n    }\n    queryEditors = {\n      ...queryEditors,\n      [queryEditor.id]: queryEditor };\n\n  });\n\n  const tabHistory = activeTab ? [activeTab.id.toString()] : [];\n  let tables = {};\n  if (activeTab) {\n    activeTab.table_schemas.\n    filter((tableSchema) => tableSchema.description !== null).\n    forEach((tableSchema) => {\n      const {\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        dataPreviewQueryId,\n        partitions,\n        metadata } =\n      tableSchema.description;\n      const table = {\n        dbId: tableSchema.database_id,\n        queryEditorId: tableSchema.tab_state_id.toString(),\n        schema: tableSchema.schema,\n        name: tableSchema.table,\n        expanded: tableSchema.expanded,\n        id: tableSchema.id,\n        isMetadataLoading: false,\n        isExtraMetadataLoading: false,\n        dataPreviewQueryId,\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        partitions,\n        metadata };\n\n      tables = {\n        ...tables,\n        [table.id]: table };\n\n    });\n  }\n\n  const queries = { ...queries_ };\n\n  /**\n   * If the `SQLLAB_BACKEND_PERSISTENCE` feature flag is off, or if the user\n   * hasn't used SQL Lab after it has been turned on, the state will be stored\n   * in the browser's local storage.\n   */\n  if (\n  localStorage.getItem('redux') &&\n  JSON.parse(localStorage.getItem('redux')).sqlLab)\n  {\n    const { sqlLab } = JSON.parse(localStorage.getItem('redux'));\n\n    if (sqlLab.queryEditors.length === 0) {\n      // migration was successful\n      localStorage.removeItem('redux');\n    } else {\n      unsavedQueryEditor = sqlLab.unsavedQueryEditor || {};\n      // add query editors and tables to state with a special flag so they can\n      // be migrated if the `SQLLAB_BACKEND_PERSISTENCE` feature flag is on\n      sqlLab.queryEditors.forEach((qe) => {\n        queryEditors = {\n          ...queryEditors,\n          [qe.id]: {\n            ...queryEditors[qe.id],\n            ...qe,\n            name: qe.title || qe.name,\n            ...(unsavedQueryEditor.id === qe.id && unsavedQueryEditor),\n            inLocalStorage: true,\n            loaded: true } };\n\n\n      });\n      tables = sqlLab.tables.reduce(\n      (merged, table) => ({\n        ...merged,\n        [table.id]: {\n          ...tables[table.id],\n          ...table } }),\n\n\n      tables);\n\n      Object.values(sqlLab.queries).forEach((query) => {\n        queries[query.id] = { ...query, inLocalStorage: true };\n      });\n      tabHistory.push(...sqlLab.tabHistory);\n    }\n  }\n\n  return {\n    sqlLab: {\n      activeSouthPaneTab: 'Results',\n      alerts: [],\n      databases,\n      offline: false,\n      queries,\n      queryEditors: Object.values(queryEditors),\n      tabHistory: dedupeTabHistory(tabHistory),\n      tables: Object.values(tables),\n      queriesLastUpdate: Date.now(),\n      user,\n      unsavedQueryEditor,\n      queryCostEstimates: {} },\n\n    requestedQuery,\n    messageToasts: getToastsFromPyFlashMessages(\n    (common || {}).flash_messages || []),\n\n    localStorageUsageInKilobytes: 0,\n    common: {\n      flash_messages: common.flash_messages,\n      conf: common.conf } };\n\n\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(dedupeTabHistory, \"dedupeTabHistory\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/reducers/getInitialState.js\");reactHotLoader.register(getInitialState, \"getInitialState\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/reducers/getInitialState.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["t","getToastsFromPyFlashMessages","dedupeTabHistory","tabHistory","reduce","result","tabId","slice","concat","getInitialState","defaultDbId","common","active_tab","activeTab","tab_state_ids","tabStateIds","databases","queries","queries_","requested_query","requestedQuery","user","queryEditors","defaultQueryEditor","id","loaded","name","sql","selectedText","latestQueryId","autorun","templateParams","dbId","functionNames","queryLimit","conf","DEFAULT_SQLLAB_LIMIT","validationResult","errors","completed","hideLeftBar","unsavedQueryEditor","forEach","label","queryEditor","toString","undefined","latest_query","remoteId","saved_query","template_params","database_id","schema","query_limit","hide_left_bar","tables","table_schemas","filter","tableSchema","description","columns","selectStar","primaryKey","foreignKeys","indexes","dataPreviewQueryId","partitions","metadata","table","queryEditorId","tab_state_id","expanded","isMetadataLoading","isExtraMetadataLoading","localStorage","getItem","JSON","parse","sqlLab","length","removeItem","qe","title","inLocalStorage","merged","Object","values","query","push","activeSouthPaneTab","alerts","offline","queriesLastUpdate","Date","now","queryCostEstimates","messageToasts","flash_messages","localStorageUsageInKilobytes"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/reducers/getInitialState.js"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\nimport getToastsFromPyFlashMessages from 'src/components/MessageToasts/getToastsFromPyFlashMessages';\n\nexport function dedupeTabHistory(tabHistory) {\n  return tabHistory.reduce(\n    (result, tabId) =>\n      result.slice(-1)[0] === tabId ? result : result.concat(tabId),\n    [],\n  );\n}\n\nexport default function getInitialState({\n  defaultDbId,\n  common,\n  active_tab: activeTab,\n  tab_state_ids: tabStateIds = [],\n  databases,\n  queries: queries_,\n  requested_query: requestedQuery,\n  user,\n}) {\n  /**\n   * Before YYYY-MM-DD, the state for SQL Lab was stored exclusively in the\n   * browser's localStorage. The feature flag `SQLLAB_BACKEND_PERSISTENCE`\n   * moves the state to the backend instead, migrating it from local storage.\n   *\n   * To allow for a transparent migration, the initial state is a combination\n   * of the backend state (if any) with the browser state (if any).\n   */\n  let queryEditors = {};\n  const defaultQueryEditor = {\n    id: null,\n    loaded: true,\n    name: t('Untitled query'),\n    sql: 'SELECT *\\nFROM\\nWHERE',\n    selectedText: null,\n    latestQueryId: null,\n    autorun: false,\n    templateParams: null,\n    dbId: defaultDbId,\n    functionNames: [],\n    queryLimit: common.conf.DEFAULT_SQLLAB_LIMIT,\n    validationResult: {\n      id: null,\n      errors: [],\n      completed: false,\n    },\n    hideLeftBar: false,\n  };\n  let unsavedQueryEditor = {};\n\n  /**\n   * Load state from the backend. This will be empty if the feature flag\n   * `SQLLAB_BACKEND_PERSISTENCE` is off.\n   */\n  tabStateIds.forEach(({ id, label }) => {\n    let queryEditor;\n    if (activeTab && activeTab.id === id) {\n      queryEditor = {\n        id: id.toString(),\n        loaded: true,\n        name: activeTab.label,\n        sql: activeTab.sql || undefined,\n        selectedText: undefined,\n        latestQueryId: activeTab.latest_query\n          ? activeTab.latest_query.id\n          : null,\n        remoteId: activeTab.saved_query?.id,\n        autorun: activeTab.autorun,\n        templateParams: activeTab.template_params || undefined,\n        dbId: activeTab.database_id,\n        functionNames: [],\n        schema: activeTab.schema,\n        queryLimit: activeTab.query_limit,\n        validationResult: {\n          id: null,\n          errors: [],\n          completed: false,\n        },\n        hideLeftBar: activeTab.hide_left_bar,\n      };\n    } else {\n      // dummy state, actual state will be loaded on tab switch\n      queryEditor = {\n        ...defaultQueryEditor,\n        id: id.toString(),\n        loaded: false,\n        name: label,\n      };\n    }\n    queryEditors = {\n      ...queryEditors,\n      [queryEditor.id]: queryEditor,\n    };\n  });\n\n  const tabHistory = activeTab ? [activeTab.id.toString()] : [];\n  let tables = {};\n  if (activeTab) {\n    activeTab.table_schemas\n      .filter(tableSchema => tableSchema.description !== null)\n      .forEach(tableSchema => {\n        const {\n          columns,\n          selectStar,\n          primaryKey,\n          foreignKeys,\n          indexes,\n          dataPreviewQueryId,\n          partitions,\n          metadata,\n        } = tableSchema.description;\n        const table = {\n          dbId: tableSchema.database_id,\n          queryEditorId: tableSchema.tab_state_id.toString(),\n          schema: tableSchema.schema,\n          name: tableSchema.table,\n          expanded: tableSchema.expanded,\n          id: tableSchema.id,\n          isMetadataLoading: false,\n          isExtraMetadataLoading: false,\n          dataPreviewQueryId,\n          columns,\n          selectStar,\n          primaryKey,\n          foreignKeys,\n          indexes,\n          partitions,\n          metadata,\n        };\n        tables = {\n          ...tables,\n          [table.id]: table,\n        };\n      });\n  }\n\n  const queries = { ...queries_ };\n\n  /**\n   * If the `SQLLAB_BACKEND_PERSISTENCE` feature flag is off, or if the user\n   * hasn't used SQL Lab after it has been turned on, the state will be stored\n   * in the browser's local storage.\n   */\n  if (\n    localStorage.getItem('redux') &&\n    JSON.parse(localStorage.getItem('redux')).sqlLab\n  ) {\n    const { sqlLab } = JSON.parse(localStorage.getItem('redux'));\n\n    if (sqlLab.queryEditors.length === 0) {\n      // migration was successful\n      localStorage.removeItem('redux');\n    } else {\n      unsavedQueryEditor = sqlLab.unsavedQueryEditor || {};\n      // add query editors and tables to state with a special flag so they can\n      // be migrated if the `SQLLAB_BACKEND_PERSISTENCE` feature flag is on\n      sqlLab.queryEditors.forEach(qe => {\n        queryEditors = {\n          ...queryEditors,\n          [qe.id]: {\n            ...queryEditors[qe.id],\n            ...qe,\n            name: qe.title || qe.name,\n            ...(unsavedQueryEditor.id === qe.id && unsavedQueryEditor),\n            inLocalStorage: true,\n            loaded: true,\n          },\n        };\n      });\n      tables = sqlLab.tables.reduce(\n        (merged, table) => ({\n          ...merged,\n          [table.id]: {\n            ...tables[table.id],\n            ...table,\n          },\n        }),\n        tables,\n      );\n      Object.values(sqlLab.queries).forEach(query => {\n        queries[query.id] = { ...query, inLocalStorage: true };\n      });\n      tabHistory.push(...sqlLab.tabHistory);\n    }\n  }\n\n  return {\n    sqlLab: {\n      activeSouthPaneTab: 'Results',\n      alerts: [],\n      databases,\n      offline: false,\n      queries,\n      queryEditors: Object.values(queryEditors),\n      tabHistory: dedupeTabHistory(tabHistory),\n      tables: Object.values(tables),\n      queriesLastUpdate: Date.now(),\n      user,\n      unsavedQueryEditor,\n      queryCostEstimates: {},\n    },\n    requestedQuery,\n    messageToasts: getToastsFromPyFlashMessages(\n      (common || {}).flash_messages || [],\n    ),\n    localStorageUsageInKilobytes: 0,\n    common: {\n      flash_messages: common.flash_messages,\n      conf: common.conf,\n    },\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}