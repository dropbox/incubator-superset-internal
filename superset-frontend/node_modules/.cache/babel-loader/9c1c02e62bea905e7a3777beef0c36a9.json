{"ast":null,"code":"import { interpolateRgb, piecewise, quantize } from 'd3-interpolate';\nimport { scaleSequential, scaleLinear } from 'd3-scale';\nimport SchemeWrapper from './SchemeWrapper';\n\nfunction isArrayOfArray(x) {\n  return Array.isArray(x[x.length - 1]);\n}\n\nexport default class ContinuousSchemeWrapper extends SchemeWrapper {\n  get colors() {\n    if ('colors' in this.scheme && typeof this.scheme.colors !== 'undefined') {\n      return this.scheme.colors;\n    }\n\n    return this.getColors();\n  }\n\n  get interpolator() {\n    if ('interpolator' in this.scheme && typeof this.scheme.interpolator !== 'undefined') {\n      return this.scheme.interpolator;\n    }\n\n    const colors = this.scheme.colors;\n    return piecewise(interpolateRgb, (isArrayOfArray(colors) ? colors[colors.length - 1] : colors).slice());\n  }\n  /**\n   * Get colors from this scheme\n   * @param numColors number of colors to return.\n   * Will interpolate the current scheme to match the number of colors requested\n   * @param extent The extent of the color range to use.\n   * For example [0.2, 1] will rescale the color scheme\n   * such that color values in the range [0, 0.2) are excluded from the scheme.\n   */\n\n\n  getColors(numColors, extent) {if (numColors === void 0) {numColors = 2;}if (extent === void 0) {extent = [0, 1];}\n    if ('colors' in this.scheme && typeof this.scheme.colors !== 'undefined' && extent[0] === 0 && extent[1] === 1) {\n      const {\n        colors } =\n      this.scheme;\n\n      if (isArrayOfArray(colors)) {\n        if (typeof colors[numColors] !== 'undefined') {\n          return colors[numColors].slice();\n        }\n      } else if (numColors === colors.length) {\n        return colors.slice();\n      }\n    }\n\n    const {\n      interpolator } =\n    this;\n    const adjustExtent = scaleLinear().range(extent).clamp(true);\n    return quantize((t) => interpolator(adjustExtent(t)), numColors);\n  }\n\n  createScaleLinear() {\n    // The manual casting is necessary until @types/d3-scale is corrected\n    // In recent version of d3-scale the output from scaleSequential is compatible with linear scale\n    // (It has .range(),  ...)\n    return scaleSequential(this.interpolator);\n  }}","map":{"version":3,"names":["interpolateRgb","piecewise","quantize","scaleSequential","scaleLinear","SchemeWrapper","isArrayOfArray","x","Array","isArray","length","ContinuousSchemeWrapper","colors","scheme","getColors","interpolator","slice","numColors","extent","adjustExtent","range","clamp","t","createScaleLinear"],"sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/node_modules/@encodable/color/esm/scheme/wrappers/ContinuousSchemeWrapper.js"],"sourcesContent":["import { interpolateRgb, piecewise, quantize } from 'd3-interpolate';\nimport { scaleSequential, scaleLinear } from 'd3-scale';\nimport SchemeWrapper from './SchemeWrapper';\n\nfunction isArrayOfArray(x) {\n  return Array.isArray(x[x.length - 1]);\n}\n\nexport default class ContinuousSchemeWrapper extends SchemeWrapper {\n  get colors() {\n    if ('colors' in this.scheme && typeof this.scheme.colors !== 'undefined') {\n      return this.scheme.colors;\n    }\n\n    return this.getColors();\n  }\n\n  get interpolator() {\n    if ('interpolator' in this.scheme && typeof this.scheme.interpolator !== 'undefined') {\n      return this.scheme.interpolator;\n    }\n\n    const colors = this.scheme.colors;\n    return piecewise(interpolateRgb, (isArrayOfArray(colors) ? colors[colors.length - 1] : colors).slice());\n  }\n  /**\n   * Get colors from this scheme\n   * @param numColors number of colors to return.\n   * Will interpolate the current scheme to match the number of colors requested\n   * @param extent The extent of the color range to use.\n   * For example [0.2, 1] will rescale the color scheme\n   * such that color values in the range [0, 0.2) are excluded from the scheme.\n   */\n\n\n  getColors(numColors = 2, extent = [0, 1]) {\n    if ('colors' in this.scheme && typeof this.scheme.colors !== 'undefined' && extent[0] === 0 && extent[1] === 1) {\n      const {\n        colors\n      } = this.scheme;\n\n      if (isArrayOfArray(colors)) {\n        if (typeof colors[numColors] !== 'undefined') {\n          return colors[numColors].slice();\n        }\n      } else if (numColors === colors.length) {\n        return colors.slice();\n      }\n    }\n\n    const {\n      interpolator\n    } = this;\n    const adjustExtent = scaleLinear().range(extent).clamp(true);\n    return quantize(t => interpolator(adjustExtent(t)), numColors);\n  }\n\n  createScaleLinear() {\n    // The manual casting is necessary until @types/d3-scale is corrected\n    // In recent version of d3-scale the output from scaleSequential is compatible with linear scale\n    // (It has .range(),  ...)\n    return scaleSequential(this.interpolator);\n  }\n\n}"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,SAAzB,EAAoCC,QAApC,QAAoD,gBAApD;AACA,SAASC,eAAT,EAA0BC,WAA1B,QAA6C,UAA7C;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;AAEA,SAASC,cAAT,CAAwBC,CAAxB,EAA2B;EACzB,OAAOC,KAAK,CAACC,OAAN,CAAcF,CAAC,CAACA,CAAC,CAACG,MAAF,GAAW,CAAZ,CAAf,CAAP;AACD;;AAED,eAAe,MAAMC,uBAAN,SAAsCN,aAAtC,CAAoD;EACvD,IAANO,MAAM,GAAG;IACX,IAAI,YAAY,KAAKC,MAAjB,IAA2B,OAAO,KAAKA,MAAL,CAAYD,MAAnB,KAA8B,WAA7D,EAA0E;MACxE,OAAO,KAAKC,MAAL,CAAYD,MAAnB;IACD;;IAED,OAAO,KAAKE,SAAL,EAAP;EACD;;EAEe,IAAZC,YAAY,GAAG;IACjB,IAAI,kBAAkB,KAAKF,MAAvB,IAAiC,OAAO,KAAKA,MAAL,CAAYE,YAAnB,KAAoC,WAAzE,EAAsF;MACpF,OAAO,KAAKF,MAAL,CAAYE,YAAnB;IACD;;IAED,MAAMH,MAAM,GAAG,KAAKC,MAAL,CAAYD,MAA3B;IACA,OAAOX,SAAS,CAACD,cAAD,EAAiB,CAACM,cAAc,CAACM,MAAD,CAAd,GAAyBA,MAAM,CAACA,MAAM,CAACF,MAAP,GAAgB,CAAjB,CAA/B,GAAqDE,MAAtD,EAA8DI,KAA9D,EAAjB,CAAhB;EACD;EACD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;EAGEF,SAAS,CAACG,SAAD,EAAgBC,MAAhB,EAAiC,KAAhCD,SAAgC,cAAhCA,SAAgC,GAApB,CAAoB,MAAjBC,MAAiB,cAAjBA,MAAiB,GAAR,CAAC,CAAD,EAAI,CAAJ,CAAQ;IACxC,IAAI,YAAY,KAAKL,MAAjB,IAA2B,OAAO,KAAKA,MAAL,CAAYD,MAAnB,KAA8B,WAAzD,IAAwEM,MAAM,CAAC,CAAD,CAAN,KAAc,CAAtF,IAA2FA,MAAM,CAAC,CAAD,CAAN,KAAc,CAA7G,EAAgH;MAC9G,MAAM;QACJN,MADI;MAEF,KAAKC,MAFT;;MAIA,IAAIP,cAAc,CAACM,MAAD,CAAlB,EAA4B;QAC1B,IAAI,OAAOA,MAAM,CAACK,SAAD,CAAb,KAA6B,WAAjC,EAA8C;UAC5C,OAAOL,MAAM,CAACK,SAAD,CAAN,CAAkBD,KAAlB,EAAP;QACD;MACF,CAJD,MAIO,IAAIC,SAAS,KAAKL,MAAM,CAACF,MAAzB,EAAiC;QACtC,OAAOE,MAAM,CAACI,KAAP,EAAP;MACD;IACF;;IAED,MAAM;MACJD,YADI;IAEF,IAFJ;IAGA,MAAMI,YAAY,GAAGf,WAAW,GAAGgB,KAAd,CAAoBF,MAApB,EAA4BG,KAA5B,CAAkC,IAAlC,CAArB;IACA,OAAOnB,QAAQ,CAAC,CAAAoB,CAAC,KAAIP,YAAY,CAACI,YAAY,CAACG,CAAD,CAAb,CAAlB,EAAqCL,SAArC,CAAf;EACD;;EAEDM,iBAAiB,GAAG;IAClB;IACA;IACA;IACA,OAAOpB,eAAe,CAAC,KAAKY,YAAN,CAAtB;EACD,CAtDgE"},"metadata":{},"sourceType":"module"}