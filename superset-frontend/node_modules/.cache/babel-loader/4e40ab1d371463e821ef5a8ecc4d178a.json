{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import { css as _css } from \"@emotion/react\";import _isEmpty from \"lodash/isEmpty\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Fragment, useState, useEffect } from 'react';\nimport rison from 'rison';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useQueryParams, BooleanParam } from 'use-query-params';\n\nimport { t, styled, css, SupersetClient, getExtensionsRegistry, useTheme } from '@superset-ui/core';\nimport { MainNav as Menu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport { findPermission } from 'src/utils/findPermission';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport DatabaseModal from 'src/features/databases/DatabaseModal';\nimport { uploadUserPerms } from 'src/views/CRUD/utils';\nimport LanguagePicker from './LanguagePicker';\nimport { GlobalMenuDataOptions } from './types';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst extensionsRegistry = getExtensionsRegistry();\nconst versionInfoStyles = (theme) => css`\n  padding: ${theme.gridUnit * 1.5}px ${theme.gridUnit * 4}px\n    ${theme.gridUnit * 4}px ${theme.gridUnit * 7}px;\n  color: ${theme.colors.grayscale.base};\n  font-size: ${theme.typography.sizes.xs}px;\n  white-space: nowrap;\n`;\nconst StyledI = styled.div`\n  color: ${(_ref) => {let { theme } = _ref;return theme.colors.primary.dark1;}};\n`;\nconst styledDisabled = (theme) => css`\n  color: ${theme.colors.grayscale.light1};\n  .ant-menu-item-active {\n    color: ${theme.colors.grayscale.light1};\n    cursor: default;\n  }\n`;\nconst StyledDiv = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: ${(_ref2) => {let { align } = _ref2;return align;}};\n  align-items: center;\n  margin-right: ${(_ref3) => {let { theme } = _ref3;return theme.gridUnit;}}px;\n  .ant-menu-submenu-title > svg {\n    top: ${(_ref4) => {let { theme } = _ref4;return theme.gridUnit * 5.25;}}px;\n  }\n`;\nconst StyledMenuItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\nconst StyledAnchor = styled.a`\n  padding-right: ${(_ref5) => {let { theme } = _ref5;return theme.gridUnit;}}px;\n  padding-left: ${(_ref6) => {let { theme } = _ref6;return theme.gridUnit;}}px;\n`;\nconst tagStyles = (theme) => css`\n  color: ${theme.colors.grayscale.light5};\n`;\nconst styledChildMenu = (theme) => css`\n  &:hover {\n    color: ${theme.colors.primary.base} !important;\n    cursor: pointer !important;\n  }\n`;\nconst { SubMenu } = Menu;\nconst RightMenu = (_ref7) => {let { align, settings, navbarRight, isFrontendRoute, environmentTag, setQuery } = _ref7;\n  const user = useSelector((state) => state.user);\n  const dashboardId = useSelector((state) => {var _state$dashboardInfo;return (_state$dashboardInfo = state.dashboardInfo) == null ? void 0 : _state$dashboardInfo.id;});\n  const userValues = user || {};\n  const { roles } = userValues;\n  const { CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS, HAS_GSHEETS_INSTALLED } = useSelector((state) => state.common.conf);\n  const [showDatabaseModal, setShowDatabaseModal] = useState(false);\n  const [engine, setEngine] = useState('');\n  const canSql = findPermission('can_sqllab', 'Superset', roles);\n  const canDashboard = findPermission('can_write', 'Dashboard', roles);\n  const canChart = findPermission('can_write', 'Chart', roles);\n  const canDatabase = findPermission('can_write', 'Database', roles);\n  const canDataset = findPermission('can_write', 'Dataset', roles);\n  const { canUploadData, canUploadCSV, canUploadColumnar, canUploadExcel } = uploadUserPerms(roles, CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS);\n  const showActionDropdown = canSql || canChart || canDashboard;\n  const [allowUploads, setAllowUploads] = useState(false);\n  const [nonExamplesDBConnected, setNonExamplesDBConnected] = useState(false);\n  const isAdmin = isUserAdmin(user);\n  const showUploads = allowUploads || isAdmin;\n  const dropdownItems = [\n  {\n    label: t('Data'),\n    icon: 'fa-database',\n    childs: [\n    {\n      label: t('Connect database'),\n      name: GlobalMenuDataOptions.DB_CONNECTION,\n      perm: canDatabase && !nonExamplesDBConnected },\n\n    {\n      label: t('Create dataset'),\n      name: GlobalMenuDataOptions.DATASET_CREATION,\n      url: '/dataset/add/',\n      perm: canDataset && nonExamplesDBConnected },\n\n    {\n      label: t('Connect Google Sheet'),\n      name: GlobalMenuDataOptions.GOOGLE_SHEETS,\n      perm: canDatabase && HAS_GSHEETS_INSTALLED },\n\n    {\n      label: t('Upload CSV to database'),\n      name: 'Upload a CSV',\n      url: '/csvtodatabaseview/form',\n      perm: canUploadCSV && showUploads,\n      disable: isAdmin && !allowUploads },\n\n    {\n      label: t('Upload columnar file to database'),\n      name: 'Upload a Columnar file',\n      url: '/columnartodatabaseview/form',\n      perm: canUploadColumnar && showUploads,\n      disable: isAdmin && !allowUploads },\n\n    {\n      label: t('Upload Excel file to database'),\n      name: 'Upload Excel',\n      url: '/exceltodatabaseview/form',\n      perm: canUploadExcel && showUploads,\n      disable: isAdmin && !allowUploads }] },\n\n\n\n  {\n    label: t('SQL query'),\n    url: '/superset/sqllab?new=true',\n    icon: 'fa-fw fa-search',\n    perm: 'can_sqllab',\n    view: 'Superset' },\n\n  {\n    label: t('Chart'),\n    url: Number.isInteger(dashboardId) ?\n    `/chart/add?dashboard_id=${dashboardId}` :\n    '/chart/add',\n    icon: 'fa-fw fa-bar-chart',\n    perm: 'can_write',\n    view: 'Chart' },\n\n  {\n    label: t('Dashboard'),\n    url: '/dashboard/new',\n    icon: 'fa-fw fa-dashboard',\n    perm: 'can_write',\n    view: 'Dashboard' }];\n\n\n  const checkAllowUploads = () => {\n    const payload = {\n      filters: [\n      { col: 'allow_file_upload', opr: 'upload_is_enabled', value: true }] };\n\n\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}` }).\n    then((_ref8) => {var _json$result;let { json } = _ref8;\n      // There might be some existings Gsheets and Clickhouse DBs\n      // with allow_file_upload set as True which is not possible from now on\n      const allowedDatabasesWithFileUpload = (json == null ? void 0 : (_json$result = json.result) == null ? void 0 : _json$result.filter((database) => {var _database$engine_info;return database == null ? void 0 : (_database$engine_info = database.engine_information) == null ? void 0 : _database$engine_info.supports_file_upload;})) || [];\n      setAllowUploads((allowedDatabasesWithFileUpload == null ? void 0 : allowedDatabasesWithFileUpload.length) >= 1);\n    });\n  };\n  const existsNonExamplesDatabases = () => {\n    const payload = {\n      filters: [{ col: 'database_name', opr: 'neq', value: 'examples' }] };\n\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}` }).\n    then((_ref9) => {let { json } = _ref9;\n      setNonExamplesDBConnected(json.count >= 1);\n    });\n  };\n  useEffect(() => {\n    if (canUploadData) {\n      checkAllowUploads();\n    }\n  }, [canUploadData]);\n  useEffect(() => {\n    if (canDatabase || canDataset) {\n      existsNonExamplesDatabases();\n    }\n  }, [canDatabase, canDataset]);\n  const menuIconAndLabel = (menu) => ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(\"i\", { \"data-test\": `menu-item-${menu.label}`, className: `fa ${menu.icon}` }),\n  menu.label);\n\n  const handleMenuSelection = (itemChose) => {\n    if (itemChose.key === GlobalMenuDataOptions.DB_CONNECTION) {\n      setShowDatabaseModal(true);\n    } else\n    if (itemChose.key === GlobalMenuDataOptions.GOOGLE_SHEETS) {\n      setShowDatabaseModal(true);\n      setEngine('Google Sheets');\n    }\n  };\n  const handleOnHideModal = () => {\n    setEngine('');\n    setShowDatabaseModal(false);\n  };\n  const tooltipText = t(\"Enable 'Allow file uploads to database' in any database's settings\");\n  const buildMenuItem = (item) => item.disable ? ___EmotionJSX(Menu.Item, { key: item.name, css: styledDisabled },\n  ___EmotionJSX(Tooltip, { placement: \"top\", title: tooltipText },\n  item.label)) :\n\n  ___EmotionJSX(Menu.Item, { key: item.name, css: styledChildMenu },\n  item.url ? ___EmotionJSX(\"a\", { href: item.url }, \" \", item.label, \" \") : item.label);\n\n  const onMenuOpen = (openKeys) => {\n    // We should query the API only if opening Data submenus\n    // because the rest don't need this information. Not using\n    // \"Data\" directly since we might change the label later on?\n    if (openKeys.length > 1 &&\n    !_isEmpty(openKeys == null ? void 0 : openKeys.filter((key) => {var _dropdownItems$;return _includesInstanceProperty(key).call(key, `sub2_${dropdownItems == null ? void 0 : (_dropdownItems$ = dropdownItems[0]) == null ? void 0 : _dropdownItems$.label}`);}))) {\n      if (canUploadData)\n      checkAllowUploads();\n      if (canDatabase || canDataset)\n      existsNonExamplesDatabases();\n    }\n    return null;\n  };\n  const RightMenuExtension = extensionsRegistry.get('navbar.right');\n  const RightMenuItemIconExtension = extensionsRegistry.get('navbar.right-menu.item.icon');\n  const handleDatabaseAdd = () => setQuery({ databaseAdded: true });\n  const theme = useTheme();\n  return ___EmotionJSX(StyledDiv, { align: align },\n  canDatabase && ___EmotionJSX(DatabaseModal, { onHide: handleOnHideModal, show: showDatabaseModal, dbEngine: engine, onDatabaseAdd: handleDatabaseAdd }),\n  (environmentTag == null ? void 0 : environmentTag.text) && ___EmotionJSX(Label, { css: /*#__PURE__*/_css({ borderRadius: `${theme.gridUnit * 125}px` }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:RightMenu;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2ZlYXR1cmVzL2hvbWUvUmlnaHRNZW51LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5UHVDIiwiZmlsZSI6Ii9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2ZlYXR1cmVzL2hvbWUvUmlnaHRNZW51LnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCByaXNvbiBmcm9tICdyaXNvbic7XG5pbXBvcnQgeyB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCB7IHVzZVF1ZXJ5UGFyYW1zLCBCb29sZWFuUGFyYW0gfSBmcm9tICd1c2UtcXVlcnktcGFyYW1zJztcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgdCwgc3R5bGVkLCBjc3MsIFN1cGVyc2V0Q2xpZW50LCBnZXRFeHRlbnNpb25zUmVnaXN0cnksIHVzZVRoZW1lLCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IE1haW5OYXYgYXMgTWVudSB9IGZyb20gJ3NyYy9jb21wb25lbnRzL01lbnUnO1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1Rvb2x0aXAnO1xuaW1wb3J0IEljb25zIGZyb20gJ3NyYy9jb21wb25lbnRzL0ljb25zJztcbmltcG9ydCBMYWJlbCBmcm9tICdzcmMvY29tcG9uZW50cy9MYWJlbCc7XG5pbXBvcnQgeyBmaW5kUGVybWlzc2lvbiB9IGZyb20gJ3NyYy91dGlscy9maW5kUGVybWlzc2lvbic7XG5pbXBvcnQgeyBpc1VzZXJBZG1pbiB9IGZyb20gJ3NyYy9kYXNoYm9hcmQvdXRpbC9wZXJtaXNzaW9uVXRpbHMnO1xuaW1wb3J0IERhdGFiYXNlTW9kYWwgZnJvbSAnc3JjL2ZlYXR1cmVzL2RhdGFiYXNlcy9EYXRhYmFzZU1vZGFsJztcbmltcG9ydCB7IHVwbG9hZFVzZXJQZXJtcyB9IGZyb20gJ3NyYy92aWV3cy9DUlVEL3V0aWxzJztcbmltcG9ydCBMYW5ndWFnZVBpY2tlciBmcm9tICcuL0xhbmd1YWdlUGlja2VyJztcbmltcG9ydCB7IEdsb2JhbE1lbnVEYXRhT3B0aW9ucywgfSBmcm9tICcuL3R5cGVzJztcbmNvbnN0IGV4dGVuc2lvbnNSZWdpc3RyeSA9IGdldEV4dGVuc2lvbnNSZWdpc3RyeSgpO1xuY29uc3QgdmVyc2lvbkluZm9TdHlsZXMgPSAodGhlbWUpID0+IGNzcyBgXG4gIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXQgKiAxLjV9cHggJHt0aGVtZS5ncmlkVW5pdCAqIDR9cHhcbiAgICAke3RoZW1lLmdyaWRVbml0ICogNH1weCAke3RoZW1lLmdyaWRVbml0ICogN31weDtcbiAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfTtcbiAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuc2l6ZXMueHN9cHg7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG5gO1xuY29uc3QgU3R5bGVkSSA9IHN0eWxlZC5kaXYgYFxuICBjb2xvcjogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMX07XG5gO1xuY29uc3Qgc3R5bGVkRGlzYWJsZWQgPSAodGhlbWUpID0+IGNzcyBgXG4gIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQxfTtcbiAgLmFudC1tZW51LWl0ZW0tYWN0aXZlIHtcbiAgICBjb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0MX07XG4gICAgY3Vyc29yOiBkZWZhdWx0O1xuICB9XG5gO1xuY29uc3QgU3R5bGVkRGl2ID0gc3R5bGVkLmRpdiBgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGp1c3RpZnktY29udGVudDogJHsoeyBhbGlnbiB9KSA9PiBhbGlnbn07XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgLmFudC1tZW51LXN1Ym1lbnUtdGl0bGUgPiBzdmcge1xuICAgIHRvcDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdCAqIDUuMjV9cHg7XG4gIH1cbmA7XG5jb25zdCBTdHlsZWRNZW51SXRlbVdpdGhJY29uID0gc3R5bGVkLmRpdiBgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbmA7XG5jb25zdCBTdHlsZWRBbmNob3IgPSBzdHlsZWQuYSBgXG4gIHBhZGRpbmctcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIHBhZGRpbmctbGVmdDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbmA7XG5jb25zdCB0YWdTdHlsZXMgPSAodGhlbWUpID0+IGNzcyBgXG4gIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQ1fTtcbmA7XG5jb25zdCBzdHlsZWRDaGlsZE1lbnUgPSAodGhlbWUpID0+IGNzcyBgXG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5wcmltYXJ5LmJhc2V9ICFpbXBvcnRhbnQ7XG4gICAgY3Vyc29yOiBwb2ludGVyICFpbXBvcnRhbnQ7XG4gIH1cbmA7XG5jb25zdCB7IFN1Yk1lbnUgfSA9IE1lbnU7XG5jb25zdCBSaWdodE1lbnUgPSAoeyBhbGlnbiwgc2V0dGluZ3MsIG5hdmJhclJpZ2h0LCBpc0Zyb250ZW5kUm91dGUsIGVudmlyb25tZW50VGFnLCBzZXRRdWVyeSwgfSkgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS51c2VyKTtcbiAgICBjb25zdCBkYXNoYm9hcmRJZCA9IHVzZVNlbGVjdG9yKHN0YXRlID0+IHN0YXRlLmRhc2hib2FyZEluZm8/LmlkKTtcbiAgICBjb25zdCB1c2VyVmFsdWVzID0gdXNlciB8fCB7fTtcbiAgICBjb25zdCB7IHJvbGVzIH0gPSB1c2VyVmFsdWVzO1xuICAgIGNvbnN0IHsgQ1NWX0VYVEVOU0lPTlMsIENPTFVNTkFSX0VYVEVOU0lPTlMsIEVYQ0VMX0VYVEVOU0lPTlMsIEFMTE9XRURfRVhURU5TSU9OUywgSEFTX0dTSEVFVFNfSU5TVEFMTEVELCB9ID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUuY29tbW9uLmNvbmYpO1xuICAgIGNvbnN0IFtzaG93RGF0YWJhc2VNb2RhbCwgc2V0U2hvd0RhdGFiYXNlTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtlbmdpbmUsIHNldEVuZ2luZV0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgY2FuU3FsID0gZmluZFBlcm1pc3Npb24oJ2Nhbl9zcWxsYWInLCAnU3VwZXJzZXQnLCByb2xlcyk7XG4gICAgY29uc3QgY2FuRGFzaGJvYXJkID0gZmluZFBlcm1pc3Npb24oJ2Nhbl93cml0ZScsICdEYXNoYm9hcmQnLCByb2xlcyk7XG4gICAgY29uc3QgY2FuQ2hhcnQgPSBmaW5kUGVybWlzc2lvbignY2FuX3dyaXRlJywgJ0NoYXJ0Jywgcm9sZXMpO1xuICAgIGNvbnN0IGNhbkRhdGFiYXNlID0gZmluZFBlcm1pc3Npb24oJ2Nhbl93cml0ZScsICdEYXRhYmFzZScsIHJvbGVzKTtcbiAgICBjb25zdCBjYW5EYXRhc2V0ID0gZmluZFBlcm1pc3Npb24oJ2Nhbl93cml0ZScsICdEYXRhc2V0Jywgcm9sZXMpO1xuICAgIGNvbnN0IHsgY2FuVXBsb2FkRGF0YSwgY2FuVXBsb2FkQ1NWLCBjYW5VcGxvYWRDb2x1bW5hciwgY2FuVXBsb2FkRXhjZWwgfSA9IHVwbG9hZFVzZXJQZXJtcyhyb2xlcywgQ1NWX0VYVEVOU0lPTlMsIENPTFVNTkFSX0VYVEVOU0lPTlMsIEVYQ0VMX0VYVEVOU0lPTlMsIEFMTE9XRURfRVhURU5TSU9OUyk7XG4gICAgY29uc3Qgc2hvd0FjdGlvbkRyb3Bkb3duID0gY2FuU3FsIHx8IGNhbkNoYXJ0IHx8IGNhbkRhc2hib2FyZDtcbiAgICBjb25zdCBbYWxsb3dVcGxvYWRzLCBzZXRBbGxvd1VwbG9hZHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtub25FeGFtcGxlc0RCQ29ubmVjdGVkLCBzZXROb25FeGFtcGxlc0RCQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBpc0FkbWluID0gaXNVc2VyQWRtaW4odXNlcik7XG4gICAgY29uc3Qgc2hvd1VwbG9hZHMgPSBhbGxvd1VwbG9hZHMgfHwgaXNBZG1pbjtcbiAgICBjb25zdCBkcm9wZG93bkl0ZW1zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogdCgnRGF0YScpLFxuICAgICAgICAgICAgaWNvbjogJ2ZhLWRhdGFiYXNlJyxcbiAgICAgICAgICAgIGNoaWxkczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ0Nvbm5lY3QgZGF0YWJhc2UnKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogR2xvYmFsTWVudURhdGFPcHRpb25zLkRCX0NPTk5FQ1RJT04sXG4gICAgICAgICAgICAgICAgICAgIHBlcm06IGNhbkRhdGFiYXNlICYmICFub25FeGFtcGxlc0RCQ29ubmVjdGVkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnQ3JlYXRlIGRhdGFzZXQnKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogR2xvYmFsTWVudURhdGFPcHRpb25zLkRBVEFTRVRfQ1JFQVRJT04sXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9kYXRhc2V0L2FkZC8nLFxuICAgICAgICAgICAgICAgICAgICBwZXJtOiBjYW5EYXRhc2V0ICYmIG5vbkV4YW1wbGVzREJDb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdDb25uZWN0IEdvb2dsZSBTaGVldCcpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBHbG9iYWxNZW51RGF0YU9wdGlvbnMuR09PR0xFX1NIRUVUUyxcbiAgICAgICAgICAgICAgICAgICAgcGVybTogY2FuRGF0YWJhc2UgJiYgSEFTX0dTSEVFVFNfSU5TVEFMTEVELFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdCgnVXBsb2FkIENTViB0byBkYXRhYmFzZScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVXBsb2FkIGEgQ1NWJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2NzdnRvZGF0YWJhc2V2aWV3L2Zvcm0nLFxuICAgICAgICAgICAgICAgICAgICBwZXJtOiBjYW5VcGxvYWRDU1YgJiYgc2hvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGU6IGlzQWRtaW4gJiYgIWFsbG93VXBsb2FkcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHQoJ1VwbG9hZCBjb2x1bW5hciBmaWxlIHRvIGRhdGFiYXNlJyksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdVcGxvYWQgYSBDb2x1bW5hciBmaWxlJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2NvbHVtbmFydG9kYXRhYmFzZXZpZXcvZm9ybScsXG4gICAgICAgICAgICAgICAgICAgIHBlcm06IGNhblVwbG9hZENvbHVtbmFyICYmIHNob3dVcGxvYWRzLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlOiBpc0FkbWluICYmICFhbGxvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0KCdVcGxvYWQgRXhjZWwgZmlsZSB0byBkYXRhYmFzZScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVXBsb2FkIEV4Y2VsJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2V4Y2VsdG9kYXRhYmFzZXZpZXcvZm9ybScsXG4gICAgICAgICAgICAgICAgICAgIHBlcm06IGNhblVwbG9hZEV4Y2VsICYmIHNob3dVcGxvYWRzLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlOiBpc0FkbWluICYmICFhbGxvd1VwbG9hZHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiB0KCdTUUwgcXVlcnknKSxcbiAgICAgICAgICAgIHVybDogJy9zdXBlcnNldC9zcWxsYWI/bmV3PXRydWUnLFxuICAgICAgICAgICAgaWNvbjogJ2ZhLWZ3IGZhLXNlYXJjaCcsXG4gICAgICAgICAgICBwZXJtOiAnY2FuX3NxbGxhYicsXG4gICAgICAgICAgICB2aWV3OiAnU3VwZXJzZXQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogdCgnQ2hhcnQnKSxcbiAgICAgICAgICAgIHVybDogTnVtYmVyLmlzSW50ZWdlcihkYXNoYm9hcmRJZClcbiAgICAgICAgICAgICAgICA/IGAvY2hhcnQvYWRkP2Rhc2hib2FyZF9pZD0ke2Rhc2hib2FyZElkfWBcbiAgICAgICAgICAgICAgICA6ICcvY2hhcnQvYWRkJyxcbiAgICAgICAgICAgIGljb246ICdmYS1mdyBmYS1iYXItY2hhcnQnLFxuICAgICAgICAgICAgcGVybTogJ2Nhbl93cml0ZScsXG4gICAgICAgICAgICB2aWV3OiAnQ2hhcnQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogdCgnRGFzaGJvYXJkJyksXG4gICAgICAgICAgICB1cmw6ICcvZGFzaGJvYXJkL25ldycsXG4gICAgICAgICAgICBpY29uOiAnZmEtZncgZmEtZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIHBlcm06ICdjYW5fd3JpdGUnLFxuICAgICAgICAgICAgdmlldzogJ0Rhc2hib2FyZCcsXG4gICAgICAgIH0sXG4gICAgXTtcbiAgICBjb25zdCBjaGVja0FsbG93VXBsb2FkcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIGZpbHRlcnM6IFtcbiAgICAgICAgICAgICAgICB7IGNvbDogJ2FsbG93X2ZpbGVfdXBsb2FkJywgb3ByOiAndXBsb2FkX2lzX2VuYWJsZWQnLCB2YWx1ZTogdHJ1ZSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICAgICAgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9kYXRhYmFzZS8/cT0ke3Jpc29uLmVuY29kZShwYXlsb2FkKX1gLFxuICAgICAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlcmUgbWlnaHQgYmUgc29tZSBleGlzdGluZ3MgR3NoZWV0cyBhbmQgQ2xpY2tob3VzZSBEQnNcbiAgICAgICAgICAgIC8vIHdpdGggYWxsb3dfZmlsZV91cGxvYWQgc2V0IGFzIFRydWUgd2hpY2ggaXMgbm90IHBvc3NpYmxlIGZyb20gbm93IG9uXG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkRGF0YWJhc2VzV2l0aEZpbGVVcGxvYWQgPSBqc29uPy5yZXN1bHQ/LmZpbHRlcigoZGF0YWJhc2UpID0+IGRhdGFiYXNlPy5lbmdpbmVfaW5mb3JtYXRpb24/LnN1cHBvcnRzX2ZpbGVfdXBsb2FkKSB8fCBbXTtcbiAgICAgICAgICAgIHNldEFsbG93VXBsb2FkcyhhbGxvd2VkRGF0YWJhc2VzV2l0aEZpbGVVcGxvYWQ/Lmxlbmd0aCA+PSAxKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBleGlzdHNOb25FeGFtcGxlc0RhdGFiYXNlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIGZpbHRlcnM6IFt7IGNvbDogJ2RhdGFiYXNlX25hbWUnLCBvcHI6ICduZXEnLCB2YWx1ZTogJ2V4YW1wbGVzJyB9XSxcbiAgICAgICAgfTtcbiAgICAgICAgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9kYXRhYmFzZS8/cT0ke3Jpc29uLmVuY29kZShwYXlsb2FkKX1gLFxuICAgICAgICB9KS50aGVuKCh7IGpzb24gfSkgPT4ge1xuICAgICAgICAgICAgc2V0Tm9uRXhhbXBsZXNEQkNvbm5lY3RlZChqc29uLmNvdW50ID49IDEpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChjYW5VcGxvYWREYXRhKSB7XG4gICAgICAgICAgICBjaGVja0FsbG93VXBsb2FkcygpO1xuICAgICAgICB9XG4gICAgfSwgW2NhblVwbG9hZERhdGFdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoY2FuRGF0YWJhc2UgfHwgY2FuRGF0YXNldCkge1xuICAgICAgICAgICAgZXhpc3RzTm9uRXhhbXBsZXNEYXRhYmFzZXMoKTtcbiAgICAgICAgfVxuICAgIH0sIFtjYW5EYXRhYmFzZSwgY2FuRGF0YXNldF0pO1xuICAgIGNvbnN0IG1lbnVJY29uQW5kTGFiZWwgPSAobWVudSkgPT4gKDw+XG4gICAgICA8aSBkYXRhLXRlc3Q9e2BtZW51LWl0ZW0tJHttZW51LmxhYmVsfWB9IGNsYXNzTmFtZT17YGZhICR7bWVudS5pY29ufWB9Lz5cbiAgICAgIHttZW51LmxhYmVsfVxuICAgIDwvPik7XG4gICAgY29uc3QgaGFuZGxlTWVudVNlbGVjdGlvbiA9IChpdGVtQ2hvc2UpID0+IHtcbiAgICAgICAgaWYgKGl0ZW1DaG9zZS5rZXkgPT09IEdsb2JhbE1lbnVEYXRhT3B0aW9ucy5EQl9DT05ORUNUSU9OKSB7XG4gICAgICAgICAgICBzZXRTaG93RGF0YWJhc2VNb2RhbCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtQ2hvc2Uua2V5ID09PSBHbG9iYWxNZW51RGF0YU9wdGlvbnMuR09PR0xFX1NIRUVUUykge1xuICAgICAgICAgICAgc2V0U2hvd0RhdGFiYXNlTW9kYWwodHJ1ZSk7XG4gICAgICAgICAgICBzZXRFbmdpbmUoJ0dvb2dsZSBTaGVldHMnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlT25IaWRlTW9kYWwgPSAoKSA9PiB7XG4gICAgICAgIHNldEVuZ2luZSgnJyk7XG4gICAgICAgIHNldFNob3dEYXRhYmFzZU1vZGFsKGZhbHNlKTtcbiAgICB9O1xuICAgIGNvbnN0IHRvb2x0aXBUZXh0ID0gdChcIkVuYWJsZSAnQWxsb3cgZmlsZSB1cGxvYWRzIHRvIGRhdGFiYXNlJyBpbiBhbnkgZGF0YWJhc2UncyBzZXR0aW5nc1wiKTtcbiAgICBjb25zdCBidWlsZE1lbnVJdGVtID0gKGl0ZW0pID0+IGl0ZW0uZGlzYWJsZSA/ICg8TWVudS5JdGVtIGtleT17aXRlbS5uYW1lfSBjc3M9e3N0eWxlZERpc2FibGVkfT5cbiAgICAgICAgPFRvb2x0aXAgcGxhY2VtZW50PVwidG9wXCIgdGl0bGU9e3Rvb2x0aXBUZXh0fT5cbiAgICAgICAgICB7aXRlbS5sYWJlbH1cbiAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgPC9NZW51Lkl0ZW0+KSA6ICg8TWVudS5JdGVtIGtleT17aXRlbS5uYW1lfSBjc3M9e3N0eWxlZENoaWxkTWVudX0+XG4gICAgICAgIHtpdGVtLnVybCA/IDxhIGhyZWY9e2l0ZW0udXJsfT4ge2l0ZW0ubGFiZWx9IDwvYT4gOiBpdGVtLmxhYmVsfVxuICAgICAgPC9NZW51Lkl0ZW0+KTtcbiAgICBjb25zdCBvbk1lbnVPcGVuID0gKG9wZW5LZXlzKSA9PiB7XG4gICAgICAgIC8vIFdlIHNob3VsZCBxdWVyeSB0aGUgQVBJIG9ubHkgaWYgb3BlbmluZyBEYXRhIHN1Ym1lbnVzXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIHJlc3QgZG9uJ3QgbmVlZCB0aGlzIGluZm9ybWF0aW9uLiBOb3QgdXNpbmdcbiAgICAgICAgLy8gXCJEYXRhXCIgZGlyZWN0bHkgc2luY2Ugd2UgbWlnaHQgY2hhbmdlIHRoZSBsYWJlbCBsYXRlciBvbj9cbiAgICAgICAgaWYgKG9wZW5LZXlzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgICFpc0VtcHR5KG9wZW5LZXlzPy5maWx0ZXIoKGtleSkgPT4ga2V5LmluY2x1ZGVzKGBzdWIyXyR7ZHJvcGRvd25JdGVtcz8uWzBdPy5sYWJlbH1gKSkpKSB7XG4gICAgICAgICAgICBpZiAoY2FuVXBsb2FkRGF0YSlcbiAgICAgICAgICAgICAgICBjaGVja0FsbG93VXBsb2FkcygpO1xuICAgICAgICAgICAgaWYgKGNhbkRhdGFiYXNlIHx8IGNhbkRhdGFzZXQpXG4gICAgICAgICAgICAgICAgZXhpc3RzTm9uRXhhbXBsZXNEYXRhYmFzZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IFJpZ2h0TWVudUV4dGVuc2lvbiA9IGV4dGVuc2lvbnNSZWdpc3RyeS5nZXQoJ25hdmJhci5yaWdodCcpO1xuICAgIGNvbnN0IFJpZ2h0TWVudUl0ZW1JY29uRXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldCgnbmF2YmFyLnJpZ2h0LW1lbnUuaXRlbS5pY29uJyk7XG4gICAgY29uc3QgaGFuZGxlRGF0YWJhc2VBZGQgPSAoKSA9PiBzZXRRdWVyeSh7IGRhdGFiYXNlQWRkZWQ6IHRydWUgfSk7XG4gICAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICAgIHJldHVybiAoPFN0eWxlZERpdiBhbGlnbj17YWxpZ259PlxuICAgICAge2NhbkRhdGFiYXNlICYmICg8RGF0YWJhc2VNb2RhbCBvbkhpZGU9e2hhbmRsZU9uSGlkZU1vZGFsfSBzaG93PXtzaG93RGF0YWJhc2VNb2RhbH0gZGJFbmdpbmU9e2VuZ2luZX0gb25EYXRhYmFzZUFkZD17aGFuZGxlRGF0YWJhc2VBZGR9Lz4pfVxuICAgICAge2Vudmlyb25tZW50VGFnPy50ZXh0ICYmICg8TGFiZWwgY3NzPXt7IGJvcmRlclJhZGl1czogYCR7dGhlbWUuZ3JpZFVuaXQgKiAxMjV9cHhgIH19IGNvbG9yPXsvXiMoPzpbMC05YS1mXXszfSl7MSwyfSQvaS50ZXN0KGVudmlyb25tZW50VGFnLmNvbG9yKVxuICAgICAgICAgICAgICAgID8gZW52aXJvbm1lbnRUYWcuY29sb3JcbiAgICAgICAgICAgICAgICA6IGVudmlyb25tZW50VGFnLmNvbG9yXG4gICAgICAgICAgICAgICAgICAgIC5zcGxpdCgnLicpXG4gICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoKG8sIGkpID0+IG9baV0sIHRoZW1lLmNvbG9ycyl9PlxuICAgICAgICAgIDxzcGFuIGNzcz17dGFnU3R5bGVzfT57ZW52aXJvbm1lbnRUYWcudGV4dH08L3NwYW4+XG4gICAgICAgIDwvTGFiZWw+KX1cbiAgICAgIDxNZW51IHNlbGVjdGFibGU9e2ZhbHNlfSBtb2RlPVwiaG9yaXpvbnRhbFwiIG9uQ2xpY2s9e2hhbmRsZU1lbnVTZWxlY3Rpb259IG9uT3BlbkNoYW5nZT17b25NZW51T3Blbn0+XG4gICAgICAgIHtSaWdodE1lbnVFeHRlbnNpb24gJiYgPFJpZ2h0TWVudUV4dGVuc2lvbiAvPn1cbiAgICAgICAgeyFuYXZiYXJSaWdodC51c2VyX2lzX2Fub255bW91cyAmJiBzaG93QWN0aW9uRHJvcGRvd24gJiYgKDxTdWJNZW51IGRhdGEtdGVzdD1cIm5ldy1kcm9wZG93blwiIHRpdGxlPXs8U3R5bGVkSSBkYXRhLXRlc3Q9XCJuZXctZHJvcGRvd24taWNvblwiIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIi8+fSBpY29uPXs8SWNvbnMuVHJpYW5nbGVEb3duIC8+fT5cbiAgICAgICAgICAgIHtkcm9wZG93bkl0ZW1zPy5tYXA/LihtZW51ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5TaG93Q2hpbGQgPSBtZW51LmNoaWxkcz8uc29tZShpdGVtID0+IHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAhIWl0ZW0ucGVybSk7XG4gICAgICAgICAgICAgICAgaWYgKG1lbnUuY2hpbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5TaG93Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoPFN1Yk1lbnUga2V5PXtgc3ViMl8ke21lbnUubGFiZWx9YH0gY2xhc3NOYW1lPVwiZGF0YS1tZW51XCIgdGl0bGU9e21lbnVJY29uQW5kTGFiZWwobWVudSl9PlxuICAgICAgICAgICAgICAgICAgICAgIHttZW51Py5jaGlsZHM/Lm1hcD8uKChpdGVtLCBpZHgpID0+IHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJyAmJiBpdGVtLm5hbWUgJiYgaXRlbS5wZXJtID8gKDxGcmFnbWVudCBrZXk9e2l0ZW0ubmFtZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2lkeCA9PT0gMyAmJiA8TWVudS5EaXZpZGVyIC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZE1lbnVJdGVtKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0ZyYWdtZW50PikgOiBudWxsKX1cbiAgICAgICAgICAgICAgICAgICAgPC9TdWJNZW51Pik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZW51LnVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChmaW5kUGVybWlzc2lvbihtZW51LnBlcm0sIG1lbnUudmlldywgcm9sZXMpICYmICg8TWVudS5JdGVtIGtleT17bWVudS5sYWJlbH0+XG4gICAgICAgICAgICAgICAgICAgIHtpc0Zyb250ZW5kUm91dGUobWVudS51cmwpID8gKDxMaW5rIHRvPXttZW51LnVybCB8fCAnJ30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBkYXRhLXRlc3Q9e2BtZW51LWl0ZW0tJHttZW51LmxhYmVsfWB9IGNsYXNzTmFtZT17YGZhICR7bWVudS5pY29ufWB9Lz57JyAnfVxuICAgICAgICAgICAgICAgICAgICAgICAge21lbnUubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPikgOiAoPGEgaHJlZj17bWVudS51cmx9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgZGF0YS10ZXN0PXtgbWVudS1pdGVtLSR7bWVudS5sYWJlbH1gfSBjbGFzc05hbWU9e2BmYSAke21lbnUuaWNvbn1gfS8+eycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZW51LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDwvYT4pfVxuICAgICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KSk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L1N1Yk1lbnU+KX1cbiAgICAgICAgPFN1Yk1lbnUgdGl0bGU9e3QoJ1NldHRpbmdzJyl9IGljb249ezxJY29ucy5UcmlhbmdsZURvd24gaWNvblNpemU9XCJ4bFwiLz59PlxuICAgICAgICAgIHtzZXR0aW5ncz8ubWFwPy4oKHNlY3Rpb24sIGluZGV4KSA9PiBbXG4gICAgICAgICAgICA8TWVudS5JdGVtR3JvdXAga2V5PXtgJHtzZWN0aW9uLmxhYmVsfWB9IHRpdGxlPXtzZWN0aW9uLmxhYmVsfT5cbiAgICAgICAgICAgICAge3NlY3Rpb24/LmNoaWxkcz8ubWFwPy4oY2hpbGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVudUl0ZW1EaXNwbGF5ID0gUmlnaHRNZW51SXRlbUljb25FeHRlbnNpb24gPyAoPFN0eWxlZE1lbnVJdGVtV2l0aEljb24+XG4gICAgICAgICAgICAgICAgICAgICAge2NoaWxkLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDxSaWdodE1lbnVJdGVtSWNvbkV4dGVuc2lvbiBtZW51Q2hpbGQ9e2NoaWxkfS8+XG4gICAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTWVudUl0ZW1XaXRoSWNvbj4pIDogKGNoaWxkLmxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoPE1lbnUuSXRlbSBrZXk9e2Ake2NoaWxkLmxhYmVsfWB9PlxuICAgICAgICAgICAgICAgICAgICAgIHtpc0Zyb250ZW5kUm91dGUoY2hpbGQudXJsKSA/ICg8TGluayB0bz17Y2hpbGQudXJsIHx8ICcnfT57bWVudUl0ZW1EaXNwbGF5fTwvTGluaz4pIDogKDxhIGhyZWY9e2NoaWxkLnVybH0+e21lbnVJdGVtRGlzcGxheX08L2E+KX1cbiAgICAgICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvTWVudS5JdGVtR3JvdXA+LFxuICAgICAgICAgICAgaW5kZXggPCBzZXR0aW5ncy5sZW5ndGggLSAxICYmICg8TWVudS5EaXZpZGVyIGtleT17YGRpdmlkZXJfJHtpbmRleH1gfS8+KSxcbiAgICAgICAgXSl9XG5cbiAgICAgICAgICB7IW5hdmJhclJpZ2h0LnVzZXJfaXNfYW5vbnltb3VzICYmIFtcbiAgICAgICAgICAgIDxNZW51LkRpdmlkZXIga2V5PVwidXNlci1kaXZpZGVyXCIvPixcbiAgICAgICAgICAgIDxNZW51Lkl0ZW1Hcm91cCBrZXk9XCJ1c2VyLXNlY3Rpb25cIiB0aXRsZT17dCgnVXNlcicpfT5cbiAgICAgICAgICAgICAge25hdmJhclJpZ2h0LnVzZXJfcHJvZmlsZV91cmwgJiYgKDxNZW51Lkl0ZW0ga2V5PVwicHJvZmlsZVwiPlxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj17bmF2YmFyUmlnaHQudXNlcl9wcm9maWxlX3VybH0+e3QoJ1Byb2ZpbGUnKX08L2E+XG4gICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KX1cbiAgICAgICAgICAgICAge25hdmJhclJpZ2h0LnVzZXJfaW5mb191cmwgJiYgKDxNZW51Lkl0ZW0ga2V5PVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj17bmF2YmFyUmlnaHQudXNlcl9pbmZvX3VybH0+e3QoJ0luZm8nKX08L2E+XG4gICAgICAgICAgICAgICAgPC9NZW51Lkl0ZW0+KX1cbiAgICAgICAgICAgICAgPE1lbnUuSXRlbSBrZXk9XCJsb2dvdXRcIj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPXtuYXZiYXJSaWdodC51c2VyX2xvZ291dF91cmx9Pnt0KCdMb2dvdXQnKX08L2E+XG4gICAgICAgICAgICAgIDwvTWVudS5JdGVtPlxuICAgICAgICAgICAgPC9NZW51Lkl0ZW1Hcm91cD4sXG4gICAgICAgIF19XG4gICAgICAgICAgeyhuYXZiYXJSaWdodC52ZXJzaW9uX3N0cmluZyB8fCBuYXZiYXJSaWdodC52ZXJzaW9uX3NoYSkgJiYgW1xuICAgICAgICAgICAgPE1lbnUuRGl2aWRlciBrZXk9XCJ2ZXJzaW9uLWluZm8tZGl2aWRlclwiLz4sXG4gICAgICAgICAgICA8TWVudS5JdGVtR3JvdXAga2V5PVwiYWJvdXQtc2VjdGlvblwiIHRpdGxlPXt0KCdBYm91dCcpfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYm91dC1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAge25hdmJhclJpZ2h0LnNob3dfd2F0ZXJtYXJrICYmICg8ZGl2IGNzcz17dmVyc2lvbkluZm9TdHlsZXN9PlxuICAgICAgICAgICAgICAgICAgICB7dCgnUG93ZXJlZCBieSBBcGFjaGUgU3VwZXJzZXQnKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2Pil9XG4gICAgICAgICAgICAgICAge25hdmJhclJpZ2h0LnZlcnNpb25fc3RyaW5nICYmICg8ZGl2IGNzcz17dmVyc2lvbkluZm9TdHlsZXN9PlxuICAgICAgICAgICAgICAgICAgICB7dCgnVmVyc2lvbicpfToge25hdmJhclJpZ2h0LnZlcnNpb25fc3RyaW5nfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICAgICAgICB7bmF2YmFyUmlnaHQudmVyc2lvbl9zaGEgJiYgKDxkaXYgY3NzPXt2ZXJzaW9uSW5mb1N0eWxlc30+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdTSEEnKX06IHtuYXZiYXJSaWdodC52ZXJzaW9uX3NoYX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2Pil9XG4gICAgICAgICAgICAgICAge25hdmJhclJpZ2h0LmJ1aWxkX251bWJlciAmJiAoPGRpdiBjc3M9e3ZlcnNpb25JbmZvU3R5bGVzfT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ0J1aWxkJyl9OiB7bmF2YmFyUmlnaHQuYnVpbGRfbnVtYmVyfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L01lbnUuSXRlbUdyb3VwPixcbiAgICAgICAgXX1cbiAgICAgICAgPC9TdWJNZW51PlxuICAgICAgICB7bmF2YmFyUmlnaHQuc2hvd19sYW5ndWFnZV9waWNrZXIgJiYgKDxMYW5ndWFnZVBpY2tlciBsb2NhbGU9e25hdmJhclJpZ2h0LmxvY2FsZX0gbGFuZ3VhZ2VzPXtuYXZiYXJSaWdodC5sYW5ndWFnZXN9Lz4pfVxuICAgICAgPC9NZW51PlxuICAgICAge25hdmJhclJpZ2h0LmRvY3VtZW50YXRpb25fdXJsICYmICg8PlxuICAgICAgICAgIDxTdHlsZWRBbmNob3IgaHJlZj17bmF2YmFyUmlnaHQuZG9jdW1lbnRhdGlvbl91cmx9IHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vcmVmZXJyZXJcIiB0aXRsZT17bmF2YmFyUmlnaHQuZG9jdW1lbnRhdGlvbl90ZXh0IHx8IHQoJ0RvY3VtZW50YXRpb24nKX0+XG4gICAgICAgICAgICB7bmF2YmFyUmlnaHQuZG9jdW1lbnRhdGlvbl9pY29uID8gKDxpIGNsYXNzTmFtZT17bmF2YmFyUmlnaHQuZG9jdW1lbnRhdGlvbl9pY29ufS8+KSA6ICg8aSBjbGFzc05hbWU9XCJmYSBmYS1xdWVzdGlvblwiLz4pfVxuICAgICAgICAgIDwvU3R5bGVkQW5jaG9yPlxuICAgICAgICAgIDxzcGFuPiZuYnNwOzwvc3Bhbj5cbiAgICAgICAgPC8+KX1cbiAgICAgIHtuYXZiYXJSaWdodC5idWdfcmVwb3J0X3VybCAmJiAoPD5cbiAgICAgICAgICA8U3R5bGVkQW5jaG9yIGhyZWY9e25hdmJhclJpZ2h0LmJ1Z19yZXBvcnRfdXJsfSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub3JlZmVycmVyXCIgdGl0bGU9e25hdmJhclJpZ2h0LmJ1Z19yZXBvcnRfdGV4dCB8fCB0KCdSZXBvcnQgYSBidWcnKX0+XG4gICAgICAgICAgICB7bmF2YmFyUmlnaHQuYnVnX3JlcG9ydF9pY29uID8gKDxpIGNsYXNzTmFtZT17bmF2YmFyUmlnaHQuYnVnX3JlcG9ydF9pY29ufS8+KSA6ICg8aSBjbGFzc05hbWU9XCJmYSBmYS1idWdcIi8+KX1cbiAgICAgICAgICA8L1N0eWxlZEFuY2hvcj5cbiAgICAgICAgICA8c3Bhbj4mbmJzcDs8L3NwYW4+XG4gICAgICAgIDwvPil9XG4gICAgICB7bmF2YmFyUmlnaHQudXNlcl9pc19hbm9ueW1vdXMgJiYgKDxTdHlsZWRBbmNob3IgaHJlZj17bmF2YmFyUmlnaHQudXNlcl9sb2dpbl91cmx9PlxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWZ3IGZhLXNpZ24taW5cIi8+XG4gICAgICAgICAge3QoJ0xvZ2luJyl9XG4gICAgICAgIDwvU3R5bGVkQW5jaG9yPil9XG4gICAgPC9TdHlsZWREaXY+KTtcbn07XG5jb25zdCBSaWdodE1lbnVXaXRoUXVlcnlXcmFwcGVyID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IFssIHNldFF1ZXJ5XSA9IHVzZVF1ZXJ5UGFyYW1zKHtcbiAgICAgICAgZGF0YWJhc2VBZGRlZDogQm9vbGVhblBhcmFtLFxuICAgICAgICBkYXRhc2V0QWRkZWQ6IEJvb2xlYW5QYXJhbSxcbiAgICB9KTtcbiAgICByZXR1cm4gPFJpZ2h0TWVudSBzZXRRdWVyeT17c2V0UXVlcnl9IHsuLi5wcm9wc30vPjtcbn07XG4vLyBRdWVyeSBwYXJhbSBtYW5pcHVsYXRpb24gcmVxdWlyZXMgdGhhdCwgZHVyaW5nIHRoZSBzZXR1cCwgdGhlXG4vLyBRdWVyeVBhcmFtUHJvdmlkZXIgaXMgcHJlc2VudCBhbmQgY29uZmlndXJlZC5cbi8vIFN1cGVyc2V0IHN0aWxsIGhhcyBtdWx0aXBsZSBlbnRyeSBwb2ludHMsIGFuZCBub3QgYWxsIG9mIHRoZW0gaGF2ZVxuLy8gdGhlIHNhbWUgc2V0dXAsIGFuZCBjcml0aWNhbGx5LCBub3QgYWxsIG9mIHRoZW0gaGF2ZSB0aGUgUXVlcnlQYXJhbVByb3ZpZGVyLlxuLy8gVGhpcyB3cmFwcGVyIGVuc3VyZXMgdGhlIFJpZ2h0TWVudSByZW5kZXJzIHJlZ2FyZGxlc3Mgb2YgdGhlIHByb3ZpZGVyIGJlaW5nIHByZXNlbnQuXG5jbGFzcyBSaWdodE1lbnVFcnJvcldyYXBwZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgaGFzRXJyb3I6IGZhbHNlLFxuICAgIH07XG4gICAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHsgaGFzRXJyb3I6IHRydWUgfTtcbiAgICB9XG4gICAgbm9vcCA9ICgpID0+IHsgfTtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gPFJpZ2h0TWVudSBzZXRRdWVyeT17dGhpcy5ub29wfSB7Li4udGhpcy5wcm9wc30vPjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICB9XG59XG5jb25zdCBSaWdodE1lbnVXcmFwcGVyID0gcHJvcHMgPT4gKDxSaWdodE1lbnVFcnJvcldyYXBwZXIgey4uLnByb3BzfT5cbiAgICA8UmlnaHRNZW51V2l0aFF1ZXJ5V3JhcHBlciB7Li4ucHJvcHN9Lz5cbiAgPC9SaWdodE1lbnVFcnJvcldyYXBwZXI+KTtcbmV4cG9ydCBkZWZhdWx0IFJpZ2h0TWVudVdyYXBwZXI7XG4iXX0= */\"), color: /^#(?:[0-9a-f]{3}){1,2}$/i.test(environmentTag.color) ?\n    environmentTag.color :\n    environmentTag.color.\n    split('.').\n    reduce((o, i) => o[i], theme.colors) },\n  ___EmotionJSX(\"span\", { css: tagStyles }, environmentTag.text)),\n\n  ___EmotionJSX(Menu, { selectable: false, mode: \"horizontal\", onClick: handleMenuSelection, onOpenChange: onMenuOpen },\n  RightMenuExtension && ___EmotionJSX(RightMenuExtension, null),\n  !navbarRight.user_is_anonymous && showActionDropdown && ___EmotionJSX(SubMenu, { \"data-test\": \"new-dropdown\", title: ___EmotionJSX(StyledI, { \"data-test\": \"new-dropdown-icon\", className: \"fa fa-plus\" }), icon: ___EmotionJSX(Icons.TriangleDown, null) },\n  dropdownItems == null ? void 0 : dropdownItems.map == null ? void 0 : dropdownItems.map((menu) => {var _menu$childs;\n    const canShowChild = (_menu$childs = menu.childs) == null ? void 0 : _menu$childs.some((item) => typeof item === 'object' && !!item.perm);\n    if (menu.childs) {\n      if (canShowChild) {var _menu$childs2;\n        return ___EmotionJSX(SubMenu, { key: `sub2_${menu.label}`, className: \"data-menu\", title: menuIconAndLabel(menu) },\n        menu == null ? void 0 : (_menu$childs2 = menu.childs) == null ? void 0 : _menu$childs2.map == null ? void 0 : _menu$childs2.map((item, idx) => typeof item !== 'string' && item.name && item.perm ? ___EmotionJSX(Fragment, { key: item.name },\n        idx === 3 && ___EmotionJSX(Menu.Divider, null),\n        buildMenuItem(item)) :\n        null));\n\n      }\n      if (!menu.url) {\n        return null;\n      }\n    }\n    return findPermission(menu.perm, menu.view, roles) && ___EmotionJSX(Menu.Item, { key: menu.label },\n    isFrontendRoute(menu.url) ? ___EmotionJSX(Link, { to: menu.url || '' },\n    ___EmotionJSX(\"i\", { \"data-test\": `menu-item-${menu.label}`, className: `fa ${menu.icon}` }), ' ',\n    menu.label) :\n    ___EmotionJSX(\"a\", { href: menu.url },\n    ___EmotionJSX(\"i\", { \"data-test\": `menu-item-${menu.label}`, className: `fa ${menu.icon}` }), ' ',\n    menu.label));\n\n\n  })),\n\n  ___EmotionJSX(SubMenu, { title: t('Settings'), icon: ___EmotionJSX(Icons.TriangleDown, { iconSize: \"xl\" }) },\n  settings == null ? void 0 : settings.map == null ? void 0 : settings.map((section, index) => {var _section$childs;return [\n    ___EmotionJSX(Menu.ItemGroup, { key: `${section.label}`, title: section.label },\n    section == null ? void 0 : (_section$childs = section.childs) == null ? void 0 : _section$childs.map == null ? void 0 : _section$childs.map((child) => {\n      if (typeof child !== 'string') {\n        const menuItemDisplay = RightMenuItemIconExtension ? ___EmotionJSX(StyledMenuItemWithIcon, null,\n        child.label,\n        ___EmotionJSX(RightMenuItemIconExtension, { menuChild: child })) :\n        child.label;\n        return ___EmotionJSX(Menu.Item, { key: `${child.label}` },\n        isFrontendRoute(child.url) ? ___EmotionJSX(Link, { to: child.url || '' }, menuItemDisplay) : ___EmotionJSX(\"a\", { href: child.url }, menuItemDisplay));\n\n      }\n      return null;\n    })),\n\n    index < settings.length - 1 && ___EmotionJSX(Menu.Divider, { key: `divider_${index}` })];}),\n\n\n  !navbarRight.user_is_anonymous && [\n  ___EmotionJSX(Menu.Divider, { key: \"user-divider\" }),\n  ___EmotionJSX(Menu.ItemGroup, { key: \"user-section\", title: t('User') },\n  navbarRight.user_profile_url && ___EmotionJSX(Menu.Item, { key: \"profile\" },\n  ___EmotionJSX(\"a\", { href: navbarRight.user_profile_url }, t('Profile'))),\n\n  navbarRight.user_info_url && ___EmotionJSX(Menu.Item, { key: \"info\" },\n  ___EmotionJSX(\"a\", { href: navbarRight.user_info_url }, t('Info'))),\n\n  ___EmotionJSX(Menu.Item, { key: \"logout\" },\n  ___EmotionJSX(\"a\", { href: navbarRight.user_logout_url }, t('Logout'))))],\n\n\n\n  (navbarRight.version_string || navbarRight.version_sha) && [\n  ___EmotionJSX(Menu.Divider, { key: \"version-info-divider\" }),\n  ___EmotionJSX(Menu.ItemGroup, { key: \"about-section\", title: t('About') },\n  ___EmotionJSX(\"div\", { className: \"about-section\" },\n  navbarRight.show_watermark && ___EmotionJSX(\"div\", { css: versionInfoStyles },\n  t('Powered by Apache Superset')),\n\n  navbarRight.version_string && ___EmotionJSX(\"div\", { css: versionInfoStyles },\n  t('Version'), \": \", navbarRight.version_string),\n\n  navbarRight.version_sha && ___EmotionJSX(\"div\", { css: versionInfoStyles },\n  t('SHA'), \": \", navbarRight.version_sha),\n\n  navbarRight.build_number && ___EmotionJSX(\"div\", { css: versionInfoStyles },\n  t('Build'), \": \", navbarRight.build_number)))]),\n\n\n\n\n\n  navbarRight.show_language_picker && ___EmotionJSX(LanguagePicker, { locale: navbarRight.locale, languages: navbarRight.languages })),\n\n  navbarRight.documentation_url && ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(StyledAnchor, { href: navbarRight.documentation_url, target: \"_blank\", rel: \"noreferrer\", title: navbarRight.documentation_text || t('Documentation') },\n  navbarRight.documentation_icon ? ___EmotionJSX(\"i\", { className: navbarRight.documentation_icon }) : ___EmotionJSX(\"i\", { className: \"fa fa-question\" })),\n\n  ___EmotionJSX(\"span\", null, \"\\xA0\")),\n\n  navbarRight.bug_report_url && ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(StyledAnchor, { href: navbarRight.bug_report_url, target: \"_blank\", rel: \"noreferrer\", title: navbarRight.bug_report_text || t('Report a bug') },\n  navbarRight.bug_report_icon ? ___EmotionJSX(\"i\", { className: navbarRight.bug_report_icon }) : ___EmotionJSX(\"i\", { className: \"fa fa-bug\" })),\n\n  ___EmotionJSX(\"span\", null, \"\\xA0\")),\n\n  navbarRight.user_is_anonymous && ___EmotionJSX(StyledAnchor, { href: navbarRight.user_login_url },\n  ___EmotionJSX(\"i\", { className: \"fa fa-fw fa-sign-in\" }),\n  t('Login')));\n\n\n};__signature__(RightMenu, \"useSelector{user}\\nuseSelector{dashboardId}\\nuseSelector{{ CSV_EXTENSIONS, COLUMNAR_EXTENSIONS, EXCEL_EXTENSIONS, ALLOWED_EXTENSIONS, HAS_GSHEETS_INSTALLED, }}\\nuseState{[showDatabaseModal, setShowDatabaseModal](false)}\\nuseState{[engine, setEngine]('')}\\nuseState{[allowUploads, setAllowUploads](false)}\\nuseState{[nonExamplesDBConnected, setNonExamplesDBConnected](false)}\\nuseEffect{}\\nuseEffect{}\\nuseTheme{theme}\", () => [useSelector, useSelector, useSelector, useTheme]);\nconst RightMenuWithQueryWrapper = (props) => {\n  const [, setQuery] = useQueryParams({\n    databaseAdded: BooleanParam,\n    datasetAdded: BooleanParam });\n\n  return ___EmotionJSX(RightMenu, _extends({ setQuery: setQuery }, props));\n};\n// Query param manipulation requires that, during the setup, the\n// QueryParamProvider is present and configured.\n// Superset still has multiple entry points, and not all of them have\n// the same setup, and critically, not all of them have the QueryParamProvider.\n// This wrapper ensures the RightMenu renders regardless of the provider being present.\n__signature__(RightMenuWithQueryWrapper, \"useQueryParams{[, setQuery]}\", () => [useQueryParams]);class RightMenuErrorWrapper extends React.PureComponent {constructor() {super(...arguments);this.\n    state = {\n      hasError: false };this.\n\n\n\n\n    noop = () => {};}static getDerivedStateFromError() {return { hasError: true };}\n  render() {\n    if (this.state.hasError) {\n      return ___EmotionJSX(RightMenu, _extends({ setQuery: this.noop }, this.props));\n    }\n    return this.props.children;\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}const RightMenuWrapper = (props) => ___EmotionJSX(RightMenuErrorWrapper, props,\n___EmotionJSX(RightMenuWithQueryWrapper, props));const _default =\n\nRightMenuWrapper;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extensionsRegistry, \"extensionsRegistry\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(versionInfoStyles, \"versionInfoStyles\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledI, \"StyledI\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(styledDisabled, \"styledDisabled\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledDiv, \"StyledDiv\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledMenuItemWithIcon, \"StyledMenuItemWithIcon\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(StyledAnchor, \"StyledAnchor\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(tagStyles, \"tagStyles\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(styledChildMenu, \"styledChildMenu\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(SubMenu, \"SubMenu\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenu, \"RightMenu\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenuWithQueryWrapper, \"RightMenuWithQueryWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenuErrorWrapper, \"RightMenuErrorWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(RightMenuWrapper, \"RightMenuWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["React","Fragment","useState","useEffect","rison","useSelector","Link","useQueryParams","BooleanParam","t","styled","css","SupersetClient","getExtensionsRegistry","useTheme","MainNav","Menu","Tooltip","Icons","Label","findPermission","isUserAdmin","DatabaseModal","uploadUserPerms","LanguagePicker","GlobalMenuDataOptions","extensionsRegistry","versionInfoStyles","theme","gridUnit","colors","grayscale","base","typography","sizes","xs","StyledI","div","primary","dark1","styledDisabled","light1","StyledDiv","align","StyledMenuItemWithIcon","StyledAnchor","a","tagStyles","light5","styledChildMenu","SubMenu","RightMenu","settings","navbarRight","isFrontendRoute","environmentTag","setQuery","user","state","dashboardId","dashboardInfo","id","userValues","roles","CSV_EXTENSIONS","COLUMNAR_EXTENSIONS","EXCEL_EXTENSIONS","ALLOWED_EXTENSIONS","HAS_GSHEETS_INSTALLED","common","conf","showDatabaseModal","setShowDatabaseModal","engine","setEngine","canSql","canDashboard","canChart","canDatabase","canDataset","canUploadData","canUploadCSV","canUploadColumnar","canUploadExcel","showActionDropdown","allowUploads","setAllowUploads","nonExamplesDBConnected","setNonExamplesDBConnected","isAdmin","showUploads","dropdownItems","label","icon","childs","name","DB_CONNECTION","perm","DATASET_CREATION","url","GOOGLE_SHEETS","disable","view","Number","isInteger","checkAllowUploads","payload","filters","col","opr","value","get","endpoint","encode","then","json","allowedDatabasesWithFileUpload","result","filter","database","engine_information","supports_file_upload","length","existsNonExamplesDatabases","count","menuIconAndLabel","menu","handleMenuSelection","itemChose","key","handleOnHideModal","tooltipText","buildMenuItem","item","onMenuOpen","openKeys","RightMenuExtension","RightMenuItemIconExtension","handleDatabaseAdd","databaseAdded","text","borderRadius","test","color","split","reduce","o","i","user_is_anonymous","map","canShowChild","some","idx","section","index","child","menuItemDisplay","user_profile_url","user_info_url","user_logout_url","version_string","version_sha","show_watermark","build_number","show_language_picker","locale","languages","documentation_url","documentation_text","documentation_icon","bug_report_url","bug_report_text","bug_report_icon","user_login_url","RightMenuWithQueryWrapper","datasetAdded","props","RightMenuErrorWrapper","PureComponent","hasError","noop","getDerivedStateFromError","render","children","RightMenuWrapper"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/RightMenu.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Fragment, useState, useEffect } from 'react';\nimport rison from 'rison';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useQueryParams, BooleanParam } from 'use-query-params';\nimport { isEmpty } from 'lodash';\n\nimport {\n  t,\n  styled,\n  css,\n  SupersetTheme,\n  SupersetClient,\n  getExtensionsRegistry,\n  useTheme,\n} from '@superset-ui/core';\nimport { MainNav as Menu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport { findPermission } from 'src/utils/findPermission';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport {\n  MenuObjectProps,\n  UserWithPermissionsAndRoles,\n  MenuObjectChildProps,\n} from 'src/types/bootstrapTypes';\nimport { RootState } from 'src/dashboard/types';\nimport DatabaseModal from 'src/features/databases/DatabaseModal';\nimport { uploadUserPerms } from 'src/views/CRUD/utils';\nimport LanguagePicker from './LanguagePicker';\nimport {\n  ExtensionConfigs,\n  GlobalMenuDataOptions,\n  RightMenuProps,\n} from './types';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst versionInfoStyles = (theme: SupersetTheme) => css`\n  padding: ${theme.gridUnit * 1.5}px ${theme.gridUnit * 4}px\n    ${theme.gridUnit * 4}px ${theme.gridUnit * 7}px;\n  color: ${theme.colors.grayscale.base};\n  font-size: ${theme.typography.sizes.xs}px;\n  white-space: nowrap;\n`;\nconst StyledI = styled.div`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n`;\n\nconst styledDisabled = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light1};\n  .ant-menu-item-active {\n    color: ${theme.colors.grayscale.light1};\n    cursor: default;\n  }\n`;\n\nconst StyledDiv = styled.div<{ align: string }>`\n  display: flex;\n  flex-direction: row;\n  justify-content: ${({ align }) => align};\n  align-items: center;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n  .ant-menu-submenu-title > svg {\n    top: ${({ theme }) => theme.gridUnit * 5.25}px;\n  }\n`;\n\nconst StyledMenuItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst StyledAnchor = styled.a`\n  padding-right: ${({ theme }) => theme.gridUnit}px;\n  padding-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst tagStyles = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light5};\n`;\n\nconst styledChildMenu = (theme: SupersetTheme) => css`\n  &:hover {\n    color: ${theme.colors.primary.base} !important;\n    cursor: pointer !important;\n  }\n`;\n\nconst { SubMenu } = Menu;\n\nconst RightMenu = ({\n  align,\n  settings,\n  navbarRight,\n  isFrontendRoute,\n  environmentTag,\n  setQuery,\n}: RightMenuProps & {\n  setQuery: ({\n    databaseAdded,\n    datasetAdded,\n  }: {\n    databaseAdded?: boolean;\n    datasetAdded?: boolean;\n  }) => void;\n}) => {\n  const user = useSelector<any, UserWithPermissionsAndRoles>(\n    state => state.user,\n  );\n  const dashboardId = useSelector<RootState, number | undefined>(\n    state => state.dashboardInfo?.id,\n  );\n  const userValues = user || {};\n  const { roles } = userValues;\n  const {\n    CSV_EXTENSIONS,\n    COLUMNAR_EXTENSIONS,\n    EXCEL_EXTENSIONS,\n    ALLOWED_EXTENSIONS,\n    HAS_GSHEETS_INSTALLED,\n  } = useSelector<any, ExtensionConfigs>(state => state.common.conf);\n  const [showDatabaseModal, setShowDatabaseModal] = useState<boolean>(false);\n  const [engine, setEngine] = useState<string>('');\n  const canSql = findPermission('can_sqllab', 'Superset', roles);\n  const canDashboard = findPermission('can_write', 'Dashboard', roles);\n  const canChart = findPermission('can_write', 'Chart', roles);\n  const canDatabase = findPermission('can_write', 'Database', roles);\n  const canDataset = findPermission('can_write', 'Dataset', roles);\n\n  const { canUploadData, canUploadCSV, canUploadColumnar, canUploadExcel } =\n    uploadUserPerms(\n      roles,\n      CSV_EXTENSIONS,\n      COLUMNAR_EXTENSIONS,\n      EXCEL_EXTENSIONS,\n      ALLOWED_EXTENSIONS,\n    );\n\n  const showActionDropdown = canSql || canChart || canDashboard;\n  const [allowUploads, setAllowUploads] = useState<boolean>(false);\n  const [nonExamplesDBConnected, setNonExamplesDBConnected] =\n    useState<boolean>(false);\n  const isAdmin = isUserAdmin(user);\n  const showUploads = allowUploads || isAdmin;\n  const dropdownItems: MenuObjectProps[] = [\n    {\n      label: t('Data'),\n      icon: 'fa-database',\n      childs: [\n        {\n          label: t('Connect database'),\n          name: GlobalMenuDataOptions.DB_CONNECTION,\n          perm: canDatabase && !nonExamplesDBConnected,\n        },\n        {\n          label: t('Create dataset'),\n          name: GlobalMenuDataOptions.DATASET_CREATION,\n          url: '/dataset/add/',\n          perm: canDataset && nonExamplesDBConnected,\n        },\n        {\n          label: t('Connect Google Sheet'),\n          name: GlobalMenuDataOptions.GOOGLE_SHEETS,\n          perm: canDatabase && HAS_GSHEETS_INSTALLED,\n        },\n        {\n          label: t('Upload CSV to database'),\n          name: 'Upload a CSV',\n          url: '/csvtodatabaseview/form',\n          perm: canUploadCSV && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n        {\n          label: t('Upload columnar file to database'),\n          name: 'Upload a Columnar file',\n          url: '/columnartodatabaseview/form',\n          perm: canUploadColumnar && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n        {\n          label: t('Upload Excel file to database'),\n          name: 'Upload Excel',\n          url: '/exceltodatabaseview/form',\n          perm: canUploadExcel && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n      ],\n    },\n    {\n      label: t('SQL query'),\n      url: '/superset/sqllab?new=true',\n      icon: 'fa-fw fa-search',\n      perm: 'can_sqllab',\n      view: 'Superset',\n    },\n    {\n      label: t('Chart'),\n      url: Number.isInteger(dashboardId)\n        ? `/chart/add?dashboard_id=${dashboardId}`\n        : '/chart/add',\n      icon: 'fa-fw fa-bar-chart',\n      perm: 'can_write',\n      view: 'Chart',\n    },\n    {\n      label: t('Dashboard'),\n      url: '/dashboard/new',\n      icon: 'fa-fw fa-dashboard',\n      perm: 'can_write',\n      view: 'Dashboard',\n    },\n  ];\n\n  const checkAllowUploads = () => {\n    const payload = {\n      filters: [\n        { col: 'allow_file_upload', opr: 'upload_is_enabled', value: true },\n      ],\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`,\n    }).then(({ json }: Record<string, any>) => {\n      // There might be some existings Gsheets and Clickhouse DBs\n      // with allow_file_upload set as True which is not possible from now on\n      const allowedDatabasesWithFileUpload =\n        json?.result?.filter(\n          (database: any) => database?.engine_information?.supports_file_upload,\n        ) || [];\n      setAllowUploads(allowedDatabasesWithFileUpload?.length >= 1);\n    });\n  };\n\n  const existsNonExamplesDatabases = () => {\n    const payload = {\n      filters: [{ col: 'database_name', opr: 'neq', value: 'examples' }],\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`,\n    }).then(({ json }: Record<string, any>) => {\n      setNonExamplesDBConnected(json.count >= 1);\n    });\n  };\n\n  useEffect(() => {\n    if (canUploadData) {\n      checkAllowUploads();\n    }\n  }, [canUploadData]);\n\n  useEffect(() => {\n    if (canDatabase || canDataset) {\n      existsNonExamplesDatabases();\n    }\n  }, [canDatabase, canDataset]);\n\n  const menuIconAndLabel = (menu: MenuObjectProps) => (\n    <>\n      <i data-test={`menu-item-${menu.label}`} className={`fa ${menu.icon}`} />\n      {menu.label}\n    </>\n  );\n\n  const handleMenuSelection = (itemChose: any) => {\n    if (itemChose.key === GlobalMenuDataOptions.DB_CONNECTION) {\n      setShowDatabaseModal(true);\n    } else if (itemChose.key === GlobalMenuDataOptions.GOOGLE_SHEETS) {\n      setShowDatabaseModal(true);\n      setEngine('Google Sheets');\n    }\n  };\n\n  const handleOnHideModal = () => {\n    setEngine('');\n    setShowDatabaseModal(false);\n  };\n\n  const tooltipText = t(\n    \"Enable 'Allow file uploads to database' in any database's settings\",\n  );\n\n  const buildMenuItem = (item: MenuObjectChildProps) =>\n    item.disable ? (\n      <Menu.Item key={item.name} css={styledDisabled}>\n        <Tooltip placement=\"top\" title={tooltipText}>\n          {item.label}\n        </Tooltip>\n      </Menu.Item>\n    ) : (\n      <Menu.Item key={item.name} css={styledChildMenu}>\n        {item.url ? <a href={item.url}> {item.label} </a> : item.label}\n      </Menu.Item>\n    );\n\n  const onMenuOpen = (openKeys: string[]) => {\n    // We should query the API only if opening Data submenus\n    // because the rest don't need this information. Not using\n    // \"Data\" directly since we might change the label later on?\n    if (\n      openKeys.length > 1 &&\n      !isEmpty(\n        openKeys?.filter((key: string) =>\n          key.includes(`sub2_${dropdownItems?.[0]?.label}`),\n        ),\n      )\n    ) {\n      if (canUploadData) checkAllowUploads();\n      if (canDatabase || canDataset) existsNonExamplesDatabases();\n    }\n    return null;\n  };\n  const RightMenuExtension = extensionsRegistry.get('navbar.right');\n  const RightMenuItemIconExtension = extensionsRegistry.get(\n    'navbar.right-menu.item.icon',\n  );\n\n  const handleDatabaseAdd = () => setQuery({ databaseAdded: true });\n\n  const theme = useTheme();\n\n  return (\n    <StyledDiv align={align}>\n      {canDatabase && (\n        <DatabaseModal\n          onHide={handleOnHideModal}\n          show={showDatabaseModal}\n          dbEngine={engine}\n          onDatabaseAdd={handleDatabaseAdd}\n        />\n      )}\n      {environmentTag?.text && (\n        <Label\n          css={{ borderRadius: `${theme.gridUnit * 125}px` }}\n          color={\n            /^#(?:[0-9a-f]{3}){1,2}$/i.test(environmentTag.color)\n              ? environmentTag.color\n              : environmentTag.color\n                  .split('.')\n                  .reduce((o, i) => o[i], theme.colors)\n          }\n        >\n          <span css={tagStyles}>{environmentTag.text}</span>\n        </Label>\n      )}\n      <Menu\n        selectable={false}\n        mode=\"horizontal\"\n        onClick={handleMenuSelection}\n        onOpenChange={onMenuOpen}\n      >\n        {RightMenuExtension && <RightMenuExtension />}\n        {!navbarRight.user_is_anonymous && showActionDropdown && (\n          <SubMenu\n            data-test=\"new-dropdown\"\n            title={\n              <StyledI data-test=\"new-dropdown-icon\" className=\"fa fa-plus\" />\n            }\n            icon={<Icons.TriangleDown />}\n          >\n            {dropdownItems?.map?.(menu => {\n              const canShowChild = menu.childs?.some(\n                item => typeof item === 'object' && !!item.perm,\n              );\n              if (menu.childs) {\n                if (canShowChild) {\n                  return (\n                    <SubMenu\n                      key={`sub2_${menu.label}`}\n                      className=\"data-menu\"\n                      title={menuIconAndLabel(menu)}\n                    >\n                      {menu?.childs?.map?.((item, idx) =>\n                        typeof item !== 'string' && item.name && item.perm ? (\n                          <Fragment key={item.name}>\n                            {idx === 3 && <Menu.Divider />}\n                            {buildMenuItem(item)}\n                          </Fragment>\n                        ) : null,\n                      )}\n                    </SubMenu>\n                  );\n                }\n                if (!menu.url) {\n                  return null;\n                }\n              }\n              return (\n                findPermission(\n                  menu.perm as string,\n                  menu.view as string,\n                  roles,\n                ) && (\n                  <Menu.Item key={menu.label}>\n                    {isFrontendRoute(menu.url) ? (\n                      <Link to={menu.url || ''}>\n                        <i\n                          data-test={`menu-item-${menu.label}`}\n                          className={`fa ${menu.icon}`}\n                        />{' '}\n                        {menu.label}\n                      </Link>\n                    ) : (\n                      <a href={menu.url}>\n                        <i\n                          data-test={`menu-item-${menu.label}`}\n                          className={`fa ${menu.icon}`}\n                        />{' '}\n                        {menu.label}\n                      </a>\n                    )}\n                  </Menu.Item>\n                )\n              );\n            })}\n          </SubMenu>\n        )}\n        <SubMenu\n          title={t('Settings')}\n          icon={<Icons.TriangleDown iconSize=\"xl\" />}\n        >\n          {settings?.map?.((section, index) => [\n            <Menu.ItemGroup key={`${section.label}`} title={section.label}>\n              {section?.childs?.map?.(child => {\n                if (typeof child !== 'string') {\n                  const menuItemDisplay = RightMenuItemIconExtension ? (\n                    <StyledMenuItemWithIcon>\n                      {child.label}\n                      <RightMenuItemIconExtension menuChild={child} />\n                    </StyledMenuItemWithIcon>\n                  ) : (\n                    child.label\n                  );\n                  return (\n                    <Menu.Item key={`${child.label}`}>\n                      {isFrontendRoute(child.url) ? (\n                        <Link to={child.url || ''}>{menuItemDisplay}</Link>\n                      ) : (\n                        <a href={child.url}>{menuItemDisplay}</a>\n                      )}\n                    </Menu.Item>\n                  );\n                }\n                return null;\n              })}\n            </Menu.ItemGroup>,\n            index < settings.length - 1 && (\n              <Menu.Divider key={`divider_${index}`} />\n            ),\n          ])}\n\n          {!navbarRight.user_is_anonymous && [\n            <Menu.Divider key=\"user-divider\" />,\n            <Menu.ItemGroup key=\"user-section\" title={t('User')}>\n              {navbarRight.user_profile_url && (\n                <Menu.Item key=\"profile\">\n                  <a href={navbarRight.user_profile_url}>{t('Profile')}</a>\n                </Menu.Item>\n              )}\n              {navbarRight.user_info_url && (\n                <Menu.Item key=\"info\">\n                  <a href={navbarRight.user_info_url}>{t('Info')}</a>\n                </Menu.Item>\n              )}\n              <Menu.Item key=\"logout\">\n                <a href={navbarRight.user_logout_url}>{t('Logout')}</a>\n              </Menu.Item>\n            </Menu.ItemGroup>,\n          ]}\n          {(navbarRight.version_string || navbarRight.version_sha) && [\n            <Menu.Divider key=\"version-info-divider\" />,\n            <Menu.ItemGroup key=\"about-section\" title={t('About')}>\n              <div className=\"about-section\">\n                {navbarRight.show_watermark && (\n                  <div css={versionInfoStyles}>\n                    {t('Powered by Apache Superset')}\n                  </div>\n                )}\n                {navbarRight.version_string && (\n                  <div css={versionInfoStyles}>\n                    {t('Version')}: {navbarRight.version_string}\n                  </div>\n                )}\n                {navbarRight.version_sha && (\n                  <div css={versionInfoStyles}>\n                    {t('SHA')}: {navbarRight.version_sha}\n                  </div>\n                )}\n                {navbarRight.build_number && (\n                  <div css={versionInfoStyles}>\n                    {t('Build')}: {navbarRight.build_number}\n                  </div>\n                )}\n              </div>\n            </Menu.ItemGroup>,\n          ]}\n        </SubMenu>\n        {navbarRight.show_language_picker && (\n          <LanguagePicker\n            locale={navbarRight.locale}\n            languages={navbarRight.languages}\n          />\n        )}\n      </Menu>\n      {navbarRight.documentation_url && (\n        <>\n          <StyledAnchor\n            href={navbarRight.documentation_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            title={navbarRight.documentation_text || t('Documentation')}\n          >\n            {navbarRight.documentation_icon ? (\n              <i className={navbarRight.documentation_icon} />\n            ) : (\n              <i className=\"fa fa-question\" />\n            )}\n          </StyledAnchor>\n          <span>&nbsp;</span>\n        </>\n      )}\n      {navbarRight.bug_report_url && (\n        <>\n          <StyledAnchor\n            href={navbarRight.bug_report_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            title={navbarRight.bug_report_text || t('Report a bug')}\n          >\n            {navbarRight.bug_report_icon ? (\n              <i className={navbarRight.bug_report_icon} />\n            ) : (\n              <i className=\"fa fa-bug\" />\n            )}\n          </StyledAnchor>\n          <span>&nbsp;</span>\n        </>\n      )}\n      {navbarRight.user_is_anonymous && (\n        <StyledAnchor href={navbarRight.user_login_url}>\n          <i className=\"fa fa-fw fa-sign-in\" />\n          {t('Login')}\n        </StyledAnchor>\n      )}\n    </StyledDiv>\n  );\n};\n\nconst RightMenuWithQueryWrapper: React.FC<RightMenuProps> = props => {\n  const [, setQuery] = useQueryParams({\n    databaseAdded: BooleanParam,\n    datasetAdded: BooleanParam,\n  });\n\n  return <RightMenu setQuery={setQuery} {...props} />;\n};\n\n// Query param manipulation requires that, during the setup, the\n// QueryParamProvider is present and configured.\n// Superset still has multiple entry points, and not all of them have\n// the same setup, and critically, not all of them have the QueryParamProvider.\n// This wrapper ensures the RightMenu renders regardless of the provider being present.\nclass RightMenuErrorWrapper extends React.PureComponent<RightMenuProps> {\n  state = {\n    hasError: false,\n  };\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  noop = () => {};\n\n  render() {\n    if (this.state.hasError) {\n      return <RightMenu setQuery={this.noop} {...this.props} />;\n    }\n\n    return this.props.children;\n  }\n}\n\nconst RightMenuWrapper: React.FC<RightMenuProps> = props => (\n  <RightMenuErrorWrapper {...props}>\n    <RightMenuWithQueryWrapper {...props} />\n  </RightMenuErrorWrapper>\n);\n\nexport default RightMenuWrapper;\n"]},"metadata":{},"sourceType":"module"}