{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric' };\n\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]) }) };\n\n\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 } };\n\n\nexport default class FixedOrMetricControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n    (props.value ? props.value.type : props.default.type) ||\n    controlTypes.fixed;\n    const value =\n    (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null };\n\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n      this.state.type === controlTypes.fixed ?\n      this.state.fixedValue :\n      this.state.metricValue });\n\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource ?\n    this.props.datasource.columns :\n    null;\n    const metrics = this.props.datasource ?\n    this.props.datasource.metrics :\n    null;\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(ControlHeader, this.props),\n      ___EmotionJSX(Collapse, {\n        ghost: true,\n        css: (theme) => /*#__PURE__*/css(\"&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px \",\n\n\n\n\n        theme.gridUnit * 2, \"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:\",\n\n\n\n\n\n\n\n\n\n\n        theme.gridUnit * 2, \"px;}}\" + (process.env.NODE_ENV === \"production\" ? \"\" : \";label:FixedOrMetricControl;\"), process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9GaXhlZE9yTWV0cmljQ29udHJvbC9pbmRleC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUcyQiIsImZpbGUiOiIvVXNlcnMvYm9nZGFua3lyeWxpdWsvY29kZS9vcGVuc291cmNlL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvRml4ZWRPck1ldHJpY0NvbnRyb2wvaW5kZXguanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IExhYmVsIGZyb20gJ3NyYy9jb21wb25lbnRzL0xhYmVsJztcbmltcG9ydCBDb2xsYXBzZSBmcm9tICdzcmMvY29tcG9uZW50cy9Db2xsYXBzZSc7XG5pbXBvcnQgVGV4dENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0Q29udHJvbCc7XG5pbXBvcnQgTWV0cmljc0NvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9NZXRyaWNDb250cm9sL01ldHJpY3NDb250cm9sJztcbmltcG9ydCBDb250cm9sSGVhZGVyIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvQ29udHJvbEhlYWRlcic7XG5pbXBvcnQgUG9wb3ZlclNlY3Rpb24gZnJvbSAnc3JjL2NvbXBvbmVudHMvUG9wb3ZlclNlY3Rpb24nO1xuXG5jb25zdCBjb250cm9sVHlwZXMgPSB7XG4gIGZpeGVkOiAnZml4JyxcbiAgbWV0cmljOiAnbWV0cmljJyxcbn07XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICB2YWx1ZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgaXNGbG9hdDogUHJvcFR5cGVzLmJvb2wsXG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgZGVmYXVsdDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICB0eXBlOiBQcm9wVHlwZXMub25lT2YoWydmaXgnLCAnbWV0cmljJ10pLFxuICAgIHZhbHVlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG4gIH0pLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBvbkNoYW5nZTogKCkgPT4ge30sXG4gIGRlZmF1bHQ6IHsgdHlwZTogY29udHJvbFR5cGVzLmZpeGVkLCB2YWx1ZTogNSB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml4ZWRPck1ldHJpY0NvbnRyb2wgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0VHlwZSA9IHRoaXMuc2V0VHlwZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0Rml4ZWRWYWx1ZSA9IHRoaXMuc2V0Rml4ZWRWYWx1ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0TWV0cmljID0gdGhpcy5zZXRNZXRyaWMuYmluZCh0aGlzKTtcbiAgICBjb25zdCB0eXBlID1cbiAgICAgIChwcm9wcy52YWx1ZSA/IHByb3BzLnZhbHVlLnR5cGUgOiBwcm9wcy5kZWZhdWx0LnR5cGUpIHx8XG4gICAgICBjb250cm9sVHlwZXMuZml4ZWQ7XG4gICAgY29uc3QgdmFsdWUgPVxuICAgICAgKHByb3BzLnZhbHVlID8gcHJvcHMudmFsdWUudmFsdWUgOiBwcm9wcy5kZWZhdWx0LnZhbHVlKSB8fCAnMTAwJztcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdHlwZSxcbiAgICAgIGZpeGVkVmFsdWU6IHR5cGUgPT09IGNvbnRyb2xUeXBlcy5maXhlZCA/IHZhbHVlIDogJycsXG4gICAgICBtZXRyaWNWYWx1ZTogdHlwZSA9PT0gY29udHJvbFR5cGVzLm1ldHJpYyA/IHZhbHVlIDogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgb25DaGFuZ2UoKSB7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh7XG4gICAgICB0eXBlOiB0aGlzLnN0YXRlLnR5cGUsXG4gICAgICB2YWx1ZTpcbiAgICAgICAgdGhpcy5zdGF0ZS50eXBlID09PSBjb250cm9sVHlwZXMuZml4ZWRcbiAgICAgICAgICA/IHRoaXMuc3RhdGUuZml4ZWRWYWx1ZVxuICAgICAgICAgIDogdGhpcy5zdGF0ZS5tZXRyaWNWYWx1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHNldFR5cGUodHlwZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyB0eXBlIH0sIHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgc2V0Rml4ZWRWYWx1ZShmaXhlZFZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGZpeGVkVmFsdWUgfSwgdGhpcy5vbkNoYW5nZSk7XG4gIH1cblxuICBzZXRNZXRyaWMobWV0cmljVmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgbWV0cmljVmFsdWUgfSwgdGhpcy5vbkNoYW5nZSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnByb3BzLnZhbHVlIHx8IHRoaXMucHJvcHMuZGVmYXVsdDtcbiAgICBjb25zdCB0eXBlID0gdmFsdWUudHlwZSB8fCBjb250cm9sVHlwZXMuZml4ZWQ7XG4gICAgY29uc3QgY29sdW1ucyA9IHRoaXMucHJvcHMuZGF0YXNvdXJjZVxuICAgICAgPyB0aGlzLnByb3BzLmRhdGFzb3VyY2UuY29sdW1uc1xuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IG1ldHJpY3MgPSB0aGlzLnByb3BzLmRhdGFzb3VyY2VcbiAgICAgID8gdGhpcy5wcm9wcy5kYXRhc291cmNlLm1ldHJpY3NcbiAgICAgIDogbnVsbDtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPENvbnRyb2xIZWFkZXIgey4uLnRoaXMucHJvcHN9IC8+XG4gICAgICAgIDxDb2xsYXBzZVxuICAgICAgICAgIGdob3N0XG4gICAgICAgICAgY3NzPXt0aGVtZSA9PiBjc3NgXG4gICAgICAgICAgICAmLmFudC1jb2xsYXBzZVxuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtaXRlbS5hbnQtY29sbGFwc2Utbm8tYXJyb3dcbiAgICAgICAgICAgICAgPiAuYW50LWNvbGxhcHNlLWhlYWRlciB7XG4gICAgICAgICAgICAgIGJvcmRlcjogMHB4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwcHggMHB4ICR7dGhlbWUuZ3JpZFVuaXQgKiAyfXB4IDBweDtcbiAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJi5hbnQtY29sbGFwc2UtZ2hvc3RcbiAgICAgICAgICAgICAgPiAuYW50LWNvbGxhcHNlLWl0ZW1cbiAgICAgICAgICAgICAgPiAuYW50LWNvbGxhcHNlLWNvbnRlbnRcbiAgICAgICAgICAgICAgPiAuYW50LWNvbGxhcHNlLWNvbnRlbnQtYm94IHtcbiAgICAgICAgICAgICAgcGFkZGluZzogMHB4O1xuXG4gICAgICAgICAgICAgICYgLndlbGwge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDBweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAke3RoZW1lLmdyaWRVbml0ICogMn1weDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9XG4gICAgICAgID5cbiAgICAgICAgICA8Q29sbGFwc2UuUGFuZWxcbiAgICAgICAgICAgIHNob3dBcnJvdz17ZmFsc2V9XG4gICAgICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgICAgICA8TGFiZWwgb25DbGljaz17KCkgPT4gdW5kZWZpbmVkfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50eXBlID09PSBjb250cm9sVHlwZXMuZml4ZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4+e3RoaXMuc3RhdGUuZml4ZWRWYWx1ZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50eXBlID09PSBjb250cm9sVHlwZXMubWV0cmljICYmIChcbiAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57dCgnbWV0cmljJyl9OiA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0cmljVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5tZXRyaWNWYWx1ZS5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2VsbFwiPlxuICAgICAgICAgICAgICA8UG9wb3ZlclNlY3Rpb25cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnRml4ZWQnKX1cbiAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXt0eXBlID09PSBjb250cm9sVHlwZXMuZml4ZWR9XG4gICAgICAgICAgICAgICAgb25TZWxlY3Q9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZShjb250cm9sVHlwZXMuZml4ZWQpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGlzRmxvYXRcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldEZpeGVkVmFsdWV9XG4gICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZShjb250cm9sVHlwZXMuZml4ZWQpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmZpeGVkVmFsdWV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cbiAgICAgICAgICAgICAgPFBvcG92ZXJTZWN0aW9uXG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0Jhc2VkIG9uIGEgbWV0cmljJyl9XG4gICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17dHlwZSA9PT0gY29udHJvbFR5cGVzLm1ldHJpY31cbiAgICAgICAgICAgICAgICBvblNlbGVjdD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKGNvbnRyb2xUeXBlcy5tZXRyaWMpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TWV0cmljc0NvbnRyb2xcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJtZXRyaWNcIlxuICAgICAgICAgICAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgICAgICAgICAgIHNhdmVkTWV0cmljcz17bWV0cmljc31cbiAgICAgICAgICAgICAgICAgIG11bHRpPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgIG9uRm9jdXM9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKGNvbnRyb2xUeXBlcy5tZXRyaWMpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldE1ldHJpY31cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm1ldHJpY1ZhbHVlfVxuICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZT17dGhpcy5wcm9wcy5kYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvUG9wb3ZlclNlY3Rpb24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0NvbGxhcHNlLlBhbmVsPlxuICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5GaXhlZE9yTWV0cmljQ29udHJvbC5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5GaXhlZE9yTWV0cmljQ29udHJvbC5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG4iXX0= */\") },\n\n\n\n\n      ___EmotionJSX(Collapse.Panel, {\n        showArrow: false,\n        header:\n        ___EmotionJSX(Label, { onClick: () => undefined },\n        this.state.type === controlTypes.fixed &&\n        ___EmotionJSX(\"span\", null, this.state.fixedValue),\n\n        this.state.type === controlTypes.metric &&\n        ___EmotionJSX(\"span\", null,\n        ___EmotionJSX(\"span\", null, t('metric'), \": \"),\n        ___EmotionJSX(\"strong\", null,\n        this.state.metricValue ?\n        this.state.metricValue.label :\n        null))) },\n\n\n\n\n\n\n      ___EmotionJSX(\"div\", { className: \"well\" },\n      ___EmotionJSX(PopoverSection, {\n        title: t('Fixed'),\n        isSelected: type === controlTypes.fixed,\n        onSelect: () => {\n          this.setType(controlTypes.fixed);\n        } },\n\n      ___EmotionJSX(TextControl, {\n        isFloat: true,\n        onChange: this.setFixedValue,\n        onFocus: () => {\n          this.setType(controlTypes.fixed);\n        },\n        value: this.state.fixedValue })),\n\n\n      ___EmotionJSX(PopoverSection, {\n        title: t('Based on a metric'),\n        isSelected: type === controlTypes.metric,\n        onSelect: () => {\n          this.setType(controlTypes.metric);\n        } },\n\n      ___EmotionJSX(MetricsControl, {\n        name: \"metric\",\n        columns: columns,\n        savedMetrics: metrics,\n        multi: false,\n        onFocus: () => {\n          this.setType(controlTypes.metric);\n        },\n        onChange: this.setMetric,\n        value: this.state.metricValue,\n        datasource: this.props.datasource })))))));\n\n\n\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(controlTypes, \"controlTypes\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(FixedOrMetricControl, \"FixedOrMetricControl\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","PropTypes","css","t","Label","Collapse","TextControl","MetricsControl","ControlHeader","PopoverSection","controlTypes","fixed","metric","propTypes","onChange","func","value","object","isFloat","bool","datasource","isRequired","default","shape","type","oneOf","oneOfType","string","number","defaultProps","FixedOrMetricControl","Component","constructor","props","bind","setType","setFixedValue","setMetric","state","fixedValue","metricValue","setState","render","columns","metrics","theme","gridUnit","undefined","label"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric',\n};\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }),\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 },\n};\n\nexport default class FixedOrMetricControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n      (props.value ? props.value.type : props.default.type) ||\n      controlTypes.fixed;\n    const value =\n      (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null,\n    };\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n        this.state.type === controlTypes.fixed\n          ? this.state.fixedValue\n          : this.state.metricValue,\n    });\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource\n      ? this.props.datasource.columns\n      : null;\n    const metrics = this.props.datasource\n      ? this.props.datasource.metrics\n      : null;\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <Collapse\n          ghost\n          css={theme => css`\n            &.ant-collapse\n              > .ant-collapse-item.ant-collapse-no-arrow\n              > .ant-collapse-header {\n              border: 0px;\n              padding: 0px 0px ${theme.gridUnit * 2}px 0px;\n              display: inline-block;\n            }\n            &.ant-collapse-ghost\n              > .ant-collapse-item\n              > .ant-collapse-content\n              > .ant-collapse-content-box {\n              padding: 0px;\n\n              & .well {\n                margin-bottom: 0px;\n                padding: ${theme.gridUnit * 2}px;\n              }\n            }\n          `}\n        >\n          <Collapse.Panel\n            showArrow={false}\n            header={\n              <Label onClick={() => undefined}>\n                {this.state.type === controlTypes.fixed && (\n                  <span>{this.state.fixedValue}</span>\n                )}\n                {this.state.type === controlTypes.metric && (\n                  <span>\n                    <span>{t('metric')}: </span>\n                    <strong>\n                      {this.state.metricValue\n                        ? this.state.metricValue.label\n                        : null}\n                    </strong>\n                  </span>\n                )}\n              </Label>\n            }\n          >\n            <div className=\"well\">\n              <PopoverSection\n                title={t('Fixed')}\n                isSelected={type === controlTypes.fixed}\n                onSelect={() => {\n                  this.setType(controlTypes.fixed);\n                }}\n              >\n                <TextControl\n                  isFloat\n                  onChange={this.setFixedValue}\n                  onFocus={() => {\n                    this.setType(controlTypes.fixed);\n                  }}\n                  value={this.state.fixedValue}\n                />\n              </PopoverSection>\n              <PopoverSection\n                title={t('Based on a metric')}\n                isSelected={type === controlTypes.metric}\n                onSelect={() => {\n                  this.setType(controlTypes.metric);\n                }}\n              >\n                <MetricsControl\n                  name=\"metric\"\n                  columns={columns}\n                  savedMetrics={metrics}\n                  multi={false}\n                  onFocus={() => {\n                    this.setType(controlTypes.metric);\n                  }}\n                  onChange={this.setMetric}\n                  value={this.state.metricValue}\n                  datasource={this.props.datasource}\n                />\n              </PopoverSection>\n            </div>\n          </Collapse.Panel>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}