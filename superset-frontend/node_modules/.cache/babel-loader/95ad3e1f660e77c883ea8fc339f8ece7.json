{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useContext, useMemo, useState } from 'react';\nimport { createHtmlPortalNode, InPortal, OutPortal } from 'react-reverse-portal';\nimport { styled, truncationCSS } from '@superset-ui/core';\nimport { FormItem as StyledFormItem, Form } from 'src/components/Form';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { FilterBarOrientation } from 'src/dashboard/types';\nimport { checkIsMissingRequiredValue } from '../utils';\nimport FilterValue from './FilterValue';\nimport { FilterCard } from '../../FilterCard';\nimport { FilterBarScrollContext } from '../Vertical';\nimport { FilterCardPlacement } from '../../FilterCard/types';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledIcon = styled.div`\n  position: absolute;\n  right: 0;\n`;\nconst VerticalFilterControlTitle = styled.h4`\n  font-size: ${(_ref) => {let { theme } = _ref;return theme.typography.sizes.s;}}px;\n  color: ${(_ref2) => {let { theme } = _ref2;return theme.colors.grayscale.dark1;}};\n  margin: 0;\n  overflow-wrap: break-word;\n`;\nconst HorizontalFilterControlTitle = styled(VerticalFilterControlTitle)`\n  font-weight: ${(_ref3) => {let { theme } = _ref3;return theme.typography.weights.normal;}};\n  color: ${(_ref4) => {let { theme } = _ref4;return theme.colors.grayscale.base;}};\n  max-width: ${(_ref5) => {let { theme } = _ref5;return theme.gridUnit * 15;}}px;\n  ${truncationCSS};\n`;\nconst HorizontalOverflowFilterControlTitle = styled(HorizontalFilterControlTitle)`\n  max-width: none;\n`;\nconst VerticalFilterControlTitleBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: ${(_ref6) => {let { theme } = _ref6;return theme.gridUnit;}}px;\n`;\nconst HorizontalFilterControlTitleBox = styled(VerticalFilterControlTitleBox)`\n  margin-bottom: unset;\n`;\nconst HorizontalOverflowFilterControlTitleBox = styled(VerticalFilterControlTitleBox)`\n  width: 100%;\n`;\nconst VerticalFilterControlContainer = styled(Form)`\n  width: 100%;\n  && .ant-form-item-label > label {\n    text-transform: none;\n    width: 100%;\n    padding-right: ${(_ref7) => {let { theme } = _ref7;return theme.gridUnit * 11;}}px;\n  }\n  .ant-form-item-tooltip {\n    margin-bottom: ${(_ref8) => {let { theme } = _ref8;return theme.gridUnit;}}px;\n  }\n`;\nconst HorizontalFilterControlContainer = styled(Form)`\n  && .ant-form-item-label > label {\n    margin-bottom: 0;\n    text-transform: none;\n  }\n  .ant-form-item-tooltip {\n    margin-bottom: ${(_ref9) => {let { theme } = _ref9;return theme.gridUnit;}}px;\n  }\n`;\nconst HorizontalOverflowFilterControlContainer = styled(VerticalFilterControlContainer)`\n  && .ant-form-item-label {\n    line-height: 1;\n    & > label {\n      padding-right: unset;\n    }\n  }\n`;\nconst VerticalFormItem = styled(StyledFormItem)`\n  .ant-form-item-label {\n    label.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n      &::after {\n        display: none;\n      }\n    }\n  }\n`;\nconst HorizontalFormItem = styled(StyledFormItem)`\n  && {\n    margin-bottom: 0;\n    align-items: center;\n  }\n\n  .ant-form-item-label {\n    padding-bottom: 0;\n    margin-right: ${(_ref10) => {let { theme } = _ref10;return theme.gridUnit * 2;}}px;\n    label.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n      &::after {\n        display: none;\n      }\n    }\n\n    & > label::after {\n      display: none;\n    }\n  }\n\n  .ant-form-item-control {\n    width: ${(_ref11) => {let { theme } = _ref11;return theme.gridUnit * 41;}}px;\n  }\n`;\nconst HorizontalOverflowFormItem = VerticalFormItem;\nconst useFilterControlDisplay = (orientation, overflow) => useMemo(() => {\n  if (orientation === FilterBarOrientation.HORIZONTAL) {\n    if (overflow) {\n      return {\n        FilterControlContainer: HorizontalOverflowFilterControlContainer,\n        FormItem: HorizontalOverflowFormItem,\n        FilterControlTitleBox: HorizontalOverflowFilterControlTitleBox,\n        FilterControlTitle: HorizontalOverflowFilterControlTitle };\n\n    }\n    return {\n      FilterControlContainer: HorizontalFilterControlContainer,\n      FormItem: HorizontalFormItem,\n      FilterControlTitleBox: HorizontalFilterControlTitleBox,\n      FilterControlTitle: HorizontalFilterControlTitle };\n\n  }\n  return {\n    FilterControlContainer: VerticalFilterControlContainer,\n    FormItem: VerticalFormItem,\n    FilterControlTitleBox: VerticalFilterControlTitleBox,\n    FilterControlTitle: VerticalFilterControlTitle };\n\n}, [orientation, overflow]);__signature__(useFilterControlDisplay, \"useMemo{}\");\nconst ToolTipContainer = styled.div`\n  font-size: ${(_ref12) => {let { theme } = _ref12;return theme.typography.sizes.m;}}px;\n  display: flex;\n`;\nconst RequiredFieldIndicator = () => ___EmotionJSX(\"span\", { css: (theme) => ({\n    color: theme.colors.error.base,\n    fontSize: `${theme.typography.sizes.s}px`,\n    paddingLeft: '1px' }) }, \"*\");\n\n\n\nconst DescriptionToolTip = (_ref13) => {let { description } = _ref13;return ___EmotionJSX(ToolTipContainer, null,\n  ___EmotionJSX(Tooltip, { title: description, placement: \"right\", overlayInnerStyle: {\n      display: '-webkit-box',\n      overflow: 'hidden',\n      WebkitLineClamp: 20,\n      WebkitBoxOrient: 'vertical',\n      textOverflow: 'ellipsis' } },\n\n  ___EmotionJSX(\"i\", { className: \"fa fa-info-circle text-muted\", css: (theme) => ({\n      paddingLeft: `${theme.gridUnit}px`,\n      cursor: 'pointer' }) })));};\n\n\n\nconst FilterControl = (_ref14) => {var _filter$dataMask, _filter$controlValues, _filter$controlValues2;let { dataMaskSelected, filter, icon, onFilterSelectionChange, inView, showOverflow, parentRef, orientation = FilterBarOrientation.VERTICAL, overflow = false } = _ref14;\n  const portalNode = useMemo(() => createHtmlPortalNode(), []);\n  const [isFilterActive, setIsFilterActive] = useState(false);\n  const { name = '<undefined>' } = filter;\n  const isMissingRequiredValue = checkIsMissingRequiredValue(filter, (_filter$dataMask = filter.dataMask) == null ? void 0 : _filter$dataMask.filterState);\n  const isRequired = !!((_filter$controlValues = filter.controlValues) != null && _filter$controlValues.enableEmptyFilter);\n  const { FilterControlContainer, FormItem, FilterControlTitleBox, FilterControlTitle } = useFilterControlDisplay(orientation, overflow);\n  const label = useMemo(() => {var _filter$description;return ___EmotionJSX(FilterControlTitleBox, null,\n    ___EmotionJSX(FilterControlTitle, { \"data-test\": \"filter-control-name\" },\n    name),\n\n    isRequired && ___EmotionJSX(RequiredFieldIndicator, null),\n    ((_filter$description = filter.description) == null ? void 0 : _filter$description.trim()) && ___EmotionJSX(DescriptionToolTip, { description: filter.description }),\n    ___EmotionJSX(StyledIcon, { \"data-test\": \"filter-icon\" }, icon));},\n  [\n  FilterControlTitleBox,\n  FilterControlTitle,\n  name,\n  isRequired,\n  filter.description,\n  icon]);\n\n  const isScrolling = useContext(FilterBarScrollContext);\n  const filterCardPlacement = useMemo(() => {\n    if (orientation === FilterBarOrientation.HORIZONTAL) {\n      if (overflow) {\n        return FilterCardPlacement.Left;\n      }\n      return FilterCardPlacement.Bottom;\n    }\n    return FilterCardPlacement.Right;\n  }, [orientation, overflow]);\n  return ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(InPortal, { node: portalNode },\n  ___EmotionJSX(FilterValue, { dataMaskSelected: dataMaskSelected, filter: filter, showOverflow: showOverflow, onFilterSelectionChange: onFilterSelectionChange, inView: inView, parentRef: parentRef, setFilterActive: setIsFilterActive, orientation: orientation, overflow: overflow })),\n\n  ___EmotionJSX(FilterControlContainer, { layout: orientation === FilterBarOrientation.HORIZONTAL && !overflow ?\n    'horizontal' :\n    'vertical' },\n  ___EmotionJSX(FilterCard, { filter: filter, isVisible: !isFilterActive && !isScrolling, placement: filterCardPlacement },\n  ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(FormItem, { label: label, required: filter == null ? void 0 : (_filter$controlValues2 = filter.controlValues) == null ? void 0 : _filter$controlValues2.enableEmptyFilter, validateStatus: isMissingRequiredValue ? 'error' : undefined },\n  ___EmotionJSX(OutPortal, { node: portalNode }))))));\n\n\n\n\n\n};__signature__(FilterControl, \"useMemo{portalNode}\\nuseState{[isFilterActive, setIsFilterActive](false)}\\nuseFilterControlDisplay{{ FilterControlContainer, FormItem, FilterControlTitleBox, FilterControlTitle, }}\\nuseMemo{label}\\nuseContext{isScrolling}\\nuseMemo{filterCardPlacement}\", () => [useFilterControlDisplay]);const _default = /*#__PURE__*/\nReact.memo(FilterControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledIcon, \"StyledIcon\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(VerticalFilterControlTitle, \"VerticalFilterControlTitle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalFilterControlTitle, \"HorizontalFilterControlTitle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalOverflowFilterControlTitle, \"HorizontalOverflowFilterControlTitle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(VerticalFilterControlTitleBox, \"VerticalFilterControlTitleBox\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalFilterControlTitleBox, \"HorizontalFilterControlTitleBox\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalOverflowFilterControlTitleBox, \"HorizontalOverflowFilterControlTitleBox\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(VerticalFilterControlContainer, \"VerticalFilterControlContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalFilterControlContainer, \"HorizontalFilterControlContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalOverflowFilterControlContainer, \"HorizontalOverflowFilterControlContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(VerticalFormItem, \"VerticalFormItem\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalFormItem, \"HorizontalFormItem\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(HorizontalOverflowFormItem, \"HorizontalOverflowFormItem\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(useFilterControlDisplay, \"useFilterControlDisplay\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(ToolTipContainer, \"ToolTipContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(RequiredFieldIndicator, \"RequiredFieldIndicator\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(DescriptionToolTip, \"DescriptionToolTip\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(FilterControl, \"FilterControl\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["React","useContext","useMemo","useState","createHtmlPortalNode","InPortal","OutPortal","styled","truncationCSS","FormItem","StyledFormItem","Form","Tooltip","FilterBarOrientation","checkIsMissingRequiredValue","FilterValue","FilterCard","FilterBarScrollContext","FilterCardPlacement","StyledIcon","div","VerticalFilterControlTitle","h4","theme","typography","sizes","s","colors","grayscale","dark1","HorizontalFilterControlTitle","weights","normal","base","gridUnit","HorizontalOverflowFilterControlTitle","VerticalFilterControlTitleBox","HorizontalFilterControlTitleBox","HorizontalOverflowFilterControlTitleBox","VerticalFilterControlContainer","HorizontalFilterControlContainer","HorizontalOverflowFilterControlContainer","VerticalFormItem","HorizontalFormItem","HorizontalOverflowFormItem","useFilterControlDisplay","orientation","overflow","HORIZONTAL","FilterControlContainer","FilterControlTitleBox","FilterControlTitle","ToolTipContainer","m","RequiredFieldIndicator","color","error","fontSize","paddingLeft","DescriptionToolTip","description","display","WebkitLineClamp","WebkitBoxOrient","textOverflow","cursor","FilterControl","dataMaskSelected","filter","icon","onFilterSelectionChange","inView","showOverflow","parentRef","VERTICAL","portalNode","isFilterActive","setIsFilterActive","name","isMissingRequiredValue","dataMask","filterState","isRequired","controlValues","enableEmptyFilter","label","trim","isScrolling","filterCardPlacement","Left","Bottom","Right","undefined","memo"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useContext, useMemo, useState } from 'react';\nimport {\n  createHtmlPortalNode,\n  InPortal,\n  OutPortal,\n} from 'react-reverse-portal';\nimport { styled, SupersetTheme, truncationCSS } from '@superset-ui/core';\nimport { FormItem as StyledFormItem, Form } from 'src/components/Form';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { FilterBarOrientation } from 'src/dashboard/types';\nimport { checkIsMissingRequiredValue } from '../utils';\nimport FilterValue from './FilterValue';\nimport { FilterCard } from '../../FilterCard';\nimport { FilterBarScrollContext } from '../Vertical';\nimport { FilterControlProps } from './types';\nimport { FilterCardPlacement } from '../../FilterCard/types';\n\nconst StyledIcon = styled.div`\n  position: absolute;\n  right: 0;\n`;\n\nconst VerticalFilterControlTitle = styled.h4`\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\n  margin: 0;\n  overflow-wrap: break-word;\n`;\n\nconst HorizontalFilterControlTitle = styled(VerticalFilterControlTitle)`\n  font-weight: ${({ theme }) => theme.typography.weights.normal};\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  max-width: ${({ theme }) => theme.gridUnit * 15}px;\n  ${truncationCSS};\n`;\n\nconst HorizontalOverflowFilterControlTitle = styled(\n  HorizontalFilterControlTitle,\n)`\n  max-width: none;\n`;\n\nconst VerticalFilterControlTitleBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst HorizontalFilterControlTitleBox = styled(VerticalFilterControlTitleBox)`\n  margin-bottom: unset;\n`;\n\nconst HorizontalOverflowFilterControlTitleBox = styled(\n  VerticalFilterControlTitleBox,\n)`\n  width: 100%;\n`;\n\nconst VerticalFilterControlContainer = styled(Form)`\n  width: 100%;\n  && .ant-form-item-label > label {\n    text-transform: none;\n    width: 100%;\n    padding-right: ${({ theme }) => theme.gridUnit * 11}px;\n  }\n  .ant-form-item-tooltip {\n    margin-bottom: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst HorizontalFilterControlContainer = styled(Form)`\n  && .ant-form-item-label > label {\n    margin-bottom: 0;\n    text-transform: none;\n  }\n  .ant-form-item-tooltip {\n    margin-bottom: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst HorizontalOverflowFilterControlContainer = styled(\n  VerticalFilterControlContainer,\n)`\n  && .ant-form-item-label {\n    line-height: 1;\n    & > label {\n      padding-right: unset;\n    }\n  }\n`;\n\nconst VerticalFormItem = styled(StyledFormItem)`\n  .ant-form-item-label {\n    label.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n      &::after {\n        display: none;\n      }\n    }\n  }\n`;\n\nconst HorizontalFormItem = styled(StyledFormItem)`\n  && {\n    margin-bottom: 0;\n    align-items: center;\n  }\n\n  .ant-form-item-label {\n    padding-bottom: 0;\n    margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n    label.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n      &::after {\n        display: none;\n      }\n    }\n\n    & > label::after {\n      display: none;\n    }\n  }\n\n  .ant-form-item-control {\n    width: ${({ theme }) => theme.gridUnit * 41}px;\n  }\n`;\n\nconst HorizontalOverflowFormItem = VerticalFormItem;\n\nconst useFilterControlDisplay = (\n  orientation: FilterBarOrientation,\n  overflow: boolean,\n) =>\n  useMemo(() => {\n    if (orientation === FilterBarOrientation.HORIZONTAL) {\n      if (overflow) {\n        return {\n          FilterControlContainer: HorizontalOverflowFilterControlContainer,\n          FormItem: HorizontalOverflowFormItem,\n          FilterControlTitleBox: HorizontalOverflowFilterControlTitleBox,\n          FilterControlTitle: HorizontalOverflowFilterControlTitle,\n        };\n      }\n      return {\n        FilterControlContainer: HorizontalFilterControlContainer,\n        FormItem: HorizontalFormItem,\n        FilterControlTitleBox: HorizontalFilterControlTitleBox,\n        FilterControlTitle: HorizontalFilterControlTitle,\n      };\n    }\n    return {\n      FilterControlContainer: VerticalFilterControlContainer,\n      FormItem: VerticalFormItem,\n      FilterControlTitleBox: VerticalFilterControlTitleBox,\n      FilterControlTitle: VerticalFilterControlTitle,\n    };\n  }, [orientation, overflow]);\n\nconst ToolTipContainer = styled.div`\n  font-size: ${({ theme }) => theme.typography.sizes.m}px;\n  display: flex;\n`;\n\nconst RequiredFieldIndicator = () => (\n  <span\n    css={(theme: SupersetTheme) => ({\n      color: theme.colors.error.base,\n      fontSize: `${theme.typography.sizes.s}px`,\n      paddingLeft: '1px',\n    })}\n  >\n    *\n  </span>\n);\n\nconst DescriptionToolTip = ({ description }: { description: string }) => (\n  <ToolTipContainer>\n    <Tooltip\n      title={description}\n      placement=\"right\"\n      overlayInnerStyle={{\n        display: '-webkit-box',\n        overflow: 'hidden',\n        WebkitLineClamp: 20,\n        WebkitBoxOrient: 'vertical',\n        textOverflow: 'ellipsis',\n      }}\n    >\n      <i\n        className=\"fa fa-info-circle text-muted\"\n        css={(theme: SupersetTheme) => ({\n          paddingLeft: `${theme.gridUnit}px`,\n          cursor: 'pointer',\n        })}\n      />\n    </Tooltip>\n  </ToolTipContainer>\n);\n\nconst FilterControl = ({\n  dataMaskSelected,\n  filter,\n  icon,\n  onFilterSelectionChange,\n  inView,\n  showOverflow,\n  parentRef,\n  orientation = FilterBarOrientation.VERTICAL,\n  overflow = false,\n}: FilterControlProps) => {\n  const portalNode = useMemo(() => createHtmlPortalNode(), []);\n  const [isFilterActive, setIsFilterActive] = useState(false);\n\n  const { name = '<undefined>' } = filter;\n\n  const isMissingRequiredValue = checkIsMissingRequiredValue(\n    filter,\n    filter.dataMask?.filterState,\n  );\n  const isRequired = !!filter.controlValues?.enableEmptyFilter;\n\n  const {\n    FilterControlContainer,\n    FormItem,\n    FilterControlTitleBox,\n    FilterControlTitle,\n  } = useFilterControlDisplay(orientation, overflow);\n\n  const label = useMemo(\n    () => (\n      <FilterControlTitleBox>\n        <FilterControlTitle data-test=\"filter-control-name\">\n          {name}\n        </FilterControlTitle>\n        {isRequired && <RequiredFieldIndicator />}\n        {filter.description?.trim() && (\n          <DescriptionToolTip description={filter.description} />\n        )}\n        <StyledIcon data-test=\"filter-icon\">{icon}</StyledIcon>\n      </FilterControlTitleBox>\n    ),\n    [\n      FilterControlTitleBox,\n      FilterControlTitle,\n      name,\n      isRequired,\n      filter.description,\n      icon,\n    ],\n  );\n\n  const isScrolling = useContext(FilterBarScrollContext);\n  const filterCardPlacement = useMemo(() => {\n    if (orientation === FilterBarOrientation.HORIZONTAL) {\n      if (overflow) {\n        return FilterCardPlacement.Left;\n      }\n      return FilterCardPlacement.Bottom;\n    }\n    return FilterCardPlacement.Right;\n  }, [orientation, overflow]);\n\n  return (\n    <>\n      <InPortal node={portalNode}>\n        <FilterValue\n          dataMaskSelected={dataMaskSelected}\n          filter={filter}\n          showOverflow={showOverflow}\n          onFilterSelectionChange={onFilterSelectionChange}\n          inView={inView}\n          parentRef={parentRef}\n          setFilterActive={setIsFilterActive}\n          orientation={orientation}\n          overflow={overflow}\n        />\n      </InPortal>\n      <FilterControlContainer\n        layout={\n          orientation === FilterBarOrientation.HORIZONTAL && !overflow\n            ? 'horizontal'\n            : 'vertical'\n        }\n      >\n        <FilterCard\n          filter={filter}\n          isVisible={!isFilterActive && !isScrolling}\n          placement={filterCardPlacement}\n        >\n          <div>\n            <FormItem\n              label={label}\n              required={filter?.controlValues?.enableEmptyFilter}\n              validateStatus={isMissingRequiredValue ? 'error' : undefined}\n            >\n              <OutPortal node={portalNode} />\n            </FormItem>\n          </div>\n        </FilterCard>\n      </FilterControlContainer>\n    </>\n  );\n};\n\nexport default React.memo(FilterControl);\n"]},"metadata":{},"sourceType":"module"}