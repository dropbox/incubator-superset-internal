{"ast":null,"code":"function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";} /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport rison from 'rison';\nimport { t, SupersetClient, styled, isFeatureEnabled, FeatureFlag } from '@superset-ui/core';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { addTag, deleteTaggedObjects, fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst FormItem = AntdForm.Item;\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;var _ref3 = process.env.NODE_ENV === \"production\" ? { name: \"1blj7km\", styles: \"margin-top:1em\" } : { name: \"1gtq0eh-PropertiesModal\", styles: \"margin-top:1em;label:PropertiesModal;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96aGFvcnVpL3NyYy9pbmN1YmF0b3Itc3VwZXJzZXQtaW50ZXJuYWwvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Qcm9wZXJ0aWVzTW9kYWwvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWtSa0UiLCJmaWxlIjoiL1VzZXJzL3poYW9ydWkvc3JjL2luY3ViYXRvci1zdXBlcnNldC1pbnRlcm5hbC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL1Byb3BlcnRpZXNNb2RhbC9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbywgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTW9kYWwnO1xuaW1wb3J0IHsgSW5wdXQsIFRleHRBcmVhIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSW5wdXQnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IHsgQXN5bmNTZWxlY3QsIFJvdywgQ29sLCBBbnRkRm9ybSB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCByaXNvbiBmcm9tICdyaXNvbic7XG5pbXBvcnQgeyB0LCBTdXBlcnNldENsaWVudCwgc3R5bGVkLCBpc0ZlYXR1cmVFbmFibGVkLCBGZWF0dXJlRmxhZywgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBnZXRDbGllbnRFcnJvck9iamVjdCB9IGZyb20gJ3NyYy91dGlscy9nZXRDbGllbnRFcnJvck9iamVjdCc7XG5pbXBvcnQgd2l0aFRvYXN0cyBmcm9tICdzcmMvY29tcG9uZW50cy9NZXNzYWdlVG9hc3RzL3dpdGhUb2FzdHMnO1xuaW1wb3J0IHsgbG9hZFRhZ3MgfSBmcm9tICdzcmMvY29tcG9uZW50cy9UYWdzL3V0aWxzJztcbmltcG9ydCB7IGFkZFRhZywgZGVsZXRlVGFnZ2VkT2JqZWN0cywgZmV0Y2hUYWdzLCBPQkpFQ1RfVFlQRVMsIH0gZnJvbSAnc3JjL2ZlYXR1cmVzL3RhZ3MvdGFncyc7XG5jb25zdCBGb3JtSXRlbSA9IEFudGRGb3JtLkl0ZW07XG5jb25zdCBTdHlsZWRGb3JtSXRlbSA9IHN0eWxlZChBbnRkRm9ybS5JdGVtKSBgXG4gIG1hcmdpbi1ib3R0b206IDA7XG5gO1xuY29uc3QgU3R5bGVkSGVscEJsb2NrID0gc3R5bGVkLnNwYW4gYFxuICBtYXJnaW4tYm90dG9tOiAwO1xuYDtcbmZ1bmN0aW9uIFByb3BlcnRpZXNNb2RhbCh7IHNsaWNlLCBvbkhpZGUsIG9uU2F2ZSwgc2hvdywgYWRkU3VjY2Vzc1RvYXN0LCB9KSB7XG4gICAgY29uc3QgW3N1Ym1pdHRpbmcsIHNldFN1Ym1pdHRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtmb3JtXSA9IEFudGRGb3JtLnVzZUZvcm0oKTtcbiAgICAvLyB2YWx1ZXMgb2YgZm9ybSBpbnB1dHNcbiAgICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZShzbGljZS5zbGljZV9uYW1lIHx8ICcnKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRPd25lcnMsIHNldFNlbGVjdGVkT3duZXJzXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFt0YWdzLCBzZXRUYWdzXSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCB0YWdzQXNTZWxlY3RWYWx1ZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0VGFncyA9IHRhZ3MubWFwKHRhZyA9PiAoe1xuICAgICAgICAgICAgdmFsdWU6IHRhZy5uYW1lLFxuICAgICAgICAgICAgbGFiZWw6IHRhZy5uYW1lLFxuICAgICAgICAgICAga2V5OiB0YWcubmFtZSxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gc2VsZWN0VGFncztcbiAgICB9LCBbdGFncy5sZW5ndGhdKTtcbiAgICBmdW5jdGlvbiBzaG93RXJyb3IoeyBlcnJvciwgc3RhdHVzVGV4dCwgbWVzc2FnZSB9KSB7XG4gICAgICAgIGxldCBlcnJvclRleHQgPSBlcnJvciB8fCBzdGF0dXNUZXh0IHx8IHQoJ0FuIGVycm9yIGhhcyBvY2N1cnJlZCcpO1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gJ0ZvcmJpZGRlbicpIHtcbiAgICAgICAgICAgIGVycm9yVGV4dCA9IHQoJ1lvdSBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGVkaXQgdGhpcyBjaGFydCcpO1xuICAgICAgICB9XG4gICAgICAgIE1vZGFsLmVycm9yKHtcbiAgICAgICAgICAgIHRpdGxlOiB0KCdFcnJvcicpLFxuICAgICAgICAgICAgY29udGVudDogZXJyb3JUZXh0LFxuICAgICAgICAgICAgb2tCdXR0b25Qcm9wczogeyBkYW5nZXI6IHRydWUsIGNsYXNzTmFtZTogJ2J0bi1kYW5nZXInIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBmZXRjaENoYXJ0T3duZXJzID0gdXNlQ2FsbGJhY2soYXN5bmMgZnVuY3Rpb24gZmV0Y2hDaGFydE93bmVycygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvJHtzbGljZS5zbGljZV9pZH1gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGFydCA9IHJlc3BvbnNlLmpzb24ucmVzdWx0O1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRPd25lcnMoY2hhcnQ/Lm93bmVycz8ubWFwKChvd25lcikgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb3duZXIuaWQsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGAke293bmVyLmZpcnN0X25hbWV9ICR7b3duZXIubGFzdF9uYW1lfWAsXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChyZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50RXJyb3IgPSBhd2FpdCBnZXRDbGllbnRFcnJvck9iamVjdChyZXNwb25zZSk7XG4gICAgICAgICAgICBzaG93RXJyb3IoY2xpZW50RXJyb3IpO1xuICAgICAgICB9XG4gICAgfSwgW3NsaWNlLnNsaWNlX2lkXSk7XG4gICAgY29uc3QgbG9hZE9wdGlvbnMgPSB1c2VNZW1vKCgpID0+IChpbnB1dCA9ICcnLCBwYWdlLCBwYWdlU2l6ZSkgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHJpc29uLmVuY29kZSh7XG4gICAgICAgICAgICBmaWx0ZXI6IGlucHV0LFxuICAgICAgICAgICAgcGFnZSxcbiAgICAgICAgICAgIHBhZ2Vfc2l6ZTogcGFnZVNpemUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC9yZWxhdGVkL293bmVycz9xPSR7cXVlcnl9YCxcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiAoe1xuICAgICAgICAgICAgZGF0YTogcmVzcG9uc2UuanNvbi5yZXN1bHRcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmV4dHJhLmFjdGl2ZSlcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLnRleHQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB0b3RhbENvdW50OiByZXNwb25zZS5qc29uLmNvdW50LFxuICAgICAgICB9KSk7XG4gICAgfSwgW10pO1xuICAgIGNvbnN0IHVwZGF0ZVRhZ3MgPSAob2xkVGFncywgbmV3VGFncykgPT4ge1xuICAgICAgICAvLyB1cGRhdGUgdGhlIHRhZ3MgZm9yIHRoaXMgb2JqZWN0XG4gICAgICAgIC8vIGFkZCB0YWdzIHRoYXQgYXJlIGluIG5ldyB0YWdzLCBidXQgbm90IGluIG9sZCB0YWdzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBhcnJheS1jYWxsYmFjay1yZXR1cm5cbiAgICAgICAgbmV3VGFncy5tYXAoKHRhZykgPT4ge1xuICAgICAgICAgICAgaWYgKCFvbGRUYWdzLnNvbWUodCA9PiB0Lm5hbWUgPT09IHRhZy5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGFkZFRhZyh7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdFR5cGU6IE9CSkVDVF9UWVBFUy5DSEFSVCxcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0SWQ6IHNsaWNlLnNsaWNlX2lkLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlVHlwZXM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sIHRhZy5uYW1lLCAoKSA9PiB7IH0sICgpID0+IHsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBkZWxldGUgdGFncyB0aGF0IGFyZSBpbiBvbGQgdGFncywgYnV0IG5vdCBpbiBuZXcgdGFnc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYXJyYXktY2FsbGJhY2stcmV0dXJuXG4gICAgICAgIG9sZFRhZ3MubWFwKCh0YWcpID0+IHtcbiAgICAgICAgICAgIGlmICghbmV3VGFncy5zb21lKHQgPT4gdC5uYW1lID09PSB0YWcubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGVUYWdnZWRPYmplY3RzKHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0VHlwZTogT0JKRUNUX1RZUEVTLkNIQVJULFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDogc2xpY2Uuc2xpY2VfaWQsXG4gICAgICAgICAgICAgICAgfSwgdGFnLCAoKSA9PiB7IH0sICgpID0+IHsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgb25TdWJtaXQgPSBhc3luYyAodmFsdWVzKSA9PiB7XG4gICAgICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7XG4gICAgICAgIGNvbnN0IHsgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSwgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpY2F0aW9uRGV0YWlscywgZGVzY3JpcHRpb24sIGNhY2hlX3RpbWVvdXQ6IGNhY2hlVGltZW91dCwgfSA9IHZhbHVlcztcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIHNsaWNlX25hbWU6IG5hbWUgfHwgbnVsbCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgICAgICAgY2FjaGVfdGltZW91dDogY2FjaGVUaW1lb3V0IHx8IG51bGwsXG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IHx8IG51bGwsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmllZEJ5ICYmIGNlcnRpZmljYXRpb25EZXRhaWxzID8gY2VydGlmaWNhdGlvbkRldGFpbHMgOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoc2VsZWN0ZWRPd25lcnMpIHtcbiAgICAgICAgICAgIHBheWxvYWQub3duZXJzID0gc2VsZWN0ZWRPd25lcnMubWFwKG8gPT4gby52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuVEFHR0lOR19TWVNURU0pKSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGFnc1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmZXRjaFRhZ3Moe1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiBPQkpFQ1RfVFlQRVMuQ0hBUlQsXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdElkOiBzbGljZS5zbGljZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZVR5cGVzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LCAoY3VycmVudFRhZ3MpID0+IHVwZGF0ZVRhZ3MoY3VycmVudFRhZ3MsIHRhZ3MpLCBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzaG93RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBTdXBlcnNldENsaWVudC5wdXQoe1xuICAgICAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8ke3NsaWNlLnNsaWNlX2lkfWAsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgcmVkdXggc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDaGFydCA9IHtcbiAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgICAgIC4uLnJlcy5qc29uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICB0YWdzLFxuICAgICAgICAgICAgICAgIGlkOiBzbGljZS5zbGljZV9pZCxcbiAgICAgICAgICAgICAgICBvd25lcnM6IHNlbGVjdGVkT3duZXJzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9uU2F2ZSh1cGRhdGVkQ2hhcnQpO1xuICAgICAgICAgICAgYWRkU3VjY2Vzc1RvYXN0KHQoJ0NoYXJ0IHByb3BlcnRpZXMgdXBkYXRlZCcpKTtcbiAgICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChyZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudEVycm9yID0gYXdhaXQgZ2V0Q2xpZW50RXJyb3JPYmplY3QocmVzKTtcbiAgICAgICAgICAgIHNob3dFcnJvcihjbGllbnRFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0U3VibWl0dGluZyhmYWxzZSk7XG4gICAgfTtcbiAgICBjb25zdCBvd25lcnNMYWJlbCA9IHQoJ093bmVycycpO1xuICAgIC8vIGdldCB0aGUgb3duZXJzIG9mIHRoaXMgc2xpY2VcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBmZXRjaENoYXJ0T3duZXJzKCk7XG4gICAgfSwgW2ZldGNoQ2hhcnRPd25lcnNdKTtcbiAgICAvLyB1cGRhdGUgbmFtZSBhZnRlciBpdCdzIGNoYW5nZWQgaW4gYW5vdGhlciBtb2RhbFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldE5hbWUoc2xpY2Uuc2xpY2VfbmFtZSB8fCAnJyk7XG4gICAgfSwgW3NsaWNlLnNsaWNlX25hbWVdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuVEFHR0lOR19TWVNURU0pKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmV0Y2hUYWdzKHtcbiAgICAgICAgICAgICAgICBvYmplY3RUeXBlOiBPQkpFQ1RfVFlQRVMuQ0hBUlQsXG4gICAgICAgICAgICAgICAgb2JqZWN0SWQ6IHNsaWNlLnNsaWNlX2lkLFxuICAgICAgICAgICAgICAgIGluY2x1ZGVUeXBlczogZmFsc2UsXG4gICAgICAgICAgICB9LCAodGFncykgPT4gc2V0VGFncyh0YWdzKSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHNob3dFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNob3dFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9LCBbc2xpY2Uuc2xpY2VfaWRdKTtcbiAgICBjb25zdCBoYW5kbGVDaGFuZ2VUYWdzID0gKHZhbHVlcykgPT4ge1xuICAgICAgICAvLyB0cmlnZ2VyZWQgd2hlbmV2ZXIgYSBuZXcgdGFnIGlzIHNlbGVjdGVkIG9yIGEgdGFnIHdhcyBkZXNlbGVjdGVkXG4gICAgICAgIC8vIG9uIG5ldyB0YWcgc2VsZWN0ZWQsIGFkZCB0aGUgdGFnXG4gICAgICAgIGNvbnN0IHVuaXF1ZVRhZ3MgPSBbLi4ubmV3IFNldCh2YWx1ZXMubWFwKHYgPT4gdi5sYWJlbCkpXTtcbiAgICAgICAgc2V0VGFncyhbLi4udW5pcXVlVGFncy5tYXAodCA9PiAoeyBuYW1lOiB0IH0pKV0pO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlQ2xlYXJUYWdzID0gKCkgPT4ge1xuICAgICAgICBzZXRUYWdzKFtdKTtcbiAgICB9O1xuICAgIHJldHVybiAoPE1vZGFsIHNob3c9e3Nob3d9IG9uSGlkZT17b25IaWRlfSB0aXRsZT17dCgnRWRpdCBDaGFydCBQcm9wZXJ0aWVzJyl9IGZvb3Rlcj17PD5cbiAgICAgICAgICA8QnV0dG9uIGRhdGEtdGVzdD1cInByb3BlcnRpZXMtbW9kYWwtY2FuY2VsLWJ1dHRvblwiIGh0bWxUeXBlPVwiYnV0dG9uXCIgYnV0dG9uU2l6ZT1cInNtYWxsXCIgb25DbGljaz17b25IaWRlfSBjdGE+XG4gICAgICAgICAgICB7dCgnQ2FuY2VsJyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPEJ1dHRvbiBkYXRhLXRlc3Q9XCJwcm9wZXJ0aWVzLW1vZGFsLXNhdmUtYnV0dG9uXCIgaHRtbFR5cGU9XCJzdWJtaXRcIiBidXR0b25TaXplPVwic21hbGxcIiBidXR0b25TdHlsZT1cInByaW1hcnlcIiBvbkNsaWNrPXtmb3JtLnN1Ym1pdH0gZGlzYWJsZWQ9e3N1Ym1pdHRpbmcgfHwgIW5hbWUgfHwgc2xpY2UuaXNfbWFuYWdlZF9leHRlcm5hbGx5fSB0b29sdGlwPXtzbGljZS5pc19tYW5hZ2VkX2V4dGVybmFsbHlcbiAgICAgICAgICAgICAgICA/IHQoXCJUaGlzIGNoYXJ0IGlzIG1hbmFnZWQgZXh0ZXJuYWxseSwgYW5kIGNhbid0IGJlIGVkaXRlZCBpbiBTdXBlcnNldFwiKVxuICAgICAgICAgICAgICAgIDogJyd9IGN0YT5cbiAgICAgICAgICAgIHt0KCdTYXZlJyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvPn0gcmVzcG9uc2l2ZSB3cmFwUHJvcHM9e3sgJ2RhdGEtdGVzdCc6ICdwcm9wZXJ0aWVzLWVkaXQtbW9kYWwnIH19PlxuICAgICAgPEFudGRGb3JtIGZvcm09e2Zvcm19IG9uRmluaXNoPXtvblN1Ym1pdH0gbGF5b3V0PVwidmVydGljYWxcIiBpbml0aWFsVmFsdWVzPXt7XG4gICAgICAgICAgICBuYW1lOiBzbGljZS5zbGljZV9uYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHNsaWNlLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgY2FjaGVfdGltZW91dDogc2xpY2UuY2FjaGVfdGltZW91dCAhPSBudWxsID8gc2xpY2UuY2FjaGVfdGltZW91dCA6ICcnLFxuICAgICAgICAgICAgY2VydGlmaWVkX2J5OiBzbGljZS5jZXJ0aWZpZWRfYnkgfHwgJycsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IHNsaWNlLmNlcnRpZmllZF9ieSAmJiBzbGljZS5jZXJ0aWZpY2F0aW9uX2RldGFpbHNcbiAgICAgICAgICAgICAgICA/IHNsaWNlLmNlcnRpZmljYXRpb25fZGV0YWlsc1xuICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgIH19PlxuICAgICAgICA8Um93IGd1dHRlcj17MTZ9PlxuICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgPGgzPnt0KCdCYXNpYyBpbmZvcm1hdGlvbicpfTwvaDM+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0gbGFiZWw9e3QoJ05hbWUnKX0gcmVxdWlyZWQ+XG4gICAgICAgICAgICAgIDxJbnB1dCBhcmlhLWxhYmVsPXt0KCdOYW1lJyl9IG5hbWU9XCJuYW1lXCIgZGF0YS10ZXN0PVwicHJvcGVydGllcy1tb2RhbC1uYW1lLWlucHV0XCIgdHlwZT1cInRleHRcIiB2YWx1ZT17bmFtZX0gb25DaGFuZ2U9eyhldmVudCkgPT4gc2V0TmFtZShldmVudC50YXJnZXQudmFsdWUgPz8gJycpfS8+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9IG5hbWU9XCJkZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgIDxUZXh0QXJlYSByb3dzPXszfSBzdHlsZT17eyBtYXhXaWR0aDogJzEwMCUnIH19Lz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoJ1RoZSBkZXNjcmlwdGlvbiBjYW4gYmUgZGlzcGxheWVkIGFzIHdpZGdldCBoZWFkZXJzIGluIHRoZSBkYXNoYm9hcmQgdmlldy4gU3VwcG9ydHMgbWFya2Rvd24uJyl9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxoMz57dCgnQ2VydGlmaWNhdGlvbicpfTwvaDM+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRGb3JtSXRlbSBsYWJlbD17dCgnQ2VydGlmaWVkIGJ5Jyl9IG5hbWU9XCJjZXJ0aWZpZWRfYnlcIj5cbiAgICAgICAgICAgICAgICA8SW5wdXQgYXJpYS1sYWJlbD17dCgnQ2VydGlmaWVkIGJ5Jyl9Lz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBjaGFydC4nKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfSBuYW1lPVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgPElucHV0IGFyaWEtbGFiZWw9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfS8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KCdBbnkgYWRkaXRpb25hbCBkZXRhaWwgdG8gc2hvdyBpbiB0aGUgY2VydGlmaWNhdGlvbiB0b29sdGlwLicpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICA8aDM+e3QoJ0NvbmZpZ3VyYXRpb24nKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkRm9ybUl0ZW0gbGFiZWw9e3QoJ0NhY2hlIHRpbWVvdXQnKX0gbmFtZT1cImNhY2hlX3RpbWVvdXRcIj5cbiAgICAgICAgICAgICAgICA8SW5wdXQgYXJpYS1sYWJlbD1cIkNhY2hlIHRpbWVvdXRcIi8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkRm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgIHt0KFwiRHVyYXRpb24gKGluIHNlY29uZHMpIG9mIHRoZSBjYWNoaW5nIHRpbWVvdXQgZm9yIHRoaXMgY2hhcnQuIFNldCB0byAtMSB0byBieXBhc3MgdGhlIGNhY2hlLiBOb3RlIHRoaXMgZGVmYXVsdHMgdG8gdGhlIGRhdGFzZXQncyB0aW1lb3V0IGlmIHVuZGVmaW5lZC5cIil9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIDxoMyBzdHlsZT17eyBtYXJnaW5Ub3A6ICcxZW0nIH19Pnt0KCdBY2Nlc3MnKX08L2gzPlxuICAgICAgICAgICAgPEZvcm1JdGVtIGxhYmVsPXtvd25lcnNMYWJlbH0+XG4gICAgICAgICAgICAgIDxBc3luY1NlbGVjdCBhcmlhTGFiZWw9e293bmVyc0xhYmVsfSBtb2RlPVwibXVsdGlwbGVcIiBuYW1lPVwib3duZXJzXCIgdmFsdWU9e3NlbGVjdGVkT3duZXJzIHx8IFtdfSBvbkNoYW5nZT17c2V0U2VsZWN0ZWRPd25lcnN9IG9wdGlvbnM9e2xvYWRPcHRpb25zfSBkaXNhYmxlZD17IXNlbGVjdGVkT3duZXJzfSBhbGxvd0NsZWFyLz5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoJ0EgbGlzdCBvZiB1c2VycyB3aG8gY2FuIGFsdGVyIHRoZSBjaGFydC4gU2VhcmNoYWJsZSBieSBuYW1lIG9yIHVzZXJuYW1lLicpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICB7aXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5UQUdHSU5HX1NZU1RFTSkgJiYgKDxoMyBjc3M9e3sgbWFyZ2luVG9wOiAnMWVtJyB9fT57dCgnVGFncycpfTwvaDM+KX1cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLlRBR0dJTkdfU1lTVEVNKSAmJiAoPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgIDxBc3luY1NlbGVjdCBhcmlhTGFiZWw9XCJUYWdzXCIgbW9kZT1cIm11bHRpcGxlXCIgYWxsb3dOZXdPcHRpb25zIHZhbHVlPXt0YWdzQXNTZWxlY3RWYWx1ZXN9IG9wdGlvbnM9e2xvYWRUYWdzfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlVGFnc30gb25DbGVhcj17aGFuZGxlQ2xlYXJUYWdzfSBhbGxvd0NsZWFyLz5cbiAgICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgIHt0KCdBIGxpc3Qgb2YgdGFncyB0aGF0IGhhdmUgYmVlbiBhcHBsaWVkIHRvIHRoaXMgY2hhcnQuJyl9XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICAgIDwvRm9ybUl0ZW0+KX1cbiAgICAgICAgICA8L0NvbD5cbiAgICAgICAgPC9Sb3c+XG4gICAgICA8L0FudGRGb3JtPlxuICAgIDwvTW9kYWw+KTtcbn1cbmV4cG9ydCBkZWZhdWx0IHdpdGhUb2FzdHMoUHJvcGVydGllc01vZGFsKTtcbiJdfQ== */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nfunction PropertiesModal(_ref) {let { slice, onHide, onSave, show, addSuccessToast } = _ref;\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState(null);\n  const [tags, setTags] = useState([]);\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag) => ({\n      value: tag.name,\n      label: tag.name,\n      key: tag.name }));\n\n    return selectTags;\n  }, [tags.length]);\n  function showError(_ref2) {let { error, statusText, message } = _ref2;\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' } });\n\n  }\n  const fetchChartOwners = useCallback(async function fetchChartOwners() {\n    try {var _chart$owners;\n      const response = await SupersetClient.get({\n        endpoint: `/api/v1/chart/${slice.slice_id}` });\n\n      const chart = response.json.result;\n      setSelectedOwners(chart == null ? void 0 : (_chart$owners = chart.owners) == null ? void 0 : _chart$owners.map((owner) => ({\n        value: owner.id,\n        label: `${owner.first_name} ${owner.last_name}` })));\n\n    }\n    catch (response) {\n      const clientError = await getClientErrorObject(response);\n      showError(clientError);\n    }\n  }, [slice.slice_id]);\n  const loadOptions = useMemo(() => function (input, page, pageSize) {if (input === void 0) {input = '';}\n    const query = rison.encode({\n      filter: input,\n      page,\n      page_size: pageSize });\n\n    return SupersetClient.get({\n      endpoint: `/api/v1/chart/related/owners?q=${query}` }).\n    then((response) => ({\n      data: response.json.result.\n      filter((item) => item.extra.active).\n      map((item) => ({\n        value: item.value,\n        label: item.text })),\n\n      totalCount: response.json.count }));\n\n  }, []);\n  const updateTags = (oldTags, newTags) => {\n    // update the tags for this object\n    // add tags that are in new tags, but not in old tags\n    // eslint-disable-next-line array-callback-return\n    newTags.map((tag) => {\n      if (!oldTags.some((t) => t.name === tag.name)) {\n        addTag({\n          objectType: OBJECT_TYPES.CHART,\n          objectId: slice.slice_id,\n          includeTypes: false },\n        tag.name, () => {}, () => {});\n      }\n    });\n    // delete tags that are in old tags, but not in new tags\n    // eslint-disable-next-line array-callback-return\n    oldTags.map((tag) => {\n      if (!newTags.some((t) => t.name === tag.name)) {\n        deleteTaggedObjects({\n          objectType: OBJECT_TYPES.CHART,\n          objectId: slice.slice_id },\n        tag, () => {}, () => {});\n      }\n    });\n  };\n  const onSubmit = async (values) => {\n    setSubmitting(true);\n    const { certified_by: certifiedBy, certification_details: certificationDetails, description, cache_timeout: cacheTimeout } = values;\n    const payload = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details: certifiedBy && certificationDetails ? certificationDetails : null };\n\n    if (selectedOwners) {\n      payload.owners = selectedOwners.map((o) => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM)) {\n      // update tags\n      try {\n        fetchTags({\n          objectType: OBJECT_TYPES.CHART,\n          objectId: slice.slice_id,\n          includeTypes: false },\n        (currentTags) => updateTags(currentTags, tags), (error) => {\n          showError(error);\n        });\n      }\n      catch (error) {\n        showError(error);\n      }\n    }\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload) });\n\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners };\n\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    }\n    catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n  const ownersLabel = t('Owners');\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM))\n    return;\n    try {\n      fetchTags({\n        objectType: OBJECT_TYPES.CHART,\n        objectId: slice.slice_id,\n        includeTypes: false },\n      (tags) => setTags(tags), (error) => {\n        showError(error);\n      });\n    }\n    catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n  const handleChangeTags = (values) => {\n    // triggered whenever a new tag is selected or a tag was deselected\n    // on new tag selected, add the tag\n    const uniqueTags = [...new Set(values.map((v) => v.label))];\n    setTags([...uniqueTags.map((t) => ({ name: t }))]);\n  };\n  const handleClearTags = () => {\n    setTags([]);\n  };\n  return ___EmotionJSX(Modal, { show: show, onHide: onHide, title: t('Edit Chart Properties'), footer: ___EmotionJSX(React.Fragment, null,\n    ___EmotionJSX(Button, { htmlType: \"button\", buttonSize: \"small\", onClick: onHide, cta: true },\n    t('Cancel')),\n\n    ___EmotionJSX(Button, { htmlType: \"submit\", buttonSize: \"small\", buttonStyle: \"primary\", onClick: form.submit, disabled: submitting || !name || slice.is_managed_externally, tooltip: slice.is_managed_externally ?\n      t(\"This chart is managed externally, and can't be edited in Superset\") :\n      '', cta: true },\n    t('Save'))),\n\n    responsive: true, wrapProps: { 'data-test': 'properties-edit-modal' } },\n  ___EmotionJSX(AntdForm, { form: form, onFinish: onSubmit, layout: \"vertical\", initialValues: {\n      name: slice.slice_name || '',\n      description: slice.description || '',\n      cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n      certified_by: slice.certified_by || '',\n      certification_details: slice.certified_by && slice.certification_details ?\n      slice.certification_details :\n      '' } },\n\n  ___EmotionJSX(Row, { gutter: 16 },\n  ___EmotionJSX(Col, { xs: 24, md: 12 },\n  ___EmotionJSX(\"h3\", null, t('Basic information')),\n  ___EmotionJSX(FormItem, { label: t('Name'), required: true },\n  ___EmotionJSX(Input, { \"aria-label\": t('Name'), name: \"name\", type: \"text\", value: name, onChange: (event) => {var _event$target$value;return setName((_event$target$value = event.target.value) != null ? _event$target$value : '');} })),\n\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Description'), name: \"description\" },\n  ___EmotionJSX(TextArea, { rows: 3, style: { maxWidth: '100%' } })),\n\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('The description can be displayed as widget headers in the dashboard view. Supports markdown.'))),\n\n\n  ___EmotionJSX(\"h3\", null, t('Certification')),\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Certified by'), name: \"certified_by\" },\n  ___EmotionJSX(Input, { \"aria-label\": t('Certified by') })),\n\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('Person or group that has certified this chart.'))),\n\n\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Certification details'), name: \"certification_details\" },\n  ___EmotionJSX(Input, { \"aria-label\": t('Certification details') })),\n\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('Any additional detail to show in the certification tooltip.')))),\n\n\n\n  ___EmotionJSX(Col, { xs: 24, md: 12 },\n  ___EmotionJSX(\"h3\", null, t('Configuration')),\n  ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(StyledFormItem, { label: t('Cache timeout'), name: \"cache_timeout\" },\n  ___EmotionJSX(Input, { \"aria-label\": \"Cache timeout\" })),\n\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t(\"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\"))),\n\n\n  ___EmotionJSX(\"h3\", { style: { marginTop: '1em' } }, t('Access')),\n  ___EmotionJSX(FormItem, { label: ownersLabel },\n  ___EmotionJSX(AsyncSelect, { ariaLabel: ownersLabel, mode: \"multiple\", name: \"owners\", value: selectedOwners || [], onChange: setSelectedOwners, options: loadOptions, disabled: !selectedOwners, allowClear: true }),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('A list of users who can alter the chart. Searchable by name or username.'))),\n\n\n  isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM) && ___EmotionJSX(\"h3\", { css: _ref3 }, t('Tags')),\n  isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM) && ___EmotionJSX(FormItem, null,\n  ___EmotionJSX(AsyncSelect, { ariaLabel: \"Tags\", mode: \"multiple\", allowNewOptions: true, value: tagsAsSelectValues, options: loadTags, onChange: handleChangeTags, onClear: handleClearTags, allowClear: true }),\n  ___EmotionJSX(StyledHelpBlock, { className: \"help-block\" },\n  t('A list of tags that have been applied to this chart.')))))));\n\n\n\n\n\n\n}\nexport default withToasts(PropertiesModal);","map":{"version":3,"mappings":"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","names":["React","useMemo","useState","useCallback","useEffect","Modal","Input","TextArea","Button","AsyncSelect","Row","Col","AntdForm","rison","t","SupersetClient","styled","isFeatureEnabled","FeatureFlag","getClientErrorObject","withToasts","loadTags","addTag","deleteTaggedObjects","fetchTags","OBJECT_TYPES","FormItem","Item","StyledFormItem","StyledHelpBlock","span","PropertiesModal","slice","onHide","onSave","show","addSuccessToast","submitting","setSubmitting","form","useForm","name","setName","slice_name","selectedOwners","setSelectedOwners","tags","setTags","tagsAsSelectValues","selectTags","map","value","tag","label","key","length","showError","error","statusText","message","errorText","title","content","okButtonProps","danger","className","fetchChartOwners","response","get","endpoint","slice_id","chart","json","result","owners","owner","id","first_name","last_name","clientError","loadOptions","input","page","pageSize","query","encode","filter","page_size","then","data","item","extra","active","text","totalCount","count","updateTags","oldTags","newTags","some","objectType","CHART","objectId","includeTypes","onSubmit","values","certified_by","certifiedBy","certification_details","certificationDetails","description","cache_timeout","cacheTimeout","payload","o","TAGGING_SYSTEM","currentTags","res","put","headers","body","JSON","stringify","updatedChart","ownersLabel","handleChangeTags","uniqueTags","Set","v","handleClearTags","submit","is_managed_externally","event","target","maxWidth","marginTop"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/explore/components/PropertiesModal/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport { SelectValue } from 'antd/lib/select';\nimport rison from 'rison';\nimport {\n  t,\n  SupersetClient,\n  styled,\n  isFeatureEnabled,\n  FeatureFlag,\n} from '@superset-ui/core';\nimport Chart, { Slice } from 'src/types/Chart';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport {\n  addTag,\n  deleteTaggedObjects,\n  fetchTags,\n  OBJECT_TYPES,\n} from 'src/features/tags/tags';\nimport TagType from 'src/types/TagType';\n\nexport type PropertiesModalProps = {\n  slice: Slice;\n  show: boolean;\n  onHide: () => void;\n  onSave: (chart: Chart) => void;\n  permissionsError?: string;\n  existingOwners?: SelectValue;\n  addSuccessToast: (msg: string) => void;\n};\n\nconst FormItem = AntdForm.Item;\n\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\n\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;\n\nfunction PropertiesModal({\n  slice,\n  onHide,\n  onSave,\n  show,\n  addSuccessToast,\n}: PropertiesModalProps) {\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState<SelectValue | null>(\n    null,\n  );\n\n  const [tags, setTags] = useState<TagType[]>([]);\n\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map(tag => ({\n      value: tag.name,\n      label: tag.name,\n      key: tag.name,\n    }));\n    return selectTags;\n  }, [tags.length]);\n\n  function showError({ error, statusText, message }: any) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' },\n    });\n  }\n\n  const fetchChartOwners = useCallback(\n    async function fetchChartOwners() {\n      try {\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n        });\n        const chart = response.json.result;\n        setSelectedOwners(\n          chart?.owners?.map((owner: any) => ({\n            value: owner.id,\n            label: `${owner.first_name} ${owner.last_name}`,\n          })),\n        );\n      } catch (response) {\n        const clientError = await getClientErrorObject(response);\n        showError(clientError);\n      }\n    },\n    [slice.slice_id],\n  );\n\n  const loadOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/chart/related/owners?q=${query}`,\n        }).then(response => ({\n          data: response.json.result\n            .filter((item: { extra: { active: boolean } }) => item.extra.active)\n            .map((item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            })),\n          totalCount: response.json.count,\n        }));\n      },\n    [],\n  );\n\n  const updateTags = (oldTags: TagType[], newTags: TagType[]) => {\n    // update the tags for this object\n    // add tags that are in new tags, but not in old tags\n    // eslint-disable-next-line array-callback-return\n    newTags.map((tag: TagType) => {\n      if (!oldTags.some(t => t.name === tag.name)) {\n        addTag(\n          {\n            objectType: OBJECT_TYPES.CHART,\n            objectId: slice.slice_id,\n            includeTypes: false,\n          },\n          tag.name,\n          () => {},\n          () => {},\n        );\n      }\n    });\n    // delete tags that are in old tags, but not in new tags\n    // eslint-disable-next-line array-callback-return\n    oldTags.map((tag: TagType) => {\n      if (!newTags.some(t => t.name === tag.name)) {\n        deleteTaggedObjects(\n          {\n            objectType: OBJECT_TYPES.CHART,\n            objectId: slice.slice_id,\n          },\n          tag,\n          () => {},\n          () => {},\n        );\n      }\n    });\n  };\n\n  const onSubmit = async (values: {\n    certified_by?: string;\n    certification_details?: string;\n    description?: string;\n    cache_timeout?: number;\n  }) => {\n    setSubmitting(true);\n    const {\n      certified_by: certifiedBy,\n      certification_details: certificationDetails,\n      description,\n      cache_timeout: cacheTimeout,\n    } = values;\n    const payload: { [key: string]: any } = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details:\n        certifiedBy && certificationDetails ? certificationDetails : null,\n    };\n    if (selectedOwners) {\n      payload.owners = (\n        selectedOwners as {\n          value: number;\n          label: string;\n        }[]\n      ).map(o => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM)) {\n      // update tags\n      try {\n        fetchTags(\n          {\n            objectType: OBJECT_TYPES.CHART,\n            objectId: slice.slice_id,\n            includeTypes: false,\n          },\n          (currentTags: TagType[]) => updateTags(currentTags, tags),\n          error => {\n            showError(error);\n          },\n        );\n      } catch (error) {\n        showError(error);\n      }\n    }\n\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners,\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    } catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n\n  const ownersLabel = t('Owners');\n\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM)) return;\n    try {\n      fetchTags(\n        {\n          objectType: OBJECT_TYPES.CHART,\n          objectId: slice.slice_id,\n          includeTypes: false,\n        },\n        (tags: TagType[]) => setTags(tags),\n        error => {\n          showError(error);\n        },\n      );\n    } catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n\n  const handleChangeTags = (values: { label: string; value: number }[]) => {\n    // triggered whenever a new tag is selected or a tag was deselected\n    // on new tag selected, add the tag\n\n    const uniqueTags = [...new Set(values.map(v => v.label))];\n    setTags([...uniqueTags.map(t => ({ name: t }))]);\n  };\n\n  const handleClearTags = () => {\n    setTags([]);\n  };\n\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      title={t('Edit Chart Properties')}\n      footer={\n        <>\n          <Button\n            data-test=\"properties-modal-cancel-button\"\n            htmlType=\"button\"\n            buttonSize=\"small\"\n            onClick={onHide}\n            cta\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            data-test=\"properties-modal-save-button\"\n            htmlType=\"submit\"\n            buttonSize=\"small\"\n            buttonStyle=\"primary\"\n            onClick={form.submit}\n            disabled={submitting || !name || slice.is_managed_externally}\n            tooltip={\n              slice.is_managed_externally\n                ? t(\n                    \"This chart is managed externally, and can't be edited in Superset\",\n                  )\n                : ''\n            }\n            cta\n          >\n            {t('Save')}\n          </Button>\n        </>\n      }\n      responsive\n      wrapProps={{ 'data-test': 'properties-edit-modal' }}\n    >\n      <AntdForm\n        form={form}\n        onFinish={onSubmit}\n        layout=\"vertical\"\n        initialValues={{\n          name: slice.slice_name || '',\n          description: slice.description || '',\n          cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n          certified_by: slice.certified_by || '',\n          certification_details:\n            slice.certified_by && slice.certification_details\n              ? slice.certification_details\n              : '',\n        }}\n      >\n        <Row gutter={16}>\n          <Col xs={24} md={12}>\n            <h3>{t('Basic information')}</h3>\n            <FormItem label={t('Name')} required>\n              <Input\n                aria-label={t('Name')}\n                name=\"name\"\n                data-test=\"properties-modal-name-input\"\n                type=\"text\"\n                value={name}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                  setName(event.target.value ?? '')\n                }\n              />\n            </FormItem>\n            <FormItem>\n              <StyledFormItem label={t('Description')} name=\"description\">\n                <TextArea rows={3} style={{ maxWidth: '100%' }} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'The description can be displayed as widget headers in the dashboard view. Supports markdown.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3>{t('Certification')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Certified by')} name=\"certified_by\">\n                <Input aria-label={t('Certified by')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t('Person or group that has certified this chart.')}\n              </StyledHelpBlock>\n            </FormItem>\n            <FormItem>\n              <StyledFormItem\n                label={t('Certification details')}\n                name=\"certification_details\"\n              >\n                <Input aria-label={t('Certification details')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'Any additional detail to show in the certification tooltip.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n          <Col xs={24} md={12}>\n            <h3>{t('Configuration')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Cache timeout')} name=\"cache_timeout\">\n                <Input aria-label=\"Cache timeout\" />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  \"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\",\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3 style={{ marginTop: '1em' }}>{t('Access')}</h3>\n            <FormItem label={ownersLabel}>\n              <AsyncSelect\n                ariaLabel={ownersLabel}\n                mode=\"multiple\"\n                name=\"owners\"\n                value={selectedOwners || []}\n                onChange={setSelectedOwners}\n                options={loadOptions}\n                disabled={!selectedOwners}\n                allowClear\n              />\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'A list of users who can alter the chart. Searchable by name or username.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            {isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM) && (\n              <h3 css={{ marginTop: '1em' }}>{t('Tags')}</h3>\n            )}\n            {isFeatureEnabled(FeatureFlag.TAGGING_SYSTEM) && (\n              <FormItem>\n                <AsyncSelect\n                  ariaLabel=\"Tags\"\n                  mode=\"multiple\"\n                  allowNewOptions\n                  value={tagsAsSelectValues}\n                  options={loadTags}\n                  onChange={handleChangeTags}\n                  onClear={handleClearTags}\n                  allowClear\n                />\n                <StyledHelpBlock className=\"help-block\">\n                  {t('A list of tags that have been applied to this chart.')}\n                </StyledHelpBlock>\n              </FormItem>\n            )}\n          </Col>\n        </Row>\n      </AntdForm>\n    </Modal>\n  );\n}\n\nexport default withToasts(PropertiesModal);\n"]},"metadata":{},"sourceType":"module"}