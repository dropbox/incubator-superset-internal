{"ast":null,"code":"import { css as _css } from \"@emotion/react\";import _extends from \"@babel/runtime-corejs3/helpers/extends\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport throttle from 'lodash/throttle';\nimport React, { useEffect, useState, useCallback, useMemo, useRef, createContext } from 'react';\nimport cx from 'classnames';\nimport { FeatureFlag, isFeatureEnabled, isNativeFilter, styled, t } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { AntdTabs } from 'src/components';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateSmall } from 'src/components/EmptyState';\nimport { getFilterBarTestId } from './utils';\nimport { TabIds } from './types';\nimport FilterSets from './FilterSets';\nimport { useFilterSets } from './state';\nimport EditSection from './FilterSets/EditSection';\nimport Header from './Header';\nimport FilterControls from './FilterControls/FilterControls';\nimport CrossFiltersVertical from './CrossFilters/Vertical';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst BarWrapper = styled.div`\n  width: ${(_ref) => {let { theme } = _ref;return theme.gridUnit * 8;}}px;\n\n  & .ant-tabs-top > .ant-tabs-nav {\n    margin: 0;\n  }\n  &.open {\n    width: ${(_ref2) => {let { width } = _ref2;return width;}}px; // arbitrary...\n  }\n`;\nconst Bar = styled.div`\n  ${(_ref3) => {let { theme, width } = _ref3;return `\n    & .ant-typography-edit-content {\n      left: 0;\n      margin-top: 0;\n      width: 100%;\n    }\n    position: absolute;\n    top: 0;\n    left: 0;\n    flex-direction: column;\n    flex-grow: 1;\n    width: ${width}px;\n    background: ${theme.colors.grayscale.light5};\n    border-right: 1px solid ${theme.colors.grayscale.light2};\n    border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    min-height: 100%;\n    display: none;\n    &.open {\n      display: flex;\n    }\n  `;}}\n`;\nconst CollapsedBar = styled.div`\n  ${(_ref4) => {let { theme, offset } = _ref4;return `\n    position: absolute;\n    top: ${offset}px;\n    left: 0;\n    height: 100%;\n    width: ${theme.gridUnit * 8}px;\n    padding-top: ${theme.gridUnit * 2}px;\n    display: none;\n    text-align: center;\n    &.open {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: ${theme.gridUnit * 2}px;\n    }\n    svg {\n      cursor: pointer;\n    }\n  `;}}\n`;\nconst StyledCollapseIcon = styled(Icons.Collapse)`\n  ${(_ref5) => {let { theme } = _ref5;return `\n    color: ${theme.colors.primary.base};\n    margin-bottom: ${theme.gridUnit * 3}px;\n  `;}}\n`;\nconst StyledFilterIcon = styled(Icons.Filter)`\n  color: ${(_ref6) => {let { theme } = _ref6;return theme.colors.grayscale.base;}};\n`;\nconst StyledTabs = styled(AntdTabs)`\n  & .ant-tabs-nav-list {\n    width: 100%;\n  }\n  & .ant-tabs-tab {\n    display: flex;\n    justify-content: center;\n    margin: 0;\n    flex: 1;\n  }\n\n  & > .ant-tabs-nav .ant-tabs-nav-operations {\n    display: none;\n  }\n`;\nconst FilterBarEmptyStateContainer = styled.div`\n  margin-top: ${(_ref7) => {let { theme } = _ref7;return theme.gridUnit * 8;}}px;\n`;\nconst FilterControlsWrapper = styled.div`\n  padding: ${(_ref8) => {let { theme } = _ref8;return theme.gridUnit * 4;}}px;\n  // 108px padding to make room for buttons with position: absolute\n  padding-bottom: ${(_ref9) => {let { theme } = _ref9;return theme.gridUnit * 27;}}px;\n`;\nexport const FilterBarScrollContext = /*#__PURE__*/createContext(false);\nconst VerticalFilterBar = (_ref10) => {let { actions, canEdit, dataMaskSelected, filtersOpen, filterValues, height, isDisabled, isInitialized, offset, onSelectionChange, toggleFiltersBar, width } = _ref10;\n  const [editFilterSetId, setEditFilterSetId] = useState(null);\n  const filterSets = useFilterSets();\n  const filterSetFilterValues = Object.values(filterSets);\n  const [tab, setTab] = useState(TabIds.AllFilters);\n  const nativeFilterValues = filterValues.filter(isNativeFilter);\n  const [isScrolling, setIsScrolling] = useState(false);\n  const timeout = useRef();\n  const openFiltersBar = useCallback(() => toggleFiltersBar(true), [toggleFiltersBar]);\n  const onScroll = useMemo(() => throttle(() => {\n    clearTimeout(timeout.current);\n    setIsScrolling(true);\n    timeout.current = setTimeout(() => {\n      setIsScrolling(false);\n    }, 300);\n  }, 200), []);\n  useEffect(() => {\n    document.onscroll = onScroll;\n    return () => {\n      document.onscroll = null;\n    };\n  }, [onScroll]);\n  const tabPaneStyle = useMemo(() => ({ overflow: 'auto', height, overscrollBehavior: 'contain' }), [height]);\n  const numberOfFilters = nativeFilterValues.length;\n  const filterControls = useMemo(() => filterValues.length === 0 ? ___EmotionJSX(FilterBarEmptyStateContainer, null,\n  ___EmotionJSX(EmptyStateSmall, { title: t('No global filters are currently added'), image: \"filter.svg\", description: canEdit &&\n    t('Click on \"+Add/Edit Filters\" button to create new dashboard filters') })) :\n  ___EmotionJSX(FilterControlsWrapper, null,\n  ___EmotionJSX(FilterControls, { dataMaskSelected: dataMaskSelected, onFilterSelectionChange: onSelectionChange })),\n  [canEdit, dataMaskSelected, filterValues.length, onSelectionChange]);\n  const filterSetsTabs = useMemo(() => ___EmotionJSX(StyledTabs, { centered: true, onChange: setTab, defaultActiveKey: TabIds.AllFilters, activeKey: editFilterSetId ? TabIds.AllFilters : undefined },\n  ___EmotionJSX(AntdTabs.TabPane, { tab: t('All filters (%(filterCount)d)', {\n      filterCount: numberOfFilters }),\n    key: TabIds.AllFilters, css: tabPaneStyle },\n  editFilterSetId && ___EmotionJSX(EditSection, { dataMaskSelected: dataMaskSelected, disabled: !isDisabled, onCancel: () => setEditFilterSetId(null), filterSetId: editFilterSetId }),\n  filterControls),\n\n  ___EmotionJSX(AntdTabs.TabPane, { disabled: !!editFilterSetId, tab: t('Filter sets (%(filterSetCount)d)', {\n      filterSetCount: filterSetFilterValues.length }),\n    key: TabIds.FilterSets, css: tabPaneStyle },\n  ___EmotionJSX(FilterSets, { onEditFilterSet: setEditFilterSetId, disabled: !isDisabled, dataMaskSelected: dataMaskSelected, tab: tab, onFilterSelectionChange: onSelectionChange }))),\n\n  [\n  dataMaskSelected,\n  editFilterSetId,\n  filterControls,\n  filterSetFilterValues.length,\n  isDisabled,\n  numberOfFilters,\n  onSelectionChange,\n  tab,\n  tabPaneStyle]);\n\n  const crossFilters = useMemo(() => isFeatureEnabled(FeatureFlag.DASHBOARD_CROSS_FILTERS) ? ___EmotionJSX(CrossFiltersVertical, null) : null, []);\n  const actionsElement = useMemo(() => isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS) ? actions : null, [actions]);\n  // Filter sets depend on native filters\n  const filterSetEnabled = isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS_SET) &&\n  isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS);\n  return ___EmotionJSX(FilterBarScrollContext.Provider, { value: isScrolling },\n  ___EmotionJSX(BarWrapper, _extends({}, getFilterBarTestId(), { className: cx({ open: filtersOpen }), width: width }),\n  ___EmotionJSX(CollapsedBar, _extends({}, getFilterBarTestId('collapsable'), { className: cx({ open: !filtersOpen }), onClick: openFiltersBar, offset: offset }),\n  ___EmotionJSX(StyledCollapseIcon, _extends({}, getFilterBarTestId('expand-button'), { iconSize: \"l\" })),\n  ___EmotionJSX(StyledFilterIcon, _extends({}, getFilterBarTestId('filter-icon'), { iconSize: \"l\" }))),\n\n  ___EmotionJSX(Bar, { className: cx({ open: filtersOpen }), width: width },\n  ___EmotionJSX(Header, { toggleFiltersBar: toggleFiltersBar }),\n  !isInitialized ? ___EmotionJSX(\"div\", { css: /*#__PURE__*/_css({ height }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:VerticalFilterBar;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96aGFvcnVpL3NyYy9pbmN1YmF0b3Itc3VwZXJzZXQtaW50ZXJuYWwvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2Rhc2hib2FyZC9jb21wb25lbnRzL25hdGl2ZUZpbHRlcnMvRmlsdGVyQmFyL1ZlcnRpY2FsLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0TGtDIiwiZmlsZSI6Ii9Vc2Vycy96aGFvcnVpL3NyYy9pbmN1YmF0b3Itc3VwZXJzZXQtaW50ZXJuYWwvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2Rhc2hib2FyZC9jb21wb25lbnRzL25hdGl2ZUZpbHRlcnMvRmlsdGVyQmFyL1ZlcnRpY2FsLnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnbG9kYXNoL3Rocm90dGxlJztcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlUmVmLCBjcmVhdGVDb250ZXh0LCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IEZlYXR1cmVGbGFnLCBpc0ZlYXR1cmVFbmFibGVkLCBpc05hdGl2ZUZpbHRlciwgc3R5bGVkLCB0LCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCBJY29ucyBmcm9tICdzcmMvY29tcG9uZW50cy9JY29ucyc7XG5pbXBvcnQgeyBBbnRkVGFicyB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCBMb2FkaW5nIGZyb20gJ3NyYy9jb21wb25lbnRzL0xvYWRpbmcnO1xuaW1wb3J0IHsgRW1wdHlTdGF0ZVNtYWxsIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvRW1wdHlTdGF0ZSc7XG5pbXBvcnQgeyBnZXRGaWx0ZXJCYXJUZXN0SWQgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IFRhYklkcyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IEZpbHRlclNldHMgZnJvbSAnLi9GaWx0ZXJTZXRzJztcbmltcG9ydCB7IHVzZUZpbHRlclNldHMgfSBmcm9tICcuL3N0YXRlJztcbmltcG9ydCBFZGl0U2VjdGlvbiBmcm9tICcuL0ZpbHRlclNldHMvRWRpdFNlY3Rpb24nO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XG5pbXBvcnQgRmlsdGVyQ29udHJvbHMgZnJvbSAnLi9GaWx0ZXJDb250cm9scy9GaWx0ZXJDb250cm9scyc7XG5pbXBvcnQgQ3Jvc3NGaWx0ZXJzVmVydGljYWwgZnJvbSAnLi9Dcm9zc0ZpbHRlcnMvVmVydGljYWwnO1xuY29uc3QgQmFyV3JhcHBlciA9IHN0eWxlZC5kaXYgYFxuICB3aWR0aDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdCAqIDh9cHg7XG5cbiAgJiAuYW50LXRhYnMtdG9wID4gLmFudC10YWJzLW5hdiB7XG4gICAgbWFyZ2luOiAwO1xuICB9XG4gICYub3BlbiB7XG4gICAgd2lkdGg6ICR7KHsgd2lkdGggfSkgPT4gd2lkdGh9cHg7IC8vIGFyYml0cmFyeS4uLlxuICB9XG5gO1xuY29uc3QgQmFyID0gc3R5bGVkLmRpdiBgXG4gICR7KHsgdGhlbWUsIHdpZHRoIH0pID0+IGBcbiAgICAmIC5hbnQtdHlwb2dyYXBoeS1lZGl0LWNvbnRlbnQge1xuICAgICAgbGVmdDogMDtcbiAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZmxleC1ncm93OiAxO1xuICAgIHdpZHRoOiAke3dpZHRofXB4O1xuICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDV9O1xuICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgICBtaW4taGVpZ2h0OiAxMDAlO1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgJi5vcGVuIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICBgfVxuYDtcbmNvbnN0IENvbGxhcHNlZEJhciA9IHN0eWxlZC5kaXYgYFxuICAkeyh7IHRoZW1lLCBvZmZzZXQgfSkgPT4gYFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6ICR7b2Zmc2V0fXB4O1xuICAgIGxlZnQ6IDA7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHdpZHRoOiAke3RoZW1lLmdyaWRVbml0ICogOH1weDtcbiAgICBwYWRkaW5nLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHg7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgJi5vcGVuIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXQgKiAyfXB4O1xuICAgIH1cbiAgICBzdmcge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgYH1cbmA7XG5jb25zdCBTdHlsZWRDb2xsYXBzZUljb24gPSBzdHlsZWQoSWNvbnMuQ29sbGFwc2UpIGBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkuYmFzZX07XG4gICAgbWFyZ2luLWJvdHRvbTogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gIGB9XG5gO1xuY29uc3QgU3R5bGVkRmlsdGVySWNvbiA9IHN0eWxlZChJY29ucy5GaWx0ZXIpIGBcbiAgY29sb3I6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfTtcbmA7XG5jb25zdCBTdHlsZWRUYWJzID0gc3R5bGVkKEFudGRUYWJzKSBgXG4gICYgLmFudC10YWJzLW5hdi1saXN0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuICAmIC5hbnQtdGFicy10YWIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgbWFyZ2luOiAwO1xuICAgIGZsZXg6IDE7XG4gIH1cblxuICAmID4gLmFudC10YWJzLW5hdiAuYW50LXRhYnMtbmF2LW9wZXJhdGlvbnMge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbmA7XG5jb25zdCBGaWx0ZXJCYXJFbXB0eVN0YXRlQ29udGFpbmVyID0gc3R5bGVkLmRpdiBgXG4gIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA4fXB4O1xuYDtcbmNvbnN0IEZpbHRlckNvbnRyb2xzV3JhcHBlciA9IHN0eWxlZC5kaXYgYFxuICBwYWRkaW5nOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgLy8gMTA4cHggcGFkZGluZyB0byBtYWtlIHJvb20gZm9yIGJ1dHRvbnMgd2l0aCBwb3NpdGlvbjogYWJzb2x1dGVcbiAgcGFkZGluZy1ib3R0b206ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiAyN31weDtcbmA7XG5leHBvcnQgY29uc3QgRmlsdGVyQmFyU2Nyb2xsQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoZmFsc2UpO1xuY29uc3QgVmVydGljYWxGaWx0ZXJCYXIgPSAoeyBhY3Rpb25zLCBjYW5FZGl0LCBkYXRhTWFza1NlbGVjdGVkLCBmaWx0ZXJzT3BlbiwgZmlsdGVyVmFsdWVzLCBoZWlnaHQsIGlzRGlzYWJsZWQsIGlzSW5pdGlhbGl6ZWQsIG9mZnNldCwgb25TZWxlY3Rpb25DaGFuZ2UsIHRvZ2dsZUZpbHRlcnNCYXIsIHdpZHRoLCB9KSA9PiB7XG4gICAgY29uc3QgW2VkaXRGaWx0ZXJTZXRJZCwgc2V0RWRpdEZpbHRlclNldElkXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IGZpbHRlclNldHMgPSB1c2VGaWx0ZXJTZXRzKCk7XG4gICAgY29uc3QgZmlsdGVyU2V0RmlsdGVyVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhmaWx0ZXJTZXRzKTtcbiAgICBjb25zdCBbdGFiLCBzZXRUYWJdID0gdXNlU3RhdGUoVGFiSWRzLkFsbEZpbHRlcnMpO1xuICAgIGNvbnN0IG5hdGl2ZUZpbHRlclZhbHVlcyA9IGZpbHRlclZhbHVlcy5maWx0ZXIoaXNOYXRpdmVGaWx0ZXIpO1xuICAgIGNvbnN0IFtpc1Njcm9sbGluZywgc2V0SXNTY3JvbGxpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB1c2VSZWYoKTtcbiAgICBjb25zdCBvcGVuRmlsdGVyc0JhciA9IHVzZUNhbGxiYWNrKCgpID0+IHRvZ2dsZUZpbHRlcnNCYXIodHJ1ZSksIFt0b2dnbGVGaWx0ZXJzQmFyXSk7XG4gICAgY29uc3Qgb25TY3JvbGwgPSB1c2VNZW1vKCgpID0+IHRocm90dGxlKCgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgICAgIHNldElzU2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldElzU2Nyb2xsaW5nKGZhbHNlKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICB9LCAyMDApLCBbXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQub25zY3JvbGwgPSBvblNjcm9sbDtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50Lm9uc2Nyb2xsID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICB9LCBbb25TY3JvbGxdKTtcbiAgICBjb25zdCB0YWJQYW5lU3R5bGUgPSB1c2VNZW1vKCgpID0+ICh7IG92ZXJmbG93OiAnYXV0bycsIGhlaWdodCwgb3ZlcnNjcm9sbEJlaGF2aW9yOiAnY29udGFpbicgfSksIFtoZWlnaHRdKTtcbiAgICBjb25zdCBudW1iZXJPZkZpbHRlcnMgPSBuYXRpdmVGaWx0ZXJWYWx1ZXMubGVuZ3RoO1xuICAgIGNvbnN0IGZpbHRlckNvbnRyb2xzID0gdXNlTWVtbygoKSA9PiBmaWx0ZXJWYWx1ZXMubGVuZ3RoID09PSAwID8gKDxGaWx0ZXJCYXJFbXB0eVN0YXRlQ29udGFpbmVyPlxuICAgICAgICAgIDxFbXB0eVN0YXRlU21hbGwgdGl0bGU9e3QoJ05vIGdsb2JhbCBmaWx0ZXJzIGFyZSBjdXJyZW50bHkgYWRkZWQnKX0gaW1hZ2U9XCJmaWx0ZXIuc3ZnXCIgZGVzY3JpcHRpb249e2NhbkVkaXQgJiZcbiAgICAgICAgICAgIHQoJ0NsaWNrIG9uIFwiK0FkZC9FZGl0IEZpbHRlcnNcIiBidXR0b24gdG8gY3JlYXRlIG5ldyBkYXNoYm9hcmQgZmlsdGVycycpfS8+XG4gICAgICAgIDwvRmlsdGVyQmFyRW1wdHlTdGF0ZUNvbnRhaW5lcj4pIDogKDxGaWx0ZXJDb250cm9sc1dyYXBwZXI+XG4gICAgICAgICAgPEZpbHRlckNvbnRyb2xzIGRhdGFNYXNrU2VsZWN0ZWQ9e2RhdGFNYXNrU2VsZWN0ZWR9IG9uRmlsdGVyU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX0vPlxuICAgICAgICA8L0ZpbHRlckNvbnRyb2xzV3JhcHBlcj4pLCBbY2FuRWRpdCwgZGF0YU1hc2tTZWxlY3RlZCwgZmlsdGVyVmFsdWVzLmxlbmd0aCwgb25TZWxlY3Rpb25DaGFuZ2VdKTtcbiAgICBjb25zdCBmaWx0ZXJTZXRzVGFicyA9IHVzZU1lbW8oKCkgPT4gKDxTdHlsZWRUYWJzIGNlbnRlcmVkIG9uQ2hhbmdlPXtzZXRUYWJ9IGRlZmF1bHRBY3RpdmVLZXk9e1RhYklkcy5BbGxGaWx0ZXJzfSBhY3RpdmVLZXk9e2VkaXRGaWx0ZXJTZXRJZCA/IFRhYklkcy5BbGxGaWx0ZXJzIDogdW5kZWZpbmVkfT5cbiAgICAgICAgPEFudGRUYWJzLlRhYlBhbmUgdGFiPXt0KCdBbGwgZmlsdGVycyAoJShmaWx0ZXJDb3VudClkKScsIHtcbiAgICAgICAgICAgIGZpbHRlckNvdW50OiBudW1iZXJPZkZpbHRlcnMsXG4gICAgICAgIH0pfSBrZXk9e1RhYklkcy5BbGxGaWx0ZXJzfSBjc3M9e3RhYlBhbmVTdHlsZX0+XG4gICAgICAgICAge2VkaXRGaWx0ZXJTZXRJZCAmJiAoPEVkaXRTZWN0aW9uIGRhdGFNYXNrU2VsZWN0ZWQ9e2RhdGFNYXNrU2VsZWN0ZWR9IGRpc2FibGVkPXshaXNEaXNhYmxlZH0gb25DYW5jZWw9eygpID0+IHNldEVkaXRGaWx0ZXJTZXRJZChudWxsKX0gZmlsdGVyU2V0SWQ9e2VkaXRGaWx0ZXJTZXRJZH0vPil9XG4gICAgICAgICAge2ZpbHRlckNvbnRyb2xzfVxuICAgICAgICA8L0FudGRUYWJzLlRhYlBhbmU+XG4gICAgICAgIDxBbnRkVGFicy5UYWJQYW5lIGRpc2FibGVkPXshIWVkaXRGaWx0ZXJTZXRJZH0gdGFiPXt0KCdGaWx0ZXIgc2V0cyAoJShmaWx0ZXJTZXRDb3VudClkKScsIHtcbiAgICAgICAgICAgIGZpbHRlclNldENvdW50OiBmaWx0ZXJTZXRGaWx0ZXJWYWx1ZXMubGVuZ3RoLFxuICAgICAgICB9KX0ga2V5PXtUYWJJZHMuRmlsdGVyU2V0c30gY3NzPXt0YWJQYW5lU3R5bGV9PlxuICAgICAgICAgIDxGaWx0ZXJTZXRzIG9uRWRpdEZpbHRlclNldD17c2V0RWRpdEZpbHRlclNldElkfSBkaXNhYmxlZD17IWlzRGlzYWJsZWR9IGRhdGFNYXNrU2VsZWN0ZWQ9e2RhdGFNYXNrU2VsZWN0ZWR9IHRhYj17dGFifSBvbkZpbHRlclNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9Lz5cbiAgICAgICAgPC9BbnRkVGFicy5UYWJQYW5lPlxuICAgICAgPC9TdHlsZWRUYWJzPiksIFtcbiAgICAgICAgZGF0YU1hc2tTZWxlY3RlZCxcbiAgICAgICAgZWRpdEZpbHRlclNldElkLFxuICAgICAgICBmaWx0ZXJDb250cm9scyxcbiAgICAgICAgZmlsdGVyU2V0RmlsdGVyVmFsdWVzLmxlbmd0aCxcbiAgICAgICAgaXNEaXNhYmxlZCxcbiAgICAgICAgbnVtYmVyT2ZGaWx0ZXJzLFxuICAgICAgICBvblNlbGVjdGlvbkNoYW5nZSxcbiAgICAgICAgdGFiLFxuICAgICAgICB0YWJQYW5lU3R5bGUsXG4gICAgXSk7XG4gICAgY29uc3QgY3Jvc3NGaWx0ZXJzID0gdXNlTWVtbygoKSA9PiBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkRBU0hCT0FSRF9DUk9TU19GSUxURVJTKSA/ICg8Q3Jvc3NGaWx0ZXJzVmVydGljYWwgLz4pIDogbnVsbCwgW10pO1xuICAgIGNvbnN0IGFjdGlvbnNFbGVtZW50ID0gdXNlTWVtbygoKSA9PiBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkRBU0hCT0FSRF9OQVRJVkVfRklMVEVSUykgPyBhY3Rpb25zIDogbnVsbCwgW2FjdGlvbnNdKTtcbiAgICAvLyBGaWx0ZXIgc2V0cyBkZXBlbmQgb24gbmF0aXZlIGZpbHRlcnNcbiAgICBjb25zdCBmaWx0ZXJTZXRFbmFibGVkID0gaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5EQVNIQk9BUkRfTkFUSVZFX0ZJTFRFUlNfU0VUKSAmJlxuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkRBU0hCT0FSRF9OQVRJVkVfRklMVEVSUyk7XG4gICAgcmV0dXJuICg8RmlsdGVyQmFyU2Nyb2xsQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17aXNTY3JvbGxpbmd9PlxuICAgICAgPEJhcldyYXBwZXIgey4uLmdldEZpbHRlckJhclRlc3RJZCgpfSBjbGFzc05hbWU9e2N4KHsgb3BlbjogZmlsdGVyc09wZW4gfSl9IHdpZHRoPXt3aWR0aH0+XG4gICAgICAgIDxDb2xsYXBzZWRCYXIgey4uLmdldEZpbHRlckJhclRlc3RJZCgnY29sbGFwc2FibGUnKX0gY2xhc3NOYW1lPXtjeCh7IG9wZW46ICFmaWx0ZXJzT3BlbiB9KX0gb25DbGljaz17b3BlbkZpbHRlcnNCYXJ9IG9mZnNldD17b2Zmc2V0fT5cbiAgICAgICAgICA8U3R5bGVkQ29sbGFwc2VJY29uIHsuLi5nZXRGaWx0ZXJCYXJUZXN0SWQoJ2V4cGFuZC1idXR0b24nKX0gaWNvblNpemU9XCJsXCIvPlxuICAgICAgICAgIDxTdHlsZWRGaWx0ZXJJY29uIHsuLi5nZXRGaWx0ZXJCYXJUZXN0SWQoJ2ZpbHRlci1pY29uJyl9IGljb25TaXplPVwibFwiLz5cbiAgICAgICAgPC9Db2xsYXBzZWRCYXI+XG4gICAgICAgIDxCYXIgY2xhc3NOYW1lPXtjeCh7IG9wZW46IGZpbHRlcnNPcGVuIH0pfSB3aWR0aD17d2lkdGh9PlxuICAgICAgICAgIDxIZWFkZXIgdG9nZ2xlRmlsdGVyc0Jhcj17dG9nZ2xlRmlsdGVyc0Jhcn0vPlxuICAgICAgICAgIHshaXNJbml0aWFsaXplZCA/ICg8ZGl2IGNzcz17eyBoZWlnaHQgfX0+XG4gICAgICAgICAgICAgIDxMb2FkaW5nIC8+XG4gICAgICAgICAgICA8L2Rpdj4pIDogZmlsdGVyU2V0RW5hYmxlZCA/ICg8PlxuICAgICAgICAgICAgICB7Y3Jvc3NGaWx0ZXJzfVxuICAgICAgICAgICAgICB7ZmlsdGVyU2V0c1RhYnN9XG4gICAgICAgICAgICA8Lz4pIDogKDxkaXYgY3NzPXt0YWJQYW5lU3R5bGV9IG9uU2Nyb2xsPXtvblNjcm9sbH0+XG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAge2Nyb3NzRmlsdGVyc31cbiAgICAgICAgICAgICAgICB7aXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5EQVNIQk9BUkRfTkFUSVZFX0ZJTFRFUlMpICYmXG4gICAgICAgICAgICAgICAgZmlsdGVyQ29udHJvbHN9XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICB7YWN0aW9uc0VsZW1lbnR9XG4gICAgICAgIDwvQmFyPlxuICAgICAgPC9CYXJXcmFwcGVyPlxuICAgIDwvRmlsdGVyQmFyU2Nyb2xsQ29udGV4dC5Qcm92aWRlcj4pO1xufTtcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oVmVydGljYWxGaWx0ZXJCYXIpO1xuIl19 */\") },\n  ___EmotionJSX(Loading, null)) :\n  filterSetEnabled ? ___EmotionJSX(React.Fragment, null,\n  crossFilters,\n  filterSetsTabs) :\n  ___EmotionJSX(\"div\", { css: tabPaneStyle, onScroll: onScroll },\n  ___EmotionJSX(React.Fragment, null,\n  crossFilters,\n  isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS) &&\n  filterControls)),\n\n\n  actionsElement)));\n\n\n\n};\nexport default /*#__PURE__*/React.memo(VerticalFilterBar);","map":{"version":3,"mappings":"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","names":["throttle","React","useEffect","useState","useCallback","useMemo","useRef","createContext","cx","FeatureFlag","isFeatureEnabled","isNativeFilter","styled","t","Icons","AntdTabs","Loading","EmptyStateSmall","getFilterBarTestId","TabIds","FilterSets","useFilterSets","EditSection","Header","FilterControls","CrossFiltersVertical","BarWrapper","div","theme","gridUnit","width","Bar","colors","grayscale","light5","light2","CollapsedBar","offset","StyledCollapseIcon","Collapse","primary","base","StyledFilterIcon","Filter","StyledTabs","FilterBarEmptyStateContainer","FilterControlsWrapper","FilterBarScrollContext","VerticalFilterBar","actions","canEdit","dataMaskSelected","filtersOpen","filterValues","height","isDisabled","isInitialized","onSelectionChange","toggleFiltersBar","editFilterSetId","setEditFilterSetId","filterSets","filterSetFilterValues","Object","values","tab","setTab","AllFilters","nativeFilterValues","filter","isScrolling","setIsScrolling","timeout","openFiltersBar","onScroll","clearTimeout","current","setTimeout","document","onscroll","tabPaneStyle","overflow","overscrollBehavior","numberOfFilters","length","filterControls","filterSetsTabs","undefined","filterCount","filterSetCount","crossFilters","DASHBOARD_CROSS_FILTERS","actionsElement","DASHBOARD_NATIVE_FILTERS","filterSetEnabled","DASHBOARD_NATIVE_FILTERS_SET","open","memo"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Vertical.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable no-param-reassign */\nimport throttle from 'lodash/throttle';\nimport React, {\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n  useRef,\n  createContext,\n} from 'react';\nimport cx from 'classnames';\nimport {\n  FeatureFlag,\n  HandlerFunction,\n  isFeatureEnabled,\n  isNativeFilter,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { AntdTabs } from 'src/components';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateSmall } from 'src/components/EmptyState';\nimport { getFilterBarTestId } from './utils';\nimport { TabIds, VerticalBarProps } from './types';\nimport FilterSets from './FilterSets';\nimport { useFilterSets } from './state';\nimport EditSection from './FilterSets/EditSection';\nimport Header from './Header';\nimport FilterControls from './FilterControls/FilterControls';\nimport CrossFiltersVertical from './CrossFilters/Vertical';\n\nconst BarWrapper = styled.div<{ width: number }>`\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n\n  & .ant-tabs-top > .ant-tabs-nav {\n    margin: 0;\n  }\n  &.open {\n    width: ${({ width }) => width}px; // arbitrary...\n  }\n`;\n\nconst Bar = styled.div<{ width: number }>`\n  ${({ theme, width }) => `\n    & .ant-typography-edit-content {\n      left: 0;\n      margin-top: 0;\n      width: 100%;\n    }\n    position: absolute;\n    top: 0;\n    left: 0;\n    flex-direction: column;\n    flex-grow: 1;\n    width: ${width}px;\n    background: ${theme.colors.grayscale.light5};\n    border-right: 1px solid ${theme.colors.grayscale.light2};\n    border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    min-height: 100%;\n    display: none;\n    &.open {\n      display: flex;\n    }\n  `}\n`;\n\nconst CollapsedBar = styled.div<{ offset: number }>`\n  ${({ theme, offset }) => `\n    position: absolute;\n    top: ${offset}px;\n    left: 0;\n    height: 100%;\n    width: ${theme.gridUnit * 8}px;\n    padding-top: ${theme.gridUnit * 2}px;\n    display: none;\n    text-align: center;\n    &.open {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: ${theme.gridUnit * 2}px;\n    }\n    svg {\n      cursor: pointer;\n    }\n  `}\n`;\n\nconst StyledCollapseIcon = styled(Icons.Collapse)`\n  ${({ theme }) => `\n    color: ${theme.colors.primary.base};\n    margin-bottom: ${theme.gridUnit * 3}px;\n  `}\n`;\n\nconst StyledFilterIcon = styled(Icons.Filter)`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst StyledTabs = styled(AntdTabs)`\n  & .ant-tabs-nav-list {\n    width: 100%;\n  }\n  & .ant-tabs-tab {\n    display: flex;\n    justify-content: center;\n    margin: 0;\n    flex: 1;\n  }\n\n  & > .ant-tabs-nav .ant-tabs-nav-operations {\n    display: none;\n  }\n`;\n\nconst FilterBarEmptyStateContainer = styled.div`\n  margin-top: ${({ theme }) => theme.gridUnit * 8}px;\n`;\n\nconst FilterControlsWrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px;\n  // 108px padding to make room for buttons with position: absolute\n  padding-bottom: ${({ theme }) => theme.gridUnit * 27}px;\n`;\n\nexport const FilterBarScrollContext = createContext(false);\nconst VerticalFilterBar: React.FC<VerticalBarProps> = ({\n  actions,\n  canEdit,\n  dataMaskSelected,\n  filtersOpen,\n  filterValues,\n  height,\n  isDisabled,\n  isInitialized,\n  offset,\n  onSelectionChange,\n  toggleFiltersBar,\n  width,\n}) => {\n  const [editFilterSetId, setEditFilterSetId] = useState<number | null>(null);\n  const filterSets = useFilterSets();\n  const filterSetFilterValues = Object.values(filterSets);\n  const [tab, setTab] = useState(TabIds.AllFilters);\n  const nativeFilterValues = filterValues.filter(isNativeFilter);\n  const [isScrolling, setIsScrolling] = useState(false);\n  const timeout = useRef<any>();\n\n  const openFiltersBar = useCallback(\n    () => toggleFiltersBar(true),\n    [toggleFiltersBar],\n  );\n\n  const onScroll = useMemo(\n    () =>\n      throttle(() => {\n        clearTimeout(timeout.current);\n        setIsScrolling(true);\n        timeout.current = setTimeout(() => {\n          setIsScrolling(false);\n        }, 300);\n      }, 200),\n    [],\n  );\n\n  useEffect(() => {\n    document.onscroll = onScroll;\n    return () => {\n      document.onscroll = null;\n    };\n  }, [onScroll]);\n\n  const tabPaneStyle = useMemo(\n    () => ({ overflow: 'auto', height, overscrollBehavior: 'contain' }),\n    [height],\n  );\n\n  const numberOfFilters = nativeFilterValues.length;\n\n  const filterControls = useMemo(\n    () =>\n      filterValues.length === 0 ? (\n        <FilterBarEmptyStateContainer>\n          <EmptyStateSmall\n            title={t('No global filters are currently added')}\n            image=\"filter.svg\"\n            description={\n              canEdit &&\n              t(\n                'Click on \"+Add/Edit Filters\" button to create new dashboard filters',\n              )\n            }\n          />\n        </FilterBarEmptyStateContainer>\n      ) : (\n        <FilterControlsWrapper>\n          <FilterControls\n            dataMaskSelected={dataMaskSelected}\n            onFilterSelectionChange={onSelectionChange}\n          />\n        </FilterControlsWrapper>\n      ),\n    [canEdit, dataMaskSelected, filterValues.length, onSelectionChange],\n  );\n\n  const filterSetsTabs = useMemo(\n    () => (\n      <StyledTabs\n        centered\n        onChange={setTab as HandlerFunction}\n        defaultActiveKey={TabIds.AllFilters}\n        activeKey={editFilterSetId ? TabIds.AllFilters : undefined}\n      >\n        <AntdTabs.TabPane\n          tab={t('All filters (%(filterCount)d)', {\n            filterCount: numberOfFilters,\n          })}\n          key={TabIds.AllFilters}\n          css={tabPaneStyle}\n        >\n          {editFilterSetId && (\n            <EditSection\n              dataMaskSelected={dataMaskSelected}\n              disabled={!isDisabled}\n              onCancel={() => setEditFilterSetId(null)}\n              filterSetId={editFilterSetId}\n            />\n          )}\n          {filterControls}\n        </AntdTabs.TabPane>\n        <AntdTabs.TabPane\n          disabled={!!editFilterSetId}\n          tab={t('Filter sets (%(filterSetCount)d)', {\n            filterSetCount: filterSetFilterValues.length,\n          })}\n          key={TabIds.FilterSets}\n          css={tabPaneStyle}\n        >\n          <FilterSets\n            onEditFilterSet={setEditFilterSetId}\n            disabled={!isDisabled}\n            dataMaskSelected={dataMaskSelected}\n            tab={tab}\n            onFilterSelectionChange={onSelectionChange}\n          />\n        </AntdTabs.TabPane>\n      </StyledTabs>\n    ),\n    [\n      dataMaskSelected,\n      editFilterSetId,\n      filterControls,\n      filterSetFilterValues.length,\n      isDisabled,\n      numberOfFilters,\n      onSelectionChange,\n      tab,\n      tabPaneStyle,\n    ],\n  );\n\n  const crossFilters = useMemo(\n    () =>\n      isFeatureEnabled(FeatureFlag.DASHBOARD_CROSS_FILTERS) ? (\n        <CrossFiltersVertical />\n      ) : null,\n    [],\n  );\n\n  const actionsElement = useMemo(\n    () =>\n      isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS) ? actions : null,\n    [actions],\n  );\n\n  // Filter sets depend on native filters\n  const filterSetEnabled =\n    isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS_SET) &&\n    isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS);\n\n  return (\n    <FilterBarScrollContext.Provider value={isScrolling}>\n      <BarWrapper\n        {...getFilterBarTestId()}\n        className={cx({ open: filtersOpen })}\n        width={width}\n      >\n        <CollapsedBar\n          {...getFilterBarTestId('collapsable')}\n          className={cx({ open: !filtersOpen })}\n          onClick={openFiltersBar}\n          offset={offset}\n        >\n          <StyledCollapseIcon\n            {...getFilterBarTestId('expand-button')}\n            iconSize=\"l\"\n          />\n          <StyledFilterIcon\n            {...getFilterBarTestId('filter-icon')}\n            iconSize=\"l\"\n          />\n        </CollapsedBar>\n        <Bar className={cx({ open: filtersOpen })} width={width}>\n          <Header toggleFiltersBar={toggleFiltersBar} />\n          {!isInitialized ? (\n            <div css={{ height }}>\n              <Loading />\n            </div>\n          ) : filterSetEnabled ? (\n            <>\n              {crossFilters}\n              {filterSetsTabs}\n            </>\n          ) : (\n            <div css={tabPaneStyle} onScroll={onScroll}>\n              <>\n                {crossFilters}\n                {isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS) &&\n                  filterControls}\n              </>\n            </div>\n          )}\n          {actionsElement}\n        </Bar>\n      </BarWrapper>\n    </FilterBarScrollContext.Provider>\n  );\n};\nexport default React.memo(VerticalFilterBar);\n"]},"metadata":{},"sourceType":"module"}