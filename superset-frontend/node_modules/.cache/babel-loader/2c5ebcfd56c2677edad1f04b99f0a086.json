{"ast":null,"code":"import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\"; /* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { formatNumber, styled } from '@superset-ui/core';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst StyledLegend = styled.div`\n  ${(_ref) => {let { theme } = _ref;return `\n    font-size: ${theme.typography.sizes.s}px;\n    position: absolute;\n    background: ${theme.colors.grayscale.light5};\n    box-shadow: 0 0 ${theme.gridUnit}px ${theme.colors.grayscale.light2};\n    margin: ${theme.gridUnit * 6}px;\n    padding: ${theme.gridUnit * 3}px ${theme.gridUnit * 5}px;\n    outline: none;\n    overflow-y: scroll;\n    max-height: 200px;\n\n    & ul {\n      list-style: none;\n      padding-left: 0;\n      margin: 0;\n\n      & li a {\n        color: ${theme.colors.grayscale.base};\n        text-decoration: none;\n\n        & span {\n          margin-right: ${theme.gridUnit * 3}px;\n        }\n      }\n    }\n  `;}}\n`;\n\nconst categoryDelimiter = ' - ';\n\nconst propTypes = {\n  categories: PropTypes.object,\n  forceCategorical: PropTypes.bool,\n  format: PropTypes.string,\n  position: PropTypes.oneOf([null, 'tl', 'tr', 'bl', 'br']),\n  showSingleCategory: PropTypes.func,\n  toggleCategory: PropTypes.func };\n\n\nconst defaultProps = {\n  categories: {},\n  forceCategorical: false,\n  format: null,\n  position: 'tr',\n  showSingleCategory: () => {},\n  toggleCategory: () => {} };\n\n\nexport default class Legend extends React.PureComponent {\n  format(value) {\n    if (!this.props.format || this.props.forceCategorical) {\n      return value;\n    }\n\n    const numValue = parseFloat(value);\n\n    return formatNumber(this.props.format, numValue);\n  }\n\n  formatCategoryLabel(k) {\n    if (!this.props.format) {\n      return k;\n    }\n\n    if (_includesInstanceProperty(k).call(k, categoryDelimiter)) {\n      const values = k.split(categoryDelimiter);\n\n      return (\n        this.format(values[0]) + categoryDelimiter + this.format(values[1]));\n\n    }\n\n    return this.format(k);\n  }\n\n  render() {\n    if (\n    Object.keys(this.props.categories).length === 0 ||\n    this.props.position === null)\n    {\n      return null;\n    }\n\n    const categories = Object.entries(this.props.categories).map((_ref2) => {let [k, v] = _ref2;\n      const style = { color: `rgba(${v.color.join(', ')})` };\n      const icon = v.enabled ? '\\u25FC' : '\\u25FB';\n\n      return (\n        ___EmotionJSX(\"li\", { key: k },\n        ___EmotionJSX(\"a\", {\n          href: \"#\",\n          onClick: () => this.props.toggleCategory(k),\n          onDoubleClick: () => this.props.showSingleCategory(k) },\n\n        ___EmotionJSX(\"span\", { style: style }, icon), \" \", this.formatCategoryLabel(k))));\n\n\n\n    });\n\n    const vertical = this.props.position.charAt(0) === 't' ? 'top' : 'bottom';\n    const horizontal = this.props.position.charAt(1) === 'r' ? 'right' : 'left';\n    const style = {\n      position: 'absolute',\n      [vertical]: '0px',\n      [horizontal]: '10px' };\n\n\n    return (\n      ___EmotionJSX(StyledLegend, { style: style },\n      ___EmotionJSX(\"ul\", null, categories)));\n\n\n  }}\n\n\nLegend.propTypes = propTypes;\nLegend.defaultProps = defaultProps;","map":{"version":3,"names":["React","PropTypes","formatNumber","styled","StyledLegend","div","theme","typography","sizes","s","colors","grayscale","light5","gridUnit","light2","base","categoryDelimiter","propTypes","categories","object","forceCategorical","bool","format","string","position","oneOf","showSingleCategory","func","toggleCategory","defaultProps","Legend","PureComponent","value","props","numValue","parseFloat","formatCategoryLabel","k","values","split","render","Object","keys","length","entries","map","v","style","color","join","icon","enabled","vertical","charAt","horizontal"],"sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.jsx"],"sourcesContent":["/* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { formatNumber, styled } from '@superset-ui/core';\n\nconst StyledLegend = styled.div`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.s}px;\n    position: absolute;\n    background: ${theme.colors.grayscale.light5};\n    box-shadow: 0 0 ${theme.gridUnit}px ${theme.colors.grayscale.light2};\n    margin: ${theme.gridUnit * 6}px;\n    padding: ${theme.gridUnit * 3}px ${theme.gridUnit * 5}px;\n    outline: none;\n    overflow-y: scroll;\n    max-height: 200px;\n\n    & ul {\n      list-style: none;\n      padding-left: 0;\n      margin: 0;\n\n      & li a {\n        color: ${theme.colors.grayscale.base};\n        text-decoration: none;\n\n        & span {\n          margin-right: ${theme.gridUnit * 3}px;\n        }\n      }\n    }\n  `}\n`;\n\nconst categoryDelimiter = ' - ';\n\nconst propTypes = {\n  categories: PropTypes.object,\n  forceCategorical: PropTypes.bool,\n  format: PropTypes.string,\n  position: PropTypes.oneOf([null, 'tl', 'tr', 'bl', 'br']),\n  showSingleCategory: PropTypes.func,\n  toggleCategory: PropTypes.func,\n};\n\nconst defaultProps = {\n  categories: {},\n  forceCategorical: false,\n  format: null,\n  position: 'tr',\n  showSingleCategory: () => {},\n  toggleCategory: () => {},\n};\n\nexport default class Legend extends React.PureComponent {\n  format(value) {\n    if (!this.props.format || this.props.forceCategorical) {\n      return value;\n    }\n\n    const numValue = parseFloat(value);\n\n    return formatNumber(this.props.format, numValue);\n  }\n\n  formatCategoryLabel(k) {\n    if (!this.props.format) {\n      return k;\n    }\n\n    if (k.includes(categoryDelimiter)) {\n      const values = k.split(categoryDelimiter);\n\n      return (\n        this.format(values[0]) + categoryDelimiter + this.format(values[1])\n      );\n    }\n\n    return this.format(k);\n  }\n\n  render() {\n    if (\n      Object.keys(this.props.categories).length === 0 ||\n      this.props.position === null\n    ) {\n      return null;\n    }\n\n    const categories = Object.entries(this.props.categories).map(([k, v]) => {\n      const style = { color: `rgba(${v.color.join(', ')})` };\n      const icon = v.enabled ? '\\u25FC' : '\\u25FB';\n\n      return (\n        <li key={k}>\n          <a\n            href=\"#\"\n            onClick={() => this.props.toggleCategory(k)}\n            onDoubleClick={() => this.props.showSingleCategory(k)}\n          >\n            <span style={style}>{icon}</span> {this.formatCategoryLabel(k)}\n          </a>\n        </li>\n      );\n    });\n\n    const vertical = this.props.position.charAt(0) === 't' ? 'top' : 'bottom';\n    const horizontal = this.props.position.charAt(1) === 'r' ? 'right' : 'left';\n    const style = {\n      position: 'absolute',\n      [vertical]: '0px',\n      [horizontal]: '10px',\n    };\n\n    return (\n      <StyledLegend style={style}>\n        <ul>{categories}</ul>\n      </StyledLegend>\n    );\n  }\n}\n\nLegend.propTypes = propTypes;\nLegend.defaultProps = defaultProps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}