{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport $ from 'jquery';\n\n/**\n * Sets the body and title content of a modal, and shows it. Assumes HTML for modal exists and that\n * it handles closing (i.e., works with bootstrap)\n *\n * @param {object} options object of the form\n *  {\n *    title: {string},\n *    body: {string},\n *    modalSelector: {string, default: '.misc-modal' },\n *    titleSelector: {string, default: '.misc-modal .modal-title' },\n *    bodySelector:  {string, default: '.misc-modal .modal-body' },\n *   }\n */\nexport function showModal(options) {\n  /* eslint no-param-reassign: 0 */\n  options.modalSelector = options.modalSelector || '.misc-modal';\n  options.titleSelector = options.titleSelector || '.misc-modal .modal-title';\n  options.bodySelector = options.bodySelector || '.misc-modal .modal-body';\n  $(options.titleSelector).html(options.title || '');\n  $(options.bodySelector).html(options.body || '');\n  $(options.modalSelector).modal('show');\n}\n\nexport function formatSelectOptionsForRange(start, end) {\n  // outputs array of arrays\n  // formatSelectOptionsForRange(1, 5)\n  // returns [[1,1], [2,2], [3,3], [4,4], [5,5]]\n  const options = [];\n  // eslint-disable-next-line no-plusplus\n  for (let i = start; i <= end; i++) {\n    options.push([i, i.toString()]);\n  }\n  return options;\n}\n\nexport function formatSelectOptions(options) {\n  return options.map((opt) => [opt, opt.toString()]);\n}\n\nexport function getDatasourceParameter(datasourceId, datasourceType) {\n  return `${datasourceId}__${datasourceType}`;\n}\n\nexport function getParam(name) {\n  /* eslint no-useless-escape: 0 */\n  const formattedName = name.replace(/\\[/, '\\\\[').replace(/]/, '\\\\]');\n  const regex = new RegExp(`[\\\\?&]${formattedName}=([^&#]*)`);\n  // eslint-disable-next-line no-restricted-globals\n  const results = regex.exec(location.search);\n  return results === null ?\n  '' :\n  decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\nexport function mainMetric(savedMetrics) {\n  // Using 'count' as default metric if it exists, otherwise using whatever one shows up first\n  let metric;\n  if (savedMetrics && savedMetrics.length > 0) {\n    savedMetrics.forEach((m) => {\n      if (m.metric_name === 'count') {\n        metric = 'count';\n      }\n    });\n    if (!metric) {\n      metric = savedMetrics[0].metric_name;\n    }\n  }\n  return metric;\n}","map":{"version":3,"names":["$","showModal","options","modalSelector","titleSelector","bodySelector","html","title","body","modal","formatSelectOptionsForRange","start","end","i","push","toString","formatSelectOptions","map","opt","getDatasourceParameter","datasourceId","datasourceType","getParam","name","formattedName","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","mainMetric","savedMetrics","metric","length","forEach","m","metric_name"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/legacy-preset-chart-deckgl/src/utilities/utils.js"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport $ from 'jquery';\n\n/**\n * Sets the body and title content of a modal, and shows it. Assumes HTML for modal exists and that\n * it handles closing (i.e., works with bootstrap)\n *\n * @param {object} options object of the form\n *  {\n *    title: {string},\n *    body: {string},\n *    modalSelector: {string, default: '.misc-modal' },\n *    titleSelector: {string, default: '.misc-modal .modal-title' },\n *    bodySelector:  {string, default: '.misc-modal .modal-body' },\n *   }\n */\nexport function showModal(options) {\n  /* eslint no-param-reassign: 0 */\n  options.modalSelector = options.modalSelector || '.misc-modal';\n  options.titleSelector = options.titleSelector || '.misc-modal .modal-title';\n  options.bodySelector = options.bodySelector || '.misc-modal .modal-body';\n  $(options.titleSelector).html(options.title || '');\n  $(options.bodySelector).html(options.body || '');\n  $(options.modalSelector).modal('show');\n}\n\nexport function formatSelectOptionsForRange(start, end) {\n  // outputs array of arrays\n  // formatSelectOptionsForRange(1, 5)\n  // returns [[1,1], [2,2], [3,3], [4,4], [5,5]]\n  const options = [];\n  // eslint-disable-next-line no-plusplus\n  for (let i = start; i <= end; i++) {\n    options.push([i, i.toString()]);\n  }\n  return options;\n}\n\nexport function formatSelectOptions(options) {\n  return options.map(opt => [opt, opt.toString()]);\n}\n\nexport function getDatasourceParameter(datasourceId, datasourceType) {\n  return `${datasourceId}__${datasourceType}`;\n}\n\nexport function getParam(name) {\n  /* eslint no-useless-escape: 0 */\n  const formattedName = name.replace(/\\[/, '\\\\[').replace(/]/, '\\\\]');\n  const regex = new RegExp(`[\\\\?&]${formattedName}=([^&#]*)`);\n  // eslint-disable-next-line no-restricted-globals\n  const results = regex.exec(location.search);\n  return results === null\n    ? ''\n    : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\nexport function mainMetric(savedMetrics) {\n  // Using 'count' as default metric if it exists, otherwise using whatever one shows up first\n  let metric;\n  if (savedMetrics && savedMetrics.length > 0) {\n    savedMetrics.forEach(m => {\n      if (m.metric_name === 'count') {\n        metric = 'count';\n      }\n    });\n    if (!metric) {\n      metric = savedMetrics[0].metric_name;\n    }\n  }\n  return metric;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,QAAd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,SAAT,CAAmBC,OAAnB,EAA4B;EACjC;EACAA,OAAO,CAACC,aAAR,GAAwBD,OAAO,CAACC,aAAR,IAAyB,aAAjD;EACAD,OAAO,CAACE,aAAR,GAAwBF,OAAO,CAACE,aAAR,IAAyB,0BAAjD;EACAF,OAAO,CAACG,YAAR,GAAuBH,OAAO,CAACG,YAAR,IAAwB,yBAA/C;EACAL,CAAC,CAACE,OAAO,CAACE,aAAT,CAAD,CAAyBE,IAAzB,CAA8BJ,OAAO,CAACK,KAAR,IAAiB,EAA/C;EACAP,CAAC,CAACE,OAAO,CAACG,YAAT,CAAD,CAAwBC,IAAxB,CAA6BJ,OAAO,CAACM,IAAR,IAAgB,EAA7C;EACAR,CAAC,CAACE,OAAO,CAACC,aAAT,CAAD,CAAyBM,KAAzB,CAA+B,MAA/B;AACD;;AAED,OAAO,SAASC,2BAAT,CAAqCC,KAArC,EAA4CC,GAA5C,EAAiD;EACtD;EACA;EACA;EACA,MAAMV,OAAO,GAAG,EAAhB;EACA;EACA,KAAK,IAAIW,CAAC,GAAGF,KAAb,EAAoBE,CAAC,IAAID,GAAzB,EAA8BC,CAAC,EAA/B,EAAmC;IACjCX,OAAO,CAACY,IAAR,CAAa,CAACD,CAAD,EAAIA,CAAC,CAACE,QAAF,EAAJ,CAAb;EACD;EACD,OAAOb,OAAP;AACD;;AAED,OAAO,SAASc,mBAAT,CAA6Bd,OAA7B,EAAsC;EAC3C,OAAOA,OAAO,CAACe,GAAR,CAAY,CAAAC,GAAG,KAAI,CAACA,GAAD,EAAMA,GAAG,CAACH,QAAJ,EAAN,CAAnB,CAAP;AACD;;AAED,OAAO,SAASI,sBAAT,CAAgCC,YAAhC,EAA8CC,cAA9C,EAA8D;EACnE,OAAQ,GAAED,YAAa,KAAIC,cAAe,EAA1C;AACD;;AAED,OAAO,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;EAC7B;EACA,MAAMC,aAAa,GAAGD,IAAI,CAACE,OAAL,CAAa,IAAb,EAAmB,KAAnB,EAA0BA,OAA1B,CAAkC,GAAlC,EAAuC,KAAvC,CAAtB;EACA,MAAMC,KAAK,GAAG,IAAIC,MAAJ,CAAY,SAAQH,aAAc,WAAlC,CAAd;EACA;EACA,MAAMI,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWC,QAAQ,CAACC,MAApB,CAAhB;EACA,OAAOH,OAAO,KAAK,IAAZ;EACH,EADG;EAEHI,kBAAkB,CAACJ,OAAO,CAAC,CAAD,CAAP,CAAWH,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAFtB;AAGD;;AAED,OAAO,SAASQ,UAAT,CAAoBC,YAApB,EAAkC;EACvC;EACA,IAAIC,MAAJ;EACA,IAAID,YAAY,IAAIA,YAAY,CAACE,MAAb,GAAsB,CAA1C,EAA6C;IAC3CF,YAAY,CAACG,OAAb,CAAqB,CAAAC,CAAC,KAAI;MACxB,IAAIA,CAAC,CAACC,WAAF,KAAkB,OAAtB,EAA+B;QAC7BJ,MAAM,GAAG,OAAT;MACD;IACF,CAJD;IAKA,IAAI,CAACA,MAAL,EAAa;MACXA,MAAM,GAAGD,YAAY,CAAC,CAAD,CAAZ,CAAgBK,WAAzB;IACD;EACF;EACD,OAAOJ,MAAP;AACD"},"metadata":{},"sourceType":"module"}