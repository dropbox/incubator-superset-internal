{"ast":null,"code":"import _intersection from \"lodash/intersection\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { css, logging, styled, SupersetClient, t } from '@superset-ui/core';\n\nimport rison from 'rison';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport SupersetText from 'src/utils/textUtils';\nimport { findPermission } from 'src/utils/findPermission';\nimport { WelcomeTable } from 'src/features/home/types';\nimport { TableTab } from './types';\n// Modifies the rison encoding slightly to match the backend's rison encoding/decoding. Applies globally.\n// Code pulled from rison.js (https://github.com/Nanonid/rison), rison is licensed under the MIT license.\n(() => {\n  const risonRef = rison;\n  const l = [];\n  for (let hi = 0; hi < 16; hi += 1) {\n    for (let lo = 0; lo < 16; lo += 1) {\n      if (hi + lo === 0)\n      continue;\n      const c = String.fromCharCode(hi * 16 + lo);\n      if (!/\\w|[-_./~]/.test(c))\n      l.push(`\\\\u00${hi.toString(16)}${lo.toString(16)}`);\n    }\n  }\n  risonRef.not_idchar = l.join('');\n  risonRef.not_idstart = '-0123456789';\n  const idrx = `[^${risonRef.not_idstart}${risonRef.not_idchar}][^${risonRef.not_idchar}]*`;\n  risonRef.id_ok = new RegExp(`^${idrx}$`);\n  risonRef.next_id = new RegExp(idrx, 'g');\n})();\nexport const Actions = styled.div`\n  color: ${(_ref) => {let { theme } = _ref;return theme.colors.grayscale.base;}};\n`;\nconst createFetchResourceMethod = (method) => (resource, relation, handleError, user) => async function (filterValue, page, pageSize) {var _json$result;if (filterValue === void 0) {filterValue = '';}\n  const resourceEndpoint = `/api/v1/${resource}/${method}/${relation}`;\n  const queryParams = rison.encode_uri({\n    filter: filterValue,\n    page,\n    page_size: pageSize });\n\n  const { json = {} } = await SupersetClient.get({\n    endpoint: `${resourceEndpoint}?q=${queryParams}` });\n\n  let fetchedLoggedUser = false;\n  const loggedUser = user ?\n  {\n    label: `${user.firstName} ${user.lastName}`,\n    value: user.userId } :\n\n  undefined;\n  const data = [];\n  json == null ? void 0 : (_json$result = json.result) == null ? void 0 : _json$result.\n  filter((_ref2) => {let { text } = _ref2;return text.trim().length > 0;}).\n  forEach((_ref3) => {let { text, value } = _ref3;\n    if (loggedUser &&\n    value === loggedUser.value &&\n    text === loggedUser.label) {\n      fetchedLoggedUser = true;\n    } else\n    {\n      data.push({\n        label: text,\n        value });\n\n    }\n  });\n  if (loggedUser && (!filterValue || fetchedLoggedUser)) {\n    data.unshift(loggedUser);\n  }\n  return {\n    data,\n    totalCount: json == null ? void 0 : json.count };\n\n};\nexport const PAGE_SIZE = 5;\nconst getParams = (filters) => {\n  const params = {\n    order_column: 'changed_on_delta_humanized',\n    order_direction: 'desc',\n    page: 0,\n    page_size: PAGE_SIZE,\n    filters };\n\n  if (!filters)\n  delete params.filters;\n  return rison.encode(params);\n};\nexport const getEditedObjects = (userId) => {\n  const filters = {\n    edited: [\n    {\n      col: 'changed_by',\n      opr: 'rel_o_m',\n      value: `${userId}` }] };\n\n\n\n  const batch = [\n  SupersetClient.get({\n    endpoint: `/api/v1/dashboard/?q=${getParams(filters.edited)}` }),\n\n  SupersetClient.get({\n    endpoint: `/api/v1/chart/?q=${getParams(filters.edited)}` })];\n\n\n  return Promise.all(batch).\n  then((_ref4) => {var _editedDashboards$jso, _editedCharts$json;let [editedCharts, editedDashboards] = _ref4;\n    const res = {\n      editedDash: (_editedDashboards$jso = editedDashboards.json) == null ? void 0 : _editedDashboards$jso.result.slice(0, 3),\n      editedChart: (_editedCharts$json = editedCharts.json) == null ? void 0 : _editedCharts$json.result.slice(0, 3) };\n\n    return res;\n  }).\n  catch((err) => err);\n};\nexport const getUserOwnedObjects = function (userId, resource, filters) {if (filters === void 0) {filters = [\n    {\n      col: 'owners',\n      opr: 'rel_m_m',\n      value: `${userId}` }];}return (\n\n    SupersetClient.get({\n      endpoint: `/api/v1/${resource}/?q=${getParams(filters)}` }).\n    then((res) => {var _res$json;return (_res$json = res.json) == null ? void 0 : _res$json.result;}));};\nexport const getRecentActivityObjs = (userId, recent, addDangerToast, filters) => SupersetClient.get({ endpoint: recent }).then((recentsRes) => {\n  const res = {};\n  const newBatch = [\n  SupersetClient.get({\n    endpoint: `/api/v1/chart/?q=${getParams(filters)}` }),\n\n  SupersetClient.get({\n    endpoint: `/api/v1/dashboard/?q=${getParams(filters)}` })];\n\n\n  return Promise.all(newBatch).\n  then((_ref5) => {let [chartRes, dashboardRes] = _ref5;\n    res.other = [...chartRes.json.result, ...dashboardRes.json.result];\n    res.viewed = recentsRes.json.result;\n    return res;\n  }).\n  catch((errMsg) => addDangerToast(t('There was an error fetching your recent activity:'), errMsg));\n});\nexport const createFetchRelated = createFetchResourceMethod('related');\nexport const createFetchDistinct = createFetchResourceMethod('distinct');\nexport function createErrorHandler(handleErrorFunc) {\n  return async (e) => {\n    const parsedError = await getClientErrorObject(e);\n    // Taking the first error returned from the API\n    // @ts-ignore\n    const errorsArray = parsedError == null ? void 0 : parsedError.errors;\n    const config = await SupersetText;\n    if (errorsArray != null && errorsArray.length &&\n    config != null && config.ERRORS &&\n    errorsArray[0].error_type in config.ERRORS) {\n      parsedError.message = config.ERRORS[errorsArray[0].error_type];\n    }\n    logging.error(e);\n    handleErrorFunc(parsedError.message || parsedError.error);\n  };\n}\nexport function handleChartDelete(_ref6, addSuccessToast, addDangerToast, refreshData, chartFilter, userId) {let { id, slice_name: sliceName } = _ref6;\n  const filters = {\n    pageIndex: 0,\n    pageSize: PAGE_SIZE,\n    sortBy: [\n    {\n      id: 'changed_on_delta_humanized',\n      desc: true }],\n\n\n    filters: [\n    {\n      id: 'created_by',\n      operator: 'rel_o_m',\n      value: `${userId}` }] };\n\n\n\n  SupersetClient.delete({\n    endpoint: `/api/v1/chart/${id}` }).\n  then(() => {\n    if (chartFilter === 'Mine')\n    refreshData(filters);else\n\n    refreshData();\n    addSuccessToast(t('Deleted: %s', sliceName));\n  }, () => {\n    addDangerToast(t('There was an issue deleting: %s', sliceName));\n  });\n}\nexport function handleDashboardDelete(_ref7, refreshData, addSuccessToast, addDangerToast, dashboardFilter, userId) {let { id, dashboard_title: dashboardTitle } = _ref7;\n  return SupersetClient.delete({\n    endpoint: `/api/v1/dashboard/${id}` }).\n  then(() => {\n    const filters = {\n      pageIndex: 0,\n      pageSize: PAGE_SIZE,\n      sortBy: [\n      {\n        id: 'changed_on_delta_humanized',\n        desc: true }],\n\n\n      filters: [\n      {\n        id: 'owners',\n        operator: 'rel_m_m',\n        value: `${userId}` }] };\n\n\n\n    if (dashboardFilter === 'Mine')\n    refreshData(filters);else\n\n    refreshData();\n    addSuccessToast(t('Deleted: %s', dashboardTitle));\n  }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting %s: %s', dashboardTitle, errMsg))));\n}\nexport function shortenSQL(sql, maxLines) {\n  let lines = sql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('...');\n  }\n  return lines.join('\\n');\n}\n// loading card count for homepage\nexport const loadingCardCount = 5;\nconst breakpoints = [576, 768, 992, 1200];\nexport const mq = breakpoints.map((bp) => `@media (max-width: ${bp}px)`);\nexport const CardContainer = styled.div`\n  ${(_ref8) => {let { showThumbnails, theme } = _ref8;return `\n    overflow: hidden;\n    display: grid;\n    grid-gap: ${theme.gridUnit * 12}px ${theme.gridUnit * 4}px;\n    grid-template-columns: repeat(auto-fit, 300px);\n    max-height: ${showThumbnails ? '314' : '148'}px;\n    margin-top: ${theme.gridUnit * -6}px;\n    padding: ${showThumbnails ?\n  `${theme.gridUnit * 8 + 3}px ${theme.gridUnit * 9}px` :\n  `${theme.gridUnit * 8 + 1}px ${theme.gridUnit * 9}px`};\n  `;}}\n`;\nexport const CardStyles = styled.div`\n  cursor: pointer;\n  a {\n    text-decoration: none;\n  }\n  .ant-card-cover > div {\n    /* Height is calculated based on 300px width, to keep the same aspect ratio as the 800*450 thumbnails */\n    height: 168px;\n  }\n`;\nexport const StyledIcon = (theme) => css`\n  margin: auto ${theme.gridUnit * 2}px auto 0;\n  color: ${theme.colors.grayscale.base};\n`;\nexport /* eslint-disable no-underscore-dangle */const isNeedsPassword = (payload) => {var _payload$_schema;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema = payload._schema) != null && _payload$_schema.find((e) => e === 'Must provide a password for the database'));};\nexport /* eslint-disable no-underscore-dangle */const isNeedsSSHPassword = (payload) => {var _payload$_schema2;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema2 = payload._schema) != null && _payload$_schema2.find((e) => e === 'Must provide a password for the ssh tunnel'));};\nexport /* eslint-disable no-underscore-dangle */const isNeedsSSHPrivateKey = (payload) => {var _payload$_schema3;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema3 = payload._schema) != null && _payload$_schema3.find((e) => e === 'Must provide a private key for the ssh tunnel'));};\nexport /* eslint-disable no-underscore-dangle */const isNeedsSSHPrivateKeyPassword = (payload) => {var _payload$_schema4;return typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!((_payload$_schema4 = payload._schema) != null && _payload$_schema4.find((e) => e === 'Must provide a private key password for the ssh tunnel'));};\nexport const isAlreadyExists = (payload) => typeof payload === 'string' &&\n_includesInstanceProperty(payload).call(payload, 'already exists and `overwrite=true` was not passed');\nexport const getPasswordsNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter((_ref9) => {let [, payload] = _ref9;return isNeedsPassword(payload);}).\nmap((_ref10) => {let [fileName] = _ref10;return fileName;})).\nflat();\nexport const getSSHPasswordsNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter((_ref11) => {let [, payload] = _ref11;return isNeedsSSHPassword(payload);}).\nmap((_ref12) => {let [fileName] = _ref12;return fileName;})).\nflat();\nexport const getSSHPrivateKeysNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter((_ref13) => {let [, payload] = _ref13;return isNeedsSSHPrivateKey(payload);}).\nmap((_ref14) => {let [fileName] = _ref14;return fileName;})).\nflat();\nexport const getSSHPrivateKeyPasswordsNeeded = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter((_ref15) => {let [, payload] = _ref15;return isNeedsSSHPrivateKeyPassword(payload);}).\nmap((_ref16) => {let [fileName] = _ref16;return fileName;})).\nflat();\nexport const getAlreadyExists = (errors) => errors.\nmap((error) => Object.entries(error.extra).\nfilter((_ref17) => {let [, payload] = _ref17;return isAlreadyExists(payload);}).\nmap((_ref18) => {let [fileName] = _ref18;return fileName;})).\nflat();\nexport const hasTerminalValidation = (errors) => errors.some((error) => {\n  const noIssuesCodes = Object.entries(error.extra).filter((_ref19) => {let [key] = _ref19;return key !== 'issue_codes';});\n  if (noIssuesCodes.length === 0)\n  return true;\n  return !noIssuesCodes.every((_ref20) => {let [, payload] = _ref20;return isNeedsPassword(payload) ||\n    isAlreadyExists(payload) ||\n    isNeedsSSHPassword(payload) ||\n    isNeedsSSHPrivateKey(payload) ||\n    isNeedsSSHPrivateKeyPassword(payload);});\n});\nexport const checkUploadExtensions = (perm, cons) => {\n  if (perm !== undefined) {\n    return _intersection(perm, cons).length > 0;\n  }\n  return false;\n};\nexport const uploadUserPerms = (roles, csvExt, colExt, excelExt, allowedExt) => {\n  const canUploadCSV = findPermission('can_this_form_get', 'CsvToDatabaseView', roles) &&\n  checkUploadExtensions(csvExt, allowedExt);\n  const canUploadColumnar = checkUploadExtensions(colExt, allowedExt) &&\n  findPermission('can_this_form_get', 'ColumnarToDatabaseView', roles);\n  const canUploadExcel = checkUploadExtensions(excelExt, allowedExt) &&\n  findPermission('can_this_form_get', 'ExcelToDatabaseView', roles);\n  return {\n    canUploadCSV,\n    canUploadColumnar,\n    canUploadExcel,\n    canUploadData: canUploadCSV || canUploadColumnar || canUploadExcel };\n\n};\nexport function getFilterValues(tab, welcomeTable, user, otherTabFilters) {var _context;\n  if (tab === TableTab.Created ||\n  welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Mine) {\n    return [\n    {\n      id: 'created_by',\n      operator: 'rel_o_m',\n      value: `${user == null ? void 0 : user.userId}` }];\n\n\n  }\n  if (welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Favorite) {\n    return [\n    {\n      id: 'id',\n      operator: 'saved_query_is_fav',\n      value: true }];\n\n\n  }\n  if (tab === TableTab.Mine && user) {\n    return [\n    {\n      id: 'owners',\n      operator: 'rel_m_m',\n      value: `${user.userId}` }];\n\n\n  }\n  if (tab === TableTab.Favorite &&\n  _includesInstanceProperty(_context = [WelcomeTable.Dashboards, WelcomeTable.Charts]).call(_context, welcomeTable)) {\n    return [\n    {\n      id: 'id',\n      operator: welcomeTable === WelcomeTable.Dashboards ?\n      'dashboard_is_favorite' :\n      'chart_is_favorite',\n      value: true }];\n\n\n  }\n  if (tab === TableTab.Other) {\n    return (otherTabFilters || []).map((flt) => ({\n      id: flt.col,\n      operator: flt.opr,\n      value: flt.value }));\n\n  }\n  return [];\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Actions, \"Actions\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createFetchResourceMethod, \"createFetchResourceMethod\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(PAGE_SIZE, \"PAGE_SIZE\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getParams, \"getParams\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getEditedObjects, \"getEditedObjects\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getUserOwnedObjects, \"getUserOwnedObjects\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getRecentActivityObjs, \"getRecentActivityObjs\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createFetchRelated, \"createFetchRelated\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createFetchDistinct, \"createFetchDistinct\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(createErrorHandler, \"createErrorHandler\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(handleChartDelete, \"handleChartDelete\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(handleDashboardDelete, \"handleDashboardDelete\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(shortenSQL, \"shortenSQL\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(loadingCardCount, \"loadingCardCount\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(breakpoints, \"breakpoints\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(mq, \"mq\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(CardContainer, \"CardContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(CardStyles, \"CardStyles\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(StyledIcon, \"StyledIcon\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsPassword, \"isNeedsPassword\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsSSHPassword, \"isNeedsSSHPassword\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsSSHPrivateKey, \"isNeedsSSHPrivateKey\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isNeedsSSHPrivateKeyPassword, \"isNeedsSSHPrivateKeyPassword\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(isAlreadyExists, \"isAlreadyExists\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getPasswordsNeeded, \"getPasswordsNeeded\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getSSHPasswordsNeeded, \"getSSHPasswordsNeeded\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getSSHPrivateKeysNeeded, \"getSSHPrivateKeysNeeded\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getSSHPrivateKeyPasswordsNeeded, \"getSSHPrivateKeyPasswordsNeeded\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getAlreadyExists, \"getAlreadyExists\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(hasTerminalValidation, \"hasTerminalValidation\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(checkUploadExtensions, \"checkUploadExtensions\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(uploadUserPerms, \"uploadUserPerms\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");reactHotLoader.register(getFilterValues, \"getFilterValues\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["css","logging","styled","SupersetClient","t","rison","getClientErrorObject","SupersetText","findPermission","WelcomeTable","TableTab","risonRef","l","hi","lo","c","String","fromCharCode","test","push","toString","not_idchar","join","not_idstart","idrx","id_ok","RegExp","next_id","Actions","div","theme","colors","grayscale","base","createFetchResourceMethod","method","resource","relation","handleError","user","filterValue","page","pageSize","resourceEndpoint","queryParams","encode_uri","filter","page_size","json","get","endpoint","fetchedLoggedUser","loggedUser","label","firstName","lastName","value","userId","undefined","data","result","text","trim","length","forEach","unshift","totalCount","count","PAGE_SIZE","getParams","filters","params","order_column","order_direction","encode","getEditedObjects","edited","col","opr","batch","Promise","all","then","editedCharts","editedDashboards","res","editedDash","slice","editedChart","catch","err","getUserOwnedObjects","getRecentActivityObjs","recent","addDangerToast","newBatch","chartRes","dashboardRes","other","viewed","recentsRes","errMsg","createFetchRelated","createFetchDistinct","createErrorHandler","handleErrorFunc","e","parsedError","errorsArray","errors","config","ERRORS","error_type","message","error","handleChartDelete","addSuccessToast","refreshData","chartFilter","id","slice_name","sliceName","pageIndex","sortBy","desc","operator","delete","handleDashboardDelete","dashboardFilter","dashboard_title","dashboardTitle","shortenSQL","sql","maxLines","lines","split","loadingCardCount","breakpoints","mq","map","bp","CardContainer","showThumbnails","gridUnit","CardStyles","StyledIcon","isNeedsPassword","payload","Array","isArray","_schema","find","isNeedsSSHPassword","isNeedsSSHPrivateKey","isNeedsSSHPrivateKeyPassword","isAlreadyExists","getPasswordsNeeded","Object","entries","extra","fileName","flat","getSSHPasswordsNeeded","getSSHPrivateKeysNeeded","getSSHPrivateKeyPasswordsNeeded","getAlreadyExists","hasTerminalValidation","some","noIssuesCodes","key","every","checkUploadExtensions","perm","cons","uploadUserPerms","roles","csvExt","colExt","excelExt","allowedExt","canUploadCSV","canUploadColumnar","canUploadExcel","canUploadData","getFilterValues","tab","welcomeTable","otherTabFilters","Created","SavedQueries","Mine","Favorite","Dashboards","Charts","Other","flt"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/views/CRUD/utils.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  css,\n  logging,\n  styled,\n  SupersetClient,\n  SupersetClientResponse,\n  SupersetTheme,\n  t,\n} from '@superset-ui/core';\nimport Chart from 'src/types/Chart';\nimport { intersection } from 'lodash';\nimport rison from 'rison';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { FetchDataConfig, FilterValue } from 'src/components/ListView';\nimport SupersetText from 'src/utils/textUtils';\nimport { findPermission } from 'src/utils/findPermission';\nimport { User } from 'src/types/bootstrapTypes';\nimport { WelcomeTable } from 'src/features/home/types';\nimport { Dashboard, Filter, TableTab } from './types';\n\n// Modifies the rison encoding slightly to match the backend's rison encoding/decoding. Applies globally.\n// Code pulled from rison.js (https://github.com/Nanonid/rison), rison is licensed under the MIT license.\n(() => {\n  const risonRef: {\n    not_idchar: string;\n    not_idstart: string;\n    id_ok: RegExp;\n    next_id: RegExp;\n  } = rison as any;\n\n  const l = [];\n  for (let hi = 0; hi < 16; hi += 1) {\n    for (let lo = 0; lo < 16; lo += 1) {\n      if (hi + lo === 0) continue;\n      const c = String.fromCharCode(hi * 16 + lo);\n      if (!/\\w|[-_./~]/.test(c))\n        l.push(`\\\\u00${hi.toString(16)}${lo.toString(16)}`);\n    }\n  }\n\n  risonRef.not_idchar = l.join('');\n  risonRef.not_idstart = '-0123456789';\n\n  const idrx = `[^${risonRef.not_idstart}${risonRef.not_idchar}][^${risonRef.not_idchar}]*`;\n\n  risonRef.id_ok = new RegExp(`^${idrx}$`);\n  risonRef.next_id = new RegExp(idrx, 'g');\n})();\n\nexport const Actions = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst createFetchResourceMethod =\n  (method: string) =>\n  (\n    resource: string,\n    relation: string,\n    handleError: (error: Response) => void,\n    user?: { userId: string | number; firstName: string; lastName: string },\n  ) =>\n  async (filterValue = '', page: number, pageSize: number) => {\n    const resourceEndpoint = `/api/v1/${resource}/${method}/${relation}`;\n    const queryParams = rison.encode_uri({\n      filter: filterValue,\n      page,\n      page_size: pageSize,\n    });\n    const { json = {} } = await SupersetClient.get({\n      endpoint: `${resourceEndpoint}?q=${queryParams}`,\n    });\n\n    let fetchedLoggedUser = false;\n    const loggedUser = user\n      ? {\n          label: `${user.firstName} ${user.lastName}`,\n          value: user.userId,\n        }\n      : undefined;\n\n    const data: { label: string; value: string | number }[] = [];\n    json?.result\n      ?.filter(({ text }: { text: string }) => text.trim().length > 0)\n      .forEach(({ text, value }: { text: string; value: string | number }) => {\n        if (\n          loggedUser &&\n          value === loggedUser.value &&\n          text === loggedUser.label\n        ) {\n          fetchedLoggedUser = true;\n        } else {\n          data.push({\n            label: text,\n            value,\n          });\n        }\n      });\n\n    if (loggedUser && (!filterValue || fetchedLoggedUser)) {\n      data.unshift(loggedUser);\n    }\n\n    return {\n      data,\n      totalCount: json?.count,\n    };\n  };\n\nexport const PAGE_SIZE = 5;\nconst getParams = (filters?: Filter[]) => {\n  const params = {\n    order_column: 'changed_on_delta_humanized',\n    order_direction: 'desc',\n    page: 0,\n    page_size: PAGE_SIZE,\n    filters,\n  };\n  if (!filters) delete params.filters;\n  return rison.encode(params);\n};\n\nexport const getEditedObjects = (userId: string | number) => {\n  const filters = {\n    edited: [\n      {\n        col: 'changed_by',\n        opr: 'rel_o_m',\n        value: `${userId}`,\n      },\n    ],\n  };\n  const batch = [\n    SupersetClient.get({\n      endpoint: `/api/v1/dashboard/?q=${getParams(filters.edited)}`,\n    }),\n    SupersetClient.get({\n      endpoint: `/api/v1/chart/?q=${getParams(filters.edited)}`,\n    }),\n  ];\n  return Promise.all(batch)\n    .then(([editedCharts, editedDashboards]) => {\n      const res = {\n        editedDash: editedDashboards.json?.result.slice(0, 3),\n        editedChart: editedCharts.json?.result.slice(0, 3),\n      };\n      return res;\n    })\n    .catch(err => err);\n};\n\nexport const getUserOwnedObjects = (\n  userId: string | number,\n  resource: string,\n  filters: Filter[] = [\n    {\n      col: 'owners',\n      opr: 'rel_m_m',\n      value: `${userId}`,\n    },\n  ],\n) =>\n  SupersetClient.get({\n    endpoint: `/api/v1/${resource}/?q=${getParams(filters)}`,\n  }).then(res => res.json?.result);\n\nexport const getRecentActivityObjs = (\n  userId: string | number,\n  recent: string,\n  addDangerToast: (arg1: string, arg2: any) => any,\n  filters: Filter[],\n) =>\n  SupersetClient.get({ endpoint: recent }).then(recentsRes => {\n    const res: any = {};\n    const newBatch = [\n      SupersetClient.get({\n        endpoint: `/api/v1/chart/?q=${getParams(filters)}`,\n      }),\n      SupersetClient.get({\n        endpoint: `/api/v1/dashboard/?q=${getParams(filters)}`,\n      }),\n    ];\n    return Promise.all(newBatch)\n      .then(([chartRes, dashboardRes]) => {\n        res.other = [...chartRes.json.result, ...dashboardRes.json.result];\n        res.viewed = recentsRes.json.result;\n        return res;\n      })\n      .catch(errMsg =>\n        addDangerToast(\n          t('There was an error fetching your recent activity:'),\n          errMsg,\n        ),\n      );\n  });\n\nexport const createFetchRelated = createFetchResourceMethod('related');\nexport const createFetchDistinct = createFetchResourceMethod('distinct');\n\nexport function createErrorHandler(\n  handleErrorFunc: (\n    errMsg?: string | Record<string, string[] | string>,\n  ) => void,\n) {\n  return async (e: SupersetClientResponse | string) => {\n    const parsedError = await getClientErrorObject(e);\n    // Taking the first error returned from the API\n    // @ts-ignore\n    const errorsArray = parsedError?.errors;\n    const config = await SupersetText;\n    if (\n      errorsArray?.length &&\n      config?.ERRORS &&\n      errorsArray[0].error_type in config.ERRORS\n    ) {\n      parsedError.message = config.ERRORS[errorsArray[0].error_type];\n    }\n    logging.error(e);\n    handleErrorFunc(parsedError.message || parsedError.error);\n  };\n}\n\nexport function handleChartDelete(\n  { id, slice_name: sliceName }: Chart,\n  addSuccessToast: (arg0: string) => void,\n  addDangerToast: (arg0: string) => void,\n  refreshData: (arg0?: FetchDataConfig | null) => void,\n  chartFilter?: string,\n  userId?: string | number,\n) {\n  const filters = {\n    pageIndex: 0,\n    pageSize: PAGE_SIZE,\n    sortBy: [\n      {\n        id: 'changed_on_delta_humanized',\n        desc: true,\n      },\n    ],\n    filters: [\n      {\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: `${userId}`,\n      },\n    ],\n  };\n  SupersetClient.delete({\n    endpoint: `/api/v1/chart/${id}`,\n  }).then(\n    () => {\n      if (chartFilter === 'Mine') refreshData(filters);\n      else refreshData();\n      addSuccessToast(t('Deleted: %s', sliceName));\n    },\n    () => {\n      addDangerToast(t('There was an issue deleting: %s', sliceName));\n    },\n  );\n}\n\nexport function handleDashboardDelete(\n  { id, dashboard_title: dashboardTitle }: Dashboard,\n  refreshData: (config?: FetchDataConfig | null) => void,\n  addSuccessToast: (arg0: string) => void,\n  addDangerToast: (arg0: string) => void,\n  dashboardFilter?: string,\n  userId?: string | number,\n) {\n  return SupersetClient.delete({\n    endpoint: `/api/v1/dashboard/${id}`,\n  }).then(\n    () => {\n      const filters = {\n        pageIndex: 0,\n        pageSize: PAGE_SIZE,\n        sortBy: [\n          {\n            id: 'changed_on_delta_humanized',\n            desc: true,\n          },\n        ],\n        filters: [\n          {\n            id: 'owners',\n            operator: 'rel_m_m',\n            value: `${userId}`,\n          },\n        ],\n      };\n      if (dashboardFilter === 'Mine') refreshData(filters);\n      else refreshData();\n      addSuccessToast(t('Deleted: %s', dashboardTitle));\n    },\n    createErrorHandler(errMsg =>\n      addDangerToast(\n        t('There was an issue deleting %s: %s', dashboardTitle, errMsg),\n      ),\n    ),\n  );\n}\n\nexport function shortenSQL(sql: string, maxLines: number) {\n  let lines: string[] = sql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('...');\n  }\n  return lines.join('\\n');\n}\n\n// loading card count for homepage\nexport const loadingCardCount = 5;\n\nconst breakpoints = [576, 768, 992, 1200];\nexport const mq = breakpoints.map(bp => `@media (max-width: ${bp}px)`);\n\nexport const CardContainer = styled.div<{\n  showThumbnails?: boolean | undefined;\n}>`\n  ${({ showThumbnails, theme }) => `\n    overflow: hidden;\n    display: grid;\n    grid-gap: ${theme.gridUnit * 12}px ${theme.gridUnit * 4}px;\n    grid-template-columns: repeat(auto-fit, 300px);\n    max-height: ${showThumbnails ? '314' : '148'}px;\n    margin-top: ${theme.gridUnit * -6}px;\n    padding: ${\n      showThumbnails\n        ? `${theme.gridUnit * 8 + 3}px ${theme.gridUnit * 9}px`\n        : `${theme.gridUnit * 8 + 1}px ${theme.gridUnit * 9}px`\n    };\n  `}\n`;\n\nexport const CardStyles = styled.div`\n  cursor: pointer;\n  a {\n    text-decoration: none;\n  }\n  .ant-card-cover > div {\n    /* Height is calculated based on 300px width, to keep the same aspect ratio as the 800*450 thumbnails */\n    height: 168px;\n  }\n`;\n\nexport const StyledIcon = (theme: SupersetTheme) => css`\n  margin: auto ${theme.gridUnit * 2}px auto 0;\n  color: ${theme.colors.grayscale.base};\n`;\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsPassword = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) => e === 'Must provide a password for the database',\n  );\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsSSHPassword = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) => e === 'Must provide a password for the ssh tunnel',\n  );\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsSSHPrivateKey = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) => e === 'Must provide a private key for the ssh tunnel',\n  );\n\nexport /* eslint-disable no-underscore-dangle */\nconst isNeedsSSHPrivateKeyPassword = (payload: any) =>\n  typeof payload === 'object' &&\n  Array.isArray(payload._schema) &&\n  !!payload._schema?.find(\n    (e: string) =>\n      e === 'Must provide a private key password for the ssh tunnel',\n  );\n\nexport const isAlreadyExists = (payload: any) =>\n  typeof payload === 'string' &&\n  payload.includes('already exists and `overwrite=true` was not passed');\n\nexport const getPasswordsNeeded = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsPassword(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getSSHPasswordsNeeded = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsSSHPassword(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getSSHPrivateKeysNeeded = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsSSHPrivateKey(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getSSHPrivateKeyPasswordsNeeded = (\n  errors: Record<string, any>[],\n) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isNeedsSSHPrivateKeyPassword(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const getAlreadyExists = (errors: Record<string, any>[]) =>\n  errors\n    .map(error =>\n      Object.entries(error.extra)\n        .filter(([, payload]) => isAlreadyExists(payload))\n        .map(([fileName]) => fileName),\n    )\n    .flat();\n\nexport const hasTerminalValidation = (errors: Record<string, any>[]) =>\n  errors.some(error => {\n    const noIssuesCodes = Object.entries(error.extra).filter(\n      ([key]) => key !== 'issue_codes',\n    );\n\n    if (noIssuesCodes.length === 0) return true;\n\n    return !noIssuesCodes.every(\n      ([, payload]) =>\n        isNeedsPassword(payload) ||\n        isAlreadyExists(payload) ||\n        isNeedsSSHPassword(payload) ||\n        isNeedsSSHPrivateKey(payload) ||\n        isNeedsSSHPrivateKeyPassword(payload),\n    );\n  });\n\nexport const checkUploadExtensions = (\n  perm: Array<string>,\n  cons: Array<string>,\n) => {\n  if (perm !== undefined) {\n    return intersection(perm, cons).length > 0;\n  }\n  return false;\n};\n\nexport const uploadUserPerms = (\n  roles: Record<string, [string, string][]>,\n  csvExt: Array<string>,\n  colExt: Array<string>,\n  excelExt: Array<string>,\n  allowedExt: Array<string>,\n) => {\n  const canUploadCSV =\n    findPermission('can_this_form_get', 'CsvToDatabaseView', roles) &&\n    checkUploadExtensions(csvExt, allowedExt);\n  const canUploadColumnar =\n    checkUploadExtensions(colExt, allowedExt) &&\n    findPermission('can_this_form_get', 'ColumnarToDatabaseView', roles);\n  const canUploadExcel =\n    checkUploadExtensions(excelExt, allowedExt) &&\n    findPermission('can_this_form_get', 'ExcelToDatabaseView', roles);\n  return {\n    canUploadCSV,\n    canUploadColumnar,\n    canUploadExcel,\n    canUploadData: canUploadCSV || canUploadColumnar || canUploadExcel,\n  };\n};\n\nexport function getFilterValues(\n  tab: TableTab,\n  welcomeTable: WelcomeTable,\n  user?: User,\n  otherTabFilters?: Filter[],\n): FilterValue[] {\n  if (\n    tab === TableTab.Created ||\n    (welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Mine)\n  ) {\n    return [\n      {\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: `${user?.userId}`,\n      },\n    ];\n  }\n  if (welcomeTable === WelcomeTable.SavedQueries && tab === TableTab.Favorite) {\n    return [\n      {\n        id: 'id',\n        operator: 'saved_query_is_fav',\n        value: true,\n      },\n    ];\n  }\n  if (tab === TableTab.Mine && user) {\n    return [\n      {\n        id: 'owners',\n        operator: 'rel_m_m',\n        value: `${user.userId}`,\n      },\n    ];\n  }\n  if (\n    tab === TableTab.Favorite &&\n    [WelcomeTable.Dashboards, WelcomeTable.Charts].includes(welcomeTable)\n  ) {\n    return [\n      {\n        id: 'id',\n        operator:\n          welcomeTable === WelcomeTable.Dashboards\n            ? 'dashboard_is_favorite'\n            : 'chart_is_favorite',\n        value: true,\n      },\n    ];\n  }\n  if (tab === TableTab.Other) {\n    return (otherTabFilters || []).map(flt => ({\n      id: flt.col,\n      operator: flt.opr,\n      value: flt.value,\n    }));\n  }\n  return [];\n}\n"]},"metadata":{},"sourceType":"module"}