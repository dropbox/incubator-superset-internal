{"ast":null,"code":"import { css as _css } from \"@emotion/react\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport rison from 'rison';\nimport React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Radio } from 'src/components/Radio';\nimport Card from 'src/components/Card';\nimport Alert from 'src/components/Alert';\nimport Badge from 'src/components/Badge';\nimport shortid from 'shortid';\nimport {\nFeatureFlag,\nstyled,\nSupersetClient,\nt,\nwithTheme } from\n'@superset-ui/core';\nimport { Select, AsyncSelect, Row, Col } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport Button from 'src/components/Button';\nimport Tabs from 'src/components/Tabs';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport DatabaseSelector from 'src/components/DatabaseSelector';\nimport Label from 'src/components/Label';\nimport Loading from 'src/components/Loading';\nimport TableSelector from 'src/components/TableSelector';\nimport EditableTitle from 'src/components/EditableTitle';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport CheckboxControl from 'src/explore/components/controls/CheckboxControl';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport TextAreaControl from 'src/explore/components/controls/TextAreaControl';\nimport SpatialControl from 'src/explore/components/controls/SpatialControl';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { isFeatureEnabled } from 'src/featureFlags';\nimport Icons from 'src/components/Icons';\nimport CollectionTable from './CollectionTable';\nimport Fieldset from './Fieldset';\nimport Field from './Field';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst DatasourceContainer = styled.div`\n  .change-warning {\n    margin: 16px 10px 0;\n    color: ${(_ref) => {let { theme } = _ref;return theme.colors.warning.base;}};\n  }\n\n  .change-warning .bold {\n    font-weight: ${(_ref2) => {let { theme } = _ref2;return theme.typography.weights.bold;}};\n  }\n\n  .form-group.has-feedback > .help-block {\n    margin-top: 8px;\n  }\n\n  .form-group.form-group-md {\n    margin-bottom: 8px;\n  }\n`;\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${(_ref3) => {let { theme } = _ref3;return theme.gridUnit;}}px;\n  }\n`;\n\nconst StyledTableTabs = styled(Tabs)`\n  overflow: visible;\n  .ant-tabs-content-holder {\n    overflow: visible;\n  }\n`;\n\nconst StyledBadge = styled(Badge)`\n  .ant-badge-count {\n    line-height: ${(_ref4) => {let { theme } = _ref4;return theme.gridUnit * 4;}}px;\n    height: ${(_ref5) => {let { theme } = _ref5;return theme.gridUnit * 4;}}px;\n    margin-left: ${(_ref6) => {let { theme } = _ref6;return theme.gridUnit;}}px;\n  }\n`;\n\nconst EditLockContainer = styled.div`\n  font-size: ${(_ref7) => {let { theme } = _ref7;return theme.typography.sizes.s;}}px;\n  display: flex;\n  align-items: center;\n  a {\n    padding: 0 10px;\n  }\n`;\n\nconst ColumnButtonWrapper = styled.div`\n  text-align: right;\n  ${(_ref8) => {let { theme } = _ref8;return `margin-bottom: ${theme.gridUnit * 2}px`;}}\n`;\n\nconst StyledLabelWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  span {\n    margin-right: ${(_ref9) => {let { theme } = _ref9;return theme.gridUnit;}}px;\n  }\n`;\n\nconst StyledColumnsTabWrapper = styled.div`\n  .table > tbody > tr > td {\n    vertical-align: middle;\n  }\n\n  .ant-tag {\n    margin-top: ${(_ref10) => {let { theme } = _ref10;return theme.gridUnit;}}px;\n  }\n`;\n\nconst StyledButtonWrapper = styled.span`\n  ${(_ref11) => {let { theme } = _ref11;return `\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-left: ${theme.gridUnit * 3}px;\n  `;}}\n`;\n\nconst checkboxGenerator = (d, onChange) =>\n___EmotionJSX(CheckboxControl, { value: d, onChange: onChange });\n\nconst DATA_TYPES = [\n{ value: 'STRING', label: t('STRING') },\n{ value: 'NUMERIC', label: t('NUMERIC') },\n{ value: 'DATETIME', label: t('DATETIME') },\n{ value: 'BOOLEAN', label: t('BOOLEAN') }];\n\n\nconst DATASOURCE_TYPES_ARR = [\n{ key: 'physical', label: t('Physical (table or view)') },\n{ key: 'virtual', label: t('Virtual (SQL)') }];\n\nconst DATASOURCE_TYPES = {};\nDATASOURCE_TYPES_ARR.forEach((o) => {\n  DATASOURCE_TYPES[o.key] = o;\n});var _ref13 = process.env.NODE_ENV === \"production\" ? { name: \"s5xdrg\", styles: \"display:flex;align-items:center\" } : { name: \"l0hchv-CollectionTabTitle\", styles: \"display:flex;align-items:center;label:CollectionTabTitle;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvRGF0YXNvdXJjZS9EYXRhc291cmNlRWRpdG9yLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnS00iLCJmaWxlIjoiL1VzZXJzL2JvZ2Rhbmt5cnlsaXVrL2NvZGUvb3BlbnNvdXJjZS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvY29tcG9uZW50cy9EYXRhc291cmNlL0RhdGFzb3VyY2VFZGl0b3IuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBSYWRpbyB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1JhZGlvJztcbmltcG9ydCBDYXJkIGZyb20gJ3NyYy9jb21wb25lbnRzL0NhcmQnO1xuaW1wb3J0IEFsZXJ0IGZyb20gJ3NyYy9jb21wb25lbnRzL0FsZXJ0JztcbmltcG9ydCBCYWRnZSBmcm9tICdzcmMvY29tcG9uZW50cy9CYWRnZSc7XG5pbXBvcnQgc2hvcnRpZCBmcm9tICdzaG9ydGlkJztcbmltcG9ydCB7XG4gIEZlYXR1cmVGbGFnLFxuICBzdHlsZWQsXG4gIFN1cGVyc2V0Q2xpZW50LFxuICB0LFxuICB3aXRoVGhlbWUsXG59IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IFNlbGVjdCwgQXN5bmNTZWxlY3QsIFJvdywgQ29sIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgRm9ybUxhYmVsIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvRm9ybSc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ3NyYy9jb21wb25lbnRzL0J1dHRvbic7XG5pbXBvcnQgVGFicyBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJzJztcbmltcG9ydCBDZXJ0aWZpZWRCYWRnZSBmcm9tICdzcmMvY29tcG9uZW50cy9DZXJ0aWZpZWRCYWRnZSc7XG5pbXBvcnQgV2FybmluZ0ljb25XaXRoVG9vbHRpcCBmcm9tICdzcmMvY29tcG9uZW50cy9XYXJuaW5nSWNvbldpdGhUb29sdGlwJztcbmltcG9ydCBEYXRhYmFzZVNlbGVjdG9yIGZyb20gJ3NyYy9jb21wb25lbnRzL0RhdGFiYXNlU2VsZWN0b3InO1xuaW1wb3J0IExhYmVsIGZyb20gJ3NyYy9jb21wb25lbnRzL0xhYmVsJztcbmltcG9ydCBMb2FkaW5nIGZyb20gJ3NyYy9jb21wb25lbnRzL0xvYWRpbmcnO1xuaW1wb3J0IFRhYmxlU2VsZWN0b3IgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFibGVTZWxlY3Rvcic7XG5pbXBvcnQgRWRpdGFibGVUaXRsZSBmcm9tICdzcmMvY29tcG9uZW50cy9FZGl0YWJsZVRpdGxlJztcbmltcG9ydCB7IGdldENsaWVudEVycm9yT2JqZWN0IH0gZnJvbSAnc3JjL3V0aWxzL2dldENsaWVudEVycm9yT2JqZWN0JztcbmltcG9ydCBDaGVja2JveENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9DaGVja2JveENvbnRyb2wnO1xuaW1wb3J0IFRleHRDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dENvbnRyb2wnO1xuaW1wb3J0IFRleHRBcmVhQ29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1RleHRBcmVhQ29udHJvbCc7XG5pbXBvcnQgU3BhdGlhbENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9TcGF0aWFsQ29udHJvbCc7XG5pbXBvcnQgd2l0aFRvYXN0cyBmcm9tICdzcmMvY29tcG9uZW50cy9NZXNzYWdlVG9hc3RzL3dpdGhUb2FzdHMnO1xuaW1wb3J0IHsgaXNGZWF0dXJlRW5hYmxlZCB9IGZyb20gJ3NyYy9mZWF0dXJlRmxhZ3MnO1xuaW1wb3J0IEljb25zIGZyb20gJ3NyYy9jb21wb25lbnRzL0ljb25zJztcbmltcG9ydCBDb2xsZWN0aW9uVGFibGUgZnJvbSAnLi9Db2xsZWN0aW9uVGFibGUnO1xuaW1wb3J0IEZpZWxkc2V0IGZyb20gJy4vRmllbGRzZXQnO1xuaW1wb3J0IEZpZWxkIGZyb20gJy4vRmllbGQnO1xuXG5jb25zdCBEYXRhc291cmNlQ29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgLmNoYW5nZS13YXJuaW5nIHtcbiAgICBtYXJnaW46IDE2cHggMTBweCAwO1xuICAgIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy53YXJuaW5nLmJhc2V9O1xuICB9XG5cbiAgLmNoYW5nZS13YXJuaW5nIC5ib2xkIHtcbiAgICBmb250LXdlaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMuYm9sZH07XG4gIH1cblxuICAuZm9ybS1ncm91cC5oYXMtZmVlZGJhY2sgPiAuaGVscC1ibG9jayB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICB9XG5cbiAgLmZvcm0tZ3JvdXAuZm9ybS1ncm91cC1tZCB7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICB9XG5gO1xuXG5jb25zdCBGbGV4Um93Q29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcblxuICBzdmcge1xuICAgIG1hcmdpbi1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkVGFibGVUYWJzID0gc3R5bGVkKFRhYnMpYFxuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgLmFudC10YWJzLWNvbnRlbnQtaG9sZGVyIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkQmFkZ2UgPSBzdHlsZWQoQmFkZ2UpYFxuICAuYW50LWJhZGdlLWNvdW50IHtcbiAgICBsaW5lLWhlaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdCAqIDR9cHg7XG4gICAgaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBtYXJnaW4tbGVmdDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ncmlkVW5pdH1weDtcbiAgfVxuYDtcblxuY29uc3QgRWRpdExvY2tDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBmb250LXNpemU6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHlwb2dyYXBoeS5zaXplcy5zfXB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBhIHtcbiAgICBwYWRkaW5nOiAwIDEwcHg7XG4gIH1cbmA7XG5cbmNvbnN0IENvbHVtbkJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgJHsoeyB0aGVtZSB9KSA9PiBgbWFyZ2luLWJvdHRvbTogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHhgfVxuYDtcblxuY29uc3QgU3R5bGVkTGFiZWxXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgc3BhbiB7XG4gICAgbWFyZ2luLXJpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRDb2x1bW5zVGFiV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIC50YWJsZSA+IHRib2R5ID4gdHIgPiB0ZCB7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgfVxuXG4gIC5hbnQtdGFnIHtcbiAgICBtYXJnaW4tdG9wOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRCdXR0b25XcmFwcGVyID0gc3R5bGVkLnNwYW5gXG4gICR7KHsgdGhlbWUgfSkgPT4gYFxuICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAke3RoZW1lLmdyaWRVbml0ICogM31weDtcbiAgYH1cbmA7XG5cbmNvbnN0IGNoZWNrYm94R2VuZXJhdG9yID0gKGQsIG9uQ2hhbmdlKSA9PiAoXG4gIDxDaGVja2JveENvbnRyb2wgdmFsdWU9e2R9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbik7XG5jb25zdCBEQVRBX1RZUEVTID0gW1xuICB7IHZhbHVlOiAnU1RSSU5HJywgbGFiZWw6IHQoJ1NUUklORycpIH0sXG4gIHsgdmFsdWU6ICdOVU1FUklDJywgbGFiZWw6IHQoJ05VTUVSSUMnKSB9LFxuICB7IHZhbHVlOiAnREFURVRJTUUnLCBsYWJlbDogdCgnREFURVRJTUUnKSB9LFxuICB7IHZhbHVlOiAnQk9PTEVBTicsIGxhYmVsOiB0KCdCT09MRUFOJykgfSxcbl07XG5cbmNvbnN0IERBVEFTT1VSQ0VfVFlQRVNfQVJSID0gW1xuICB7IGtleTogJ3BoeXNpY2FsJywgbGFiZWw6IHQoJ1BoeXNpY2FsICh0YWJsZSBvciB2aWV3KScpIH0sXG4gIHsga2V5OiAndmlydHVhbCcsIGxhYmVsOiB0KCdWaXJ0dWFsIChTUUwpJykgfSxcbl07XG5jb25zdCBEQVRBU09VUkNFX1RZUEVTID0ge307XG5EQVRBU09VUkNFX1RZUEVTX0FSUi5mb3JFYWNoKG8gPT4ge1xuICBEQVRBU09VUkNFX1RZUEVTW28ua2V5XSA9IG87XG59KTtcblxuZnVuY3Rpb24gQ29sbGVjdGlvblRhYlRpdGxlKHsgdGl0bGUsIGNvbGxlY3Rpb24gfSkge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNzcz17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19XG4gICAgICBkYXRhLXRlc3Q9e2Bjb2xsZWN0aW9uLXRhYi0ke3RpdGxlfWB9XG4gICAgPlxuICAgICAge3RpdGxlfXsnICd9XG4gICAgICA8U3R5bGVkQmFkZ2UgY291bnQ9e2NvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDB9IHNob3daZXJvIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbkNvbGxlY3Rpb25UYWJUaXRsZS5wcm9wVHlwZXMgPSB7XG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb2xsZWN0aW9uOiBQcm9wVHlwZXMuYXJyYXksXG59O1xuXG5mdW5jdGlvbiBDb2x1bW5Db2xsZWN0aW9uVGFibGUoe1xuICBjb2x1bW5zLFxuICBkYXRhc291cmNlLFxuICBvbkNvbHVtbnNDaGFuZ2UsXG4gIG9uRGF0YXNvdXJjZUNoYW5nZSxcbiAgZWRpdGFibGVDb2x1bW5OYW1lLFxuICBzaG93RXhwcmVzc2lvbixcbiAgYWxsb3dBZGRJdGVtLFxuICBhbGxvd0VkaXREYXRhVHlwZSxcbiAgaXRlbUdlbmVyYXRvcixcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICBjb2xsZWN0aW9uPXtjb2x1bW5zfVxuICAgICAgdGFibGVDb2x1bW5zPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTkFCTEVfQURWQU5DRURfREFUQV9UWVBFUylcbiAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgJ2NvbHVtbl9uYW1lJyxcbiAgICAgICAgICAgICAgJ2FkdmFuY2VkX2RhdGFfdHlwZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAndHlwZScsXG4gICAgICAgICAgICAgICdpc19kdHRtJyxcbiAgICAgICAgICAgICAgJ21haW5fZHR0bV9jb2wnLFxuICAgICAgICAgICAgICAnZmlsdGVyYWJsZScsXG4gICAgICAgICAgICAgICdncm91cGJ5JyxcbiAgICAgICAgICAgIF1cbiAgICAgIH1cbiAgICAgIHNvcnRDb2x1bW5zPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTkFCTEVfQURWQU5DRURfREFUQV9UWVBFUylcbiAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgJ2NvbHVtbl9uYW1lJyxcbiAgICAgICAgICAgICAgJ2FkdmFuY2VkX2RhdGFfdHlwZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAndHlwZScsXG4gICAgICAgICAgICAgICdpc19kdHRtJyxcbiAgICAgICAgICAgICAgJ21haW5fZHR0bV9jb2wnLFxuICAgICAgICAgICAgICAnZmlsdGVyYWJsZScsXG4gICAgICAgICAgICAgICdncm91cGJ5JyxcbiAgICAgICAgICAgIF1cbiAgICAgIH1cbiAgICAgIGFsbG93RGVsZXRlc1xuICAgICAgYWxsb3dBZGRJdGVtPXthbGxvd0FkZEl0ZW19XG4gICAgICBpdGVtR2VuZXJhdG9yPXtpdGVtR2VuZXJhdG9yfVxuICAgICAgc3RpY2t5SGVhZGVyXG4gICAgICBleHBhbmRGaWVsZHNldD17XG4gICAgICAgIDxGb3JtQ29udGFpbmVyPlxuICAgICAgICAgIDxGaWVsZHNldCBjb21wYWN0PlxuICAgICAgICAgICAge3Nob3dFeHByZXNzaW9uICYmIChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJleHByZXNzaW9uXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnU1FMIGV4cHJlc3Npb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJtYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJ2ZXJib3NlX25hbWVcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnTGFiZWwnKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJ2ZXJib3NlX25hbWVcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0xhYmVsJyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHthbGxvd0VkaXREYXRhVHlwZSAmJiAoXG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwidHlwZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0RhdGEgdHlwZScpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0RhdGEgdHlwZScpfVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zPXtEQVRBX1RZUEVTfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIGFsbG93TmV3T3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7aXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTkFCTEVfQURWQU5DRURfREFUQV9UWVBFUykgPyAoXG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiYWR2YW5jZWRfZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQWR2YW5jZWQgZGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiYWR2YW5jZWRfZGF0YV90eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0FkdmFuY2VkIERhdGEgdHlwZScpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8PjwvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cInB5dGhvbl9kYXRlX2Zvcm1hdFwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdEYXRldGltZSBmb3JtYXQnKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e1xuICAgICAgICAgICAgICAgIC8qIE5vdGUgdGhlIGZyYWdtZW50ZWQgdHJhbnNsYXRpb25zIG1heSBub3Qgd29yay4gKi9cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAge3QoJ1RoZSBwYXR0ZXJuIG9mIHRpbWVzdGFtcCBmb3JtYXQuIEZvciBzdHJpbmdzIHVzZSAnKX1cbiAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2RvY3MucHl0aG9uLm9yZy8yL2xpYnJhcnkvZGF0ZXRpbWUuaHRtbCNzdHJmdGltZS1zdHJwdGltZS1iZWhhdmlvclwiPlxuICAgICAgICAgICAgICAgICAgICB7dCgnUHl0aG9uIGRhdGV0aW1lIHN0cmluZyBwYXR0ZXJuJyl9XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICB7dCgnIGV4cHJlc3Npb24gd2hpY2ggbmVlZHMgdG8gYWRoZXJlIHRvIHRoZSAnKX1cbiAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMVwiPlxuICAgICAgICAgICAgICAgICAgICB7dCgnSVNPIDg2MDEnKX1cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIHt0KGAgc3RhbmRhcmQgdG8gZW5zdXJlIHRoYXQgdGhlIGxleGljb2dyYXBoaWNhbCBvcmRlcmluZ1xuICAgICAgICAgICAgICAgICAgICAgIGNvaW5jaWRlcyB3aXRoIHRoZSBjaHJvbm9sb2dpY2FsIG9yZGVyaW5nLiBJZiB0aGVcbiAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgZm9ybWF0IGRvZXMgbm90IGFkaGVyZSB0byB0aGUgSVNPIDg2MDEgc3RhbmRhcmRcbiAgICAgICAgICAgICAgICAgICAgICB5b3Ugd2lsbCBuZWVkIHRvIGRlZmluZSBhbiBleHByZXNzaW9uIGFuZCB0eXBlIGZvclxuICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybWluZyB0aGUgc3RyaW5nIGludG8gYSBkYXRlIG9yIHRpbWVzdGFtcC4gTm90ZVxuICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseSB0aW1lIHpvbmVzIGFyZSBub3Qgc3VwcG9ydGVkLiBJZiB0aW1lIGlzIHN0b3JlZFxuICAgICAgICAgICAgICAgICAgICAgIGluIGVwb2NoIGZvcm1hdCwgcHV0IFxcYGVwb2NoX3NcXGAgb3IgXFxgZXBvY2hfbXNcXGAuIElmIG5vIHBhdHRlcm5cbiAgICAgICAgICAgICAgICAgICAgICBpcyBzcGVjaWZpZWQgd2UgZmFsbCBiYWNrIHRvIHVzaW5nIHRoZSBvcHRpb25hbCBkZWZhdWx0cyBvbiBhIHBlclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlL2NvbHVtbiBuYW1lIGxldmVsIHZpYSB0aGUgZXh0cmEgcGFyYW1ldGVyLmApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwicHl0aG9uX2RhdGVfZm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiJVkvJW0vJWRcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpZWRfYnlcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWVkIEJ5Jyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdQZXJzb24gb3IgZ3JvdXAgdGhhdCBoYXMgY2VydGlmaWVkIHRoaXMgbWV0cmljJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWVkXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdDZXJ0aWZpZWQgYnknKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnRGV0YWlscyBvZiB0aGUgY2VydGlmaWNhdGlvbicpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmljYXRpb25EZXRhaWxzXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvRmllbGRzZXQ+XG4gICAgICAgIDwvRm9ybUNvbnRhaW5lcj5cbiAgICAgIH1cbiAgICAgIGNvbHVtbkxhYmVscz17XG4gICAgICAgIGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRU5BQkxFX0FEVkFOQ0VEX0RBVEFfVFlQRVMpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiB0KCdDb2x1bW4nKSxcbiAgICAgICAgICAgICAgYWR2YW5jZWRfZGF0YV90eXBlOiB0KCdBZHZhbmNlZCBkYXRhIHR5cGUnKSxcbiAgICAgICAgICAgICAgdHlwZTogdCgnRGF0YSB0eXBlJyksXG4gICAgICAgICAgICAgIGdyb3VwYnk6IHQoJ0lzIGRpbWVuc2lvbicpLFxuICAgICAgICAgICAgICBpc19kdHRtOiB0KCdJcyB0ZW1wb3JhbCcpLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiB0KCdEZWZhdWx0IGRhdGV0aW1lJyksXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IHQoJ0lzIGZpbHRlcmFibGUnKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6IHQoJ0NvbHVtbicpLFxuICAgICAgICAgICAgICB0eXBlOiB0KCdEYXRhIHR5cGUnKSxcbiAgICAgICAgICAgICAgZ3JvdXBieTogdCgnSXMgZGltZW5zaW9uJyksXG4gICAgICAgICAgICAgIGlzX2R0dG06IHQoJ0lzIHRlbXBvcmFsJyksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHQoJ0RlZmF1bHQgZGF0ZXRpbWUnKSxcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogdCgnSXMgZmlsdGVyYWJsZScpLFxuICAgICAgICAgICAgfVxuICAgICAgfVxuICAgICAgb25DaGFuZ2U9e29uQ29sdW1uc0NoYW5nZX1cbiAgICAgIGl0ZW1SZW5kZXJlcnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKVxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogKHYsIG9uSXRlbUNoYW5nZSwgXywgcmVjb3JkKSA9PlxuICAgICAgICAgICAgICAgIGVkaXRhYmxlQ29sdW1uTmFtZSA/IChcbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgICAgIHtyZWNvcmQuaXNfY2VydGlmaWVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8Q2VydGlmaWVkQmFkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRpZmllZEJ5PXtyZWNvcmQuY2VydGlmaWVkX2J5fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscz17cmVjb3JkLmNlcnRpZmljYXRpb25fZGV0YWlsc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8RWRpdGFibGVUaXRsZVxuICAgICAgICAgICAgICAgICAgICAgIGNhbkVkaXRcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17dn1cbiAgICAgICAgICAgICAgICAgICAgICBvblNhdmVUaXRsZT17b25JdGVtQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgICAgIHtyZWNvcmQuaXNfY2VydGlmaWVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8Q2VydGlmaWVkQmFkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRpZmllZEJ5PXtyZWNvcmQuY2VydGlmaWVkX2J5fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscz17cmVjb3JkLmNlcnRpZmljYXRpb25fZGV0YWlsc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB7dn1cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6ICh2YWx1ZSwgX29uSXRlbUNoYW5nZSwgX2xhYmVsLCByZWNvcmQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZGF0YXNvdXJjZS5tYWluX2R0dG1fY29sID09PSByZWNvcmQuY29sdW1uX25hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQgPSAhY29sdW1ucy5maW5kKFxuICAgICAgICAgICAgICAgICAgY29sdW1uID0+IGNvbHVtbi5jb2x1bW5fbmFtZSA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICkuaXNfZHR0bTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdD17YHJhZGlvLWRlZmF1bHQtZHR0bS0ke3JlY29yZC5jb2x1bW5fbmFtZX1gfVxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogcmVjb3JkLmNvbHVtbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdHlwZTogZCA9PiAoZCA/IDxMYWJlbD57ZH08L0xhYmVsPiA6IG51bGwpLFxuICAgICAgICAgICAgICBhZHZhbmNlZF9kYXRhX3R5cGU6IGQgPT4gKFxuICAgICAgICAgICAgICAgIDxMYWJlbCBvbkNoYW5nZT17b25Db2x1bW5zQ2hhbmdlfT57ZH08L0xhYmVsPlxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBpc19kdHRtOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGdyb3VwYnk6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogKHYsIG9uSXRlbUNoYW5nZSwgXywgcmVjb3JkKSA9PlxuICAgICAgICAgICAgICAgIGVkaXRhYmxlQ29sdW1uTmFtZSA/IChcbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgICAgIHtyZWNvcmQuaXNfY2VydGlmaWVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8Q2VydGlmaWVkQmFkZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlcnRpZmllZEJ5PXtyZWNvcmQuY2VydGlmaWVkX2J5fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscz17cmVjb3JkLmNlcnRpZmljYXRpb25fZGV0YWlsc31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkl0ZW1DaGFuZ2V9IC8+XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHt2fVxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogKHZhbHVlLCBfb25JdGVtQ2hhbmdlLCBfbGFiZWwsIHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBkYXRhc291cmNlLm1haW5fZHR0bV9jb2wgPT09IHJlY29yZC5jb2x1bW5fbmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9ICFjb2x1bW5zLmZpbmQoXG4gICAgICAgICAgICAgICAgICBjb2x1bW4gPT4gY29sdW1uLmNvbHVtbl9uYW1lID09PSByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgKS5pc19kdHRtO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PXtgcmFkaW8tZGVmYXVsdC1kdHRtLSR7cmVjb3JkLmNvbHVtbl9uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0eXBlOiBkID0+IChkID8gPExhYmVsPntkfTwvTGFiZWw+IDogbnVsbCksXG4gICAgICAgICAgICAgIGlzX2R0dG06IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZ3JvdXBieTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICB9XG4gICAgICB9XG4gICAgLz5cbiAgKTtcbn1cbkNvbHVtbkNvbGxlY3Rpb25UYWJsZS5wcm9wVHlwZXMgPSB7XG4gIGNvbHVtbnM6IFByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxuICBkYXRhc291cmNlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIG9uQ29sdW1uc0NoYW5nZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25EYXRhc291cmNlQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBlZGl0YWJsZUNvbHVtbk5hbWU6IFByb3BUeXBlcy5ib29sLFxuICBzaG93RXhwcmVzc2lvbjogUHJvcFR5cGVzLmJvb2wsXG4gIGFsbG93QWRkSXRlbTogUHJvcFR5cGVzLmJvb2wsXG4gIGFsbG93RWRpdERhdGFUeXBlOiBQcm9wVHlwZXMuYm9vbCxcbiAgaXRlbUdlbmVyYXRvcjogUHJvcFR5cGVzLmZ1bmMsXG59O1xuQ29sdW1uQ29sbGVjdGlvblRhYmxlLmRlZmF1bHRQcm9wcyA9IHtcbiAgZWRpdGFibGVDb2x1bW5OYW1lOiBmYWxzZSxcbiAgc2hvd0V4cHJlc3Npb246IGZhbHNlLFxuICBhbGxvd0FkZEl0ZW06IGZhbHNlLFxuICBhbGxvd0VkaXREYXRhVHlwZTogZmFsc2UsXG4gIGl0ZW1HZW5lcmF0b3I6ICgpID0+ICh7XG4gICAgY29sdW1uX25hbWU6IHQoJzxuZXcgY29sdW1uPicpLFxuICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgZ3JvdXBieTogdHJ1ZSxcbiAgfSksXG59O1xuXG5mdW5jdGlvbiBTdGFja2VkRmllbGQoeyBsYWJlbCwgZm9ybUVsZW1lbnQgfSkge1xuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICA8c3Ryb25nPntsYWJlbH08L3N0cm9uZz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdj57Zm9ybUVsZW1lbnR9PC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cblN0YWNrZWRGaWVsZC5wcm9wVHlwZXMgPSB7XG4gIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBmb3JtRWxlbWVudDogUHJvcFR5cGVzLm5vZGUsXG59O1xuXG5mdW5jdGlvbiBGb3JtQ29udGFpbmVyKHsgY2hpbGRyZW4gfSkge1xuICByZXR1cm4gPENhcmQgcGFkZGVkPntjaGlsZHJlbn08L0NhcmQ+O1xufVxuXG5Gb3JtQ29udGFpbmVyLnByb3BUeXBlcyA9IHtcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxufTtcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBkYXRhc291cmNlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgYWRkU3VjY2Vzc1RvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBhZGREYW5nZXJUb2FzdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgc2V0SXNFZGl0aW5nOiBQcm9wVHlwZXMuZnVuYyxcbn07XG5cbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgb25DaGFuZ2U6ICgpID0+IHt9LFxuICBzZXRJc0VkaXRpbmc6ICgpID0+IHt9LFxufTtcblxuZnVuY3Rpb24gT3duZXJzU2VsZWN0b3IoeyBkYXRhc291cmNlLCBvbkNoYW5nZSB9KSB7XG4gIGNvbnN0IGxvYWRPcHRpb25zID0gdXNlQ2FsbGJhY2soKHNlYXJjaCA9ICcnLCBwYWdlLCBwYWdlU2l6ZSkgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5ID0gcmlzb24uZW5jb2RlKHsgZmlsdGVyOiBzZWFyY2gsIHBhZ2UsIHBhZ2Vfc2l6ZTogcGFnZVNpemUgfSk7XG4gICAgcmV0dXJuIFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvZGF0YXNldC9yZWxhdGVkL293bmVycz9xPSR7cXVlcnl9YCxcbiAgICB9KS50aGVuKHJlc3BvbnNlID0+ICh7XG4gICAgICBkYXRhOiByZXNwb25zZS5qc29uLnJlc3VsdFxuICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS5leHRyYS5hY3RpdmUpXG4gICAgICAgIC5tYXAoaXRlbSA9PiAoe1xuICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgIGxhYmVsOiBpdGVtLnRleHQsXG4gICAgICAgIH0pKSxcbiAgICAgIHRvdGFsQ291bnQ6IHJlc3BvbnNlLmpzb24uY291bnQsXG4gICAgfSkpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8QXN5bmNTZWxlY3RcbiAgICAgIGFyaWFMYWJlbD17dCgnU2VsZWN0IG93bmVycycpfVxuICAgICAgbW9kZT1cIm11bHRpcGxlXCJcbiAgICAgIG5hbWU9XCJvd25lcnNcIlxuICAgICAgdmFsdWU9e2RhdGFzb3VyY2Uub3duZXJzfVxuICAgICAgb3B0aW9ucz17bG9hZE9wdGlvbnN9XG4gICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICBoZWFkZXI9ezxGb3JtTGFiZWw+e3QoJ093bmVycycpfTwvRm9ybUxhYmVsPn1cbiAgICAgIGFsbG93Q2xlYXJcbiAgICAvPlxuICApO1xufVxuXG5jbGFzcyBEYXRhc291cmNlRWRpdG9yIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBkYXRhc291cmNlOiB7XG4gICAgICAgIC4uLnByb3BzLmRhdGFzb3VyY2UsXG4gICAgICAgIG93bmVyczogcHJvcHMuZGF0YXNvdXJjZS5vd25lcnMubWFwKG93bmVyID0+ICh7XG4gICAgICAgICAgdmFsdWU6IG93bmVyLnZhbHVlIHx8IG93bmVyLmlkLFxuICAgICAgICAgIGxhYmVsOiBvd25lci5sYWJlbCB8fCBgJHtvd25lci5maXJzdF9uYW1lfSAke293bmVyLmxhc3RfbmFtZX1gLFxuICAgICAgICB9KSksXG4gICAgICAgIG1ldHJpY3M6IHByb3BzLmRhdGFzb3VyY2UubWV0cmljcz8ubWFwKG1ldHJpYyA9PiB7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeU1ldHJpYyxcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogY2VydGlmaWNhdGlvbkRldGFpbHMsXG4gICAgICAgICAgfSA9IG1ldHJpYztcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uOiB7IGRldGFpbHMsIGNlcnRpZmllZF9ieTogY2VydGlmaWVkQnkgfSA9IHt9LFxuICAgICAgICAgICAgd2FybmluZ19tYXJrZG93bjogd2FybmluZ01hcmtkb3duLFxuICAgICAgICAgIH0gPSBKU09OLnBhcnNlKG1ldHJpYy5leHRyYSB8fCAne30nKSB8fCB7fTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ubWV0cmljLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpY2F0aW9uRGV0YWlscyB8fCBkZXRhaWxzLFxuICAgICAgICAgICAgd2FybmluZ19tYXJrZG93bjogd2FybmluZ01hcmtkb3duIHx8ICcnLFxuICAgICAgICAgICAgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSB8fCBjZXJ0aWZpZWRCeU1ldHJpYyxcbiAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgICBlcnJvcnM6IFtdLFxuICAgICAgaXNTcWxhOlxuICAgICAgICBwcm9wcy5kYXRhc291cmNlLmRhdGFzb3VyY2VfdHlwZSA9PT0gJ3RhYmxlJyB8fFxuICAgICAgICBwcm9wcy5kYXRhc291cmNlLnR5cGUgPT09ICd0YWJsZScsXG4gICAgICBpc0VkaXRNb2RlOiBmYWxzZSxcbiAgICAgIGRhdGFiYXNlQ29sdW1uczogcHJvcHMuZGF0YXNvdXJjZS5jb2x1bW5zLmZpbHRlcihjb2wgPT4gIWNvbC5leHByZXNzaW9uKSxcbiAgICAgIGNhbGN1bGF0ZWRDb2x1bW5zOiBwcm9wcy5kYXRhc291cmNlLmNvbHVtbnMuZmlsdGVyKFxuICAgICAgICBjb2wgPT4gISFjb2wuZXhwcmVzc2lvbixcbiAgICAgICksXG4gICAgICBtZXRhZGF0YUxvYWRpbmc6IGZhbHNlLFxuICAgICAgYWN0aXZlVGFiS2V5OiAwLFxuICAgICAgZGF0YXNvdXJjZVR5cGU6IHByb3BzLmRhdGFzb3VyY2Uuc3FsXG4gICAgICAgID8gREFUQVNPVVJDRV9UWVBFUy52aXJ0dWFsLmtleVxuICAgICAgICA6IERBVEFTT1VSQ0VfVFlQRVMucGh5c2ljYWwua2V5LFxuICAgIH07XG5cbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DaGFuZ2VFZGl0TW9kZSA9IHRoaXMub25DaGFuZ2VFZGl0TW9kZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSA9IHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25EYXRhc291cmNlQ2hhbmdlID0gdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhID1cbiAgICAgIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnN5bmNNZXRhZGF0YSA9IHRoaXMuc3luY01ldGFkYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRDb2x1bW5zID0gdGhpcy5zZXRDb2x1bW5zLmJpbmQodGhpcyk7XG4gICAgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSA9IHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZVRhYlNlbGVjdCA9IHRoaXMuaGFuZGxlVGFiU2VsZWN0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5hbGxvd0VkaXRTb3VyY2UgPSAhaXNGZWF0dXJlRW5hYmxlZChcbiAgICAgIEZlYXR1cmVGbGFnLkRJU0FCTEVfREFUQVNFVF9TT1VSQ0VfRURJVCxcbiAgICApO1xuICB9XG5cbiAgb25DaGFuZ2UoKSB7XG4gICAgLy8gRW1wdHlpbmcgU1FMIGlmIFwiUGh5c2ljYWxcIiByYWRpbyBidXR0b24gaXMgc2VsZWN0ZWRcbiAgICAvLyBDdXJyZW50bHkgdGhlIGxvZ2ljIHRvIGtub3cgd2hldGhlciB0aGUgc291cmNlIGlzXG4gICAgLy8gcGh5c2ljYWwgb3IgdmlydHVhbCBpcyBiYXNlZCBvbiB3aGV0aGVyIFNRTCBpcyBlbXB0eSBvciBub3QuXG4gICAgY29uc3QgeyBkYXRhc291cmNlVHlwZSwgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBzcWwgPVxuICAgICAgZGF0YXNvdXJjZVR5cGUgPT09IERBVEFTT1VSQ0VfVFlQRVMucGh5c2ljYWwua2V5ID8gJycgOiBkYXRhc291cmNlLnNxbDtcbiAgICBjb25zdCBuZXdEYXRhc291cmNlID0ge1xuICAgICAgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLFxuICAgICAgc3FsLFxuICAgICAgY29sdW1uczogWy4uLnRoaXMuc3RhdGUuZGF0YWJhc2VDb2x1bW5zLCAuLi50aGlzLnN0YXRlLmNhbGN1bGF0ZWRDb2x1bW5zXSxcbiAgICB9O1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UobmV3RGF0YXNvdXJjZSwgdGhpcy5zdGF0ZS5lcnJvcnMpO1xuICB9XG5cbiAgb25DaGFuZ2VFZGl0TW9kZSgpIHtcbiAgICB0aGlzLnByb3BzLnNldElzRWRpdGluZyghdGhpcy5zdGF0ZS5pc0VkaXRNb2RlKTtcbiAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoeyBpc0VkaXRNb2RlOiAhcHJldlN0YXRlLmlzRWRpdE1vZGUgfSkpO1xuICB9XG5cbiAgb25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIGNhbGxiYWNrID0gdGhpcy52YWxpZGF0ZUFuZENoYW5nZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBkYXRhc291cmNlIH0sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoYXR0ciwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuOyAvLyBpZiB2YWx1ZSBpcyB1bmRlZmluZWQgZG8gbm90IHVwZGF0ZSBzdGF0ZVxuICAgIGNvbnN0IGRhdGFzb3VyY2UgPSB7IC4uLnRoaXMuc3RhdGUuZGF0YXNvdXJjZSwgW2F0dHJdOiB2YWx1ZSB9O1xuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICBwcmV2U3RhdGUgPT4gKHtcbiAgICAgICAgZGF0YXNvdXJjZTogeyAuLi5wcmV2U3RhdGUuZGF0YXNvdXJjZSwgW2F0dHJdOiB2YWx1ZSB9LFxuICAgICAgfSksXG4gICAgICBhdHRyID09PSAndGFibGVfbmFtZSdcbiAgICAgICAgPyB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZShkYXRhc291cmNlLCB0aGlzLnRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhKVxuICAgICAgICA6IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UpLFxuICAgICk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VUeXBlQ2hhbmdlKGRhdGFzb3VyY2VUeXBlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2VUeXBlIH0pO1xuICB9XG5cbiAgc2V0Q29sdW1ucyhvYmopIHtcbiAgICAvLyB1cGRhdGUgY2FsY3VsYXRlZENvbHVtbnMgb3IgZGF0YWJhc2VDb2x1bW5zXG4gICAgdGhpcy5zZXRTdGF0ZShvYmosIHRoaXMudmFsaWRhdGVBbmRDaGFuZ2UpO1xuICB9XG5cbiAgdmFsaWRhdGVBbmRDaGFuZ2UoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSh0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHRhYmxlQ2hhbmdlQW5kU3luY01ldGFkYXRhKCkge1xuICAgIHRoaXMudmFsaWRhdGUoKCkgPT4ge1xuICAgICAgdGhpcy5zeW5jTWV0YWRhdGEoKTtcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUNvbHVtbnMoY29scykge1xuICAgIGNvbnN0IHsgZGF0YWJhc2VDb2x1bW5zIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGRhdGFiYXNlQ29sdW1uTmFtZXMgPSBjb2xzLm1hcChjb2wgPT4gY29sLm5hbWUpO1xuICAgIGNvbnN0IGN1cnJlbnRDb2xzID0gZGF0YWJhc2VDb2x1bW5zLnJlZHVjZShcbiAgICAgIChhZ2csIGNvbCkgPT4gKHtcbiAgICAgICAgLi4uYWdnLFxuICAgICAgICBbY29sLmNvbHVtbl9uYW1lXTogY29sLFxuICAgICAgfSksXG4gICAgICB7fSxcbiAgICApO1xuICAgIGNvbnN0IGZpbmFsQ29sdW1ucyA9IFtdO1xuICAgIGNvbnN0IHJlc3VsdHMgPSB7XG4gICAgICBhZGRlZDogW10sXG4gICAgICBtb2RpZmllZDogW10sXG4gICAgICByZW1vdmVkOiBkYXRhYmFzZUNvbHVtbnNcbiAgICAgICAgLm1hcChjb2wgPT4gY29sLmNvbHVtbl9uYW1lKVxuICAgICAgICAuZmlsdGVyKGNvbCA9PiAhZGF0YWJhc2VDb2x1bW5OYW1lcy5pbmNsdWRlcyhjb2wpKSxcbiAgICB9O1xuICAgIGNvbHMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgY29uc3QgY3VycmVudENvbCA9IGN1cnJlbnRDb2xzW2NvbC5uYW1lXTtcbiAgICAgIGlmICghY3VycmVudENvbCkge1xuICAgICAgICAvLyBuZXcgY29sdW1uXG4gICAgICAgIGZpbmFsQ29sdW1ucy5wdXNoKHtcbiAgICAgICAgICBpZDogc2hvcnRpZC5nZW5lcmF0ZSgpLFxuICAgICAgICAgIGNvbHVtbl9uYW1lOiBjb2wubmFtZSxcbiAgICAgICAgICB0eXBlOiBjb2wudHlwZSxcbiAgICAgICAgICBncm91cGJ5OiB0cnVlLFxuICAgICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICAgICAgaXNfZHR0bTogY29sLmlzX2R0dG0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXN1bHRzLmFkZGVkLnB1c2goY29sLm5hbWUpO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgY3VycmVudENvbC50eXBlICE9PSBjb2wudHlwZSB8fFxuICAgICAgICAoIWN1cnJlbnRDb2wuaXNfZHR0bSAmJiBjb2wuaXNfZHR0bSlcbiAgICAgICkge1xuICAgICAgICAvLyBtb2RpZmllZCBjb2x1bW5cbiAgICAgICAgZmluYWxDb2x1bW5zLnB1c2goe1xuICAgICAgICAgIC4uLmN1cnJlbnRDb2wsXG4gICAgICAgICAgdHlwZTogY29sLnR5cGUsXG4gICAgICAgICAgaXNfZHR0bTogY3VycmVudENvbC5pc19kdHRtIHx8IGNvbC5pc19kdHRtLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0cy5tb2RpZmllZC5wdXNoKGNvbC5uYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVuY2hhbmdlZFxuICAgICAgICBmaW5hbENvbHVtbnMucHVzaChjdXJyZW50Q29sKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoXG4gICAgICByZXN1bHRzLmFkZGVkLmxlbmd0aCB8fFxuICAgICAgcmVzdWx0cy5tb2RpZmllZC5sZW5ndGggfHxcbiAgICAgIHJlc3VsdHMucmVtb3ZlZC5sZW5ndGhcbiAgICApIHtcbiAgICAgIHRoaXMuc2V0Q29sdW1ucyh7IGRhdGFiYXNlQ29sdW1uczogZmluYWxDb2x1bW5zIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIHN5bmNNZXRhZGF0YSgpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgZGF0YXNvdXJjZV90eXBlOiBkYXRhc291cmNlLnR5cGUgfHwgZGF0YXNvdXJjZS5kYXRhc291cmNlX3R5cGUsXG4gICAgICBkYXRhYmFzZV9uYW1lOlxuICAgICAgICBkYXRhc291cmNlLmRhdGFiYXNlLmRhdGFiYXNlX25hbWUgfHwgZGF0YXNvdXJjZS5kYXRhYmFzZS5uYW1lLFxuICAgICAgc2NoZW1hX25hbWU6IGRhdGFzb3VyY2Uuc2NoZW1hLFxuICAgICAgdGFibGVfbmFtZTogZGF0YXNvdXJjZS50YWJsZV9uYW1lXG4gICAgICAgID8gZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFzb3VyY2UudGFibGVfbmFtZSlcbiAgICAgICAgOiBkYXRhc291cmNlLnRhYmxlX25hbWUsXG4gICAgfTtcbiAgICBPYmplY3QuZW50cmllcyhwYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgLy8gcmlzb24gY2FuJ3QgZW5jb2RlIHRoZSB1bmRlZmluZWQgdmFsdWVcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhcmFtc1trZXldID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBlbmRwb2ludCA9IGAvZGF0YXNvdXJjZS9leHRlcm5hbF9tZXRhZGF0YV9ieV9uYW1lLz9xPSR7cmlzb24uZW5jb2RlKFxuICAgICAgcGFyYW1zLFxuICAgICl9YDtcbiAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiB0cnVlIH0pO1xuXG4gICAgU3VwZXJzZXRDbGllbnQuZ2V0KHsgZW5kcG9pbnQgfSlcbiAgICAgIC50aGVuKCh7IGpzb24gfSkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy51cGRhdGVDb2x1bW5zKGpzb24pO1xuICAgICAgICBpZiAocmVzdWx0cy5tb2RpZmllZC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdChcbiAgICAgICAgICAgIHQoJ01vZGlmaWVkIGNvbHVtbnM6ICVzJywgcmVzdWx0cy5tb2RpZmllZC5qb2luKCcsICcpKSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHRzLnJlbW92ZWQubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5hZGRTdWNjZXNzVG9hc3QoXG4gICAgICAgICAgICB0KCdSZW1vdmVkIGNvbHVtbnM6ICVzJywgcmVzdWx0cy5yZW1vdmVkLmpvaW4oJywgJykpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdHMuYWRkZWQubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5hZGRTdWNjZXNzVG9hc3QoXG4gICAgICAgICAgICB0KCdOZXcgY29sdW1ucyBhZGRlZDogJXMnLCByZXN1bHRzLmFkZGVkLmpvaW4oJywgJykpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9wcy5hZGRTdWNjZXNzVG9hc3QodCgnTWV0YWRhdGEgaGFzIGJlZW4gc3luY2VkJykpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2gocmVzcG9uc2UgPT5cbiAgICAgICAgZ2V0Q2xpZW50RXJyb3JPYmplY3QocmVzcG9uc2UpLnRoZW4oKHsgZXJyb3IsIHN0YXR1c1RleHQgfSkgPT4ge1xuICAgICAgICAgIHRoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3QoXG4gICAgICAgICAgICBlcnJvciB8fCBzdGF0dXNUZXh0IHx8IHQoJ0FuIGVycm9yIGhhcyBvY2N1cnJlZCcpLFxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1ldGFkYXRhTG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgfVxuXG4gIGZpbmREdXBsaWNhdGVzKGFyciwgYWNjZXNzb3IpIHtcbiAgICBjb25zdCBzZWVuID0ge307XG4gICAgY29uc3QgZHVwcyA9IFtdO1xuICAgIGFyci5mb3JFYWNoKG9iaiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gYWNjZXNzb3Iob2JqKTtcbiAgICAgIGlmIChpdGVtIGluIHNlZW4pIHtcbiAgICAgICAgZHVwcy5wdXNoKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VlbltpdGVtXSA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGR1cHM7XG4gIH1cblxuICB2YWxpZGF0ZShjYWxsYmFjaykge1xuICAgIGxldCBlcnJvcnMgPSBbXTtcbiAgICBsZXQgZHVwcztcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgY29sdW1uX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLmNvbHVtbnMsIG9iaiA9PiBvYmouY29sdW1uX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ0NvbHVtbiBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTG9va2luZyBmb3IgZHVwbGljYXRlIG1ldHJpY19uYW1lXG4gICAgZHVwcyA9IHRoaXMuZmluZER1cGxpY2F0ZXMoZGF0YXNvdXJjZS5tZXRyaWNzLCBvYmogPT4gb2JqLm1ldHJpY19uYW1lKTtcbiAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KFxuICAgICAgZHVwcy5tYXAobmFtZSA9PiB0KCdNZXRyaWMgbmFtZSBbJXNdIGlzIGR1cGxpY2F0ZWQnLCBuYW1lKSksXG4gICAgKTtcblxuICAgIC8vIE1ha2luZyBzdXJlIGNhbGN1bGF0ZWRDb2x1bW5zIGhhdmUgYW4gZXhwcmVzc2lvbiBkZWZpbmVkXG4gICAgY29uc3Qgbm9GaWx0ZXJDYWxjQ29scyA9IHRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnMuZmlsdGVyKFxuICAgICAgY29sID0+ICFjb2wuZXhwcmVzc2lvbiAmJiAhY29sLmpzb24sXG4gICAgKTtcbiAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KFxuICAgICAgbm9GaWx0ZXJDYWxjQ29scy5tYXAoY29sID0+XG4gICAgICAgIHQoJ0NhbGN1bGF0ZWQgY29sdW1uIFslc10gcmVxdWlyZXMgYW4gZXhwcmVzc2lvbicsIGNvbC5jb2x1bW5fbmFtZSksXG4gICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3JzIH0sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGhhbmRsZVRhYlNlbGVjdChhY3RpdmVUYWJLZXkpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgYWN0aXZlVGFiS2V5IH0pO1xuICB9XG5cbiAgc29ydE1ldHJpY3MobWV0cmljcykge1xuICAgIHJldHVybiBtZXRyaWNzLnNvcnQoKHsgaWQ6IGEgfSwgeyBpZDogYiB9KSA9PiBiIC0gYSk7XG4gIH1cblxuICByZW5kZXJTZXR0aW5nc0ZpZWxkc2V0KCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPEZpZWxkc2V0XG4gICAgICAgIHRpdGxlPXt0KCdCYXNpYycpfVxuICAgICAgICBpdGVtPXtkYXRhc291cmNlfVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICBsYW5ndWFnZT1cIm1hcmtkb3duXCJcbiAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBmaWVsZEtleT1cImRlZmF1bHRfZW5kcG9pbnRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdEZWZhdWx0IFVSTCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgJ0RlZmF1bHQgVVJMIHRvIHJlZGlyZWN0IHRvIHdoZW4gYWNjZXNzaW5nIGZyb20gdGhlIGRhdGFzZXQgbGlzdCBwYWdlJyxcbiAgICAgICAgICApfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJkZWZhdWx0X2VuZHBvaW50XCIgLz59XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGlubGluZVxuICAgICAgICAgIGZpZWxkS2V5PVwiZmlsdGVyX3NlbGVjdF9lbmFibGVkXCJcbiAgICAgICAgICBsYWJlbD17dCgnQXV0b2NvbXBsZXRlIGZpbHRlcnMnKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnV2hldGhlciB0byBwb3B1bGF0ZSBhdXRvY29tcGxldGUgZmlsdGVycyBvcHRpb25zJyl9XG4gICAgICAgICAgY29udHJvbD17PENoZWNrYm94Q29udHJvbCAvPn1cbiAgICAgICAgLz5cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwiZmV0Y2hfdmFsdWVzX3ByZWRpY2F0ZVwiXG4gICAgICAgICAgICBsYWJlbD17dCgnQXV0b2NvbXBsZXRlIHF1ZXJ5IHByZWRpY2F0ZScpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICdXaGVuIHVzaW5nIFwiQXV0b2NvbXBsZXRlIGZpbHRlcnNcIiwgdGhpcyBjYW4gYmUgdXNlZCB0byBpbXByb3ZlIHBlcmZvcm1hbmNlICcgK1xuICAgICAgICAgICAgICAgICdvZiB0aGUgcXVlcnkgZmV0Y2hpbmcgdGhlIHZhbHVlcy4gVXNlIHRoaXMgb3B0aW9uIHRvIGFwcGx5IGEgJyArXG4gICAgICAgICAgICAgICAgJ3ByZWRpY2F0ZSAoV0hFUkUgY2xhdXNlKSB0byB0aGUgcXVlcnkgc2VsZWN0aW5nIHRoZSBkaXN0aW5jdCAnICtcbiAgICAgICAgICAgICAgICAndmFsdWVzIGZyb20gdGhlIHRhYmxlLiBUeXBpY2FsbHkgdGhlIGludGVudCB3b3VsZCBiZSB0byBsaW1pdCB0aGUgc2NhbiAnICtcbiAgICAgICAgICAgICAgICAnYnkgYXBwbHlpbmcgYSByZWxhdGl2ZSB0aW1lIGZpbHRlciBvbiBhIHBhcnRpdGlvbmVkIG9yIGluZGV4ZWQgdGltZS1yZWxhdGVkIGZpZWxkLicsXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICBsYW5ndWFnZT1cInNxbFwiXG4gICAgICAgICAgICAgICAgY29udHJvbElkPVwiZmV0Y2hfdmFsdWVzX3ByZWRpY2F0ZVwiXG4gICAgICAgICAgICAgICAgbWluTGluZXM9ezV9XG4gICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cImV4dHJhXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdFeHRyYScpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICdFeHRyYSBkYXRhIHRvIHNwZWNpZnkgdGFibGUgbWV0YWRhdGEuIEN1cnJlbnRseSBzdXBwb3J0cyAnICtcbiAgICAgICAgICAgICAgICAnbWV0YWRhdGEgb2YgdGhlIGZvcm1hdDogYHsgXCJjZXJ0aWZpY2F0aW9uXCI6IHsgXCJjZXJ0aWZpZWRfYnlcIjogJyArXG4gICAgICAgICAgICAgICAgJ1wiRGF0YSBQbGF0Zm9ybSBUZWFtXCIsIFwiZGV0YWlsc1wiOiBcIlRoaXMgdGFibGUgaXMgdGhlIHNvdXJjZSBvZiB0cnV0aC5cIiAnICtcbiAgICAgICAgICAgICAgICAnfSwgXCJ3YXJuaW5nX21hcmtkb3duXCI6IFwiVGhpcyBpcyBhIHdhcm5pbmcuXCIgfWAuJyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImV4dHJhXCJcbiAgICAgICAgICAgICAgICBsYW5ndWFnZT1cImpzb25cIlxuICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8T3duZXJzU2VsZWN0b3JcbiAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgIG9uQ2hhbmdlPXtuZXdPd25lcnMgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UoeyAuLi5kYXRhc291cmNlLCBvd25lcnM6IG5ld093bmVycyB9KTtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9GaWVsZHNldD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyQWR2YW5jZWRGaWVsZHNldCgpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIChcbiAgICAgIDxGaWVsZHNldFxuICAgICAgICB0aXRsZT17dCgnQWR2YW5jZWQnKX1cbiAgICAgICAgaXRlbT17ZGF0YXNvdXJjZX1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfVxuICAgICAgPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBmaWVsZEtleT1cImNhY2hlX3RpbWVvdXRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdDYWNoZSB0aW1lb3V0Jyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnVGhlIGR1cmF0aW9uIG9mIHRpbWUgaW4gc2Vjb25kcyBiZWZvcmUgdGhlIGNhY2hlIGlzIGludmFsaWRhdGVkLiBTZXQgdG8gLTEgdG8gYnlwYXNzIHRoZSBjYWNoZS4nLFxuICAgICAgICAgICl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cImNhY2hlX3RpbWVvdXRcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJvZmZzZXRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdIb3VycyBvZmZzZXQnKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwib2Zmc2V0XCIgLz59XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnVGhlIG51bWJlciBvZiBob3VycywgbmVnYXRpdmUgb3IgcG9zaXRpdmUsIHRvIHNoaWZ0IHRoZSB0aW1lIGNvbHVtbi4gVGhpcyBjYW4gYmUgdXNlZCB0byBtb3ZlIFVUQyB0aW1lIHRvIGxvY2FsIHRpbWUuJyxcbiAgICAgICAgICApfVxuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJ0ZW1wbGF0ZV9wYXJhbXNcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ1RlbXBsYXRlIHBhcmFtZXRlcnMnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAnQSBzZXQgb2YgcGFyYW1ldGVycyB0aGF0IGJlY29tZSBhdmFpbGFibGUgaW4gdGhlIHF1ZXJ5IHVzaW5nIEppbmphIHRlbXBsYXRpbmcgc3ludGF4JyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwidGVtcGxhdGVfcGFyYW1zXCIgLz59XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvRmllbGRzZXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclNwYXRpYWxUYWIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgc3BhdGlhbHMsIGFsbF9jb2xzOiBhbGxDb2xzIH0gPSBkYXRhc291cmNlO1xuICAgIHJldHVybiAoXG4gICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgIHRhYj17PENvbGxlY3Rpb25UYWJUaXRsZSBjb2xsZWN0aW9uPXtzcGF0aWFsc30gdGl0bGU9e3QoJ1NwYXRpYWwnKX0gLz59XG4gICAgICAgIGtleT17NH1cbiAgICAgID5cbiAgICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICAgIHRhYmxlQ29sdW1ucz17WyduYW1lJywgJ2NvbmZpZyddfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzLCAnc3BhdGlhbHMnKX1cbiAgICAgICAgICBpdGVtR2VuZXJhdG9yPXsoKSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogdCgnPG5ldyBzcGF0aWFsPicpLFxuICAgICAgICAgICAgdHlwZTogdCgnPG5vIHR5cGU+JyksXG4gICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgY29sbGVjdGlvbj17c3BhdGlhbHN9XG4gICAgICAgICAgYWxsb3dEZWxldGVzXG4gICAgICAgICAgaXRlbVJlbmRlcmVycz17e1xuICAgICAgICAgICAgbmFtZTogKGQsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlIGNhbkVkaXQgdGl0bGU9e2R9IG9uU2F2ZVRpdGxlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb25maWc6ICh2LCBvbkNoYW5nZSkgPT4gKFxuICAgICAgICAgICAgICA8U3BhdGlhbENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gY2hvaWNlcz17YWxsQ29sc30gLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICk7XG4gIH1cblxuICByZW5kZXJTb3VyY2VGaWVsZHNldCh0aGVtZSkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAge3RoaXMuYWxsb3dFZGl0U291cmNlICYmIChcbiAgICAgICAgICA8RWRpdExvY2tDb250YWluZXI+XG4gICAgICAgICAgICA8c3BhbiByb2xlPVwiYnV0dG9uXCIgdGFiSW5kZXg9ezB9IG9uQ2xpY2s9e3RoaXMub25DaGFuZ2VFZGl0TW9kZX0+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzRWRpdE1vZGUgPyAoXG4gICAgICAgICAgICAgICAgPEljb25zLkxvY2tVbmxvY2tlZCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX0gLz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8SWNvbnMuTG9ja0xvY2tlZCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX0gLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmIChcbiAgICAgICAgICAgICAgPGRpdj57dCgnQ2xpY2sgdGhlIGxvY2sgdG8gbWFrZSBjaGFuZ2VzLicpfTwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgICA8ZGl2Pnt0KCdDbGljayB0aGUgbG9jayB0byBwcmV2ZW50IGZ1cnRoZXIgY2hhbmdlcy4nKX08L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9FZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtLWwtMTAgbS10LTIwIG0tYi0xMFwiPlxuICAgICAgICAgIHtEQVRBU09VUkNFX1RZUEVTX0FSUi5tYXAodHlwZSA9PiAoXG4gICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAga2V5PXt0eXBlLmtleX1cbiAgICAgICAgICAgICAgdmFsdWU9e3R5cGUua2V5fVxuICAgICAgICAgICAgICBpbmxpbmVcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlVHlwZUNoYW5nZS5iaW5kKHRoaXMsIHR5cGUua2V5KX1cbiAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gdHlwZS5rZXl9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dHlwZS5sYWJlbH1cbiAgICAgICAgICAgIDwvUmFkaW8+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aHIgLz5cbiAgICAgICAgPEZpZWxkc2V0IGl0ZW09e2RhdGFzb3VyY2V9IG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX0gY29tcGFjdD5cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy52aXJ0dWFsLmtleSAmJiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJkYXRhYmFzZVNlbGVjdG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17dCgndmlydHVhbCcpfVxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0YWJhc2VTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiPXtkYXRhc291cmNlPy5kYXRhYmFzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWE9e2RhdGFzb3VyY2Uuc2NoZW1hfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NoZW1hQ2hhbmdlPXtzY2hlbWEgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdzY2hlbWEnLCBzY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRGJDaGFuZ2U9e2RhdGFiYXNlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgnZGF0YWJhc2UnLCBkYXRhYmFzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybU1vZGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yPXt0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17eyB3aWR0aDogJ2NhbGMoMTAwJSAtIDM0cHgpJywgbWFyZ2luVG9wOiAtMTYgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInRhYmxlX25hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0RhdGFzZXQgbmFtZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInRhYmxlX25hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0YWJsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3RhYmxlX25hbWUnLCB0YWJsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGF0YXNldCBuYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInNxbFwiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdTUUwnKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAgICAgJ1doZW4gc3BlY2lmeWluZyBTUUwsIHRoZSBkYXRhc291cmNlIGFjdHMgYXMgYSB2aWV3LiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdTdXBlcnNldCB3aWxsIHVzZSB0aGlzIHN0YXRlbWVudCBhcyBhIHN1YnF1ZXJ5IHdoaWxlIGdyb3VwaW5nIGFuZCBmaWx0ZXJpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb24gdGhlIGdlbmVyYXRlZCBwYXJlbnQgcXVlcmllcy4nLFxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT1cInNxbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkxpbmVzPXsyMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heExpbmVzPXsyMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwiYm90aFwiXG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3RoaXMuc3RhdGUuZGF0YXNvdXJjZVR5cGUgPT09IERBVEFTT1VSQ0VfVFlQRVMucGh5c2ljYWwua2V5ICYmIChcbiAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0YWJsZVNlbGVjdG9yXCJcbiAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdQaHlzaWNhbCcpfVxuICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXt7IG1hcmdpblRvcDogOCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8VGFibGVTZWxlY3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFzb3VyY2UuZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlX25hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8uZGF0YWJhc2VfbmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzb3VyY2UuZGF0YWJhc2U/Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgZGJJZD17ZGF0YXNvdXJjZS5kYXRhYmFzZT8uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcj17dGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYT17ZGF0YXNvdXJjZS5zY2hlbWF9XG4gICAgICAgICAgICAgICAgICAgICAgICBzcWxMYWJNb2RlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlVmFsdWU9e2RhdGFzb3VyY2UudGFibGVfbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2NoZW1hQ2hhbmdlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzY2hlbWEgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdzY2hlbWEnLCBzY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRGJDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGRhdGFiYXNlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YWJhc2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFibGVTZWxlY3RDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRhYmxlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgICAnVGhlIHBvaW50ZXIgdG8gYSBwaHlzaWNhbCB0YWJsZSAob3IgdmlldykuIEtlZXAgaW4gbWluZCB0aGF0IHRoZSBjaGFydCBpcyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnYXNzb2NpYXRlZCB0byB0aGlzIFN1cGVyc2V0IGxvZ2ljYWwgdGFibGUsIGFuZCB0aGlzIGxvZ2ljYWwgdGFibGUgcG9pbnRzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICd0aGUgcGh5c2ljYWwgdGFibGUgcmVmZXJlbmNlZCBoZXJlLicsXG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICApfVxuICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlckVycm9ycygpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEFsZXJ0XG4gICAgICAgICAgY3NzPXt0aGVtZSA9PiAoeyBtYXJnaW5Cb3R0b206IHRoZW1lLmdyaWRVbml0ICogNCB9KX1cbiAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgIG1lc3NhZ2U9e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3JzLm1hcChlcnIgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtlcnJ9PntlcnJ9PC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG1ldHJpY3MgfSA9IGRhdGFzb3VyY2U7XG4gICAgY29uc3Qgc29ydGVkTWV0cmljcyA9IG1ldHJpY3M/Lmxlbmd0aCA/IHRoaXMuc29ydE1ldHJpY3MobWV0cmljcykgOiBbXTtcbiAgICByZXR1cm4gKFxuICAgICAgPENvbGxlY3Rpb25UYWJsZVxuICAgICAgICB0YWJsZUNvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgc29ydENvbHVtbnM9e1snbWV0cmljX25hbWUnLCAndmVyYm9zZV9uYW1lJywgJ2V4cHJlc3Npb24nXX1cbiAgICAgICAgY29sdW1uTGFiZWxzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJ01ldHJpYycpLFxuICAgICAgICAgIHZlcmJvc2VfbmFtZTogdCgnTGFiZWwnKSxcbiAgICAgICAgICBleHByZXNzaW9uOiB0KCdTUUwgZXhwcmVzc2lvbicpLFxuICAgICAgICB9fVxuICAgICAgICBleHBhbmRGaWVsZHNldD17XG4gICAgICAgICAgPEZvcm1Db250YWluZXI+XG4gICAgICAgICAgICA8RmllbGRzZXQgY29tcGFjdD5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImQzZm9ybWF0XCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRDMgZm9ybWF0Jyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2wgY29udHJvbElkPVwiZDNmb3JtYXRcIiBwbGFjZWhvbGRlcj1cIiV5LyVtLyVkXCIgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpZWQgYnknKX1cbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAnUGVyc29uIG9yIGdyb3VwIHRoYXQgaGFzIGNlcnRpZmllZCB0aGlzIG1ldHJpYycsXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpZWRfYnlcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQ2VydGlmaWVkIGJ5Jyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnRGV0YWlscyBvZiB0aGUgY2VydGlmaWNhdGlvbicpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmljYXRpb25fZGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdDZXJ0aWZpY2F0aW9uIGRldGFpbHMnKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnV2FybmluZycpfVxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwid2FybmluZ19tYXJrZG93blwiXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ09wdGlvbmFsIHdhcm5pbmcgYWJvdXQgdXNlIG9mIHRoaXMgbWV0cmljJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cIndhcm5pbmdfbWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT1cIm1hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9GaWVsZHNldD5cbiAgICAgICAgICA8L0Zvcm1Db250YWluZXI+XG4gICAgICAgIH1cbiAgICAgICAgY29sbGVjdGlvbj17c29ydGVkTWV0cmljc31cbiAgICAgICAgYWxsb3dBZGRJdGVtXG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UuYmluZCh0aGlzLCAnbWV0cmljcycpfVxuICAgICAgICBpdGVtR2VuZXJhdG9yPXsoKSA9PiAoe1xuICAgICAgICAgIG1ldHJpY19uYW1lOiB0KCc8bmV3IG1ldHJpYz4nKSxcbiAgICAgICAgICB2ZXJib3NlX25hbWU6ICcnLFxuICAgICAgICAgIGV4cHJlc3Npb246ICcnLFxuICAgICAgICB9KX1cbiAgICAgICAgaXRlbUNlbGxQcm9wcz17e1xuICAgICAgICAgIGV4cHJlc3Npb246ICgpID0+ICh7XG4gICAgICAgICAgICB3aWR0aDogJzI0MHB4JyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfX1cbiAgICAgICAgaXRlbVJlbmRlcmVycz17e1xuICAgICAgICAgIG1ldHJpY19uYW1lOiAodiwgb25DaGFuZ2UsIF8sIHJlY29yZCkgPT4gKFxuICAgICAgICAgICAgPEZsZXhSb3dDb250YWluZXI+XG4gICAgICAgICAgICAgIHtyZWNvcmQuaXNfY2VydGlmaWVkICYmIChcbiAgICAgICAgICAgICAgICA8Q2VydGlmaWVkQmFkZ2VcbiAgICAgICAgICAgICAgICAgIGNlcnRpZmllZEJ5PXtyZWNvcmQuY2VydGlmaWVkX2J5fVxuICAgICAgICAgICAgICAgICAgZGV0YWlscz17cmVjb3JkLmNlcnRpZmljYXRpb25fZGV0YWlsc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7cmVjb3JkLndhcm5pbmdfbWFya2Rvd24gJiYgKFxuICAgICAgICAgICAgICAgIDxXYXJuaW5nSWNvbldpdGhUb29sdGlwXG4gICAgICAgICAgICAgICAgICB3YXJuaW5nTWFya2Rvd249e3JlY29yZC53YXJuaW5nX21hcmtkb3dufVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlIGNhbkVkaXQgdGl0bGU9e3Z9IG9uU2F2ZVRpdGxlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgICAgIDwvRmxleFJvd0NvbnRhaW5lcj5cbiAgICAgICAgICApLFxuICAgICAgICAgIHZlcmJvc2VfbmFtZTogKHYsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICA8VGV4dENvbnRyb2wgY2FuRWRpdCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICksXG4gICAgICAgICAgZXhwcmVzc2lvbjogKHYsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgIGNhbkVkaXRcbiAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlPXt2fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICAgICAgICAgIGV4dHJhQ2xhc3Nlcz17WydkYXRhc291cmNlLXNxbC1leHByZXNzaW9uJ119XG4gICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgIG1pbkxpbmVzPXs1fVxuICAgICAgICAgICAgICB0ZXh0QXJlYVN0eWxlcz17eyBtaW5XaWR0aDogJzIwMHB4JywgbWF4V2lkdGg6ICc0NTBweCcgfX1cbiAgICAgICAgICAgICAgcmVzaXplPVwiYm90aFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgICAgZGVzY3JpcHRpb246ICh2LCBvbkNoYW5nZSwgbGFiZWwpID0+IChcbiAgICAgICAgICAgIDxTdGFja2VkRmllbGRcbiAgICAgICAgICAgICAgbGFiZWw9e2xhYmVsfVxuICAgICAgICAgICAgICBmb3JtRWxlbWVudD17PFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICAgIGQzZm9ybWF0OiAodiwgb25DaGFuZ2UsIGxhYmVsKSA9PiAoXG4gICAgICAgICAgICA8U3RhY2tlZEZpZWxkXG4gICAgICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgICAgZm9ybUVsZW1lbnQ9ezxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfX1cbiAgICAgICAgYWxsb3dEZWxldGVzXG4gICAgICAgIHN0aWNreUhlYWRlclxuICAgICAgLz5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSwgYWN0aXZlVGFiS2V5IH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgbWV0cmljcyB9ID0gZGF0YXNvdXJjZTtcbiAgICBjb25zdCBzb3J0ZWRNZXRyaWNzID0gbWV0cmljcz8ubGVuZ3RoID8gdGhpcy5zb3J0TWV0cmljcyhtZXRyaWNzKSA6IFtdO1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPERhdGFzb3VyY2VDb250YWluZXI+XG4gICAgICAgIHt0aGlzLnJlbmRlckVycm9ycygpfVxuICAgICAgICA8QWxlcnRcbiAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7IG1hcmdpbkJvdHRvbTogdGhlbWUuZ3JpZFVuaXQgKiA0IH0pfVxuICAgICAgICAgIHR5cGU9XCJ3YXJuaW5nXCJcbiAgICAgICAgICBtZXNzYWdlPXtcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgIDxzdHJvbmc+e3QoJ0JlIGNhcmVmdWwuJyl9IDwvc3Ryb25nPlxuICAgICAgICAgICAgICB7dChcbiAgICAgICAgICAgICAgICAnQ2hhbmdpbmcgdGhlc2Ugc2V0dGluZ3Mgd2lsbCBhZmZlY3QgYWxsIGNoYXJ0cyB1c2luZyB0aGlzIGRhdGFzZXQsIGluY2x1ZGluZyBjaGFydHMgb3duZWQgYnkgb3RoZXIgcGVvcGxlLicsXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxTdHlsZWRUYWJsZVRhYnNcbiAgICAgICAgICBmdWxsV2lkdGg9e2ZhbHNlfVxuICAgICAgICAgIGlkPVwidGFibGUtdGFic1wiXG4gICAgICAgICAgZGF0YS10ZXN0PVwiZWRpdC1kYXRhc2V0LXRhYnNcIlxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVRhYlNlbGVjdH1cbiAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXthY3RpdmVUYWJLZXl9XG4gICAgICAgID5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lIGtleT17MH0gdGFiPXt0KCdTb3VyY2UnKX0+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJTb3VyY2VGaWVsZHNldCh0aGVtZSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3NvcnRlZE1ldHJpY3N9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ01ldHJpY3MnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleT17MX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGhpcy5yZW5kZXJNZXRyaWNDb2xsZWN0aW9uKCl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3RoaXMuc3RhdGUuZGF0YWJhc2VDb2x1bW5zfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdDb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezJ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICA8U3R5bGVkQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJ0ZXJ0aWFyeVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc3luY01ldGFkYXRhfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzeW5jLWZyb20tc291cmNlXCJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZGF0YWJhc2VcIiAvPnsnICd9XG4gICAgICAgICAgICAgICAgICAgIHt0KCdTeW5jIGNvbHVtbnMgZnJvbSBzb3VyY2UnKX1cbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvU3R5bGVkQnV0dG9uV3JhcHBlcj5cbiAgICAgICAgICAgICAgPC9Db2x1bW5CdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY29sdW1ucy10YWJsZVwiXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnN9XG4gICAgICAgICAgICAgICAgZGF0YXNvdXJjZT17ZGF0YXNvdXJjZX1cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2RhdGFiYXNlQ29sdW1ucyA9PlxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5zKHsgZGF0YWJhc2VDb2x1bW5zIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uRGF0YXNvdXJjZUNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLm1ldGFkYXRhTG9hZGluZyAmJiA8TG9hZGluZyAvPn1cbiAgICAgICAgICAgIDwvU3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZVxuICAgICAgICAgICAgdGFiPXtcbiAgICAgICAgICAgICAgPENvbGxlY3Rpb25UYWJUaXRsZVxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb249e3RoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnN9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0NhbGN1bGF0ZWQgY29sdW1ucycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5PXszfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxTdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICAgICAgPENvbHVtbkNvbGxlY3Rpb25UYWJsZVxuICAgICAgICAgICAgICAgIGNvbHVtbnM9e3RoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnN9XG4gICAgICAgICAgICAgICAgb25Db2x1bW5zQ2hhbmdlPXtjYWxjdWxhdGVkQ29sdW1ucyA9PlxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2x1bW5zKHsgY2FsY3VsYXRlZENvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIGVkaXRhYmxlQ29sdW1uTmFtZVxuICAgICAgICAgICAgICAgIHNob3dFeHByZXNzaW9uXG4gICAgICAgICAgICAgICAgYWxsb3dBZGRJdGVtXG4gICAgICAgICAgICAgICAgYWxsb3dFZGl0RGF0YVR5cGVcbiAgICAgICAgICAgICAgICBpdGVtR2VuZXJhdG9yPXsoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgY29sdW1uX25hbWU6IHQoJzxuZXcgY29sdW1uPicpLFxuICAgICAgICAgICAgICAgICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGdyb3VwYnk6IHRydWUsXG4gICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiB0KCc8ZW50ZXIgU1FMIGV4cHJlc3Npb24gaGVyZT4nKSxcbiAgICAgICAgICAgICAgICAgIF9fZXhwYW5kZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1N0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxuICAgICAgICAgIDxUYWJzLlRhYlBhbmUga2V5PXs0fSB0YWI9e3QoJ1NldHRpbmdzJyl9PlxuICAgICAgICAgICAgPFJvdyBndXR0ZXI9ezE2fT5cbiAgICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgICAgPEZvcm1Db250YWluZXI+e3RoaXMucmVuZGVyU2V0dGluZ3NGaWVsZHNldCgpfTwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgIDxGb3JtQ29udGFpbmVyPnt0aGlzLnJlbmRlckFkdmFuY2VkRmllbGRzZXQoKX08L0Zvcm1Db250YWluZXI+XG4gICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgPC9Sb3c+XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgIDwvU3R5bGVkVGFibGVUYWJzPlxuICAgICAgPC9EYXRhc291cmNlQ29udGFpbmVyPlxuICAgICk7XG4gIH1cbn1cblxuRGF0YXNvdXJjZUVkaXRvci5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5EYXRhc291cmNlRWRpdG9yLnByb3BUeXBlcyA9IHByb3BUeXBlcztcblxuY29uc3QgRGF0YVNvdXJjZUNvbXBvbmVudCA9IHdpdGhUaGVtZShEYXRhc291cmNlRWRpdG9yKTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRvYXN0cyhEYXRhU291cmNlQ29tcG9uZW50KTtcbiJdfQ== */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\nfunction CollectionTabTitle(_ref12) {let { title, collection } = _ref12;\n  return (\n    ___EmotionJSX(\"div\", {\n      css: _ref13,\n      \"data-test\": `collection-tab-${title}` },\n\n    title, ' ',\n    ___EmotionJSX(StyledBadge, { count: collection ? collection.length : 0, showZero: true })));\n\n\n}\n\nCollectionTabTitle.propTypes = {\n  title: PropTypes.string,\n  collection: PropTypes.array };\n\n\nfunction ColumnCollectionTable(_ref14)\n\n\n\n\n\n\n\n\n\n{let { columns, datasource, onColumnsChange, onDatasourceChange, editableColumnName, showExpression, allowAddItem, allowEditDataType, itemGenerator } = _ref14;\n  return (\n    ___EmotionJSX(CollectionTable, {\n      collection: columns,\n      tableColumns:\n      isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES) ?\n      [\n      'column_name',\n      'advanced_data_type',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'] :\n\n      [\n      'column_name',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'],\n\n\n      sortColumns:\n      isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES) ?\n      [\n      'column_name',\n      'advanced_data_type',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'] :\n\n      [\n      'column_name',\n      'type',\n      'is_dttm',\n      'main_dttm_col',\n      'filterable',\n      'groupby'],\n\n\n      allowDeletes: true,\n      allowAddItem: allowAddItem,\n      itemGenerator: itemGenerator,\n      stickyHeader: true,\n      expandFieldset:\n      ___EmotionJSX(FormContainer, null,\n      ___EmotionJSX(Fieldset, { compact: true },\n      showExpression &&\n      ___EmotionJSX(Field, {\n        fieldKey: \"expression\",\n        label: t('SQL expression'),\n        control:\n        ___EmotionJSX(TextAreaControl, {\n          language: \"markdown\",\n          offerEditInModal: false,\n          resize: \"vertical\" }) }),\n\n\n\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"verbose_name\",\n        label: t('Label'),\n        control:\n        ___EmotionJSX(TextControl, {\n          controlId: \"verbose_name\",\n          placeholder: t('Label') }) }),\n\n\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"description\",\n        label: t('Description'),\n        control:\n        ___EmotionJSX(TextControl, {\n          controlId: \"description\",\n          placeholder: t('Description') }) }),\n\n\n\n      allowEditDataType &&\n      ___EmotionJSX(Field, {\n        fieldKey: \"type\",\n        label: t('Data type'),\n        control:\n        ___EmotionJSX(Select, {\n          ariaLabel: t('Data type'),\n          options: DATA_TYPES,\n          name: \"type\",\n          allowNewOptions: true,\n          allowClear: true }) }),\n\n\n\n\n      isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES) ?\n      ___EmotionJSX(Field, {\n        fieldKey: \"advanced_data_type\",\n        label: t('Advanced data type'),\n        control:\n        ___EmotionJSX(TextControl, {\n          controlId: \"advanced_data_type\",\n          placeholder: t('Advanced Data type') }) }) :\n\n\n\n\n      ___EmotionJSX(React.Fragment, null),\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"python_date_format\",\n        label: t('Datetime format'),\n        description:\n        /* Note the fragmented translations may not work. */\n        ___EmotionJSX(\"div\", null,\n        t('The pattern of timestamp format. For strings use '),\n        ___EmotionJSX(\"a\", { href: \"https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior\" },\n        t('Python datetime string pattern')),\n\n        t(' expression which needs to adhere to the '),\n        ___EmotionJSX(\"a\", { href: \"https://en.wikipedia.org/wiki/ISO_8601\" },\n        t('ISO 8601')),\n\n        t(` standard to ensure that the lexicographical ordering\n                      coincides with the chronological ordering. If the\n                      timestamp format does not adhere to the ISO 8601 standard\n                      you will need to define an expression and type for\n                      transforming the string into a date or timestamp. Note\n                      currently time zones are not supported. If time is stored\n                      in epoch format, put \\`epoch_s\\` or \\`epoch_ms\\`. If no pattern\n                      is specified we fall back to using the optional defaults on a per\n                      database/column name level via the extra parameter.`)),\n\n\n        control:\n        ___EmotionJSX(TextControl, {\n          controlId: \"python_date_format\",\n          placeholder: \"%Y/%m/%d\" }) }),\n\n\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"certified_by\",\n        label: t('Certified By'),\n        description: t('Person or group that has certified this metric'),\n        control:\n        ___EmotionJSX(TextControl, {\n          controlId: \"certified\",\n          placeholder: t('Certified by') }) }),\n\n\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"certification_details\",\n        label: t('Certification details'),\n        description: t('Details of the certification'),\n        control:\n        ___EmotionJSX(TextControl, {\n          controlId: \"certificationDetails\",\n          placeholder: t('Certification details') }) }))),\n\n\n\n\n\n\n      columnLabels:\n      isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES) ?\n      {\n        column_name: t('Column'),\n        advanced_data_type: t('Advanced data type'),\n        type: t('Data type'),\n        groupby: t('Is dimension'),\n        is_dttm: t('Is temporal'),\n        main_dttm_col: t('Default datetime'),\n        filterable: t('Is filterable') } :\n\n      {\n        column_name: t('Column'),\n        type: t('Data type'),\n        groupby: t('Is dimension'),\n        is_dttm: t('Is temporal'),\n        main_dttm_col: t('Default datetime'),\n        filterable: t('Is filterable') },\n\n\n      onChange: onColumnsChange,\n      itemRenderers:\n      isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES) ?\n      {\n        column_name: (v, onItemChange, _, record) =>\n        editableColumnName ?\n        ___EmotionJSX(StyledLabelWrapper, null,\n        record.is_certified &&\n        ___EmotionJSX(CertifiedBadge, {\n          certifiedBy: record.certified_by,\n          details: record.certification_details }),\n\n\n        ___EmotionJSX(EditableTitle, {\n          canEdit: true,\n          title: v,\n          onSaveTitle: onItemChange })) :\n\n\n\n        ___EmotionJSX(StyledLabelWrapper, null,\n        record.is_certified &&\n        ___EmotionJSX(CertifiedBadge, {\n          certifiedBy: record.certified_by,\n          details: record.certification_details }),\n\n\n        v),\n\n\n        main_dttm_col: (value, _onItemChange, _label, record) => {\n          const checked = datasource.main_dttm_col === record.column_name;\n          const disabled = !columns.find(\n          (column) => column.column_name === record.column_name).\n          is_dttm;\n          return (\n            ___EmotionJSX(Radio, {\n              \"data-test\": `radio-default-dttm-${record.column_name}`,\n              checked: checked,\n              disabled: disabled,\n              onChange: () =>\n              onDatasourceChange({\n                ...datasource,\n                main_dttm_col: record.column_name }) }));\n\n\n\n\n        },\n        type: (d) => d ? ___EmotionJSX(Label, null, d) : null,\n        advanced_data_type: (d) =>\n        ___EmotionJSX(Label, { onChange: onColumnsChange }, d),\n\n        is_dttm: checkboxGenerator,\n        filterable: checkboxGenerator,\n        groupby: checkboxGenerator } :\n\n      {\n        column_name: (v, onItemChange, _, record) =>\n        editableColumnName ?\n        ___EmotionJSX(StyledLabelWrapper, null,\n        record.is_certified &&\n        ___EmotionJSX(CertifiedBadge, {\n          certifiedBy: record.certified_by,\n          details: record.certification_details }),\n\n\n        ___EmotionJSX(TextControl, { value: v, onChange: onItemChange })) :\n\n\n        ___EmotionJSX(StyledLabelWrapper, null,\n        record.is_certified &&\n        ___EmotionJSX(CertifiedBadge, {\n          certifiedBy: record.certified_by,\n          details: record.certification_details }),\n\n\n        v),\n\n\n        main_dttm_col: (value, _onItemChange, _label, record) => {\n          const checked = datasource.main_dttm_col === record.column_name;\n          const disabled = !columns.find(\n          (column) => column.column_name === record.column_name).\n          is_dttm;\n          return (\n            ___EmotionJSX(Radio, {\n              \"data-test\": `radio-default-dttm-${record.column_name}`,\n              checked: checked,\n              disabled: disabled,\n              onChange: () =>\n              onDatasourceChange({\n                ...datasource,\n                main_dttm_col: record.column_name }) }));\n\n\n\n\n        },\n        type: (d) => d ? ___EmotionJSX(Label, null, d) : null,\n        is_dttm: checkboxGenerator,\n        filterable: checkboxGenerator,\n        groupby: checkboxGenerator } }));\n\n\n\n\n}\nColumnCollectionTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  datasource: PropTypes.object.isRequired,\n  onColumnsChange: PropTypes.func.isRequired,\n  onDatasourceChange: PropTypes.func.isRequired,\n  editableColumnName: PropTypes.bool,\n  showExpression: PropTypes.bool,\n  allowAddItem: PropTypes.bool,\n  allowEditDataType: PropTypes.bool,\n  itemGenerator: PropTypes.func };\n\nColumnCollectionTable.defaultProps = {\n  editableColumnName: false,\n  showExpression: false,\n  allowAddItem: false,\n  allowEditDataType: false,\n  itemGenerator: () => ({\n    column_name: t('<new column>'),\n    filterable: true,\n    groupby: true }) };\n\n\n\nfunction StackedField(_ref15) {let { label, formElement } = _ref15;\n  return (\n    ___EmotionJSX(\"div\", null,\n    ___EmotionJSX(\"div\", null,\n    ___EmotionJSX(\"strong\", null, label)),\n\n    ___EmotionJSX(\"div\", null, formElement)));\n\n\n}\n\nStackedField.propTypes = {\n  label: PropTypes.string,\n  formElement: PropTypes.node };\n\n\nfunction FormContainer(_ref16) {let { children } = _ref16;\n  return ___EmotionJSX(Card, { padded: true }, children);\n}\n\nFormContainer.propTypes = {\n  children: PropTypes.node };\n\n\nconst propTypes = {\n  datasource: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  setIsEditing: PropTypes.func };\n\n\nconst defaultProps = {\n  onChange: () => {},\n  setIsEditing: () => {} };\n\n\nfunction OwnersSelector(_ref17) {let { datasource, onChange } = _ref17;\n  const loadOptions = useCallback(function (search, page, pageSize) {if (search === void 0) {search = '';}\n    const query = rison.encode({ filter: search, page, page_size: pageSize });\n    return SupersetClient.get({\n      endpoint: `/api/v1/dataset/related/owners?q=${query}` }).\n    then((response) => ({\n      data: response.json.result.\n      filter((item) => item.extra.active).\n      map((item) => ({\n        value: item.value,\n        label: item.text })),\n\n      totalCount: response.json.count }));\n\n  }, []);\n\n  return (\n    ___EmotionJSX(AsyncSelect, {\n      ariaLabel: t('Select owners'),\n      mode: \"multiple\",\n      name: \"owners\",\n      value: datasource.owners,\n      options: loadOptions,\n      onChange: onChange,\n      header: ___EmotionJSX(FormLabel, null, t('Owners')),\n      allowClear: true }));\n\n\n}__signature__(OwnersSelector, \"useCallback{loadOptions}\");var _ref23 = process.env.NODE_ENV === \"production\" ? { name: \"hkh81z\", styles: \"margin-top:8px\" } : { name: \"17jm38f-DatasourceEditor\", styles: \"margin-top:8px;label:DatasourceEditor;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvRGF0YXNvdXJjZS9EYXRhc291cmNlRWRpdG9yLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5aEM2QiIsImZpbGUiOiIvVXNlcnMvYm9nZGFua3lyeWxpdWsvY29kZS9vcGVuc291cmNlL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL0RhdGFzb3VyY2UvRGF0YXNvdXJjZUVkaXRvci5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUmFkaW8nO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgQWxlcnQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQWxlcnQnO1xuaW1wb3J0IEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0JhZGdlJztcbmltcG9ydCBzaG9ydGlkIGZyb20gJ3Nob3J0aWQnO1xuaW1wb3J0IHtcbiAgRmVhdHVyZUZsYWcsXG4gIHN0eWxlZCxcbiAgU3VwZXJzZXRDbGllbnQsXG4gIHQsXG4gIHdpdGhUaGVtZSxcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgU2VsZWN0LCBBc3luY1NlbGVjdCwgUm93LCBDb2wgfSBmcm9tICdzcmMvY29tcG9uZW50cyc7XG5pbXBvcnQgeyBGb3JtTGFiZWwgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Gb3JtJztcbmltcG9ydCBCdXR0b24gZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCBUYWJzIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYnMnO1xuaW1wb3J0IENlcnRpZmllZEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0NlcnRpZmllZEJhZGdlJztcbmltcG9ydCBXYXJuaW5nSWNvbldpdGhUb29sdGlwIGZyb20gJ3NyYy9jb21wb25lbnRzL1dhcm5pbmdJY29uV2l0aFRvb2x0aXAnO1xuaW1wb3J0IERhdGFiYXNlU2VsZWN0b3IgZnJvbSAnc3JjL2NvbXBvbmVudHMvRGF0YWJhc2VTZWxlY3Rvcic7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnc3JjL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgVGFibGVTZWxlY3RvciBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZVNlbGVjdG9yJztcbmltcG9ydCBFZGl0YWJsZVRpdGxlIGZyb20gJ3NyYy9jb21wb25lbnRzL0VkaXRhYmxlVGl0bGUnO1xuaW1wb3J0IHsgZ2V0Q2xpZW50RXJyb3JPYmplY3QgfSBmcm9tICdzcmMvdXRpbHMvZ2V0Q2xpZW50RXJyb3JPYmplY3QnO1xuaW1wb3J0IENoZWNrYm94Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NoZWNrYm94Q29udHJvbCc7XG5pbXBvcnQgVGV4dENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0Q29udHJvbCc7XG5pbXBvcnQgVGV4dEFyZWFDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dEFyZWFDb250cm9sJztcbmltcG9ydCBTcGF0aWFsQ29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1NwYXRpYWxDb250cm9sJztcbmltcG9ydCB3aXRoVG9hc3RzIGZyb20gJ3NyYy9jb21wb25lbnRzL01lc3NhZ2VUb2FzdHMvd2l0aFRvYXN0cyc7XG5pbXBvcnQgeyBpc0ZlYXR1cmVFbmFibGVkIH0gZnJvbSAnc3JjL2ZlYXR1cmVGbGFncyc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IENvbGxlY3Rpb25UYWJsZSBmcm9tICcuL0NvbGxlY3Rpb25UYWJsZSc7XG5pbXBvcnQgRmllbGRzZXQgZnJvbSAnLi9GaWVsZHNldCc7XG5pbXBvcnQgRmllbGQgZnJvbSAnLi9GaWVsZCc7XG5cbmNvbnN0IERhdGFzb3VyY2VDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICAuY2hhbmdlLXdhcm5pbmcge1xuICAgIG1hcmdpbjogMTZweCAxMHB4IDA7XG4gICAgY29sb3I6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuY29sb3JzLndhcm5pbmcuYmFzZX07XG4gIH1cblxuICAuY2hhbmdlLXdhcm5pbmcgLmJvbGQge1xuICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgfVxuXG4gIC5mb3JtLWdyb3VwLmhhcy1mZWVkYmFjayA+IC5oZWxwLWJsb2NrIHtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG4gIH1cblxuICAuZm9ybS1ncm91cC5mb3JtLWdyb3VwLW1kIHtcbiAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gIH1cbmA7XG5cbmNvbnN0IEZsZXhSb3dDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuXG4gIHN2ZyB7XG4gICAgbWFyZ2luLXJpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRUYWJsZVRhYnMgPSBzdHlsZWQoVGFicylgXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICAuYW50LXRhYnMtY29udGVudC1ob2xkZXIge1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRCYWRnZSA9IHN0eWxlZChCYWRnZSlgXG4gIC5hbnQtYmFkZ2UtY291bnQge1xuICAgIGxpbmUtaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBoZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA0fXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBFZGl0TG9ja0NvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGZvbnQtc2l6ZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGEge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgfVxuYDtcblxuY29uc3QgQ29sdW1uQnV0dG9uV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICAkeyh7IHRoZW1lIH0pID0+IGBtYXJnaW4tYm90dG9tOiAke3RoZW1lLmdyaWRVbml0ICogMn1weGB9XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBzcGFuIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgLnRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB9XG5cbiAgLmFudC10YWcge1xuICAgIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuc3BhbmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgbWFyZ2luLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICBgfVxuYDtcblxuY29uc3QgY2hlY2tib3hHZW5lcmF0b3IgPSAoZCwgb25DaGFuZ2UpID0+IChcbiAgPENoZWNrYm94Q29udHJvbCB2YWx1ZT17ZH0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPlxuKTtcbmNvbnN0IERBVEFfVFlQRVMgPSBbXG4gIHsgdmFsdWU6ICdTVFJJTkcnLCBsYWJlbDogdCgnU1RSSU5HJykgfSxcbiAgeyB2YWx1ZTogJ05VTUVSSUMnLCBsYWJlbDogdCgnTlVNRVJJQycpIH0sXG4gIHsgdmFsdWU6ICdEQVRFVElNRScsIGxhYmVsOiB0KCdEQVRFVElNRScpIH0sXG4gIHsgdmFsdWU6ICdCT09MRUFOJywgbGFiZWw6IHQoJ0JPT0xFQU4nKSB9LFxuXTtcblxuY29uc3QgREFUQVNPVVJDRV9UWVBFU19BUlIgPSBbXG4gIHsga2V5OiAncGh5c2ljYWwnLCBsYWJlbDogdCgnUGh5c2ljYWwgKHRhYmxlIG9yIHZpZXcpJykgfSxcbiAgeyBrZXk6ICd2aXJ0dWFsJywgbGFiZWw6IHQoJ1ZpcnR1YWwgKFNRTCknKSB9LFxuXTtcbmNvbnN0IERBVEFTT1VSQ0VfVFlQRVMgPSB7fTtcbkRBVEFTT1VSQ0VfVFlQRVNfQVJSLmZvckVhY2gobyA9PiB7XG4gIERBVEFTT1VSQ0VfVFlQRVNbby5rZXldID0gbztcbn0pO1xuXG5mdW5jdGlvbiBDb2xsZWN0aW9uVGFiVGl0bGUoeyB0aXRsZSwgY29sbGVjdGlvbiB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY3NzPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX1cbiAgICAgIGRhdGEtdGVzdD17YGNvbGxlY3Rpb24tdGFiLSR7dGl0bGV9YH1cbiAgICA+XG4gICAgICB7dGl0bGV9eycgJ31cbiAgICAgIDxTdHlsZWRCYWRnZSBjb3VudD17Y29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMH0gc2hvd1plcm8gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuQ29sbGVjdGlvblRhYlRpdGxlLnByb3BUeXBlcyA9IHtcbiAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbGxlY3Rpb246IFByb3BUeXBlcy5hcnJheSxcbn07XG5cbmZ1bmN0aW9uIENvbHVtbkNvbGxlY3Rpb25UYWJsZSh7XG4gIGNvbHVtbnMsXG4gIGRhdGFzb3VyY2UsXG4gIG9uQ29sdW1uc0NoYW5nZSxcbiAgb25EYXRhc291cmNlQ2hhbmdlLFxuICBlZGl0YWJsZUNvbHVtbk5hbWUsXG4gIHNob3dFeHByZXNzaW9uLFxuICBhbGxvd0FkZEl0ZW0sXG4gIGFsbG93RWRpdERhdGFUeXBlLFxuICBpdGVtR2VuZXJhdG9yLFxufSkge1xuICByZXR1cm4gKFxuICAgIDxDb2xsZWN0aW9uVGFibGVcbiAgICAgIGNvbGxlY3Rpb249e2NvbHVtbnN9XG4gICAgICB0YWJsZUNvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgc29ydENvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgYWxsb3dEZWxldGVzXG4gICAgICBhbGxvd0FkZEl0ZW09e2FsbG93QWRkSXRlbX1cbiAgICAgIGl0ZW1HZW5lcmF0b3I9e2l0ZW1HZW5lcmF0b3J9XG4gICAgICBzdGlja3lIZWFkZXJcbiAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgPEZvcm1Db250YWluZXI+XG4gICAgICAgICAgPEZpZWxkc2V0IGNvbXBhY3Q+XG4gICAgICAgICAgICB7c2hvd0V4cHJlc3Npb24gJiYgKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImV4cHJlc3Npb25cIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdTUUwgZXhwcmVzc2lvbicpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT1cIm1hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdMYWJlbCcpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnTGFiZWwnKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge2FsbG93RWRpdERhdGFUeXBlICYmIChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e0RBVEFfVFlQRVN9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dOZXdPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKSA/IChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdBZHZhbmNlZCBkYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQWR2YW5jZWQgRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDw+PC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwicHl0aG9uX2RhdGVfZm9ybWF0XCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0RhdGV0aW1lIGZvcm1hdCcpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgICAgICAgICAgLyogTm90ZSB0aGUgZnJhZ21lbnRlZCB0cmFuc2xhdGlvbnMgbWF5IG5vdCB3b3JrLiAqL1xuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICB7dCgnVGhlIHBhdHRlcm4gb2YgdGltZXN0YW1wIGZvcm1hdC4gRm9yIHN0cmluZ3MgdXNlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5weXRob24ub3JnLzIvbGlicmFyeS9kYXRldGltZS5odG1sI3N0cmZ0aW1lLXN0cnB0aW1lLWJlaGF2aW9yXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdQeXRob24gZGF0ZXRpbWUgc3RyaW5nIHBhdHRlcm4nKX1cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIHt0KCcgZXhwcmVzc2lvbiB3aGljaCBuZWVkcyB0byBhZGhlcmUgdG8gdGhlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdJU08gODYwMScpfVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAge3QoYCBzdGFuZGFyZCB0byBlbnN1cmUgdGhhdCB0aGUgbGV4aWNvZ3JhcGhpY2FsIG9yZGVyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgY29pbmNpZGVzIHdpdGggdGhlIGNocm9ub2xvZ2ljYWwgb3JkZXJpbmcuIElmIHRoZVxuICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCBmb3JtYXQgZG9lcyBub3QgYWRoZXJlIHRvIHRoZSBJU08gODYwMSBzdGFuZGFyZFxuICAgICAgICAgICAgICAgICAgICAgIHlvdSB3aWxsIG5lZWQgdG8gZGVmaW5lIGFuIGV4cHJlc3Npb24gYW5kIHR5cGUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtaW5nIHRoZSBzdHJpbmcgaW50byBhIGRhdGUgb3IgdGltZXN0YW1wLiBOb3RlXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5IHRpbWUgem9uZXMgYXJlIG5vdCBzdXBwb3J0ZWQuIElmIHRpbWUgaXMgc3RvcmVkXG4gICAgICAgICAgICAgICAgICAgICAgaW4gZXBvY2ggZm9ybWF0LCBwdXQgXFxgZXBvY2hfc1xcYCBvciBcXGBlcG9jaF9tc1xcYC4gSWYgbm8gcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICAgIGlzIHNwZWNpZmllZCB3ZSBmYWxsIGJhY2sgdG8gdXNpbmcgdGhlIG9wdGlvbmFsIGRlZmF1bHRzIG9uIGEgcGVyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UvY29sdW1uIG5hbWUgbGV2ZWwgdmlhIHRoZSBleHRyYSBwYXJhbWV0ZXIuYCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJweXRob25fZGF0ZV9mb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIlWS8lbS8lZFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpZWQgQnknKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpZWRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbkRldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9GaWVsZHNldD5cbiAgICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgICAgfVxuICAgICAgY29sdW1uTGFiZWxzPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTkFCTEVfQURWQU5DRURfREFUQV9UWVBFUylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6IHQoJ0NvbHVtbicpLFxuICAgICAgICAgICAgICBhZHZhbmNlZF9kYXRhX3R5cGU6IHQoJ0FkdmFuY2VkIGRhdGEgdHlwZScpLFxuICAgICAgICAgICAgICB0eXBlOiB0KCdEYXRhIHR5cGUnKSxcbiAgICAgICAgICAgICAgZ3JvdXBieTogdCgnSXMgZGltZW5zaW9uJyksXG4gICAgICAgICAgICAgIGlzX2R0dG06IHQoJ0lzIHRlbXBvcmFsJyksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHQoJ0RlZmF1bHQgZGF0ZXRpbWUnKSxcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogdCgnSXMgZmlsdGVyYWJsZScpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnQ29sdW1uJyksXG4gICAgICAgICAgICAgIHR5cGU6IHQoJ0RhdGEgdHlwZScpLFxuICAgICAgICAgICAgICBncm91cGJ5OiB0KCdJcyBkaW1lbnNpb24nKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogdCgnSXMgdGVtcG9yYWwnKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogdCgnRGVmYXVsdCBkYXRldGltZScpLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0KCdJcyBmaWx0ZXJhYmxlJyksXG4gICAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbkNoYW5nZT17b25Db2x1bW5zQ2hhbmdlfVxuICAgICAgaXRlbVJlbmRlcmVycz17XG4gICAgICAgIGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRU5BQkxFX0FEVkFOQ0VEX0RBVEFfVFlQRVMpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt2fVxuICAgICAgICAgICAgICAgICAgICAgIG9uU2F2ZVRpdGxlPXtvbkl0ZW1DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHt2fVxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogKHZhbHVlLCBfb25JdGVtQ2hhbmdlLCBfbGFiZWwsIHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBkYXRhc291cmNlLm1haW5fZHR0bV9jb2wgPT09IHJlY29yZC5jb2x1bW5fbmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9ICFjb2x1bW5zLmZpbmQoXG4gICAgICAgICAgICAgICAgICBjb2x1bW4gPT4gY29sdW1uLmNvbHVtbl9uYW1lID09PSByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgKS5pc19kdHRtO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PXtgcmFkaW8tZGVmYXVsdC1kdHRtLSR7cmVjb3JkLmNvbHVtbl9uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0eXBlOiBkID0+IChkID8gPExhYmVsPntkfTwvTGFiZWw+IDogbnVsbCksXG4gICAgICAgICAgICAgIGFkdmFuY2VkX2RhdGFfdHlwZTogZCA9PiAoXG4gICAgICAgICAgICAgICAgPExhYmVsIG9uQ2hhbmdlPXtvbkNvbHVtbnNDaGFuZ2V9PntkfTwvTGFiZWw+XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGlzX2R0dG06IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZ3JvdXBieTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uSXRlbUNoYW5nZX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3Z9XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiAodmFsdWUsIF9vbkl0ZW1DaGFuZ2UsIF9sYWJlbCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGRhdGFzb3VyY2UubWFpbl9kdHRtX2NvbCA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gIWNvbHVtbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIGNvbHVtbiA9PiBjb2x1bW4uY29sdW1uX25hbWUgPT09IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICApLmlzX2R0dG07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9e2ByYWRpby1kZWZhdWx0LWR0dG0tJHtyZWNvcmQuY29sdW1uX25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHR5cGU6IGQgPT4gKGQgPyA8TGFiZWw+e2R9PC9MYWJlbD4gOiBudWxsKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBncm91cGJ5OiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAvPlxuICApO1xufVxuQ29sdW1uQ29sbGVjdGlvblRhYmxlLnByb3BUeXBlcyA9IHtcbiAgY29sdW1uczogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25Db2x1bW5zQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBvbkRhdGFzb3VyY2VDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGVkaXRhYmxlQ29sdW1uTmFtZTogUHJvcFR5cGVzLmJvb2wsXG4gIHNob3dFeHByZXNzaW9uOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dBZGRJdGVtOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dFZGl0RGF0YVR5cGU6IFByb3BUeXBlcy5ib29sLFxuICBpdGVtR2VuZXJhdG9yOiBQcm9wVHlwZXMuZnVuYyxcbn07XG5Db2x1bW5Db2xsZWN0aW9uVGFibGUuZGVmYXVsdFByb3BzID0ge1xuICBlZGl0YWJsZUNvbHVtbk5hbWU6IGZhbHNlLFxuICBzaG93RXhwcmVzc2lvbjogZmFsc2UsXG4gIGFsbG93QWRkSXRlbTogZmFsc2UsXG4gIGFsbG93RWRpdERhdGFUeXBlOiBmYWxzZSxcbiAgaXRlbUdlbmVyYXRvcjogKCkgPT4gKHtcbiAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICBncm91cGJ5OiB0cnVlLFxuICB9KSxcbn07XG5cbmZ1bmN0aW9uIFN0YWNrZWRGaWVsZCh7IGxhYmVsLCBmb3JtRWxlbWVudCB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxzdHJvbmc+e2xhYmVsfTwvc3Ryb25nPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2Pntmb3JtRWxlbWVudH08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuU3RhY2tlZEZpZWxkLnByb3BUeXBlcyA9IHtcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZvcm1FbGVtZW50OiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmZ1bmN0aW9uIEZvcm1Db250YWluZXIoeyBjaGlsZHJlbiB9KSB7XG4gIHJldHVybiA8Q2FyZCBwYWRkZWQ+e2NoaWxkcmVufTwvQ2FyZD47XG59XG5cbkZvcm1Db250YWluZXIucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG59O1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICBhZGRTdWNjZXNzVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGFkZERhbmdlclRvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZXRJc0VkaXRpbmc6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBvbkNoYW5nZTogKCkgPT4ge30sXG4gIHNldElzRWRpdGluZzogKCkgPT4ge30sXG59O1xuXG5mdW5jdGlvbiBPd25lcnNTZWxlY3Rvcih7IGRhdGFzb3VyY2UsIG9uQ2hhbmdlIH0pIHtcbiAgY29uc3QgbG9hZE9wdGlvbnMgPSB1c2VDYWxsYmFjaygoc2VhcmNoID0gJycsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSByaXNvbi5lbmNvZGUoeyBmaWx0ZXI6IHNlYXJjaCwgcGFnZSwgcGFnZV9zaXplOiBwYWdlU2l6ZSB9KTtcbiAgICByZXR1cm4gU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9kYXRhc2V0L3JlbGF0ZWQvb3duZXJzP3E9JHtxdWVyeX1gLFxuICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gKHtcbiAgICAgIGRhdGE6IHJlc3BvbnNlLmpzb24ucmVzdWx0XG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLmV4dHJhLmFjdGl2ZSlcbiAgICAgICAgLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgbGFiZWw6IGl0ZW0udGV4dCxcbiAgICAgICAgfSkpLFxuICAgICAgdG90YWxDb3VudDogcmVzcG9uc2UuanNvbi5jb3VudCxcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxBc3luY1NlbGVjdFxuICAgICAgYXJpYUxhYmVsPXt0KCdTZWxlY3Qgb3duZXJzJyl9XG4gICAgICBtb2RlPVwibXVsdGlwbGVcIlxuICAgICAgbmFtZT1cIm93bmVyc1wiXG4gICAgICB2YWx1ZT17ZGF0YXNvdXJjZS5vd25lcnN9XG4gICAgICBvcHRpb25zPXtsb2FkT3B0aW9uc31cbiAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgIGhlYWRlcj17PEZvcm1MYWJlbD57dCgnT3duZXJzJyl9PC9Gb3JtTGFiZWw+fVxuICAgICAgYWxsb3dDbGVhclxuICAgIC8+XG4gICk7XG59XG5cbmNsYXNzIERhdGFzb3VyY2VFZGl0b3IgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRhdGFzb3VyY2U6IHtcbiAgICAgICAgLi4ucHJvcHMuZGF0YXNvdXJjZSxcbiAgICAgICAgb3duZXJzOiBwcm9wcy5kYXRhc291cmNlLm93bmVycy5tYXAob3duZXIgPT4gKHtcbiAgICAgICAgICB2YWx1ZTogb3duZXIudmFsdWUgfHwgb3duZXIuaWQsXG4gICAgICAgICAgbGFiZWw6IG93bmVyLmxhYmVsIHx8IGAke293bmVyLmZpcnN0X25hbWV9ICR7b3duZXIubGFzdF9uYW1lfWAsXG4gICAgICAgIH0pKSxcbiAgICAgICAgbWV0cmljczogcHJvcHMuZGF0YXNvdXJjZS5tZXRyaWNzPy5tYXAobWV0cmljID0+IHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpY2F0aW9uRGV0YWlscyxcbiAgICAgICAgICB9ID0gbWV0cmljO1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb246IHsgZGV0YWlscywgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSB9ID0ge30sXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24sXG4gICAgICAgICAgfSA9IEpTT04ucGFyc2UobWV0cmljLmV4dHJhIHx8ICd7fScpIHx8IHt9O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5tZXRyaWMsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzIHx8IGRldGFpbHMsXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24gfHwgJycsXG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IHx8IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIGVycm9yczogW10sXG4gICAgICBpc1NxbGE6XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UuZGF0YXNvdXJjZV90eXBlID09PSAndGFibGUnIHx8XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UudHlwZSA9PT0gJ3RhYmxlJyxcbiAgICAgIGlzRWRpdE1vZGU6IGZhbHNlLFxuICAgICAgZGF0YWJhc2VDb2x1bW5zOiBwcm9wcy5kYXRhc291cmNlLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiAhY29sLmV4cHJlc3Npb24pLFxuICAgICAgY2FsY3VsYXRlZENvbHVtbnM6IHByb3BzLmRhdGFzb3VyY2UuY29sdW1ucy5maWx0ZXIoXG4gICAgICAgIGNvbCA9PiAhIWNvbC5leHByZXNzaW9uLFxuICAgICAgKSxcbiAgICAgIG1ldGFkYXRhTG9hZGluZzogZmFsc2UsXG4gICAgICBhY3RpdmVUYWJLZXk6IDAsXG4gICAgICBkYXRhc291cmNlVHlwZTogcHJvcHMuZGF0YXNvdXJjZS5zcWxcbiAgICAgICAgPyBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5XG4gICAgICAgIDogREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXksXG4gICAgfTtcblxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNoYW5nZUVkaXRNb2RlID0gdGhpcy5vbkNoYW5nZUVkaXRNb2RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlID0gdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UgPSB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEgPVxuICAgICAgdGhpcy50YWJsZUNoYW5nZUFuZFN5bmNNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3luY01ldGFkYXRhID0gdGhpcy5zeW5jTWV0YWRhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldENvbHVtbnMgPSB0aGlzLnNldENvbHVtbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlID0gdGhpcy52YWxpZGF0ZUFuZENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVGFiU2VsZWN0ID0gdGhpcy5oYW5kbGVUYWJTZWxlY3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFsbG93RWRpdFNvdXJjZSA9ICFpc0ZlYXR1cmVFbmFibGVkKFxuICAgICAgRmVhdHVyZUZsYWcuRElTQUJMRV9EQVRBU0VUX1NPVVJDRV9FRElULFxuICAgICk7XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICAvLyBFbXB0eWluZyBTUUwgaWYgXCJQaHlzaWNhbFwiIHJhZGlvIGJ1dHRvbiBpcyBzZWxlY3RlZFxuICAgIC8vIEN1cnJlbnRseSB0aGUgbG9naWMgdG8ga25vdyB3aGV0aGVyIHRoZSBzb3VyY2UgaXNcbiAgICAvLyBwaHlzaWNhbCBvciB2aXJ0dWFsIGlzIGJhc2VkIG9uIHdoZXRoZXIgU1FMIGlzIGVtcHR5IG9yIG5vdC5cbiAgICBjb25zdCB7IGRhdGFzb3VyY2VUeXBlLCBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHNxbCA9XG4gICAgICBkYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgPyAnJyA6IGRhdGFzb3VyY2Uuc3FsO1xuICAgIGNvbnN0IG5ld0RhdGFzb3VyY2UgPSB7XG4gICAgICAuLi50aGlzLnN0YXRlLmRhdGFzb3VyY2UsXG4gICAgICBzcWwsXG4gICAgICBjb2x1bW5zOiBbLi4udGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnMsIC4uLnRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnNdLFxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShuZXdEYXRhc291cmNlLCB0aGlzLnN0YXRlLmVycm9ycyk7XG4gIH1cblxuICBvbkNoYW5nZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMuc2V0SXNFZGl0aW5nKCF0aGlzLnN0YXRlLmlzRWRpdE1vZGUpO1xuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7IGlzRWRpdE1vZGU6ICFwcmV2U3RhdGUuaXNFZGl0TW9kZSB9KSk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgY2FsbGJhY2sgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2UgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25EYXRhc291cmNlUHJvcENoYW5nZShhdHRyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkbyBub3QgdXBkYXRlIHN0YXRlXG4gICAgY29uc3QgZGF0YXNvdXJjZSA9IHsgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH07XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICBkYXRhc291cmNlOiB7IC4uLnByZXZTdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH0sXG4gICAgICB9KSxcbiAgICAgIGF0dHIgPT09ICd0YWJsZV9uYW1lJ1xuICAgICAgICA/IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEpXG4gICAgICAgIDogdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSksXG4gICAgKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVR5cGVDaGFuZ2UoZGF0YXNvdXJjZVR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGF0YXNvdXJjZVR5cGUgfSk7XG4gIH1cblxuICBzZXRDb2x1bW5zKG9iaikge1xuICAgIC8vIHVwZGF0ZSBjYWxjdWxhdGVkQ29sdW1ucyBvciBkYXRhYmFzZUNvbHVtbnNcbiAgICB0aGlzLnNldFN0YXRlKG9iaiwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSk7XG4gIH1cblxuICB2YWxpZGF0ZUFuZENoYW5nZSgpIHtcbiAgICB0aGlzLnZhbGlkYXRlKHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgdGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNNZXRhZGF0YSgpO1xuICAgICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQ29sdW1ucyhjb2xzKSB7XG4gICAgY29uc3QgeyBkYXRhYmFzZUNvbHVtbnMgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgZGF0YWJhc2VDb2x1bW5OYW1lcyA9IGNvbHMubWFwKGNvbCA9PiBjb2wubmFtZSk7XG4gICAgY29uc3QgY3VycmVudENvbHMgPSBkYXRhYmFzZUNvbHVtbnMucmVkdWNlKFxuICAgICAgKGFnZywgY29sKSA9PiAoe1xuICAgICAgICAuLi5hZ2csXG4gICAgICAgIFtjb2wuY29sdW1uX25hbWVdOiBjb2wsXG4gICAgICB9KSxcbiAgICAgIHt9LFxuICAgICk7XG4gICAgY29uc3QgZmluYWxDb2x1bW5zID0gW107XG4gICAgY29uc3QgcmVzdWx0cyA9IHtcbiAgICAgIGFkZGVkOiBbXSxcbiAgICAgIG1vZGlmaWVkOiBbXSxcbiAgICAgIHJlbW92ZWQ6IGRhdGFiYXNlQ29sdW1uc1xuICAgICAgICAubWFwKGNvbCA9PiBjb2wuY29sdW1uX25hbWUpXG4gICAgICAgIC5maWx0ZXIoY29sID0+ICFkYXRhYmFzZUNvbHVtbk5hbWVzLmluY2x1ZGVzKGNvbCkpLFxuICAgIH07XG4gICAgY29scy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50Q29sID0gY3VycmVudENvbHNbY29sLm5hbWVdO1xuICAgICAgaWYgKCFjdXJyZW50Q29sKSB7XG4gICAgICAgIC8vIG5ldyBjb2x1bW5cbiAgICAgICAgZmluYWxDb2x1bW5zLnB1c2goe1xuICAgICAgICAgIGlkOiBzaG9ydGlkLmdlbmVyYXRlKCksXG4gICAgICAgICAgY29sdW1uX25hbWU6IGNvbC5uYW1lLFxuICAgICAgICAgIHR5cGU6IGNvbC50eXBlLFxuICAgICAgICAgIGdyb3VwYnk6IHRydWUsXG4gICAgICAgICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBpc19kdHRtOiBjb2wuaXNfZHR0bSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc3VsdHMuYWRkZWQucHVzaChjb2wubmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBjdXJyZW50Q29sLnR5cGUgIT09IGNvbC50eXBlIHx8XG4gICAgICAgICghY3VycmVudENvbC5pc19kdHRtICYmIGNvbC5pc19kdHRtKVxuICAgICAgKSB7XG4gICAgICAgIC8vIG1vZGlmaWVkIGNvbHVtblxuICAgICAgICBmaW5hbENvbHVtbnMucHVzaCh7XG4gICAgICAgICAgLi4uY3VycmVudENvbCxcbiAgICAgICAgICB0eXBlOiBjb2wudHlwZSxcbiAgICAgICAgICBpc19kdHRtOiBjdXJyZW50Q29sLmlzX2R0dG0gfHwgY29sLmlzX2R0dG0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXN1bHRzLm1vZGlmaWVkLnB1c2goY29sLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdW5jaGFuZ2VkXG4gICAgICAgIGZpbmFsQ29sdW1ucy5wdXNoKGN1cnJlbnRDb2wpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChcbiAgICAgIHJlc3VsdHMuYWRkZWQubGVuZ3RoIHx8XG4gICAgICByZXN1bHRzLm1vZGlmaWVkLmxlbmd0aCB8fFxuICAgICAgcmVzdWx0cy5yZW1vdmVkLmxlbmd0aFxuICAgICkge1xuICAgICAgdGhpcy5zZXRDb2x1bW5zKHsgZGF0YWJhc2VDb2x1bW5zOiBmaW5hbENvbHVtbnMgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgc3luY01ldGFkYXRhKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBkYXRhc291cmNlX3R5cGU6IGRhdGFzb3VyY2UudHlwZSB8fCBkYXRhc291cmNlLmRhdGFzb3VyY2VfdHlwZSxcbiAgICAgIGRhdGFiYXNlX25hbWU6XG4gICAgICAgIGRhdGFzb3VyY2UuZGF0YWJhc2UuZGF0YWJhc2VfbmFtZSB8fCBkYXRhc291cmNlLmRhdGFiYXNlLm5hbWUsXG4gICAgICBzY2hlbWFfbmFtZTogZGF0YXNvdXJjZS5zY2hlbWEsXG4gICAgICB0YWJsZV9uYW1lOiBkYXRhc291cmNlLnRhYmxlX25hbWVcbiAgICAgICAgPyBlbmNvZGVVUklDb21wb25lbnQoZGF0YXNvdXJjZS50YWJsZV9uYW1lKVxuICAgICAgICA6IGRhdGFzb3VyY2UudGFibGVfbmFtZSxcbiAgICB9O1xuICAgIE9iamVjdC5lbnRyaWVzKHBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAvLyByaXNvbiBjYW4ndCBlbmNvZGUgdGhlIHVuZGVmaW5lZCB2YWx1ZVxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGFyYW1zW2tleV0gPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGVuZHBvaW50ID0gYC9kYXRhc291cmNlL2V4dGVybmFsX21ldGFkYXRhX2J5X25hbWUvP3E9JHtyaXNvbi5lbmNvZGUoXG4gICAgICBwYXJhbXMsXG4gICAgKX1gO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRhZGF0YUxvYWRpbmc6IHRydWUgfSk7XG5cbiAgICBTdXBlcnNldENsaWVudC5nZXQoeyBlbmRwb2ludCB9KVxuICAgICAgLnRoZW4oKHsganNvbiB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnVwZGF0ZUNvbHVtbnMoanNvbik7XG4gICAgICAgIGlmIChyZXN1bHRzLm1vZGlmaWVkLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMucHJvcHMuYWRkU3VjY2Vzc1RvYXN0KFxuICAgICAgICAgICAgdCgnTW9kaWZpZWQgY29sdW1uczogJXMnLCByZXN1bHRzLm1vZGlmaWVkLmpvaW4oJywgJykpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdHMucmVtb3ZlZC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdChcbiAgICAgICAgICAgIHQoJ1JlbW92ZWQgY29sdW1uczogJXMnLCByZXN1bHRzLnJlbW92ZWQuam9pbignLCAnKSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0cy5hZGRlZC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdChcbiAgICAgICAgICAgIHQoJ05ldyBjb2x1bW5zIGFkZGVkOiAlcycsIHJlc3VsdHMuYWRkZWQuam9pbignLCAnKSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdNZXRhZGF0YSBoYXMgYmVlbiBzeW5jZWQnKSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRhZGF0YUxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChyZXNwb25zZSA9PlxuICAgICAgICBnZXRDbGllbnRFcnJvck9iamVjdChyZXNwb25zZSkudGhlbigoeyBlcnJvciwgc3RhdHVzVGV4dCB9KSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdChcbiAgICAgICAgICAgIGVycm9yIHx8IHN0YXR1c1RleHQgfHwgdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJyksXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgfSksXG4gICAgICApO1xuICB9XG5cbiAgZmluZER1cGxpY2F0ZXMoYXJyLCBhY2Nlc3Nvcikge1xuICAgIGNvbnN0IHNlZW4gPSB7fTtcbiAgICBjb25zdCBkdXBzID0gW107XG4gICAgYXJyLmZvckVhY2gob2JqID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhY2Nlc3NvcihvYmopO1xuICAgICAgaWYgKGl0ZW0gaW4gc2Vlbikge1xuICAgICAgICBkdXBzLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuW2l0ZW1dID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZHVwcztcbiAgfVxuXG4gIHZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgbGV0IGVycm9ycyA9IFtdO1xuICAgIGxldCBkdXBzO1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIC8vIExvb2tpbmcgZm9yIGR1cGxpY2F0ZSBjb2x1bW5fbmFtZVxuICAgIGR1cHMgPSB0aGlzLmZpbmREdXBsaWNhdGVzKGRhdGFzb3VyY2UuY29sdW1ucywgb2JqID0+IG9iai5jb2x1bW5fbmFtZSk7XG4gICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChcbiAgICAgIGR1cHMubWFwKG5hbWUgPT4gdCgnQ29sdW1uIG5hbWUgWyVzXSBpcyBkdXBsaWNhdGVkJywgbmFtZSkpLFxuICAgICk7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgbWV0cmljX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLm1ldHJpY3MsIG9iaiA9PiBvYmoubWV0cmljX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ01ldHJpYyBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTWFraW5nIHN1cmUgY2FsY3VsYXRlZENvbHVtbnMgaGF2ZSBhbiBleHByZXNzaW9uIGRlZmluZWRcbiAgICBjb25zdCBub0ZpbHRlckNhbGNDb2xzID0gdGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1ucy5maWx0ZXIoXG4gICAgICBjb2wgPT4gIWNvbC5leHByZXNzaW9uICYmICFjb2wuanNvbixcbiAgICApO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBub0ZpbHRlckNhbGNDb2xzLm1hcChjb2wgPT5cbiAgICAgICAgdCgnQ2FsY3VsYXRlZCBjb2x1bW4gWyVzXSByZXF1aXJlcyBhbiBleHByZXNzaW9uJywgY29sLmNvbHVtbl9uYW1lKSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcnMgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaGFuZGxlVGFiU2VsZWN0KGFjdGl2ZVRhYktleSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWJLZXkgfSk7XG4gIH1cblxuICBzb3J0TWV0cmljcyhtZXRyaWNzKSB7XG4gICAgcmV0dXJuIG1ldHJpY3Muc29ydCgoeyBpZDogYSB9LCB7IGlkOiBiIH0pID0+IGIgLSBhKTtcbiAgfVxuXG4gIHJlbmRlclNldHRpbmdzRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0Jhc2ljJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVmYXVsdF9lbmRwb2ludFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0RlZmF1bHQgVVJMJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnRGVmYXVsdCBVUkwgdG8gcmVkaXJlY3QgdG8gd2hlbiBhY2Nlc3NpbmcgZnJvbSB0aGUgZGF0YXNldCBsaXN0IHBhZ2UnLFxuICAgICAgICAgICl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cImRlZmF1bHRfZW5kcG9pbnRcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgaW5saW5lXG4gICAgICAgICAgZmllbGRLZXk9XCJmaWx0ZXJfc2VsZWN0X2VuYWJsZWRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgZmlsdGVycycpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdXaGV0aGVyIHRvIHBvcHVsYXRlIGF1dG9jb21wbGV0ZSBmaWx0ZXJzIG9wdGlvbnMnKX1cbiAgICAgICAgICBjb250cm9sPXs8Q2hlY2tib3hDb250cm9sIC8+fVxuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgcXVlcnkgcHJlZGljYXRlJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ1doZW4gdXNpbmcgXCJBdXRvY29tcGxldGUgZmlsdGVyc1wiLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UgJyArXG4gICAgICAgICAgICAgICAgJ29mIHRoZSBxdWVyeSBmZXRjaGluZyB0aGUgdmFsdWVzLiBVc2UgdGhpcyBvcHRpb24gdG8gYXBwbHkgYSAnICtcbiAgICAgICAgICAgICAgICAncHJlZGljYXRlIChXSEVSRSBjbGF1c2UpIHRvIHRoZSBxdWVyeSBzZWxlY3RpbmcgdGhlIGRpc3RpbmN0ICcgK1xuICAgICAgICAgICAgICAgICd2YWx1ZXMgZnJvbSB0aGUgdGFibGUuIFR5cGljYWxseSB0aGUgaW50ZW50IHdvdWxkIGJlIHRvIGxpbWl0IHRoZSBzY2FuICcgK1xuICAgICAgICAgICAgICAgICdieSBhcHBseWluZyBhIHJlbGF0aXZlIHRpbWUgZmlsdGVyIG9uIGEgcGFydGl0aW9uZWQgb3IgaW5kZXhlZCB0aW1lLXJlbGF0ZWQgZmllbGQuJyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgICAgICBtaW5MaW5lcz17NX1cbiAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwiZXh0cmFcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0V4dHJhJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ0V4dHJhIGRhdGEgdG8gc3BlY2lmeSB0YWJsZSBtZXRhZGF0YS4gQ3VycmVudGx5IHN1cHBvcnRzICcgK1xuICAgICAgICAgICAgICAgICdtZXRhZGF0YSBvZiB0aGUgZm9ybWF0OiBgeyBcImNlcnRpZmljYXRpb25cIjogeyBcImNlcnRpZmllZF9ieVwiOiAnICtcbiAgICAgICAgICAgICAgICAnXCJEYXRhIFBsYXRmb3JtIFRlYW1cIiwgXCJkZXRhaWxzXCI6IFwiVGhpcyB0YWJsZSBpcyB0aGUgc291cmNlIG9mIHRydXRoLlwiICcgK1xuICAgICAgICAgICAgICAgICd9LCBcIndhcm5pbmdfbWFya2Rvd25cIjogXCJUaGlzIGlzIGEgd2FybmluZy5cIiB9YC4nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgY29udHJvbElkPVwiZXh0cmFcIlxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwianNvblwiXG4gICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxPd25lcnNTZWxlY3RvclxuICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgb25DaGFuZ2U9e25ld093bmVycyA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZSh7IC4uLmRhdGFzb3VyY2UsIG93bmVyczogbmV3T3duZXJzIH0pO1xuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L0ZpZWxkc2V0PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJBZHZhbmNlZEZpZWxkc2V0KCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPEZpZWxkc2V0XG4gICAgICAgIHRpdGxlPXt0KCdBZHZhbmNlZCcpfVxuICAgICAgICBpdGVtPXtkYXRhc291cmNlfVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiY2FjaGVfdGltZW91dFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0NhY2hlIHRpbWVvdXQnKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgZHVyYXRpb24gb2YgdGltZSBpbiBzZWNvbmRzIGJlZm9yZSB0aGUgY2FjaGUgaXMgaW52YWxpZGF0ZWQuIFNldCB0byAtMSB0byBieXBhc3MgdGhlIGNhY2hlLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwiY2FjaGVfdGltZW91dFwiIC8+fVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBmaWVsZEtleT1cIm9mZnNldFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0hvdXJzIG9mZnNldCcpfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJvZmZzZXRcIiAvPn1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgbnVtYmVyIG9mIGhvdXJzLCBuZWdhdGl2ZSBvciBwb3NpdGl2ZSwgdG8gc2hpZnQgdGhlIHRpbWUgY29sdW1uLiBUaGlzIGNhbiBiZSB1c2VkIHRvIG1vdmUgVVRDIHRpbWUgdG8gbG9jYWwgdGltZS4nLFxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cInRlbXBsYXRlX3BhcmFtc1wiXG4gICAgICAgICAgICBsYWJlbD17dCgnVGVtcGxhdGUgcGFyYW1ldGVycycpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICdBIHNldCBvZiBwYXJhbWV0ZXJzIHRoYXQgYmVjb21lIGF2YWlsYWJsZSBpbiB0aGUgcXVlcnkgdXNpbmcgSmluamEgdGVtcGxhdGluZyBzeW50YXgnLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJ0ZW1wbGF0ZV9wYXJhbXNcIiAvPn1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9GaWVsZHNldD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyU3BhdGlhbFRhYigpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBzcGF0aWFscywgYWxsX2NvbHM6IGFsbENvbHMgfSA9IGRhdGFzb3VyY2U7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUYWJzLlRhYlBhbmVcbiAgICAgICAgdGFiPXs8Q29sbGVjdGlvblRhYlRpdGxlIGNvbGxlY3Rpb249e3NwYXRpYWxzfSB0aXRsZT17dCgnU3BhdGlhbCcpfSAvPn1cbiAgICAgICAga2V5PXs0fVxuICAgICAgPlxuICAgICAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgdGFibGVDb2x1bW5zPXtbJ25hbWUnLCAnY29uZmlnJ119XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMsICdzcGF0aWFscycpfVxuICAgICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgICBuYW1lOiB0KCc8bmV3IHNwYXRpYWw+JyksXG4gICAgICAgICAgICB0eXBlOiB0KCc8bm8gdHlwZT4nKSxcbiAgICAgICAgICAgIGNvbmZpZzogbnVsbCxcbiAgICAgICAgICB9KX1cbiAgICAgICAgICBjb2xsZWN0aW9uPXtzcGF0aWFsc31cbiAgICAgICAgICBhbGxvd0RlbGV0ZXNcbiAgICAgICAgICBpdGVtUmVuZGVyZXJzPXt7XG4gICAgICAgICAgICBuYW1lOiAoZCwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGUgY2FuRWRpdCB0aXRsZT17ZH0gb25TYXZlVGl0bGU9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbmZpZzogKHYsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICAgIDxTcGF0aWFsQ29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSBjaG9pY2VzPXthbGxDb2xzfSAvPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclNvdXJjZUZpZWxkc2V0KHRoZW1lKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7dGhpcy5hbGxvd0VkaXRTb3VyY2UgJiYgKFxuICAgICAgICAgIDxFZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgICAgIDxzcGFuIHJvbGU9XCJidXR0b25cIiB0YWJJbmRleD17MH0gb25DbGljaz17dGhpcy5vbkNoYW5nZUVkaXRNb2RlfT5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSA/IChcbiAgICAgICAgICAgICAgICA8SWNvbnMuTG9ja1VubG9ja2VkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxJY29ucy5Mb2NrTG9ja2VkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgeyF0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgICA8ZGl2Pnt0KCdDbGljayB0aGUgbG9jayB0byBtYWtlIGNoYW5nZXMuJyl9PC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJiAoXG4gICAgICAgICAgICAgIDxkaXY+e3QoJ0NsaWNrIHRoZSBsb2NrIHRvIHByZXZlbnQgZnVydGhlciBjaGFuZ2VzLicpfTwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0VkaXRMb2NrQ29udGFpbmVyPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm0tbC0xMCBtLXQtMjAgbS1iLTEwXCI+XG4gICAgICAgICAge0RBVEFTT1VSQ0VfVFlQRVNfQVJSLm1hcCh0eXBlID0+IChcbiAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICBrZXk9e3R5cGUua2V5fVxuICAgICAgICAgICAgICB2YWx1ZT17dHlwZS5rZXl9XG4gICAgICAgICAgICAgIGlubGluZVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VUeXBlQ2hhbmdlLmJpbmQodGhpcywgdHlwZS5rZXkpfVxuICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSB0eXBlLmtleX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0eXBlLmxhYmVsfVxuICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8RmllbGRzZXQgaXRlbT17ZGF0YXNvdXJjZX0gb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfSBjb21wYWN0PlxuICAgICAgICAgIHt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5ICYmIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRhdGFiYXNlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCd2aXJ0dWFsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRhYmFzZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGI9e2RhdGFzb3VyY2U/LmRhdGFiYXNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYT17ZGF0YXNvdXJjZS5zY2hlbWF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TY2hlbWFDaGFuZ2U9e3NjaGVtYSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3NjaGVtYScsIHNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EYkNoYW5nZT17ZGF0YWJhc2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdkYXRhYmFzZScsIGRhdGFiYXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtTW9kZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXJyb3I9e3RoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXt7IHdpZHRoOiAnY2FsYygxMDAlIC0gMzRweCknLCBtYXJnaW5Ub3A6IC0xNiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0YXNldCBuYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RhYmxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEYXRhc2V0IG5hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCcpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICAgICAnV2hlbiBzcGVjaWZ5aW5nIFNRTCwgdGhlIGRhdGFzb3VyY2UgYWN0cyBhcyBhIHZpZXcuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1N1cGVyc2V0IHdpbGwgdXNlIHRoaXMgc3RhdGVtZW50IGFzIGEgc3VicXVlcnkgd2hpbGUgZ3JvdXBpbmcgYW5kIGZpbHRlcmluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvbiB0aGUgZ2VuZXJhdGVkIHBhcmVudCBxdWVyaWVzLicsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWluTGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgJiYgKFxuICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInRhYmxlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1BoeXNpY2FsJyl9XG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2U9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZS5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VfbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlLmRhdGFiYXNlPy5kYXRhYmFzZV9uYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBkYklkPXtkYXRhc291cmNlLmRhdGFiYXNlPy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yPXt0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hPXtkYXRhc291cmNlLnNjaGVtYX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbExhYk1vZGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVWYWx1ZT17ZGF0YXNvdXJjZS50YWJsZV9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TY2hlbWFDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNjaGVtYSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3NjaGVtYScsIHNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25EYkNoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGF0YWJhc2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhYmFzZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25UYWJsZVNlbGVjdENoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGFibGUgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCd0YWJsZV9uYW1lJywgdGFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAgICdUaGUgcG9pbnRlciB0byBhIHBoeXNpY2FsIHRhYmxlIChvciB2aWV3KS4gS2VlcCBpbiBtaW5kIHRoYXQgdGhlIGNoYXJ0IGlzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdhc3NvY2lhdGVkIHRvIHRoaXMgU3VwZXJzZXQgbG9naWNhbCB0YWJsZSwgYW5kIHRoaXMgbG9naWNhbCB0YWJsZSBwb2ludHMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ3RoZSBwaHlzaWNhbCB0YWJsZSByZWZlcmVuY2VkIGhlcmUuJyxcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvRmllbGRzZXQ+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyRXJyb3JzKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8QWxlcnRcbiAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7IG1hcmdpbkJvdHRvbTogdGhlbWUuZ3JpZFVuaXQgKiA0IH0pfVxuICAgICAgICAgIHR5cGU9XCJlcnJvclwiXG4gICAgICAgICAgbWVzc2FnZT17XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvcnMubWFwKGVyciA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Vycn0+e2Vycn08L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJlbmRlck1ldHJpY0NvbGxlY3Rpb24oKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgbWV0cmljcyB9ID0gZGF0YXNvdXJjZTtcbiAgICBjb25zdCBzb3J0ZWRNZXRyaWNzID0gbWV0cmljcz8ubGVuZ3RoID8gdGhpcy5zb3J0TWV0cmljcyhtZXRyaWNzKSA6IFtdO1xuICAgIHJldHVybiAoXG4gICAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICAgIHRhYmxlQ29sdW1ucz17WydtZXRyaWNfbmFtZScsICd2ZXJib3NlX25hbWUnLCAnZXhwcmVzc2lvbiddfVxuICAgICAgICBzb3J0Q29sdW1ucz17WydtZXRyaWNfbmFtZScsICd2ZXJib3NlX25hbWUnLCAnZXhwcmVzc2lvbiddfVxuICAgICAgICBjb2x1bW5MYWJlbHM9e3tcbiAgICAgICAgICBtZXRyaWNfbmFtZTogdCgnTWV0cmljJyksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiB0KCdMYWJlbCcpLFxuICAgICAgICAgIGV4cHJlc3Npb246IHQoJ1NRTCBleHByZXNzaW9uJyksXG4gICAgICAgIH19XG4gICAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxGaWVsZHNldCBjb21wYWN0PlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZDNmb3JtYXRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEMyBmb3JtYXQnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJkM2Zvcm1hdFwiIHBsYWNlaG9sZGVyPVwiJXkvJW0vJWRcIiAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICdQZXJzb24gb3IgZ3JvdXAgdGhhdCBoYXMgY2VydGlmaWVkIHRoaXMgbWV0cmljJyxcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdDZXJ0aWZpZWQgYnknKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdXYXJuaW5nJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ3YXJuaW5nX21hcmtkb3duXCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnT3B0aW9uYWwgd2FybmluZyBhYm91dCB1c2Ugb2YgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwid2FybmluZ19tYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgICAgIDwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uPXtzb3J0ZWRNZXRyaWNzfVxuICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMsICdtZXRyaWNzJyl9XG4gICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJzxuZXcgbWV0cmljPicpLFxuICAgICAgICAgIHZlcmJvc2VfbmFtZTogJycsXG4gICAgICAgICAgZXhwcmVzc2lvbjogJycsXG4gICAgICAgIH0pfVxuICAgICAgICBpdGVtQ2VsbFByb3BzPXt7XG4gICAgICAgICAgZXhwcmVzc2lvbjogKCkgPT4gKHtcbiAgICAgICAgICAgIHdpZHRoOiAnMjQwcHgnLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9fVxuICAgICAgICBpdGVtUmVuZGVyZXJzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6ICh2LCBvbkNoYW5nZSwgXywgcmVjb3JkKSA9PiAoXG4gICAgICAgICAgICA8RmxleFJvd0NvbnRhaW5lcj5cbiAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtyZWNvcmQud2FybmluZ19tYXJrZG93biAmJiAoXG4gICAgICAgICAgICAgICAgPFdhcm5pbmdJY29uV2l0aFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHdhcm5pbmdNYXJrZG93bj17cmVjb3JkLndhcm5pbmdfbWFya2Rvd259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGUgY2FuRWRpdCB0aXRsZT17dn0gb25TYXZlVGl0bGU9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICAgPC9GbGV4Um93Q29udGFpbmVyPlxuICAgICAgICAgICksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjYW5FZGl0IHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBleHByZXNzaW9uOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICBpbml0aWFsVmFsdWU9e3Z9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzPXtbJ2RhdGFzb3VyY2Utc3FsLWV4cHJlc3Npb24nXX1cbiAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJzcWxcIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgbWluTGluZXM9ezV9XG4gICAgICAgICAgICAgIHRleHRBcmVhU3R5bGVzPXt7IG1pbldpZHRoOiAnMjAwcHgnLCBtYXhXaWR0aDogJzQ1MHB4JyB9fVxuICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogKHYsIG9uQ2hhbmdlLCBsYWJlbCkgPT4gKFxuICAgICAgICAgICAgPFN0YWNrZWRGaWVsZFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50PXs8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz59XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgICAgZDNmb3JtYXQ6ICh2LCBvbkNoYW5nZSwgbGFiZWwpID0+IChcbiAgICAgICAgICAgIDxTdGFja2VkRmllbGRcbiAgICAgICAgICAgICAgbGFiZWw9e2xhYmVsfVxuICAgICAgICAgICAgICBmb3JtRWxlbWVudD17PFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICB9fVxuICAgICAgICBhbGxvd0RlbGV0ZXNcbiAgICAgICAgc3RpY2t5SGVhZGVyXG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlLCBhY3RpdmVUYWJLZXkgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBtZXRyaWNzIH0gPSBkYXRhc291cmNlO1xuICAgIGNvbnN0IHNvcnRlZE1ldHJpY3MgPSBtZXRyaWNzPy5sZW5ndGggPyB0aGlzLnNvcnRNZXRyaWNzKG1ldHJpY3MpIDogW107XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8RGF0YXNvdXJjZUNvbnRhaW5lcj5cbiAgICAgICAge3RoaXMucmVuZGVyRXJyb3JzKCl9XG4gICAgICAgIDxBbGVydFxuICAgICAgICAgIGNzcz17dGhlbWUgPT4gKHsgbWFyZ2luQm90dG9tOiB0aGVtZS5ncmlkVW5pdCAqIDQgfSl9XG4gICAgICAgICAgdHlwZT1cIndhcm5pbmdcIlxuICAgICAgICAgIG1lc3NhZ2U9e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgPHN0cm9uZz57dCgnQmUgY2FyZWZ1bC4nKX0gPC9zdHJvbmc+XG4gICAgICAgICAgICAgIHt0KFxuICAgICAgICAgICAgICAgICdDaGFuZ2luZyB0aGVzZSBzZXR0aW5ncyB3aWxsIGFmZmVjdCBhbGwgY2hhcnRzIHVzaW5nIHRoaXMgZGF0YXNldCwgaW5jbHVkaW5nIGNoYXJ0cyBvd25lZCBieSBvdGhlciBwZW9wbGUuJyxcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICAgPFN0eWxlZFRhYmxlVGFic1xuICAgICAgICAgIGZ1bGxXaWR0aD17ZmFsc2V9XG4gICAgICAgICAgaWQ9XCJ0YWJsZS10YWJzXCJcbiAgICAgICAgICBkYXRhLXRlc3Q9XCJlZGl0LWRhdGFzZXQtdGFic1wiXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVGFiU2VsZWN0fVxuICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYktleX1cbiAgICAgICAgPlxuICAgICAgICAgIDxUYWJzLlRhYlBhbmUga2V5PXswfSB0YWI9e3QoJ1NvdXJjZScpfT5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlclNvdXJjZUZpZWxkc2V0KHRoZW1lKX1cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17c29ydGVkTWV0cmljc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnTWV0cmljcycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5PXsxfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlck1ldHJpY0NvbGxlY3Rpb24oKX1cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnN9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0NvbHVtbnMnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleT17Mn1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8U3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5CdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICAgIDxTdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICAgICAgICBidXR0b25TdHlsZT1cInRlcnRpYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zeW5jTWV0YWRhdGF9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN5bmMtZnJvbS1zb3VyY2VcIlxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1kYXRhYmFzZVwiIC8+eycgJ31cbiAgICAgICAgICAgICAgICAgICAge3QoJ1N5bmMgY29sdW1ucyBmcm9tIHNvdXJjZScpfVxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8L0NvbHVtbkJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5Db2xsZWN0aW9uVGFibGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW5zLXRhYmxlXCJcbiAgICAgICAgICAgICAgICBjb2x1bW5zPXt0aGlzLnN0YXRlLmRhdGFiYXNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIG9uQ29sdW1uc0NoYW5nZT17ZGF0YWJhc2VDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBkYXRhYmFzZUNvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0YWRhdGFMb2FkaW5nICYmIDxMb2FkaW5nIC8+fVxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQ2FsY3VsYXRlZCBjb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2NhbGN1bGF0ZWRDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBjYWxjdWxhdGVkQ29sdW1ucyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lXG4gICAgICAgICAgICAgICAgc2hvd0V4cHJlc3Npb25cbiAgICAgICAgICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgICAgICAgICBhbGxvd0VkaXREYXRhVHlwZVxuICAgICAgICAgICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZ3JvdXBieTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IHQoJzxlbnRlciBTUUwgZXhwcmVzc2lvbiBoZXJlPicpLFxuICAgICAgICAgICAgICAgICAgX19leHBhbmRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvU3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSBrZXk9ezR9IHRhYj17dCgnU2V0dGluZ3MnKX0+XG4gICAgICAgICAgICA8Um93IGd1dHRlcj17MTZ9PlxuICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj57dGhpcy5yZW5kZXJTZXR0aW5nc0ZpZWxkc2V0KCl9PC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgICAgPEZvcm1Db250YWluZXI+e3RoaXMucmVuZGVyQWR2YW5jZWRGaWVsZHNldCgpfTwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgICA8L1Jvdz5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgPC9TdHlsZWRUYWJsZVRhYnM+XG4gICAgICA8L0RhdGFzb3VyY2VDb250YWluZXI+XG4gICAgKTtcbiAgfVxufVxuXG5EYXRhc291cmNlRWRpdG9yLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbkRhdGFzb3VyY2VFZGl0b3IucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuXG5jb25zdCBEYXRhU291cmNlQ29tcG9uZW50ID0gd2l0aFRoZW1lKERhdGFzb3VyY2VFZGl0b3IpO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoVG9hc3RzKERhdGFTb3VyY2VDb21wb25lbnQpO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };var _ref24 = process.env.NODE_ENV === \"production\" ? { name: \"hkh81z\", styles: \"margin-top:8px\" } : { name: \"17jm38f-DatasourceEditor\", styles: \"margin-top:8px;label:DatasourceEditor;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvRGF0YXNvdXJjZS9EYXRhc291cmNlRWRpdG9yLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEybEN5QiIsImZpbGUiOiIvVXNlcnMvYm9nZGFua3lyeWxpdWsvY29kZS9vcGVuc291cmNlL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL0RhdGFzb3VyY2UvRGF0YXNvdXJjZUVkaXRvci5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUmFkaW8nO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgQWxlcnQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQWxlcnQnO1xuaW1wb3J0IEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0JhZGdlJztcbmltcG9ydCBzaG9ydGlkIGZyb20gJ3Nob3J0aWQnO1xuaW1wb3J0IHtcbiAgRmVhdHVyZUZsYWcsXG4gIHN0eWxlZCxcbiAgU3VwZXJzZXRDbGllbnQsXG4gIHQsXG4gIHdpdGhUaGVtZSxcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgU2VsZWN0LCBBc3luY1NlbGVjdCwgUm93LCBDb2wgfSBmcm9tICdzcmMvY29tcG9uZW50cyc7XG5pbXBvcnQgeyBGb3JtTGFiZWwgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Gb3JtJztcbmltcG9ydCBCdXR0b24gZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCBUYWJzIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYnMnO1xuaW1wb3J0IENlcnRpZmllZEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0NlcnRpZmllZEJhZGdlJztcbmltcG9ydCBXYXJuaW5nSWNvbldpdGhUb29sdGlwIGZyb20gJ3NyYy9jb21wb25lbnRzL1dhcm5pbmdJY29uV2l0aFRvb2x0aXAnO1xuaW1wb3J0IERhdGFiYXNlU2VsZWN0b3IgZnJvbSAnc3JjL2NvbXBvbmVudHMvRGF0YWJhc2VTZWxlY3Rvcic7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnc3JjL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgVGFibGVTZWxlY3RvciBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZVNlbGVjdG9yJztcbmltcG9ydCBFZGl0YWJsZVRpdGxlIGZyb20gJ3NyYy9jb21wb25lbnRzL0VkaXRhYmxlVGl0bGUnO1xuaW1wb3J0IHsgZ2V0Q2xpZW50RXJyb3JPYmplY3QgfSBmcm9tICdzcmMvdXRpbHMvZ2V0Q2xpZW50RXJyb3JPYmplY3QnO1xuaW1wb3J0IENoZWNrYm94Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NoZWNrYm94Q29udHJvbCc7XG5pbXBvcnQgVGV4dENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0Q29udHJvbCc7XG5pbXBvcnQgVGV4dEFyZWFDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dEFyZWFDb250cm9sJztcbmltcG9ydCBTcGF0aWFsQ29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1NwYXRpYWxDb250cm9sJztcbmltcG9ydCB3aXRoVG9hc3RzIGZyb20gJ3NyYy9jb21wb25lbnRzL01lc3NhZ2VUb2FzdHMvd2l0aFRvYXN0cyc7XG5pbXBvcnQgeyBpc0ZlYXR1cmVFbmFibGVkIH0gZnJvbSAnc3JjL2ZlYXR1cmVGbGFncyc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IENvbGxlY3Rpb25UYWJsZSBmcm9tICcuL0NvbGxlY3Rpb25UYWJsZSc7XG5pbXBvcnQgRmllbGRzZXQgZnJvbSAnLi9GaWVsZHNldCc7XG5pbXBvcnQgRmllbGQgZnJvbSAnLi9GaWVsZCc7XG5cbmNvbnN0IERhdGFzb3VyY2VDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICAuY2hhbmdlLXdhcm5pbmcge1xuICAgIG1hcmdpbjogMTZweCAxMHB4IDA7XG4gICAgY29sb3I6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuY29sb3JzLndhcm5pbmcuYmFzZX07XG4gIH1cblxuICAuY2hhbmdlLXdhcm5pbmcgLmJvbGQge1xuICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgfVxuXG4gIC5mb3JtLWdyb3VwLmhhcy1mZWVkYmFjayA+IC5oZWxwLWJsb2NrIHtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG4gIH1cblxuICAuZm9ybS1ncm91cC5mb3JtLWdyb3VwLW1kIHtcbiAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gIH1cbmA7XG5cbmNvbnN0IEZsZXhSb3dDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuXG4gIHN2ZyB7XG4gICAgbWFyZ2luLXJpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRUYWJsZVRhYnMgPSBzdHlsZWQoVGFicylgXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICAuYW50LXRhYnMtY29udGVudC1ob2xkZXIge1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRCYWRnZSA9IHN0eWxlZChCYWRnZSlgXG4gIC5hbnQtYmFkZ2UtY291bnQge1xuICAgIGxpbmUtaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBoZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA0fXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBFZGl0TG9ja0NvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGZvbnQtc2l6ZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGEge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgfVxuYDtcblxuY29uc3QgQ29sdW1uQnV0dG9uV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICAkeyh7IHRoZW1lIH0pID0+IGBtYXJnaW4tYm90dG9tOiAke3RoZW1lLmdyaWRVbml0ICogMn1weGB9XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBzcGFuIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgLnRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB9XG5cbiAgLmFudC10YWcge1xuICAgIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuc3BhbmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgbWFyZ2luLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICBgfVxuYDtcblxuY29uc3QgY2hlY2tib3hHZW5lcmF0b3IgPSAoZCwgb25DaGFuZ2UpID0+IChcbiAgPENoZWNrYm94Q29udHJvbCB2YWx1ZT17ZH0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPlxuKTtcbmNvbnN0IERBVEFfVFlQRVMgPSBbXG4gIHsgdmFsdWU6ICdTVFJJTkcnLCBsYWJlbDogdCgnU1RSSU5HJykgfSxcbiAgeyB2YWx1ZTogJ05VTUVSSUMnLCBsYWJlbDogdCgnTlVNRVJJQycpIH0sXG4gIHsgdmFsdWU6ICdEQVRFVElNRScsIGxhYmVsOiB0KCdEQVRFVElNRScpIH0sXG4gIHsgdmFsdWU6ICdCT09MRUFOJywgbGFiZWw6IHQoJ0JPT0xFQU4nKSB9LFxuXTtcblxuY29uc3QgREFUQVNPVVJDRV9UWVBFU19BUlIgPSBbXG4gIHsga2V5OiAncGh5c2ljYWwnLCBsYWJlbDogdCgnUGh5c2ljYWwgKHRhYmxlIG9yIHZpZXcpJykgfSxcbiAgeyBrZXk6ICd2aXJ0dWFsJywgbGFiZWw6IHQoJ1ZpcnR1YWwgKFNRTCknKSB9LFxuXTtcbmNvbnN0IERBVEFTT1VSQ0VfVFlQRVMgPSB7fTtcbkRBVEFTT1VSQ0VfVFlQRVNfQVJSLmZvckVhY2gobyA9PiB7XG4gIERBVEFTT1VSQ0VfVFlQRVNbby5rZXldID0gbztcbn0pO1xuXG5mdW5jdGlvbiBDb2xsZWN0aW9uVGFiVGl0bGUoeyB0aXRsZSwgY29sbGVjdGlvbiB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY3NzPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX1cbiAgICAgIGRhdGEtdGVzdD17YGNvbGxlY3Rpb24tdGFiLSR7dGl0bGV9YH1cbiAgICA+XG4gICAgICB7dGl0bGV9eycgJ31cbiAgICAgIDxTdHlsZWRCYWRnZSBjb3VudD17Y29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMH0gc2hvd1plcm8gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuQ29sbGVjdGlvblRhYlRpdGxlLnByb3BUeXBlcyA9IHtcbiAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbGxlY3Rpb246IFByb3BUeXBlcy5hcnJheSxcbn07XG5cbmZ1bmN0aW9uIENvbHVtbkNvbGxlY3Rpb25UYWJsZSh7XG4gIGNvbHVtbnMsXG4gIGRhdGFzb3VyY2UsXG4gIG9uQ29sdW1uc0NoYW5nZSxcbiAgb25EYXRhc291cmNlQ2hhbmdlLFxuICBlZGl0YWJsZUNvbHVtbk5hbWUsXG4gIHNob3dFeHByZXNzaW9uLFxuICBhbGxvd0FkZEl0ZW0sXG4gIGFsbG93RWRpdERhdGFUeXBlLFxuICBpdGVtR2VuZXJhdG9yLFxufSkge1xuICByZXR1cm4gKFxuICAgIDxDb2xsZWN0aW9uVGFibGVcbiAgICAgIGNvbGxlY3Rpb249e2NvbHVtbnN9XG4gICAgICB0YWJsZUNvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgc29ydENvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgYWxsb3dEZWxldGVzXG4gICAgICBhbGxvd0FkZEl0ZW09e2FsbG93QWRkSXRlbX1cbiAgICAgIGl0ZW1HZW5lcmF0b3I9e2l0ZW1HZW5lcmF0b3J9XG4gICAgICBzdGlja3lIZWFkZXJcbiAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgPEZvcm1Db250YWluZXI+XG4gICAgICAgICAgPEZpZWxkc2V0IGNvbXBhY3Q+XG4gICAgICAgICAgICB7c2hvd0V4cHJlc3Npb24gJiYgKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImV4cHJlc3Npb25cIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdTUUwgZXhwcmVzc2lvbicpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT1cIm1hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdMYWJlbCcpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnTGFiZWwnKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge2FsbG93RWRpdERhdGFUeXBlICYmIChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e0RBVEFfVFlQRVN9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dOZXdPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKSA/IChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdBZHZhbmNlZCBkYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQWR2YW5jZWQgRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDw+PC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwicHl0aG9uX2RhdGVfZm9ybWF0XCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0RhdGV0aW1lIGZvcm1hdCcpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgICAgICAgICAgLyogTm90ZSB0aGUgZnJhZ21lbnRlZCB0cmFuc2xhdGlvbnMgbWF5IG5vdCB3b3JrLiAqL1xuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICB7dCgnVGhlIHBhdHRlcm4gb2YgdGltZXN0YW1wIGZvcm1hdC4gRm9yIHN0cmluZ3MgdXNlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5weXRob24ub3JnLzIvbGlicmFyeS9kYXRldGltZS5odG1sI3N0cmZ0aW1lLXN0cnB0aW1lLWJlaGF2aW9yXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdQeXRob24gZGF0ZXRpbWUgc3RyaW5nIHBhdHRlcm4nKX1cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIHt0KCcgZXhwcmVzc2lvbiB3aGljaCBuZWVkcyB0byBhZGhlcmUgdG8gdGhlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdJU08gODYwMScpfVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAge3QoYCBzdGFuZGFyZCB0byBlbnN1cmUgdGhhdCB0aGUgbGV4aWNvZ3JhcGhpY2FsIG9yZGVyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgY29pbmNpZGVzIHdpdGggdGhlIGNocm9ub2xvZ2ljYWwgb3JkZXJpbmcuIElmIHRoZVxuICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCBmb3JtYXQgZG9lcyBub3QgYWRoZXJlIHRvIHRoZSBJU08gODYwMSBzdGFuZGFyZFxuICAgICAgICAgICAgICAgICAgICAgIHlvdSB3aWxsIG5lZWQgdG8gZGVmaW5lIGFuIGV4cHJlc3Npb24gYW5kIHR5cGUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtaW5nIHRoZSBzdHJpbmcgaW50byBhIGRhdGUgb3IgdGltZXN0YW1wLiBOb3RlXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5IHRpbWUgem9uZXMgYXJlIG5vdCBzdXBwb3J0ZWQuIElmIHRpbWUgaXMgc3RvcmVkXG4gICAgICAgICAgICAgICAgICAgICAgaW4gZXBvY2ggZm9ybWF0LCBwdXQgXFxgZXBvY2hfc1xcYCBvciBcXGBlcG9jaF9tc1xcYC4gSWYgbm8gcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICAgIGlzIHNwZWNpZmllZCB3ZSBmYWxsIGJhY2sgdG8gdXNpbmcgdGhlIG9wdGlvbmFsIGRlZmF1bHRzIG9uIGEgcGVyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UvY29sdW1uIG5hbWUgbGV2ZWwgdmlhIHRoZSBleHRyYSBwYXJhbWV0ZXIuYCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJweXRob25fZGF0ZV9mb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIlWS8lbS8lZFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpZWQgQnknKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpZWRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbkRldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9GaWVsZHNldD5cbiAgICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgICAgfVxuICAgICAgY29sdW1uTGFiZWxzPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTkFCTEVfQURWQU5DRURfREFUQV9UWVBFUylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6IHQoJ0NvbHVtbicpLFxuICAgICAgICAgICAgICBhZHZhbmNlZF9kYXRhX3R5cGU6IHQoJ0FkdmFuY2VkIGRhdGEgdHlwZScpLFxuICAgICAgICAgICAgICB0eXBlOiB0KCdEYXRhIHR5cGUnKSxcbiAgICAgICAgICAgICAgZ3JvdXBieTogdCgnSXMgZGltZW5zaW9uJyksXG4gICAgICAgICAgICAgIGlzX2R0dG06IHQoJ0lzIHRlbXBvcmFsJyksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHQoJ0RlZmF1bHQgZGF0ZXRpbWUnKSxcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogdCgnSXMgZmlsdGVyYWJsZScpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnQ29sdW1uJyksXG4gICAgICAgICAgICAgIHR5cGU6IHQoJ0RhdGEgdHlwZScpLFxuICAgICAgICAgICAgICBncm91cGJ5OiB0KCdJcyBkaW1lbnNpb24nKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogdCgnSXMgdGVtcG9yYWwnKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogdCgnRGVmYXVsdCBkYXRldGltZScpLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0KCdJcyBmaWx0ZXJhYmxlJyksXG4gICAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbkNoYW5nZT17b25Db2x1bW5zQ2hhbmdlfVxuICAgICAgaXRlbVJlbmRlcmVycz17XG4gICAgICAgIGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRU5BQkxFX0FEVkFOQ0VEX0RBVEFfVFlQRVMpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt2fVxuICAgICAgICAgICAgICAgICAgICAgIG9uU2F2ZVRpdGxlPXtvbkl0ZW1DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHt2fVxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogKHZhbHVlLCBfb25JdGVtQ2hhbmdlLCBfbGFiZWwsIHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBkYXRhc291cmNlLm1haW5fZHR0bV9jb2wgPT09IHJlY29yZC5jb2x1bW5fbmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9ICFjb2x1bW5zLmZpbmQoXG4gICAgICAgICAgICAgICAgICBjb2x1bW4gPT4gY29sdW1uLmNvbHVtbl9uYW1lID09PSByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgKS5pc19kdHRtO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PXtgcmFkaW8tZGVmYXVsdC1kdHRtLSR7cmVjb3JkLmNvbHVtbl9uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0eXBlOiBkID0+IChkID8gPExhYmVsPntkfTwvTGFiZWw+IDogbnVsbCksXG4gICAgICAgICAgICAgIGFkdmFuY2VkX2RhdGFfdHlwZTogZCA9PiAoXG4gICAgICAgICAgICAgICAgPExhYmVsIG9uQ2hhbmdlPXtvbkNvbHVtbnNDaGFuZ2V9PntkfTwvTGFiZWw+XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGlzX2R0dG06IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZ3JvdXBieTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uSXRlbUNoYW5nZX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3Z9XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiAodmFsdWUsIF9vbkl0ZW1DaGFuZ2UsIF9sYWJlbCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGRhdGFzb3VyY2UubWFpbl9kdHRtX2NvbCA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gIWNvbHVtbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIGNvbHVtbiA9PiBjb2x1bW4uY29sdW1uX25hbWUgPT09IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICApLmlzX2R0dG07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9e2ByYWRpby1kZWZhdWx0LWR0dG0tJHtyZWNvcmQuY29sdW1uX25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHR5cGU6IGQgPT4gKGQgPyA8TGFiZWw+e2R9PC9MYWJlbD4gOiBudWxsKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBncm91cGJ5OiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAvPlxuICApO1xufVxuQ29sdW1uQ29sbGVjdGlvblRhYmxlLnByb3BUeXBlcyA9IHtcbiAgY29sdW1uczogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25Db2x1bW5zQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBvbkRhdGFzb3VyY2VDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGVkaXRhYmxlQ29sdW1uTmFtZTogUHJvcFR5cGVzLmJvb2wsXG4gIHNob3dFeHByZXNzaW9uOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dBZGRJdGVtOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dFZGl0RGF0YVR5cGU6IFByb3BUeXBlcy5ib29sLFxuICBpdGVtR2VuZXJhdG9yOiBQcm9wVHlwZXMuZnVuYyxcbn07XG5Db2x1bW5Db2xsZWN0aW9uVGFibGUuZGVmYXVsdFByb3BzID0ge1xuICBlZGl0YWJsZUNvbHVtbk5hbWU6IGZhbHNlLFxuICBzaG93RXhwcmVzc2lvbjogZmFsc2UsXG4gIGFsbG93QWRkSXRlbTogZmFsc2UsXG4gIGFsbG93RWRpdERhdGFUeXBlOiBmYWxzZSxcbiAgaXRlbUdlbmVyYXRvcjogKCkgPT4gKHtcbiAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICBncm91cGJ5OiB0cnVlLFxuICB9KSxcbn07XG5cbmZ1bmN0aW9uIFN0YWNrZWRGaWVsZCh7IGxhYmVsLCBmb3JtRWxlbWVudCB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxzdHJvbmc+e2xhYmVsfTwvc3Ryb25nPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2Pntmb3JtRWxlbWVudH08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuU3RhY2tlZEZpZWxkLnByb3BUeXBlcyA9IHtcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZvcm1FbGVtZW50OiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmZ1bmN0aW9uIEZvcm1Db250YWluZXIoeyBjaGlsZHJlbiB9KSB7XG4gIHJldHVybiA8Q2FyZCBwYWRkZWQ+e2NoaWxkcmVufTwvQ2FyZD47XG59XG5cbkZvcm1Db250YWluZXIucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG59O1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICBhZGRTdWNjZXNzVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGFkZERhbmdlclRvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZXRJc0VkaXRpbmc6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBvbkNoYW5nZTogKCkgPT4ge30sXG4gIHNldElzRWRpdGluZzogKCkgPT4ge30sXG59O1xuXG5mdW5jdGlvbiBPd25lcnNTZWxlY3Rvcih7IGRhdGFzb3VyY2UsIG9uQ2hhbmdlIH0pIHtcbiAgY29uc3QgbG9hZE9wdGlvbnMgPSB1c2VDYWxsYmFjaygoc2VhcmNoID0gJycsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSByaXNvbi5lbmNvZGUoeyBmaWx0ZXI6IHNlYXJjaCwgcGFnZSwgcGFnZV9zaXplOiBwYWdlU2l6ZSB9KTtcbiAgICByZXR1cm4gU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9kYXRhc2V0L3JlbGF0ZWQvb3duZXJzP3E9JHtxdWVyeX1gLFxuICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gKHtcbiAgICAgIGRhdGE6IHJlc3BvbnNlLmpzb24ucmVzdWx0XG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLmV4dHJhLmFjdGl2ZSlcbiAgICAgICAgLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgbGFiZWw6IGl0ZW0udGV4dCxcbiAgICAgICAgfSkpLFxuICAgICAgdG90YWxDb3VudDogcmVzcG9uc2UuanNvbi5jb3VudCxcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxBc3luY1NlbGVjdFxuICAgICAgYXJpYUxhYmVsPXt0KCdTZWxlY3Qgb3duZXJzJyl9XG4gICAgICBtb2RlPVwibXVsdGlwbGVcIlxuICAgICAgbmFtZT1cIm93bmVyc1wiXG4gICAgICB2YWx1ZT17ZGF0YXNvdXJjZS5vd25lcnN9XG4gICAgICBvcHRpb25zPXtsb2FkT3B0aW9uc31cbiAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgIGhlYWRlcj17PEZvcm1MYWJlbD57dCgnT3duZXJzJyl9PC9Gb3JtTGFiZWw+fVxuICAgICAgYWxsb3dDbGVhclxuICAgIC8+XG4gICk7XG59XG5cbmNsYXNzIERhdGFzb3VyY2VFZGl0b3IgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRhdGFzb3VyY2U6IHtcbiAgICAgICAgLi4ucHJvcHMuZGF0YXNvdXJjZSxcbiAgICAgICAgb3duZXJzOiBwcm9wcy5kYXRhc291cmNlLm93bmVycy5tYXAob3duZXIgPT4gKHtcbiAgICAgICAgICB2YWx1ZTogb3duZXIudmFsdWUgfHwgb3duZXIuaWQsXG4gICAgICAgICAgbGFiZWw6IG93bmVyLmxhYmVsIHx8IGAke293bmVyLmZpcnN0X25hbWV9ICR7b3duZXIubGFzdF9uYW1lfWAsXG4gICAgICAgIH0pKSxcbiAgICAgICAgbWV0cmljczogcHJvcHMuZGF0YXNvdXJjZS5tZXRyaWNzPy5tYXAobWV0cmljID0+IHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpY2F0aW9uRGV0YWlscyxcbiAgICAgICAgICB9ID0gbWV0cmljO1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb246IHsgZGV0YWlscywgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSB9ID0ge30sXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24sXG4gICAgICAgICAgfSA9IEpTT04ucGFyc2UobWV0cmljLmV4dHJhIHx8ICd7fScpIHx8IHt9O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5tZXRyaWMsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzIHx8IGRldGFpbHMsXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24gfHwgJycsXG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IHx8IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIGVycm9yczogW10sXG4gICAgICBpc1NxbGE6XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UuZGF0YXNvdXJjZV90eXBlID09PSAndGFibGUnIHx8XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UudHlwZSA9PT0gJ3RhYmxlJyxcbiAgICAgIGlzRWRpdE1vZGU6IGZhbHNlLFxuICAgICAgZGF0YWJhc2VDb2x1bW5zOiBwcm9wcy5kYXRhc291cmNlLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiAhY29sLmV4cHJlc3Npb24pLFxuICAgICAgY2FsY3VsYXRlZENvbHVtbnM6IHByb3BzLmRhdGFzb3VyY2UuY29sdW1ucy5maWx0ZXIoXG4gICAgICAgIGNvbCA9PiAhIWNvbC5leHByZXNzaW9uLFxuICAgICAgKSxcbiAgICAgIG1ldGFkYXRhTG9hZGluZzogZmFsc2UsXG4gICAgICBhY3RpdmVUYWJLZXk6IDAsXG4gICAgICBkYXRhc291cmNlVHlwZTogcHJvcHMuZGF0YXNvdXJjZS5zcWxcbiAgICAgICAgPyBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5XG4gICAgICAgIDogREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXksXG4gICAgfTtcblxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNoYW5nZUVkaXRNb2RlID0gdGhpcy5vbkNoYW5nZUVkaXRNb2RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlID0gdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UgPSB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEgPVxuICAgICAgdGhpcy50YWJsZUNoYW5nZUFuZFN5bmNNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3luY01ldGFkYXRhID0gdGhpcy5zeW5jTWV0YWRhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldENvbHVtbnMgPSB0aGlzLnNldENvbHVtbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlID0gdGhpcy52YWxpZGF0ZUFuZENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVGFiU2VsZWN0ID0gdGhpcy5oYW5kbGVUYWJTZWxlY3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFsbG93RWRpdFNvdXJjZSA9ICFpc0ZlYXR1cmVFbmFibGVkKFxuICAgICAgRmVhdHVyZUZsYWcuRElTQUJMRV9EQVRBU0VUX1NPVVJDRV9FRElULFxuICAgICk7XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICAvLyBFbXB0eWluZyBTUUwgaWYgXCJQaHlzaWNhbFwiIHJhZGlvIGJ1dHRvbiBpcyBzZWxlY3RlZFxuICAgIC8vIEN1cnJlbnRseSB0aGUgbG9naWMgdG8ga25vdyB3aGV0aGVyIHRoZSBzb3VyY2UgaXNcbiAgICAvLyBwaHlzaWNhbCBvciB2aXJ0dWFsIGlzIGJhc2VkIG9uIHdoZXRoZXIgU1FMIGlzIGVtcHR5IG9yIG5vdC5cbiAgICBjb25zdCB7IGRhdGFzb3VyY2VUeXBlLCBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHNxbCA9XG4gICAgICBkYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgPyAnJyA6IGRhdGFzb3VyY2Uuc3FsO1xuICAgIGNvbnN0IG5ld0RhdGFzb3VyY2UgPSB7XG4gICAgICAuLi50aGlzLnN0YXRlLmRhdGFzb3VyY2UsXG4gICAgICBzcWwsXG4gICAgICBjb2x1bW5zOiBbLi4udGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnMsIC4uLnRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnNdLFxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShuZXdEYXRhc291cmNlLCB0aGlzLnN0YXRlLmVycm9ycyk7XG4gIH1cblxuICBvbkNoYW5nZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMuc2V0SXNFZGl0aW5nKCF0aGlzLnN0YXRlLmlzRWRpdE1vZGUpO1xuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7IGlzRWRpdE1vZGU6ICFwcmV2U3RhdGUuaXNFZGl0TW9kZSB9KSk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgY2FsbGJhY2sgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2UgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25EYXRhc291cmNlUHJvcENoYW5nZShhdHRyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkbyBub3QgdXBkYXRlIHN0YXRlXG4gICAgY29uc3QgZGF0YXNvdXJjZSA9IHsgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH07XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICBkYXRhc291cmNlOiB7IC4uLnByZXZTdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH0sXG4gICAgICB9KSxcbiAgICAgIGF0dHIgPT09ICd0YWJsZV9uYW1lJ1xuICAgICAgICA/IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEpXG4gICAgICAgIDogdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSksXG4gICAgKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVR5cGVDaGFuZ2UoZGF0YXNvdXJjZVR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGF0YXNvdXJjZVR5cGUgfSk7XG4gIH1cblxuICBzZXRDb2x1bW5zKG9iaikge1xuICAgIC8vIHVwZGF0ZSBjYWxjdWxhdGVkQ29sdW1ucyBvciBkYXRhYmFzZUNvbHVtbnNcbiAgICB0aGlzLnNldFN0YXRlKG9iaiwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSk7XG4gIH1cblxuICB2YWxpZGF0ZUFuZENoYW5nZSgpIHtcbiAgICB0aGlzLnZhbGlkYXRlKHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgdGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNNZXRhZGF0YSgpO1xuICAgICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQ29sdW1ucyhjb2xzKSB7XG4gICAgY29uc3QgeyBkYXRhYmFzZUNvbHVtbnMgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgZGF0YWJhc2VDb2x1bW5OYW1lcyA9IGNvbHMubWFwKGNvbCA9PiBjb2wubmFtZSk7XG4gICAgY29uc3QgY3VycmVudENvbHMgPSBkYXRhYmFzZUNvbHVtbnMucmVkdWNlKFxuICAgICAgKGFnZywgY29sKSA9PiAoe1xuICAgICAgICAuLi5hZ2csXG4gICAgICAgIFtjb2wuY29sdW1uX25hbWVdOiBjb2wsXG4gICAgICB9KSxcbiAgICAgIHt9LFxuICAgICk7XG4gICAgY29uc3QgZmluYWxDb2x1bW5zID0gW107XG4gICAgY29uc3QgcmVzdWx0cyA9IHtcbiAgICAgIGFkZGVkOiBbXSxcbiAgICAgIG1vZGlmaWVkOiBbXSxcbiAgICAgIHJlbW92ZWQ6IGRhdGFiYXNlQ29sdW1uc1xuICAgICAgICAubWFwKGNvbCA9PiBjb2wuY29sdW1uX25hbWUpXG4gICAgICAgIC5maWx0ZXIoY29sID0+ICFkYXRhYmFzZUNvbHVtbk5hbWVzLmluY2x1ZGVzKGNvbCkpLFxuICAgIH07XG4gICAgY29scy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50Q29sID0gY3VycmVudENvbHNbY29sLm5hbWVdO1xuICAgICAgaWYgKCFjdXJyZW50Q29sKSB7XG4gICAgICAgIC8vIG5ldyBjb2x1bW5cbiAgICAgICAgZmluYWxDb2x1bW5zLnB1c2goe1xuICAgICAgICAgIGlkOiBzaG9ydGlkLmdlbmVyYXRlKCksXG4gICAgICAgICAgY29sdW1uX25hbWU6IGNvbC5uYW1lLFxuICAgICAgICAgIHR5cGU6IGNvbC50eXBlLFxuICAgICAgICAgIGdyb3VwYnk6IHRydWUsXG4gICAgICAgICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBpc19kdHRtOiBjb2wuaXNfZHR0bSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc3VsdHMuYWRkZWQucHVzaChjb2wubmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBjdXJyZW50Q29sLnR5cGUgIT09IGNvbC50eXBlIHx8XG4gICAgICAgICghY3VycmVudENvbC5pc19kdHRtICYmIGNvbC5pc19kdHRtKVxuICAgICAgKSB7XG4gICAgICAgIC8vIG1vZGlmaWVkIGNvbHVtblxuICAgICAgICBmaW5hbENvbHVtbnMucHVzaCh7XG4gICAgICAgICAgLi4uY3VycmVudENvbCxcbiAgICAgICAgICB0eXBlOiBjb2wudHlwZSxcbiAgICAgICAgICBpc19kdHRtOiBjdXJyZW50Q29sLmlzX2R0dG0gfHwgY29sLmlzX2R0dG0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXN1bHRzLm1vZGlmaWVkLnB1c2goY29sLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdW5jaGFuZ2VkXG4gICAgICAgIGZpbmFsQ29sdW1ucy5wdXNoKGN1cnJlbnRDb2wpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChcbiAgICAgIHJlc3VsdHMuYWRkZWQubGVuZ3RoIHx8XG4gICAgICByZXN1bHRzLm1vZGlmaWVkLmxlbmd0aCB8fFxuICAgICAgcmVzdWx0cy5yZW1vdmVkLmxlbmd0aFxuICAgICkge1xuICAgICAgdGhpcy5zZXRDb2x1bW5zKHsgZGF0YWJhc2VDb2x1bW5zOiBmaW5hbENvbHVtbnMgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgc3luY01ldGFkYXRhKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBkYXRhc291cmNlX3R5cGU6IGRhdGFzb3VyY2UudHlwZSB8fCBkYXRhc291cmNlLmRhdGFzb3VyY2VfdHlwZSxcbiAgICAgIGRhdGFiYXNlX25hbWU6XG4gICAgICAgIGRhdGFzb3VyY2UuZGF0YWJhc2UuZGF0YWJhc2VfbmFtZSB8fCBkYXRhc291cmNlLmRhdGFiYXNlLm5hbWUsXG4gICAgICBzY2hlbWFfbmFtZTogZGF0YXNvdXJjZS5zY2hlbWEsXG4gICAgICB0YWJsZV9uYW1lOiBkYXRhc291cmNlLnRhYmxlX25hbWVcbiAgICAgICAgPyBlbmNvZGVVUklDb21wb25lbnQoZGF0YXNvdXJjZS50YWJsZV9uYW1lKVxuICAgICAgICA6IGRhdGFzb3VyY2UudGFibGVfbmFtZSxcbiAgICB9O1xuICAgIE9iamVjdC5lbnRyaWVzKHBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAvLyByaXNvbiBjYW4ndCBlbmNvZGUgdGhlIHVuZGVmaW5lZCB2YWx1ZVxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGFyYW1zW2tleV0gPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGVuZHBvaW50ID0gYC9kYXRhc291cmNlL2V4dGVybmFsX21ldGFkYXRhX2J5X25hbWUvP3E9JHtyaXNvbi5lbmNvZGUoXG4gICAgICBwYXJhbXMsXG4gICAgKX1gO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRhZGF0YUxvYWRpbmc6IHRydWUgfSk7XG5cbiAgICBTdXBlcnNldENsaWVudC5nZXQoeyBlbmRwb2ludCB9KVxuICAgICAgLnRoZW4oKHsganNvbiB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnVwZGF0ZUNvbHVtbnMoanNvbik7XG4gICAgICAgIGlmIChyZXN1bHRzLm1vZGlmaWVkLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMucHJvcHMuYWRkU3VjY2Vzc1RvYXN0KFxuICAgICAgICAgICAgdCgnTW9kaWZpZWQgY29sdW1uczogJXMnLCByZXN1bHRzLm1vZGlmaWVkLmpvaW4oJywgJykpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdHMucmVtb3ZlZC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdChcbiAgICAgICAgICAgIHQoJ1JlbW92ZWQgY29sdW1uczogJXMnLCByZXN1bHRzLnJlbW92ZWQuam9pbignLCAnKSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0cy5hZGRlZC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdChcbiAgICAgICAgICAgIHQoJ05ldyBjb2x1bW5zIGFkZGVkOiAlcycsIHJlc3VsdHMuYWRkZWQuam9pbignLCAnKSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdNZXRhZGF0YSBoYXMgYmVlbiBzeW5jZWQnKSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRhZGF0YUxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChyZXNwb25zZSA9PlxuICAgICAgICBnZXRDbGllbnRFcnJvck9iamVjdChyZXNwb25zZSkudGhlbigoeyBlcnJvciwgc3RhdHVzVGV4dCB9KSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdChcbiAgICAgICAgICAgIGVycm9yIHx8IHN0YXR1c1RleHQgfHwgdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJyksXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgfSksXG4gICAgICApO1xuICB9XG5cbiAgZmluZER1cGxpY2F0ZXMoYXJyLCBhY2Nlc3Nvcikge1xuICAgIGNvbnN0IHNlZW4gPSB7fTtcbiAgICBjb25zdCBkdXBzID0gW107XG4gICAgYXJyLmZvckVhY2gob2JqID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhY2Nlc3NvcihvYmopO1xuICAgICAgaWYgKGl0ZW0gaW4gc2Vlbikge1xuICAgICAgICBkdXBzLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuW2l0ZW1dID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZHVwcztcbiAgfVxuXG4gIHZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgbGV0IGVycm9ycyA9IFtdO1xuICAgIGxldCBkdXBzO1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIC8vIExvb2tpbmcgZm9yIGR1cGxpY2F0ZSBjb2x1bW5fbmFtZVxuICAgIGR1cHMgPSB0aGlzLmZpbmREdXBsaWNhdGVzKGRhdGFzb3VyY2UuY29sdW1ucywgb2JqID0+IG9iai5jb2x1bW5fbmFtZSk7XG4gICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChcbiAgICAgIGR1cHMubWFwKG5hbWUgPT4gdCgnQ29sdW1uIG5hbWUgWyVzXSBpcyBkdXBsaWNhdGVkJywgbmFtZSkpLFxuICAgICk7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgbWV0cmljX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLm1ldHJpY3MsIG9iaiA9PiBvYmoubWV0cmljX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ01ldHJpYyBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTWFraW5nIHN1cmUgY2FsY3VsYXRlZENvbHVtbnMgaGF2ZSBhbiBleHByZXNzaW9uIGRlZmluZWRcbiAgICBjb25zdCBub0ZpbHRlckNhbGNDb2xzID0gdGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1ucy5maWx0ZXIoXG4gICAgICBjb2wgPT4gIWNvbC5leHByZXNzaW9uICYmICFjb2wuanNvbixcbiAgICApO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBub0ZpbHRlckNhbGNDb2xzLm1hcChjb2wgPT5cbiAgICAgICAgdCgnQ2FsY3VsYXRlZCBjb2x1bW4gWyVzXSByZXF1aXJlcyBhbiBleHByZXNzaW9uJywgY29sLmNvbHVtbl9uYW1lKSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcnMgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaGFuZGxlVGFiU2VsZWN0KGFjdGl2ZVRhYktleSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWJLZXkgfSk7XG4gIH1cblxuICBzb3J0TWV0cmljcyhtZXRyaWNzKSB7XG4gICAgcmV0dXJuIG1ldHJpY3Muc29ydCgoeyBpZDogYSB9LCB7IGlkOiBiIH0pID0+IGIgLSBhKTtcbiAgfVxuXG4gIHJlbmRlclNldHRpbmdzRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0Jhc2ljJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVmYXVsdF9lbmRwb2ludFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0RlZmF1bHQgVVJMJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnRGVmYXVsdCBVUkwgdG8gcmVkaXJlY3QgdG8gd2hlbiBhY2Nlc3NpbmcgZnJvbSB0aGUgZGF0YXNldCBsaXN0IHBhZ2UnLFxuICAgICAgICAgICl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cImRlZmF1bHRfZW5kcG9pbnRcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgaW5saW5lXG4gICAgICAgICAgZmllbGRLZXk9XCJmaWx0ZXJfc2VsZWN0X2VuYWJsZWRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgZmlsdGVycycpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdXaGV0aGVyIHRvIHBvcHVsYXRlIGF1dG9jb21wbGV0ZSBmaWx0ZXJzIG9wdGlvbnMnKX1cbiAgICAgICAgICBjb250cm9sPXs8Q2hlY2tib3hDb250cm9sIC8+fVxuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgcXVlcnkgcHJlZGljYXRlJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ1doZW4gdXNpbmcgXCJBdXRvY29tcGxldGUgZmlsdGVyc1wiLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UgJyArXG4gICAgICAgICAgICAgICAgJ29mIHRoZSBxdWVyeSBmZXRjaGluZyB0aGUgdmFsdWVzLiBVc2UgdGhpcyBvcHRpb24gdG8gYXBwbHkgYSAnICtcbiAgICAgICAgICAgICAgICAncHJlZGljYXRlIChXSEVSRSBjbGF1c2UpIHRvIHRoZSBxdWVyeSBzZWxlY3RpbmcgdGhlIGRpc3RpbmN0ICcgK1xuICAgICAgICAgICAgICAgICd2YWx1ZXMgZnJvbSB0aGUgdGFibGUuIFR5cGljYWxseSB0aGUgaW50ZW50IHdvdWxkIGJlIHRvIGxpbWl0IHRoZSBzY2FuICcgK1xuICAgICAgICAgICAgICAgICdieSBhcHBseWluZyBhIHJlbGF0aXZlIHRpbWUgZmlsdGVyIG9uIGEgcGFydGl0aW9uZWQgb3IgaW5kZXhlZCB0aW1lLXJlbGF0ZWQgZmllbGQuJyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgICAgICBtaW5MaW5lcz17NX1cbiAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwiZXh0cmFcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0V4dHJhJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ0V4dHJhIGRhdGEgdG8gc3BlY2lmeSB0YWJsZSBtZXRhZGF0YS4gQ3VycmVudGx5IHN1cHBvcnRzICcgK1xuICAgICAgICAgICAgICAgICdtZXRhZGF0YSBvZiB0aGUgZm9ybWF0OiBgeyBcImNlcnRpZmljYXRpb25cIjogeyBcImNlcnRpZmllZF9ieVwiOiAnICtcbiAgICAgICAgICAgICAgICAnXCJEYXRhIFBsYXRmb3JtIFRlYW1cIiwgXCJkZXRhaWxzXCI6IFwiVGhpcyB0YWJsZSBpcyB0aGUgc291cmNlIG9mIHRydXRoLlwiICcgK1xuICAgICAgICAgICAgICAgICd9LCBcIndhcm5pbmdfbWFya2Rvd25cIjogXCJUaGlzIGlzIGEgd2FybmluZy5cIiB9YC4nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgY29udHJvbElkPVwiZXh0cmFcIlxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwianNvblwiXG4gICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxPd25lcnNTZWxlY3RvclxuICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgb25DaGFuZ2U9e25ld093bmVycyA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZSh7IC4uLmRhdGFzb3VyY2UsIG93bmVyczogbmV3T3duZXJzIH0pO1xuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L0ZpZWxkc2V0PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJBZHZhbmNlZEZpZWxkc2V0KCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPEZpZWxkc2V0XG4gICAgICAgIHRpdGxlPXt0KCdBZHZhbmNlZCcpfVxuICAgICAgICBpdGVtPXtkYXRhc291cmNlfVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiY2FjaGVfdGltZW91dFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0NhY2hlIHRpbWVvdXQnKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgZHVyYXRpb24gb2YgdGltZSBpbiBzZWNvbmRzIGJlZm9yZSB0aGUgY2FjaGUgaXMgaW52YWxpZGF0ZWQuIFNldCB0byAtMSB0byBieXBhc3MgdGhlIGNhY2hlLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwiY2FjaGVfdGltZW91dFwiIC8+fVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBmaWVsZEtleT1cIm9mZnNldFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0hvdXJzIG9mZnNldCcpfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJvZmZzZXRcIiAvPn1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgbnVtYmVyIG9mIGhvdXJzLCBuZWdhdGl2ZSBvciBwb3NpdGl2ZSwgdG8gc2hpZnQgdGhlIHRpbWUgY29sdW1uLiBUaGlzIGNhbiBiZSB1c2VkIHRvIG1vdmUgVVRDIHRpbWUgdG8gbG9jYWwgdGltZS4nLFxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cInRlbXBsYXRlX3BhcmFtc1wiXG4gICAgICAgICAgICBsYWJlbD17dCgnVGVtcGxhdGUgcGFyYW1ldGVycycpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICdBIHNldCBvZiBwYXJhbWV0ZXJzIHRoYXQgYmVjb21lIGF2YWlsYWJsZSBpbiB0aGUgcXVlcnkgdXNpbmcgSmluamEgdGVtcGxhdGluZyBzeW50YXgnLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJ0ZW1wbGF0ZV9wYXJhbXNcIiAvPn1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9GaWVsZHNldD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyU3BhdGlhbFRhYigpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBzcGF0aWFscywgYWxsX2NvbHM6IGFsbENvbHMgfSA9IGRhdGFzb3VyY2U7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUYWJzLlRhYlBhbmVcbiAgICAgICAgdGFiPXs8Q29sbGVjdGlvblRhYlRpdGxlIGNvbGxlY3Rpb249e3NwYXRpYWxzfSB0aXRsZT17dCgnU3BhdGlhbCcpfSAvPn1cbiAgICAgICAga2V5PXs0fVxuICAgICAgPlxuICAgICAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgdGFibGVDb2x1bW5zPXtbJ25hbWUnLCAnY29uZmlnJ119XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMsICdzcGF0aWFscycpfVxuICAgICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgICBuYW1lOiB0KCc8bmV3IHNwYXRpYWw+JyksXG4gICAgICAgICAgICB0eXBlOiB0KCc8bm8gdHlwZT4nKSxcbiAgICAgICAgICAgIGNvbmZpZzogbnVsbCxcbiAgICAgICAgICB9KX1cbiAgICAgICAgICBjb2xsZWN0aW9uPXtzcGF0aWFsc31cbiAgICAgICAgICBhbGxvd0RlbGV0ZXNcbiAgICAgICAgICBpdGVtUmVuZGVyZXJzPXt7XG4gICAgICAgICAgICBuYW1lOiAoZCwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGUgY2FuRWRpdCB0aXRsZT17ZH0gb25TYXZlVGl0bGU9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbmZpZzogKHYsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICAgIDxTcGF0aWFsQ29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSBjaG9pY2VzPXthbGxDb2xzfSAvPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclNvdXJjZUZpZWxkc2V0KHRoZW1lKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7dGhpcy5hbGxvd0VkaXRTb3VyY2UgJiYgKFxuICAgICAgICAgIDxFZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgICAgIDxzcGFuIHJvbGU9XCJidXR0b25cIiB0YWJJbmRleD17MH0gb25DbGljaz17dGhpcy5vbkNoYW5nZUVkaXRNb2RlfT5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSA/IChcbiAgICAgICAgICAgICAgICA8SWNvbnMuTG9ja1VubG9ja2VkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxJY29ucy5Mb2NrTG9ja2VkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgeyF0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgICA8ZGl2Pnt0KCdDbGljayB0aGUgbG9jayB0byBtYWtlIGNoYW5nZXMuJyl9PC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJiAoXG4gICAgICAgICAgICAgIDxkaXY+e3QoJ0NsaWNrIHRoZSBsb2NrIHRvIHByZXZlbnQgZnVydGhlciBjaGFuZ2VzLicpfTwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0VkaXRMb2NrQ29udGFpbmVyPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm0tbC0xMCBtLXQtMjAgbS1iLTEwXCI+XG4gICAgICAgICAge0RBVEFTT1VSQ0VfVFlQRVNfQVJSLm1hcCh0eXBlID0+IChcbiAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICBrZXk9e3R5cGUua2V5fVxuICAgICAgICAgICAgICB2YWx1ZT17dHlwZS5rZXl9XG4gICAgICAgICAgICAgIGlubGluZVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VUeXBlQ2hhbmdlLmJpbmQodGhpcywgdHlwZS5rZXkpfVxuICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSB0eXBlLmtleX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0eXBlLmxhYmVsfVxuICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8RmllbGRzZXQgaXRlbT17ZGF0YXNvdXJjZX0gb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfSBjb21wYWN0PlxuICAgICAgICAgIHt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5ICYmIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRhdGFiYXNlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCd2aXJ0dWFsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRhYmFzZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGI9e2RhdGFzb3VyY2U/LmRhdGFiYXNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYT17ZGF0YXNvdXJjZS5zY2hlbWF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TY2hlbWFDaGFuZ2U9e3NjaGVtYSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3NjaGVtYScsIHNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EYkNoYW5nZT17ZGF0YWJhc2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdkYXRhYmFzZScsIGRhdGFiYXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtTW9kZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXJyb3I9e3RoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXt7IHdpZHRoOiAnY2FsYygxMDAlIC0gMzRweCknLCBtYXJnaW5Ub3A6IC0xNiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0YXNldCBuYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RhYmxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEYXRhc2V0IG5hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCcpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICAgICAnV2hlbiBzcGVjaWZ5aW5nIFNRTCwgdGhlIGRhdGFzb3VyY2UgYWN0cyBhcyBhIHZpZXcuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1N1cGVyc2V0IHdpbGwgdXNlIHRoaXMgc3RhdGVtZW50IGFzIGEgc3VicXVlcnkgd2hpbGUgZ3JvdXBpbmcgYW5kIGZpbHRlcmluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvbiB0aGUgZ2VuZXJhdGVkIHBhcmVudCBxdWVyaWVzLicsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWluTGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgJiYgKFxuICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInRhYmxlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1BoeXNpY2FsJyl9XG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2U9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZS5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VfbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlLmRhdGFiYXNlPy5kYXRhYmFzZV9uYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBkYklkPXtkYXRhc291cmNlLmRhdGFiYXNlPy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yPXt0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hPXtkYXRhc291cmNlLnNjaGVtYX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbExhYk1vZGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVWYWx1ZT17ZGF0YXNvdXJjZS50YWJsZV9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TY2hlbWFDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNjaGVtYSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3NjaGVtYScsIHNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25EYkNoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGF0YWJhc2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhYmFzZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25UYWJsZVNlbGVjdENoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGFibGUgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCd0YWJsZV9uYW1lJywgdGFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAgICdUaGUgcG9pbnRlciB0byBhIHBoeXNpY2FsIHRhYmxlIChvciB2aWV3KS4gS2VlcCBpbiBtaW5kIHRoYXQgdGhlIGNoYXJ0IGlzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdhc3NvY2lhdGVkIHRvIHRoaXMgU3VwZXJzZXQgbG9naWNhbCB0YWJsZSwgYW5kIHRoaXMgbG9naWNhbCB0YWJsZSBwb2ludHMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ3RoZSBwaHlzaWNhbCB0YWJsZSByZWZlcmVuY2VkIGhlcmUuJyxcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvRmllbGRzZXQ+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyRXJyb3JzKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8QWxlcnRcbiAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7IG1hcmdpbkJvdHRvbTogdGhlbWUuZ3JpZFVuaXQgKiA0IH0pfVxuICAgICAgICAgIHR5cGU9XCJlcnJvclwiXG4gICAgICAgICAgbWVzc2FnZT17XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvcnMubWFwKGVyciA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Vycn0+e2Vycn08L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJlbmRlck1ldHJpY0NvbGxlY3Rpb24oKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgbWV0cmljcyB9ID0gZGF0YXNvdXJjZTtcbiAgICBjb25zdCBzb3J0ZWRNZXRyaWNzID0gbWV0cmljcz8ubGVuZ3RoID8gdGhpcy5zb3J0TWV0cmljcyhtZXRyaWNzKSA6IFtdO1xuICAgIHJldHVybiAoXG4gICAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICAgIHRhYmxlQ29sdW1ucz17WydtZXRyaWNfbmFtZScsICd2ZXJib3NlX25hbWUnLCAnZXhwcmVzc2lvbiddfVxuICAgICAgICBzb3J0Q29sdW1ucz17WydtZXRyaWNfbmFtZScsICd2ZXJib3NlX25hbWUnLCAnZXhwcmVzc2lvbiddfVxuICAgICAgICBjb2x1bW5MYWJlbHM9e3tcbiAgICAgICAgICBtZXRyaWNfbmFtZTogdCgnTWV0cmljJyksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiB0KCdMYWJlbCcpLFxuICAgICAgICAgIGV4cHJlc3Npb246IHQoJ1NRTCBleHByZXNzaW9uJyksXG4gICAgICAgIH19XG4gICAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxGaWVsZHNldCBjb21wYWN0PlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZDNmb3JtYXRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEMyBmb3JtYXQnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJkM2Zvcm1hdFwiIHBsYWNlaG9sZGVyPVwiJXkvJW0vJWRcIiAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICdQZXJzb24gb3IgZ3JvdXAgdGhhdCBoYXMgY2VydGlmaWVkIHRoaXMgbWV0cmljJyxcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdDZXJ0aWZpZWQgYnknKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdXYXJuaW5nJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ3YXJuaW5nX21hcmtkb3duXCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnT3B0aW9uYWwgd2FybmluZyBhYm91dCB1c2Ugb2YgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwid2FybmluZ19tYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgICAgIDwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uPXtzb3J0ZWRNZXRyaWNzfVxuICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMsICdtZXRyaWNzJyl9XG4gICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJzxuZXcgbWV0cmljPicpLFxuICAgICAgICAgIHZlcmJvc2VfbmFtZTogJycsXG4gICAgICAgICAgZXhwcmVzc2lvbjogJycsXG4gICAgICAgIH0pfVxuICAgICAgICBpdGVtQ2VsbFByb3BzPXt7XG4gICAgICAgICAgZXhwcmVzc2lvbjogKCkgPT4gKHtcbiAgICAgICAgICAgIHdpZHRoOiAnMjQwcHgnLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9fVxuICAgICAgICBpdGVtUmVuZGVyZXJzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6ICh2LCBvbkNoYW5nZSwgXywgcmVjb3JkKSA9PiAoXG4gICAgICAgICAgICA8RmxleFJvd0NvbnRhaW5lcj5cbiAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtyZWNvcmQud2FybmluZ19tYXJrZG93biAmJiAoXG4gICAgICAgICAgICAgICAgPFdhcm5pbmdJY29uV2l0aFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHdhcm5pbmdNYXJrZG93bj17cmVjb3JkLndhcm5pbmdfbWFya2Rvd259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGUgY2FuRWRpdCB0aXRsZT17dn0gb25TYXZlVGl0bGU9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICAgPC9GbGV4Um93Q29udGFpbmVyPlxuICAgICAgICAgICksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjYW5FZGl0IHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBleHByZXNzaW9uOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICBpbml0aWFsVmFsdWU9e3Z9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzPXtbJ2RhdGFzb3VyY2Utc3FsLWV4cHJlc3Npb24nXX1cbiAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJzcWxcIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgbWluTGluZXM9ezV9XG4gICAgICAgICAgICAgIHRleHRBcmVhU3R5bGVzPXt7IG1pbldpZHRoOiAnMjAwcHgnLCBtYXhXaWR0aDogJzQ1MHB4JyB9fVxuICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogKHYsIG9uQ2hhbmdlLCBsYWJlbCkgPT4gKFxuICAgICAgICAgICAgPFN0YWNrZWRGaWVsZFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50PXs8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz59XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgICAgZDNmb3JtYXQ6ICh2LCBvbkNoYW5nZSwgbGFiZWwpID0+IChcbiAgICAgICAgICAgIDxTdGFja2VkRmllbGRcbiAgICAgICAgICAgICAgbGFiZWw9e2xhYmVsfVxuICAgICAgICAgICAgICBmb3JtRWxlbWVudD17PFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICB9fVxuICAgICAgICBhbGxvd0RlbGV0ZXNcbiAgICAgICAgc3RpY2t5SGVhZGVyXG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlLCBhY3RpdmVUYWJLZXkgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBtZXRyaWNzIH0gPSBkYXRhc291cmNlO1xuICAgIGNvbnN0IHNvcnRlZE1ldHJpY3MgPSBtZXRyaWNzPy5sZW5ndGggPyB0aGlzLnNvcnRNZXRyaWNzKG1ldHJpY3MpIDogW107XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8RGF0YXNvdXJjZUNvbnRhaW5lcj5cbiAgICAgICAge3RoaXMucmVuZGVyRXJyb3JzKCl9XG4gICAgICAgIDxBbGVydFxuICAgICAgICAgIGNzcz17dGhlbWUgPT4gKHsgbWFyZ2luQm90dG9tOiB0aGVtZS5ncmlkVW5pdCAqIDQgfSl9XG4gICAgICAgICAgdHlwZT1cIndhcm5pbmdcIlxuICAgICAgICAgIG1lc3NhZ2U9e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgPHN0cm9uZz57dCgnQmUgY2FyZWZ1bC4nKX0gPC9zdHJvbmc+XG4gICAgICAgICAgICAgIHt0KFxuICAgICAgICAgICAgICAgICdDaGFuZ2luZyB0aGVzZSBzZXR0aW5ncyB3aWxsIGFmZmVjdCBhbGwgY2hhcnRzIHVzaW5nIHRoaXMgZGF0YXNldCwgaW5jbHVkaW5nIGNoYXJ0cyBvd25lZCBieSBvdGhlciBwZW9wbGUuJyxcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICAgPFN0eWxlZFRhYmxlVGFic1xuICAgICAgICAgIGZ1bGxXaWR0aD17ZmFsc2V9XG4gICAgICAgICAgaWQ9XCJ0YWJsZS10YWJzXCJcbiAgICAgICAgICBkYXRhLXRlc3Q9XCJlZGl0LWRhdGFzZXQtdGFic1wiXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVGFiU2VsZWN0fVxuICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYktleX1cbiAgICAgICAgPlxuICAgICAgICAgIDxUYWJzLlRhYlBhbmUga2V5PXswfSB0YWI9e3QoJ1NvdXJjZScpfT5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlclNvdXJjZUZpZWxkc2V0KHRoZW1lKX1cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17c29ydGVkTWV0cmljc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnTWV0cmljcycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5PXsxfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlck1ldHJpY0NvbGxlY3Rpb24oKX1cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnN9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0NvbHVtbnMnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleT17Mn1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8U3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5CdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICAgIDxTdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICAgICAgICBidXR0b25TdHlsZT1cInRlcnRpYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zeW5jTWV0YWRhdGF9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN5bmMtZnJvbS1zb3VyY2VcIlxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1kYXRhYmFzZVwiIC8+eycgJ31cbiAgICAgICAgICAgICAgICAgICAge3QoJ1N5bmMgY29sdW1ucyBmcm9tIHNvdXJjZScpfVxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8L0NvbHVtbkJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5Db2xsZWN0aW9uVGFibGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW5zLXRhYmxlXCJcbiAgICAgICAgICAgICAgICBjb2x1bW5zPXt0aGlzLnN0YXRlLmRhdGFiYXNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIG9uQ29sdW1uc0NoYW5nZT17ZGF0YWJhc2VDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBkYXRhYmFzZUNvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0YWRhdGFMb2FkaW5nICYmIDxMb2FkaW5nIC8+fVxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQ2FsY3VsYXRlZCBjb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2NhbGN1bGF0ZWRDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBjYWxjdWxhdGVkQ29sdW1ucyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lXG4gICAgICAgICAgICAgICAgc2hvd0V4cHJlc3Npb25cbiAgICAgICAgICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgICAgICAgICBhbGxvd0VkaXREYXRhVHlwZVxuICAgICAgICAgICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZ3JvdXBieTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IHQoJzxlbnRlciBTUUwgZXhwcmVzc2lvbiBoZXJlPicpLFxuICAgICAgICAgICAgICAgICAgX19leHBhbmRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvU3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSBrZXk9ezR9IHRhYj17dCgnU2V0dGluZ3MnKX0+XG4gICAgICAgICAgICA8Um93IGd1dHRlcj17MTZ9PlxuICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj57dGhpcy5yZW5kZXJTZXR0aW5nc0ZpZWxkc2V0KCl9PC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgICAgPEZvcm1Db250YWluZXI+e3RoaXMucmVuZGVyQWR2YW5jZWRGaWVsZHNldCgpfTwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgICA8L1Jvdz5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgPC9TdHlsZWRUYWJsZVRhYnM+XG4gICAgICA8L0RhdGFzb3VyY2VDb250YWluZXI+XG4gICAgKTtcbiAgfVxufVxuXG5EYXRhc291cmNlRWRpdG9yLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbkRhdGFzb3VyY2VFZGl0b3IucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuXG5jb25zdCBEYXRhU291cmNlQ29tcG9uZW50ID0gd2l0aFRoZW1lKERhdGFzb3VyY2VFZGl0b3IpO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoVG9hc3RzKERhdGFTb3VyY2VDb21wb25lbnQpO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\n\nclass DatasourceEditor extends React.PureComponent {\n  constructor(props) {var _props$datasource$met;\n    super(props);\n    this.state = {\n      datasource: {\n        ...props.datasource,\n        owners: props.datasource.owners.map((owner) => ({\n          value: owner.value || owner.id,\n          label: owner.label || `${owner.first_name} ${owner.last_name}` })),\n\n        metrics: (_props$datasource$met = props.datasource.metrics) == null ? void 0 : _props$datasource$met.map((metric) => {\n          const {\n            certified_by: certifiedByMetric,\n            certification_details: certificationDetails } =\n          metric;\n          const {\n            certification: { details, certified_by: certifiedBy } = {},\n            warning_markdown: warningMarkdown } =\n          JSON.parse(metric.extra || '{}') || {};\n          return {\n            ...metric,\n            certification_details: certificationDetails || details,\n            warning_markdown: warningMarkdown || '',\n            certified_by: certifiedBy || certifiedByMetric };\n\n        }) },\n\n      errors: [],\n      isSqla:\n      props.datasource.datasource_type === 'table' ||\n      props.datasource.type === 'table',\n      isEditMode: false,\n      databaseColumns: props.datasource.columns.filter((col) => !col.expression),\n      calculatedColumns: props.datasource.columns.filter(\n      (col) => !!col.expression),\n\n      metadataLoading: false,\n      activeTabKey: 0,\n      datasourceType: props.datasource.sql ?\n      DATASOURCE_TYPES.virtual.key :\n      DATASOURCE_TYPES.physical.key };\n\n\n    this.onChange = this.onChange.bind(this);\n    this.onChangeEditMode = this.onChangeEditMode.bind(this);\n    this.onDatasourcePropChange = this.onDatasourcePropChange.bind(this);\n    this.onDatasourceChange = this.onDatasourceChange.bind(this);\n    this.tableChangeAndSyncMetadata =\n    this.tableChangeAndSyncMetadata.bind(this);\n    this.syncMetadata = this.syncMetadata.bind(this);\n    this.setColumns = this.setColumns.bind(this);\n    this.validateAndChange = this.validateAndChange.bind(this);\n    this.handleTabSelect = this.handleTabSelect.bind(this);\n    this.allowEditSource = !isFeatureEnabled(\n    FeatureFlag.DISABLE_DATASET_SOURCE_EDIT);\n\n  }\n\n  onChange() {\n    // Emptying SQL if \"Physical\" radio button is selected\n    // Currently the logic to know whether the source is\n    // physical or virtual is based on whether SQL is empty or not.\n    const { datasourceType, datasource } = this.state;\n    const sql =\n    datasourceType === DATASOURCE_TYPES.physical.key ? '' : datasource.sql;\n    const newDatasource = {\n      ...this.state.datasource,\n      sql,\n      columns: [...this.state.databaseColumns, ...this.state.calculatedColumns] };\n\n    this.props.onChange(newDatasource, this.state.errors);\n  }\n\n  onChangeEditMode() {\n    this.props.setIsEditing(!this.state.isEditMode);\n    this.setState((prevState) => ({ isEditMode: !prevState.isEditMode }));\n  }\n\n  onDatasourceChange(datasource, callback) {if (callback === void 0) {callback = this.validateAndChange;}\n    this.setState({ datasource }, callback);\n  }\n\n  onDatasourcePropChange(attr, value) {\n    if (value === undefined) return; // if value is undefined do not update state\n    const datasource = { ...this.state.datasource, [attr]: value };\n    this.setState(\n    (prevState) => ({\n      datasource: { ...prevState.datasource, [attr]: value } }),\n\n    attr === 'table_name' ?\n    this.onDatasourceChange(datasource, this.tableChangeAndSyncMetadata) :\n    this.onDatasourceChange(datasource, this.validateAndChange));\n\n  }\n\n  onDatasourceTypeChange(datasourceType) {\n    this.setState({ datasourceType });\n  }\n\n  setColumns(obj) {\n    // update calculatedColumns or databaseColumns\n    this.setState(obj, this.validateAndChange);\n  }\n\n  validateAndChange() {\n    this.validate(this.onChange);\n  }\n\n  tableChangeAndSyncMetadata() {\n    this.validate(() => {\n      this.syncMetadata();\n      this.onChange();\n    });\n  }\n\n  updateColumns(cols) {\n    const { databaseColumns } = this.state;\n    const databaseColumnNames = cols.map((col) => col.name);\n    const currentCols = databaseColumns.reduce(\n    (agg, col) => ({\n      ...agg,\n      [col.column_name]: col }),\n\n    {});\n\n    const finalColumns = [];\n    const results = {\n      added: [],\n      modified: [],\n      removed: databaseColumns.\n      map((col) => col.column_name).\n      filter((col) => !_includesInstanceProperty(databaseColumnNames).call(databaseColumnNames, col)) };\n\n    cols.forEach((col) => {\n      const currentCol = currentCols[col.name];\n      if (!currentCol) {\n        // new column\n        finalColumns.push({\n          id: shortid.generate(),\n          column_name: col.name,\n          type: col.type,\n          groupby: true,\n          filterable: true,\n          is_dttm: col.is_dttm });\n\n        results.added.push(col.name);\n      } else if (\n      currentCol.type !== col.type ||\n      !currentCol.is_dttm && col.is_dttm)\n      {\n        // modified column\n        finalColumns.push({\n          ...currentCol,\n          type: col.type,\n          is_dttm: currentCol.is_dttm || col.is_dttm });\n\n        results.modified.push(col.name);\n      } else {\n        // unchanged\n        finalColumns.push(currentCol);\n      }\n    });\n    if (\n    results.added.length ||\n    results.modified.length ||\n    results.removed.length)\n    {\n      this.setColumns({ databaseColumns: finalColumns });\n    }\n    return results;\n  }\n\n  syncMetadata() {\n    const { datasource } = this.state;\n    const params = {\n      datasource_type: datasource.type || datasource.datasource_type,\n      database_name:\n      datasource.database.database_name || datasource.database.name,\n      schema_name: datasource.schema,\n      table_name: datasource.table_name ?\n      encodeURIComponent(datasource.table_name) :\n      datasource.table_name };\n\n    Object.entries(params).forEach((_ref18) => {let [key, value] = _ref18;\n      // rison can't encode the undefined value\n      if (value === undefined) {\n        params[key] = null;\n      }\n    });\n    const endpoint = `/datasource/external_metadata_by_name/?q=${rison.encode(\n    params)\n    }`;\n    this.setState({ metadataLoading: true });\n\n    SupersetClient.get({ endpoint }).\n    then((_ref19) => {let { json } = _ref19;\n      const results = this.updateColumns(json);\n      if (results.modified.length) {\n        this.props.addSuccessToast(\n        t('Modified columns: %s', results.modified.join(', ')));\n\n      }\n      if (results.removed.length) {\n        this.props.addSuccessToast(\n        t('Removed columns: %s', results.removed.join(', ')));\n\n      }\n      if (results.added.length) {\n        this.props.addSuccessToast(\n        t('New columns added: %s', results.added.join(', ')));\n\n      }\n      this.props.addSuccessToast(t('Metadata has been synced'));\n      this.setState({ metadataLoading: false });\n    }).\n    catch((response) =>\n    getClientErrorObject(response).then((_ref20) => {let { error, statusText } = _ref20;\n      this.props.addDangerToast(\n      error || statusText || t('An error has occurred'));\n\n      this.setState({ metadataLoading: false });\n    }));\n\n  }\n\n  findDuplicates(arr, accessor) {\n    const seen = {};\n    const dups = [];\n    arr.forEach((obj) => {\n      const item = accessor(obj);\n      if (item in seen) {\n        dups.push(item);\n      } else {\n        seen[item] = null;\n      }\n    });\n    return dups;\n  }\n\n  validate(callback) {\n    let errors = [];\n    let dups;\n    const { datasource } = this.state;\n\n    // Looking for duplicate column_name\n    dups = this.findDuplicates(datasource.columns, (obj) => obj.column_name);\n    errors = errors.concat(\n    dups.map((name) => t('Column name [%s] is duplicated', name)));\n\n\n    // Looking for duplicate metric_name\n    dups = this.findDuplicates(datasource.metrics, (obj) => obj.metric_name);\n    errors = errors.concat(\n    dups.map((name) => t('Metric name [%s] is duplicated', name)));\n\n\n    // Making sure calculatedColumns have an expression defined\n    const noFilterCalcCols = this.state.calculatedColumns.filter(\n    (col) => !col.expression && !col.json);\n\n    errors = errors.concat(\n    noFilterCalcCols.map((col) =>\n    t('Calculated column [%s] requires an expression', col.column_name)));\n\n\n\n    this.setState({ errors }, callback);\n  }\n\n  handleTabSelect(activeTabKey) {\n    this.setState({ activeTabKey });\n  }\n\n  sortMetrics(metrics) {\n    return metrics.sort((_ref21, _ref22) => {let { id: a } = _ref21;let { id: b } = _ref22;return b - a;});\n  }\n\n  renderSettingsFieldset() {\n    const { datasource } = this.state;\n    return (\n      ___EmotionJSX(Fieldset, {\n        title: t('Basic'),\n        item: datasource,\n        onChange: this.onDatasourceChange },\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"description\",\n        label: t('Description'),\n        control:\n        ___EmotionJSX(TextAreaControl, {\n          language: \"markdown\",\n          offerEditInModal: false,\n          resize: \"vertical\" }) }),\n\n\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"default_endpoint\",\n        label: t('Default URL'),\n        description: t(\n        'Default URL to redirect to when accessing from the dataset list page'),\n\n        control: ___EmotionJSX(TextControl, { controlId: \"default_endpoint\" }) }),\n\n      ___EmotionJSX(Field, {\n        inline: true,\n        fieldKey: \"filter_select_enabled\",\n        label: t('Autocomplete filters'),\n        description: t('Whether to populate autocomplete filters options'),\n        control: ___EmotionJSX(CheckboxControl, null) }),\n\n      this.state.isSqla &&\n      ___EmotionJSX(Field, {\n        fieldKey: \"fetch_values_predicate\",\n        label: t('Autocomplete query predicate'),\n        description: t(\n        'When using \"Autocomplete filters\", this can be used to improve performance ' +\n        'of the query fetching the values. Use this option to apply a ' +\n        'predicate (WHERE clause) to the query selecting the distinct ' +\n        'values from the table. Typically the intent would be to limit the scan ' +\n        'by applying a relative time filter on a partitioned or indexed time-related field.'),\n\n        control:\n        ___EmotionJSX(TextAreaControl, {\n          language: \"sql\",\n          controlId: \"fetch_values_predicate\",\n          minLines: 5,\n          resize: \"vertical\" }) }),\n\n\n\n\n      this.state.isSqla &&\n      ___EmotionJSX(Field, {\n        fieldKey: \"extra\",\n        label: t('Extra'),\n        description: t(\n        'Extra data to specify table metadata. Currently supports ' +\n        'metadata of the format: `{ \"certification\": { \"certified_by\": ' +\n        '\"Data Platform Team\", \"details\": \"This table is the source of truth.\" ' +\n        '}, \"warning_markdown\": \"This is a warning.\" }`.'),\n\n        control:\n        ___EmotionJSX(TextAreaControl, {\n          controlId: \"extra\",\n          language: \"json\",\n          offerEditInModal: false,\n          resize: \"vertical\" }) }),\n\n\n\n\n      ___EmotionJSX(OwnersSelector, {\n        datasource: datasource,\n        onChange: (newOwners) => {\n          this.onDatasourceChange({ ...datasource, owners: newOwners });\n        } })));\n\n\n\n  }\n\n  renderAdvancedFieldset() {\n    const { datasource } = this.state;\n    return (\n      ___EmotionJSX(Fieldset, {\n        title: t('Advanced'),\n        item: datasource,\n        onChange: this.onDatasourceChange },\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"cache_timeout\",\n        label: t('Cache timeout'),\n        description: t(\n        'The duration of time in seconds before the cache is invalidated. Set to -1 to bypass the cache.'),\n\n        control: ___EmotionJSX(TextControl, { controlId: \"cache_timeout\" }) }),\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"offset\",\n        label: t('Hours offset'),\n        control: ___EmotionJSX(TextControl, { controlId: \"offset\" }),\n        description: t(\n        'The number of hours, negative or positive, to shift the time column. This can be used to move UTC time to local time.') }),\n\n\n      this.state.isSqla &&\n      ___EmotionJSX(Field, {\n        fieldKey: \"template_params\",\n        label: t('Template parameters'),\n        description: t(\n        'A set of parameters that become available in the query using Jinja templating syntax'),\n\n        control: ___EmotionJSX(TextControl, { controlId: \"template_params\" }) })));\n\n\n\n\n  }\n\n  renderSpatialTab() {\n    const { datasource } = this.state;\n    const { spatials, all_cols: allCols } = datasource;\n    return (\n      ___EmotionJSX(Tabs.TabPane, {\n        tab: ___EmotionJSX(CollectionTabTitle, { collection: spatials, title: t('Spatial') }),\n        key: 4 },\n\n      ___EmotionJSX(CollectionTable, {\n        tableColumns: ['name', 'config'],\n        onChange: this.onDatasourcePropChange.bind(this, 'spatials'),\n        itemGenerator: () => ({\n          name: t('<new spatial>'),\n          type: t('<no type>'),\n          config: null }),\n\n        collection: spatials,\n        allowDeletes: true,\n        itemRenderers: {\n          name: (d, onChange) =>\n          ___EmotionJSX(EditableTitle, { canEdit: true, title: d, onSaveTitle: onChange }),\n\n          config: (v, onChange) =>\n          ___EmotionJSX(SpatialControl, { value: v, onChange: onChange, choices: allCols }) } })));\n\n\n\n\n\n  }\n\n  renderSourceFieldset(theme) {var _datasource$database, _datasource$database2, _datasource$database3;\n    const { datasource } = this.state;\n    return (\n      ___EmotionJSX(\"div\", null,\n      this.allowEditSource &&\n      ___EmotionJSX(EditLockContainer, null,\n      ___EmotionJSX(\"span\", { role: \"button\", tabIndex: 0, onClick: this.onChangeEditMode },\n      this.state.isEditMode ?\n      ___EmotionJSX(Icons.LockUnlocked, { iconColor: theme.colors.grayscale.base }) :\n\n      ___EmotionJSX(Icons.LockLocked, { iconColor: theme.colors.grayscale.base })),\n\n\n      !this.state.isEditMode &&\n      ___EmotionJSX(\"div\", null, t('Click the lock to make changes.')),\n\n      this.state.isEditMode &&\n      ___EmotionJSX(\"div\", null, t('Click the lock to prevent further changes.'))),\n\n\n\n      ___EmotionJSX(\"div\", { className: \"m-l-10 m-t-20 m-b-10\" },\n      DATASOURCE_TYPES_ARR.map((type) =>\n      ___EmotionJSX(Radio, {\n        key: type.key,\n        value: type.key,\n        inline: true,\n        onChange: this.onDatasourceTypeChange.bind(this, type.key),\n        checked: this.state.datasourceType === type.key,\n        disabled: !this.state.isEditMode },\n\n      type.label))),\n\n\n\n      ___EmotionJSX(\"hr\", null),\n      ___EmotionJSX(Fieldset, { item: datasource, onChange: this.onDatasourceChange, compact: true },\n      this.state.datasourceType === DATASOURCE_TYPES.virtual.key &&\n      ___EmotionJSX(\"div\", null,\n      this.state.isSqla &&\n      ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(Col, { xs: 24, md: 12 },\n      ___EmotionJSX(Field, {\n        fieldKey: \"databaseSelector\",\n        label: t('virtual'),\n        control:\n        ___EmotionJSX(\"div\", { css: _ref23 },\n        ___EmotionJSX(DatabaseSelector, {\n          db: datasource == null ? void 0 : datasource.database,\n          schema: datasource.schema,\n          onSchemaChange: (schema) =>\n          this.state.isEditMode &&\n          this.onDatasourcePropChange('schema', schema),\n\n          onDbChange: (database) =>\n          this.state.isEditMode &&\n          this.onDatasourcePropChange('database', database),\n\n          formMode: false,\n          handleError: this.props.addDangerToast,\n          readOnly: !this.state.isEditMode })) }),\n\n\n\n\n      ___EmotionJSX(\"div\", { css: /*#__PURE__*/_css({ width: 'calc(100% - 34px)', marginTop: -16 }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:DatasourceEditor;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvRGF0YXNvdXJjZS9EYXRhc291cmNlRWRpdG9yLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0aUN5QiIsImZpbGUiOiIvVXNlcnMvYm9nZGFua3lyeWxpdWsvY29kZS9vcGVuc291cmNlL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9jb21wb25lbnRzL0RhdGFzb3VyY2UvRGF0YXNvdXJjZUVkaXRvci5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUmFkaW8nO1xuaW1wb3J0IENhcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgQWxlcnQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQWxlcnQnO1xuaW1wb3J0IEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0JhZGdlJztcbmltcG9ydCBzaG9ydGlkIGZyb20gJ3Nob3J0aWQnO1xuaW1wb3J0IHtcbiAgRmVhdHVyZUZsYWcsXG4gIHN0eWxlZCxcbiAgU3VwZXJzZXRDbGllbnQsXG4gIHQsXG4gIHdpdGhUaGVtZSxcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgU2VsZWN0LCBBc3luY1NlbGVjdCwgUm93LCBDb2wgfSBmcm9tICdzcmMvY29tcG9uZW50cyc7XG5pbXBvcnQgeyBGb3JtTGFiZWwgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Gb3JtJztcbmltcG9ydCBCdXR0b24gZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCBUYWJzIGZyb20gJ3NyYy9jb21wb25lbnRzL1RhYnMnO1xuaW1wb3J0IENlcnRpZmllZEJhZGdlIGZyb20gJ3NyYy9jb21wb25lbnRzL0NlcnRpZmllZEJhZGdlJztcbmltcG9ydCBXYXJuaW5nSWNvbldpdGhUb29sdGlwIGZyb20gJ3NyYy9jb21wb25lbnRzL1dhcm5pbmdJY29uV2l0aFRvb2x0aXAnO1xuaW1wb3J0IERhdGFiYXNlU2VsZWN0b3IgZnJvbSAnc3JjL2NvbXBvbmVudHMvRGF0YWJhc2VTZWxlY3Rvcic7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnc3JjL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgVGFibGVTZWxlY3RvciBmcm9tICdzcmMvY29tcG9uZW50cy9UYWJsZVNlbGVjdG9yJztcbmltcG9ydCBFZGl0YWJsZVRpdGxlIGZyb20gJ3NyYy9jb21wb25lbnRzL0VkaXRhYmxlVGl0bGUnO1xuaW1wb3J0IHsgZ2V0Q2xpZW50RXJyb3JPYmplY3QgfSBmcm9tICdzcmMvdXRpbHMvZ2V0Q2xpZW50RXJyb3JPYmplY3QnO1xuaW1wb3J0IENoZWNrYm94Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NoZWNrYm94Q29udHJvbCc7XG5pbXBvcnQgVGV4dENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9UZXh0Q29udHJvbCc7XG5pbXBvcnQgVGV4dEFyZWFDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dEFyZWFDb250cm9sJztcbmltcG9ydCBTcGF0aWFsQ29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1NwYXRpYWxDb250cm9sJztcbmltcG9ydCB3aXRoVG9hc3RzIGZyb20gJ3NyYy9jb21wb25lbnRzL01lc3NhZ2VUb2FzdHMvd2l0aFRvYXN0cyc7XG5pbXBvcnQgeyBpc0ZlYXR1cmVFbmFibGVkIH0gZnJvbSAnc3JjL2ZlYXR1cmVGbGFncyc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IENvbGxlY3Rpb25UYWJsZSBmcm9tICcuL0NvbGxlY3Rpb25UYWJsZSc7XG5pbXBvcnQgRmllbGRzZXQgZnJvbSAnLi9GaWVsZHNldCc7XG5pbXBvcnQgRmllbGQgZnJvbSAnLi9GaWVsZCc7XG5cbmNvbnN0IERhdGFzb3VyY2VDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICAuY2hhbmdlLXdhcm5pbmcge1xuICAgIG1hcmdpbjogMTZweCAxMHB4IDA7XG4gICAgY29sb3I6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuY29sb3JzLndhcm5pbmcuYmFzZX07XG4gIH1cblxuICAuY2hhbmdlLXdhcm5pbmcgLmJvbGQge1xuICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgfVxuXG4gIC5mb3JtLWdyb3VwLmhhcy1mZWVkYmFjayA+IC5oZWxwLWJsb2NrIHtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG4gIH1cblxuICAuZm9ybS1ncm91cC5mb3JtLWdyb3VwLW1kIHtcbiAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gIH1cbmA7XG5cbmNvbnN0IEZsZXhSb3dDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuXG4gIHN2ZyB7XG4gICAgbWFyZ2luLXJpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRUYWJsZVRhYnMgPSBzdHlsZWQoVGFicylgXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICAuYW50LXRhYnMtY29udGVudC1ob2xkZXIge1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICB9XG5gO1xuXG5jb25zdCBTdHlsZWRCYWRnZSA9IHN0eWxlZChCYWRnZSlgXG4gIC5hbnQtYmFkZ2UtY291bnQge1xuICAgIGxpbmUtaGVpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0ICogNH1weDtcbiAgICBoZWlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiA0fXB4O1xuICAgIG1hcmdpbi1sZWZ0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmdyaWRVbml0fXB4O1xuICB9XG5gO1xuXG5jb25zdCBFZGl0TG9ja0NvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGZvbnQtc2l6ZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LnNpemVzLnN9cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGEge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgfVxuYDtcblxuY29uc3QgQ29sdW1uQnV0dG9uV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICAkeyh7IHRoZW1lIH0pID0+IGBtYXJnaW4tYm90dG9tOiAke3RoZW1lLmdyaWRVbml0ICogMn1weGB9XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBzcGFuIHtcbiAgICBtYXJnaW4tcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgLnRhYmxlID4gdGJvZHkgPiB0ciA+IHRkIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB9XG5cbiAgLmFudC10YWcge1xuICAgIG1hcmdpbi10b3A6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXR9cHg7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbldyYXBwZXIgPSBzdHlsZWQuc3BhbmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgbWFyZ2luLXRvcDogJHt0aGVtZS5ncmlkVW5pdCAqIDN9cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiAzfXB4O1xuICBgfVxuYDtcblxuY29uc3QgY2hlY2tib3hHZW5lcmF0b3IgPSAoZCwgb25DaGFuZ2UpID0+IChcbiAgPENoZWNrYm94Q29udHJvbCB2YWx1ZT17ZH0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPlxuKTtcbmNvbnN0IERBVEFfVFlQRVMgPSBbXG4gIHsgdmFsdWU6ICdTVFJJTkcnLCBsYWJlbDogdCgnU1RSSU5HJykgfSxcbiAgeyB2YWx1ZTogJ05VTUVSSUMnLCBsYWJlbDogdCgnTlVNRVJJQycpIH0sXG4gIHsgdmFsdWU6ICdEQVRFVElNRScsIGxhYmVsOiB0KCdEQVRFVElNRScpIH0sXG4gIHsgdmFsdWU6ICdCT09MRUFOJywgbGFiZWw6IHQoJ0JPT0xFQU4nKSB9LFxuXTtcblxuY29uc3QgREFUQVNPVVJDRV9UWVBFU19BUlIgPSBbXG4gIHsga2V5OiAncGh5c2ljYWwnLCBsYWJlbDogdCgnUGh5c2ljYWwgKHRhYmxlIG9yIHZpZXcpJykgfSxcbiAgeyBrZXk6ICd2aXJ0dWFsJywgbGFiZWw6IHQoJ1ZpcnR1YWwgKFNRTCknKSB9LFxuXTtcbmNvbnN0IERBVEFTT1VSQ0VfVFlQRVMgPSB7fTtcbkRBVEFTT1VSQ0VfVFlQRVNfQVJSLmZvckVhY2gobyA9PiB7XG4gIERBVEFTT1VSQ0VfVFlQRVNbby5rZXldID0gbztcbn0pO1xuXG5mdW5jdGlvbiBDb2xsZWN0aW9uVGFiVGl0bGUoeyB0aXRsZSwgY29sbGVjdGlvbiB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY3NzPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicgfX1cbiAgICAgIGRhdGEtdGVzdD17YGNvbGxlY3Rpb24tdGFiLSR7dGl0bGV9YH1cbiAgICA+XG4gICAgICB7dGl0bGV9eycgJ31cbiAgICAgIDxTdHlsZWRCYWRnZSBjb3VudD17Y29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMH0gc2hvd1plcm8gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuQ29sbGVjdGlvblRhYlRpdGxlLnByb3BUeXBlcyA9IHtcbiAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbGxlY3Rpb246IFByb3BUeXBlcy5hcnJheSxcbn07XG5cbmZ1bmN0aW9uIENvbHVtbkNvbGxlY3Rpb25UYWJsZSh7XG4gIGNvbHVtbnMsXG4gIGRhdGFzb3VyY2UsXG4gIG9uQ29sdW1uc0NoYW5nZSxcbiAgb25EYXRhc291cmNlQ2hhbmdlLFxuICBlZGl0YWJsZUNvbHVtbk5hbWUsXG4gIHNob3dFeHByZXNzaW9uLFxuICBhbGxvd0FkZEl0ZW0sXG4gIGFsbG93RWRpdERhdGFUeXBlLFxuICBpdGVtR2VuZXJhdG9yLFxufSkge1xuICByZXR1cm4gKFxuICAgIDxDb2xsZWN0aW9uVGFibGVcbiAgICAgIGNvbGxlY3Rpb249e2NvbHVtbnN9XG4gICAgICB0YWJsZUNvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgc29ydENvbHVtbnM9e1xuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnY29sdW1uX25hbWUnLFxuICAgICAgICAgICAgICAnYWR2YW5jZWRfZGF0YV90eXBlJyxcbiAgICAgICAgICAgICAgJ3R5cGUnLFxuICAgICAgICAgICAgICAnaXNfZHR0bScsXG4gICAgICAgICAgICAgICdtYWluX2R0dG1fY29sJyxcbiAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnLFxuICAgICAgICAgICAgICAnZ3JvdXBieScsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdjb2x1bW5fbmFtZScsXG4gICAgICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICAgICAgJ2lzX2R0dG0nLFxuICAgICAgICAgICAgICAnbWFpbl9kdHRtX2NvbCcsXG4gICAgICAgICAgICAgICdmaWx0ZXJhYmxlJyxcbiAgICAgICAgICAgICAgJ2dyb3VwYnknLFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgICAgYWxsb3dEZWxldGVzXG4gICAgICBhbGxvd0FkZEl0ZW09e2FsbG93QWRkSXRlbX1cbiAgICAgIGl0ZW1HZW5lcmF0b3I9e2l0ZW1HZW5lcmF0b3J9XG4gICAgICBzdGlja3lIZWFkZXJcbiAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgPEZvcm1Db250YWluZXI+XG4gICAgICAgICAgPEZpZWxkc2V0IGNvbXBhY3Q+XG4gICAgICAgICAgICB7c2hvd0V4cHJlc3Npb24gJiYgKFxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImV4cHJlc3Npb25cIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdTUUwgZXhwcmVzc2lvbicpfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZT1cIm1hcmtkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZT1cInZlcnRpY2FsXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdMYWJlbCcpfVxuICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cInZlcmJvc2VfbmFtZVwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnTGFiZWwnKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge2FsbG93RWRpdERhdGFUeXBlICYmIChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e0RBVEFfVFlQRVN9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dOZXdPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkVOQUJMRV9BRFZBTkNFRF9EQVRBX1RZUEVTKSA/IChcbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdBZHZhbmNlZCBkYXRhIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJhZHZhbmNlZF9kYXRhX3R5cGVcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgnQWR2YW5jZWQgRGF0YSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDw+PC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgIGZpZWxkS2V5PVwicHl0aG9uX2RhdGVfZm9ybWF0XCJcbiAgICAgICAgICAgICAgbGFiZWw9e3QoJ0RhdGV0aW1lIGZvcm1hdCcpfVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgICAgICAgICAgLyogTm90ZSB0aGUgZnJhZ21lbnRlZCB0cmFuc2xhdGlvbnMgbWF5IG5vdCB3b3JrLiAqL1xuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICB7dCgnVGhlIHBhdHRlcm4gb2YgdGltZXN0YW1wIGZvcm1hdC4gRm9yIHN0cmluZ3MgdXNlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5weXRob24ub3JnLzIvbGlicmFyeS9kYXRldGltZS5odG1sI3N0cmZ0aW1lLXN0cnB0aW1lLWJlaGF2aW9yXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdQeXRob24gZGF0ZXRpbWUgc3RyaW5nIHBhdHRlcm4nKX1cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIHt0KCcgZXhwcmVzc2lvbiB3aGljaCBuZWVkcyB0byBhZGhlcmUgdG8gdGhlICcpfVxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdJU08gODYwMScpfVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAge3QoYCBzdGFuZGFyZCB0byBlbnN1cmUgdGhhdCB0aGUgbGV4aWNvZ3JhcGhpY2FsIG9yZGVyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgY29pbmNpZGVzIHdpdGggdGhlIGNocm9ub2xvZ2ljYWwgb3JkZXJpbmcuIElmIHRoZVxuICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCBmb3JtYXQgZG9lcyBub3QgYWRoZXJlIHRvIHRoZSBJU08gODYwMSBzdGFuZGFyZFxuICAgICAgICAgICAgICAgICAgICAgIHlvdSB3aWxsIG5lZWQgdG8gZGVmaW5lIGFuIGV4cHJlc3Npb24gYW5kIHR5cGUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtaW5nIHRoZSBzdHJpbmcgaW50byBhIGRhdGUgb3IgdGltZXN0YW1wLiBOb3RlXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5IHRpbWUgem9uZXMgYXJlIG5vdCBzdXBwb3J0ZWQuIElmIHRpbWUgaXMgc3RvcmVkXG4gICAgICAgICAgICAgICAgICAgICAgaW4gZXBvY2ggZm9ybWF0LCBwdXQgXFxgZXBvY2hfc1xcYCBvciBcXGBlcG9jaF9tc1xcYC4gSWYgbm8gcGF0dGVyblxuICAgICAgICAgICAgICAgICAgICAgIGlzIHNwZWNpZmllZCB3ZSBmYWxsIGJhY2sgdG8gdXNpbmcgdGhlIG9wdGlvbmFsIGRlZmF1bHRzIG9uIGEgcGVyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UvY29sdW1uIG5hbWUgbGV2ZWwgdmlhIHRoZSBleHRyYSBwYXJhbWV0ZXIuYCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJweXRob25fZGF0ZV9mb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIlWS8lbS8lZFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICBmaWVsZEtleT1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgIGxhYmVsPXt0KCdDZXJ0aWZpZWQgQnknKX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1BlcnNvbiBvciBncm91cCB0aGF0IGhhcyBjZXJ0aWZpZWQgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJjZXJ0aWZpZWRcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbkRldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9GaWVsZHNldD5cbiAgICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgICAgfVxuICAgICAgY29sdW1uTGFiZWxzPXtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTkFCTEVfQURWQU5DRURfREFUQV9UWVBFUylcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgY29sdW1uX25hbWU6IHQoJ0NvbHVtbicpLFxuICAgICAgICAgICAgICBhZHZhbmNlZF9kYXRhX3R5cGU6IHQoJ0FkdmFuY2VkIGRhdGEgdHlwZScpLFxuICAgICAgICAgICAgICB0eXBlOiB0KCdEYXRhIHR5cGUnKSxcbiAgICAgICAgICAgICAgZ3JvdXBieTogdCgnSXMgZGltZW5zaW9uJyksXG4gICAgICAgICAgICAgIGlzX2R0dG06IHQoJ0lzIHRlbXBvcmFsJyksXG4gICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHQoJ0RlZmF1bHQgZGF0ZXRpbWUnKSxcbiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogdCgnSXMgZmlsdGVyYWJsZScpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnQ29sdW1uJyksXG4gICAgICAgICAgICAgIHR5cGU6IHQoJ0RhdGEgdHlwZScpLFxuICAgICAgICAgICAgICBncm91cGJ5OiB0KCdJcyBkaW1lbnNpb24nKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogdCgnSXMgdGVtcG9yYWwnKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogdCgnRGVmYXVsdCBkYXRldGltZScpLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0KCdJcyBmaWx0ZXJhYmxlJyksXG4gICAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbkNoYW5nZT17b25Db2x1bW5zQ2hhbmdlfVxuICAgICAgaXRlbVJlbmRlcmVycz17XG4gICAgICAgIGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRU5BQkxFX0FEVkFOQ0VEX0RBVEFfVFlQRVMpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxFZGl0YWJsZVRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt2fVxuICAgICAgICAgICAgICAgICAgICAgIG9uU2F2ZVRpdGxlPXtvbkl0ZW1DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHt2fVxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgbWFpbl9kdHRtX2NvbDogKHZhbHVlLCBfb25JdGVtQ2hhbmdlLCBfbGFiZWwsIHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBkYXRhc291cmNlLm1haW5fZHR0bV9jb2wgPT09IHJlY29yZC5jb2x1bW5fbmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9ICFjb2x1bW5zLmZpbmQoXG4gICAgICAgICAgICAgICAgICBjb2x1bW4gPT4gY29sdW1uLmNvbHVtbl9uYW1lID09PSByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgKS5pc19kdHRtO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PXtgcmFkaW8tZGVmYXVsdC1kdHRtLSR7cmVjb3JkLmNvbHVtbl9uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiByZWNvcmQuY29sdW1uX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0eXBlOiBkID0+IChkID8gPExhYmVsPntkfTwvTGFiZWw+IDogbnVsbCksXG4gICAgICAgICAgICAgIGFkdmFuY2VkX2RhdGFfdHlwZTogZCA9PiAoXG4gICAgICAgICAgICAgICAgPExhYmVsIG9uQ2hhbmdlPXtvbkNvbHVtbnNDaGFuZ2V9PntkfTwvTGFiZWw+XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIGlzX2R0dG06IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgICAgZ3JvdXBieTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIGNvbHVtbl9uYW1lOiAodiwgb25JdGVtQ2hhbmdlLCBfLCByZWNvcmQpID0+XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uSXRlbUNoYW5nZX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvU3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U3R5bGVkTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICB7cmVjb3JkLmlzX2NlcnRpZmllZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENlcnRpZmllZEJhZGdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjZXJ0aWZpZWRCeT17cmVjb3JkLmNlcnRpZmllZF9ieX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM9e3JlY29yZC5jZXJ0aWZpY2F0aW9uX2RldGFpbHN9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge3Z9XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBtYWluX2R0dG1fY29sOiAodmFsdWUsIF9vbkl0ZW1DaGFuZ2UsIF9sYWJlbCwgcmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGRhdGFzb3VyY2UubWFpbl9kdHRtX2NvbCA9PT0gcmVjb3JkLmNvbHVtbl9uYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkID0gIWNvbHVtbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIGNvbHVtbiA9PiBjb2x1bW4uY29sdW1uX25hbWUgPT09IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICApLmlzX2R0dG07XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9e2ByYWRpby1kZWZhdWx0LWR0dG0tJHtyZWNvcmQuY29sdW1uX25hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5fZHR0bV9jb2w6IHJlY29yZC5jb2x1bW5fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHR5cGU6IGQgPT4gKGQgPyA8TGFiZWw+e2R9PC9MYWJlbD4gOiBudWxsKSxcbiAgICAgICAgICAgICAgaXNfZHR0bTogY2hlY2tib3hHZW5lcmF0b3IsXG4gICAgICAgICAgICAgIGZpbHRlcmFibGU6IGNoZWNrYm94R2VuZXJhdG9yLFxuICAgICAgICAgICAgICBncm91cGJ5OiBjaGVja2JveEdlbmVyYXRvcixcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAvPlxuICApO1xufVxuQ29sdW1uQ29sbGVjdGlvblRhYmxlLnByb3BUeXBlcyA9IHtcbiAgY29sdW1uczogUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25Db2x1bW5zQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBvbkRhdGFzb3VyY2VDaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGVkaXRhYmxlQ29sdW1uTmFtZTogUHJvcFR5cGVzLmJvb2wsXG4gIHNob3dFeHByZXNzaW9uOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dBZGRJdGVtOiBQcm9wVHlwZXMuYm9vbCxcbiAgYWxsb3dFZGl0RGF0YVR5cGU6IFByb3BUeXBlcy5ib29sLFxuICBpdGVtR2VuZXJhdG9yOiBQcm9wVHlwZXMuZnVuYyxcbn07XG5Db2x1bW5Db2xsZWN0aW9uVGFibGUuZGVmYXVsdFByb3BzID0ge1xuICBlZGl0YWJsZUNvbHVtbk5hbWU6IGZhbHNlLFxuICBzaG93RXhwcmVzc2lvbjogZmFsc2UsXG4gIGFsbG93QWRkSXRlbTogZmFsc2UsXG4gIGFsbG93RWRpdERhdGFUeXBlOiBmYWxzZSxcbiAgaXRlbUdlbmVyYXRvcjogKCkgPT4gKHtcbiAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICBncm91cGJ5OiB0cnVlLFxuICB9KSxcbn07XG5cbmZ1bmN0aW9uIFN0YWNrZWRGaWVsZCh7IGxhYmVsLCBmb3JtRWxlbWVudCB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxzdHJvbmc+e2xhYmVsfTwvc3Ryb25nPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2Pntmb3JtRWxlbWVudH08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuU3RhY2tlZEZpZWxkLnByb3BUeXBlcyA9IHtcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZvcm1FbGVtZW50OiBQcm9wVHlwZXMubm9kZSxcbn07XG5cbmZ1bmN0aW9uIEZvcm1Db250YWluZXIoeyBjaGlsZHJlbiB9KSB7XG4gIHJldHVybiA8Q2FyZCBwYWRkZWQ+e2NoaWxkcmVufTwvQ2FyZD47XG59XG5cbkZvcm1Db250YWluZXIucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG59O1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIGRhdGFzb3VyY2U6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICBhZGRTdWNjZXNzVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGFkZERhbmdlclRvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZXRJc0VkaXRpbmc6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBvbkNoYW5nZTogKCkgPT4ge30sXG4gIHNldElzRWRpdGluZzogKCkgPT4ge30sXG59O1xuXG5mdW5jdGlvbiBPd25lcnNTZWxlY3Rvcih7IGRhdGFzb3VyY2UsIG9uQ2hhbmdlIH0pIHtcbiAgY29uc3QgbG9hZE9wdGlvbnMgPSB1c2VDYWxsYmFjaygoc2VhcmNoID0gJycsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSByaXNvbi5lbmNvZGUoeyBmaWx0ZXI6IHNlYXJjaCwgcGFnZSwgcGFnZV9zaXplOiBwYWdlU2l6ZSB9KTtcbiAgICByZXR1cm4gU3VwZXJzZXRDbGllbnQuZ2V0KHtcbiAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9kYXRhc2V0L3JlbGF0ZWQvb3duZXJzP3E9JHtxdWVyeX1gLFxuICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gKHtcbiAgICAgIGRhdGE6IHJlc3BvbnNlLmpzb24ucmVzdWx0XG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLmV4dHJhLmFjdGl2ZSlcbiAgICAgICAgLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgbGFiZWw6IGl0ZW0udGV4dCxcbiAgICAgICAgfSkpLFxuICAgICAgdG90YWxDb3VudDogcmVzcG9uc2UuanNvbi5jb3VudCxcbiAgICB9KSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxBc3luY1NlbGVjdFxuICAgICAgYXJpYUxhYmVsPXt0KCdTZWxlY3Qgb3duZXJzJyl9XG4gICAgICBtb2RlPVwibXVsdGlwbGVcIlxuICAgICAgbmFtZT1cIm93bmVyc1wiXG4gICAgICB2YWx1ZT17ZGF0YXNvdXJjZS5vd25lcnN9XG4gICAgICBvcHRpb25zPXtsb2FkT3B0aW9uc31cbiAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgIGhlYWRlcj17PEZvcm1MYWJlbD57dCgnT3duZXJzJyl9PC9Gb3JtTGFiZWw+fVxuICAgICAgYWxsb3dDbGVhclxuICAgIC8+XG4gICk7XG59XG5cbmNsYXNzIERhdGFzb3VyY2VFZGl0b3IgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRhdGFzb3VyY2U6IHtcbiAgICAgICAgLi4ucHJvcHMuZGF0YXNvdXJjZSxcbiAgICAgICAgb3duZXJzOiBwcm9wcy5kYXRhc291cmNlLm93bmVycy5tYXAob3duZXIgPT4gKHtcbiAgICAgICAgICB2YWx1ZTogb3duZXIudmFsdWUgfHwgb3duZXIuaWQsXG4gICAgICAgICAgbGFiZWw6IG93bmVyLmxhYmVsIHx8IGAke293bmVyLmZpcnN0X25hbWV9ICR7b3duZXIubGFzdF9uYW1lfWAsXG4gICAgICAgIH0pKSxcbiAgICAgICAgbWV0cmljczogcHJvcHMuZGF0YXNvdXJjZS5tZXRyaWNzPy5tYXAobWV0cmljID0+IHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgICAgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpY2F0aW9uRGV0YWlscyxcbiAgICAgICAgICB9ID0gbWV0cmljO1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb246IHsgZGV0YWlscywgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSB9ID0ge30sXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24sXG4gICAgICAgICAgfSA9IEpTT04ucGFyc2UobWV0cmljLmV4dHJhIHx8ICd7fScpIHx8IHt9O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5tZXRyaWMsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmljYXRpb25EZXRhaWxzIHx8IGRldGFpbHMsXG4gICAgICAgICAgICB3YXJuaW5nX21hcmtkb3duOiB3YXJuaW5nTWFya2Rvd24gfHwgJycsXG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IHx8IGNlcnRpZmllZEJ5TWV0cmljLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIGVycm9yczogW10sXG4gICAgICBpc1NxbGE6XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UuZGF0YXNvdXJjZV90eXBlID09PSAndGFibGUnIHx8XG4gICAgICAgIHByb3BzLmRhdGFzb3VyY2UudHlwZSA9PT0gJ3RhYmxlJyxcbiAgICAgIGlzRWRpdE1vZGU6IGZhbHNlLFxuICAgICAgZGF0YWJhc2VDb2x1bW5zOiBwcm9wcy5kYXRhc291cmNlLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiAhY29sLmV4cHJlc3Npb24pLFxuICAgICAgY2FsY3VsYXRlZENvbHVtbnM6IHByb3BzLmRhdGFzb3VyY2UuY29sdW1ucy5maWx0ZXIoXG4gICAgICAgIGNvbCA9PiAhIWNvbC5leHByZXNzaW9uLFxuICAgICAgKSxcbiAgICAgIG1ldGFkYXRhTG9hZGluZzogZmFsc2UsXG4gICAgICBhY3RpdmVUYWJLZXk6IDAsXG4gICAgICBkYXRhc291cmNlVHlwZTogcHJvcHMuZGF0YXNvdXJjZS5zcWxcbiAgICAgICAgPyBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5XG4gICAgICAgIDogREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXksXG4gICAgfTtcblxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkNoYW5nZUVkaXRNb2RlID0gdGhpcy5vbkNoYW5nZUVkaXRNb2RlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlID0gdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UgPSB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEgPVxuICAgICAgdGhpcy50YWJsZUNoYW5nZUFuZFN5bmNNZXRhZGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3luY01ldGFkYXRhID0gdGhpcy5zeW5jTWV0YWRhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldENvbHVtbnMgPSB0aGlzLnNldENvbHVtbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlID0gdGhpcy52YWxpZGF0ZUFuZENoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVGFiU2VsZWN0ID0gdGhpcy5oYW5kbGVUYWJTZWxlY3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFsbG93RWRpdFNvdXJjZSA9ICFpc0ZlYXR1cmVFbmFibGVkKFxuICAgICAgRmVhdHVyZUZsYWcuRElTQUJMRV9EQVRBU0VUX1NPVVJDRV9FRElULFxuICAgICk7XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICAvLyBFbXB0eWluZyBTUUwgaWYgXCJQaHlzaWNhbFwiIHJhZGlvIGJ1dHRvbiBpcyBzZWxlY3RlZFxuICAgIC8vIEN1cnJlbnRseSB0aGUgbG9naWMgdG8ga25vdyB3aGV0aGVyIHRoZSBzb3VyY2UgaXNcbiAgICAvLyBwaHlzaWNhbCBvciB2aXJ0dWFsIGlzIGJhc2VkIG9uIHdoZXRoZXIgU1FMIGlzIGVtcHR5IG9yIG5vdC5cbiAgICBjb25zdCB7IGRhdGFzb3VyY2VUeXBlLCBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHNxbCA9XG4gICAgICBkYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgPyAnJyA6IGRhdGFzb3VyY2Uuc3FsO1xuICAgIGNvbnN0IG5ld0RhdGFzb3VyY2UgPSB7XG4gICAgICAuLi50aGlzLnN0YXRlLmRhdGFzb3VyY2UsXG4gICAgICBzcWwsXG4gICAgICBjb2x1bW5zOiBbLi4udGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnMsIC4uLnRoaXMuc3RhdGUuY2FsY3VsYXRlZENvbHVtbnNdLFxuICAgIH07XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShuZXdEYXRhc291cmNlLCB0aGlzLnN0YXRlLmVycm9ycyk7XG4gIH1cblxuICBvbkNoYW5nZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMuc2V0SXNFZGl0aW5nKCF0aGlzLnN0YXRlLmlzRWRpdE1vZGUpO1xuICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7IGlzRWRpdE1vZGU6ICFwcmV2U3RhdGUuaXNFZGl0TW9kZSB9KSk7XG4gIH1cblxuICBvbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgY2FsbGJhY2sgPSB0aGlzLnZhbGlkYXRlQW5kQ2hhbmdlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGFzb3VyY2UgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25EYXRhc291cmNlUHJvcENoYW5nZShhdHRyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIGlmIHZhbHVlIGlzIHVuZGVmaW5lZCBkbyBub3QgdXBkYXRlIHN0YXRlXG4gICAgY29uc3QgZGF0YXNvdXJjZSA9IHsgLi4udGhpcy5zdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH07XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICBkYXRhc291cmNlOiB7IC4uLnByZXZTdGF0ZS5kYXRhc291cmNlLCBbYXR0cl06IHZhbHVlIH0sXG4gICAgICB9KSxcbiAgICAgIGF0dHIgPT09ICd0YWJsZV9uYW1lJ1xuICAgICAgICA/IHRoaXMub25EYXRhc291cmNlQ2hhbmdlKGRhdGFzb3VyY2UsIHRoaXMudGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEpXG4gICAgICAgIDogdGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2UoZGF0YXNvdXJjZSwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSksXG4gICAgKTtcbiAgfVxuXG4gIG9uRGF0YXNvdXJjZVR5cGVDaGFuZ2UoZGF0YXNvdXJjZVR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGF0YXNvdXJjZVR5cGUgfSk7XG4gIH1cblxuICBzZXRDb2x1bW5zKG9iaikge1xuICAgIC8vIHVwZGF0ZSBjYWxjdWxhdGVkQ29sdW1ucyBvciBkYXRhYmFzZUNvbHVtbnNcbiAgICB0aGlzLnNldFN0YXRlKG9iaiwgdGhpcy52YWxpZGF0ZUFuZENoYW5nZSk7XG4gIH1cblxuICB2YWxpZGF0ZUFuZENoYW5nZSgpIHtcbiAgICB0aGlzLnZhbGlkYXRlKHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgdGFibGVDaGFuZ2VBbmRTeW5jTWV0YWRhdGEoKSB7XG4gICAgdGhpcy52YWxpZGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLnN5bmNNZXRhZGF0YSgpO1xuICAgICAgdGhpcy5vbkNoYW5nZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQ29sdW1ucyhjb2xzKSB7XG4gICAgY29uc3QgeyBkYXRhYmFzZUNvbHVtbnMgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgZGF0YWJhc2VDb2x1bW5OYW1lcyA9IGNvbHMubWFwKGNvbCA9PiBjb2wubmFtZSk7XG4gICAgY29uc3QgY3VycmVudENvbHMgPSBkYXRhYmFzZUNvbHVtbnMucmVkdWNlKFxuICAgICAgKGFnZywgY29sKSA9PiAoe1xuICAgICAgICAuLi5hZ2csXG4gICAgICAgIFtjb2wuY29sdW1uX25hbWVdOiBjb2wsXG4gICAgICB9KSxcbiAgICAgIHt9LFxuICAgICk7XG4gICAgY29uc3QgZmluYWxDb2x1bW5zID0gW107XG4gICAgY29uc3QgcmVzdWx0cyA9IHtcbiAgICAgIGFkZGVkOiBbXSxcbiAgICAgIG1vZGlmaWVkOiBbXSxcbiAgICAgIHJlbW92ZWQ6IGRhdGFiYXNlQ29sdW1uc1xuICAgICAgICAubWFwKGNvbCA9PiBjb2wuY29sdW1uX25hbWUpXG4gICAgICAgIC5maWx0ZXIoY29sID0+ICFkYXRhYmFzZUNvbHVtbk5hbWVzLmluY2x1ZGVzKGNvbCkpLFxuICAgIH07XG4gICAgY29scy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50Q29sID0gY3VycmVudENvbHNbY29sLm5hbWVdO1xuICAgICAgaWYgKCFjdXJyZW50Q29sKSB7XG4gICAgICAgIC8vIG5ldyBjb2x1bW5cbiAgICAgICAgZmluYWxDb2x1bW5zLnB1c2goe1xuICAgICAgICAgIGlkOiBzaG9ydGlkLmdlbmVyYXRlKCksXG4gICAgICAgICAgY29sdW1uX25hbWU6IGNvbC5uYW1lLFxuICAgICAgICAgIHR5cGU6IGNvbC50eXBlLFxuICAgICAgICAgIGdyb3VwYnk6IHRydWUsXG4gICAgICAgICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBpc19kdHRtOiBjb2wuaXNfZHR0bSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc3VsdHMuYWRkZWQucHVzaChjb2wubmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBjdXJyZW50Q29sLnR5cGUgIT09IGNvbC50eXBlIHx8XG4gICAgICAgICghY3VycmVudENvbC5pc19kdHRtICYmIGNvbC5pc19kdHRtKVxuICAgICAgKSB7XG4gICAgICAgIC8vIG1vZGlmaWVkIGNvbHVtblxuICAgICAgICBmaW5hbENvbHVtbnMucHVzaCh7XG4gICAgICAgICAgLi4uY3VycmVudENvbCxcbiAgICAgICAgICB0eXBlOiBjb2wudHlwZSxcbiAgICAgICAgICBpc19kdHRtOiBjdXJyZW50Q29sLmlzX2R0dG0gfHwgY29sLmlzX2R0dG0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXN1bHRzLm1vZGlmaWVkLnB1c2goY29sLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdW5jaGFuZ2VkXG4gICAgICAgIGZpbmFsQ29sdW1ucy5wdXNoKGN1cnJlbnRDb2wpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChcbiAgICAgIHJlc3VsdHMuYWRkZWQubGVuZ3RoIHx8XG4gICAgICByZXN1bHRzLm1vZGlmaWVkLmxlbmd0aCB8fFxuICAgICAgcmVzdWx0cy5yZW1vdmVkLmxlbmd0aFxuICAgICkge1xuICAgICAgdGhpcy5zZXRDb2x1bW5zKHsgZGF0YWJhc2VDb2x1bW5zOiBmaW5hbENvbHVtbnMgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgc3luY01ldGFkYXRhKCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBkYXRhc291cmNlX3R5cGU6IGRhdGFzb3VyY2UudHlwZSB8fCBkYXRhc291cmNlLmRhdGFzb3VyY2VfdHlwZSxcbiAgICAgIGRhdGFiYXNlX25hbWU6XG4gICAgICAgIGRhdGFzb3VyY2UuZGF0YWJhc2UuZGF0YWJhc2VfbmFtZSB8fCBkYXRhc291cmNlLmRhdGFiYXNlLm5hbWUsXG4gICAgICBzY2hlbWFfbmFtZTogZGF0YXNvdXJjZS5zY2hlbWEsXG4gICAgICB0YWJsZV9uYW1lOiBkYXRhc291cmNlLnRhYmxlX25hbWVcbiAgICAgICAgPyBlbmNvZGVVUklDb21wb25lbnQoZGF0YXNvdXJjZS50YWJsZV9uYW1lKVxuICAgICAgICA6IGRhdGFzb3VyY2UudGFibGVfbmFtZSxcbiAgICB9O1xuICAgIE9iamVjdC5lbnRyaWVzKHBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAvLyByaXNvbiBjYW4ndCBlbmNvZGUgdGhlIHVuZGVmaW5lZCB2YWx1ZVxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGFyYW1zW2tleV0gPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGVuZHBvaW50ID0gYC9kYXRhc291cmNlL2V4dGVybmFsX21ldGFkYXRhX2J5X25hbWUvP3E9JHtyaXNvbi5lbmNvZGUoXG4gICAgICBwYXJhbXMsXG4gICAgKX1gO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRhZGF0YUxvYWRpbmc6IHRydWUgfSk7XG5cbiAgICBTdXBlcnNldENsaWVudC5nZXQoeyBlbmRwb2ludCB9KVxuICAgICAgLnRoZW4oKHsganNvbiB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnVwZGF0ZUNvbHVtbnMoanNvbik7XG4gICAgICAgIGlmIChyZXN1bHRzLm1vZGlmaWVkLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMucHJvcHMuYWRkU3VjY2Vzc1RvYXN0KFxuICAgICAgICAgICAgdCgnTW9kaWZpZWQgY29sdW1uczogJXMnLCByZXN1bHRzLm1vZGlmaWVkLmpvaW4oJywgJykpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdHMucmVtb3ZlZC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdChcbiAgICAgICAgICAgIHQoJ1JlbW92ZWQgY29sdW1uczogJXMnLCByZXN1bHRzLnJlbW92ZWQuam9pbignLCAnKSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0cy5hZGRlZC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdChcbiAgICAgICAgICAgIHQoJ05ldyBjb2x1bW5zIGFkZGVkOiAlcycsIHJlc3VsdHMuYWRkZWQuam9pbignLCAnKSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdNZXRhZGF0YSBoYXMgYmVlbiBzeW5jZWQnKSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRhZGF0YUxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChyZXNwb25zZSA9PlxuICAgICAgICBnZXRDbGllbnRFcnJvck9iamVjdChyZXNwb25zZSkudGhlbigoeyBlcnJvciwgc3RhdHVzVGV4dCB9KSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5hZGREYW5nZXJUb2FzdChcbiAgICAgICAgICAgIGVycm9yIHx8IHN0YXR1c1RleHQgfHwgdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJyksXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbWV0YWRhdGFMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgfSksXG4gICAgICApO1xuICB9XG5cbiAgZmluZER1cGxpY2F0ZXMoYXJyLCBhY2Nlc3Nvcikge1xuICAgIGNvbnN0IHNlZW4gPSB7fTtcbiAgICBjb25zdCBkdXBzID0gW107XG4gICAgYXJyLmZvckVhY2gob2JqID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhY2Nlc3NvcihvYmopO1xuICAgICAgaWYgKGl0ZW0gaW4gc2Vlbikge1xuICAgICAgICBkdXBzLnB1c2goaXRlbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuW2l0ZW1dID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZHVwcztcbiAgfVxuXG4gIHZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgbGV0IGVycm9ycyA9IFtdO1xuICAgIGxldCBkdXBzO1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIC8vIExvb2tpbmcgZm9yIGR1cGxpY2F0ZSBjb2x1bW5fbmFtZVxuICAgIGR1cHMgPSB0aGlzLmZpbmREdXBsaWNhdGVzKGRhdGFzb3VyY2UuY29sdW1ucywgb2JqID0+IG9iai5jb2x1bW5fbmFtZSk7XG4gICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChcbiAgICAgIGR1cHMubWFwKG5hbWUgPT4gdCgnQ29sdW1uIG5hbWUgWyVzXSBpcyBkdXBsaWNhdGVkJywgbmFtZSkpLFxuICAgICk7XG5cbiAgICAvLyBMb29raW5nIGZvciBkdXBsaWNhdGUgbWV0cmljX25hbWVcbiAgICBkdXBzID0gdGhpcy5maW5kRHVwbGljYXRlcyhkYXRhc291cmNlLm1ldHJpY3MsIG9iaiA9PiBvYmoubWV0cmljX25hbWUpO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBkdXBzLm1hcChuYW1lID0+IHQoJ01ldHJpYyBuYW1lIFslc10gaXMgZHVwbGljYXRlZCcsIG5hbWUpKSxcbiAgICApO1xuXG4gICAgLy8gTWFraW5nIHN1cmUgY2FsY3VsYXRlZENvbHVtbnMgaGF2ZSBhbiBleHByZXNzaW9uIGRlZmluZWRcbiAgICBjb25zdCBub0ZpbHRlckNhbGNDb2xzID0gdGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1ucy5maWx0ZXIoXG4gICAgICBjb2wgPT4gIWNvbC5leHByZXNzaW9uICYmICFjb2wuanNvbixcbiAgICApO1xuICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoXG4gICAgICBub0ZpbHRlckNhbGNDb2xzLm1hcChjb2wgPT5cbiAgICAgICAgdCgnQ2FsY3VsYXRlZCBjb2x1bW4gWyVzXSByZXF1aXJlcyBhbiBleHByZXNzaW9uJywgY29sLmNvbHVtbl9uYW1lKSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcnMgfSwgY2FsbGJhY2spO1xuICB9XG5cbiAgaGFuZGxlVGFiU2VsZWN0KGFjdGl2ZVRhYktleSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBhY3RpdmVUYWJLZXkgfSk7XG4gIH1cblxuICBzb3J0TWV0cmljcyhtZXRyaWNzKSB7XG4gICAgcmV0dXJuIG1ldHJpY3Muc29ydCgoeyBpZDogYSB9LCB7IGlkOiBiIH0pID0+IGIgLSBhKTtcbiAgfVxuXG4gIHJlbmRlclNldHRpbmdzRmllbGRzZXQoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8RmllbGRzZXRcbiAgICAgICAgdGl0bGU9e3QoJ0Jhc2ljJyl9XG4gICAgICAgIGl0ZW09e2RhdGFzb3VyY2V9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgZmllbGRLZXk9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0Rlc2NyaXB0aW9uJyl9XG4gICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiZGVmYXVsdF9lbmRwb2ludFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0RlZmF1bHQgVVJMJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAnRGVmYXVsdCBVUkwgdG8gcmVkaXJlY3QgdG8gd2hlbiBhY2Nlc3NpbmcgZnJvbSB0aGUgZGF0YXNldCBsaXN0IHBhZ2UnLFxuICAgICAgICAgICl9XG4gICAgICAgICAgY29udHJvbD17PFRleHRDb250cm9sIGNvbnRyb2xJZD1cImRlZmF1bHRfZW5kcG9pbnRcIiAvPn1cbiAgICAgICAgLz5cbiAgICAgICAgPEZpZWxkXG4gICAgICAgICAgaW5saW5lXG4gICAgICAgICAgZmllbGRLZXk9XCJmaWx0ZXJfc2VsZWN0X2VuYWJsZWRcIlxuICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgZmlsdGVycycpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdXaGV0aGVyIHRvIHBvcHVsYXRlIGF1dG9jb21wbGV0ZSBmaWx0ZXJzIG9wdGlvbnMnKX1cbiAgICAgICAgICBjb250cm9sPXs8Q2hlY2tib3hDb250cm9sIC8+fVxuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5pc1NxbGEgJiYgKFxuICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgZmllbGRLZXk9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdBdXRvY29tcGxldGUgcXVlcnkgcHJlZGljYXRlJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ1doZW4gdXNpbmcgXCJBdXRvY29tcGxldGUgZmlsdGVyc1wiLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UgJyArXG4gICAgICAgICAgICAgICAgJ29mIHRoZSBxdWVyeSBmZXRjaGluZyB0aGUgdmFsdWVzLiBVc2UgdGhpcyBvcHRpb24gdG8gYXBwbHkgYSAnICtcbiAgICAgICAgICAgICAgICAncHJlZGljYXRlIChXSEVSRSBjbGF1c2UpIHRvIHRoZSBxdWVyeSBzZWxlY3RpbmcgdGhlIGRpc3RpbmN0ICcgK1xuICAgICAgICAgICAgICAgICd2YWx1ZXMgZnJvbSB0aGUgdGFibGUuIFR5cGljYWxseSB0aGUgaW50ZW50IHdvdWxkIGJlIHRvIGxpbWl0IHRoZSBzY2FuICcgK1xuICAgICAgICAgICAgICAgICdieSBhcHBseWluZyBhIHJlbGF0aXZlIHRpbWUgZmlsdGVyIG9uIGEgcGFydGl0aW9uZWQgb3IgaW5kZXhlZCB0aW1lLXJlbGF0ZWQgZmllbGQuJyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgPFRleHRBcmVhQ29udHJvbFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJmZXRjaF92YWx1ZXNfcHJlZGljYXRlXCJcbiAgICAgICAgICAgICAgICBtaW5MaW5lcz17NX1cbiAgICAgICAgICAgICAgICByZXNpemU9XCJ2ZXJ0aWNhbFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgICAge3RoaXMuc3RhdGUuaXNTcWxhICYmIChcbiAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgIGZpZWxkS2V5PVwiZXh0cmFcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ0V4dHJhJyl9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgJ0V4dHJhIGRhdGEgdG8gc3BlY2lmeSB0YWJsZSBtZXRhZGF0YS4gQ3VycmVudGx5IHN1cHBvcnRzICcgK1xuICAgICAgICAgICAgICAgICdtZXRhZGF0YSBvZiB0aGUgZm9ybWF0OiBgeyBcImNlcnRpZmljYXRpb25cIjogeyBcImNlcnRpZmllZF9ieVwiOiAnICtcbiAgICAgICAgICAgICAgICAnXCJEYXRhIFBsYXRmb3JtIFRlYW1cIiwgXCJkZXRhaWxzXCI6IFwiVGhpcyB0YWJsZSBpcyB0aGUgc291cmNlIG9mIHRydXRoLlwiICcgK1xuICAgICAgICAgICAgICAgICd9LCBcIndhcm5pbmdfbWFya2Rvd25cIjogXCJUaGlzIGlzIGEgd2FybmluZy5cIiB9YC4nLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICA8VGV4dEFyZWFDb250cm9sXG4gICAgICAgICAgICAgICAgY29udHJvbElkPVwiZXh0cmFcIlxuICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwianNvblwiXG4gICAgICAgICAgICAgICAgb2ZmZXJFZGl0SW5Nb2RhbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxPd25lcnNTZWxlY3RvclxuICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgb25DaGFuZ2U9e25ld093bmVycyA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZSh7IC4uLmRhdGFzb3VyY2UsIG93bmVyczogbmV3T3duZXJzIH0pO1xuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L0ZpZWxkc2V0PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJBZHZhbmNlZEZpZWxkc2V0KCkge1xuICAgIGNvbnN0IHsgZGF0YXNvdXJjZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPEZpZWxkc2V0XG4gICAgICAgIHRpdGxlPXt0KCdBZHZhbmNlZCcpfVxuICAgICAgICBpdGVtPXtkYXRhc291cmNlfVxuICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VDaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIDxGaWVsZFxuICAgICAgICAgIGZpZWxkS2V5PVwiY2FjaGVfdGltZW91dFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0NhY2hlIHRpbWVvdXQnKX1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgZHVyYXRpb24gb2YgdGltZSBpbiBzZWNvbmRzIGJlZm9yZSB0aGUgY2FjaGUgaXMgaW52YWxpZGF0ZWQuIFNldCB0byAtMSB0byBieXBhc3MgdGhlIGNhY2hlLicsXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb250cm9sPXs8VGV4dENvbnRyb2wgY29udHJvbElkPVwiY2FjaGVfdGltZW91dFwiIC8+fVxuICAgICAgICAvPlxuICAgICAgICA8RmllbGRcbiAgICAgICAgICBmaWVsZEtleT1cIm9mZnNldFwiXG4gICAgICAgICAgbGFiZWw9e3QoJ0hvdXJzIG9mZnNldCcpfVxuICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJvZmZzZXRcIiAvPn1cbiAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICdUaGUgbnVtYmVyIG9mIGhvdXJzLCBuZWdhdGl2ZSBvciBwb3NpdGl2ZSwgdG8gc2hpZnQgdGhlIHRpbWUgY29sdW1uLiBUaGlzIGNhbiBiZSB1c2VkIHRvIG1vdmUgVVRDIHRpbWUgdG8gbG9jYWwgdGltZS4nLFxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICBmaWVsZEtleT1cInRlbXBsYXRlX3BhcmFtc1wiXG4gICAgICAgICAgICBsYWJlbD17dCgnVGVtcGxhdGUgcGFyYW1ldGVycycpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICdBIHNldCBvZiBwYXJhbWV0ZXJzIHRoYXQgYmVjb21lIGF2YWlsYWJsZSBpbiB0aGUgcXVlcnkgdXNpbmcgSmluamEgdGVtcGxhdGluZyBzeW50YXgnLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGNvbnRyb2w9ezxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJ0ZW1wbGF0ZV9wYXJhbXNcIiAvPn1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9GaWVsZHNldD5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyU3BhdGlhbFRhYigpIHtcbiAgICBjb25zdCB7IGRhdGFzb3VyY2UgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBzcGF0aWFscywgYWxsX2NvbHM6IGFsbENvbHMgfSA9IGRhdGFzb3VyY2U7XG4gICAgcmV0dXJuIChcbiAgICAgIDxUYWJzLlRhYlBhbmVcbiAgICAgICAgdGFiPXs8Q29sbGVjdGlvblRhYlRpdGxlIGNvbGxlY3Rpb249e3NwYXRpYWxzfSB0aXRsZT17dCgnU3BhdGlhbCcpfSAvPn1cbiAgICAgICAga2V5PXs0fVxuICAgICAgPlxuICAgICAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgdGFibGVDb2x1bW5zPXtbJ25hbWUnLCAnY29uZmlnJ119XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMsICdzcGF0aWFscycpfVxuICAgICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgICBuYW1lOiB0KCc8bmV3IHNwYXRpYWw+JyksXG4gICAgICAgICAgICB0eXBlOiB0KCc8bm8gdHlwZT4nKSxcbiAgICAgICAgICAgIGNvbmZpZzogbnVsbCxcbiAgICAgICAgICB9KX1cbiAgICAgICAgICBjb2xsZWN0aW9uPXtzcGF0aWFsc31cbiAgICAgICAgICBhbGxvd0RlbGV0ZXNcbiAgICAgICAgICBpdGVtUmVuZGVyZXJzPXt7XG4gICAgICAgICAgICBuYW1lOiAoZCwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGUgY2FuRWRpdCB0aXRsZT17ZH0gb25TYXZlVGl0bGU9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbmZpZzogKHYsIG9uQ2hhbmdlKSA9PiAoXG4gICAgICAgICAgICAgIDxTcGF0aWFsQ29udHJvbCB2YWx1ZT17dn0gb25DaGFuZ2U9e29uQ2hhbmdlfSBjaG9pY2VzPXthbGxDb2xzfSAvPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclNvdXJjZUZpZWxkc2V0KHRoZW1lKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7dGhpcy5hbGxvd0VkaXRTb3VyY2UgJiYgKFxuICAgICAgICAgIDxFZGl0TG9ja0NvbnRhaW5lcj5cbiAgICAgICAgICAgIDxzcGFuIHJvbGU9XCJidXR0b25cIiB0YWJJbmRleD17MH0gb25DbGljaz17dGhpcy5vbkNoYW5nZUVkaXRNb2RlfT5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSA/IChcbiAgICAgICAgICAgICAgICA8SWNvbnMuTG9ja1VubG9ja2VkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxJY29ucy5Mb2NrTG9ja2VkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgeyF0aGlzLnN0YXRlLmlzRWRpdE1vZGUgJiYgKFxuICAgICAgICAgICAgICA8ZGl2Pnt0KCdDbGljayB0aGUgbG9jayB0byBtYWtlIGNoYW5nZXMuJyl9PC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJiAoXG4gICAgICAgICAgICAgIDxkaXY+e3QoJ0NsaWNrIHRoZSBsb2NrIHRvIHByZXZlbnQgZnVydGhlciBjaGFuZ2VzLicpfTwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0VkaXRMb2NrQ29udGFpbmVyPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm0tbC0xMCBtLXQtMjAgbS1iLTEwXCI+XG4gICAgICAgICAge0RBVEFTT1VSQ0VfVFlQRVNfQVJSLm1hcCh0eXBlID0+IChcbiAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICBrZXk9e3R5cGUua2V5fVxuICAgICAgICAgICAgICB2YWx1ZT17dHlwZS5rZXl9XG4gICAgICAgICAgICAgIGlubGluZVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkRhdGFzb3VyY2VUeXBlQ2hhbmdlLmJpbmQodGhpcywgdHlwZS5rZXkpfVxuICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSB0eXBlLmtleX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0eXBlLmxhYmVsfVxuICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8RmllbGRzZXQgaXRlbT17ZGF0YXNvdXJjZX0gb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfSBjb21wYWN0PlxuICAgICAgICAgIHt0aGlzLnN0YXRlLmRhdGFzb3VyY2VUeXBlID09PSBEQVRBU09VUkNFX1RZUEVTLnZpcnR1YWwua2V5ICYmIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxDb2wgeHM9ezI0fSBtZD17MTJ9PlxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRhdGFiYXNlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0KCd2aXJ0dWFsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNzcz17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRhYmFzZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGI9e2RhdGFzb3VyY2U/LmRhdGFiYXNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtYT17ZGF0YXNvdXJjZS5zY2hlbWF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TY2hlbWFDaGFuZ2U9e3NjaGVtYSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0VkaXRNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3NjaGVtYScsIHNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EYkNoYW5nZT17ZGF0YWJhc2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCdkYXRhYmFzZScsIGRhdGFiYXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtTW9kZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRXJyb3I9e3RoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY3NzPXt7IHdpZHRoOiAnY2FsYygxMDAlIC0gMzRweCknLCBtYXJnaW5Ub3A6IC0xNiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGF0YXNldCBuYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwidGFibGVfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RhYmxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhc291cmNlUHJvcENoYW5nZSgndGFibGVfbmFtZScsIHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEYXRhc2V0IG5hbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNFZGl0TW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1NRTCcpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICAgICAnV2hlbiBzcGVjaWZ5aW5nIFNRTCwgdGhlIGRhdGFzb3VyY2UgYWN0cyBhcyBhIHZpZXcuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1N1cGVyc2V0IHdpbGwgdXNlIHRoaXMgc3RhdGVtZW50IGFzIGEgc3VicXVlcnkgd2hpbGUgZ3JvdXBpbmcgYW5kIGZpbHRlcmluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvbiB0aGUgZ2VuZXJhdGVkIHBhcmVudCBxdWVyaWVzLicsXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwic3FsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyRWRpdEluTW9kYWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWluTGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGluZXM9ezIwfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyF0aGlzLnN0YXRlLmlzRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kYXRhc291cmNlVHlwZSA9PT0gREFUQVNPVVJDRV9UWVBFUy5waHlzaWNhbC5rZXkgJiYgKFxuICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzU3FsYSAmJiAoXG4gICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICBmaWVsZEtleT1cInRhYmxlU2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ1BoeXNpY2FsJyl9XG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e3sgbWFyZ2luVG9wOiA4IH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2U9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YXNvdXJjZS5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VfbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc291cmNlLmRhdGFiYXNlPy5kYXRhYmFzZV9uYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZS5kYXRhYmFzZT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBkYklkPXtkYXRhc291cmNlLmRhdGFiYXNlPy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yPXt0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hPXtkYXRhc291cmNlLnNjaGVtYX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbExhYk1vZGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVWYWx1ZT17ZGF0YXNvdXJjZS50YWJsZV9uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TY2hlbWFDaGFuZ2U9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRWRpdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNjaGVtYSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGF0YXNvdXJjZVByb3BDaGFuZ2UoJ3NjaGVtYScsIHNjaGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25EYkNoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGF0YWJhc2UgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhYmFzZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25UYWJsZVNlbGVjdENoYW5nZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNFZGl0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGFibGUgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGFzb3VyY2VQcm9wQ2hhbmdlKCd0YWJsZV9uYW1lJywgdGFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshdGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICAgICdUaGUgcG9pbnRlciB0byBhIHBoeXNpY2FsIHRhYmxlIChvciB2aWV3KS4gS2VlcCBpbiBtaW5kIHRoYXQgdGhlIGNoYXJ0IGlzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdhc3NvY2lhdGVkIHRvIHRoaXMgU3VwZXJzZXQgbG9naWNhbCB0YWJsZSwgYW5kIHRoaXMgbG9naWNhbCB0YWJsZSBwb2ludHMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ3RoZSBwaHlzaWNhbCB0YWJsZSByZWZlcmVuY2VkIGhlcmUuJyxcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvQ29sPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvRmllbGRzZXQ+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyRXJyb3JzKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLmVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8QWxlcnRcbiAgICAgICAgICBjc3M9e3RoZW1lID0+ICh7IG1hcmdpbkJvdHRvbTogdGhlbWUuZ3JpZFVuaXQgKiA0IH0pfVxuICAgICAgICAgIHR5cGU9XCJlcnJvclwiXG4gICAgICAgICAgbWVzc2FnZT17XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvcnMubWFwKGVyciA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Vycn0+e2Vycn08L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJlbmRlck1ldHJpY0NvbGxlY3Rpb24oKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgbWV0cmljcyB9ID0gZGF0YXNvdXJjZTtcbiAgICBjb25zdCBzb3J0ZWRNZXRyaWNzID0gbWV0cmljcz8ubGVuZ3RoID8gdGhpcy5zb3J0TWV0cmljcyhtZXRyaWNzKSA6IFtdO1xuICAgIHJldHVybiAoXG4gICAgICA8Q29sbGVjdGlvblRhYmxlXG4gICAgICAgIHRhYmxlQ29sdW1ucz17WydtZXRyaWNfbmFtZScsICd2ZXJib3NlX25hbWUnLCAnZXhwcmVzc2lvbiddfVxuICAgICAgICBzb3J0Q29sdW1ucz17WydtZXRyaWNfbmFtZScsICd2ZXJib3NlX25hbWUnLCAnZXhwcmVzc2lvbiddfVxuICAgICAgICBjb2x1bW5MYWJlbHM9e3tcbiAgICAgICAgICBtZXRyaWNfbmFtZTogdCgnTWV0cmljJyksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiB0KCdMYWJlbCcpLFxuICAgICAgICAgIGV4cHJlc3Npb246IHQoJ1NRTCBleHByZXNzaW9uJyksXG4gICAgICAgIH19XG4gICAgICAgIGV4cGFuZEZpZWxkc2V0PXtcbiAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxGaWVsZHNldCBjb21wYWN0PlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBmaWVsZEtleT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sSWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiZDNmb3JtYXRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEMyBmb3JtYXQnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjb250cm9sSWQ9XCJkM2Zvcm1hdFwiIHBsYWNlaG9sZGVyPVwiJXkvJW0vJWRcIiAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0NlcnRpZmllZCBieScpfVxuICAgICAgICAgICAgICAgIGZpZWxkS2V5PVwiY2VydGlmaWVkX2J5XCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChcbiAgICAgICAgICAgICAgICAgICdQZXJzb24gb3IgZ3JvdXAgdGhhdCBoYXMgY2VydGlmaWVkIHRoaXMgbWV0cmljJyxcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xJZD1cImNlcnRpZmllZF9ieVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdDZXJ0aWZpZWQgYnknKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdEZXRhaWxzIG9mIHRoZSBjZXJ0aWZpY2F0aW9uJyl9XG4gICAgICAgICAgICAgICAgY29udHJvbD17XG4gICAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwiY2VydGlmaWNhdGlvbl9kZXRhaWxzXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0NlcnRpZmljYXRpb24gZGV0YWlscycpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxGaWVsZFxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdXYXJuaW5nJyl9XG4gICAgICAgICAgICAgICAgZmllbGRLZXk9XCJ3YXJuaW5nX21hcmtkb3duXCJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnT3B0aW9uYWwgd2FybmluZyBhYm91dCB1c2Ugb2YgdGhpcyBtZXRyaWMnKX1cbiAgICAgICAgICAgICAgICBjb250cm9sPXtcbiAgICAgICAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbElkPVwid2FybmluZ19tYXJrZG93blwiXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPVwibWFya2Rvd25cIlxuICAgICAgICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplPVwidmVydGljYWxcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0ZpZWxkc2V0PlxuICAgICAgICAgIDwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uPXtzb3J0ZWRNZXRyaWNzfVxuICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25EYXRhc291cmNlUHJvcENoYW5nZS5iaW5kKHRoaXMsICdtZXRyaWNzJyl9XG4gICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgbWV0cmljX25hbWU6IHQoJzxuZXcgbWV0cmljPicpLFxuICAgICAgICAgIHZlcmJvc2VfbmFtZTogJycsXG4gICAgICAgICAgZXhwcmVzc2lvbjogJycsXG4gICAgICAgIH0pfVxuICAgICAgICBpdGVtQ2VsbFByb3BzPXt7XG4gICAgICAgICAgZXhwcmVzc2lvbjogKCkgPT4gKHtcbiAgICAgICAgICAgIHdpZHRoOiAnMjQwcHgnLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9fVxuICAgICAgICBpdGVtUmVuZGVyZXJzPXt7XG4gICAgICAgICAgbWV0cmljX25hbWU6ICh2LCBvbkNoYW5nZSwgXywgcmVjb3JkKSA9PiAoXG4gICAgICAgICAgICA8RmxleFJvd0NvbnRhaW5lcj5cbiAgICAgICAgICAgICAge3JlY29yZC5pc19jZXJ0aWZpZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxDZXJ0aWZpZWRCYWRnZVxuICAgICAgICAgICAgICAgICAgY2VydGlmaWVkQnk9e3JlY29yZC5jZXJ0aWZpZWRfYnl9XG4gICAgICAgICAgICAgICAgICBkZXRhaWxzPXtyZWNvcmQuY2VydGlmaWNhdGlvbl9kZXRhaWxzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtyZWNvcmQud2FybmluZ19tYXJrZG93biAmJiAoXG4gICAgICAgICAgICAgICAgPFdhcm5pbmdJY29uV2l0aFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgIHdhcm5pbmdNYXJrZG93bj17cmVjb3JkLndhcm5pbmdfbWFya2Rvd259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPEVkaXRhYmxlVGl0bGUgY2FuRWRpdCB0aXRsZT17dn0gb25TYXZlVGl0bGU9e29uQ2hhbmdlfSAvPlxuICAgICAgICAgICAgPC9GbGV4Um93Q29udGFpbmVyPlxuICAgICAgICAgICksXG4gICAgICAgICAgdmVyYm9zZV9uYW1lOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0Q29udHJvbCBjYW5FZGl0IHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBleHByZXNzaW9uOiAodiwgb25DaGFuZ2UpID0+IChcbiAgICAgICAgICAgIDxUZXh0QXJlYUNvbnRyb2xcbiAgICAgICAgICAgICAgY2FuRWRpdFxuICAgICAgICAgICAgICBpbml0aWFsVmFsdWU9e3Z9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzPXtbJ2RhdGFzb3VyY2Utc3FsLWV4cHJlc3Npb24nXX1cbiAgICAgICAgICAgICAgbGFuZ3VhZ2U9XCJzcWxcIlxuICAgICAgICAgICAgICBvZmZlckVkaXRJbk1vZGFsPXtmYWxzZX1cbiAgICAgICAgICAgICAgbWluTGluZXM9ezV9XG4gICAgICAgICAgICAgIHRleHRBcmVhU3R5bGVzPXt7IG1pbldpZHRoOiAnMjAwcHgnLCBtYXhXaWR0aDogJzQ1MHB4JyB9fVxuICAgICAgICAgICAgICByZXNpemU9XCJib3RoXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogKHYsIG9uQ2hhbmdlLCBsYWJlbCkgPT4gKFxuICAgICAgICAgICAgPFN0YWNrZWRGaWVsZFxuICAgICAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50PXs8VGV4dENvbnRyb2wgdmFsdWU9e3Z9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz59XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICksXG4gICAgICAgICAgZDNmb3JtYXQ6ICh2LCBvbkNoYW5nZSwgbGFiZWwpID0+IChcbiAgICAgICAgICAgIDxTdGFja2VkRmllbGRcbiAgICAgICAgICAgICAgbGFiZWw9e2xhYmVsfVxuICAgICAgICAgICAgICBmb3JtRWxlbWVudD17PFRleHRDb250cm9sIHZhbHVlPXt2fSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApLFxuICAgICAgICB9fVxuICAgICAgICBhbGxvd0RlbGV0ZXNcbiAgICAgICAgc3RpY2t5SGVhZGVyXG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkYXRhc291cmNlLCBhY3RpdmVUYWJLZXkgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBtZXRyaWNzIH0gPSBkYXRhc291cmNlO1xuICAgIGNvbnN0IHNvcnRlZE1ldHJpY3MgPSBtZXRyaWNzPy5sZW5ndGggPyB0aGlzLnNvcnRNZXRyaWNzKG1ldHJpY3MpIDogW107XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8RGF0YXNvdXJjZUNvbnRhaW5lcj5cbiAgICAgICAge3RoaXMucmVuZGVyRXJyb3JzKCl9XG4gICAgICAgIDxBbGVydFxuICAgICAgICAgIGNzcz17dGhlbWUgPT4gKHsgbWFyZ2luQm90dG9tOiB0aGVtZS5ncmlkVW5pdCAqIDQgfSl9XG4gICAgICAgICAgdHlwZT1cIndhcm5pbmdcIlxuICAgICAgICAgIG1lc3NhZ2U9e1xuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgPHN0cm9uZz57dCgnQmUgY2FyZWZ1bC4nKX0gPC9zdHJvbmc+XG4gICAgICAgICAgICAgIHt0KFxuICAgICAgICAgICAgICAgICdDaGFuZ2luZyB0aGVzZSBzZXR0aW5ncyB3aWxsIGFmZmVjdCBhbGwgY2hhcnRzIHVzaW5nIHRoaXMgZGF0YXNldCwgaW5jbHVkaW5nIGNoYXJ0cyBvd25lZCBieSBvdGhlciBwZW9wbGUuJyxcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICAgPFN0eWxlZFRhYmxlVGFic1xuICAgICAgICAgIGZ1bGxXaWR0aD17ZmFsc2V9XG4gICAgICAgICAgaWQ9XCJ0YWJsZS10YWJzXCJcbiAgICAgICAgICBkYXRhLXRlc3Q9XCJlZGl0LWRhdGFzZXQtdGFic1wiXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVGFiU2VsZWN0fVxuICAgICAgICAgIGRlZmF1bHRBY3RpdmVLZXk9e2FjdGl2ZVRhYktleX1cbiAgICAgICAgPlxuICAgICAgICAgIDxUYWJzLlRhYlBhbmUga2V5PXswfSB0YWI9e3QoJ1NvdXJjZScpfT5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlclNvdXJjZUZpZWxkc2V0KHRoZW1lKX1cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17c29ydGVkTWV0cmljc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnTWV0cmljcycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5PXsxfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlck1ldHJpY0NvbGxlY3Rpb24oKX1cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5kYXRhYmFzZUNvbHVtbnN9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0NvbHVtbnMnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleT17Mn1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8U3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5CdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICAgIDxTdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICAgICAgICBidXR0b25TdHlsZT1cInRlcnRpYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zeW5jTWV0YWRhdGF9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN5bmMtZnJvbS1zb3VyY2VcIlxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5pc0VkaXRNb2RlfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1kYXRhYmFzZVwiIC8+eycgJ31cbiAgICAgICAgICAgICAgICAgICAge3QoJ1N5bmMgY29sdW1ucyBmcm9tIHNvdXJjZScpfVxuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRCdXR0b25XcmFwcGVyPlxuICAgICAgICAgICAgICA8L0NvbHVtbkJ1dHRvbldyYXBwZXI+XG4gICAgICAgICAgICAgIDxDb2x1bW5Db2xsZWN0aW9uVGFibGVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjb2x1bW5zLXRhYmxlXCJcbiAgICAgICAgICAgICAgICBjb2x1bW5zPXt0aGlzLnN0YXRlLmRhdGFiYXNlQ29sdW1uc31cbiAgICAgICAgICAgICAgICBkYXRhc291cmNlPXtkYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIG9uQ29sdW1uc0NoYW5nZT17ZGF0YWJhc2VDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBkYXRhYmFzZUNvbHVtbnMgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25EYXRhc291cmNlQ2hhbmdlPXt0aGlzLm9uRGF0YXNvdXJjZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0YWRhdGFMb2FkaW5nICYmIDxMb2FkaW5nIC8+fVxuICAgICAgICAgICAgPC9TdHlsZWRDb2x1bW5zVGFiV3JhcHBlcj5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgICA8VGFicy5UYWJQYW5lXG4gICAgICAgICAgICB0YWI9e1xuICAgICAgICAgICAgICA8Q29sbGVjdGlvblRhYlRpdGxlXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnQ2FsY3VsYXRlZCBjb2x1bW5zJyl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXk9ezN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN0eWxlZENvbHVtbnNUYWJXcmFwcGVyPlxuICAgICAgICAgICAgICA8Q29sdW1uQ29sbGVjdGlvblRhYmxlXG4gICAgICAgICAgICAgICAgY29sdW1ucz17dGhpcy5zdGF0ZS5jYWxjdWxhdGVkQ29sdW1uc31cbiAgICAgICAgICAgICAgICBvbkNvbHVtbnNDaGFuZ2U9e2NhbGN1bGF0ZWRDb2x1bW5zID0+XG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENvbHVtbnMoeyBjYWxjdWxhdGVkQ29sdW1ucyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkRhdGFzb3VyY2VDaGFuZ2U9e3RoaXMub25EYXRhc291cmNlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2U9e2RhdGFzb3VyY2V9XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb2x1bW5OYW1lXG4gICAgICAgICAgICAgICAgc2hvd0V4cHJlc3Npb25cbiAgICAgICAgICAgICAgICBhbGxvd0FkZEl0ZW1cbiAgICAgICAgICAgICAgICBhbGxvd0VkaXREYXRhVHlwZVxuICAgICAgICAgICAgICAgIGl0ZW1HZW5lcmF0b3I9eygpID0+ICh7XG4gICAgICAgICAgICAgICAgICBjb2x1bW5fbmFtZTogdCgnPG5ldyBjb2x1bW4+JyksXG4gICAgICAgICAgICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZ3JvdXBieTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IHQoJzxlbnRlciBTUUwgZXhwcmVzc2lvbiBoZXJlPicpLFxuICAgICAgICAgICAgICAgICAgX19leHBhbmRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvU3R5bGVkQ29sdW1uc1RhYldyYXBwZXI+XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSBrZXk9ezR9IHRhYj17dCgnU2V0dGluZ3MnKX0+XG4gICAgICAgICAgICA8Um93IGd1dHRlcj17MTZ9PlxuICAgICAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRhaW5lcj57dGhpcy5yZW5kZXJTZXR0aW5nc0ZpZWxkc2V0KCl9PC9Gb3JtQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICAgICAgPEZvcm1Db250YWluZXI+e3RoaXMucmVuZGVyQWR2YW5jZWRGaWVsZHNldCgpfTwvRm9ybUNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Db2w+XG4gICAgICAgICAgICA8L1Jvdz5cbiAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cbiAgICAgICAgPC9TdHlsZWRUYWJsZVRhYnM+XG4gICAgICA8L0RhdGFzb3VyY2VDb250YWluZXI+XG4gICAgKTtcbiAgfVxufVxuXG5EYXRhc291cmNlRWRpdG9yLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbkRhdGFzb3VyY2VFZGl0b3IucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuXG5jb25zdCBEYXRhU291cmNlQ29tcG9uZW50ID0gd2l0aFRoZW1lKERhdGFzb3VyY2VFZGl0b3IpO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoVG9hc3RzKERhdGFTb3VyY2VDb21wb25lbnQpO1xuIl19 */\") },\n      ___EmotionJSX(Field, {\n        fieldKey: \"table_name\",\n        label: t('Dataset name'),\n        control:\n        ___EmotionJSX(TextControl, {\n          controlId: \"table_name\",\n          onChange: (table) => {\n            this.onDatasourcePropChange('table_name', table);\n          },\n          placeholder: t('Dataset name'),\n          disabled: !this.state.isEditMode }) }))),\n\n\n\n\n\n      ___EmotionJSX(Field, {\n        fieldKey: \"sql\",\n        label: t('SQL'),\n        description: t(\n        'When specifying SQL, the datasource acts as a view. ' +\n        'Superset will use this statement as a subquery while grouping and filtering ' +\n        'on the generated parent queries.'),\n\n        control:\n        ___EmotionJSX(TextAreaControl, {\n          language: \"sql\",\n          offerEditInModal: false,\n          minLines: 20,\n          maxLines: 20,\n          readOnly: !this.state.isEditMode,\n          resize: \"both\" }) }))),\n\n\n\n\n\n\n\n      this.state.datasourceType === DATASOURCE_TYPES.physical.key &&\n      ___EmotionJSX(Col, { xs: 24, md: 12 },\n      this.state.isSqla &&\n      ___EmotionJSX(Field, {\n        fieldKey: \"tableSelector\",\n        label: t('Physical'),\n        control:\n        ___EmotionJSX(\"div\", { css: _ref24 },\n        ___EmotionJSX(TableSelector, {\n          clearable: false,\n          database: {\n            ...datasource.database,\n            database_name:\n            ((_datasource$database = datasource.database) == null ? void 0 : _datasource$database.database_name) || ((_datasource$database2 =\n            datasource.database) == null ? void 0 : _datasource$database2.name) },\n\n          dbId: (_datasource$database3 = datasource.database) == null ? void 0 : _datasource$database3.id,\n          handleError: this.props.addDangerToast,\n          schema: datasource.schema,\n          sqlLabMode: false,\n          tableValue: datasource.table_name,\n          onSchemaChange:\n          this.state.isEditMode ?\n          (schema) =>\n          this.onDatasourcePropChange('schema', schema) :\n          undefined,\n\n          onDbChange:\n          this.state.isEditMode ?\n          (database) =>\n          this.onDatasourcePropChange(\n          'database',\n          database) :\n\n          undefined,\n\n          onTableSelectChange:\n          this.state.isEditMode ?\n          (table) =>\n          this.onDatasourcePropChange('table_name', table) :\n          undefined,\n\n          readOnly: !this.state.isEditMode })),\n\n\n\n        description: t(\n        'The pointer to a physical table (or view). Keep in mind that the chart is ' +\n        'associated to this Superset logical table, and this logical table points ' +\n        'the physical table referenced here.') })))));\n\n\n\n\n\n\n\n\n  }\n\n  renderErrors() {\n    if (this.state.errors.length > 0) {\n      return (\n        ___EmotionJSX(Alert, {\n          css: (theme) => ({ marginBottom: theme.gridUnit * 4 }),\n          type: \"error\",\n          message:\n          ___EmotionJSX(React.Fragment, null,\n          this.state.errors.map((err) =>\n          ___EmotionJSX(\"div\", { key: err }, err))) }));\n\n\n\n\n\n    }\n    return null;\n  }\n\n  renderMetricCollection() {\n    const { datasource } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics != null && metrics.length ? this.sortMetrics(metrics) : [];\n    return (\n      ___EmotionJSX(CollectionTable, {\n        tableColumns: ['metric_name', 'verbose_name', 'expression'],\n        sortColumns: ['metric_name', 'verbose_name', 'expression'],\n        columnLabels: {\n          metric_name: t('Metric'),\n          verbose_name: t('Label'),\n          expression: t('SQL expression') },\n\n        expandFieldset:\n        ___EmotionJSX(FormContainer, null,\n        ___EmotionJSX(Fieldset, { compact: true },\n        ___EmotionJSX(Field, {\n          fieldKey: \"description\",\n          label: t('Description'),\n          control:\n          ___EmotionJSX(TextControl, {\n            controlId: \"description\",\n            placeholder: t('Description') }) }),\n\n\n\n        ___EmotionJSX(Field, {\n          fieldKey: \"d3format\",\n          label: t('D3 format'),\n          control:\n          ___EmotionJSX(TextControl, { controlId: \"d3format\", placeholder: \"%y/%m/%d\" }) }),\n\n\n        ___EmotionJSX(Field, {\n          label: t('Certified by'),\n          fieldKey: \"certified_by\",\n          description: t(\n          'Person or group that has certified this metric'),\n\n          control:\n          ___EmotionJSX(TextControl, {\n            controlId: \"certified_by\",\n            placeholder: t('Certified by') }) }),\n\n\n\n        ___EmotionJSX(Field, {\n          label: t('Certification details'),\n          fieldKey: \"certification_details\",\n          description: t('Details of the certification'),\n          control:\n          ___EmotionJSX(TextControl, {\n            controlId: \"certification_details\",\n            placeholder: t('Certification details') }) }),\n\n\n\n        ___EmotionJSX(Field, {\n          label: t('Warning'),\n          fieldKey: \"warning_markdown\",\n          description: t('Optional warning about use of this metric'),\n          control:\n          ___EmotionJSX(TextAreaControl, {\n            controlId: \"warning_markdown\",\n            language: \"markdown\",\n            offerEditInModal: false,\n            resize: \"vertical\" }) }))),\n\n\n\n\n\n\n        collection: sortedMetrics,\n        allowAddItem: true,\n        onChange: this.onDatasourcePropChange.bind(this, 'metrics'),\n        itemGenerator: () => ({\n          metric_name: t('<new metric>'),\n          verbose_name: '',\n          expression: '' }),\n\n        itemCellProps: {\n          expression: () => ({\n            width: '240px' }) },\n\n\n        itemRenderers: {\n          metric_name: (v, onChange, _, record) =>\n          ___EmotionJSX(FlexRowContainer, null,\n          record.is_certified &&\n          ___EmotionJSX(CertifiedBadge, {\n            certifiedBy: record.certified_by,\n            details: record.certification_details }),\n\n\n          record.warning_markdown &&\n          ___EmotionJSX(WarningIconWithTooltip, {\n            warningMarkdown: record.warning_markdown }),\n\n\n          ___EmotionJSX(EditableTitle, { canEdit: true, title: v, onSaveTitle: onChange })),\n\n\n          verbose_name: (v, onChange) =>\n          ___EmotionJSX(TextControl, { canEdit: true, value: v, onChange: onChange }),\n\n          expression: (v, onChange) =>\n          ___EmotionJSX(TextAreaControl, {\n            canEdit: true,\n            initialValue: v,\n            onChange: onChange,\n            extraClasses: ['datasource-sql-expression'],\n            language: \"sql\",\n            offerEditInModal: false,\n            minLines: 5,\n            textAreaStyles: { minWidth: '200px', maxWidth: '450px' },\n            resize: \"both\" }),\n\n\n          description: (v, onChange, label) =>\n          ___EmotionJSX(StackedField, {\n            label: label,\n            formElement: ___EmotionJSX(TextControl, { value: v, onChange: onChange }) }),\n\n\n          d3format: (v, onChange, label) =>\n          ___EmotionJSX(StackedField, {\n            label: label,\n            formElement: ___EmotionJSX(TextControl, { value: v, onChange: onChange }) }) },\n\n\n\n        allowDeletes: true,\n        stickyHeader: true }));\n\n\n  }\n\n  render() {\n    const { datasource, activeTabKey } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics != null && metrics.length ? this.sortMetrics(metrics) : [];\n    const { theme } = this.props;\n\n    return (\n      ___EmotionJSX(DatasourceContainer, null,\n      this.renderErrors(),\n      ___EmotionJSX(Alert, {\n        css: (theme) => ({ marginBottom: theme.gridUnit * 4 }),\n        type: \"warning\",\n        message:\n        ___EmotionJSX(React.Fragment, null,\n        ' ',\n        ___EmotionJSX(\"strong\", null, t('Be careful.'), \" \"),\n        t(\n        'Changing these settings will affect all charts using this dataset, including charts owned by other people.')) }),\n\n\n\n\n      ___EmotionJSX(StyledTableTabs, {\n        fullWidth: false,\n        id: \"table-tabs\",\n        \"data-test\": \"edit-dataset-tabs\",\n        onChange: this.handleTabSelect,\n        defaultActiveKey: activeTabKey },\n\n      ___EmotionJSX(Tabs.TabPane, { key: 0, tab: t('Source') },\n      this.renderSourceFieldset(theme)),\n\n      ___EmotionJSX(Tabs.TabPane, {\n        tab:\n        ___EmotionJSX(CollectionTabTitle, {\n          collection: sortedMetrics,\n          title: t('Metrics') }),\n\n\n        key: 1 },\n\n      this.renderMetricCollection()),\n\n      ___EmotionJSX(Tabs.TabPane, {\n        tab:\n        ___EmotionJSX(CollectionTabTitle, {\n          collection: this.state.databaseColumns,\n          title: t('Columns') }),\n\n\n        key: 2 },\n\n      ___EmotionJSX(StyledColumnsTabWrapper, null,\n      ___EmotionJSX(ColumnButtonWrapper, null,\n      ___EmotionJSX(StyledButtonWrapper, null,\n      ___EmotionJSX(Button, {\n        buttonSize: \"small\",\n        buttonStyle: \"tertiary\",\n        onClick: this.syncMetadata,\n        className: \"sync-from-source\",\n        disabled: this.state.isEditMode },\n\n      ___EmotionJSX(\"i\", { className: \"fa fa-database\" }), ' ',\n      t('Sync columns from source')))),\n\n\n\n      ___EmotionJSX(ColumnCollectionTable, {\n        className: \"columns-table\",\n        columns: this.state.databaseColumns,\n        datasource: datasource,\n        onColumnsChange: (databaseColumns) =>\n        this.setColumns({ databaseColumns }),\n\n        onDatasourceChange: this.onDatasourceChange }),\n\n      this.state.metadataLoading && ___EmotionJSX(Loading, null))),\n\n\n      ___EmotionJSX(Tabs.TabPane, {\n        tab:\n        ___EmotionJSX(CollectionTabTitle, {\n          collection: this.state.calculatedColumns,\n          title: t('Calculated columns') }),\n\n\n        key: 3 },\n\n      ___EmotionJSX(StyledColumnsTabWrapper, null,\n      ___EmotionJSX(ColumnCollectionTable, {\n        columns: this.state.calculatedColumns,\n        onColumnsChange: (calculatedColumns) =>\n        this.setColumns({ calculatedColumns }),\n\n        onDatasourceChange: this.onDatasourceChange,\n        datasource: datasource,\n        editableColumnName: true,\n        showExpression: true,\n        allowAddItem: true,\n        allowEditDataType: true,\n        itemGenerator: () => ({\n          column_name: t('<new column>'),\n          filterable: true,\n          groupby: true,\n          expression: t('<enter SQL expression here>'),\n          __expanded: true }) }))),\n\n\n\n\n      ___EmotionJSX(Tabs.TabPane, { key: 4, tab: t('Settings') },\n      ___EmotionJSX(Row, { gutter: 16 },\n      ___EmotionJSX(Col, { xs: 24, md: 12 },\n      ___EmotionJSX(FormContainer, null, this.renderSettingsFieldset())),\n\n      ___EmotionJSX(Col, { xs: 24, md: 12 },\n      ___EmotionJSX(FormContainer, null, this.renderAdvancedFieldset())))))));\n\n\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nDatasourceEditor.defaultProps = defaultProps;\nDatasourceEditor.propTypes = propTypes;\n\nconst DataSourceComponent = withTheme(DatasourceEditor);const _default =\n\nwithToasts(DataSourceComponent);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DatasourceContainer, \"DatasourceContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(FlexRowContainer, \"FlexRowContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledTableTabs, \"StyledTableTabs\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledBadge, \"StyledBadge\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(EditLockContainer, \"EditLockContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(ColumnButtonWrapper, \"ColumnButtonWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledLabelWrapper, \"StyledLabelWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledColumnsTabWrapper, \"StyledColumnsTabWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StyledButtonWrapper, \"StyledButtonWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(checkboxGenerator, \"checkboxGenerator\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DATA_TYPES, \"DATA_TYPES\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DATASOURCE_TYPES_ARR, \"DATASOURCE_TYPES_ARR\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DATASOURCE_TYPES, \"DATASOURCE_TYPES\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(CollectionTabTitle, \"CollectionTabTitle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(ColumnCollectionTable, \"ColumnCollectionTable\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(StackedField, \"StackedField\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(FormContainer, \"FormContainer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(OwnersSelector, \"OwnersSelector\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DatasourceEditor, \"DatasourceEditor\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(DataSourceComponent, \"DataSourceComponent\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["rison","React","useCallback","PropTypes","Radio","Card","Alert","Badge","shortid","FeatureFlag","styled","SupersetClient","t","withTheme","Select","AsyncSelect","Row","Col","FormLabel","Button","Tabs","CertifiedBadge","WarningIconWithTooltip","DatabaseSelector","Label","Loading","TableSelector","EditableTitle","getClientErrorObject","CheckboxControl","TextControl","TextAreaControl","SpatialControl","withToasts","isFeatureEnabled","Icons","CollectionTable","Fieldset","Field","DatasourceContainer","div","theme","colors","warning","base","typography","weights","bold","FlexRowContainer","gridUnit","StyledTableTabs","StyledBadge","EditLockContainer","sizes","s","ColumnButtonWrapper","StyledLabelWrapper","StyledColumnsTabWrapper","StyledButtonWrapper","span","checkboxGenerator","d","onChange","DATA_TYPES","value","label","DATASOURCE_TYPES_ARR","key","DATASOURCE_TYPES","forEach","o","CollectionTabTitle","title","collection","length","propTypes","string","array","ColumnCollectionTable","columns","datasource","onColumnsChange","onDatasourceChange","editableColumnName","showExpression","allowAddItem","allowEditDataType","itemGenerator","ENABLE_ADVANCED_DATA_TYPES","column_name","advanced_data_type","type","groupby","is_dttm","main_dttm_col","filterable","v","onItemChange","_","record","is_certified","certified_by","certification_details","_onItemChange","_label","checked","disabled","find","column","isRequired","object","func","bool","defaultProps","StackedField","formElement","node","FormContainer","children","addSuccessToast","addDangerToast","setIsEditing","OwnersSelector","loadOptions","search","page","pageSize","query","encode","filter","page_size","get","endpoint","then","response","data","json","result","item","extra","active","map","text","totalCount","count","owners","DatasourceEditor","PureComponent","constructor","props","state","owner","id","first_name","last_name","metrics","metric","certifiedByMetric","certificationDetails","certification","details","certifiedBy","warning_markdown","warningMarkdown","JSON","parse","errors","isSqla","datasource_type","isEditMode","databaseColumns","col","expression","calculatedColumns","metadataLoading","activeTabKey","datasourceType","sql","virtual","physical","bind","onChangeEditMode","onDatasourcePropChange","tableChangeAndSyncMetadata","syncMetadata","setColumns","validateAndChange","handleTabSelect","allowEditSource","DISABLE_DATASET_SOURCE_EDIT","newDatasource","setState","prevState","callback","attr","undefined","onDatasourceTypeChange","obj","validate","updateColumns","cols","databaseColumnNames","name","currentCols","reduce","agg","finalColumns","results","added","modified","removed","currentCol","push","generate","params","database_name","database","schema_name","schema","table_name","encodeURIComponent","Object","entries","join","catch","error","statusText","findDuplicates","arr","accessor","seen","dups","concat","metric_name","noFilterCalcCols","sortMetrics","sort","a","b","renderSettingsFieldset","newOwners","renderAdvancedFieldset","renderSpatialTab","spatials","all_cols","allCols","config","renderSourceFieldset","grayscale","width","marginTop","table","renderErrors","marginBottom","err","renderMetricCollection","sortedMetrics","verbose_name","minWidth","maxWidth","description","d3format","render","__expanded","DataSourceComponent"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/components/Datasource/DatasourceEditor.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport rison from 'rison';\nimport React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Radio } from 'src/components/Radio';\nimport Card from 'src/components/Card';\nimport Alert from 'src/components/Alert';\nimport Badge from 'src/components/Badge';\nimport shortid from 'shortid';\nimport {\n  FeatureFlag,\n  styled,\n  SupersetClient,\n  t,\n  withTheme,\n} from '@superset-ui/core';\nimport { Select, AsyncSelect, Row, Col } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport Button from 'src/components/Button';\nimport Tabs from 'src/components/Tabs';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport DatabaseSelector from 'src/components/DatabaseSelector';\nimport Label from 'src/components/Label';\nimport Loading from 'src/components/Loading';\nimport TableSelector from 'src/components/TableSelector';\nimport EditableTitle from 'src/components/EditableTitle';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport CheckboxControl from 'src/explore/components/controls/CheckboxControl';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport TextAreaControl from 'src/explore/components/controls/TextAreaControl';\nimport SpatialControl from 'src/explore/components/controls/SpatialControl';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { isFeatureEnabled } from 'src/featureFlags';\nimport Icons from 'src/components/Icons';\nimport CollectionTable from './CollectionTable';\nimport Fieldset from './Fieldset';\nimport Field from './Field';\n\nconst DatasourceContainer = styled.div`\n  .change-warning {\n    margin: 16px 10px 0;\n    color: ${({ theme }) => theme.colors.warning.base};\n  }\n\n  .change-warning .bold {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n\n  .form-group.has-feedback > .help-block {\n    margin-top: 8px;\n  }\n\n  .form-group.form-group-md {\n    margin-bottom: 8px;\n  }\n`;\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledTableTabs = styled(Tabs)`\n  overflow: visible;\n  .ant-tabs-content-holder {\n    overflow: visible;\n  }\n`;\n\nconst StyledBadge = styled(Badge)`\n  .ant-badge-count {\n    line-height: ${({ theme }) => theme.gridUnit * 4}px;\n    height: ${({ theme }) => theme.gridUnit * 4}px;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst EditLockContainer = styled.div`\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  display: flex;\n  align-items: center;\n  a {\n    padding: 0 10px;\n  }\n`;\n\nconst ColumnButtonWrapper = styled.div`\n  text-align: right;\n  ${({ theme }) => `margin-bottom: ${theme.gridUnit * 2}px`}\n`;\n\nconst StyledLabelWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  span {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledColumnsTabWrapper = styled.div`\n  .table > tbody > tr > td {\n    vertical-align: middle;\n  }\n\n  .ant-tag {\n    margin-top: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledButtonWrapper = styled.span`\n  ${({ theme }) => `\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-left: ${theme.gridUnit * 3}px;\n  `}\n`;\n\nconst checkboxGenerator = (d, onChange) => (\n  <CheckboxControl value={d} onChange={onChange} />\n);\nconst DATA_TYPES = [\n  { value: 'STRING', label: t('STRING') },\n  { value: 'NUMERIC', label: t('NUMERIC') },\n  { value: 'DATETIME', label: t('DATETIME') },\n  { value: 'BOOLEAN', label: t('BOOLEAN') },\n];\n\nconst DATASOURCE_TYPES_ARR = [\n  { key: 'physical', label: t('Physical (table or view)') },\n  { key: 'virtual', label: t('Virtual (SQL)') },\n];\nconst DATASOURCE_TYPES = {};\nDATASOURCE_TYPES_ARR.forEach(o => {\n  DATASOURCE_TYPES[o.key] = o;\n});\n\nfunction CollectionTabTitle({ title, collection }) {\n  return (\n    <div\n      css={{ display: 'flex', alignItems: 'center' }}\n      data-test={`collection-tab-${title}`}\n    >\n      {title}{' '}\n      <StyledBadge count={collection ? collection.length : 0} showZero />\n    </div>\n  );\n}\n\nCollectionTabTitle.propTypes = {\n  title: PropTypes.string,\n  collection: PropTypes.array,\n};\n\nfunction ColumnCollectionTable({\n  columns,\n  datasource,\n  onColumnsChange,\n  onDatasourceChange,\n  editableColumnName,\n  showExpression,\n  allowAddItem,\n  allowEditDataType,\n  itemGenerator,\n}) {\n  return (\n    <CollectionTable\n      collection={columns}\n      tableColumns={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? [\n              'column_name',\n              'advanced_data_type',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n          : [\n              'column_name',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n      }\n      sortColumns={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? [\n              'column_name',\n              'advanced_data_type',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n          : [\n              'column_name',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n      }\n      allowDeletes\n      allowAddItem={allowAddItem}\n      itemGenerator={itemGenerator}\n      stickyHeader\n      expandFieldset={\n        <FormContainer>\n          <Fieldset compact>\n            {showExpression && (\n              <Field\n                fieldKey=\"expression\"\n                label={t('SQL expression')}\n                control={\n                  <TextAreaControl\n                    language=\"markdown\"\n                    offerEditInModal={false}\n                    resize=\"vertical\"\n                  />\n                }\n              />\n            )}\n            <Field\n              fieldKey=\"verbose_name\"\n              label={t('Label')}\n              control={\n                <TextControl\n                  controlId=\"verbose_name\"\n                  placeholder={t('Label')}\n                />\n              }\n            />\n            <Field\n              fieldKey=\"description\"\n              label={t('Description')}\n              control={\n                <TextControl\n                  controlId=\"description\"\n                  placeholder={t('Description')}\n                />\n              }\n            />\n            {allowEditDataType && (\n              <Field\n                fieldKey=\"type\"\n                label={t('Data type')}\n                control={\n                  <Select\n                    ariaLabel={t('Data type')}\n                    options={DATA_TYPES}\n                    name=\"type\"\n                    allowNewOptions\n                    allowClear\n                  />\n                }\n              />\n            )}\n            {isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES) ? (\n              <Field\n                fieldKey=\"advanced_data_type\"\n                label={t('Advanced data type')}\n                control={\n                  <TextControl\n                    controlId=\"advanced_data_type\"\n                    placeholder={t('Advanced Data type')}\n                  />\n                }\n              />\n            ) : (\n              <></>\n            )}\n            <Field\n              fieldKey=\"python_date_format\"\n              label={t('Datetime format')}\n              description={\n                /* Note the fragmented translations may not work. */\n                <div>\n                  {t('The pattern of timestamp format. For strings use ')}\n                  <a href=\"https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior\">\n                    {t('Python datetime string pattern')}\n                  </a>\n                  {t(' expression which needs to adhere to the ')}\n                  <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">\n                    {t('ISO 8601')}\n                  </a>\n                  {t(` standard to ensure that the lexicographical ordering\n                      coincides with the chronological ordering. If the\n                      timestamp format does not adhere to the ISO 8601 standard\n                      you will need to define an expression and type for\n                      transforming the string into a date or timestamp. Note\n                      currently time zones are not supported. If time is stored\n                      in epoch format, put \\`epoch_s\\` or \\`epoch_ms\\`. If no pattern\n                      is specified we fall back to using the optional defaults on a per\n                      database/column name level via the extra parameter.`)}\n                </div>\n              }\n              control={\n                <TextControl\n                  controlId=\"python_date_format\"\n                  placeholder=\"%Y/%m/%d\"\n                />\n              }\n            />\n            <Field\n              fieldKey=\"certified_by\"\n              label={t('Certified By')}\n              description={t('Person or group that has certified this metric')}\n              control={\n                <TextControl\n                  controlId=\"certified\"\n                  placeholder={t('Certified by')}\n                />\n              }\n            />\n            <Field\n              fieldKey=\"certification_details\"\n              label={t('Certification details')}\n              description={t('Details of the certification')}\n              control={\n                <TextControl\n                  controlId=\"certificationDetails\"\n                  placeholder={t('Certification details')}\n                />\n              }\n            />\n          </Fieldset>\n        </FormContainer>\n      }\n      columnLabels={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? {\n              column_name: t('Column'),\n              advanced_data_type: t('Advanced data type'),\n              type: t('Data type'),\n              groupby: t('Is dimension'),\n              is_dttm: t('Is temporal'),\n              main_dttm_col: t('Default datetime'),\n              filterable: t('Is filterable'),\n            }\n          : {\n              column_name: t('Column'),\n              type: t('Data type'),\n              groupby: t('Is dimension'),\n              is_dttm: t('Is temporal'),\n              main_dttm_col: t('Default datetime'),\n              filterable: t('Is filterable'),\n            }\n      }\n      onChange={onColumnsChange}\n      itemRenderers={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? {\n              column_name: (v, onItemChange, _, record) =>\n                editableColumnName ? (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    <EditableTitle\n                      canEdit\n                      title={v}\n                      onSaveTitle={onItemChange}\n                    />\n                  </StyledLabelWrapper>\n                ) : (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    {v}\n                  </StyledLabelWrapper>\n                ),\n              main_dttm_col: (value, _onItemChange, _label, record) => {\n                const checked = datasource.main_dttm_col === record.column_name;\n                const disabled = !columns.find(\n                  column => column.column_name === record.column_name,\n                ).is_dttm;\n                return (\n                  <Radio\n                    data-test={`radio-default-dttm-${record.column_name}`}\n                    checked={checked}\n                    disabled={disabled}\n                    onChange={() =>\n                      onDatasourceChange({\n                        ...datasource,\n                        main_dttm_col: record.column_name,\n                      })\n                    }\n                  />\n                );\n              },\n              type: d => (d ? <Label>{d}</Label> : null),\n              advanced_data_type: d => (\n                <Label onChange={onColumnsChange}>{d}</Label>\n              ),\n              is_dttm: checkboxGenerator,\n              filterable: checkboxGenerator,\n              groupby: checkboxGenerator,\n            }\n          : {\n              column_name: (v, onItemChange, _, record) =>\n                editableColumnName ? (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    <TextControl value={v} onChange={onItemChange} />\n                  </StyledLabelWrapper>\n                ) : (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    {v}\n                  </StyledLabelWrapper>\n                ),\n              main_dttm_col: (value, _onItemChange, _label, record) => {\n                const checked = datasource.main_dttm_col === record.column_name;\n                const disabled = !columns.find(\n                  column => column.column_name === record.column_name,\n                ).is_dttm;\n                return (\n                  <Radio\n                    data-test={`radio-default-dttm-${record.column_name}`}\n                    checked={checked}\n                    disabled={disabled}\n                    onChange={() =>\n                      onDatasourceChange({\n                        ...datasource,\n                        main_dttm_col: record.column_name,\n                      })\n                    }\n                  />\n                );\n              },\n              type: d => (d ? <Label>{d}</Label> : null),\n              is_dttm: checkboxGenerator,\n              filterable: checkboxGenerator,\n              groupby: checkboxGenerator,\n            }\n      }\n    />\n  );\n}\nColumnCollectionTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  datasource: PropTypes.object.isRequired,\n  onColumnsChange: PropTypes.func.isRequired,\n  onDatasourceChange: PropTypes.func.isRequired,\n  editableColumnName: PropTypes.bool,\n  showExpression: PropTypes.bool,\n  allowAddItem: PropTypes.bool,\n  allowEditDataType: PropTypes.bool,\n  itemGenerator: PropTypes.func,\n};\nColumnCollectionTable.defaultProps = {\n  editableColumnName: false,\n  showExpression: false,\n  allowAddItem: false,\n  allowEditDataType: false,\n  itemGenerator: () => ({\n    column_name: t('<new column>'),\n    filterable: true,\n    groupby: true,\n  }),\n};\n\nfunction StackedField({ label, formElement }) {\n  return (\n    <div>\n      <div>\n        <strong>{label}</strong>\n      </div>\n      <div>{formElement}</div>\n    </div>\n  );\n}\n\nStackedField.propTypes = {\n  label: PropTypes.string,\n  formElement: PropTypes.node,\n};\n\nfunction FormContainer({ children }) {\n  return <Card padded>{children}</Card>;\n}\n\nFormContainer.propTypes = {\n  children: PropTypes.node,\n};\n\nconst propTypes = {\n  datasource: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  setIsEditing: PropTypes.func,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  setIsEditing: () => {},\n};\n\nfunction OwnersSelector({ datasource, onChange }) {\n  const loadOptions = useCallback((search = '', page, pageSize) => {\n    const query = rison.encode({ filter: search, page, page_size: pageSize });\n    return SupersetClient.get({\n      endpoint: `/api/v1/dataset/related/owners?q=${query}`,\n    }).then(response => ({\n      data: response.json.result\n        .filter(item => item.extra.active)\n        .map(item => ({\n          value: item.value,\n          label: item.text,\n        })),\n      totalCount: response.json.count,\n    }));\n  }, []);\n\n  return (\n    <AsyncSelect\n      ariaLabel={t('Select owners')}\n      mode=\"multiple\"\n      name=\"owners\"\n      value={datasource.owners}\n      options={loadOptions}\n      onChange={onChange}\n      header={<FormLabel>{t('Owners')}</FormLabel>}\n      allowClear\n    />\n  );\n}\n\nclass DatasourceEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      datasource: {\n        ...props.datasource,\n        owners: props.datasource.owners.map(owner => ({\n          value: owner.value || owner.id,\n          label: owner.label || `${owner.first_name} ${owner.last_name}`,\n        })),\n        metrics: props.datasource.metrics?.map(metric => {\n          const {\n            certified_by: certifiedByMetric,\n            certification_details: certificationDetails,\n          } = metric;\n          const {\n            certification: { details, certified_by: certifiedBy } = {},\n            warning_markdown: warningMarkdown,\n          } = JSON.parse(metric.extra || '{}') || {};\n          return {\n            ...metric,\n            certification_details: certificationDetails || details,\n            warning_markdown: warningMarkdown || '',\n            certified_by: certifiedBy || certifiedByMetric,\n          };\n        }),\n      },\n      errors: [],\n      isSqla:\n        props.datasource.datasource_type === 'table' ||\n        props.datasource.type === 'table',\n      isEditMode: false,\n      databaseColumns: props.datasource.columns.filter(col => !col.expression),\n      calculatedColumns: props.datasource.columns.filter(\n        col => !!col.expression,\n      ),\n      metadataLoading: false,\n      activeTabKey: 0,\n      datasourceType: props.datasource.sql\n        ? DATASOURCE_TYPES.virtual.key\n        : DATASOURCE_TYPES.physical.key,\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onChangeEditMode = this.onChangeEditMode.bind(this);\n    this.onDatasourcePropChange = this.onDatasourcePropChange.bind(this);\n    this.onDatasourceChange = this.onDatasourceChange.bind(this);\n    this.tableChangeAndSyncMetadata =\n      this.tableChangeAndSyncMetadata.bind(this);\n    this.syncMetadata = this.syncMetadata.bind(this);\n    this.setColumns = this.setColumns.bind(this);\n    this.validateAndChange = this.validateAndChange.bind(this);\n    this.handleTabSelect = this.handleTabSelect.bind(this);\n    this.allowEditSource = !isFeatureEnabled(\n      FeatureFlag.DISABLE_DATASET_SOURCE_EDIT,\n    );\n  }\n\n  onChange() {\n    // Emptying SQL if \"Physical\" radio button is selected\n    // Currently the logic to know whether the source is\n    // physical or virtual is based on whether SQL is empty or not.\n    const { datasourceType, datasource } = this.state;\n    const sql =\n      datasourceType === DATASOURCE_TYPES.physical.key ? '' : datasource.sql;\n    const newDatasource = {\n      ...this.state.datasource,\n      sql,\n      columns: [...this.state.databaseColumns, ...this.state.calculatedColumns],\n    };\n    this.props.onChange(newDatasource, this.state.errors);\n  }\n\n  onChangeEditMode() {\n    this.props.setIsEditing(!this.state.isEditMode);\n    this.setState(prevState => ({ isEditMode: !prevState.isEditMode }));\n  }\n\n  onDatasourceChange(datasource, callback = this.validateAndChange) {\n    this.setState({ datasource }, callback);\n  }\n\n  onDatasourcePropChange(attr, value) {\n    if (value === undefined) return; // if value is undefined do not update state\n    const datasource = { ...this.state.datasource, [attr]: value };\n    this.setState(\n      prevState => ({\n        datasource: { ...prevState.datasource, [attr]: value },\n      }),\n      attr === 'table_name'\n        ? this.onDatasourceChange(datasource, this.tableChangeAndSyncMetadata)\n        : this.onDatasourceChange(datasource, this.validateAndChange),\n    );\n  }\n\n  onDatasourceTypeChange(datasourceType) {\n    this.setState({ datasourceType });\n  }\n\n  setColumns(obj) {\n    // update calculatedColumns or databaseColumns\n    this.setState(obj, this.validateAndChange);\n  }\n\n  validateAndChange() {\n    this.validate(this.onChange);\n  }\n\n  tableChangeAndSyncMetadata() {\n    this.validate(() => {\n      this.syncMetadata();\n      this.onChange();\n    });\n  }\n\n  updateColumns(cols) {\n    const { databaseColumns } = this.state;\n    const databaseColumnNames = cols.map(col => col.name);\n    const currentCols = databaseColumns.reduce(\n      (agg, col) => ({\n        ...agg,\n        [col.column_name]: col,\n      }),\n      {},\n    );\n    const finalColumns = [];\n    const results = {\n      added: [],\n      modified: [],\n      removed: databaseColumns\n        .map(col => col.column_name)\n        .filter(col => !databaseColumnNames.includes(col)),\n    };\n    cols.forEach(col => {\n      const currentCol = currentCols[col.name];\n      if (!currentCol) {\n        // new column\n        finalColumns.push({\n          id: shortid.generate(),\n          column_name: col.name,\n          type: col.type,\n          groupby: true,\n          filterable: true,\n          is_dttm: col.is_dttm,\n        });\n        results.added.push(col.name);\n      } else if (\n        currentCol.type !== col.type ||\n        (!currentCol.is_dttm && col.is_dttm)\n      ) {\n        // modified column\n        finalColumns.push({\n          ...currentCol,\n          type: col.type,\n          is_dttm: currentCol.is_dttm || col.is_dttm,\n        });\n        results.modified.push(col.name);\n      } else {\n        // unchanged\n        finalColumns.push(currentCol);\n      }\n    });\n    if (\n      results.added.length ||\n      results.modified.length ||\n      results.removed.length\n    ) {\n      this.setColumns({ databaseColumns: finalColumns });\n    }\n    return results;\n  }\n\n  syncMetadata() {\n    const { datasource } = this.state;\n    const params = {\n      datasource_type: datasource.type || datasource.datasource_type,\n      database_name:\n        datasource.database.database_name || datasource.database.name,\n      schema_name: datasource.schema,\n      table_name: datasource.table_name\n        ? encodeURIComponent(datasource.table_name)\n        : datasource.table_name,\n    };\n    Object.entries(params).forEach(([key, value]) => {\n      // rison can't encode the undefined value\n      if (value === undefined) {\n        params[key] = null;\n      }\n    });\n    const endpoint = `/datasource/external_metadata_by_name/?q=${rison.encode(\n      params,\n    )}`;\n    this.setState({ metadataLoading: true });\n\n    SupersetClient.get({ endpoint })\n      .then(({ json }) => {\n        const results = this.updateColumns(json);\n        if (results.modified.length) {\n          this.props.addSuccessToast(\n            t('Modified columns: %s', results.modified.join(', ')),\n          );\n        }\n        if (results.removed.length) {\n          this.props.addSuccessToast(\n            t('Removed columns: %s', results.removed.join(', ')),\n          );\n        }\n        if (results.added.length) {\n          this.props.addSuccessToast(\n            t('New columns added: %s', results.added.join(', ')),\n          );\n        }\n        this.props.addSuccessToast(t('Metadata has been synced'));\n        this.setState({ metadataLoading: false });\n      })\n      .catch(response =>\n        getClientErrorObject(response).then(({ error, statusText }) => {\n          this.props.addDangerToast(\n            error || statusText || t('An error has occurred'),\n          );\n          this.setState({ metadataLoading: false });\n        }),\n      );\n  }\n\n  findDuplicates(arr, accessor) {\n    const seen = {};\n    const dups = [];\n    arr.forEach(obj => {\n      const item = accessor(obj);\n      if (item in seen) {\n        dups.push(item);\n      } else {\n        seen[item] = null;\n      }\n    });\n    return dups;\n  }\n\n  validate(callback) {\n    let errors = [];\n    let dups;\n    const { datasource } = this.state;\n\n    // Looking for duplicate column_name\n    dups = this.findDuplicates(datasource.columns, obj => obj.column_name);\n    errors = errors.concat(\n      dups.map(name => t('Column name [%s] is duplicated', name)),\n    );\n\n    // Looking for duplicate metric_name\n    dups = this.findDuplicates(datasource.metrics, obj => obj.metric_name);\n    errors = errors.concat(\n      dups.map(name => t('Metric name [%s] is duplicated', name)),\n    );\n\n    // Making sure calculatedColumns have an expression defined\n    const noFilterCalcCols = this.state.calculatedColumns.filter(\n      col => !col.expression && !col.json,\n    );\n    errors = errors.concat(\n      noFilterCalcCols.map(col =>\n        t('Calculated column [%s] requires an expression', col.column_name),\n      ),\n    );\n\n    this.setState({ errors }, callback);\n  }\n\n  handleTabSelect(activeTabKey) {\n    this.setState({ activeTabKey });\n  }\n\n  sortMetrics(metrics) {\n    return metrics.sort(({ id: a }, { id: b }) => b - a);\n  }\n\n  renderSettingsFieldset() {\n    const { datasource } = this.state;\n    return (\n      <Fieldset\n        title={t('Basic')}\n        item={datasource}\n        onChange={this.onDatasourceChange}\n      >\n        <Field\n          fieldKey=\"description\"\n          label={t('Description')}\n          control={\n            <TextAreaControl\n              language=\"markdown\"\n              offerEditInModal={false}\n              resize=\"vertical\"\n            />\n          }\n        />\n        <Field\n          fieldKey=\"default_endpoint\"\n          label={t('Default URL')}\n          description={t(\n            'Default URL to redirect to when accessing from the dataset list page',\n          )}\n          control={<TextControl controlId=\"default_endpoint\" />}\n        />\n        <Field\n          inline\n          fieldKey=\"filter_select_enabled\"\n          label={t('Autocomplete filters')}\n          description={t('Whether to populate autocomplete filters options')}\n          control={<CheckboxControl />}\n        />\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"fetch_values_predicate\"\n            label={t('Autocomplete query predicate')}\n            description={t(\n              'When using \"Autocomplete filters\", this can be used to improve performance ' +\n                'of the query fetching the values. Use this option to apply a ' +\n                'predicate (WHERE clause) to the query selecting the distinct ' +\n                'values from the table. Typically the intent would be to limit the scan ' +\n                'by applying a relative time filter on a partitioned or indexed time-related field.',\n            )}\n            control={\n              <TextAreaControl\n                language=\"sql\"\n                controlId=\"fetch_values_predicate\"\n                minLines={5}\n                resize=\"vertical\"\n              />\n            }\n          />\n        )}\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"extra\"\n            label={t('Extra')}\n            description={t(\n              'Extra data to specify table metadata. Currently supports ' +\n                'metadata of the format: `{ \"certification\": { \"certified_by\": ' +\n                '\"Data Platform Team\", \"details\": \"This table is the source of truth.\" ' +\n                '}, \"warning_markdown\": \"This is a warning.\" }`.',\n            )}\n            control={\n              <TextAreaControl\n                controlId=\"extra\"\n                language=\"json\"\n                offerEditInModal={false}\n                resize=\"vertical\"\n              />\n            }\n          />\n        )}\n        <OwnersSelector\n          datasource={datasource}\n          onChange={newOwners => {\n            this.onDatasourceChange({ ...datasource, owners: newOwners });\n          }}\n        />\n      </Fieldset>\n    );\n  }\n\n  renderAdvancedFieldset() {\n    const { datasource } = this.state;\n    return (\n      <Fieldset\n        title={t('Advanced')}\n        item={datasource}\n        onChange={this.onDatasourceChange}\n      >\n        <Field\n          fieldKey=\"cache_timeout\"\n          label={t('Cache timeout')}\n          description={t(\n            'The duration of time in seconds before the cache is invalidated. Set to -1 to bypass the cache.',\n          )}\n          control={<TextControl controlId=\"cache_timeout\" />}\n        />\n        <Field\n          fieldKey=\"offset\"\n          label={t('Hours offset')}\n          control={<TextControl controlId=\"offset\" />}\n          description={t(\n            'The number of hours, negative or positive, to shift the time column. This can be used to move UTC time to local time.',\n          )}\n        />\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"template_params\"\n            label={t('Template parameters')}\n            description={t(\n              'A set of parameters that become available in the query using Jinja templating syntax',\n            )}\n            control={<TextControl controlId=\"template_params\" />}\n          />\n        )}\n      </Fieldset>\n    );\n  }\n\n  renderSpatialTab() {\n    const { datasource } = this.state;\n    const { spatials, all_cols: allCols } = datasource;\n    return (\n      <Tabs.TabPane\n        tab={<CollectionTabTitle collection={spatials} title={t('Spatial')} />}\n        key={4}\n      >\n        <CollectionTable\n          tableColumns={['name', 'config']}\n          onChange={this.onDatasourcePropChange.bind(this, 'spatials')}\n          itemGenerator={() => ({\n            name: t('<new spatial>'),\n            type: t('<no type>'),\n            config: null,\n          })}\n          collection={spatials}\n          allowDeletes\n          itemRenderers={{\n            name: (d, onChange) => (\n              <EditableTitle canEdit title={d} onSaveTitle={onChange} />\n            ),\n            config: (v, onChange) => (\n              <SpatialControl value={v} onChange={onChange} choices={allCols} />\n            ),\n          }}\n        />\n      </Tabs.TabPane>\n    );\n  }\n\n  renderSourceFieldset(theme) {\n    const { datasource } = this.state;\n    return (\n      <div>\n        {this.allowEditSource && (\n          <EditLockContainer>\n            <span role=\"button\" tabIndex={0} onClick={this.onChangeEditMode}>\n              {this.state.isEditMode ? (\n                <Icons.LockUnlocked iconColor={theme.colors.grayscale.base} />\n              ) : (\n                <Icons.LockLocked iconColor={theme.colors.grayscale.base} />\n              )}\n            </span>\n            {!this.state.isEditMode && (\n              <div>{t('Click the lock to make changes.')}</div>\n            )}\n            {this.state.isEditMode && (\n              <div>{t('Click the lock to prevent further changes.')}</div>\n            )}\n          </EditLockContainer>\n        )}\n        <div className=\"m-l-10 m-t-20 m-b-10\">\n          {DATASOURCE_TYPES_ARR.map(type => (\n            <Radio\n              key={type.key}\n              value={type.key}\n              inline\n              onChange={this.onDatasourceTypeChange.bind(this, type.key)}\n              checked={this.state.datasourceType === type.key}\n              disabled={!this.state.isEditMode}\n            >\n              {type.label}\n            </Radio>\n          ))}\n        </div>\n        <hr />\n        <Fieldset item={datasource} onChange={this.onDatasourceChange} compact>\n          {this.state.datasourceType === DATASOURCE_TYPES.virtual.key && (\n            <div>\n              {this.state.isSqla && (\n                <>\n                  <Col xs={24} md={12}>\n                    <Field\n                      fieldKey=\"databaseSelector\"\n                      label={t('virtual')}\n                      control={\n                        <div css={{ marginTop: 8 }}>\n                          <DatabaseSelector\n                            db={datasource?.database}\n                            schema={datasource.schema}\n                            onSchemaChange={schema =>\n                              this.state.isEditMode &&\n                              this.onDatasourcePropChange('schema', schema)\n                            }\n                            onDbChange={database =>\n                              this.state.isEditMode &&\n                              this.onDatasourcePropChange('database', database)\n                            }\n                            formMode={false}\n                            handleError={this.props.addDangerToast}\n                            readOnly={!this.state.isEditMode}\n                          />\n                        </div>\n                      }\n                    />\n                    <div css={{ width: 'calc(100% - 34px)', marginTop: -16 }}>\n                      <Field\n                        fieldKey=\"table_name\"\n                        label={t('Dataset name')}\n                        control={\n                          <TextControl\n                            controlId=\"table_name\"\n                            onChange={table => {\n                              this.onDatasourcePropChange('table_name', table);\n                            }}\n                            placeholder={t('Dataset name')}\n                            disabled={!this.state.isEditMode}\n                          />\n                        }\n                      />\n                    </div>\n                  </Col>\n                  <Field\n                    fieldKey=\"sql\"\n                    label={t('SQL')}\n                    description={t(\n                      'When specifying SQL, the datasource acts as a view. ' +\n                        'Superset will use this statement as a subquery while grouping and filtering ' +\n                        'on the generated parent queries.',\n                    )}\n                    control={\n                      <TextAreaControl\n                        language=\"sql\"\n                        offerEditInModal={false}\n                        minLines={20}\n                        maxLines={20}\n                        readOnly={!this.state.isEditMode}\n                        resize=\"both\"\n                      />\n                    }\n                  />\n                </>\n              )}\n            </div>\n          )}\n          {this.state.datasourceType === DATASOURCE_TYPES.physical.key && (\n            <Col xs={24} md={12}>\n              {this.state.isSqla && (\n                <Field\n                  fieldKey=\"tableSelector\"\n                  label={t('Physical')}\n                  control={\n                    <div css={{ marginTop: 8 }}>\n                      <TableSelector\n                        clearable={false}\n                        database={{\n                          ...datasource.database,\n                          database_name:\n                            datasource.database?.database_name ||\n                            datasource.database?.name,\n                        }}\n                        dbId={datasource.database?.id}\n                        handleError={this.props.addDangerToast}\n                        schema={datasource.schema}\n                        sqlLabMode={false}\n                        tableValue={datasource.table_name}\n                        onSchemaChange={\n                          this.state.isEditMode\n                            ? schema =>\n                                this.onDatasourcePropChange('schema', schema)\n                            : undefined\n                        }\n                        onDbChange={\n                          this.state.isEditMode\n                            ? database =>\n                                this.onDatasourcePropChange(\n                                  'database',\n                                  database,\n                                )\n                            : undefined\n                        }\n                        onTableSelectChange={\n                          this.state.isEditMode\n                            ? table =>\n                                this.onDatasourcePropChange('table_name', table)\n                            : undefined\n                        }\n                        readOnly={!this.state.isEditMode}\n                      />\n                    </div>\n                  }\n                  description={t(\n                    'The pointer to a physical table (or view). Keep in mind that the chart is ' +\n                      'associated to this Superset logical table, and this logical table points ' +\n                      'the physical table referenced here.',\n                  )}\n                />\n              )}\n            </Col>\n          )}\n        </Fieldset>\n      </div>\n    );\n  }\n\n  renderErrors() {\n    if (this.state.errors.length > 0) {\n      return (\n        <Alert\n          css={theme => ({ marginBottom: theme.gridUnit * 4 })}\n          type=\"error\"\n          message={\n            <>\n              {this.state.errors.map(err => (\n                <div key={err}>{err}</div>\n              ))}\n            </>\n          }\n        />\n      );\n    }\n    return null;\n  }\n\n  renderMetricCollection() {\n    const { datasource } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics?.length ? this.sortMetrics(metrics) : [];\n    return (\n      <CollectionTable\n        tableColumns={['metric_name', 'verbose_name', 'expression']}\n        sortColumns={['metric_name', 'verbose_name', 'expression']}\n        columnLabels={{\n          metric_name: t('Metric'),\n          verbose_name: t('Label'),\n          expression: t('SQL expression'),\n        }}\n        expandFieldset={\n          <FormContainer>\n            <Fieldset compact>\n              <Field\n                fieldKey=\"description\"\n                label={t('Description')}\n                control={\n                  <TextControl\n                    controlId=\"description\"\n                    placeholder={t('Description')}\n                  />\n                }\n              />\n              <Field\n                fieldKey=\"d3format\"\n                label={t('D3 format')}\n                control={\n                  <TextControl controlId=\"d3format\" placeholder=\"%y/%m/%d\" />\n                }\n              />\n              <Field\n                label={t('Certified by')}\n                fieldKey=\"certified_by\"\n                description={t(\n                  'Person or group that has certified this metric',\n                )}\n                control={\n                  <TextControl\n                    controlId=\"certified_by\"\n                    placeholder={t('Certified by')}\n                  />\n                }\n              />\n              <Field\n                label={t('Certification details')}\n                fieldKey=\"certification_details\"\n                description={t('Details of the certification')}\n                control={\n                  <TextControl\n                    controlId=\"certification_details\"\n                    placeholder={t('Certification details')}\n                  />\n                }\n              />\n              <Field\n                label={t('Warning')}\n                fieldKey=\"warning_markdown\"\n                description={t('Optional warning about use of this metric')}\n                control={\n                  <TextAreaControl\n                    controlId=\"warning_markdown\"\n                    language=\"markdown\"\n                    offerEditInModal={false}\n                    resize=\"vertical\"\n                  />\n                }\n              />\n            </Fieldset>\n          </FormContainer>\n        }\n        collection={sortedMetrics}\n        allowAddItem\n        onChange={this.onDatasourcePropChange.bind(this, 'metrics')}\n        itemGenerator={() => ({\n          metric_name: t('<new metric>'),\n          verbose_name: '',\n          expression: '',\n        })}\n        itemCellProps={{\n          expression: () => ({\n            width: '240px',\n          }),\n        }}\n        itemRenderers={{\n          metric_name: (v, onChange, _, record) => (\n            <FlexRowContainer>\n              {record.is_certified && (\n                <CertifiedBadge\n                  certifiedBy={record.certified_by}\n                  details={record.certification_details}\n                />\n              )}\n              {record.warning_markdown && (\n                <WarningIconWithTooltip\n                  warningMarkdown={record.warning_markdown}\n                />\n              )}\n              <EditableTitle canEdit title={v} onSaveTitle={onChange} />\n            </FlexRowContainer>\n          ),\n          verbose_name: (v, onChange) => (\n            <TextControl canEdit value={v} onChange={onChange} />\n          ),\n          expression: (v, onChange) => (\n            <TextAreaControl\n              canEdit\n              initialValue={v}\n              onChange={onChange}\n              extraClasses={['datasource-sql-expression']}\n              language=\"sql\"\n              offerEditInModal={false}\n              minLines={5}\n              textAreaStyles={{ minWidth: '200px', maxWidth: '450px' }}\n              resize=\"both\"\n            />\n          ),\n          description: (v, onChange, label) => (\n            <StackedField\n              label={label}\n              formElement={<TextControl value={v} onChange={onChange} />}\n            />\n          ),\n          d3format: (v, onChange, label) => (\n            <StackedField\n              label={label}\n              formElement={<TextControl value={v} onChange={onChange} />}\n            />\n          ),\n        }}\n        allowDeletes\n        stickyHeader\n      />\n    );\n  }\n\n  render() {\n    const { datasource, activeTabKey } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics?.length ? this.sortMetrics(metrics) : [];\n    const { theme } = this.props;\n\n    return (\n      <DatasourceContainer>\n        {this.renderErrors()}\n        <Alert\n          css={theme => ({ marginBottom: theme.gridUnit * 4 })}\n          type=\"warning\"\n          message={\n            <>\n              {' '}\n              <strong>{t('Be careful.')} </strong>\n              {t(\n                'Changing these settings will affect all charts using this dataset, including charts owned by other people.',\n              )}\n            </>\n          }\n        />\n        <StyledTableTabs\n          fullWidth={false}\n          id=\"table-tabs\"\n          data-test=\"edit-dataset-tabs\"\n          onChange={this.handleTabSelect}\n          defaultActiveKey={activeTabKey}\n        >\n          <Tabs.TabPane key={0} tab={t('Source')}>\n            {this.renderSourceFieldset(theme)}\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={sortedMetrics}\n                title={t('Metrics')}\n              />\n            }\n            key={1}\n          >\n            {this.renderMetricCollection()}\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={this.state.databaseColumns}\n                title={t('Columns')}\n              />\n            }\n            key={2}\n          >\n            <StyledColumnsTabWrapper>\n              <ColumnButtonWrapper>\n                <StyledButtonWrapper>\n                  <Button\n                    buttonSize=\"small\"\n                    buttonStyle=\"tertiary\"\n                    onClick={this.syncMetadata}\n                    className=\"sync-from-source\"\n                    disabled={this.state.isEditMode}\n                  >\n                    <i className=\"fa fa-database\" />{' '}\n                    {t('Sync columns from source')}\n                  </Button>\n                </StyledButtonWrapper>\n              </ColumnButtonWrapper>\n              <ColumnCollectionTable\n                className=\"columns-table\"\n                columns={this.state.databaseColumns}\n                datasource={datasource}\n                onColumnsChange={databaseColumns =>\n                  this.setColumns({ databaseColumns })\n                }\n                onDatasourceChange={this.onDatasourceChange}\n              />\n              {this.state.metadataLoading && <Loading />}\n            </StyledColumnsTabWrapper>\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={this.state.calculatedColumns}\n                title={t('Calculated columns')}\n              />\n            }\n            key={3}\n          >\n            <StyledColumnsTabWrapper>\n              <ColumnCollectionTable\n                columns={this.state.calculatedColumns}\n                onColumnsChange={calculatedColumns =>\n                  this.setColumns({ calculatedColumns })\n                }\n                onDatasourceChange={this.onDatasourceChange}\n                datasource={datasource}\n                editableColumnName\n                showExpression\n                allowAddItem\n                allowEditDataType\n                itemGenerator={() => ({\n                  column_name: t('<new column>'),\n                  filterable: true,\n                  groupby: true,\n                  expression: t('<enter SQL expression here>'),\n                  __expanded: true,\n                })}\n              />\n            </StyledColumnsTabWrapper>\n          </Tabs.TabPane>\n          <Tabs.TabPane key={4} tab={t('Settings')}>\n            <Row gutter={16}>\n              <Col xs={24} md={12}>\n                <FormContainer>{this.renderSettingsFieldset()}</FormContainer>\n              </Col>\n              <Col xs={24} md={12}>\n                <FormContainer>{this.renderAdvancedFieldset()}</FormContainer>\n              </Col>\n            </Row>\n          </Tabs.TabPane>\n        </StyledTableTabs>\n      </DatasourceContainer>\n    );\n  }\n}\n\nDatasourceEditor.defaultProps = defaultProps;\nDatasourceEditor.propTypes = propTypes;\n\nconst DataSourceComponent = withTheme(DatasourceEditor);\n\nexport default withToasts(DataSourceComponent);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}