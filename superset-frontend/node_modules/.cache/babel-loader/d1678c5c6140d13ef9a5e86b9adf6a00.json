{"ast":null,"code":"import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { InputNumber } from 'src/components/Input';\nimport { t, styled } from '@superset-ui/core';\n\nimport ControlHeader from 'src/explore/components/ControlHeader';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledDiv = styled.div`\n  display: flex;\n`;\nconst MinInput = styled(InputNumber)`\n  flex: 1;\n  margin-right: ${(_ref) => {let { theme } = _ref;return theme.gridUnit;}}px;\n`;\nconst MaxInput = styled(InputNumber)`\n  flex: 1;\n  margin-left: ${(_ref2) => {let { theme } = _ref2;return theme.gridUnit;}}px;\n`;\nconst parseNumber = (value) => value === null || Number.isNaN(Number(value)) ? null : Number(value);\nexport default function BoundsControl(_ref3) {let { onChange = () => {}, value = [null, null], ...props } = _ref3;\n  const [minMax, setMinMax] = useState([\n  parseNumber(value[0]),\n  parseNumber(value[1])]);\n\n  const min = value[0];\n  const max = value[1];\n  const debouncedOnChange = useRef(_debounce(onChange, 300)).current;\n  const update = (mm) => {\n    setMinMax(mm);\n    debouncedOnChange([\n    mm[0] === undefined ? null : mm[0],\n    mm[1] === undefined ? null : mm[1]]);\n\n  };\n  useEffect(() => {\n    setMinMax([parseNumber(min), parseNumber(max)]);\n  }, [min, max]);\n  const onMinChange = (value) => {\n    update([parseNumber(value), minMax[1]]);\n  };\n  const onMaxChange = (value) => {\n    update([minMax[0], parseNumber(value)]);\n  };\n  return ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(ControlHeader, props),\n  ___EmotionJSX(StyledDiv, null,\n  ___EmotionJSX(MinInput, { \"data-test\": \"min-bound\", placeholder: t('Min')\n    // emit (string | number | undefined)\n    , onChange: onMinChange\n    // accept (number | undefined)\n    , value: minMax[0] === null ? undefined : minMax[0] }),\n  ___EmotionJSX(MaxInput, { \"data-test\": \"max-bound\", placeholder: t('Max')\n    // emit (number | string | undefined)\n    , onChange: onMaxChange\n    // accept (number | undefined)\n    , value: minMax[1] === null ? undefined : minMax[1] })));\n\n\n}__signature__(BoundsControl, \"useState{[minMax, setMinMax]([\\n        parseNumber(value[0]),\\n        parseNumber(value[1]),\\n    ])}\\nuseRef{}\\nuseEffect{}\");;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledDiv, \"StyledDiv\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(MinInput, \"MinInput\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(MaxInput, \"MaxInput\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(parseNumber, \"parseNumber\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");reactHotLoader.register(BoundsControl, \"BoundsControl\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["React","useEffect","useRef","useState","InputNumber","t","styled","ControlHeader","StyledDiv","div","MinInput","theme","gridUnit","MaxInput","parseNumber","value","Number","isNaN","BoundsControl","onChange","props","minMax","setMinMax","min","max","debouncedOnChange","current","update","mm","undefined","onMinChange","onMaxChange"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/BoundsControl.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { InputNumber } from 'src/components/Input';\nimport { t, styled } from '@superset-ui/core';\nimport { debounce } from 'lodash';\nimport ControlHeader from 'src/explore/components/ControlHeader';\n\ntype ValueType = (number | null)[];\n\nexport type BoundsControlProps = {\n  onChange?: (value: ValueType) => void;\n  value?: ValueType;\n};\n\nconst StyledDiv = styled.div`\n  display: flex;\n`;\n\nconst MinInput = styled(InputNumber)`\n  flex: 1;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst MaxInput = styled(InputNumber)`\n  flex: 1;\n  margin-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst parseNumber = (value: undefined | number | string | null) =>\n  value === null || Number.isNaN(Number(value)) ? null : Number(value);\n\nexport default function BoundsControl({\n  onChange = () => {},\n  value = [null, null],\n  ...props\n}: BoundsControlProps) {\n  const [minMax, setMinMax] = useState<ValueType>([\n    parseNumber(value[0]),\n    parseNumber(value[1]),\n  ]);\n  const min = value[0];\n  const max = value[1];\n  const debouncedOnChange = useRef(debounce(onChange, 300)).current;\n\n  const update = (mm: ValueType) => {\n    setMinMax(mm);\n    debouncedOnChange([\n      mm[0] === undefined ? null : mm[0],\n      mm[1] === undefined ? null : mm[1],\n    ]);\n  };\n\n  useEffect(() => {\n    setMinMax([parseNumber(min), parseNumber(max)]);\n  }, [min, max]);\n\n  const onMinChange = (value: number | string | undefined) => {\n    update([parseNumber(value), minMax[1]]);\n  };\n\n  const onMaxChange = (value: number | string | undefined) => {\n    update([minMax[0], parseNumber(value)]);\n  };\n\n  return (\n    <div>\n      <ControlHeader {...props} />\n      <StyledDiv>\n        <MinInput\n          data-test=\"min-bound\"\n          placeholder={t('Min')}\n          // emit (string | number | undefined)\n          onChange={onMinChange}\n          // accept (number | undefined)\n          value={minMax[0] === null ? undefined : minMax[0]}\n        />\n        <MaxInput\n          data-test=\"max-bound\"\n          placeholder={t('Max')}\n          // emit (number | string | undefined)\n          onChange={onMaxChange}\n          // accept (number | undefined)\n          value={minMax[1] === null ? undefined : minMax[1]}\n        />\n      </StyledDiv>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}