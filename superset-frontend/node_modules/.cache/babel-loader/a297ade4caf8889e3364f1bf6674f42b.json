{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { css, t, styled } from '@superset-ui/core';\n\nimport { removeDataPreview, removeTables } from 'src/SqlLab/actions/sqlLab';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { IconTooltip } from 'src/components/IconTooltip';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Loading from 'src/components/Loading';\nimport ColumnElement from '../ColumnElement';\nimport ShowSQL from '../ShowSQL';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledSpan = styled.span`\n  color: ${(_ref) => {let { theme } = _ref;return theme.colors.primary.dark1;}};\n  &:hover {\n    color: ${(_ref2) => {let { theme } = _ref2;return theme.colors.primary.dark2;}};\n  }\n  cursor: pointer;\n`;\nconst Fade = styled.div`\n  transition: all ${(_ref3) => {let { theme } = _ref3;return theme.transitionTiming;}}s;\n  opacity: ${(props) => props.hovered ? 1 : 0};\n`;\nconst StyledCollapsePanel = styled(Collapse.Panel)`\n  ${(_ref4) => {let { theme } = _ref4;return css`\n    & {\n      .ws-el-controls {\n        margin-right: ${-theme.gridUnit}px;\n        display: flex;\n      }\n\n      .header-container {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        width: 100%;\n\n        .table-name {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: ${theme.typography.sizes.l}px;\n          flex: 1;\n        }\n\n        .header-right-side {\n          margin-left: auto;\n          display: flex;\n          align-items: center;\n          margin-right: ${theme.gridUnit * 8}px;\n        }\n      }\n    }\n  `;}}\n`;var _ref8 = process.env.NODE_ENV === \"production\" ? { name: \"1hs1mx1\", styles: \"padding-top:6px\" } : { name: \"14hmmm7-metadata\", styles: \"padding-top:6px;label:metadata;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1RhYmxlRWxlbWVudC9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUxrSSIsImZpbGUiOiIvVXNlcnMvYm9nZGFua3lyeWxpdWsvY29kZS9vcGVuc291cmNlL3N1cGVyc2V0L3N1cGVyc2V0LWZyb250ZW5kL3NyYy9TcWxMYWIvY29tcG9uZW50cy9UYWJsZUVsZW1lbnQvaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBDb2xsYXBzZSBmcm9tICdzcmMvY29tcG9uZW50cy9Db2xsYXBzZSc7XG5pbXBvcnQgQ2FyZCBmcm9tICdzcmMvY29tcG9uZW50cy9DYXJkJztcbmltcG9ydCBCdXR0b25Hcm91cCBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b25Hcm91cCc7XG5pbXBvcnQgeyBjc3MsIHQsIHN0eWxlZCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHJlbW92ZURhdGFQcmV2aWV3LCByZW1vdmVUYWJsZXMgfSBmcm9tICdzcmMvU3FsTGFiL2FjdGlvbnMvc3FsTGFiJztcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICdzcmMvY29tcG9uZW50cy9Ub29sdGlwJztcbmltcG9ydCBDb3B5VG9DbGlwYm9hcmQgZnJvbSAnc3JjL2NvbXBvbmVudHMvQ29weVRvQ2xpcGJvYXJkJztcbmltcG9ydCB7IEljb25Ub29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvblRvb2x0aXAnO1xuaW1wb3J0IE1vZGFsVHJpZ2dlciBmcm9tICdzcmMvY29tcG9uZW50cy9Nb2RhbFRyaWdnZXInO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnc3JjL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgQ29sdW1uRWxlbWVudCBmcm9tICcuLi9Db2x1bW5FbGVtZW50JztcbmltcG9ydCBTaG93U1FMIGZyb20gJy4uL1Nob3dTUUwnO1xuY29uc3QgU3R5bGVkU3BhbiA9IHN0eWxlZC5zcGFuIGBcbiAgY29sb3I6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuY29sb3JzLnByaW1hcnkuZGFyazF9O1xuICAmOmhvdmVyIHtcbiAgICBjb2xvcjogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvcnMucHJpbWFyeS5kYXJrMn07XG4gIH1cbiAgY3Vyc29yOiBwb2ludGVyO1xuYDtcbmNvbnN0IEZhZGUgPSBzdHlsZWQuZGl2IGBcbiAgdHJhbnNpdGlvbjogYWxsICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHJhbnNpdGlvblRpbWluZ31zO1xuICBvcGFjaXR5OiAkeyhwcm9wcykgPT4gKHByb3BzLmhvdmVyZWQgPyAxIDogMCl9O1xuYDtcbmNvbnN0IFN0eWxlZENvbGxhcHNlUGFuZWwgPSBzdHlsZWQoQ29sbGFwc2UuUGFuZWwpIGBcbiAgJHsoeyB0aGVtZSB9KSA9PiBjc3MgYFxuICAgICYge1xuICAgICAgLndzLWVsLWNvbnRyb2xzIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAkey10aGVtZS5ncmlkVW5pdH1weDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIH1cblxuICAgICAgLmhlYWRlci1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB3aWR0aDogMTAwJTtcblxuICAgICAgICAudGFibGUtbmFtZSB7XG4gICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICAgIGZvbnQtc2l6ZTogJHt0aGVtZS50eXBvZ3JhcGh5LnNpemVzLmx9cHg7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5oZWFkZXItcmlnaHQtc2lkZSB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogJHt0aGVtZS5ncmlkVW5pdCAqIDh9cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIGB9XG5gO1xuY29uc3QgVGFibGVFbGVtZW50ID0gKHsgdGFibGUsIC4uLnByb3BzIH0pID0+IHtcbiAgICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gICAgY29uc3QgW3NvcnRDb2x1bW5zLCBzZXRTb3J0Q29sdW1uc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2hvdmVyZWQsIHNldEhvdmVyZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHRhYmxlTmFtZVJlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCBzZXRIb3ZlciA9IChob3ZlcmVkKSA9PiB7XG4gICAgICAgIGRlYm91bmNlKCgpID0+IHNldEhvdmVyZWQoaG92ZXJlZCksIDEwMCkoKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhYmxlID0gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaChyZW1vdmVEYXRhUHJldmlldyh0YWJsZSkpO1xuICAgICAgICBkaXNwYXRjaChyZW1vdmVUYWJsZXMoW3RhYmxlXSkpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlU29ydENvbHVtbnMgPSAoKSA9PiB7XG4gICAgICAgIHNldFNvcnRDb2x1bW5zKHByZXZTdGF0ZSA9PiAhcHJldlN0YXRlKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlcldlbGwgPSAoKSA9PiB7XG4gICAgICAgIGxldCBwYXJ0aXRpb25zO1xuICAgICAgICBsZXQgbWV0YWRhdGE7XG4gICAgICAgIGlmICh0YWJsZS5wYXJ0aXRpb25zKSB7XG4gICAgICAgICAgICBsZXQgcGFydGl0aW9uUXVlcnk7XG4gICAgICAgICAgICBsZXQgcGFydGl0aW9uQ2xpcEJvYXJkO1xuICAgICAgICAgICAgaWYgKHRhYmxlLnBhcnRpdGlvbnMucGFydGl0aW9uUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAoeyBwYXJ0aXRpb25RdWVyeSB9ID0gdGFibGUucGFydGl0aW9ucyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0KCdDb3B5IHBhcnRpdGlvbiBxdWVyeSB0byBjbGlwYm9hcmQnKTtcbiAgICAgICAgICAgICAgICBwYXJ0aXRpb25DbGlwQm9hcmQgPSAoPENvcHlUb0NsaXBib2FyZCB0ZXh0PXtwYXJ0aXRpb25RdWVyeX0gc2hvdWxkU2hvd1RleHQ9e2ZhbHNlfSB0b29sdGlwVGV4dD17dHR9IGNvcHlOb2RlPXs8aSBjbGFzc05hbWU9XCJmYSBmYS1jbGlwYm9hcmRcIi8+fS8+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxhdGVzdCA9IE9iamVjdC5lbnRyaWVzKHRhYmxlLnBhcnRpdGlvbnM/LmxhdGVzdCB8fCBbXSlcbiAgICAgICAgICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09JHt2YWx1ZX1gKVxuICAgICAgICAgICAgICAgIC5qb2luKCcvJyk7XG4gICAgICAgICAgICBwYXJ0aXRpb25zID0gKDxkaXY+XG4gICAgICAgICAgPHNtYWxsPlxuICAgICAgICAgICAge3QoJ2xhdGVzdCBwYXJ0aXRpb246Jyl9IHtsYXRlc3R9XG4gICAgICAgICAgPC9zbWFsbD57JyAnfVxuICAgICAgICAgIHtwYXJ0aXRpb25DbGlwQm9hcmR9XG4gICAgICAgIDwvZGl2Pik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhYmxlLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICBtZXRhZGF0YSA9IE9iamVjdC5lbnRyaWVzKHRhYmxlLm1ldGFkYXRhKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKDxkaXY+XG4gICAgICAgICAgPHNtYWxsPlxuICAgICAgICAgICAgPHN0cm9uZz57a2V5fTo8L3N0cm9uZz4ge3ZhbHVlfVxuICAgICAgICAgIDwvc21hbGw+XG4gICAgICAgIDwvZGl2PikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcGFydGl0aW9ucyAmJiAoIW1ldGFkYXRhIHx8ICFtZXRhZGF0YS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAvLyBoaWRlIHBhcnRpdGlvbiBhbmQgbWV0YWRhdGEgY2FyZCB2aWV3XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDxDYXJkIHNpemU9XCJzbWFsbFwiPlxuICAgICAgICB7cGFydGl0aW9uc31cbiAgICAgICAge21ldGFkYXRhfVxuICAgICAgPC9DYXJkPik7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJDb250cm9scyA9ICgpID0+IHtcbiAgICAgICAgbGV0IGtleUxpbms7XG4gICAgICAgIGNvbnN0IEtFWVNfRk9SX1RBQkxFX1RFWFQgPSB0KCdLZXlzIGZvciB0YWJsZScpO1xuICAgICAgICBpZiAodGFibGU/LmluZGV4ZXM/Lmxlbmd0aCkge1xuICAgICAgICAgICAga2V5TGluayA9ICg8TW9kYWxUcmlnZ2VyIG1vZGFsVGl0bGU9e2Ake0tFWVNfRk9SX1RBQkxFX1RFWFR9ICR7dGFibGUubmFtZX1gfSBtb2RhbEJvZHk9e3RhYmxlLmluZGV4ZXMubWFwKChpeCwgaSkgPT4gKDxwcmUga2V5PXtpfT57SlNPTi5zdHJpbmdpZnkoaXgsIG51bGwsICcgICcpfTwvcHJlPikpfSB0cmlnZ2VyTm9kZT17PEljb25Ub29sdGlwIGNsYXNzTmFtZT1cImZhIGZhLWtleSBwdWxsLWxlZnQgbS1sLTJcIiB0b29sdGlwPXt0KCdWaWV3IGtleXMgJiBpbmRleGVzICglcyknLCB0YWJsZS5pbmRleGVzLmxlbmd0aCl9Lz59Lz4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoPEJ1dHRvbkdyb3VwIGNsYXNzTmFtZT1cIndzLWVsLWNvbnRyb2xzXCI+XG4gICAgICAgIHtrZXlMaW5rfVxuICAgICAgICA8SWNvblRvb2x0aXAgY2xhc3NOYW1lPXtgZmEgZmEtc29ydC0ke3NvcnRDb2x1bW5zID8gJ251bWVyaWMnIDogJ2FscGhhJ30tYXNjIGAgK1xuICAgICAgICAgICAgICAgICdwdWxsLWxlZnQgc29ydC1jb2xzIG0tbC0yIHBvaW50ZXInfSBvbkNsaWNrPXt0b2dnbGVTb3J0Q29sdW1uc30gdG9vbHRpcD17c29ydENvbHVtbnNcbiAgICAgICAgICAgICAgICA/IHQoJ09yaWdpbmFsIHRhYmxlIGNvbHVtbiBvcmRlcicpXG4gICAgICAgICAgICAgICAgOiB0KCdTb3J0IGNvbHVtbnMgYWxwaGFiZXRpY2FsbHknKX0vPlxuICAgICAgICB7dGFibGUuc2VsZWN0U3RhciAmJiAoPENvcHlUb0NsaXBib2FyZCBjb3B5Tm9kZT17PEljb25Ub29sdGlwIGFyaWEtbGFiZWw9XCJDb3B5XCIgdG9vbHRpcD17dCgnQ29weSBTRUxFQ1Qgc3RhdGVtZW50IHRvIHRoZSBjbGlwYm9hcmQnKX0+XG4gICAgICAgICAgICAgICAgPGkgYXJpYS1oaWRkZW4gY2xhc3NOYW1lPVwiZmEgZmEtY2xpcGJvYXJkIHB1bGwtbGVmdCBtLWwtMlwiLz5cbiAgICAgICAgICAgICAgPC9JY29uVG9vbHRpcD59IHRleHQ9e3RhYmxlLnNlbGVjdFN0YXJ9IHNob3VsZFNob3dUZXh0PXtmYWxzZX0vPil9XG4gICAgICAgIHt0YWJsZS52aWV3ICYmICg8U2hvd1NRTCBzcWw9e3RhYmxlLnZpZXd9IHRvb2x0aXBUZXh0PXt0KCdTaG93IENSRUFURSBWSUVXIHN0YXRlbWVudCcpfSB0aXRsZT17dCgnQ1JFQVRFIFZJRVcgc3RhdGVtZW50Jyl9Lz4pfVxuICAgICAgICA8SWNvblRvb2x0aXAgY2xhc3NOYW1lPVwiZmEgZmEtdGltZXMgdGFibGUtcmVtb3ZlIHB1bGwtbGVmdCBtLWwtMiBwb2ludGVyXCIgb25DbGljaz17cmVtb3ZlVGFibGV9IHRvb2x0aXA9e3QoJ1JlbW92ZSB0YWJsZSBwcmV2aWV3Jyl9Lz5cbiAgICAgIDwvQnV0dG9uR3JvdXA+KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlckhlYWRlciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRhYmxlTmFtZVJlZi5jdXJyZW50O1xuICAgICAgICBsZXQgdHJpZ2dlciA9IFtdO1xuICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Lm9mZnNldFdpZHRoIDwgZWxlbWVudC5zY3JvbGxXaWR0aCkge1xuICAgICAgICAgICAgdHJpZ2dlciA9IFsnaG92ZXInXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPVwiY2xlYXJmaXggaGVhZGVyLWNvbnRhaW5lclwiIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0SG92ZXIodHJ1ZSl9IG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0SG92ZXIoZmFsc2UpfT5cbiAgICAgICAgPFRvb2x0aXAgaWQ9XCJjb3B5LXRvLWNsaXBib2FyZC10b29sdGlwXCIgc3R5bGU9e3sgY3Vyc29yOiAncG9pbnRlcicgfX0gdGl0bGU9e3RhYmxlLm5hbWV9IHRyaWdnZXI9e3RyaWdnZXJ9PlxuICAgICAgICAgIDxTdHlsZWRTcGFuIGRhdGEtdGVzdD1cImNvbGxhcHNlXCIgcmVmPXt0YWJsZU5hbWVSZWZ9IGNsYXNzTmFtZT1cInRhYmxlLW5hbWVcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+e3RhYmxlLm5hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgPC9TdHlsZWRTcGFuPlxuICAgICAgICA8L1Rvb2x0aXA+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdWxsLXJpZ2h0IGhlYWRlci1yaWdodC1zaWRlXCI+XG4gICAgICAgICAge3RhYmxlLmlzTWV0YWRhdGFMb2FkaW5nIHx8IHRhYmxlLmlzRXh0cmFNZXRhZGF0YUxvYWRpbmcgPyAoPExvYWRpbmcgcG9zaXRpb249XCJpbmxpbmVcIi8+KSA6ICg8RmFkZSBkYXRhLXRlc3Q9XCJmYWRlXCIgaG92ZXJlZD17aG92ZXJlZH0gb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT5cbiAgICAgICAgICAgICAge3JlbmRlckNvbnRyb2xzKCl9XG4gICAgICAgICAgICA8L0ZhZGU+KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj4pO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyQm9keSA9ICgpID0+IHtcbiAgICAgICAgbGV0IGNvbHM7XG4gICAgICAgIGlmICh0YWJsZS5jb2x1bW5zKSB7XG4gICAgICAgICAgICBjb2xzID0gdGFibGUuY29sdW1ucy5zbGljZSgpO1xuICAgICAgICAgICAgaWYgKHNvcnRDb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgY29scy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbEEgPSBhLm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sQiA9IGIubmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sQSA8IGNvbEIgPyAtMSA6IGNvbEEgPiBjb2xCID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSAoPGRpdiBkYXRhLXRlc3Q9XCJ0YWJsZS1lbGVtZW50XCIgb25Nb3VzZUVudGVyPXsoKSA9PiBzZXRIb3Zlcih0cnVlKX0gb25Nb3VzZUxlYXZlPXsoKSA9PiBzZXRIb3ZlcihmYWxzZSl9IGNzcz17eyBwYWRkaW5nVG9wOiA2IH19PlxuICAgICAgICB7cmVuZGVyV2VsbCgpfVxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtjb2xzPy5tYXAoY29sID0+ICg8Q29sdW1uRWxlbWVudCBjb2x1bW49e2NvbH0ga2V5PXtjb2wubmFtZX0vPikpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2Pik7XG4gICAgICAgIHJldHVybiBtZXRhZGF0YTtcbiAgICB9O1xuICAgIHJldHVybiAoPFN0eWxlZENvbGxhcHNlUGFuZWwgey4uLnByb3BzfSBrZXk9e3RhYmxlLmlkfSBoZWFkZXI9e3JlbmRlckhlYWRlcigpfSBjbGFzc05hbWU9XCJUYWJsZUVsZW1lbnRcIiBmb3JjZVJlbmRlcj5cbiAgICAgIHtyZW5kZXJCb2R5KCl9XG4gICAgPC9TdHlsZWRDb2xsYXBzZVBhbmVsPik7XG59O1xuZXhwb3J0IGRlZmF1bHQgVGFibGVFbGVtZW50O1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nconst TableElement = (_ref5) => {let { table, ...props } = _ref5;\n  const dispatch = useDispatch();\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const tableNameRef = useRef(null);\n  const setHover = (hovered) => {\n    _debounce(() => setHovered(hovered), 100)();\n  };\n  const removeTable = () => {\n    dispatch(removeDataPreview(table));\n    dispatch(removeTables([table]));\n  };\n  const toggleSortColumns = () => {\n    setSortColumns((prevState) => !prevState);\n  };\n  const renderWell = () => {\n    let partitions;\n    let metadata;\n    if (table.partitions) {var _table$partitions;\n      let partitionQuery;\n      let partitionClipBoard;\n      if (table.partitions.partitionQuery) {\n        ({ partitionQuery } = table.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = ___EmotionJSX(CopyToClipboard, { text: partitionQuery, shouldShowText: false, tooltipText: tt, copyNode: ___EmotionJSX(\"i\", { className: \"fa fa-clipboard\" }) });\n      }\n      const latest = Object.entries(((_table$partitions = table.partitions) == null ? void 0 : _table$partitions.latest) || []).\n      map((_ref6) => {let [key, value] = _ref6;return `${key}=${value}`;}).\n      join('/');\n      partitions = ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(\"small\", null,\n      t('latest partition:'), \" \", latest),\n      ' ',\n      partitionClipBoard);\n\n    }\n    if (table.metadata) {\n      metadata = Object.entries(table.metadata).map((_ref7) => {let [key, value] = _ref7;return ___EmotionJSX(\"div\", null,\n        ___EmotionJSX(\"small\", null,\n        ___EmotionJSX(\"strong\", null, key, \":\"), \" \", value));});\n\n\n    }\n    if (!partitions && (!metadata || !metadata.length)) {\n      // hide partition and metadata card view\n      return null;\n    }\n    return ___EmotionJSX(Card, { size: \"small\" },\n    partitions,\n    metadata);\n\n  };\n  const renderControls = () => {var _table$indexes;\n    let keyLink;\n    const KEYS_FOR_TABLE_TEXT = t('Keys for table');\n    if (table != null && (_table$indexes = table.indexes) != null && _table$indexes.length) {\n      keyLink = ___EmotionJSX(ModalTrigger, { modalTitle: `${KEYS_FOR_TABLE_TEXT} ${table.name}`, modalBody: table.indexes.map((ix, i) => ___EmotionJSX(\"pre\", { key: i }, JSON.stringify(ix, null, '  '))), triggerNode: ___EmotionJSX(IconTooltip, { className: \"fa fa-key pull-left m-l-2\", tooltip: t('View keys & indexes (%s)', table.indexes.length) }) });\n    }\n    return ___EmotionJSX(ButtonGroup, { className: \"ws-el-controls\" },\n    keyLink,\n    ___EmotionJSX(IconTooltip, { className: `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n      'pull-left sort-cols m-l-2 pointer', onClick: toggleSortColumns, tooltip: sortColumns ?\n      t('Original table column order') :\n      t('Sort columns alphabetically') }),\n    table.selectStar && ___EmotionJSX(CopyToClipboard, { copyNode: ___EmotionJSX(IconTooltip, { \"aria-label\": \"Copy\", tooltip: t('Copy SELECT statement to the clipboard') },\n      ___EmotionJSX(\"i\", { \"aria-hidden\": true, className: \"fa fa-clipboard pull-left m-l-2\" })),\n      text: table.selectStar, shouldShowText: false }),\n    table.view && ___EmotionJSX(ShowSQL, { sql: table.view, tooltipText: t('Show CREATE VIEW statement'), title: t('CREATE VIEW statement') }),\n    ___EmotionJSX(IconTooltip, { className: \"fa fa-times table-remove pull-left m-l-2 pointer\", onClick: removeTable, tooltip: t('Remove table preview') }));\n\n  };\n  const renderHeader = () => {\n    const element = tableNameRef.current;\n    let trigger = [];\n    if (element && element.offsetWidth < element.scrollWidth) {\n      trigger = ['hover'];\n    }\n    return ___EmotionJSX(\"div\", { className: \"clearfix header-container\", onMouseEnter: () => setHover(true), onMouseLeave: () => setHover(false) },\n    ___EmotionJSX(Tooltip, { id: \"copy-to-clipboard-tooltip\", style: { cursor: 'pointer' }, title: table.name, trigger: trigger },\n    ___EmotionJSX(StyledSpan, { \"data-test\": \"collapse\", ref: tableNameRef, className: \"table-name\" },\n    ___EmotionJSX(\"strong\", null, table.name))),\n\n\n\n    ___EmotionJSX(\"div\", { className: \"pull-right header-right-side\" },\n    table.isMetadataLoading || table.isExtraMetadataLoading ? ___EmotionJSX(Loading, { position: \"inline\" }) : ___EmotionJSX(Fade, { \"data-test\": \"fade\", hovered: hovered, onClick: (e) => e.stopPropagation() },\n    renderControls())));\n\n\n\n  };\n  const renderBody = () => {var _cols;\n    let cols;\n    if (table.columns) {\n      cols = table.columns.slice();\n      if (sortColumns) {\n        cols.sort((a, b) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          return colA < colB ? -1 : colA > colB ? 1 : 0;\n        });\n      }\n    }\n    const metadata = ___EmotionJSX(\"div\", { \"data-test\": \"table-element\", onMouseEnter: () => setHover(true), onMouseLeave: () => setHover(false), css: _ref8 },\n    renderWell(),\n    ___EmotionJSX(\"div\", null, (_cols =\n    cols) == null ? void 0 : _cols.map((col) => ___EmotionJSX(ColumnElement, { column: col, key: col.name }))));\n\n\n    return metadata;\n  };\n  return ___EmotionJSX(StyledCollapsePanel, _extends({}, props, { key: table.id, header: renderHeader(), className: \"TableElement\", forceRender: true }),\n  renderBody());\n\n};__signature__(TableElement, \"useDispatch{dispatch}\\nuseState{[sortColumns, setSortColumns](false)}\\nuseState{[hovered, setHovered](false)}\\nuseRef{tableNameRef}\", () => [useDispatch]);const _default =\nTableElement;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledSpan, \"StyledSpan\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(Fade, \"Fade\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(StyledCollapsePanel, \"StyledCollapsePanel\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(TableElement, \"TableElement\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["React","useState","useRef","useDispatch","Collapse","Card","ButtonGroup","css","t","styled","removeDataPreview","removeTables","Tooltip","CopyToClipboard","IconTooltip","ModalTrigger","Loading","ColumnElement","ShowSQL","StyledSpan","span","theme","colors","primary","dark1","dark2","Fade","div","transitionTiming","props","hovered","StyledCollapsePanel","Panel","gridUnit","typography","sizes","l","TableElement","table","dispatch","sortColumns","setSortColumns","setHovered","tableNameRef","setHover","removeTable","toggleSortColumns","prevState","renderWell","partitions","metadata","partitionQuery","partitionClipBoard","tt","latest","Object","entries","map","key","value","join","length","renderControls","keyLink","KEYS_FOR_TABLE_TEXT","indexes","name","ix","i","JSON","stringify","selectStar","view","renderHeader","element","current","trigger","offsetWidth","scrollWidth","cursor","isMetadataLoading","isExtraMetadataLoading","e","stopPropagation","renderBody","cols","columns","slice","sort","a","b","colA","toUpperCase","colB","col","id"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/components/TableElement/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Collapse from 'src/components/Collapse';\nimport Card from 'src/components/Card';\nimport ButtonGroup from 'src/components/ButtonGroup';\nimport { css, t, styled } from '@superset-ui/core';\nimport { debounce } from 'lodash';\n\nimport { removeDataPreview, removeTables } from 'src/SqlLab/actions/sqlLab';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { IconTooltip } from 'src/components/IconTooltip';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Loading from 'src/components/Loading';\nimport ColumnElement, { ColumnKeyTypeType } from '../ColumnElement';\nimport ShowSQL from '../ShowSQL';\n\ninterface Column {\n  name: string;\n  keys?: { type: ColumnKeyTypeType }[];\n  type: string;\n}\n\nexport interface Table {\n  id: string;\n  name: string;\n  partitions?: {\n    partitionQuery: string;\n    latest: object[];\n  };\n  metadata?: Record<string, string>;\n  indexes?: object[];\n  selectStar?: string;\n  view?: string;\n  isMetadataLoading: boolean;\n  isExtraMetadataLoading: boolean;\n  columns: Column[];\n}\n\nexport interface TableElementProps {\n  table: Table;\n}\n\nconst StyledSpan = styled.span`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  &:hover {\n    color: ${({ theme }) => theme.colors.primary.dark2};\n  }\n  cursor: pointer;\n`;\n\nconst Fade = styled.div`\n  transition: all ${({ theme }) => theme.transitionTiming}s;\n  opacity: ${(props: { hovered: boolean }) => (props.hovered ? 1 : 0)};\n`;\n\nconst StyledCollapsePanel = styled(Collapse.Panel)`\n  ${({ theme }) => css`\n    & {\n      .ws-el-controls {\n        margin-right: ${-theme.gridUnit}px;\n        display: flex;\n      }\n\n      .header-container {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        width: 100%;\n\n        .table-name {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: ${theme.typography.sizes.l}px;\n          flex: 1;\n        }\n\n        .header-right-side {\n          margin-left: auto;\n          display: flex;\n          align-items: center;\n          margin-right: ${theme.gridUnit * 8}px;\n        }\n      }\n    }\n  `}\n`;\n\nconst TableElement = ({ table, ...props }: TableElementProps) => {\n  const dispatch = useDispatch();\n\n  const [sortColumns, setSortColumns] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const tableNameRef = useRef<HTMLInputElement>(null);\n\n  const setHover = (hovered: boolean) => {\n    debounce(() => setHovered(hovered), 100)();\n  };\n\n  const removeTable = () => {\n    dispatch(removeDataPreview(table));\n    dispatch(removeTables([table]));\n  };\n\n  const toggleSortColumns = () => {\n    setSortColumns(prevState => !prevState);\n  };\n\n  const renderWell = () => {\n    let partitions;\n    let metadata;\n    if (table.partitions) {\n      let partitionQuery;\n      let partitionClipBoard;\n      if (table.partitions.partitionQuery) {\n        ({ partitionQuery } = table.partitions);\n        const tt = t('Copy partition query to clipboard');\n        partitionClipBoard = (\n          <CopyToClipboard\n            text={partitionQuery}\n            shouldShowText={false}\n            tooltipText={tt}\n            copyNode={<i className=\"fa fa-clipboard\" />}\n          />\n        );\n      }\n      const latest = Object.entries(table.partitions?.latest || [])\n        .map(([key, value]) => `${key}=${value}`)\n        .join('/');\n\n      partitions = (\n        <div>\n          <small>\n            {t('latest partition:')} {latest}\n          </small>{' '}\n          {partitionClipBoard}\n        </div>\n      );\n    }\n\n    if (table.metadata) {\n      metadata = Object.entries(table.metadata).map(([key, value]) => (\n        <div>\n          <small>\n            <strong>{key}:</strong> {value}\n          </small>\n        </div>\n      ));\n    }\n\n    if (!partitions && (!metadata || !metadata.length)) {\n      // hide partition and metadata card view\n      return null;\n    }\n\n    return (\n      <Card size=\"small\">\n        {partitions}\n        {metadata}\n      </Card>\n    );\n  };\n\n  const renderControls = () => {\n    let keyLink;\n    const KEYS_FOR_TABLE_TEXT = t('Keys for table');\n    if (table?.indexes?.length) {\n      keyLink = (\n        <ModalTrigger\n          modalTitle={`${KEYS_FOR_TABLE_TEXT} ${table.name}`}\n          modalBody={table.indexes.map((ix, i) => (\n            <pre key={i}>{JSON.stringify(ix, null, '  ')}</pre>\n          ))}\n          triggerNode={\n            <IconTooltip\n              className=\"fa fa-key pull-left m-l-2\"\n              tooltip={t('View keys & indexes (%s)', table.indexes.length)}\n            />\n          }\n        />\n      );\n    }\n    return (\n      <ButtonGroup className=\"ws-el-controls\">\n        {keyLink}\n        <IconTooltip\n          className={\n            `fa fa-sort-${sortColumns ? 'numeric' : 'alpha'}-asc ` +\n            'pull-left sort-cols m-l-2 pointer'\n          }\n          onClick={toggleSortColumns}\n          tooltip={\n            sortColumns\n              ? t('Original table column order')\n              : t('Sort columns alphabetically')\n          }\n        />\n        {table.selectStar && (\n          <CopyToClipboard\n            copyNode={\n              <IconTooltip\n                aria-label=\"Copy\"\n                tooltip={t('Copy SELECT statement to the clipboard')}\n              >\n                <i aria-hidden className=\"fa fa-clipboard pull-left m-l-2\" />\n              </IconTooltip>\n            }\n            text={table.selectStar}\n            shouldShowText={false}\n          />\n        )}\n        {table.view && (\n          <ShowSQL\n            sql={table.view}\n            tooltipText={t('Show CREATE VIEW statement')}\n            title={t('CREATE VIEW statement')}\n          />\n        )}\n        <IconTooltip\n          className=\"fa fa-times table-remove pull-left m-l-2 pointer\"\n          onClick={removeTable}\n          tooltip={t('Remove table preview')}\n        />\n      </ButtonGroup>\n    );\n  };\n\n  const renderHeader = () => {\n    const element: HTMLInputElement | null = tableNameRef.current;\n    let trigger: string[] = [];\n    if (element && element.offsetWidth < element.scrollWidth) {\n      trigger = ['hover'];\n    }\n\n    return (\n      <div\n        className=\"clearfix header-container\"\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n      >\n        <Tooltip\n          id=\"copy-to-clipboard-tooltip\"\n          style={{ cursor: 'pointer' }}\n          title={table.name}\n          trigger={trigger}\n        >\n          <StyledSpan\n            data-test=\"collapse\"\n            ref={tableNameRef}\n            className=\"table-name\"\n          >\n            <strong>{table.name}</strong>\n          </StyledSpan>\n        </Tooltip>\n\n        <div className=\"pull-right header-right-side\">\n          {table.isMetadataLoading || table.isExtraMetadataLoading ? (\n            <Loading position=\"inline\" />\n          ) : (\n            <Fade\n              data-test=\"fade\"\n              hovered={hovered}\n              onClick={e => e.stopPropagation()}\n            >\n              {renderControls()}\n            </Fade>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderBody = () => {\n    let cols;\n    if (table.columns) {\n      cols = table.columns.slice();\n      if (sortColumns) {\n        cols.sort((a: Column, b: Column) => {\n          const colA = a.name.toUpperCase();\n          const colB = b.name.toUpperCase();\n          return colA < colB ? -1 : colA > colB ? 1 : 0;\n        });\n      }\n    }\n\n    const metadata = (\n      <div\n        data-test=\"table-element\"\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        css={{ paddingTop: 6 }}\n      >\n        {renderWell()}\n        <div>\n          {cols?.map(col => (\n            <ColumnElement column={col} key={col.name} />\n          ))}\n        </div>\n      </div>\n    );\n    return metadata;\n  };\n\n  return (\n    <StyledCollapsePanel\n      {...props}\n      key={table.id}\n      header={renderHeader()}\n      className=\"TableElement\"\n      forceRender\n    >\n      {renderBody()}\n    </StyledCollapsePanel>\n  );\n};\n\nexport default TableElement;\n"]},"metadata":{},"sourceType":"module"}