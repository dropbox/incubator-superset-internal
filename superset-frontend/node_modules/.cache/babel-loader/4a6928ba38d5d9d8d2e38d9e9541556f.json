{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport moment from 'moment';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\nstyled,\ncss,\nFeatureFlag,\nt,\ngetSharedLabelColor,\ngetUiOverrideRegistry } from\n'@superset-ui/core';\nimport { Global } from '@emotion/react';\nimport { isFeatureEnabled } from 'src/featureFlags';\nimport {\nLOG_ACTIONS_PERIODIC_RENDER_DASHBOARD,\nLOG_ACTIONS_FORCE_REFRESH_DASHBOARD,\nLOG_ACTIONS_TOGGLE_EDIT_DASHBOARD } from\n'src/logger/LogUtils';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { AntdButton } from 'src/components/';\nimport { findPermission } from 'src/utils/findPermission';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport HeaderActionsDropdown from 'src/dashboard/components/Header/HeaderActionsDropdown';\nimport PublishedStatus from 'src/dashboard/components/PublishedStatus';\nimport UndoRedoKeyListeners from 'src/dashboard/components/UndoRedoKeyListeners';\nimport PropertiesModal from 'src/dashboard/components/PropertiesModal';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport {\nUNDO_LIMIT,\nSAVE_TYPE_OVERWRITE,\nDASHBOARD_POSITION_DATA_LIMIT } from\n'src/dashboard/util/constants';\nimport setPeriodicRunner, {\nstopPeriodicRender } from\n'src/dashboard/util/setPeriodicRunner';\nimport { PageHeaderWithActions } from 'src/components/PageHeaderWithActions';\nimport { DashboardEmbedModal } from '../DashboardEmbedControls';\nimport OverwriteConfirm from '../OverwriteConfirm';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst uiOverrideRegistry = getUiOverrideRegistry();\n\nconst propTypes = {\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  addWarningToast: PropTypes.func.isRequired,\n  user: PropTypes.object, // UserWithPermissionsAndRoles,\n  dashboardInfo: PropTypes.object.isRequired,\n  dashboardTitle: PropTypes.string,\n  dataMask: PropTypes.object.isRequired,\n  charts: PropTypes.objectOf(chartPropShape).isRequired,\n  layout: PropTypes.object.isRequired,\n  expandedSlices: PropTypes.object,\n  customCss: PropTypes.string,\n  colorNamespace: PropTypes.string,\n  colorScheme: PropTypes.string,\n  setColorScheme: PropTypes.func.isRequired,\n  setUnsavedChanges: PropTypes.func.isRequired,\n  isStarred: PropTypes.bool.isRequired,\n  isPublished: PropTypes.bool.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  onSave: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  fetchFaveStar: PropTypes.func.isRequired,\n  fetchCharts: PropTypes.func.isRequired,\n  saveFaveStar: PropTypes.func.isRequired,\n  savePublished: PropTypes.func.isRequired,\n  updateDashboardTitle: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  setEditMode: PropTypes.func.isRequired,\n  showBuilderPane: PropTypes.func.isRequired,\n  updateCss: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  hasUnsavedChanges: PropTypes.bool.isRequired,\n  maxUndoHistoryExceeded: PropTypes.bool.isRequired,\n  lastModifiedTime: PropTypes.number.isRequired,\n\n  // redux\n  onRefresh: PropTypes.func.isRequired,\n  onUndo: PropTypes.func.isRequired,\n  onRedo: PropTypes.func.isRequired,\n  undoLength: PropTypes.number.isRequired,\n  redoLength: PropTypes.number.isRequired,\n  setMaxUndoHistoryExceeded: PropTypes.func.isRequired,\n  maxUndoHistoryToast: PropTypes.func.isRequired,\n  refreshFrequency: PropTypes.number,\n  shouldPersistRefreshFrequency: PropTypes.bool.isRequired,\n  setRefreshFrequency: PropTypes.func.isRequired,\n  dashboardInfoChanged: PropTypes.func.isRequired,\n  dashboardTitleChanged: PropTypes.func.isRequired };\n\n\nconst defaultProps = {\n  colorNamespace: undefined,\n  colorScheme: undefined };\n\n\nconst headerContainerStyle = (theme) => css`\n  border-bottom: 1px solid ${theme.colors.grayscale.light2};\n`;\n\nconst editButtonStyle = (theme) => css`\n  color: ${theme.colors.primary.dark2};\n`;\n\nconst actionButtonsStyle = (theme) => css`\n  display: flex;\n  align-items: center;\n\n  .action-schedule-report {\n    margin-left: ${theme.gridUnit * 2}px;\n  }\n\n  .undoRedo {\n    display: flex;\n    margin-right: ${theme.gridUnit * 2}px;\n  }\n`;\n\nconst StyledUndoRedoButton = styled(AntdButton)`\n  padding: 0;\n  &:hover {\n    background: transparent;\n  }\n`;\n\nconst undoRedoStyle = (theme) => css`\n  color: ${theme.colors.grayscale.light1};\n  &:hover {\n    color: ${theme.colors.grayscale.base};\n  }\n`;\n\nconst undoRedoEmphasized = (theme) => css`\n  color: ${theme.colors.grayscale.base};\n`;\n\nconst undoRedoDisabled = (theme) => css`\n  color: ${theme.colors.grayscale.light2};\n`;\n\nconst saveBtnStyle = (theme) => css`\n  min-width: ${theme.gridUnit * 17}px;\n  height: ${theme.gridUnit * 8}px;\n`;\n\nconst discardBtnStyle = (theme) => css`\n  min-width: ${theme.gridUnit * 22}px;\n  height: ${theme.gridUnit * 8}px;\n`;\n\nclass Header extends React.PureComponent {\n  static discardChanges() {\n    const url = new URL(window.location.href);\n\n    url.searchParams.delete('edit');\n    window.location.assign(url);\n  }\n\n  constructor(props) {\n    super(props);this.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    showEmbedModal = () => {\n      this.setState({ showingEmbedModal: true });\n    };this.\n\n    hideEmbedModal = () => {\n      this.setState({ showingEmbedModal: false });\n    };this.state = { didNotifyMaxUndoHistoryToast: false, emphasizeUndo: false, emphasizeRedo: false, showingPropertiesModal: false, isDropdownVisible: false };this.handleChangeText = this.handleChangeText.bind(this);this.handleCtrlZ = this.handleCtrlZ.bind(this);this.handleCtrlY = this.handleCtrlY.bind(this);this.toggleEditMode = this.toggleEditMode.bind(this);this.forceRefresh = this.forceRefresh.bind(this);this.startPeriodicRender = this.startPeriodicRender.bind(this);this.overwriteDashboard = this.overwriteDashboard.bind(this);this.showPropertiesModal = this.showPropertiesModal.bind(this);this.hidePropertiesModal = this.hidePropertiesModal.bind(this);this.setIsDropdownVisible = this.setIsDropdownVisible.bind(this);}componentDidMount() {const { refreshFrequency } = this.props;this.startPeriodicRender(refreshFrequency * 1000);}componentDidUpdate(prevProps) {if (this.props.refreshFrequency !== prevProps.refreshFrequency) {const { refreshFrequency } = this.props;this.startPeriodicRender(refreshFrequency * 1000);}}UNSAFE_componentWillReceiveProps(nextProps) {if (UNDO_LIMIT - nextProps.undoLength <= 0 && !this.state.didNotifyMaxUndoHistoryToast) {this.setState(() => ({ didNotifyMaxUndoHistoryToast: true }));this.props.maxUndoHistoryToast();}if (nextProps.undoLength > UNDO_LIMIT && !this.props.maxUndoHistoryExceeded) {this.props.setMaxUndoHistoryExceeded();}}componentWillUnmount() {stopPeriodicRender(this.refreshTimer);this.props.setRefreshFrequency(0);clearTimeout(this.ctrlYTimeout);clearTimeout(this.ctrlZTimeout);}handleChangeText(nextText) {const { updateDashboardTitle, onChange } = this.props;if (nextText && this.props.dashboardTitle !== nextText) {updateDashboardTitle(nextText);onChange();}}setIsDropdownVisible(visible) {this.setState({ isDropdownVisible: visible });}handleCtrlY() {this.props.onRedo();this.setState({ emphasizeRedo: true }, () => {if (this.ctrlYTimeout) clearTimeout(this.ctrlYTimeout);this.ctrlYTimeout = setTimeout(() => {this.setState({ emphasizeRedo: false });}, 100);});}handleCtrlZ() {this.props.onUndo();this.setState({ emphasizeUndo: true }, () => {if (this.ctrlZTimeout) clearTimeout(this.ctrlZTimeout);this.ctrlZTimeout = setTimeout(() => {this.setState({ emphasizeUndo: false });}, 100);});}forceRefresh() {if (!this.props.isLoading) {const chartList = Object.keys(this.props.charts);this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_DASHBOARD, { force: true, interval: 0, chartCount: chartList.length });return this.props.onRefresh(chartList, true, 0, this.props.dashboardInfo.id);}return false;}startPeriodicRender(interval) {let intervalMessage;if (interval) {var _dashboardInfo$common, _dashboardInfo$common2;const { dashboardInfo } = this.props;const periodicRefreshOptions = (_dashboardInfo$common = dashboardInfo.common) == null ? void 0 : (_dashboardInfo$common2 = _dashboardInfo$common.conf) == null ? void 0 : _dashboardInfo$common2.DASHBOARD_AUTO_REFRESH_INTERVALS;const predefinedValue = periodicRefreshOptions.find((option) => Number(option[0]) === interval / 1000);if (predefinedValue) {intervalMessage = t(predefinedValue[1]);} else {intervalMessage = moment.duration(interval, 'millisecond').humanize();}}const periodicRender = () => {const { fetchCharts, logEvent, charts, dashboardInfo } = this.props;const { metadata } = dashboardInfo;const immune = metadata.timed_refresh_immune_slices || [];const affectedCharts = Object.values(charts).filter((chart) => immune.indexOf(chart.id) === -1).map((chart) => chart.id);logEvent(LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD, { interval, chartCount: affectedCharts.length });this.props.addWarningToast(t(`This dashboard is currently auto refreshing; the next auto refresh will be in %s.`, intervalMessage));if (dashboardInfo.common.conf.DASHBOARD_AUTO_REFRESH_MODE === 'fetch') {// force-refresh while auto-refresh in dashboard\n        return fetchCharts(affectedCharts, false, interval * 0.2, dashboardInfo.id);}return fetchCharts(affectedCharts, true, interval * 0.2, dashboardInfo.id);};this.refreshTimer = setPeriodicRunner({ interval, periodicRender, refreshTimer: this.refreshTimer });}toggleEditMode() {this.props.logEvent(LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD, { edit_mode: !this.props.editMode });this.props.setEditMode(!this.props.editMode);}overwriteDashboard() {var _dashboardInfo$metada, _dashboardInfo$metada2, _dashboardInfo$metada3;const { dashboardTitle, layout: positions, colorScheme, colorNamespace, customCss, dashboardInfo, refreshFrequency: currentRefreshFrequency, shouldPersistRefreshFrequency, lastModifiedTime, slug } = this.props; // check refresh frequency is for current session or persist\n    const refreshFrequency = shouldPersistRefreshFrequency ? currentRefreshFrequency : (_dashboardInfo$metada = dashboardInfo.metadata) == null ? void 0 : _dashboardInfo$metada.refresh_frequency;const currentColorScheme = (dashboardInfo == null ? void 0 : (_dashboardInfo$metada2 = dashboardInfo.metadata) == null ? void 0 : _dashboardInfo$metada2.color_scheme) || colorScheme;const currentColorNamespace = (dashboardInfo == null ? void 0 : (_dashboardInfo$metada3 = dashboardInfo.metadata) == null ? void 0 : _dashboardInfo$metada3.color_namespace) || colorNamespace;const currentSharedLabelColors = Object.fromEntries(getSharedLabelColor().getColorMap());const data = { certified_by: dashboardInfo.certified_by, certification_details: dashboardInfo.certification_details, css: customCss, dashboard_title: dashboardTitle, last_modified_time: lastModifiedTime, owners: dashboardInfo.owners, roles: dashboardInfo.roles, slug, metadata: { ...(dashboardInfo == null ? void 0 : dashboardInfo.metadata), color_namespace: currentColorNamespace, color_scheme: currentColorScheme, positions, refresh_frequency: refreshFrequency, shared_label_colors: currentSharedLabelColors } }; // make sure positions data less than DB storage limitation:\n    const positionJSONLength = safeStringify(positions).length;const limit = dashboardInfo.common.conf.SUPERSET_DASHBOARD_POSITION_DATA_LIMIT || DASHBOARD_POSITION_DATA_LIMIT;if (positionJSONLength >= limit) {this.props.addDangerToast(t('Your dashboard is too large. Please reduce its size before saving it.'));} else {if (positionJSONLength >= limit * 0.9) {this.props.addWarningToast('Your dashboard is near the size limit.');}this.props.onSave(data, dashboardInfo.id, SAVE_TYPE_OVERWRITE);}}showPropertiesModal() {this.setState({ showingPropertiesModal: true });}hidePropertiesModal() {this.setState({ showingPropertiesModal: false });}render() {var _dashboardInfo$common3, _dashboardInfo$common4, _dashboardInfo$common5, _dashboardInfo$common6;const {\n      dashboardTitle,\n      layout,\n      expandedSlices,\n      customCss,\n      colorNamespace,\n      dataMask,\n      setColorScheme,\n      setUnsavedChanges,\n      colorScheme,\n      onUndo,\n      onRedo,\n      undoLength,\n      redoLength,\n      onChange,\n      onSave,\n      updateCss,\n      editMode,\n      isPublished,\n      user,\n      dashboardInfo,\n      hasUnsavedChanges,\n      isLoading,\n      refreshFrequency,\n      shouldPersistRefreshFrequency,\n      setRefreshFrequency,\n      lastModifiedTime,\n      logEvent } =\n    this.props;\n\n    const userCanEdit =\n    dashboardInfo.dash_edit_perm && !dashboardInfo.is_managed_externally;\n    const userCanShare = dashboardInfo.dash_share_perm;\n    const userCanSaveAs = dashboardInfo.dash_save_perm;\n    const userCanCurate =\n    isFeatureEnabled(FeatureFlag.EMBEDDED_SUPERSET) &&\n    findPermission('can_set_embedded', 'Dashboard', user.roles);\n    const refreshLimit = (_dashboardInfo$common3 =\n    dashboardInfo.common) == null ? void 0 : (_dashboardInfo$common4 = _dashboardInfo$common3.conf) == null ? void 0 : _dashboardInfo$common4.SUPERSET_DASHBOARD_PERIODICAL_REFRESH_LIMIT;\n    const refreshWarning = (_dashboardInfo$common5 =\n    dashboardInfo.common) == null ? void 0 : (_dashboardInfo$common6 = _dashboardInfo$common5.conf) == null ? void 0 : _dashboardInfo$common6.\n    SUPERSET_DASHBOARD_PERIODICAL_REFRESH_WARNING_MESSAGE;\n\n    const handleOnPropertiesChange = (updates) => {\n      const { dashboardInfoChanged, dashboardTitleChanged } = this.props;\n\n      setColorScheme(updates.colorScheme);\n      dashboardInfoChanged({\n        slug: updates.slug,\n        metadata: JSON.parse(updates.jsonMetadata || '{}'),\n        certified_by: updates.certifiedBy,\n        certification_details: updates.certificationDetails,\n        owners: updates.owners,\n        roles: updates.roles });\n\n      setUnsavedChanges(true);\n      dashboardTitleChanged(updates.title);\n    };\n\n    const NavExtension = uiOverrideRegistry.get('dashboard.nav.right');\n\n    return (\n      ___EmotionJSX(\"div\", {\n        css: headerContainerStyle,\n        \"data-test\": \"dashboard-header-container\",\n        \"data-test-id\": dashboardInfo.id,\n        className: \"dashboard-header-container\" },\n\n      ___EmotionJSX(PageHeaderWithActions, {\n        editableTitleProps: {\n          title: dashboardTitle,\n          canEdit: userCanEdit && editMode,\n          onSave: this.handleChangeText,\n          placeholder: t('Add the name of the dashboard'),\n          label: t('Dashboard title'),\n          showTooltip: false },\n\n        certificatiedBadgeProps: {\n          certifiedBy: dashboardInfo.certified_by,\n          details: dashboardInfo.certification_details },\n\n        faveStarProps: {\n          itemId: dashboardInfo.id,\n          fetchFaveStar: this.props.fetchFaveStar,\n          saveFaveStar: this.props.saveFaveStar,\n          isStarred: this.props.isStarred,\n          showTooltip: true },\n\n        titlePanelAdditionalItems: [\n        !editMode &&\n        ___EmotionJSX(PublishedStatus, {\n          dashboardId: dashboardInfo.id,\n          isPublished: isPublished,\n          savePublished: this.props.savePublished,\n          canEdit: userCanEdit,\n          canSave: userCanSaveAs,\n          visible: !editMode })],\n\n\n\n        rightPanelAdditionalItems:\n        ___EmotionJSX(\"div\", { className: \"button-container\" },\n        userCanSaveAs &&\n        ___EmotionJSX(\"div\", {\n          className: \"button-container\",\n          \"data-test\": \"dashboard-edit-actions\" },\n\n        editMode &&\n        ___EmotionJSX(\"div\", { css: actionButtonsStyle },\n        ___EmotionJSX(\"div\", { className: \"undoRedo\" },\n        ___EmotionJSX(Tooltip, {\n          id: \"dashboard-undo-tooltip\",\n          title: t('Undo the action') },\n\n        ___EmotionJSX(StyledUndoRedoButton, {\n          type: \"text\",\n          disabled: undoLength < 1 },\n\n        ___EmotionJSX(Icons.Undo, {\n          css: [\n          undoRedoStyle,\n          this.state.emphasizeUndo && undoRedoEmphasized,\n          undoLength < 1 && undoRedoDisabled, process.env.NODE_ENV === \"production\" ? \"\" : \";label:Header;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2Rhc2hib2FyZC9jb21wb25lbnRzL0hlYWRlci9pbmRleC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNmlCOEIiLCJmaWxlIjoiL1VzZXJzL2JvZ2Rhbmt5cnlsaXVrL2NvZGUvb3BlbnNvdXJjZS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvSGVhZGVyL2luZGV4LmpzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQge1xuICBzdHlsZWQsXG4gIGNzcyxcbiAgRmVhdHVyZUZsYWcsXG4gIHQsXG4gIGdldFNoYXJlZExhYmVsQ29sb3IsXG4gIGdldFVpT3ZlcnJpZGVSZWdpc3RyeSxcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgR2xvYmFsIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgaXNGZWF0dXJlRW5hYmxlZCB9IGZyb20gJ3NyYy9mZWF0dXJlRmxhZ3MnO1xuaW1wb3J0IHtcbiAgTE9HX0FDVElPTlNfUEVSSU9ESUNfUkVOREVSX0RBU0hCT0FSRCxcbiAgTE9HX0FDVElPTlNfRk9SQ0VfUkVGUkVTSF9EQVNIQk9BUkQsXG4gIExPR19BQ1RJT05TX1RPR0dMRV9FRElUX0RBU0hCT0FSRCxcbn0gZnJvbSAnc3JjL2xvZ2dlci9Mb2dVdGlscyc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IHsgQW50ZEJ1dHRvbiB9IGZyb20gJ3NyYy9jb21wb25lbnRzLyc7XG5pbXBvcnQgeyBmaW5kUGVybWlzc2lvbiB9IGZyb20gJ3NyYy91dGlscy9maW5kUGVybWlzc2lvbic7XG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvVG9vbHRpcCc7XG5pbXBvcnQgeyBzYWZlU3RyaW5naWZ5IH0gZnJvbSAnc3JjL3V0aWxzL3NhZmVTdHJpbmdpZnknO1xuaW1wb3J0IEhlYWRlckFjdGlvbnNEcm9wZG93biBmcm9tICdzcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvSGVhZGVyL0hlYWRlckFjdGlvbnNEcm9wZG93bic7XG5pbXBvcnQgUHVibGlzaGVkU3RhdHVzIGZyb20gJ3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9QdWJsaXNoZWRTdGF0dXMnO1xuaW1wb3J0IFVuZG9SZWRvS2V5TGlzdGVuZXJzIGZyb20gJ3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9VbmRvUmVkb0tleUxpc3RlbmVycyc7XG5pbXBvcnQgUHJvcGVydGllc01vZGFsIGZyb20gJ3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9Qcm9wZXJ0aWVzTW9kYWwnO1xuaW1wb3J0IHsgY2hhcnRQcm9wU2hhcGUgfSBmcm9tICdzcmMvZGFzaGJvYXJkL3V0aWwvcHJvcFNoYXBlcyc7XG5pbXBvcnQge1xuICBVTkRPX0xJTUlULFxuICBTQVZFX1RZUEVfT1ZFUldSSVRFLFxuICBEQVNIQk9BUkRfUE9TSVRJT05fREFUQV9MSU1JVCxcbn0gZnJvbSAnc3JjL2Rhc2hib2FyZC91dGlsL2NvbnN0YW50cyc7XG5pbXBvcnQgc2V0UGVyaW9kaWNSdW5uZXIsIHtcbiAgc3RvcFBlcmlvZGljUmVuZGVyLFxufSBmcm9tICdzcmMvZGFzaGJvYXJkL3V0aWwvc2V0UGVyaW9kaWNSdW5uZXInO1xuaW1wb3J0IHsgUGFnZUhlYWRlcldpdGhBY3Rpb25zIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUGFnZUhlYWRlcldpdGhBY3Rpb25zJztcbmltcG9ydCB7IERhc2hib2FyZEVtYmVkTW9kYWwgfSBmcm9tICcuLi9EYXNoYm9hcmRFbWJlZENvbnRyb2xzJztcbmltcG9ydCBPdmVyd3JpdGVDb25maXJtIGZyb20gJy4uL092ZXJ3cml0ZUNvbmZpcm0nO1xuXG5jb25zdCB1aU92ZXJyaWRlUmVnaXN0cnkgPSBnZXRVaU92ZXJyaWRlUmVnaXN0cnkoKTtcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBhZGRTdWNjZXNzVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGFkZERhbmdlclRvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBhZGRXYXJuaW5nVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHVzZXI6IFByb3BUeXBlcy5vYmplY3QsIC8vIFVzZXJXaXRoUGVybWlzc2lvbnNBbmRSb2xlcyxcbiAgZGFzaGJvYXJkSW5mbzogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBkYXNoYm9hcmRUaXRsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgZGF0YU1hc2s6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgY2hhcnRzOiBQcm9wVHlwZXMub2JqZWN0T2YoY2hhcnRQcm9wU2hhcGUpLmlzUmVxdWlyZWQsXG4gIGxheW91dDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBleHBhbmRlZFNsaWNlczogUHJvcFR5cGVzLm9iamVjdCxcbiAgY3VzdG9tQ3NzOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb2xvck5hbWVzcGFjZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29sb3JTY2hlbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHNldENvbG9yU2NoZW1lOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZXRVbnNhdmVkQ2hhbmdlczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgaXNTdGFycmVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBpc1B1Ymxpc2hlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgaXNMb2FkaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBvblNhdmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBmZXRjaEZhdmVTdGFyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBmZXRjaENoYXJ0czogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgc2F2ZUZhdmVTdGFyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzYXZlUHVibGlzaGVkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICB1cGRhdGVEYXNoYm9hcmRUaXRsZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZWRpdE1vZGU6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIHNldEVkaXRNb2RlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzaG93QnVpbGRlclBhbmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHVwZGF0ZUNzczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgbG9nRXZlbnQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGhhc1Vuc2F2ZWRDaGFuZ2VzOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBtYXhVbmRvSGlzdG9yeUV4Y2VlZGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBsYXN0TW9kaWZpZWRUaW1lOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG5cbiAgLy8gcmVkdXhcbiAgb25SZWZyZXNoOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBvblVuZG86IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uUmVkbzogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgdW5kb0xlbmd0aDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICByZWRvTGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIHNldE1heFVuZG9IaXN0b3J5RXhjZWVkZWQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG1heFVuZG9IaXN0b3J5VG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHJlZnJlc2hGcmVxdWVuY3k6IFByb3BUeXBlcy5udW1iZXIsXG4gIHNob3VsZFBlcnNpc3RSZWZyZXNoRnJlcXVlbmN5OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBzZXRSZWZyZXNoRnJlcXVlbmN5OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBkYXNoYm9hcmRJbmZvQ2hhbmdlZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZGFzaGJvYXJkVGl0bGVDaGFuZ2VkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBjb2xvck5hbWVzcGFjZTogdW5kZWZpbmVkLFxuICBjb2xvclNjaGVtZTogdW5kZWZpbmVkLFxufTtcblxuY29uc3QgaGVhZGVyQ29udGFpbmVyU3R5bGUgPSB0aGVtZSA9PiBjc3NgXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbmA7XG5cbmNvbnN0IGVkaXRCdXR0b25TdHlsZSA9IHRoZW1lID0+IGNzc2BcbiAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkuZGFyazJ9O1xuYDtcblxuY29uc3QgYWN0aW9uQnV0dG9uc1N0eWxlID0gdGhlbWUgPT4gY3NzYFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gIC5hY3Rpb24tc2NoZWR1bGUtcmVwb3J0IHtcbiAgICBtYXJnaW4tbGVmdDogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHg7XG4gIH1cblxuICAudW5kb1JlZG8ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLmdyaWRVbml0ICogMn1weDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkVW5kb1JlZG9CdXR0b24gPSBzdHlsZWQoQW50ZEJ1dHRvbilgXG4gIHBhZGRpbmc6IDA7XG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICB9XG5gO1xuXG5jb25zdCB1bmRvUmVkb1N0eWxlID0gdGhlbWUgPT4gY3NzYFxuICBjb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0MX07XG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX07XG4gIH1cbmA7XG5cbmNvbnN0IHVuZG9SZWRvRW1waGFzaXplZCA9IHRoZW1lID0+IGNzc2BcbiAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfTtcbmA7XG5cbmNvbnN0IHVuZG9SZWRvRGlzYWJsZWQgPSB0aGVtZSA9PiBjc3NgXG4gIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbmA7XG5cbmNvbnN0IHNhdmVCdG5TdHlsZSA9IHRoZW1lID0+IGNzc2BcbiAgbWluLXdpZHRoOiAke3RoZW1lLmdyaWRVbml0ICogMTd9cHg7XG4gIGhlaWdodDogJHt0aGVtZS5ncmlkVW5pdCAqIDh9cHg7XG5gO1xuXG5jb25zdCBkaXNjYXJkQnRuU3R5bGUgPSB0aGVtZSA9PiBjc3NgXG4gIG1pbi13aWR0aDogJHt0aGVtZS5ncmlkVW5pdCAqIDIyfXB4O1xuICBoZWlnaHQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiA4fXB4O1xuYDtcblxuY2xhc3MgSGVhZGVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBkaXNjYXJkQ2hhbmdlcygpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdlZGl0Jyk7XG4gICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbih1cmwpO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRpZE5vdGlmeU1heFVuZG9IaXN0b3J5VG9hc3Q6IGZhbHNlLFxuICAgICAgZW1waGFzaXplVW5kbzogZmFsc2UsXG4gICAgICBlbXBoYXNpemVSZWRvOiBmYWxzZSxcbiAgICAgIHNob3dpbmdQcm9wZXJ0aWVzTW9kYWw6IGZhbHNlLFxuICAgICAgaXNEcm9wZG93blZpc2libGU6IGZhbHNlLFxuICAgIH07XG5cbiAgICB0aGlzLmhhbmRsZUNoYW5nZVRleHQgPSB0aGlzLmhhbmRsZUNoYW5nZVRleHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUN0cmxaID0gdGhpcy5oYW5kbGVDdHJsWi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlQ3RybFkgPSB0aGlzLmhhbmRsZUN0cmxZLmJpbmQodGhpcyk7XG4gICAgdGhpcy50b2dnbGVFZGl0TW9kZSA9IHRoaXMudG9nZ2xlRWRpdE1vZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZvcmNlUmVmcmVzaCA9IHRoaXMuZm9yY2VSZWZyZXNoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyID0gdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vdmVyd3JpdGVEYXNoYm9hcmQgPSB0aGlzLm92ZXJ3cml0ZURhc2hib2FyZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2hvd1Byb3BlcnRpZXNNb2RhbCA9IHRoaXMuc2hvd1Byb3BlcnRpZXNNb2RhbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGlkZVByb3BlcnRpZXNNb2RhbCA9IHRoaXMuaGlkZVByb3BlcnRpZXNNb2RhbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0SXNEcm9wZG93blZpc2libGUgPSB0aGlzLnNldElzRHJvcGRvd25WaXNpYmxlLmJpbmQodGhpcyk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCB7IHJlZnJlc2hGcmVxdWVuY3kgfSA9IHRoaXMucHJvcHM7XG4gICAgdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyKHJlZnJlc2hGcmVxdWVuY3kgKiAxMDAwKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5yZWZyZXNoRnJlcXVlbmN5ICE9PSBwcmV2UHJvcHMucmVmcmVzaEZyZXF1ZW5jeSkge1xuICAgICAgY29uc3QgeyByZWZyZXNoRnJlcXVlbmN5IH0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyKHJlZnJlc2hGcmVxdWVuY3kgKiAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBpZiAoXG4gICAgICBVTkRPX0xJTUlUIC0gbmV4dFByb3BzLnVuZG9MZW5ndGggPD0gMCAmJlxuICAgICAgIXRoaXMuc3RhdGUuZGlkTm90aWZ5TWF4VW5kb0hpc3RvcnlUb2FzdFxuICAgICkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSgoKSA9PiAoeyBkaWROb3RpZnlNYXhVbmRvSGlzdG9yeVRvYXN0OiB0cnVlIH0pKTtcbiAgICAgIHRoaXMucHJvcHMubWF4VW5kb0hpc3RvcnlUb2FzdCgpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBuZXh0UHJvcHMudW5kb0xlbmd0aCA+IFVORE9fTElNSVQgJiZcbiAgICAgICF0aGlzLnByb3BzLm1heFVuZG9IaXN0b3J5RXhjZWVkZWRcbiAgICApIHtcbiAgICAgIHRoaXMucHJvcHMuc2V0TWF4VW5kb0hpc3RvcnlFeGNlZWRlZCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHN0b3BQZXJpb2RpY1JlbmRlcih0aGlzLnJlZnJlc2hUaW1lcik7XG4gICAgdGhpcy5wcm9wcy5zZXRSZWZyZXNoRnJlcXVlbmN5KDApO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmN0cmxZVGltZW91dCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY3RybFpUaW1lb3V0KTtcbiAgfVxuXG4gIGhhbmRsZUNoYW5nZVRleHQobmV4dFRleHQpIHtcbiAgICBjb25zdCB7IHVwZGF0ZURhc2hib2FyZFRpdGxlLCBvbkNoYW5nZSB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAobmV4dFRleHQgJiYgdGhpcy5wcm9wcy5kYXNoYm9hcmRUaXRsZSAhPT0gbmV4dFRleHQpIHtcbiAgICAgIHVwZGF0ZURhc2hib2FyZFRpdGxlKG5leHRUZXh0KTtcbiAgICAgIG9uQ2hhbmdlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0SXNEcm9wZG93blZpc2libGUodmlzaWJsZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNEcm9wZG93blZpc2libGU6IHZpc2libGUsXG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVDdHJsWSgpIHtcbiAgICB0aGlzLnByb3BzLm9uUmVkbygpO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVSZWRvOiB0cnVlIH0sICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmN0cmxZVGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMuY3RybFlUaW1lb3V0KTtcbiAgICAgIHRoaXMuY3RybFlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVSZWRvOiBmYWxzZSB9KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVDdHJsWigpIHtcbiAgICB0aGlzLnByb3BzLm9uVW5kbygpO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVVbmRvOiB0cnVlIH0sICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmN0cmxaVGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMuY3RybFpUaW1lb3V0KTtcbiAgICAgIHRoaXMuY3RybFpUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVVbmRvOiBmYWxzZSB9KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH1cblxuICBmb3JjZVJlZnJlc2goKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmlzTG9hZGluZykge1xuICAgICAgY29uc3QgY2hhcnRMaXN0ID0gT2JqZWN0LmtleXModGhpcy5wcm9wcy5jaGFydHMpO1xuICAgICAgdGhpcy5wcm9wcy5sb2dFdmVudChMT0dfQUNUSU9OU19GT1JDRV9SRUZSRVNIX0RBU0hCT0FSRCwge1xuICAgICAgICBmb3JjZTogdHJ1ZSxcbiAgICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICAgIGNoYXJ0Q291bnQ6IGNoYXJ0TGlzdC5sZW5ndGgsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uUmVmcmVzaChcbiAgICAgICAgY2hhcnRMaXN0LFxuICAgICAgICB0cnVlLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLnByb3BzLmRhc2hib2FyZEluZm8uaWQsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGFydFBlcmlvZGljUmVuZGVyKGludGVydmFsKSB7XG4gICAgbGV0IGludGVydmFsTWVzc2FnZTtcblxuICAgIGlmIChpbnRlcnZhbCkge1xuICAgICAgY29uc3QgeyBkYXNoYm9hcmRJbmZvIH0gPSB0aGlzLnByb3BzO1xuICAgICAgY29uc3QgcGVyaW9kaWNSZWZyZXNoT3B0aW9ucyA9XG4gICAgICAgIGRhc2hib2FyZEluZm8uY29tbW9uPy5jb25mPy5EQVNIQk9BUkRfQVVUT19SRUZSRVNIX0lOVEVSVkFMUztcbiAgICAgIGNvbnN0IHByZWRlZmluZWRWYWx1ZSA9IHBlcmlvZGljUmVmcmVzaE9wdGlvbnMuZmluZChcbiAgICAgICAgb3B0aW9uID0+IE51bWJlcihvcHRpb25bMF0pID09PSBpbnRlcnZhbCAvIDEwMDAsXG4gICAgICApO1xuXG4gICAgICBpZiAocHJlZGVmaW5lZFZhbHVlKSB7XG4gICAgICAgIGludGVydmFsTWVzc2FnZSA9IHQocHJlZGVmaW5lZFZhbHVlWzFdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludGVydmFsTWVzc2FnZSA9IG1vbWVudC5kdXJhdGlvbihpbnRlcnZhbCwgJ21pbGxpc2Vjb25kJykuaHVtYW5pemUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwZXJpb2RpY1JlbmRlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHsgZmV0Y2hDaGFydHMsIGxvZ0V2ZW50LCBjaGFydHMsIGRhc2hib2FyZEluZm8gfSA9IHRoaXMucHJvcHM7XG4gICAgICBjb25zdCB7IG1ldGFkYXRhIH0gPSBkYXNoYm9hcmRJbmZvO1xuICAgICAgY29uc3QgaW1tdW5lID0gbWV0YWRhdGEudGltZWRfcmVmcmVzaF9pbW11bmVfc2xpY2VzIHx8IFtdO1xuICAgICAgY29uc3QgYWZmZWN0ZWRDaGFydHMgPSBPYmplY3QudmFsdWVzKGNoYXJ0cylcbiAgICAgICAgLmZpbHRlcihjaGFydCA9PiBpbW11bmUuaW5kZXhPZihjaGFydC5pZCkgPT09IC0xKVxuICAgICAgICAubWFwKGNoYXJ0ID0+IGNoYXJ0LmlkKTtcblxuICAgICAgbG9nRXZlbnQoTE9HX0FDVElPTlNfUEVSSU9ESUNfUkVOREVSX0RBU0hCT0FSRCwge1xuICAgICAgICBpbnRlcnZhbCxcbiAgICAgICAgY2hhcnRDb3VudDogYWZmZWN0ZWRDaGFydHMubGVuZ3RoLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3BzLmFkZFdhcm5pbmdUb2FzdChcbiAgICAgICAgdChcbiAgICAgICAgICBgVGhpcyBkYXNoYm9hcmQgaXMgY3VycmVudGx5IGF1dG8gcmVmcmVzaGluZzsgdGhlIG5leHQgYXV0byByZWZyZXNoIHdpbGwgYmUgaW4gJXMuYCxcbiAgICAgICAgICBpbnRlcnZhbE1lc3NhZ2UsXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgaWYgKGRhc2hib2FyZEluZm8uY29tbW9uLmNvbmYuREFTSEJPQVJEX0FVVE9fUkVGUkVTSF9NT0RFID09PSAnZmV0Y2gnKSB7XG4gICAgICAgIC8vIGZvcmNlLXJlZnJlc2ggd2hpbGUgYXV0by1yZWZyZXNoIGluIGRhc2hib2FyZFxuICAgICAgICByZXR1cm4gZmV0Y2hDaGFydHMoXG4gICAgICAgICAgYWZmZWN0ZWRDaGFydHMsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgaW50ZXJ2YWwgKiAwLjIsXG4gICAgICAgICAgZGFzaGJvYXJkSW5mby5pZCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmZXRjaENoYXJ0cyhcbiAgICAgICAgYWZmZWN0ZWRDaGFydHMsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGludGVydmFsICogMC4yLFxuICAgICAgICBkYXNoYm9hcmRJbmZvLmlkLFxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZWZyZXNoVGltZXIgPSBzZXRQZXJpb2RpY1J1bm5lcih7XG4gICAgICBpbnRlcnZhbCxcbiAgICAgIHBlcmlvZGljUmVuZGVyLFxuICAgICAgcmVmcmVzaFRpbWVyOiB0aGlzLnJlZnJlc2hUaW1lcixcbiAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMubG9nRXZlbnQoTE9HX0FDVElPTlNfVE9HR0xFX0VESVRfREFTSEJPQVJELCB7XG4gICAgICBlZGl0X21vZGU6ICF0aGlzLnByb3BzLmVkaXRNb2RlLFxuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc2V0RWRpdE1vZGUoIXRoaXMucHJvcHMuZWRpdE1vZGUpO1xuICB9XG5cbiAgb3ZlcndyaXRlRGFzaGJvYXJkKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhc2hib2FyZFRpdGxlLFxuICAgICAgbGF5b3V0OiBwb3NpdGlvbnMsXG4gICAgICBjb2xvclNjaGVtZSxcbiAgICAgIGNvbG9yTmFtZXNwYWNlLFxuICAgICAgY3VzdG9tQ3NzLFxuICAgICAgZGFzaGJvYXJkSW5mbyxcbiAgICAgIHJlZnJlc2hGcmVxdWVuY3k6IGN1cnJlbnRSZWZyZXNoRnJlcXVlbmN5LFxuICAgICAgc2hvdWxkUGVyc2lzdFJlZnJlc2hGcmVxdWVuY3ksXG4gICAgICBsYXN0TW9kaWZpZWRUaW1lLFxuICAgICAgc2x1ZyxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIGNoZWNrIHJlZnJlc2ggZnJlcXVlbmN5IGlzIGZvciBjdXJyZW50IHNlc3Npb24gb3IgcGVyc2lzdFxuICAgIGNvbnN0IHJlZnJlc2hGcmVxdWVuY3kgPSBzaG91bGRQZXJzaXN0UmVmcmVzaEZyZXF1ZW5jeVxuICAgICAgPyBjdXJyZW50UmVmcmVzaEZyZXF1ZW5jeVxuICAgICAgOiBkYXNoYm9hcmRJbmZvLm1ldGFkYXRhPy5yZWZyZXNoX2ZyZXF1ZW5jeTtcblxuICAgIGNvbnN0IGN1cnJlbnRDb2xvclNjaGVtZSA9XG4gICAgICBkYXNoYm9hcmRJbmZvPy5tZXRhZGF0YT8uY29sb3Jfc2NoZW1lIHx8IGNvbG9yU2NoZW1lO1xuICAgIGNvbnN0IGN1cnJlbnRDb2xvck5hbWVzcGFjZSA9XG4gICAgICBkYXNoYm9hcmRJbmZvPy5tZXRhZGF0YT8uY29sb3JfbmFtZXNwYWNlIHx8IGNvbG9yTmFtZXNwYWNlO1xuICAgIGNvbnN0IGN1cnJlbnRTaGFyZWRMYWJlbENvbG9ycyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIGdldFNoYXJlZExhYmVsQ29sb3IoKS5nZXRDb2xvck1hcCgpLFxuICAgICk7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2VydGlmaWVkX2J5OiBkYXNoYm9hcmRJbmZvLmNlcnRpZmllZF9ieSxcbiAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogZGFzaGJvYXJkSW5mby5jZXJ0aWZpY2F0aW9uX2RldGFpbHMsXG4gICAgICBjc3M6IGN1c3RvbUNzcyxcbiAgICAgIGRhc2hib2FyZF90aXRsZTogZGFzaGJvYXJkVGl0bGUsXG4gICAgICBsYXN0X21vZGlmaWVkX3RpbWU6IGxhc3RNb2RpZmllZFRpbWUsXG4gICAgICBvd25lcnM6IGRhc2hib2FyZEluZm8ub3duZXJzLFxuICAgICAgcm9sZXM6IGRhc2hib2FyZEluZm8ucm9sZXMsXG4gICAgICBzbHVnLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgLi4uZGFzaGJvYXJkSW5mbz8ubWV0YWRhdGEsXG4gICAgICAgIGNvbG9yX25hbWVzcGFjZTogY3VycmVudENvbG9yTmFtZXNwYWNlLFxuICAgICAgICBjb2xvcl9zY2hlbWU6IGN1cnJlbnRDb2xvclNjaGVtZSxcbiAgICAgICAgcG9zaXRpb25zLFxuICAgICAgICByZWZyZXNoX2ZyZXF1ZW5jeTogcmVmcmVzaEZyZXF1ZW5jeSxcbiAgICAgICAgc2hhcmVkX2xhYmVsX2NvbG9yczogY3VycmVudFNoYXJlZExhYmVsQ29sb3JzLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgLy8gbWFrZSBzdXJlIHBvc2l0aW9ucyBkYXRhIGxlc3MgdGhhbiBEQiBzdG9yYWdlIGxpbWl0YXRpb246XG4gICAgY29uc3QgcG9zaXRpb25KU09OTGVuZ3RoID0gc2FmZVN0cmluZ2lmeShwb3NpdGlvbnMpLmxlbmd0aDtcbiAgICBjb25zdCBsaW1pdCA9XG4gICAgICBkYXNoYm9hcmRJbmZvLmNvbW1vbi5jb25mLlNVUEVSU0VUX0RBU0hCT0FSRF9QT1NJVElPTl9EQVRBX0xJTUlUIHx8XG4gICAgICBEQVNIQk9BUkRfUE9TSVRJT05fREFUQV9MSU1JVDtcbiAgICBpZiAocG9zaXRpb25KU09OTGVuZ3RoID49IGxpbWl0KSB7XG4gICAgICB0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0KFxuICAgICAgICB0KFxuICAgICAgICAgICdZb3VyIGRhc2hib2FyZCBpcyB0b28gbGFyZ2UuIFBsZWFzZSByZWR1Y2UgaXRzIHNpemUgYmVmb3JlIHNhdmluZyBpdC4nLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBvc2l0aW9uSlNPTkxlbmd0aCA+PSBsaW1pdCAqIDAuOSkge1xuICAgICAgICB0aGlzLnByb3BzLmFkZFdhcm5pbmdUb2FzdCgnWW91ciBkYXNoYm9hcmQgaXMgbmVhciB0aGUgc2l6ZSBsaW1pdC4nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9wcy5vblNhdmUoZGF0YSwgZGFzaGJvYXJkSW5mby5pZCwgU0FWRV9UWVBFX09WRVJXUklURSk7XG4gICAgfVxuICB9XG5cbiAgc2hvd1Byb3BlcnRpZXNNb2RhbCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd2luZ1Byb3BlcnRpZXNNb2RhbDogdHJ1ZSB9KTtcbiAgfVxuXG4gIGhpZGVQcm9wZXJ0aWVzTW9kYWwoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dpbmdQcm9wZXJ0aWVzTW9kYWw6IGZhbHNlIH0pO1xuICB9XG5cbiAgc2hvd0VtYmVkTW9kYWwgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dpbmdFbWJlZE1vZGFsOiB0cnVlIH0pO1xuICB9O1xuXG4gIGhpZGVFbWJlZE1vZGFsID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93aW5nRW1iZWRNb2RhbDogZmFsc2UgfSk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhc2hib2FyZFRpdGxlLFxuICAgICAgbGF5b3V0LFxuICAgICAgZXhwYW5kZWRTbGljZXMsXG4gICAgICBjdXN0b21Dc3MsXG4gICAgICBjb2xvck5hbWVzcGFjZSxcbiAgICAgIGRhdGFNYXNrLFxuICAgICAgc2V0Q29sb3JTY2hlbWUsXG4gICAgICBzZXRVbnNhdmVkQ2hhbmdlcyxcbiAgICAgIGNvbG9yU2NoZW1lLFxuICAgICAgb25VbmRvLFxuICAgICAgb25SZWRvLFxuICAgICAgdW5kb0xlbmd0aCxcbiAgICAgIHJlZG9MZW5ndGgsXG4gICAgICBvbkNoYW5nZSxcbiAgICAgIG9uU2F2ZSxcbiAgICAgIHVwZGF0ZUNzcyxcbiAgICAgIGVkaXRNb2RlLFxuICAgICAgaXNQdWJsaXNoZWQsXG4gICAgICB1c2VyLFxuICAgICAgZGFzaGJvYXJkSW5mbyxcbiAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzLFxuICAgICAgaXNMb2FkaW5nLFxuICAgICAgcmVmcmVzaEZyZXF1ZW5jeSxcbiAgICAgIHNob3VsZFBlcnNpc3RSZWZyZXNoRnJlcXVlbmN5LFxuICAgICAgc2V0UmVmcmVzaEZyZXF1ZW5jeSxcbiAgICAgIGxhc3RNb2RpZmllZFRpbWUsXG4gICAgICBsb2dFdmVudCxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IHVzZXJDYW5FZGl0ID1cbiAgICAgIGRhc2hib2FyZEluZm8uZGFzaF9lZGl0X3Blcm0gJiYgIWRhc2hib2FyZEluZm8uaXNfbWFuYWdlZF9leHRlcm5hbGx5O1xuICAgIGNvbnN0IHVzZXJDYW5TaGFyZSA9IGRhc2hib2FyZEluZm8uZGFzaF9zaGFyZV9wZXJtO1xuICAgIGNvbnN0IHVzZXJDYW5TYXZlQXMgPSBkYXNoYm9hcmRJbmZvLmRhc2hfc2F2ZV9wZXJtO1xuICAgIGNvbnN0IHVzZXJDYW5DdXJhdGUgPVxuICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTUJFRERFRF9TVVBFUlNFVCkgJiZcbiAgICAgIGZpbmRQZXJtaXNzaW9uKCdjYW5fc2V0X2VtYmVkZGVkJywgJ0Rhc2hib2FyZCcsIHVzZXIucm9sZXMpO1xuICAgIGNvbnN0IHJlZnJlc2hMaW1pdCA9XG4gICAgICBkYXNoYm9hcmRJbmZvLmNvbW1vbj8uY29uZj8uU1VQRVJTRVRfREFTSEJPQVJEX1BFUklPRElDQUxfUkVGUkVTSF9MSU1JVDtcbiAgICBjb25zdCByZWZyZXNoV2FybmluZyA9XG4gICAgICBkYXNoYm9hcmRJbmZvLmNvbW1vbj8uY29uZlxuICAgICAgICA/LlNVUEVSU0VUX0RBU0hCT0FSRF9QRVJJT0RJQ0FMX1JFRlJFU0hfV0FSTklOR19NRVNTQUdFO1xuXG4gICAgY29uc3QgaGFuZGxlT25Qcm9wZXJ0aWVzQ2hhbmdlID0gdXBkYXRlcyA9PiB7XG4gICAgICBjb25zdCB7IGRhc2hib2FyZEluZm9DaGFuZ2VkLCBkYXNoYm9hcmRUaXRsZUNoYW5nZWQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgIHNldENvbG9yU2NoZW1lKHVwZGF0ZXMuY29sb3JTY2hlbWUpO1xuICAgICAgZGFzaGJvYXJkSW5mb0NoYW5nZWQoe1xuICAgICAgICBzbHVnOiB1cGRhdGVzLnNsdWcsXG4gICAgICAgIG1ldGFkYXRhOiBKU09OLnBhcnNlKHVwZGF0ZXMuanNvbk1ldGFkYXRhIHx8ICd7fScpLFxuICAgICAgICBjZXJ0aWZpZWRfYnk6IHVwZGF0ZXMuY2VydGlmaWVkQnksXG4gICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogdXBkYXRlcy5jZXJ0aWZpY2F0aW9uRGV0YWlscyxcbiAgICAgICAgb3duZXJzOiB1cGRhdGVzLm93bmVycyxcbiAgICAgICAgcm9sZXM6IHVwZGF0ZXMucm9sZXMsXG4gICAgICB9KTtcbiAgICAgIHNldFVuc2F2ZWRDaGFuZ2VzKHRydWUpO1xuICAgICAgZGFzaGJvYXJkVGl0bGVDaGFuZ2VkKHVwZGF0ZXMudGl0bGUpO1xuICAgIH07XG5cbiAgICBjb25zdCBOYXZFeHRlbnNpb24gPSB1aU92ZXJyaWRlUmVnaXN0cnkuZ2V0KCdkYXNoYm9hcmQubmF2LnJpZ2h0Jyk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjc3M9e2hlYWRlckNvbnRhaW5lclN0eWxlfVxuICAgICAgICBkYXRhLXRlc3Q9XCJkYXNoYm9hcmQtaGVhZGVyLWNvbnRhaW5lclwiXG4gICAgICAgIGRhdGEtdGVzdC1pZD17ZGFzaGJvYXJkSW5mby5pZH1cbiAgICAgICAgY2xhc3NOYW1lPVwiZGFzaGJvYXJkLWhlYWRlci1jb250YWluZXJcIlxuICAgICAgPlxuICAgICAgICA8UGFnZUhlYWRlcldpdGhBY3Rpb25zXG4gICAgICAgICAgZWRpdGFibGVUaXRsZVByb3BzPXt7XG4gICAgICAgICAgICB0aXRsZTogZGFzaGJvYXJkVGl0bGUsXG4gICAgICAgICAgICBjYW5FZGl0OiB1c2VyQ2FuRWRpdCAmJiBlZGl0TW9kZSxcbiAgICAgICAgICAgIG9uU2F2ZTogdGhpcy5oYW5kbGVDaGFuZ2VUZXh0LFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHQoJ0FkZCB0aGUgbmFtZSBvZiB0aGUgZGFzaGJvYXJkJyksXG4gICAgICAgICAgICBsYWJlbDogdCgnRGFzaGJvYXJkIHRpdGxlJyksXG4gICAgICAgICAgICBzaG93VG9vbHRpcDogZmFsc2UsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBjZXJ0aWZpY2F0aWVkQmFkZ2VQcm9wcz17e1xuICAgICAgICAgICAgY2VydGlmaWVkQnk6IGRhc2hib2FyZEluZm8uY2VydGlmaWVkX2J5LFxuICAgICAgICAgICAgZGV0YWlsczogZGFzaGJvYXJkSW5mby5jZXJ0aWZpY2F0aW9uX2RldGFpbHMsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBmYXZlU3RhclByb3BzPXt7XG4gICAgICAgICAgICBpdGVtSWQ6IGRhc2hib2FyZEluZm8uaWQsXG4gICAgICAgICAgICBmZXRjaEZhdmVTdGFyOiB0aGlzLnByb3BzLmZldGNoRmF2ZVN0YXIsXG4gICAgICAgICAgICBzYXZlRmF2ZVN0YXI6IHRoaXMucHJvcHMuc2F2ZUZhdmVTdGFyLFxuICAgICAgICAgICAgaXNTdGFycmVkOiB0aGlzLnByb3BzLmlzU3RhcnJlZCxcbiAgICAgICAgICAgIHNob3dUb29sdGlwOiB0cnVlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgdGl0bGVQYW5lbEFkZGl0aW9uYWxJdGVtcz17W1xuICAgICAgICAgICAgIWVkaXRNb2RlICYmIChcbiAgICAgICAgICAgICAgPFB1Ymxpc2hlZFN0YXR1c1xuICAgICAgICAgICAgICAgIGRhc2hib2FyZElkPXtkYXNoYm9hcmRJbmZvLmlkfVxuICAgICAgICAgICAgICAgIGlzUHVibGlzaGVkPXtpc1B1Ymxpc2hlZH1cbiAgICAgICAgICAgICAgICBzYXZlUHVibGlzaGVkPXt0aGlzLnByb3BzLnNhdmVQdWJsaXNoZWR9XG4gICAgICAgICAgICAgICAgY2FuRWRpdD17dXNlckNhbkVkaXR9XG4gICAgICAgICAgICAgICAgY2FuU2F2ZT17dXNlckNhblNhdmVBc31cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXshZWRpdE1vZGV9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApLFxuICAgICAgICAgIF19XG4gICAgICAgICAgcmlnaHRQYW5lbEFkZGl0aW9uYWxJdGVtcz17XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAge3VzZXJDYW5TYXZlQXMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbi1jb250YWluZXJcIlxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PVwiZGFzaGJvYXJkLWVkaXQtYWN0aW9uc1wiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2VkaXRNb2RlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2FjdGlvbkJ1dHRvbnNTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1bmRvUmVkb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJkYXNoYm9hcmQtdW5kby10b29sdGlwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3QoJ1VuZG8gdGhlIGFjdGlvbicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U3R5bGVkVW5kb1JlZG9CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3VuZG9MZW5ndGggPCAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25zLlVuZG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRvUmVkb1N0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmVtcGhhc2l6ZVVuZG8gJiYgdW5kb1JlZG9FbXBoYXNpemVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRvTGVuZ3RoIDwgMSAmJiB1bmRvUmVkb0Rpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3VuZG9MZW5ndGggJiYgb25VbmRvfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PVwidW5kby1hY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU9XCJ4bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TdHlsZWRVbmRvUmVkb0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiZGFzaGJvYXJkLXJlZG8tdG9vbHRpcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdSZWRvIHRoZSBhY3Rpb24nKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0eWxlZFVuZG9SZWRvQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtyZWRvTGVuZ3RoIDwgMX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29ucy5SZWRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3M9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kb1JlZG9TdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5lbXBoYXNpemVSZWRvICYmIHVuZG9SZWRvRW1waGFzaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkb0xlbmd0aCA8IDEgJiYgdW5kb1JlZG9EaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtyZWRvTGVuZ3RoICYmIG9uUmVkb31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdD1cInJlZG8tYWN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplPVwieGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU3R5bGVkVW5kb1JlZG9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtkaXNjYXJkQnRuU3R5bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jb25zdHJ1Y3Rvci5kaXNjYXJkQ2hhbmdlc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9XCJkaXNjYXJkLWNoYW5nZXMtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e3QoJ0Rpc2NhcmQnKX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dCgnRGlzY2FyZCcpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17c2F2ZUJ0blN0eWxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshaGFzVW5zYXZlZENoYW5nZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHlsZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vdmVyd3JpdGVEYXNoYm9hcmR9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9XCJoZWFkZXItc2F2ZS1idXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17dCgnU2F2ZScpfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0KCdTYXZlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2VkaXRNb2RlID8gKFxuICAgICAgICAgICAgICAgIDxVbmRvUmVkb0tleUxpc3RlbmVyc1xuICAgICAgICAgICAgICAgICAgb25VbmRvPXt0aGlzLmhhbmRsZUN0cmxafVxuICAgICAgICAgICAgICAgICAgb25SZWRvPXt0aGlzLmhhbmRsZUN0cmxZfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2FjdGlvbkJ1dHRvbnNTdHlsZX0+XG4gICAgICAgICAgICAgICAgICB7TmF2RXh0ZW5zaW9uICYmIDxOYXZFeHRlbnNpb24gLz59XG4gICAgICAgICAgICAgICAgICB7dXNlckNhbkVkaXQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PVwiZWRpdC1kYXNoYm9hcmQtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY3Rpb24tYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2VkaXRCdXR0b25TdHlsZX1cbiAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXt0KCdFZGl0IGRhc2hib2FyZCcpfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3QoJ0VkaXQgZGFzaGJvYXJkJyl9XG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgICBtZW51RHJvcGRvd25Qcm9wcz17e1xuICAgICAgICAgICAgZ2V0UG9wdXBDb250YWluZXI6IHRyaWdnZXJOb2RlID0+XG4gICAgICAgICAgICAgIHRyaWdnZXJOb2RlLmNsb3Nlc3QoJy5oZWFkZXItd2l0aC1hY3Rpb25zJyksXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLnN0YXRlLmlzRHJvcGRvd25WaXNpYmxlLFxuICAgICAgICAgICAgb25WaXNpYmxlQ2hhbmdlOiB0aGlzLnNldElzRHJvcGRvd25WaXNpYmxlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgYWRkaXRpb25hbEFjdGlvbnNNZW51PXtcbiAgICAgICAgICAgIDxIZWFkZXJBY3Rpb25zRHJvcGRvd25cbiAgICAgICAgICAgICAgYWRkU3VjY2Vzc1RvYXN0PXt0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdH1cbiAgICAgICAgICAgICAgYWRkRGFuZ2VyVG9hc3Q9e3RoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3R9XG4gICAgICAgICAgICAgIGRhc2hib2FyZElkPXtkYXNoYm9hcmRJbmZvLmlkfVxuICAgICAgICAgICAgICBkYXNoYm9hcmRUaXRsZT17ZGFzaGJvYXJkVGl0bGV9XG4gICAgICAgICAgICAgIGRhc2hib2FyZEluZm89e2Rhc2hib2FyZEluZm99XG4gICAgICAgICAgICAgIGRhdGFNYXNrPXtkYXRhTWFza31cbiAgICAgICAgICAgICAgbGF5b3V0PXtsYXlvdXR9XG4gICAgICAgICAgICAgIGV4cGFuZGVkU2xpY2VzPXtleHBhbmRlZFNsaWNlc31cbiAgICAgICAgICAgICAgY3VzdG9tQ3NzPXtjdXN0b21Dc3N9XG4gICAgICAgICAgICAgIGNvbG9yTmFtZXNwYWNlPXtjb2xvck5hbWVzcGFjZX1cbiAgICAgICAgICAgICAgY29sb3JTY2hlbWU9e2NvbG9yU2NoZW1lfVxuICAgICAgICAgICAgICBvblNhdmU9e29uU2F2ZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICBmb3JjZVJlZnJlc2hBbGxDaGFydHM9e3RoaXMuZm9yY2VSZWZyZXNofVxuICAgICAgICAgICAgICBzdGFydFBlcmlvZGljUmVuZGVyPXt0aGlzLnN0YXJ0UGVyaW9kaWNSZW5kZXJ9XG4gICAgICAgICAgICAgIHJlZnJlc2hGcmVxdWVuY3k9e3JlZnJlc2hGcmVxdWVuY3l9XG4gICAgICAgICAgICAgIHNob3VsZFBlcnNpc3RSZWZyZXNoRnJlcXVlbmN5PXtzaG91bGRQZXJzaXN0UmVmcmVzaEZyZXF1ZW5jeX1cbiAgICAgICAgICAgICAgc2V0UmVmcmVzaEZyZXF1ZW5jeT17c2V0UmVmcmVzaEZyZXF1ZW5jeX1cbiAgICAgICAgICAgICAgdXBkYXRlQ3NzPXt1cGRhdGVDc3N9XG4gICAgICAgICAgICAgIGVkaXRNb2RlPXtlZGl0TW9kZX1cbiAgICAgICAgICAgICAgaGFzVW5zYXZlZENoYW5nZXM9e2hhc1Vuc2F2ZWRDaGFuZ2VzfVxuICAgICAgICAgICAgICB1c2VyQ2FuRWRpdD17dXNlckNhbkVkaXR9XG4gICAgICAgICAgICAgIHVzZXJDYW5TaGFyZT17dXNlckNhblNoYXJlfVxuICAgICAgICAgICAgICB1c2VyQ2FuU2F2ZT17dXNlckNhblNhdmVBc31cbiAgICAgICAgICAgICAgdXNlckNhbkN1cmF0ZT17dXNlckNhbkN1cmF0ZX1cbiAgICAgICAgICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAgIHNob3dQcm9wZXJ0aWVzTW9kYWw9e3RoaXMuc2hvd1Byb3BlcnRpZXNNb2RhbH1cbiAgICAgICAgICAgICAgbWFuYWdlRW1iZWRkZWQ9e3RoaXMuc2hvd0VtYmVkTW9kYWx9XG4gICAgICAgICAgICAgIHJlZnJlc2hMaW1pdD17cmVmcmVzaExpbWl0fVxuICAgICAgICAgICAgICByZWZyZXNoV2FybmluZz17cmVmcmVzaFdhcm5pbmd9XG4gICAgICAgICAgICAgIGxhc3RNb2RpZmllZFRpbWU9e2xhc3RNb2RpZmllZFRpbWV9XG4gICAgICAgICAgICAgIGlzRHJvcGRvd25WaXNpYmxlPXt0aGlzLnN0YXRlLmlzRHJvcGRvd25WaXNpYmxlfVxuICAgICAgICAgICAgICBzZXRJc0Ryb3Bkb3duVmlzaWJsZT17dGhpcy5zZXRJc0Ryb3Bkb3duVmlzaWJsZX1cbiAgICAgICAgICAgICAgbG9nRXZlbnQ9e2xvZ0V2ZW50fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgICAgc2hvd0ZhdmVTdGFyPXt1c2VyPy51c2VySWQgJiYgZGFzaGJvYXJkSW5mbz8uaWR9XG4gICAgICAgICAgc2hvd1RpdGxlUGFuZWxJdGVtc1xuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5zaG93aW5nUHJvcGVydGllc01vZGFsICYmIChcbiAgICAgICAgICA8UHJvcGVydGllc01vZGFsXG4gICAgICAgICAgICBkYXNoYm9hcmRJZD17ZGFzaGJvYXJkSW5mby5pZH1cbiAgICAgICAgICAgIGRhc2hib2FyZEluZm89e2Rhc2hib2FyZEluZm99XG4gICAgICAgICAgICBkYXNoYm9hcmRUaXRsZT17ZGFzaGJvYXJkVGl0bGV9XG4gICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dpbmdQcm9wZXJ0aWVzTW9kYWx9XG4gICAgICAgICAgICBvbkhpZGU9e3RoaXMuaGlkZVByb3BlcnRpZXNNb2RhbH1cbiAgICAgICAgICAgIGNvbG9yU2NoZW1lPXt0aGlzLnByb3BzLmNvbG9yU2NoZW1lfVxuICAgICAgICAgICAgb25TdWJtaXQ9e2hhbmRsZU9uUHJvcGVydGllc0NoYW5nZX1cbiAgICAgICAgICAgIG9ubHlBcHBseVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG5cbiAgICAgICAgPE92ZXJ3cml0ZUNvbmZpcm0gLz5cblxuICAgICAgICB7dXNlckNhbkN1cmF0ZSAmJiAoXG4gICAgICAgICAgPERhc2hib2FyZEVtYmVkTW9kYWxcbiAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd2luZ0VtYmVkTW9kYWx9XG4gICAgICAgICAgICBvbkhpZGU9e3RoaXMuaGlkZUVtYmVkTW9kYWx9XG4gICAgICAgICAgICBkYXNoYm9hcmRJZD17ZGFzaGJvYXJkSW5mby5pZH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8R2xvYmFsXG4gICAgICAgICAgc3R5bGVzPXtjc3NgXG4gICAgICAgICAgICAuYW50LW1lbnUtdmVydGljYWwge1xuICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuSGVhZGVyLnByb3BUeXBlcyA9IHByb3BUeXBlcztcbkhlYWRlci5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjtcbiJdfQ== */\"],\n\n          onClick: undoLength && onUndo,\n          \"data-test\": \"undo-action\",\n          iconSize: \"xl\" }))),\n\n\n\n        ___EmotionJSX(Tooltip, {\n          id: \"dashboard-redo-tooltip\",\n          title: t('Redo the action') },\n\n        ___EmotionJSX(StyledUndoRedoButton, {\n          type: \"text\",\n          disabled: redoLength < 1 },\n\n        ___EmotionJSX(Icons.Redo, {\n          css: [\n          undoRedoStyle,\n          this.state.emphasizeRedo && undoRedoEmphasized,\n          redoLength < 1 && undoRedoDisabled, process.env.NODE_ENV === \"production\" ? \"\" : \";label:Header;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2Rhc2hib2FyZC9jb21wb25lbnRzL0hlYWRlci9pbmRleC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBaWtCOEIiLCJmaWxlIjoiL1VzZXJzL2JvZ2Rhbmt5cnlsaXVrL2NvZGUvb3BlbnNvdXJjZS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvSGVhZGVyL2luZGV4LmpzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQge1xuICBzdHlsZWQsXG4gIGNzcyxcbiAgRmVhdHVyZUZsYWcsXG4gIHQsXG4gIGdldFNoYXJlZExhYmVsQ29sb3IsXG4gIGdldFVpT3ZlcnJpZGVSZWdpc3RyeSxcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgR2xvYmFsIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgaXNGZWF0dXJlRW5hYmxlZCB9IGZyb20gJ3NyYy9mZWF0dXJlRmxhZ3MnO1xuaW1wb3J0IHtcbiAgTE9HX0FDVElPTlNfUEVSSU9ESUNfUkVOREVSX0RBU0hCT0FSRCxcbiAgTE9HX0FDVElPTlNfRk9SQ0VfUkVGUkVTSF9EQVNIQk9BUkQsXG4gIExPR19BQ1RJT05TX1RPR0dMRV9FRElUX0RBU0hCT0FSRCxcbn0gZnJvbSAnc3JjL2xvZ2dlci9Mb2dVdGlscyc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnc3JjL2NvbXBvbmVudHMvSWNvbnMnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IHsgQW50ZEJ1dHRvbiB9IGZyb20gJ3NyYy9jb21wb25lbnRzLyc7XG5pbXBvcnQgeyBmaW5kUGVybWlzc2lvbiB9IGZyb20gJ3NyYy91dGlscy9maW5kUGVybWlzc2lvbic7XG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvVG9vbHRpcCc7XG5pbXBvcnQgeyBzYWZlU3RyaW5naWZ5IH0gZnJvbSAnc3JjL3V0aWxzL3NhZmVTdHJpbmdpZnknO1xuaW1wb3J0IEhlYWRlckFjdGlvbnNEcm9wZG93biBmcm9tICdzcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvSGVhZGVyL0hlYWRlckFjdGlvbnNEcm9wZG93bic7XG5pbXBvcnQgUHVibGlzaGVkU3RhdHVzIGZyb20gJ3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9QdWJsaXNoZWRTdGF0dXMnO1xuaW1wb3J0IFVuZG9SZWRvS2V5TGlzdGVuZXJzIGZyb20gJ3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9VbmRvUmVkb0tleUxpc3RlbmVycyc7XG5pbXBvcnQgUHJvcGVydGllc01vZGFsIGZyb20gJ3NyYy9kYXNoYm9hcmQvY29tcG9uZW50cy9Qcm9wZXJ0aWVzTW9kYWwnO1xuaW1wb3J0IHsgY2hhcnRQcm9wU2hhcGUgfSBmcm9tICdzcmMvZGFzaGJvYXJkL3V0aWwvcHJvcFNoYXBlcyc7XG5pbXBvcnQge1xuICBVTkRPX0xJTUlULFxuICBTQVZFX1RZUEVfT1ZFUldSSVRFLFxuICBEQVNIQk9BUkRfUE9TSVRJT05fREFUQV9MSU1JVCxcbn0gZnJvbSAnc3JjL2Rhc2hib2FyZC91dGlsL2NvbnN0YW50cyc7XG5pbXBvcnQgc2V0UGVyaW9kaWNSdW5uZXIsIHtcbiAgc3RvcFBlcmlvZGljUmVuZGVyLFxufSBmcm9tICdzcmMvZGFzaGJvYXJkL3V0aWwvc2V0UGVyaW9kaWNSdW5uZXInO1xuaW1wb3J0IHsgUGFnZUhlYWRlcldpdGhBY3Rpb25zIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvUGFnZUhlYWRlcldpdGhBY3Rpb25zJztcbmltcG9ydCB7IERhc2hib2FyZEVtYmVkTW9kYWwgfSBmcm9tICcuLi9EYXNoYm9hcmRFbWJlZENvbnRyb2xzJztcbmltcG9ydCBPdmVyd3JpdGVDb25maXJtIGZyb20gJy4uL092ZXJ3cml0ZUNvbmZpcm0nO1xuXG5jb25zdCB1aU92ZXJyaWRlUmVnaXN0cnkgPSBnZXRVaU92ZXJyaWRlUmVnaXN0cnkoKTtcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBhZGRTdWNjZXNzVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGFkZERhbmdlclRvYXN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBhZGRXYXJuaW5nVG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHVzZXI6IFByb3BUeXBlcy5vYmplY3QsIC8vIFVzZXJXaXRoUGVybWlzc2lvbnNBbmRSb2xlcyxcbiAgZGFzaGJvYXJkSW5mbzogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBkYXNoYm9hcmRUaXRsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgZGF0YU1hc2s6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgY2hhcnRzOiBQcm9wVHlwZXMub2JqZWN0T2YoY2hhcnRQcm9wU2hhcGUpLmlzUmVxdWlyZWQsXG4gIGxheW91dDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBleHBhbmRlZFNsaWNlczogUHJvcFR5cGVzLm9iamVjdCxcbiAgY3VzdG9tQ3NzOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb2xvck5hbWVzcGFjZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29sb3JTY2hlbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHNldENvbG9yU2NoZW1lOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzZXRVbnNhdmVkQ2hhbmdlczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgaXNTdGFycmVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBpc1B1Ymxpc2hlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgaXNMb2FkaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBvblNhdmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBmZXRjaEZhdmVTdGFyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBmZXRjaENoYXJ0czogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgc2F2ZUZhdmVTdGFyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzYXZlUHVibGlzaGVkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICB1cGRhdGVEYXNoYm9hcmRUaXRsZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZWRpdE1vZGU6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIHNldEVkaXRNb2RlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBzaG93QnVpbGRlclBhbmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHVwZGF0ZUNzczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgbG9nRXZlbnQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGhhc1Vuc2F2ZWRDaGFuZ2VzOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBtYXhVbmRvSGlzdG9yeUV4Y2VlZGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBsYXN0TW9kaWZpZWRUaW1lOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG5cbiAgLy8gcmVkdXhcbiAgb25SZWZyZXNoOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBvblVuZG86IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uUmVkbzogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgdW5kb0xlbmd0aDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICByZWRvTGVuZ3RoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIHNldE1heFVuZG9IaXN0b3J5RXhjZWVkZWQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG1heFVuZG9IaXN0b3J5VG9hc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIHJlZnJlc2hGcmVxdWVuY3k6IFByb3BUeXBlcy5udW1iZXIsXG4gIHNob3VsZFBlcnNpc3RSZWZyZXNoRnJlcXVlbmN5OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBzZXRSZWZyZXNoRnJlcXVlbmN5OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBkYXNoYm9hcmRJbmZvQ2hhbmdlZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgZGFzaGJvYXJkVGl0bGVDaGFuZ2VkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBjb2xvck5hbWVzcGFjZTogdW5kZWZpbmVkLFxuICBjb2xvclNjaGVtZTogdW5kZWZpbmVkLFxufTtcblxuY29uc3QgaGVhZGVyQ29udGFpbmVyU3R5bGUgPSB0aGVtZSA9PiBjc3NgXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbmA7XG5cbmNvbnN0IGVkaXRCdXR0b25TdHlsZSA9IHRoZW1lID0+IGNzc2BcbiAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkuZGFyazJ9O1xuYDtcblxuY29uc3QgYWN0aW9uQnV0dG9uc1N0eWxlID0gdGhlbWUgPT4gY3NzYFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gIC5hY3Rpb24tc2NoZWR1bGUtcmVwb3J0IHtcbiAgICBtYXJnaW4tbGVmdDogJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHg7XG4gIH1cblxuICAudW5kb1JlZG8ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLmdyaWRVbml0ICogMn1weDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkVW5kb1JlZG9CdXR0b24gPSBzdHlsZWQoQW50ZEJ1dHRvbilgXG4gIHBhZGRpbmc6IDA7XG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICB9XG5gO1xuXG5jb25zdCB1bmRvUmVkb1N0eWxlID0gdGhlbWUgPT4gY3NzYFxuICBjb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0MX07XG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuYmFzZX07XG4gIH1cbmA7XG5cbmNvbnN0IHVuZG9SZWRvRW1waGFzaXplZCA9IHRoZW1lID0+IGNzc2BcbiAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfTtcbmA7XG5cbmNvbnN0IHVuZG9SZWRvRGlzYWJsZWQgPSB0aGVtZSA9PiBjc3NgXG4gIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbmA7XG5cbmNvbnN0IHNhdmVCdG5TdHlsZSA9IHRoZW1lID0+IGNzc2BcbiAgbWluLXdpZHRoOiAke3RoZW1lLmdyaWRVbml0ICogMTd9cHg7XG4gIGhlaWdodDogJHt0aGVtZS5ncmlkVW5pdCAqIDh9cHg7XG5gO1xuXG5jb25zdCBkaXNjYXJkQnRuU3R5bGUgPSB0aGVtZSA9PiBjc3NgXG4gIG1pbi13aWR0aDogJHt0aGVtZS5ncmlkVW5pdCAqIDIyfXB4O1xuICBoZWlnaHQ6ICR7dGhlbWUuZ3JpZFVuaXQgKiA4fXB4O1xuYDtcblxuY2xhc3MgSGVhZGVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBkaXNjYXJkQ2hhbmdlcygpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdlZGl0Jyk7XG4gICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbih1cmwpO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRpZE5vdGlmeU1heFVuZG9IaXN0b3J5VG9hc3Q6IGZhbHNlLFxuICAgICAgZW1waGFzaXplVW5kbzogZmFsc2UsXG4gICAgICBlbXBoYXNpemVSZWRvOiBmYWxzZSxcbiAgICAgIHNob3dpbmdQcm9wZXJ0aWVzTW9kYWw6IGZhbHNlLFxuICAgICAgaXNEcm9wZG93blZpc2libGU6IGZhbHNlLFxuICAgIH07XG5cbiAgICB0aGlzLmhhbmRsZUNoYW5nZVRleHQgPSB0aGlzLmhhbmRsZUNoYW5nZVRleHQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUN0cmxaID0gdGhpcy5oYW5kbGVDdHJsWi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlQ3RybFkgPSB0aGlzLmhhbmRsZUN0cmxZLmJpbmQodGhpcyk7XG4gICAgdGhpcy50b2dnbGVFZGl0TW9kZSA9IHRoaXMudG9nZ2xlRWRpdE1vZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZvcmNlUmVmcmVzaCA9IHRoaXMuZm9yY2VSZWZyZXNoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyID0gdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vdmVyd3JpdGVEYXNoYm9hcmQgPSB0aGlzLm92ZXJ3cml0ZURhc2hib2FyZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2hvd1Byb3BlcnRpZXNNb2RhbCA9IHRoaXMuc2hvd1Byb3BlcnRpZXNNb2RhbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGlkZVByb3BlcnRpZXNNb2RhbCA9IHRoaXMuaGlkZVByb3BlcnRpZXNNb2RhbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0SXNEcm9wZG93blZpc2libGUgPSB0aGlzLnNldElzRHJvcGRvd25WaXNpYmxlLmJpbmQodGhpcyk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCB7IHJlZnJlc2hGcmVxdWVuY3kgfSA9IHRoaXMucHJvcHM7XG4gICAgdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyKHJlZnJlc2hGcmVxdWVuY3kgKiAxMDAwKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5yZWZyZXNoRnJlcXVlbmN5ICE9PSBwcmV2UHJvcHMucmVmcmVzaEZyZXF1ZW5jeSkge1xuICAgICAgY29uc3QgeyByZWZyZXNoRnJlcXVlbmN5IH0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5zdGFydFBlcmlvZGljUmVuZGVyKHJlZnJlc2hGcmVxdWVuY3kgKiAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBpZiAoXG4gICAgICBVTkRPX0xJTUlUIC0gbmV4dFByb3BzLnVuZG9MZW5ndGggPD0gMCAmJlxuICAgICAgIXRoaXMuc3RhdGUuZGlkTm90aWZ5TWF4VW5kb0hpc3RvcnlUb2FzdFxuICAgICkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSgoKSA9PiAoeyBkaWROb3RpZnlNYXhVbmRvSGlzdG9yeVRvYXN0OiB0cnVlIH0pKTtcbiAgICAgIHRoaXMucHJvcHMubWF4VW5kb0hpc3RvcnlUb2FzdCgpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBuZXh0UHJvcHMudW5kb0xlbmd0aCA+IFVORE9fTElNSVQgJiZcbiAgICAgICF0aGlzLnByb3BzLm1heFVuZG9IaXN0b3J5RXhjZWVkZWRcbiAgICApIHtcbiAgICAgIHRoaXMucHJvcHMuc2V0TWF4VW5kb0hpc3RvcnlFeGNlZWRlZCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHN0b3BQZXJpb2RpY1JlbmRlcih0aGlzLnJlZnJlc2hUaW1lcik7XG4gICAgdGhpcy5wcm9wcy5zZXRSZWZyZXNoRnJlcXVlbmN5KDApO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmN0cmxZVGltZW91dCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY3RybFpUaW1lb3V0KTtcbiAgfVxuXG4gIGhhbmRsZUNoYW5nZVRleHQobmV4dFRleHQpIHtcbiAgICBjb25zdCB7IHVwZGF0ZURhc2hib2FyZFRpdGxlLCBvbkNoYW5nZSB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAobmV4dFRleHQgJiYgdGhpcy5wcm9wcy5kYXNoYm9hcmRUaXRsZSAhPT0gbmV4dFRleHQpIHtcbiAgICAgIHVwZGF0ZURhc2hib2FyZFRpdGxlKG5leHRUZXh0KTtcbiAgICAgIG9uQ2hhbmdlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0SXNEcm9wZG93blZpc2libGUodmlzaWJsZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNEcm9wZG93blZpc2libGU6IHZpc2libGUsXG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVDdHJsWSgpIHtcbiAgICB0aGlzLnByb3BzLm9uUmVkbygpO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVSZWRvOiB0cnVlIH0sICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmN0cmxZVGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMuY3RybFlUaW1lb3V0KTtcbiAgICAgIHRoaXMuY3RybFlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVSZWRvOiBmYWxzZSB9KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVDdHJsWigpIHtcbiAgICB0aGlzLnByb3BzLm9uVW5kbygpO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVVbmRvOiB0cnVlIH0sICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmN0cmxaVGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMuY3RybFpUaW1lb3V0KTtcbiAgICAgIHRoaXMuY3RybFpUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlbXBoYXNpemVVbmRvOiBmYWxzZSB9KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH1cblxuICBmb3JjZVJlZnJlc2goKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmlzTG9hZGluZykge1xuICAgICAgY29uc3QgY2hhcnRMaXN0ID0gT2JqZWN0LmtleXModGhpcy5wcm9wcy5jaGFydHMpO1xuICAgICAgdGhpcy5wcm9wcy5sb2dFdmVudChMT0dfQUNUSU9OU19GT1JDRV9SRUZSRVNIX0RBU0hCT0FSRCwge1xuICAgICAgICBmb3JjZTogdHJ1ZSxcbiAgICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICAgIGNoYXJ0Q291bnQ6IGNoYXJ0TGlzdC5sZW5ndGgsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uUmVmcmVzaChcbiAgICAgICAgY2hhcnRMaXN0LFxuICAgICAgICB0cnVlLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLnByb3BzLmRhc2hib2FyZEluZm8uaWQsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGFydFBlcmlvZGljUmVuZGVyKGludGVydmFsKSB7XG4gICAgbGV0IGludGVydmFsTWVzc2FnZTtcblxuICAgIGlmIChpbnRlcnZhbCkge1xuICAgICAgY29uc3QgeyBkYXNoYm9hcmRJbmZvIH0gPSB0aGlzLnByb3BzO1xuICAgICAgY29uc3QgcGVyaW9kaWNSZWZyZXNoT3B0aW9ucyA9XG4gICAgICAgIGRhc2hib2FyZEluZm8uY29tbW9uPy5jb25mPy5EQVNIQk9BUkRfQVVUT19SRUZSRVNIX0lOVEVSVkFMUztcbiAgICAgIGNvbnN0IHByZWRlZmluZWRWYWx1ZSA9IHBlcmlvZGljUmVmcmVzaE9wdGlvbnMuZmluZChcbiAgICAgICAgb3B0aW9uID0+IE51bWJlcihvcHRpb25bMF0pID09PSBpbnRlcnZhbCAvIDEwMDAsXG4gICAgICApO1xuXG4gICAgICBpZiAocHJlZGVmaW5lZFZhbHVlKSB7XG4gICAgICAgIGludGVydmFsTWVzc2FnZSA9IHQocHJlZGVmaW5lZFZhbHVlWzFdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludGVydmFsTWVzc2FnZSA9IG1vbWVudC5kdXJhdGlvbihpbnRlcnZhbCwgJ21pbGxpc2Vjb25kJykuaHVtYW5pemUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwZXJpb2RpY1JlbmRlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHsgZmV0Y2hDaGFydHMsIGxvZ0V2ZW50LCBjaGFydHMsIGRhc2hib2FyZEluZm8gfSA9IHRoaXMucHJvcHM7XG4gICAgICBjb25zdCB7IG1ldGFkYXRhIH0gPSBkYXNoYm9hcmRJbmZvO1xuICAgICAgY29uc3QgaW1tdW5lID0gbWV0YWRhdGEudGltZWRfcmVmcmVzaF9pbW11bmVfc2xpY2VzIHx8IFtdO1xuICAgICAgY29uc3QgYWZmZWN0ZWRDaGFydHMgPSBPYmplY3QudmFsdWVzKGNoYXJ0cylcbiAgICAgICAgLmZpbHRlcihjaGFydCA9PiBpbW11bmUuaW5kZXhPZihjaGFydC5pZCkgPT09IC0xKVxuICAgICAgICAubWFwKGNoYXJ0ID0+IGNoYXJ0LmlkKTtcblxuICAgICAgbG9nRXZlbnQoTE9HX0FDVElPTlNfUEVSSU9ESUNfUkVOREVSX0RBU0hCT0FSRCwge1xuICAgICAgICBpbnRlcnZhbCxcbiAgICAgICAgY2hhcnRDb3VudDogYWZmZWN0ZWRDaGFydHMubGVuZ3RoLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3BzLmFkZFdhcm5pbmdUb2FzdChcbiAgICAgICAgdChcbiAgICAgICAgICBgVGhpcyBkYXNoYm9hcmQgaXMgY3VycmVudGx5IGF1dG8gcmVmcmVzaGluZzsgdGhlIG5leHQgYXV0byByZWZyZXNoIHdpbGwgYmUgaW4gJXMuYCxcbiAgICAgICAgICBpbnRlcnZhbE1lc3NhZ2UsXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgaWYgKGRhc2hib2FyZEluZm8uY29tbW9uLmNvbmYuREFTSEJPQVJEX0FVVE9fUkVGUkVTSF9NT0RFID09PSAnZmV0Y2gnKSB7XG4gICAgICAgIC8vIGZvcmNlLXJlZnJlc2ggd2hpbGUgYXV0by1yZWZyZXNoIGluIGRhc2hib2FyZFxuICAgICAgICByZXR1cm4gZmV0Y2hDaGFydHMoXG4gICAgICAgICAgYWZmZWN0ZWRDaGFydHMsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgaW50ZXJ2YWwgKiAwLjIsXG4gICAgICAgICAgZGFzaGJvYXJkSW5mby5pZCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmZXRjaENoYXJ0cyhcbiAgICAgICAgYWZmZWN0ZWRDaGFydHMsXG4gICAgICAgIHRydWUsXG4gICAgICAgIGludGVydmFsICogMC4yLFxuICAgICAgICBkYXNoYm9hcmRJbmZvLmlkLFxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZWZyZXNoVGltZXIgPSBzZXRQZXJpb2RpY1J1bm5lcih7XG4gICAgICBpbnRlcnZhbCxcbiAgICAgIHBlcmlvZGljUmVuZGVyLFxuICAgICAgcmVmcmVzaFRpbWVyOiB0aGlzLnJlZnJlc2hUaW1lcixcbiAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZUVkaXRNb2RlKCkge1xuICAgIHRoaXMucHJvcHMubG9nRXZlbnQoTE9HX0FDVElPTlNfVE9HR0xFX0VESVRfREFTSEJPQVJELCB7XG4gICAgICBlZGl0X21vZGU6ICF0aGlzLnByb3BzLmVkaXRNb2RlLFxuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc2V0RWRpdE1vZGUoIXRoaXMucHJvcHMuZWRpdE1vZGUpO1xuICB9XG5cbiAgb3ZlcndyaXRlRGFzaGJvYXJkKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhc2hib2FyZFRpdGxlLFxuICAgICAgbGF5b3V0OiBwb3NpdGlvbnMsXG4gICAgICBjb2xvclNjaGVtZSxcbiAgICAgIGNvbG9yTmFtZXNwYWNlLFxuICAgICAgY3VzdG9tQ3NzLFxuICAgICAgZGFzaGJvYXJkSW5mbyxcbiAgICAgIHJlZnJlc2hGcmVxdWVuY3k6IGN1cnJlbnRSZWZyZXNoRnJlcXVlbmN5LFxuICAgICAgc2hvdWxkUGVyc2lzdFJlZnJlc2hGcmVxdWVuY3ksXG4gICAgICBsYXN0TW9kaWZpZWRUaW1lLFxuICAgICAgc2x1ZyxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIGNoZWNrIHJlZnJlc2ggZnJlcXVlbmN5IGlzIGZvciBjdXJyZW50IHNlc3Npb24gb3IgcGVyc2lzdFxuICAgIGNvbnN0IHJlZnJlc2hGcmVxdWVuY3kgPSBzaG91bGRQZXJzaXN0UmVmcmVzaEZyZXF1ZW5jeVxuICAgICAgPyBjdXJyZW50UmVmcmVzaEZyZXF1ZW5jeVxuICAgICAgOiBkYXNoYm9hcmRJbmZvLm1ldGFkYXRhPy5yZWZyZXNoX2ZyZXF1ZW5jeTtcblxuICAgIGNvbnN0IGN1cnJlbnRDb2xvclNjaGVtZSA9XG4gICAgICBkYXNoYm9hcmRJbmZvPy5tZXRhZGF0YT8uY29sb3Jfc2NoZW1lIHx8IGNvbG9yU2NoZW1lO1xuICAgIGNvbnN0IGN1cnJlbnRDb2xvck5hbWVzcGFjZSA9XG4gICAgICBkYXNoYm9hcmRJbmZvPy5tZXRhZGF0YT8uY29sb3JfbmFtZXNwYWNlIHx8IGNvbG9yTmFtZXNwYWNlO1xuICAgIGNvbnN0IGN1cnJlbnRTaGFyZWRMYWJlbENvbG9ycyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIGdldFNoYXJlZExhYmVsQ29sb3IoKS5nZXRDb2xvck1hcCgpLFxuICAgICk7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2VydGlmaWVkX2J5OiBkYXNoYm9hcmRJbmZvLmNlcnRpZmllZF9ieSxcbiAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogZGFzaGJvYXJkSW5mby5jZXJ0aWZpY2F0aW9uX2RldGFpbHMsXG4gICAgICBjc3M6IGN1c3RvbUNzcyxcbiAgICAgIGRhc2hib2FyZF90aXRsZTogZGFzaGJvYXJkVGl0bGUsXG4gICAgICBsYXN0X21vZGlmaWVkX3RpbWU6IGxhc3RNb2RpZmllZFRpbWUsXG4gICAgICBvd25lcnM6IGRhc2hib2FyZEluZm8ub3duZXJzLFxuICAgICAgcm9sZXM6IGRhc2hib2FyZEluZm8ucm9sZXMsXG4gICAgICBzbHVnLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgLi4uZGFzaGJvYXJkSW5mbz8ubWV0YWRhdGEsXG4gICAgICAgIGNvbG9yX25hbWVzcGFjZTogY3VycmVudENvbG9yTmFtZXNwYWNlLFxuICAgICAgICBjb2xvcl9zY2hlbWU6IGN1cnJlbnRDb2xvclNjaGVtZSxcbiAgICAgICAgcG9zaXRpb25zLFxuICAgICAgICByZWZyZXNoX2ZyZXF1ZW5jeTogcmVmcmVzaEZyZXF1ZW5jeSxcbiAgICAgICAgc2hhcmVkX2xhYmVsX2NvbG9yczogY3VycmVudFNoYXJlZExhYmVsQ29sb3JzLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgLy8gbWFrZSBzdXJlIHBvc2l0aW9ucyBkYXRhIGxlc3MgdGhhbiBEQiBzdG9yYWdlIGxpbWl0YXRpb246XG4gICAgY29uc3QgcG9zaXRpb25KU09OTGVuZ3RoID0gc2FmZVN0cmluZ2lmeShwb3NpdGlvbnMpLmxlbmd0aDtcbiAgICBjb25zdCBsaW1pdCA9XG4gICAgICBkYXNoYm9hcmRJbmZvLmNvbW1vbi5jb25mLlNVUEVSU0VUX0RBU0hCT0FSRF9QT1NJVElPTl9EQVRBX0xJTUlUIHx8XG4gICAgICBEQVNIQk9BUkRfUE9TSVRJT05fREFUQV9MSU1JVDtcbiAgICBpZiAocG9zaXRpb25KU09OTGVuZ3RoID49IGxpbWl0KSB7XG4gICAgICB0aGlzLnByb3BzLmFkZERhbmdlclRvYXN0KFxuICAgICAgICB0KFxuICAgICAgICAgICdZb3VyIGRhc2hib2FyZCBpcyB0b28gbGFyZ2UuIFBsZWFzZSByZWR1Y2UgaXRzIHNpemUgYmVmb3JlIHNhdmluZyBpdC4nLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBvc2l0aW9uSlNPTkxlbmd0aCA+PSBsaW1pdCAqIDAuOSkge1xuICAgICAgICB0aGlzLnByb3BzLmFkZFdhcm5pbmdUb2FzdCgnWW91ciBkYXNoYm9hcmQgaXMgbmVhciB0aGUgc2l6ZSBsaW1pdC4nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9wcy5vblNhdmUoZGF0YSwgZGFzaGJvYXJkSW5mby5pZCwgU0FWRV9UWVBFX09WRVJXUklURSk7XG4gICAgfVxuICB9XG5cbiAgc2hvd1Byb3BlcnRpZXNNb2RhbCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvd2luZ1Byb3BlcnRpZXNNb2RhbDogdHJ1ZSB9KTtcbiAgfVxuXG4gIGhpZGVQcm9wZXJ0aWVzTW9kYWwoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dpbmdQcm9wZXJ0aWVzTW9kYWw6IGZhbHNlIH0pO1xuICB9XG5cbiAgc2hvd0VtYmVkTW9kYWwgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dpbmdFbWJlZE1vZGFsOiB0cnVlIH0pO1xuICB9O1xuXG4gIGhpZGVFbWJlZE1vZGFsID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93aW5nRW1iZWRNb2RhbDogZmFsc2UgfSk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhc2hib2FyZFRpdGxlLFxuICAgICAgbGF5b3V0LFxuICAgICAgZXhwYW5kZWRTbGljZXMsXG4gICAgICBjdXN0b21Dc3MsXG4gICAgICBjb2xvck5hbWVzcGFjZSxcbiAgICAgIGRhdGFNYXNrLFxuICAgICAgc2V0Q29sb3JTY2hlbWUsXG4gICAgICBzZXRVbnNhdmVkQ2hhbmdlcyxcbiAgICAgIGNvbG9yU2NoZW1lLFxuICAgICAgb25VbmRvLFxuICAgICAgb25SZWRvLFxuICAgICAgdW5kb0xlbmd0aCxcbiAgICAgIHJlZG9MZW5ndGgsXG4gICAgICBvbkNoYW5nZSxcbiAgICAgIG9uU2F2ZSxcbiAgICAgIHVwZGF0ZUNzcyxcbiAgICAgIGVkaXRNb2RlLFxuICAgICAgaXNQdWJsaXNoZWQsXG4gICAgICB1c2VyLFxuICAgICAgZGFzaGJvYXJkSW5mbyxcbiAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzLFxuICAgICAgaXNMb2FkaW5nLFxuICAgICAgcmVmcmVzaEZyZXF1ZW5jeSxcbiAgICAgIHNob3VsZFBlcnNpc3RSZWZyZXNoRnJlcXVlbmN5LFxuICAgICAgc2V0UmVmcmVzaEZyZXF1ZW5jeSxcbiAgICAgIGxhc3RNb2RpZmllZFRpbWUsXG4gICAgICBsb2dFdmVudCxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IHVzZXJDYW5FZGl0ID1cbiAgICAgIGRhc2hib2FyZEluZm8uZGFzaF9lZGl0X3Blcm0gJiYgIWRhc2hib2FyZEluZm8uaXNfbWFuYWdlZF9leHRlcm5hbGx5O1xuICAgIGNvbnN0IHVzZXJDYW5TaGFyZSA9IGRhc2hib2FyZEluZm8uZGFzaF9zaGFyZV9wZXJtO1xuICAgIGNvbnN0IHVzZXJDYW5TYXZlQXMgPSBkYXNoYm9hcmRJbmZvLmRhc2hfc2F2ZV9wZXJtO1xuICAgIGNvbnN0IHVzZXJDYW5DdXJhdGUgPVxuICAgICAgaXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5FTUJFRERFRF9TVVBFUlNFVCkgJiZcbiAgICAgIGZpbmRQZXJtaXNzaW9uKCdjYW5fc2V0X2VtYmVkZGVkJywgJ0Rhc2hib2FyZCcsIHVzZXIucm9sZXMpO1xuICAgIGNvbnN0IHJlZnJlc2hMaW1pdCA9XG4gICAgICBkYXNoYm9hcmRJbmZvLmNvbW1vbj8uY29uZj8uU1VQRVJTRVRfREFTSEJPQVJEX1BFUklPRElDQUxfUkVGUkVTSF9MSU1JVDtcbiAgICBjb25zdCByZWZyZXNoV2FybmluZyA9XG4gICAgICBkYXNoYm9hcmRJbmZvLmNvbW1vbj8uY29uZlxuICAgICAgICA/LlNVUEVSU0VUX0RBU0hCT0FSRF9QRVJJT0RJQ0FMX1JFRlJFU0hfV0FSTklOR19NRVNTQUdFO1xuXG4gICAgY29uc3QgaGFuZGxlT25Qcm9wZXJ0aWVzQ2hhbmdlID0gdXBkYXRlcyA9PiB7XG4gICAgICBjb25zdCB7IGRhc2hib2FyZEluZm9DaGFuZ2VkLCBkYXNoYm9hcmRUaXRsZUNoYW5nZWQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgIHNldENvbG9yU2NoZW1lKHVwZGF0ZXMuY29sb3JTY2hlbWUpO1xuICAgICAgZGFzaGJvYXJkSW5mb0NoYW5nZWQoe1xuICAgICAgICBzbHVnOiB1cGRhdGVzLnNsdWcsXG4gICAgICAgIG1ldGFkYXRhOiBKU09OLnBhcnNlKHVwZGF0ZXMuanNvbk1ldGFkYXRhIHx8ICd7fScpLFxuICAgICAgICBjZXJ0aWZpZWRfYnk6IHVwZGF0ZXMuY2VydGlmaWVkQnksXG4gICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogdXBkYXRlcy5jZXJ0aWZpY2F0aW9uRGV0YWlscyxcbiAgICAgICAgb3duZXJzOiB1cGRhdGVzLm93bmVycyxcbiAgICAgICAgcm9sZXM6IHVwZGF0ZXMucm9sZXMsXG4gICAgICB9KTtcbiAgICAgIHNldFVuc2F2ZWRDaGFuZ2VzKHRydWUpO1xuICAgICAgZGFzaGJvYXJkVGl0bGVDaGFuZ2VkKHVwZGF0ZXMudGl0bGUpO1xuICAgIH07XG5cbiAgICBjb25zdCBOYXZFeHRlbnNpb24gPSB1aU92ZXJyaWRlUmVnaXN0cnkuZ2V0KCdkYXNoYm9hcmQubmF2LnJpZ2h0Jyk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjc3M9e2hlYWRlckNvbnRhaW5lclN0eWxlfVxuICAgICAgICBkYXRhLXRlc3Q9XCJkYXNoYm9hcmQtaGVhZGVyLWNvbnRhaW5lclwiXG4gICAgICAgIGRhdGEtdGVzdC1pZD17ZGFzaGJvYXJkSW5mby5pZH1cbiAgICAgICAgY2xhc3NOYW1lPVwiZGFzaGJvYXJkLWhlYWRlci1jb250YWluZXJcIlxuICAgICAgPlxuICAgICAgICA8UGFnZUhlYWRlcldpdGhBY3Rpb25zXG4gICAgICAgICAgZWRpdGFibGVUaXRsZVByb3BzPXt7XG4gICAgICAgICAgICB0aXRsZTogZGFzaGJvYXJkVGl0bGUsXG4gICAgICAgICAgICBjYW5FZGl0OiB1c2VyQ2FuRWRpdCAmJiBlZGl0TW9kZSxcbiAgICAgICAgICAgIG9uU2F2ZTogdGhpcy5oYW5kbGVDaGFuZ2VUZXh0LFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHQoJ0FkZCB0aGUgbmFtZSBvZiB0aGUgZGFzaGJvYXJkJyksXG4gICAgICAgICAgICBsYWJlbDogdCgnRGFzaGJvYXJkIHRpdGxlJyksXG4gICAgICAgICAgICBzaG93VG9vbHRpcDogZmFsc2UsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBjZXJ0aWZpY2F0aWVkQmFkZ2VQcm9wcz17e1xuICAgICAgICAgICAgY2VydGlmaWVkQnk6IGRhc2hib2FyZEluZm8uY2VydGlmaWVkX2J5LFxuICAgICAgICAgICAgZGV0YWlsczogZGFzaGJvYXJkSW5mby5jZXJ0aWZpY2F0aW9uX2RldGFpbHMsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBmYXZlU3RhclByb3BzPXt7XG4gICAgICAgICAgICBpdGVtSWQ6IGRhc2hib2FyZEluZm8uaWQsXG4gICAgICAgICAgICBmZXRjaEZhdmVTdGFyOiB0aGlzLnByb3BzLmZldGNoRmF2ZVN0YXIsXG4gICAgICAgICAgICBzYXZlRmF2ZVN0YXI6IHRoaXMucHJvcHMuc2F2ZUZhdmVTdGFyLFxuICAgICAgICAgICAgaXNTdGFycmVkOiB0aGlzLnByb3BzLmlzU3RhcnJlZCxcbiAgICAgICAgICAgIHNob3dUb29sdGlwOiB0cnVlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgdGl0bGVQYW5lbEFkZGl0aW9uYWxJdGVtcz17W1xuICAgICAgICAgICAgIWVkaXRNb2RlICYmIChcbiAgICAgICAgICAgICAgPFB1Ymxpc2hlZFN0YXR1c1xuICAgICAgICAgICAgICAgIGRhc2hib2FyZElkPXtkYXNoYm9hcmRJbmZvLmlkfVxuICAgICAgICAgICAgICAgIGlzUHVibGlzaGVkPXtpc1B1Ymxpc2hlZH1cbiAgICAgICAgICAgICAgICBzYXZlUHVibGlzaGVkPXt0aGlzLnByb3BzLnNhdmVQdWJsaXNoZWR9XG4gICAgICAgICAgICAgICAgY2FuRWRpdD17dXNlckNhbkVkaXR9XG4gICAgICAgICAgICAgICAgY2FuU2F2ZT17dXNlckNhblNhdmVBc31cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXshZWRpdE1vZGV9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApLFxuICAgICAgICAgIF19XG4gICAgICAgICAgcmlnaHRQYW5lbEFkZGl0aW9uYWxJdGVtcz17XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAge3VzZXJDYW5TYXZlQXMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbi1jb250YWluZXJcIlxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PVwiZGFzaGJvYXJkLWVkaXQtYWN0aW9uc1wiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2VkaXRNb2RlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjc3M9e2FjdGlvbkJ1dHRvbnNTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1bmRvUmVkb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJkYXNoYm9hcmQtdW5kby10b29sdGlwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3QoJ1VuZG8gdGhlIGFjdGlvbicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U3R5bGVkVW5kb1JlZG9CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3VuZG9MZW5ndGggPCAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb25zLlVuZG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRvUmVkb1N0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmVtcGhhc2l6ZVVuZG8gJiYgdW5kb1JlZG9FbXBoYXNpemVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRvTGVuZ3RoIDwgMSAmJiB1bmRvUmVkb0Rpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3VuZG9MZW5ndGggJiYgb25VbmRvfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PVwidW5kby1hY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU9XCJ4bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TdHlsZWRVbmRvUmVkb0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiZGFzaGJvYXJkLXJlZG8tdG9vbHRpcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0KCdSZWRvIHRoZSBhY3Rpb24nKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0eWxlZFVuZG9SZWRvQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtyZWRvTGVuZ3RoIDwgMX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29ucy5SZWRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3M9e1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kb1JlZG9TdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5lbXBoYXNpemVSZWRvICYmIHVuZG9SZWRvRW1waGFzaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkb0xlbmd0aCA8IDEgJiYgdW5kb1JlZG9EaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtyZWRvTGVuZ3RoICYmIG9uUmVkb31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdD1cInJlZG8tYWN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplPVwieGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU3R5bGVkVW5kb1JlZG9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzPXtkaXNjYXJkQnRuU3R5bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5jb25zdHJ1Y3Rvci5kaXNjYXJkQ2hhbmdlc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9XCJkaXNjYXJkLWNoYW5nZXMtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e3QoJ0Rpc2NhcmQnKX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dCgnRGlzY2FyZCcpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcz17c2F2ZUJ0blN0eWxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshaGFzVW5zYXZlZENoYW5nZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHlsZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vdmVyd3JpdGVEYXNoYm9hcmR9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3Q9XCJoZWFkZXItc2F2ZS1idXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17dCgnU2F2ZScpfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0KCdTYXZlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2VkaXRNb2RlID8gKFxuICAgICAgICAgICAgICAgIDxVbmRvUmVkb0tleUxpc3RlbmVyc1xuICAgICAgICAgICAgICAgICAgb25VbmRvPXt0aGlzLmhhbmRsZUN0cmxafVxuICAgICAgICAgICAgICAgICAgb25SZWRvPXt0aGlzLmhhbmRsZUN0cmxZfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjc3M9e2FjdGlvbkJ1dHRvbnNTdHlsZX0+XG4gICAgICAgICAgICAgICAgICB7TmF2RXh0ZW5zaW9uICYmIDxOYXZFeHRlbnNpb24gLz59XG4gICAgICAgICAgICAgICAgICB7dXNlckNhbkVkaXQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRWRpdE1vZGV9XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0PVwiZWRpdC1kYXNoYm9hcmQtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhY3Rpb24tYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBjc3M9e2VkaXRCdXR0b25TdHlsZX1cbiAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXt0KCdFZGl0IGRhc2hib2FyZCcpfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3QoJ0VkaXQgZGFzaGJvYXJkJyl9XG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgICBtZW51RHJvcGRvd25Qcm9wcz17e1xuICAgICAgICAgICAgZ2V0UG9wdXBDb250YWluZXI6IHRyaWdnZXJOb2RlID0+XG4gICAgICAgICAgICAgIHRyaWdnZXJOb2RlLmNsb3Nlc3QoJy5oZWFkZXItd2l0aC1hY3Rpb25zJyksXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLnN0YXRlLmlzRHJvcGRvd25WaXNpYmxlLFxuICAgICAgICAgICAgb25WaXNpYmxlQ2hhbmdlOiB0aGlzLnNldElzRHJvcGRvd25WaXNpYmxlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgYWRkaXRpb25hbEFjdGlvbnNNZW51PXtcbiAgICAgICAgICAgIDxIZWFkZXJBY3Rpb25zRHJvcGRvd25cbiAgICAgICAgICAgICAgYWRkU3VjY2Vzc1RvYXN0PXt0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdH1cbiAgICAgICAgICAgICAgYWRkRGFuZ2VyVG9hc3Q9e3RoaXMucHJvcHMuYWRkRGFuZ2VyVG9hc3R9XG4gICAgICAgICAgICAgIGRhc2hib2FyZElkPXtkYXNoYm9hcmRJbmZvLmlkfVxuICAgICAgICAgICAgICBkYXNoYm9hcmRUaXRsZT17ZGFzaGJvYXJkVGl0bGV9XG4gICAgICAgICAgICAgIGRhc2hib2FyZEluZm89e2Rhc2hib2FyZEluZm99XG4gICAgICAgICAgICAgIGRhdGFNYXNrPXtkYXRhTWFza31cbiAgICAgICAgICAgICAgbGF5b3V0PXtsYXlvdXR9XG4gICAgICAgICAgICAgIGV4cGFuZGVkU2xpY2VzPXtleHBhbmRlZFNsaWNlc31cbiAgICAgICAgICAgICAgY3VzdG9tQ3NzPXtjdXN0b21Dc3N9XG4gICAgICAgICAgICAgIGNvbG9yTmFtZXNwYWNlPXtjb2xvck5hbWVzcGFjZX1cbiAgICAgICAgICAgICAgY29sb3JTY2hlbWU9e2NvbG9yU2NoZW1lfVxuICAgICAgICAgICAgICBvblNhdmU9e29uU2F2ZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgICAgICBmb3JjZVJlZnJlc2hBbGxDaGFydHM9e3RoaXMuZm9yY2VSZWZyZXNofVxuICAgICAgICAgICAgICBzdGFydFBlcmlvZGljUmVuZGVyPXt0aGlzLnN0YXJ0UGVyaW9kaWNSZW5kZXJ9XG4gICAgICAgICAgICAgIHJlZnJlc2hGcmVxdWVuY3k9e3JlZnJlc2hGcmVxdWVuY3l9XG4gICAgICAgICAgICAgIHNob3VsZFBlcnNpc3RSZWZyZXNoRnJlcXVlbmN5PXtzaG91bGRQZXJzaXN0UmVmcmVzaEZyZXF1ZW5jeX1cbiAgICAgICAgICAgICAgc2V0UmVmcmVzaEZyZXF1ZW5jeT17c2V0UmVmcmVzaEZyZXF1ZW5jeX1cbiAgICAgICAgICAgICAgdXBkYXRlQ3NzPXt1cGRhdGVDc3N9XG4gICAgICAgICAgICAgIGVkaXRNb2RlPXtlZGl0TW9kZX1cbiAgICAgICAgICAgICAgaGFzVW5zYXZlZENoYW5nZXM9e2hhc1Vuc2F2ZWRDaGFuZ2VzfVxuICAgICAgICAgICAgICB1c2VyQ2FuRWRpdD17dXNlckNhbkVkaXR9XG4gICAgICAgICAgICAgIHVzZXJDYW5TaGFyZT17dXNlckNhblNoYXJlfVxuICAgICAgICAgICAgICB1c2VyQ2FuU2F2ZT17dXNlckNhblNhdmVBc31cbiAgICAgICAgICAgICAgdXNlckNhbkN1cmF0ZT17dXNlckNhbkN1cmF0ZX1cbiAgICAgICAgICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAgIHNob3dQcm9wZXJ0aWVzTW9kYWw9e3RoaXMuc2hvd1Byb3BlcnRpZXNNb2RhbH1cbiAgICAgICAgICAgICAgbWFuYWdlRW1iZWRkZWQ9e3RoaXMuc2hvd0VtYmVkTW9kYWx9XG4gICAgICAgICAgICAgIHJlZnJlc2hMaW1pdD17cmVmcmVzaExpbWl0fVxuICAgICAgICAgICAgICByZWZyZXNoV2FybmluZz17cmVmcmVzaFdhcm5pbmd9XG4gICAgICAgICAgICAgIGxhc3RNb2RpZmllZFRpbWU9e2xhc3RNb2RpZmllZFRpbWV9XG4gICAgICAgICAgICAgIGlzRHJvcGRvd25WaXNpYmxlPXt0aGlzLnN0YXRlLmlzRHJvcGRvd25WaXNpYmxlfVxuICAgICAgICAgICAgICBzZXRJc0Ryb3Bkb3duVmlzaWJsZT17dGhpcy5zZXRJc0Ryb3Bkb3duVmlzaWJsZX1cbiAgICAgICAgICAgICAgbG9nRXZlbnQ9e2xvZ0V2ZW50fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICB9XG4gICAgICAgICAgc2hvd0ZhdmVTdGFyPXt1c2VyPy51c2VySWQgJiYgZGFzaGJvYXJkSW5mbz8uaWR9XG4gICAgICAgICAgc2hvd1RpdGxlUGFuZWxJdGVtc1xuICAgICAgICAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5zaG93aW5nUHJvcGVydGllc01vZGFsICYmIChcbiAgICAgICAgICA8UHJvcGVydGllc01vZGFsXG4gICAgICAgICAgICBkYXNoYm9hcmRJZD17ZGFzaGJvYXJkSW5mby5pZH1cbiAgICAgICAgICAgIGRhc2hib2FyZEluZm89e2Rhc2hib2FyZEluZm99XG4gICAgICAgICAgICBkYXNoYm9hcmRUaXRsZT17ZGFzaGJvYXJkVGl0bGV9XG4gICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dpbmdQcm9wZXJ0aWVzTW9kYWx9XG4gICAgICAgICAgICBvbkhpZGU9e3RoaXMuaGlkZVByb3BlcnRpZXNNb2RhbH1cbiAgICAgICAgICAgIGNvbG9yU2NoZW1lPXt0aGlzLnByb3BzLmNvbG9yU2NoZW1lfVxuICAgICAgICAgICAgb25TdWJtaXQ9e2hhbmRsZU9uUHJvcGVydGllc0NoYW5nZX1cbiAgICAgICAgICAgIG9ubHlBcHBseVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG5cbiAgICAgICAgPE92ZXJ3cml0ZUNvbmZpcm0gLz5cblxuICAgICAgICB7dXNlckNhbkN1cmF0ZSAmJiAoXG4gICAgICAgICAgPERhc2hib2FyZEVtYmVkTW9kYWxcbiAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd2luZ0VtYmVkTW9kYWx9XG4gICAgICAgICAgICBvbkhpZGU9e3RoaXMuaGlkZUVtYmVkTW9kYWx9XG4gICAgICAgICAgICBkYXNoYm9hcmRJZD17ZGFzaGJvYXJkSW5mby5pZH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8R2xvYmFsXG4gICAgICAgICAgc3R5bGVzPXtjc3NgXG4gICAgICAgICAgICAuYW50LW1lbnUtdmVydGljYWwge1xuICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuSGVhZGVyLnByb3BUeXBlcyA9IHByb3BUeXBlcztcbkhlYWRlci5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjtcbiJdfQ== */\"],\n\n          onClick: redoLength && onRedo,\n          \"data-test\": \"redo-action\",\n          iconSize: \"xl\" })))),\n\n\n\n\n        ___EmotionJSX(Button, {\n          css: discardBtnStyle,\n          buttonSize: \"small\",\n          onClick: this.constructor.discardChanges,\n          buttonStyle: \"default\",\n          \"data-test\": \"discard-changes-button\",\n          \"aria-label\": t('Discard') },\n\n        t('Discard')),\n\n        ___EmotionJSX(Button, {\n          css: saveBtnStyle,\n          buttonSize: \"small\",\n          disabled: !hasUnsavedChanges,\n          buttonStyle: \"primary\",\n          onClick: this.overwriteDashboard,\n          \"data-test\": \"header-save-button\",\n          \"aria-label\": t('Save') },\n\n        t('Save')))),\n\n\n\n\n\n        editMode ?\n        ___EmotionJSX(UndoRedoKeyListeners, {\n          onUndo: this.handleCtrlZ,\n          onRedo: this.handleCtrlY }) :\n\n\n        ___EmotionJSX(\"div\", { css: actionButtonsStyle },\n        NavExtension && ___EmotionJSX(NavExtension, null),\n        userCanEdit &&\n        ___EmotionJSX(Button, {\n          buttonStyle: \"secondary\",\n          onClick: this.toggleEditMode,\n          \"data-test\": \"edit-dashboard-button\",\n          className: \"action-button\",\n          css: editButtonStyle,\n          \"aria-label\": t('Edit dashboard') },\n\n        t('Edit dashboard')))),\n\n\n\n\n\n\n        menuDropdownProps: {\n          getPopupContainer: (triggerNode) =>\n          triggerNode.closest('.header-with-actions'),\n          visible: this.state.isDropdownVisible,\n          onVisibleChange: this.setIsDropdownVisible },\n\n        additionalActionsMenu:\n        ___EmotionJSX(HeaderActionsDropdown, {\n          addSuccessToast: this.props.addSuccessToast,\n          addDangerToast: this.props.addDangerToast,\n          dashboardId: dashboardInfo.id,\n          dashboardTitle: dashboardTitle,\n          dashboardInfo: dashboardInfo,\n          dataMask: dataMask,\n          layout: layout,\n          expandedSlices: expandedSlices,\n          customCss: customCss,\n          colorNamespace: colorNamespace,\n          colorScheme: colorScheme,\n          onSave: onSave,\n          onChange: onChange,\n          forceRefreshAllCharts: this.forceRefresh,\n          startPeriodicRender: this.startPeriodicRender,\n          refreshFrequency: refreshFrequency,\n          shouldPersistRefreshFrequency: shouldPersistRefreshFrequency,\n          setRefreshFrequency: setRefreshFrequency,\n          updateCss: updateCss,\n          editMode: editMode,\n          hasUnsavedChanges: hasUnsavedChanges,\n          userCanEdit: userCanEdit,\n          userCanShare: userCanShare,\n          userCanSave: userCanSaveAs,\n          userCanCurate: userCanCurate,\n          isLoading: isLoading,\n          showPropertiesModal: this.showPropertiesModal,\n          manageEmbedded: this.showEmbedModal,\n          refreshLimit: refreshLimit,\n          refreshWarning: refreshWarning,\n          lastModifiedTime: lastModifiedTime,\n          isDropdownVisible: this.state.isDropdownVisible,\n          setIsDropdownVisible: this.setIsDropdownVisible,\n          logEvent: logEvent }),\n\n\n        showFaveStar: (user == null ? void 0 : user.userId) && (dashboardInfo == null ? void 0 : dashboardInfo.id),\n        showTitlePanelItems: true }),\n\n      this.state.showingPropertiesModal &&\n      ___EmotionJSX(PropertiesModal, {\n        dashboardId: dashboardInfo.id,\n        dashboardInfo: dashboardInfo,\n        dashboardTitle: dashboardTitle,\n        show: this.state.showingPropertiesModal,\n        onHide: this.hidePropertiesModal,\n        colorScheme: this.props.colorScheme,\n        onSubmit: handleOnPropertiesChange,\n        onlyApply: true }),\n\n\n\n      ___EmotionJSX(OverwriteConfirm, null),\n\n      userCanCurate &&\n      ___EmotionJSX(DashboardEmbedModal, {\n        show: this.state.showingEmbedModal,\n        onHide: this.hideEmbedModal,\n        dashboardId: dashboardInfo.id }),\n\n\n      ___EmotionJSX(Global, {\n        styles: css`\n            .ant-menu-vertical {\n              border-right: none;\n            }\n          ` })));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nHeader.propTypes = propTypes;\nHeader.defaultProps = defaultProps;const _default =\n\nHeader;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(uiOverrideRegistry, \"uiOverrideRegistry\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(headerContainerStyle, \"headerContainerStyle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(editButtonStyle, \"editButtonStyle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(actionButtonsStyle, \"actionButtonsStyle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(StyledUndoRedoButton, \"StyledUndoRedoButton\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(undoRedoStyle, \"undoRedoStyle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(undoRedoEmphasized, \"undoRedoEmphasized\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(undoRedoDisabled, \"undoRedoDisabled\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(saveBtnStyle, \"saveBtnStyle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(discardBtnStyle, \"discardBtnStyle\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(Header, \"Header\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["moment","React","PropTypes","styled","css","FeatureFlag","t","getSharedLabelColor","getUiOverrideRegistry","Global","isFeatureEnabled","LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD","LOG_ACTIONS_FORCE_REFRESH_DASHBOARD","LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD","Icons","Button","AntdButton","findPermission","Tooltip","safeStringify","HeaderActionsDropdown","PublishedStatus","UndoRedoKeyListeners","PropertiesModal","chartPropShape","UNDO_LIMIT","SAVE_TYPE_OVERWRITE","DASHBOARD_POSITION_DATA_LIMIT","setPeriodicRunner","stopPeriodicRender","PageHeaderWithActions","DashboardEmbedModal","OverwriteConfirm","uiOverrideRegistry","propTypes","addSuccessToast","func","isRequired","addDangerToast","addWarningToast","user","object","dashboardInfo","dashboardTitle","string","dataMask","charts","objectOf","layout","expandedSlices","customCss","colorNamespace","colorScheme","setColorScheme","setUnsavedChanges","isStarred","bool","isPublished","isLoading","onSave","onChange","fetchFaveStar","fetchCharts","saveFaveStar","savePublished","updateDashboardTitle","editMode","setEditMode","showBuilderPane","updateCss","logEvent","hasUnsavedChanges","maxUndoHistoryExceeded","lastModifiedTime","number","onRefresh","onUndo","onRedo","undoLength","redoLength","setMaxUndoHistoryExceeded","maxUndoHistoryToast","refreshFrequency","shouldPersistRefreshFrequency","setRefreshFrequency","dashboardInfoChanged","dashboardTitleChanged","defaultProps","undefined","headerContainerStyle","theme","colors","grayscale","light2","editButtonStyle","primary","dark2","actionButtonsStyle","gridUnit","StyledUndoRedoButton","undoRedoStyle","light1","base","undoRedoEmphasized","undoRedoDisabled","saveBtnStyle","discardBtnStyle","Header","PureComponent","discardChanges","url","URL","window","location","href","searchParams","delete","assign","constructor","props","showEmbedModal","setState","showingEmbedModal","hideEmbedModal","state","didNotifyMaxUndoHistoryToast","emphasizeUndo","emphasizeRedo","showingPropertiesModal","isDropdownVisible","handleChangeText","bind","handleCtrlZ","handleCtrlY","toggleEditMode","forceRefresh","startPeriodicRender","overwriteDashboard","showPropertiesModal","hidePropertiesModal","setIsDropdownVisible","componentDidMount","componentDidUpdate","prevProps","UNSAFE_componentWillReceiveProps","nextProps","componentWillUnmount","refreshTimer","clearTimeout","ctrlYTimeout","ctrlZTimeout","nextText","visible","setTimeout","chartList","Object","keys","force","interval","chartCount","length","id","intervalMessage","periodicRefreshOptions","common","conf","DASHBOARD_AUTO_REFRESH_INTERVALS","predefinedValue","find","option","Number","duration","humanize","periodicRender","metadata","immune","timed_refresh_immune_slices","affectedCharts","values","filter","chart","indexOf","map","DASHBOARD_AUTO_REFRESH_MODE","edit_mode","positions","currentRefreshFrequency","slug","refresh_frequency","currentColorScheme","color_scheme","currentColorNamespace","color_namespace","currentSharedLabelColors","fromEntries","getColorMap","data","certified_by","certification_details","dashboard_title","last_modified_time","owners","roles","shared_label_colors","positionJSONLength","limit","SUPERSET_DASHBOARD_POSITION_DATA_LIMIT","render","userCanEdit","dash_edit_perm","is_managed_externally","userCanShare","dash_share_perm","userCanSaveAs","dash_save_perm","userCanCurate","EMBEDDED_SUPERSET","refreshLimit","SUPERSET_DASHBOARD_PERIODICAL_REFRESH_LIMIT","refreshWarning","SUPERSET_DASHBOARD_PERIODICAL_REFRESH_WARNING_MESSAGE","handleOnPropertiesChange","updates","JSON","parse","jsonMetadata","certifiedBy","certificationDetails","title","NavExtension","get","canEdit","placeholder","label","showTooltip","details","itemId","getPopupContainer","triggerNode","closest","onVisibleChange","userId"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/Header/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport moment from 'moment';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  styled,\n  css,\n  FeatureFlag,\n  t,\n  getSharedLabelColor,\n  getUiOverrideRegistry,\n} from '@superset-ui/core';\nimport { Global } from '@emotion/react';\nimport { isFeatureEnabled } from 'src/featureFlags';\nimport {\n  LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD,\n  LOG_ACTIONS_FORCE_REFRESH_DASHBOARD,\n  LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD,\n} from 'src/logger/LogUtils';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { AntdButton } from 'src/components/';\nimport { findPermission } from 'src/utils/findPermission';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport HeaderActionsDropdown from 'src/dashboard/components/Header/HeaderActionsDropdown';\nimport PublishedStatus from 'src/dashboard/components/PublishedStatus';\nimport UndoRedoKeyListeners from 'src/dashboard/components/UndoRedoKeyListeners';\nimport PropertiesModal from 'src/dashboard/components/PropertiesModal';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport {\n  UNDO_LIMIT,\n  SAVE_TYPE_OVERWRITE,\n  DASHBOARD_POSITION_DATA_LIMIT,\n} from 'src/dashboard/util/constants';\nimport setPeriodicRunner, {\n  stopPeriodicRender,\n} from 'src/dashboard/util/setPeriodicRunner';\nimport { PageHeaderWithActions } from 'src/components/PageHeaderWithActions';\nimport { DashboardEmbedModal } from '../DashboardEmbedControls';\nimport OverwriteConfirm from '../OverwriteConfirm';\n\nconst uiOverrideRegistry = getUiOverrideRegistry();\n\nconst propTypes = {\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  addWarningToast: PropTypes.func.isRequired,\n  user: PropTypes.object, // UserWithPermissionsAndRoles,\n  dashboardInfo: PropTypes.object.isRequired,\n  dashboardTitle: PropTypes.string,\n  dataMask: PropTypes.object.isRequired,\n  charts: PropTypes.objectOf(chartPropShape).isRequired,\n  layout: PropTypes.object.isRequired,\n  expandedSlices: PropTypes.object,\n  customCss: PropTypes.string,\n  colorNamespace: PropTypes.string,\n  colorScheme: PropTypes.string,\n  setColorScheme: PropTypes.func.isRequired,\n  setUnsavedChanges: PropTypes.func.isRequired,\n  isStarred: PropTypes.bool.isRequired,\n  isPublished: PropTypes.bool.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  onSave: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  fetchFaveStar: PropTypes.func.isRequired,\n  fetchCharts: PropTypes.func.isRequired,\n  saveFaveStar: PropTypes.func.isRequired,\n  savePublished: PropTypes.func.isRequired,\n  updateDashboardTitle: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  setEditMode: PropTypes.func.isRequired,\n  showBuilderPane: PropTypes.func.isRequired,\n  updateCss: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  hasUnsavedChanges: PropTypes.bool.isRequired,\n  maxUndoHistoryExceeded: PropTypes.bool.isRequired,\n  lastModifiedTime: PropTypes.number.isRequired,\n\n  // redux\n  onRefresh: PropTypes.func.isRequired,\n  onUndo: PropTypes.func.isRequired,\n  onRedo: PropTypes.func.isRequired,\n  undoLength: PropTypes.number.isRequired,\n  redoLength: PropTypes.number.isRequired,\n  setMaxUndoHistoryExceeded: PropTypes.func.isRequired,\n  maxUndoHistoryToast: PropTypes.func.isRequired,\n  refreshFrequency: PropTypes.number,\n  shouldPersistRefreshFrequency: PropTypes.bool.isRequired,\n  setRefreshFrequency: PropTypes.func.isRequired,\n  dashboardInfoChanged: PropTypes.func.isRequired,\n  dashboardTitleChanged: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  colorNamespace: undefined,\n  colorScheme: undefined,\n};\n\nconst headerContainerStyle = theme => css`\n  border-bottom: 1px solid ${theme.colors.grayscale.light2};\n`;\n\nconst editButtonStyle = theme => css`\n  color: ${theme.colors.primary.dark2};\n`;\n\nconst actionButtonsStyle = theme => css`\n  display: flex;\n  align-items: center;\n\n  .action-schedule-report {\n    margin-left: ${theme.gridUnit * 2}px;\n  }\n\n  .undoRedo {\n    display: flex;\n    margin-right: ${theme.gridUnit * 2}px;\n  }\n`;\n\nconst StyledUndoRedoButton = styled(AntdButton)`\n  padding: 0;\n  &:hover {\n    background: transparent;\n  }\n`;\n\nconst undoRedoStyle = theme => css`\n  color: ${theme.colors.grayscale.light1};\n  &:hover {\n    color: ${theme.colors.grayscale.base};\n  }\n`;\n\nconst undoRedoEmphasized = theme => css`\n  color: ${theme.colors.grayscale.base};\n`;\n\nconst undoRedoDisabled = theme => css`\n  color: ${theme.colors.grayscale.light2};\n`;\n\nconst saveBtnStyle = theme => css`\n  min-width: ${theme.gridUnit * 17}px;\n  height: ${theme.gridUnit * 8}px;\n`;\n\nconst discardBtnStyle = theme => css`\n  min-width: ${theme.gridUnit * 22}px;\n  height: ${theme.gridUnit * 8}px;\n`;\n\nclass Header extends React.PureComponent {\n  static discardChanges() {\n    const url = new URL(window.location.href);\n\n    url.searchParams.delete('edit');\n    window.location.assign(url);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      didNotifyMaxUndoHistoryToast: false,\n      emphasizeUndo: false,\n      emphasizeRedo: false,\n      showingPropertiesModal: false,\n      isDropdownVisible: false,\n    };\n\n    this.handleChangeText = this.handleChangeText.bind(this);\n    this.handleCtrlZ = this.handleCtrlZ.bind(this);\n    this.handleCtrlY = this.handleCtrlY.bind(this);\n    this.toggleEditMode = this.toggleEditMode.bind(this);\n    this.forceRefresh = this.forceRefresh.bind(this);\n    this.startPeriodicRender = this.startPeriodicRender.bind(this);\n    this.overwriteDashboard = this.overwriteDashboard.bind(this);\n    this.showPropertiesModal = this.showPropertiesModal.bind(this);\n    this.hidePropertiesModal = this.hidePropertiesModal.bind(this);\n    this.setIsDropdownVisible = this.setIsDropdownVisible.bind(this);\n  }\n\n  componentDidMount() {\n    const { refreshFrequency } = this.props;\n    this.startPeriodicRender(refreshFrequency * 1000);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.refreshFrequency !== prevProps.refreshFrequency) {\n      const { refreshFrequency } = this.props;\n      this.startPeriodicRender(refreshFrequency * 1000);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (\n      UNDO_LIMIT - nextProps.undoLength <= 0 &&\n      !this.state.didNotifyMaxUndoHistoryToast\n    ) {\n      this.setState(() => ({ didNotifyMaxUndoHistoryToast: true }));\n      this.props.maxUndoHistoryToast();\n    }\n    if (\n      nextProps.undoLength > UNDO_LIMIT &&\n      !this.props.maxUndoHistoryExceeded\n    ) {\n      this.props.setMaxUndoHistoryExceeded();\n    }\n  }\n\n  componentWillUnmount() {\n    stopPeriodicRender(this.refreshTimer);\n    this.props.setRefreshFrequency(0);\n    clearTimeout(this.ctrlYTimeout);\n    clearTimeout(this.ctrlZTimeout);\n  }\n\n  handleChangeText(nextText) {\n    const { updateDashboardTitle, onChange } = this.props;\n    if (nextText && this.props.dashboardTitle !== nextText) {\n      updateDashboardTitle(nextText);\n      onChange();\n    }\n  }\n\n  setIsDropdownVisible(visible) {\n    this.setState({\n      isDropdownVisible: visible,\n    });\n  }\n\n  handleCtrlY() {\n    this.props.onRedo();\n    this.setState({ emphasizeRedo: true }, () => {\n      if (this.ctrlYTimeout) clearTimeout(this.ctrlYTimeout);\n      this.ctrlYTimeout = setTimeout(() => {\n        this.setState({ emphasizeRedo: false });\n      }, 100);\n    });\n  }\n\n  handleCtrlZ() {\n    this.props.onUndo();\n    this.setState({ emphasizeUndo: true }, () => {\n      if (this.ctrlZTimeout) clearTimeout(this.ctrlZTimeout);\n      this.ctrlZTimeout = setTimeout(() => {\n        this.setState({ emphasizeUndo: false });\n      }, 100);\n    });\n  }\n\n  forceRefresh() {\n    if (!this.props.isLoading) {\n      const chartList = Object.keys(this.props.charts);\n      this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_DASHBOARD, {\n        force: true,\n        interval: 0,\n        chartCount: chartList.length,\n      });\n      return this.props.onRefresh(\n        chartList,\n        true,\n        0,\n        this.props.dashboardInfo.id,\n      );\n    }\n    return false;\n  }\n\n  startPeriodicRender(interval) {\n    let intervalMessage;\n\n    if (interval) {\n      const { dashboardInfo } = this.props;\n      const periodicRefreshOptions =\n        dashboardInfo.common?.conf?.DASHBOARD_AUTO_REFRESH_INTERVALS;\n      const predefinedValue = periodicRefreshOptions.find(\n        option => Number(option[0]) === interval / 1000,\n      );\n\n      if (predefinedValue) {\n        intervalMessage = t(predefinedValue[1]);\n      } else {\n        intervalMessage = moment.duration(interval, 'millisecond').humanize();\n      }\n    }\n\n    const periodicRender = () => {\n      const { fetchCharts, logEvent, charts, dashboardInfo } = this.props;\n      const { metadata } = dashboardInfo;\n      const immune = metadata.timed_refresh_immune_slices || [];\n      const affectedCharts = Object.values(charts)\n        .filter(chart => immune.indexOf(chart.id) === -1)\n        .map(chart => chart.id);\n\n      logEvent(LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD, {\n        interval,\n        chartCount: affectedCharts.length,\n      });\n      this.props.addWarningToast(\n        t(\n          `This dashboard is currently auto refreshing; the next auto refresh will be in %s.`,\n          intervalMessage,\n        ),\n      );\n      if (dashboardInfo.common.conf.DASHBOARD_AUTO_REFRESH_MODE === 'fetch') {\n        // force-refresh while auto-refresh in dashboard\n        return fetchCharts(\n          affectedCharts,\n          false,\n          interval * 0.2,\n          dashboardInfo.id,\n        );\n      }\n      return fetchCharts(\n        affectedCharts,\n        true,\n        interval * 0.2,\n        dashboardInfo.id,\n      );\n    };\n\n    this.refreshTimer = setPeriodicRunner({\n      interval,\n      periodicRender,\n      refreshTimer: this.refreshTimer,\n    });\n  }\n\n  toggleEditMode() {\n    this.props.logEvent(LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD, {\n      edit_mode: !this.props.editMode,\n    });\n    this.props.setEditMode(!this.props.editMode);\n  }\n\n  overwriteDashboard() {\n    const {\n      dashboardTitle,\n      layout: positions,\n      colorScheme,\n      colorNamespace,\n      customCss,\n      dashboardInfo,\n      refreshFrequency: currentRefreshFrequency,\n      shouldPersistRefreshFrequency,\n      lastModifiedTime,\n      slug,\n    } = this.props;\n\n    // check refresh frequency is for current session or persist\n    const refreshFrequency = shouldPersistRefreshFrequency\n      ? currentRefreshFrequency\n      : dashboardInfo.metadata?.refresh_frequency;\n\n    const currentColorScheme =\n      dashboardInfo?.metadata?.color_scheme || colorScheme;\n    const currentColorNamespace =\n      dashboardInfo?.metadata?.color_namespace || colorNamespace;\n    const currentSharedLabelColors = Object.fromEntries(\n      getSharedLabelColor().getColorMap(),\n    );\n\n    const data = {\n      certified_by: dashboardInfo.certified_by,\n      certification_details: dashboardInfo.certification_details,\n      css: customCss,\n      dashboard_title: dashboardTitle,\n      last_modified_time: lastModifiedTime,\n      owners: dashboardInfo.owners,\n      roles: dashboardInfo.roles,\n      slug,\n      metadata: {\n        ...dashboardInfo?.metadata,\n        color_namespace: currentColorNamespace,\n        color_scheme: currentColorScheme,\n        positions,\n        refresh_frequency: refreshFrequency,\n        shared_label_colors: currentSharedLabelColors,\n      },\n    };\n\n    // make sure positions data less than DB storage limitation:\n    const positionJSONLength = safeStringify(positions).length;\n    const limit =\n      dashboardInfo.common.conf.SUPERSET_DASHBOARD_POSITION_DATA_LIMIT ||\n      DASHBOARD_POSITION_DATA_LIMIT;\n    if (positionJSONLength >= limit) {\n      this.props.addDangerToast(\n        t(\n          'Your dashboard is too large. Please reduce its size before saving it.',\n        ),\n      );\n    } else {\n      if (positionJSONLength >= limit * 0.9) {\n        this.props.addWarningToast('Your dashboard is near the size limit.');\n      }\n\n      this.props.onSave(data, dashboardInfo.id, SAVE_TYPE_OVERWRITE);\n    }\n  }\n\n  showPropertiesModal() {\n    this.setState({ showingPropertiesModal: true });\n  }\n\n  hidePropertiesModal() {\n    this.setState({ showingPropertiesModal: false });\n  }\n\n  showEmbedModal = () => {\n    this.setState({ showingEmbedModal: true });\n  };\n\n  hideEmbedModal = () => {\n    this.setState({ showingEmbedModal: false });\n  };\n\n  render() {\n    const {\n      dashboardTitle,\n      layout,\n      expandedSlices,\n      customCss,\n      colorNamespace,\n      dataMask,\n      setColorScheme,\n      setUnsavedChanges,\n      colorScheme,\n      onUndo,\n      onRedo,\n      undoLength,\n      redoLength,\n      onChange,\n      onSave,\n      updateCss,\n      editMode,\n      isPublished,\n      user,\n      dashboardInfo,\n      hasUnsavedChanges,\n      isLoading,\n      refreshFrequency,\n      shouldPersistRefreshFrequency,\n      setRefreshFrequency,\n      lastModifiedTime,\n      logEvent,\n    } = this.props;\n\n    const userCanEdit =\n      dashboardInfo.dash_edit_perm && !dashboardInfo.is_managed_externally;\n    const userCanShare = dashboardInfo.dash_share_perm;\n    const userCanSaveAs = dashboardInfo.dash_save_perm;\n    const userCanCurate =\n      isFeatureEnabled(FeatureFlag.EMBEDDED_SUPERSET) &&\n      findPermission('can_set_embedded', 'Dashboard', user.roles);\n    const refreshLimit =\n      dashboardInfo.common?.conf?.SUPERSET_DASHBOARD_PERIODICAL_REFRESH_LIMIT;\n    const refreshWarning =\n      dashboardInfo.common?.conf\n        ?.SUPERSET_DASHBOARD_PERIODICAL_REFRESH_WARNING_MESSAGE;\n\n    const handleOnPropertiesChange = updates => {\n      const { dashboardInfoChanged, dashboardTitleChanged } = this.props;\n\n      setColorScheme(updates.colorScheme);\n      dashboardInfoChanged({\n        slug: updates.slug,\n        metadata: JSON.parse(updates.jsonMetadata || '{}'),\n        certified_by: updates.certifiedBy,\n        certification_details: updates.certificationDetails,\n        owners: updates.owners,\n        roles: updates.roles,\n      });\n      setUnsavedChanges(true);\n      dashboardTitleChanged(updates.title);\n    };\n\n    const NavExtension = uiOverrideRegistry.get('dashboard.nav.right');\n\n    return (\n      <div\n        css={headerContainerStyle}\n        data-test=\"dashboard-header-container\"\n        data-test-id={dashboardInfo.id}\n        className=\"dashboard-header-container\"\n      >\n        <PageHeaderWithActions\n          editableTitleProps={{\n            title: dashboardTitle,\n            canEdit: userCanEdit && editMode,\n            onSave: this.handleChangeText,\n            placeholder: t('Add the name of the dashboard'),\n            label: t('Dashboard title'),\n            showTooltip: false,\n          }}\n          certificatiedBadgeProps={{\n            certifiedBy: dashboardInfo.certified_by,\n            details: dashboardInfo.certification_details,\n          }}\n          faveStarProps={{\n            itemId: dashboardInfo.id,\n            fetchFaveStar: this.props.fetchFaveStar,\n            saveFaveStar: this.props.saveFaveStar,\n            isStarred: this.props.isStarred,\n            showTooltip: true,\n          }}\n          titlePanelAdditionalItems={[\n            !editMode && (\n              <PublishedStatus\n                dashboardId={dashboardInfo.id}\n                isPublished={isPublished}\n                savePublished={this.props.savePublished}\n                canEdit={userCanEdit}\n                canSave={userCanSaveAs}\n                visible={!editMode}\n              />\n            ),\n          ]}\n          rightPanelAdditionalItems={\n            <div className=\"button-container\">\n              {userCanSaveAs && (\n                <div\n                  className=\"button-container\"\n                  data-test=\"dashboard-edit-actions\"\n                >\n                  {editMode && (\n                    <div css={actionButtonsStyle}>\n                      <div className=\"undoRedo\">\n                        <Tooltip\n                          id=\"dashboard-undo-tooltip\"\n                          title={t('Undo the action')}\n                        >\n                          <StyledUndoRedoButton\n                            type=\"text\"\n                            disabled={undoLength < 1}\n                          >\n                            <Icons.Undo\n                              css={[\n                                undoRedoStyle,\n                                this.state.emphasizeUndo && undoRedoEmphasized,\n                                undoLength < 1 && undoRedoDisabled,\n                              ]}\n                              onClick={undoLength && onUndo}\n                              data-test=\"undo-action\"\n                              iconSize=\"xl\"\n                            />\n                          </StyledUndoRedoButton>\n                        </Tooltip>\n                        <Tooltip\n                          id=\"dashboard-redo-tooltip\"\n                          title={t('Redo the action')}\n                        >\n                          <StyledUndoRedoButton\n                            type=\"text\"\n                            disabled={redoLength < 1}\n                          >\n                            <Icons.Redo\n                              css={[\n                                undoRedoStyle,\n                                this.state.emphasizeRedo && undoRedoEmphasized,\n                                redoLength < 1 && undoRedoDisabled,\n                              ]}\n                              onClick={redoLength && onRedo}\n                              data-test=\"redo-action\"\n                              iconSize=\"xl\"\n                            />\n                          </StyledUndoRedoButton>\n                        </Tooltip>\n                      </div>\n                      <Button\n                        css={discardBtnStyle}\n                        buttonSize=\"small\"\n                        onClick={this.constructor.discardChanges}\n                        buttonStyle=\"default\"\n                        data-test=\"discard-changes-button\"\n                        aria-label={t('Discard')}\n                      >\n                        {t('Discard')}\n                      </Button>\n                      <Button\n                        css={saveBtnStyle}\n                        buttonSize=\"small\"\n                        disabled={!hasUnsavedChanges}\n                        buttonStyle=\"primary\"\n                        onClick={this.overwriteDashboard}\n                        data-test=\"header-save-button\"\n                        aria-label={t('Save')}\n                      >\n                        {t('Save')}\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              )}\n              {editMode ? (\n                <UndoRedoKeyListeners\n                  onUndo={this.handleCtrlZ}\n                  onRedo={this.handleCtrlY}\n                />\n              ) : (\n                <div css={actionButtonsStyle}>\n                  {NavExtension && <NavExtension />}\n                  {userCanEdit && (\n                    <Button\n                      buttonStyle=\"secondary\"\n                      onClick={this.toggleEditMode}\n                      data-test=\"edit-dashboard-button\"\n                      className=\"action-button\"\n                      css={editButtonStyle}\n                      aria-label={t('Edit dashboard')}\n                    >\n                      {t('Edit dashboard')}\n                    </Button>\n                  )}\n                </div>\n              )}\n            </div>\n          }\n          menuDropdownProps={{\n            getPopupContainer: triggerNode =>\n              triggerNode.closest('.header-with-actions'),\n            visible: this.state.isDropdownVisible,\n            onVisibleChange: this.setIsDropdownVisible,\n          }}\n          additionalActionsMenu={\n            <HeaderActionsDropdown\n              addSuccessToast={this.props.addSuccessToast}\n              addDangerToast={this.props.addDangerToast}\n              dashboardId={dashboardInfo.id}\n              dashboardTitle={dashboardTitle}\n              dashboardInfo={dashboardInfo}\n              dataMask={dataMask}\n              layout={layout}\n              expandedSlices={expandedSlices}\n              customCss={customCss}\n              colorNamespace={colorNamespace}\n              colorScheme={colorScheme}\n              onSave={onSave}\n              onChange={onChange}\n              forceRefreshAllCharts={this.forceRefresh}\n              startPeriodicRender={this.startPeriodicRender}\n              refreshFrequency={refreshFrequency}\n              shouldPersistRefreshFrequency={shouldPersistRefreshFrequency}\n              setRefreshFrequency={setRefreshFrequency}\n              updateCss={updateCss}\n              editMode={editMode}\n              hasUnsavedChanges={hasUnsavedChanges}\n              userCanEdit={userCanEdit}\n              userCanShare={userCanShare}\n              userCanSave={userCanSaveAs}\n              userCanCurate={userCanCurate}\n              isLoading={isLoading}\n              showPropertiesModal={this.showPropertiesModal}\n              manageEmbedded={this.showEmbedModal}\n              refreshLimit={refreshLimit}\n              refreshWarning={refreshWarning}\n              lastModifiedTime={lastModifiedTime}\n              isDropdownVisible={this.state.isDropdownVisible}\n              setIsDropdownVisible={this.setIsDropdownVisible}\n              logEvent={logEvent}\n            />\n          }\n          showFaveStar={user?.userId && dashboardInfo?.id}\n          showTitlePanelItems\n        />\n        {this.state.showingPropertiesModal && (\n          <PropertiesModal\n            dashboardId={dashboardInfo.id}\n            dashboardInfo={dashboardInfo}\n            dashboardTitle={dashboardTitle}\n            show={this.state.showingPropertiesModal}\n            onHide={this.hidePropertiesModal}\n            colorScheme={this.props.colorScheme}\n            onSubmit={handleOnPropertiesChange}\n            onlyApply\n          />\n        )}\n\n        <OverwriteConfirm />\n\n        {userCanCurate && (\n          <DashboardEmbedModal\n            show={this.state.showingEmbedModal}\n            onHide={this.hideEmbedModal}\n            dashboardId={dashboardInfo.id}\n          />\n        )}\n        <Global\n          styles={css`\n            .ant-menu-vertical {\n              border-right: none;\n            }\n          `}\n        />\n      </div>\n    );\n  }\n}\n\nHeader.propTypes = propTypes;\nHeader.defaultProps = defaultProps;\n\nexport default Header;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}