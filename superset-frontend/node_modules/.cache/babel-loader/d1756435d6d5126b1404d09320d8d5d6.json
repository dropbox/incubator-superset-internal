{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useState } from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport { Tooltip } from 'src/components/Tooltip';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst StyledInput = styled(Input)`\n  border-radius: ${(_ref) => {let { theme } = _ref;return theme.borderRadius;}};\n  height: 26px;\n  padding-left: ${(_ref2) => {let { theme } = _ref2;return theme.gridUnit * 2.5;}}px;\n`;\n\nexport const DndColumnSelectPopoverTitle = (_ref3) =>\n\n\n\n\n{let { title, onChange, isEditDisabled, hasCustomLabel } = _ref3;\n  const [isHovered, setIsHovered] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n\n  const onMouseOver = useCallback(() => {\n    setIsHovered(true);\n  }, []);\n\n  const onMouseOut = useCallback(() => {\n    setIsHovered(false);\n  }, []);\n\n  const onClick = useCallback(() => {\n    setIsEditMode(true);\n  }, []);\n\n  const onBlur = useCallback(() => {\n    setIsEditMode(false);\n  }, []);\n\n  const onInputBlur = useCallback(\n  (e) => {\n    if (e.target.value === '') {\n      onChange(e);\n    }\n    onBlur();\n  },\n  [onBlur, onChange]);\n\n\n  const defaultLabel = t('My column');\n\n  if (isEditDisabled) {\n    return ___EmotionJSX(\"span\", null, title || defaultLabel);\n  }\n\n  return isEditMode ?\n  ___EmotionJSX(StyledInput, {\n    type: \"text\",\n    placeholder: title,\n    value: hasCustomLabel ? title : '',\n    autoFocus: true,\n    onChange: onChange,\n    onBlur: onInputBlur }) :\n\n\n  ___EmotionJSX(Tooltip, { placement: \"top\", title: t('Click to edit label') },\n  ___EmotionJSX(\"span\", {\n    className: \"AdhocMetricEditPopoverTitle inline-editable\",\n\n    onMouseOver: onMouseOver,\n    onMouseOut: onMouseOut,\n    onClick: onClick,\n    onBlur: onBlur,\n    role: \"button\",\n    tabIndex: 0 },\n\n  title || defaultLabel, \"\\xA0\",\n\n  ___EmotionJSX(\"i\", {\n    className: \"fa fa-pencil\",\n    style: { color: isHovered ? 'black' : 'grey' } })));\n\n\n\n\n};","map":{"version":3,"names":["React","useCallback","useState","t","styled","Input","Tooltip","StyledInput","theme","borderRadius","gridUnit","DndColumnSelectPopoverTitle","title","onChange","isEditDisabled","hasCustomLabel","isHovered","setIsHovered","isEditMode","setIsEditMode","onMouseOver","onMouseOut","onClick","onBlur","onInputBlur","e","target","value","defaultLabel","color"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/DndColumnSelectControl/DndColumnSelectPopoverTitle.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useState } from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport { Tooltip } from 'src/components/Tooltip';\n\nconst StyledInput = styled(Input)`\n  border-radius: ${({ theme }) => theme.borderRadius};\n  height: 26px;\n  padding-left: ${({ theme }) => theme.gridUnit * 2.5}px;\n`;\n\nexport const DndColumnSelectPopoverTitle = ({\n  title,\n  onChange,\n  isEditDisabled,\n  hasCustomLabel,\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n\n  const onMouseOver = useCallback(() => {\n    setIsHovered(true);\n  }, []);\n\n  const onMouseOut = useCallback(() => {\n    setIsHovered(false);\n  }, []);\n\n  const onClick = useCallback(() => {\n    setIsEditMode(true);\n  }, []);\n\n  const onBlur = useCallback(() => {\n    setIsEditMode(false);\n  }, []);\n\n  const onInputBlur = useCallback(\n    e => {\n      if (e.target.value === '') {\n        onChange(e);\n      }\n      onBlur();\n    },\n    [onBlur, onChange],\n  );\n\n  const defaultLabel = t('My column');\n\n  if (isEditDisabled) {\n    return <span>{title || defaultLabel}</span>;\n  }\n\n  return isEditMode ? (\n    <StyledInput\n      type=\"text\"\n      placeholder={title}\n      value={hasCustomLabel ? title : ''}\n      autoFocus\n      onChange={onChange}\n      onBlur={onInputBlur}\n    />\n  ) : (\n    <Tooltip placement=\"top\" title={t('Click to edit label')}>\n      <span\n        className=\"AdhocMetricEditPopoverTitle inline-editable\"\n        data-test=\"AdhocMetricEditTitle#trigger\"\n        onMouseOver={onMouseOver}\n        onMouseOut={onMouseOut}\n        onClick={onClick}\n        onBlur={onBlur}\n        role=\"button\"\n        tabIndex={0}\n      >\n        {title || defaultLabel}\n        &nbsp;\n        <i\n          className=\"fa fa-pencil\"\n          style={{ color: isHovered ? 'black' : 'grey' }}\n        />\n      </span>\n    </Tooltip>\n  );\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,QAA6C,OAA7C;AACA,SAASC,CAAT,EAAYC,MAAZ,QAA0B,mBAA1B;AACA,SAASC,KAAT,QAAsB,sBAAtB;AACA,SAASC,OAAT,QAAwB,wBAAxB,C;;AAEA,MAAMC,WAAW,GAAGH,MAAM,CAACC,KAAD,CAAQ;AAClC,mBAAmB,eAAC,EAAEG,KAAF,EAAD,eAAeA,KAAK,CAACC,YAArB,EAAkC;AACrD;AACA,kBAAkB,gBAAC,EAAED,KAAF,EAAD,gBAAeA,KAAK,CAACE,QAAN,GAAiB,GAAhC,EAAoC;AACtD,CAJA;;AAMA,OAAO,MAAMC,2BAA2B,GAAG;;;;;AAKrC,KALsC,EAC1CC,KAD0C,EAE1CC,QAF0C,EAG1CC,cAH0C,EAI1CC,cAJ0C,EAKtC;EACJ,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,KAAD,CAA1C;EACA,MAAM,CAACgB,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,KAAD,CAA5C;;EAEA,MAAMkB,WAAW,GAAGnB,WAAW,CAAC,MAAM;IACpCgB,YAAY,CAAC,IAAD,CAAZ;EACD,CAF8B,EAE5B,EAF4B,CAA/B;;EAIA,MAAMI,UAAU,GAAGpB,WAAW,CAAC,MAAM;IACnCgB,YAAY,CAAC,KAAD,CAAZ;EACD,CAF6B,EAE3B,EAF2B,CAA9B;;EAIA,MAAMK,OAAO,GAAGrB,WAAW,CAAC,MAAM;IAChCkB,aAAa,CAAC,IAAD,CAAb;EACD,CAF0B,EAExB,EAFwB,CAA3B;;EAIA,MAAMI,MAAM,GAAGtB,WAAW,CAAC,MAAM;IAC/BkB,aAAa,CAAC,KAAD,CAAb;EACD,CAFyB,EAEvB,EAFuB,CAA1B;;EAIA,MAAMK,WAAW,GAAGvB,WAAW;EAC7B,CAAAwB,CAAC,KAAI;IACH,IAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,KAAmB,EAAvB,EAA2B;MACzBd,QAAQ,CAACY,CAAD,CAAR;IACD;IACDF,MAAM;EACP,CAN4B;EAO7B,CAACA,MAAD,EAASV,QAAT,CAP6B,CAA/B;;;EAUA,MAAMe,YAAY,GAAGzB,CAAC,CAAC,WAAD,CAAtB;;EAEA,IAAIW,cAAJ,EAAoB;IAClB,OAAO,4BAAOF,KAAK,IAAIgB,YAAhB,CAAP;EACD;;EAED,OAAOV,UAAU;EACf,cAAC,WAAD;IACE,IAAI,EAAC,MADP;IAEE,WAAW,EAAEN,KAFf;IAGE,KAAK,EAAEG,cAAc,GAAGH,KAAH,GAAW,EAHlC;IAIE,SAAS,MAJX;IAKE,QAAQ,EAAEC,QALZ;IAME,MAAM,EAAEW,WANV,GADe;;;EAUf,cAAC,OAAD,IAAS,SAAS,EAAC,KAAnB,EAAyB,KAAK,EAAErB,CAAC,CAAC,qBAAD,CAAjC;EACE;IACE,SAAS,EAAC,6CADZ;;IAGE,WAAW,EAAEiB,WAHf;IAIE,UAAU,EAAEC,UAJd;IAKE,OAAO,EAAEC,OALX;IAME,MAAM,EAAEC,MANV;IAOE,IAAI,EAAC,QAPP;IAQE,QAAQ,EAAE,CARZ;;EAUGX,KAAK,IAAIgB,YAVZ;;EAYE;IACE,SAAS,EAAC,cADZ;IAEE,KAAK,EAAE,EAAEC,KAAK,EAAEb,SAAS,GAAG,OAAH,GAAa,MAA/B,EAFT,GAZF,CADF,CAVF;;;;;AA8BD,CAvEM"},"metadata":{},"sourceType":"module"}