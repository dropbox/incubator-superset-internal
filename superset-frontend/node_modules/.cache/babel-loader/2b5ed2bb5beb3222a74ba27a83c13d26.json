{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/jsx-sort-default-props, react/sort-prop-types */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { extent as d3Extent } from 'd3-array';\nimport { ensureIsArray, styled } from '@superset-ui/core';\nimport HorizonRow, { DEFAULT_COLORS } from './HorizonRow';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  seriesHeight: PropTypes.number,\n  data: PropTypes.arrayOf(\n  PropTypes.shape({\n    key: PropTypes.arrayOf(PropTypes.string),\n    values: PropTypes.arrayOf(\n    PropTypes.shape({\n      y: PropTypes.number })) })).\n\n\n\n  isRequired,\n  // number of bands in each direction (positive / negative)\n  bands: PropTypes.number,\n  colors: PropTypes.arrayOf(PropTypes.string),\n  colorScale: PropTypes.string,\n  mode: PropTypes.string,\n  offsetX: PropTypes.number };\n\nconst defaultProps = {\n  className: '',\n  width: 800,\n  height: 600,\n  seriesHeight: 20,\n  bands: Math.floor(DEFAULT_COLORS.length / 2),\n  colors: DEFAULT_COLORS,\n  colorScale: 'series',\n  mode: 'offset',\n  offsetX: 0 };\n\n\nconst StyledDiv = styled.div`\n  ${(_ref) => {let { theme } = _ref;return `\n    .superset-legacy-chart-horizon {\n      overflow: auto;\n      position: relative;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row {\n      border-bottom: solid 1px ${theme.colors.grayscale.light2};\n      border-top: 0;\n      padding: 0;\n      margin: 0;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row span.title {\n      position: absolute;\n      color: ${theme.colors.grayscale.dark1};\n      font-size: ${theme.typography.sizes.s}px;\n      margin: 0;\n    }\n  `;}}\n`;\n\nclass HorizonChart extends React.PureComponent {\n  render() {\n    const {\n      className,\n      width,\n      height,\n      data,\n      seriesHeight,\n      bands,\n      colors,\n      colorScale,\n      mode,\n      offsetX } =\n    this.props;\n\n    let yDomain;\n    if (colorScale === 'overall') {\n      const allValues = data.reduce(\n      (acc, current) => acc.concat(current.values),\n      []);\n\n      yDomain = d3Extent(allValues, (d) => d.y);\n    }\n\n    return (\n      ___EmotionJSX(StyledDiv, null,\n      ___EmotionJSX(\"div\", {\n        className: `superset-legacy-chart-horizon ${className}`,\n        style: { height } },\n\n      data.map((row) =>\n      ___EmotionJSX(HorizonRow, {\n        key: row.key,\n        width: width,\n        height: seriesHeight,\n        title: ensureIsArray(row.key).join(', '),\n        data: row.values,\n        bands: bands,\n        colors: colors,\n        colorScale: colorScale,\n        mode: mode,\n        offsetX: offsetX,\n        yDomain: yDomain })))));\n\n\n\n\n\n  }}\n\n\nHorizonChart.propTypes = propTypes;\nHorizonChart.defaultProps = defaultProps;\n\nexport default HorizonChart;","map":{"version":3,"names":["React","PropTypes","extent","d3Extent","ensureIsArray","styled","HorizonRow","DEFAULT_COLORS","propTypes","className","string","width","number","height","seriesHeight","data","arrayOf","shape","key","values","y","isRequired","bands","colors","colorScale","mode","offsetX","defaultProps","Math","floor","length","StyledDiv","div","theme","grayscale","light2","dark1","typography","sizes","s","HorizonChart","PureComponent","render","props","yDomain","allValues","reduce","acc","current","concat","d","map","row","join"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/legacy-plugin-chart-horizon/src/HorizonChart.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/jsx-sort-default-props, react/sort-prop-types */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { extent as d3Extent } from 'd3-array';\nimport { ensureIsArray, styled } from '@superset-ui/core';\nimport HorizonRow, { DEFAULT_COLORS } from './HorizonRow';\n\nconst propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  seriesHeight: PropTypes.number,\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      key: PropTypes.arrayOf(PropTypes.string),\n      values: PropTypes.arrayOf(\n        PropTypes.shape({\n          y: PropTypes.number,\n        }),\n      ),\n    }),\n  ).isRequired,\n  // number of bands in each direction (positive / negative)\n  bands: PropTypes.number,\n  colors: PropTypes.arrayOf(PropTypes.string),\n  colorScale: PropTypes.string,\n  mode: PropTypes.string,\n  offsetX: PropTypes.number,\n};\nconst defaultProps = {\n  className: '',\n  width: 800,\n  height: 600,\n  seriesHeight: 20,\n  bands: Math.floor(DEFAULT_COLORS.length / 2),\n  colors: DEFAULT_COLORS,\n  colorScale: 'series',\n  mode: 'offset',\n  offsetX: 0,\n};\n\nconst StyledDiv = styled.div`\n  ${({ theme }) => `\n    .superset-legacy-chart-horizon {\n      overflow: auto;\n      position: relative;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row {\n      border-bottom: solid 1px ${theme.colors.grayscale.light2};\n      border-top: 0;\n      padding: 0;\n      margin: 0;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row span.title {\n      position: absolute;\n      color: ${theme.colors.grayscale.dark1};\n      font-size: ${theme.typography.sizes.s}px;\n      margin: 0;\n    }\n  `}\n`;\n\nclass HorizonChart extends React.PureComponent {\n  render() {\n    const {\n      className,\n      width,\n      height,\n      data,\n      seriesHeight,\n      bands,\n      colors,\n      colorScale,\n      mode,\n      offsetX,\n    } = this.props;\n\n    let yDomain;\n    if (colorScale === 'overall') {\n      const allValues = data.reduce(\n        (acc, current) => acc.concat(current.values),\n        [],\n      );\n      yDomain = d3Extent(allValues, d => d.y);\n    }\n\n    return (\n      <StyledDiv>\n        <div\n          className={`superset-legacy-chart-horizon ${className}`}\n          style={{ height }}\n        >\n          {data.map(row => (\n            <HorizonRow\n              key={row.key}\n              width={width}\n              height={seriesHeight}\n              title={ensureIsArray(row.key).join(', ')}\n              data={row.values}\n              bands={bands}\n              colors={colors}\n              colorScale={colorScale}\n              mode={mode}\n              offsetX={offsetX}\n              yDomain={yDomain}\n            />\n          ))}\n        </div>\n      </StyledDiv>\n    );\n  }\n}\n\nHorizonChart.propTypes = propTypes;\nHorizonChart.defaultProps = defaultProps;\n\nexport default HorizonChart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}