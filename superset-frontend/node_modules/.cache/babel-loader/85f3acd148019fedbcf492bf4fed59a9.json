{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport React, { useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport Icons from 'src/components/Icons';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst FILTER_TYPE = 'FILTER';\nconst Container = styled.div`\n  ${(_ref) => {let { isDragging, theme } = _ref;return `\n    opacity: ${isDragging ? 0.3 : 1};\n    cursor: ${isDragging ? 'grabbing' : 'pointer'};\n    width: 100%;\n    display: flex;\n    padding:  ${theme.gridUnit}px;\n  `;}}\n`;\nconst DragIcon = styled(Icons.Drag, {\n  shouldForwardProp: (propName) => propName !== 'isDragging' })\n`\n  ${(_ref2) => {let { isDragging, theme } = _ref2;return `\n    font-size: ${theme.typography.sizes.m}px;\n    margin-top: 15px;\n    cursor: ${isDragging ? 'grabbing' : 'grab'};\n    padding-left: ${theme.gridUnit}px;\n  `;}}\n`;var _ref4 = process.env.NODE_ENV === \"production\" ? { name: \"82a6rk\", styles: \"flex:1\" } : { name: \"xm0v1y-DraggableFilter\", styles: \"flex:1;label:DraggableFilter;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2Rhc2hib2FyZC9jb21wb25lbnRzL25hdGl2ZUZpbHRlcnMvRmlsdGVyc0NvbmZpZ01vZGFsL0RyYWdnYWJsZUZpbHRlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNkZXIiwiZmlsZSI6Ii9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2Rhc2hib2FyZC9jb21wb25lbnRzL25hdGl2ZUZpbHRlcnMvRmlsdGVyc0NvbmZpZ01vZGFsL0RyYWdnYWJsZUZpbHRlci50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBzdHlsZWQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlRHJhZywgdXNlRHJvcCwgfSBmcm9tICdyZWFjdC1kbmQnO1xuaW1wb3J0IEljb25zIGZyb20gJ3NyYy9jb21wb25lbnRzL0ljb25zJztcbmNvbnN0IEZJTFRFUl9UWVBFID0gJ0ZJTFRFUic7XG5jb25zdCBDb250YWluZXIgPSBzdHlsZWQuZGl2IGBcbiAgJHsoeyBpc0RyYWdnaW5nLCB0aGVtZSB9KSA9PiBgXG4gICAgb3BhY2l0eTogJHtpc0RyYWdnaW5nID8gMC4zIDogMX07XG4gICAgY3Vyc29yOiAke2lzRHJhZ2dpbmcgPyAnZ3JhYmJpbmcnIDogJ3BvaW50ZXInfTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHBhZGRpbmc6ICAke3RoZW1lLmdyaWRVbml0fXB4O1xuICBgfVxuYDtcbmNvbnN0IERyYWdJY29uID0gc3R5bGVkKEljb25zLkRyYWcsIHtcbiAgICBzaG91bGRGb3J3YXJkUHJvcDogcHJvcE5hbWUgPT4gcHJvcE5hbWUgIT09ICdpc0RyYWdnaW5nJyxcbn0pIGBcbiAgJHsoeyBpc0RyYWdnaW5nLCB0aGVtZSB9KSA9PiBgXG4gICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuc2l6ZXMubX1weDtcbiAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgIGN1cnNvcjogJHtpc0RyYWdnaW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJ307XG4gICAgcGFkZGluZy1sZWZ0OiAke3RoZW1lLmdyaWRVbml0fXB4O1xuICBgfVxuYDtcbmV4cG9ydCBjb25zdCBEcmFnZ2FibGVGaWx0ZXIgPSAoeyBpbmRleCwgb25SZWFycmFuZ2UsIGZpbHRlcklkcywgY2hpbGRyZW4sIH0pID0+IHtcbiAgICBjb25zdCByZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgW3sgaXNEcmFnZ2luZyB9LCBkcmFnXSA9IHVzZURyYWcoe1xuICAgICAgICBpdGVtOiB7IGZpbHRlcklkcywgdHlwZTogRklMVEVSX1RZUEUsIGluZGV4IH0sXG4gICAgICAgIGNvbGxlY3Q6IChtb25pdG9yKSA9PiAoe1xuICAgICAgICAgICAgaXNEcmFnZ2luZzogbW9uaXRvci5pc0RyYWdnaW5nKCksXG4gICAgICAgIH0pLFxuICAgIH0pO1xuICAgIGNvbnN0IFssIGRyb3BdID0gdXNlRHJvcCh7XG4gICAgICAgIGFjY2VwdDogRklMVEVSX1RZUEUsXG4gICAgICAgIGhvdmVyOiAoaXRlbSwgbW9uaXRvcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRyYWdJbmRleCA9IGl0ZW0uaW5kZXg7XG4gICAgICAgICAgICBjb25zdCBob3ZlckluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAvLyBEb24ndCByZXBsYWNlIGl0ZW1zIHdpdGggdGhlbXNlbHZlc1xuICAgICAgICAgICAgaWYgKGRyYWdJbmRleCA9PT0gaG92ZXJJbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERldGVybWluZSByZWN0YW5nbGUgb24gc2NyZWVuXG4gICAgICAgICAgICBjb25zdCBob3ZlckJvdW5kaW5nUmVjdCA9IHJlZi5jdXJyZW50Py5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIC8vIEdldCB2ZXJ0aWNhbCBtaWRkbGVcbiAgICAgICAgICAgIGNvbnN0IGhvdmVyTWlkZGxlWSA9IChob3ZlckJvdW5kaW5nUmVjdC5ib3R0b20gLSBob3ZlckJvdW5kaW5nUmVjdC50b3ApIC8gMjtcbiAgICAgICAgICAgIC8vIERldGVybWluZSBtb3VzZSBwb3NpdGlvblxuICAgICAgICAgICAgY29uc3QgY2xpZW50T2Zmc2V0ID0gbW9uaXRvci5nZXRDbGllbnRPZmZzZXQoKTtcbiAgICAgICAgICAgIC8vIEdldCBwaXhlbHMgdG8gdGhlIHRvcFxuICAgICAgICAgICAgY29uc3QgaG92ZXJDbGllbnRZID0gY2xpZW50T2Zmc2V0LnkgLSBob3ZlckJvdW5kaW5nUmVjdC50b3A7XG4gICAgICAgICAgICAvLyBPbmx5IHBlcmZvcm0gdGhlIG1vdmUgd2hlbiB0aGUgbW91c2UgaGFzIGNyb3NzZWQgaGFsZiBvZiB0aGUgaXRlbXMgaGVpZ2h0XG4gICAgICAgICAgICAvLyBXaGVuIGRyYWdnaW5nIGRvd253YXJkcywgb25seSBtb3ZlIHdoZW4gdGhlIGN1cnNvciBpcyBiZWxvdyA1MCVcbiAgICAgICAgICAgIC8vIFdoZW4gZHJhZ2dpbmcgdXB3YXJkcywgb25seSBtb3ZlIHdoZW4gdGhlIGN1cnNvciBpcyBhYm92ZSA1MCVcbiAgICAgICAgICAgIC8vIERyYWdnaW5nIGRvd253YXJkc1xuICAgICAgICAgICAgaWYgKGRyYWdJbmRleCA8IGhvdmVySW5kZXggJiYgaG92ZXJDbGllbnRZIDwgaG92ZXJNaWRkbGVZKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZ2dpbmcgdXB3YXJkc1xuICAgICAgICAgICAgaWYgKGRyYWdJbmRleCA+IGhvdmVySW5kZXggJiYgaG92ZXJDbGllbnRZID4gaG92ZXJNaWRkbGVZKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25SZWFycmFuZ2UoZHJhZ0luZGV4LCBob3ZlckluZGV4KTtcbiAgICAgICAgICAgIC8vIE5vdGU6IHdlJ3JlIG11dGF0aW5nIHRoZSBtb25pdG9yIGl0ZW0gaGVyZS5cbiAgICAgICAgICAgIC8vIEdlbmVyYWxseSBpdCdzIGJldHRlciB0byBhdm9pZCBtdXRhdGlvbnMsXG4gICAgICAgICAgICAvLyBidXQgaXQncyBnb29kIGhlcmUgZm9yIHRoZSBzYWtlIG9mIHBlcmZvcm1hbmNlXG4gICAgICAgICAgICAvLyB0byBhdm9pZCBleHBlbnNpdmUgaW5kZXggc2VhcmNoZXMuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGl0ZW0uaW5kZXggPSBob3ZlckluZGV4O1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGRyYWcoZHJvcChyZWYpKTtcbiAgICByZXR1cm4gKDxDb250YWluZXIgcmVmPXtyZWZ9IGlzRHJhZ2dpbmc9e2lzRHJhZ2dpbmd9PlxuICAgICAgPERyYWdJY29uIGlzRHJhZ2dpbmc9e2lzRHJhZ2dpbmd9IGFsdD1cIk1vdmUgaWNvblwiIGNsYXNzTmFtZT1cImRyYWdJY29uXCIgdmlld0JveD1cIjQgNCAxNiAxNlwiLz5cbiAgICAgIDxkaXYgY3NzPXt7IGZsZXg6IDEgfX0+e2NoaWxkcmVufTwvZGl2PlxuICAgIDwvQ29udGFpbmVyPik7XG59O1xuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlRmlsdGVyO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nexport const DraggableFilter = (_ref3) => {let { index, onRearrange, filterIds, children } = _ref3;\n  const ref = useRef(null);\n  const [{ isDragging }, drag] = useDrag({\n    item: { filterIds, type: FILTER_TYPE, index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging() }) });\n\n\n  const [, drop] = useDrop({\n    accept: FILTER_TYPE,\n    hover: (item, monitor) => {var _ref$current;\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n      // Determine rectangle on screen\n      const hoverBoundingRect = (_ref$current = ref.current) == null ? void 0 : _ref$current.getBoundingClientRect();\n      // Get vertical middle\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n      // Get pixels to the top\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n      onRearrange(dragIndex, hoverIndex);\n      // Note: we're mutating the monitor item here.\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      // eslint-disable-next-line no-param-reassign\n      item.index = hoverIndex;\n    } });\n\n  drag(drop(ref));\n  return ___EmotionJSX(Container, { ref: ref, isDragging: isDragging },\n  ___EmotionJSX(DragIcon, { isDragging: isDragging, alt: \"Move icon\", className: \"dragIcon\", viewBox: \"4 4 16 16\" }),\n  ___EmotionJSX(\"div\", { css: _ref4 }, children));\n\n};__signature__(DraggableFilter, \"useRef{ref}\\nuseDrag{[{ isDragging }, drag]}\\nuseDrop{[, drop]}\", () => [useDrag, useDrop]);const _default =\nDraggableFilter;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FILTER_TYPE, \"FILTER_TYPE\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FiltersConfigModal/DraggableFilter.tsx\");reactHotLoader.register(Container, \"Container\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FiltersConfigModal/DraggableFilter.tsx\");reactHotLoader.register(DragIcon, \"DragIcon\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FiltersConfigModal/DraggableFilter.tsx\");reactHotLoader.register(DraggableFilter, \"DraggableFilter\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FiltersConfigModal/DraggableFilter.tsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FiltersConfigModal/DraggableFilter.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["styled","React","useRef","useDrag","useDrop","Icons","FILTER_TYPE","Container","div","isDragging","theme","gridUnit","DragIcon","Drag","shouldForwardProp","propName","typography","sizes","m","DraggableFilter","index","onRearrange","filterIds","children","ref","drag","item","type","collect","monitor","drop","accept","hover","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/dashboard/components/nativeFilters/FiltersConfigModal/DraggableFilter.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport React, { useRef } from 'react';\nimport {\n  DragSourceMonitor,\n  DropTargetMonitor,\n  useDrag,\n  useDrop,\n  XYCoord,\n} from 'react-dnd';\nimport Icons, { IconType } from 'src/components/Icons';\n\ninterface TitleContainerProps {\n  readonly isDragging: boolean;\n}\n\nconst FILTER_TYPE = 'FILTER';\n\nconst Container = styled.div<TitleContainerProps>`\n  ${({ isDragging, theme }) => `\n    opacity: ${isDragging ? 0.3 : 1};\n    cursor: ${isDragging ? 'grabbing' : 'pointer'};\n    width: 100%;\n    display: flex;\n    padding:  ${theme.gridUnit}px;\n  `}\n`;\n\nconst DragIcon = styled(Icons.Drag, {\n  shouldForwardProp: propName => propName !== 'isDragging',\n})<IconType & { isDragging: boolean }>`\n  ${({ isDragging, theme }) => `\n    font-size: ${theme.typography.sizes.m}px;\n    margin-top: 15px;\n    cursor: ${isDragging ? 'grabbing' : 'grab'};\n    padding-left: ${theme.gridUnit}px;\n  `}\n`;\n\ninterface FilterTabTitleProps {\n  index: number;\n  filterIds: string[];\n  onRearrange: (dragItemIndex: number, targetIndex: number) => void;\n}\n\ninterface DragItem {\n  index: number;\n  filterIds: string[];\n  type: string;\n}\n\nexport const DraggableFilter: React.FC<FilterTabTitleProps> = ({\n  index,\n  onRearrange,\n  filterIds,\n  children,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [{ isDragging }, drag] = useDrag({\n    item: { filterIds, type: FILTER_TYPE, index },\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n  const [, drop] = useDrop({\n    accept: FILTER_TYPE,\n    hover: (item: DragItem, monitor: DropTargetMonitor) => {\n      if (!ref.current) {\n        return;\n      }\n\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      onRearrange(dragIndex, hoverIndex);\n      // Note: we're mutating the monitor item here.\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      // eslint-disable-next-line no-param-reassign\n      item.index = hoverIndex;\n    },\n  });\n  drag(drop(ref));\n  return (\n    <Container ref={ref} isDragging={isDragging}>\n      <DragIcon\n        isDragging={isDragging}\n        alt=\"Move icon\"\n        className=\"dragIcon\"\n        viewBox=\"4 4 16 16\"\n      />\n      <div css={{ flex: 1 }}>{children}</div>\n    </Container>\n  );\n};\n\nexport default DraggableFilter;\n"]},"metadata":{},"sourceType":"module"}