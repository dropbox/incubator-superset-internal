{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useRef, useState } from 'react';\nimport { useAsyncDebounce } from 'react-table';\n// useAsyncDebounce in dist build of `react-table` requires regeneratorRuntime\nimport 'regenerator-runtime/runtime';\n/**\n * Hook useState to allow always return latest initialValue\n */\nexport default function useAsyncState(initialValue, callback, wait) {if (wait === void 0) {wait = 200;}\n  const [value, setValue] = useState(initialValue);\n  const valueRef = useRef(initialValue);\n  const onChange = useAsyncDebounce(callback, wait);\n  // sync updated initialValue\n  if (valueRef.current !== initialValue) {\n    valueRef.current = initialValue;\n    if (value !== initialValue) {\n      setValue(initialValue);\n    }\n  }\n  const setBoth = (newValue) => {\n    setValue(newValue);\n    onChange(newValue);\n  };\n  return [value, setBoth];\n}__signature__(useAsyncState, \"useState{[value, setValue](initialValue)}\\nuseRef{valueRef}\\nuseAsyncDebounce{onChange}\", () => [useAsyncDebounce]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(useAsyncState, \"useAsyncState\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/plugin-chart-table/src/DataTable/utils/useAsyncState.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,MAAT,EAAiBC,QAAjB,QAAiC,OAAjC;AACA,SAASC,gBAAT,QAAiC,aAAjC;AAEA;AACA,OAAO,6BAAP;AAEA;;;AAGA,eAAc,SAAUC,aAAV,CACZC,YADY,EAEZC,QAFY,EAGZC,IAHY,EAGF,KAAVA,IAAU,cAAVA,IAAU,GAAH,GAAG;EAEV,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAACG,YAAD,CAAlC;EACA,MAAMK,QAAQ,GAAGT,MAAM,CAACI,YAAD,CAAvB;EACA,MAAMM,QAAQ,GAAGR,gBAAgB,CAACG,QAAD,EAAWC,IAAX,CAAjC;EAEA;EACA,IAAIG,QAAQ,CAACE,OAAT,KAAqBP,YAAzB,EAAuC;IACrCK,QAAQ,CAACE,OAAT,GAAmBP,YAAnB;IACA,IAAIG,KAAK,KAAKH,YAAd,EAA4B;MAC1BI,QAAQ,CAACJ,YAAD,CAAR;IACD;EACF;EAED,MAAMQ,OAAO,GAAG,CAACC,QAAD,KAAgB;IAC9BL,QAAQ,CAACK,QAAD,CAAR;IACAH,QAAQ,CAACG,QAAD,CAAR;EACD,CAHD;EAKA,OAAO,CAACN,KAAD,EAAQK,OAAR,CAAP;AACD,C,cAvBuBT,a,oGAOLD,gB,oLAPKC,a","names":["useRef","useState","useAsyncDebounce","useAsyncState","initialValue","callback","wait","value","setValue","valueRef","onChange","current","setBoth","newValue"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/plugins/plugin-chart-table/src/DataTable/utils/useAsyncState.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useRef, useState } from 'react';\nimport { useAsyncDebounce } from 'react-table';\n\n// useAsyncDebounce in dist build of `react-table` requires regeneratorRuntime\nimport 'regenerator-runtime/runtime';\n\n/**\n * Hook useState to allow always return latest initialValue\n */\nexport default function useAsyncState<T, F extends (newValue: T) => unknown>(\n  initialValue: T,\n  callback: F,\n  wait = 200,\n) {\n  const [value, setValue] = useState(initialValue);\n  const valueRef = useRef(initialValue);\n  const onChange = useAsyncDebounce(callback, wait);\n\n  // sync updated initialValue\n  if (valueRef.current !== initialValue) {\n    valueRef.current = initialValue;\n    if (value !== initialValue) {\n      setValue(initialValue);\n    }\n  }\n\n  const setBoth = (newValue: T) => {\n    setValue(newValue);\n    onChange(newValue);\n  };\n\n  return [value, setBoth] as [typeof value, typeof setValue];\n}\n"]},"metadata":{},"sourceType":"module"}