{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\nGenericDataType,\ngetTimeFormatter,\ngetValueFormatter } from\n'@superset-ui/core';\n\nexport default function transformProps(chartProps) {\n  const { width, height, formData, queriesData, datasource } = chartProps;\n  const {\n    bottomMargin,\n    canvasImageRendering,\n    allColumnsX,\n    allColumnsY,\n    linearColorScheme,\n    leftMargin,\n    metric,\n    normalized,\n    showLegend,\n    showPerc,\n    showValues,\n    sortXAxis,\n    sortYAxis,\n    xscaleInterval,\n    yscaleInterval,\n    yAxisBounds,\n    yAxisFormat,\n    timeFormat } =\n  formData;\n  const { data = [], coltypes = [] } = queriesData[0];\n  const { columnFormats = {}, currencyFormats = {} } = datasource;\n  const valueFormatter = getValueFormatter(\n  metric,\n  currencyFormats,\n  columnFormats,\n  yAxisFormat);\n\n  const xAxisFormatter =\n  coltypes[0] === GenericDataType.TEMPORAL ?\n  getTimeFormatter(timeFormat) :\n  String;\n  const yAxisFormatter =\n  coltypes[1] === GenericDataType.TEMPORAL ?\n  getTimeFormatter(timeFormat) :\n  String;\n  return {\n    width,\n    height,\n    data,\n    bottomMargin,\n    canvasImageRendering,\n    colorScheme: linearColorScheme,\n    columnX: allColumnsX,\n    columnY: allColumnsY,\n    leftMargin,\n    metric,\n    normalized,\n    showLegend,\n    showPercentage: showPerc,\n    showValues,\n    sortXAxis,\n    sortYAxis,\n    xScaleInterval: parseInt(xscaleInterval, 10),\n    yScaleInterval: parseInt(yscaleInterval, 10),\n    yAxisBounds,\n    valueFormatter,\n    xAxisFormatter,\n    yAxisFormatter };\n\n}","map":{"version":3,"names":["GenericDataType","getTimeFormatter","getValueFormatter","transformProps","chartProps","width","height","formData","queriesData","datasource","bottomMargin","canvasImageRendering","allColumnsX","allColumnsY","linearColorScheme","leftMargin","metric","normalized","showLegend","showPerc","showValues","sortXAxis","sortYAxis","xscaleInterval","yscaleInterval","yAxisBounds","yAxisFormat","timeFormat","data","coltypes","columnFormats","currencyFormats","valueFormatter","xAxisFormatter","TEMPORAL","String","yAxisFormatter","colorScheme","columnX","columnY","showPercentage","xScaleInterval","parseInt","yScaleInterval"],"sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/plugins/legacy-plugin-chart-heatmap/src/transformProps.js"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  GenericDataType,\n  getTimeFormatter,\n  getValueFormatter,\n} from '@superset-ui/core';\n\nexport default function transformProps(chartProps) {\n  const { width, height, formData, queriesData, datasource } = chartProps;\n  const {\n    bottomMargin,\n    canvasImageRendering,\n    allColumnsX,\n    allColumnsY,\n    linearColorScheme,\n    leftMargin,\n    metric,\n    normalized,\n    showLegend,\n    showPerc,\n    showValues,\n    sortXAxis,\n    sortYAxis,\n    xscaleInterval,\n    yscaleInterval,\n    yAxisBounds,\n    yAxisFormat,\n    timeFormat,\n  } = formData;\n  const { data = [], coltypes = [] } = queriesData[0];\n  const { columnFormats = {}, currencyFormats = {} } = datasource;\n  const valueFormatter = getValueFormatter(\n    metric,\n    currencyFormats,\n    columnFormats,\n    yAxisFormat,\n  );\n  const xAxisFormatter =\n    coltypes[0] === GenericDataType.TEMPORAL\n      ? getTimeFormatter(timeFormat)\n      : String;\n  const yAxisFormatter =\n    coltypes[1] === GenericDataType.TEMPORAL\n      ? getTimeFormatter(timeFormat)\n      : String;\n  return {\n    width,\n    height,\n    data,\n    bottomMargin,\n    canvasImageRendering,\n    colorScheme: linearColorScheme,\n    columnX: allColumnsX,\n    columnY: allColumnsY,\n    leftMargin,\n    metric,\n    normalized,\n    showLegend,\n    showPercentage: showPerc,\n    showValues,\n    sortXAxis,\n    sortYAxis,\n    xScaleInterval: parseInt(xscaleInterval, 10),\n    yScaleInterval: parseInt(yscaleInterval, 10),\n    yAxisBounds,\n    valueFormatter,\n    xAxisFormatter,\n    yAxisFormatter,\n  };\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEA,eADF;AAEEC,gBAFF;AAGEC,iBAHF;AAIO,mBAJP;;AAMA,eAAe,SAASC,cAAT,CAAwBC,UAAxB,EAAoC;EACjD,MAAM,EAAEC,KAAF,EAASC,MAAT,EAAiBC,QAAjB,EAA2BC,WAA3B,EAAwCC,UAAxC,KAAuDL,UAA7D;EACA,MAAM;IACJM,YADI;IAEJC,oBAFI;IAGJC,WAHI;IAIJC,WAJI;IAKJC,iBALI;IAMJC,UANI;IAOJC,MAPI;IAQJC,UARI;IASJC,UATI;IAUJC,QAVI;IAWJC,UAXI;IAYJC,SAZI;IAaJC,SAbI;IAcJC,cAdI;IAeJC,cAfI;IAgBJC,WAhBI;IAiBJC,WAjBI;IAkBJC,UAlBI;EAmBFpB,QAnBJ;EAoBA,MAAM,EAAEqB,IAAI,GAAG,EAAT,EAAaC,QAAQ,GAAG,EAAxB,KAA+BrB,WAAW,CAAC,CAAD,CAAhD;EACA,MAAM,EAAEsB,aAAa,GAAG,EAAlB,EAAsBC,eAAe,GAAG,EAAxC,KAA+CtB,UAArD;EACA,MAAMuB,cAAc,GAAG9B,iBAAiB;EACtCc,MADsC;EAEtCe,eAFsC;EAGtCD,aAHsC;EAItCJ,WAJsC,CAAxC;;EAMA,MAAMO,cAAc;EAClBJ,QAAQ,CAAC,CAAD,CAAR,KAAgB7B,eAAe,CAACkC,QAAhC;EACIjC,gBAAgB,CAAC0B,UAAD,CADpB;EAEIQ,MAHN;EAIA,MAAMC,cAAc;EAClBP,QAAQ,CAAC,CAAD,CAAR,KAAgB7B,eAAe,CAACkC,QAAhC;EACIjC,gBAAgB,CAAC0B,UAAD,CADpB;EAEIQ,MAHN;EAIA,OAAO;IACL9B,KADK;IAELC,MAFK;IAGLsB,IAHK;IAILlB,YAJK;IAKLC,oBALK;IAML0B,WAAW,EAAEvB,iBANR;IAOLwB,OAAO,EAAE1B,WAPJ;IAQL2B,OAAO,EAAE1B,WARJ;IASLE,UATK;IAULC,MAVK;IAWLC,UAXK;IAYLC,UAZK;IAaLsB,cAAc,EAAErB,QAbX;IAcLC,UAdK;IAeLC,SAfK;IAgBLC,SAhBK;IAiBLmB,cAAc,EAAEC,QAAQ,CAACnB,cAAD,EAAiB,EAAjB,CAjBnB;IAkBLoB,cAAc,EAAED,QAAQ,CAAClB,cAAD,EAAiB,EAAjB,CAlBnB;IAmBLC,WAnBK;IAoBLO,cApBK;IAqBLC,cArBK;IAsBLG,cAtBK,EAAP;;AAwBD"},"metadata":{},"sourceType":"module"}