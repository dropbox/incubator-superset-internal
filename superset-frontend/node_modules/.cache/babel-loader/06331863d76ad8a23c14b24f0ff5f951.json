{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport sqlSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/sql';\nimport htmlSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/htmlbars';\nimport markdownSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/markdown';\nimport jsonSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/json';\nimport github from 'react-syntax-highlighter/dist/cjs/styles/hljs/github';\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/light';\nimport Icons from 'src/components/Icons';\nimport copyTextToClipboard from 'src/utils/copy';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nSyntaxHighlighter.registerLanguage('sql', sqlSyntax);\nSyntaxHighlighter.registerLanguage('markdown', markdownSyntax);\nSyntaxHighlighter.registerLanguage('html', htmlSyntax);\nSyntaxHighlighter.registerLanguage('json', jsonSyntax);\nconst SyntaxHighlighterWrapper = styled.div`\n  margin-top: -24px;\n\n  &:hover {\n    svg {\n      visibility: visible;\n    }\n  }\n\n  svg {\n    position: relative;\n    top: 40px;\n    left: 512px;\n    visibility: hidden;\n    margin: -4px;\n    color: ${(_ref) => {let { theme } = _ref;return theme.colors.grayscale.base;}};\n  }\n`;\nexport default function SyntaxHighlighterCopy(_ref2) {let { addDangerToast, addSuccessToast, children, ...syntaxHighlighterProps } = _ref2;\n  function copyToClipboard(textToCopy) {\n    copyTextToClipboard(() => Promise.resolve(textToCopy)).\n    then(() => {\n      if (addSuccessToast) {\n        addSuccessToast(t('SQL Copied!'));\n      }\n    }).\n    catch(() => {\n      if (addDangerToast) {\n        addDangerToast(t('Sorry, your browser does not support copying.'));\n      }\n    });\n  }\n  return ___EmotionJSX(SyntaxHighlighterWrapper, null,\n  ___EmotionJSX(Icons.Copy, { tabIndex: 0, role: \"button\", onClick: (e) => {\n      e.preventDefault();\n      e.currentTarget.blur();\n      copyToClipboard(children);\n    } }),\n  ___EmotionJSX(SyntaxHighlighter, _extends({ style: github }, syntaxHighlighterProps),\n  children));\n\n\n}","map":{"version":3,"mappings":"+DAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,CAAjB,QAA0B,mBAA1B;AAEA,OAAOC,SAAP,MAAsB,sDAAtB;AACA,OAAOC,UAAP,MAAuB,2DAAvB;AACA,OAAOC,cAAP,MAA2B,2DAA3B;AACA,OAAOC,UAAP,MAAuB,uDAAvB;AACA,OAAOC,MAAP,MAAmB,sDAAnB;AACA,OAAOC,iBAAP,MAA8B,yCAA9B;AACA,OAAOC,KAAP,MAAkB,sBAAlB;AAEA,OAAOC,mBAAP,MAAgC,gBAAhC,C;AAEAF,iBAAiB,CAACG,gBAAlB,CAAmC,KAAnC,EAA0CR,SAA1C;AACAK,iBAAiB,CAACG,gBAAlB,CAAmC,UAAnC,EAA+CN,cAA/C;AACAG,iBAAiB,CAACG,gBAAlB,CAAmC,MAAnC,EAA2CP,UAA3C;AACAI,iBAAiB,CAACG,gBAAlB,CAAmC,MAAnC,EAA2CL,UAA3C;AAEA,MAAMM,wBAAwB,GAAGX,MAAM,CAACY,GAAG;;;;;;;;;;;;;;;aAe9B,eAAC,EAAEC,KAAF,EAAD,eAAeA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,IAAtC,EAA0C;;CAfvD;AAmBA,eAAc,SAAUC,qBAAV,QAUb,KAV6C,EAC5CC,cAD4C,EAE5CC,eAF4C,EAG5CC,QAH4C,EAI5C,GAAGC,sBAJyC,EAU7C;EACC,SAASC,eAAT,CAAyBC,UAAzB,EAA2C;IACzCd,mBAAmB,CAAC,MAAMe,OAAO,CAACC,OAAR,CAAgBF,UAAhB,CAAP,CAAnB;IACGG,IADH,CACQ,MAAK;MACT,IAAIP,eAAJ,EAAqB;QACnBA,eAAe,CAAClB,CAAC,CAAC,aAAD,CAAF,CAAf;MACD;IACF,CALH;IAMG0B,KANH,CAMS,MAAK;MACV,IAAIT,cAAJ,EAAoB;QAClBA,cAAc,CAACjB,CAAC,CAAC,+CAAD,CAAF,CAAd;MACD;IACF,CAVH;EAWD;EACD,OACE,cAAC,wBAAD;EACE,cAAC,KAAD,CAAO,IAAP,IACE,QAAQ,EAAE,CADZ,EAEE,IAAI,EAAC,QAFP,EAGE,OAAO,EAAE,EAAC,KAAG;MACX2B,CAAC,CAACC,cAAF;MACAD,CAAC,CAACE,aAAF,CAAgBC,IAAhB;MACAT,eAAe,CAACF,QAAD,CAAf;IACD,CAPH,GADF;EAUE,cAAC,iBAAD,aAAmB,KAAK,EAAEd,MAA1B,IAAsCe,sBAAtC;EACGD,QADH,CAVF,CADF;;;AAgBD","names":["React","styled","t","sqlSyntax","htmlSyntax","markdownSyntax","jsonSyntax","github","SyntaxHighlighter","Icons","copyTextToClipboard","registerLanguage","SyntaxHighlighterWrapper","div","theme","colors","grayscale","base","SyntaxHighlighterCopy","addDangerToast","addSuccessToast","children","syntaxHighlighterProps","copyToClipboard","textToCopy","Promise","resolve","then","catch","e","preventDefault","currentTarget","blur"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/features/queries/SyntaxHighlighterCopy.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { SyntaxHighlighterProps } from 'react-syntax-highlighter';\nimport sqlSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/sql';\nimport htmlSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/htmlbars';\nimport markdownSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/markdown';\nimport jsonSyntax from 'react-syntax-highlighter/dist/cjs/languages/hljs/json';\nimport github from 'react-syntax-highlighter/dist/cjs/styles/hljs/github';\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/light';\nimport Icons from 'src/components/Icons';\nimport { ToastProps } from 'src/components/MessageToasts/withToasts';\nimport copyTextToClipboard from 'src/utils/copy';\n\nSyntaxHighlighter.registerLanguage('sql', sqlSyntax);\nSyntaxHighlighter.registerLanguage('markdown', markdownSyntax);\nSyntaxHighlighter.registerLanguage('html', htmlSyntax);\nSyntaxHighlighter.registerLanguage('json', jsonSyntax);\n\nconst SyntaxHighlighterWrapper = styled.div`\n  margin-top: -24px;\n\n  &:hover {\n    svg {\n      visibility: visible;\n    }\n  }\n\n  svg {\n    position: relative;\n    top: 40px;\n    left: 512px;\n    visibility: hidden;\n    margin: -4px;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n  }\n`;\n\nexport default function SyntaxHighlighterCopy({\n  addDangerToast,\n  addSuccessToast,\n  children,\n  ...syntaxHighlighterProps\n}: SyntaxHighlighterProps & {\n  children: string;\n  addDangerToast?: ToastProps['addDangerToast'];\n  addSuccessToast?: ToastProps['addSuccessToast'];\n  language: 'sql' | 'markdown' | 'html' | 'json';\n}) {\n  function copyToClipboard(textToCopy: string) {\n    copyTextToClipboard(() => Promise.resolve(textToCopy))\n      .then(() => {\n        if (addSuccessToast) {\n          addSuccessToast(t('SQL Copied!'));\n        }\n      })\n      .catch(() => {\n        if (addDangerToast) {\n          addDangerToast(t('Sorry, your browser does not support copying.'));\n        }\n      });\n  }\n  return (\n    <SyntaxHighlighterWrapper>\n      <Icons.Copy\n        tabIndex={0}\n        role=\"button\"\n        onClick={e => {\n          e.preventDefault();\n          e.currentTarget.blur();\n          copyToClipboard(children);\n        }}\n      />\n      <SyntaxHighlighter style={github} {...syntaxHighlighterProps}>\n        {children}\n      </SyntaxHighlighter>\n    </SyntaxHighlighterWrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}