{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport const MENU_ITEM_HEIGHT = 32;\nconst MENU_PADDING = 4;\nconst MENU_VERTICAL_SPACING = 32;\n/**\n * Calculates an adjusted Y-offset for a menu or submenu to prevent that\n * menu from appearing offscreen\n *\n * @param clientY The original Y-offset\n * @param itemsCount The number of menu items\n */\nexport const getMenuAdjustedY = function (clientY, itemsCount, maxItemsContainerHeight, additionalItemsHeight) {if (maxItemsContainerHeight === void 0) {maxItemsContainerHeight = Number.MAX_SAFE_INTEGER;}if (additionalItemsHeight === void 0) {additionalItemsHeight = 0;}\n  // Viewport height\n  const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\n  const menuHeight = Math.min(MENU_ITEM_HEIGHT * itemsCount, maxItemsContainerHeight) +\n  MENU_VERTICAL_SPACING +\n  additionalItemsHeight;\n  // Always show the context menu inside the viewport\n  return vh - clientY < menuHeight ? vh - menuHeight : clientY;\n};\nexport const getSubmenuYOffset = function (contextMenuY, itemsCount, submenuIndex, maxItemsContainerHeight, additionalItemsHeight) {if (submenuIndex === void 0) {submenuIndex = 0;}if (maxItemsContainerHeight === void 0) {maxItemsContainerHeight = Number.MAX_SAFE_INTEGER;}if (additionalItemsHeight === void 0) {additionalItemsHeight = 0;}\n  const submenuY = contextMenuY +\n  MENU_PADDING +\n  MENU_ITEM_HEIGHT * submenuIndex +\n  MENU_PADDING;\n  return getMenuAdjustedY(submenuY, itemsCount, maxItemsContainerHeight, additionalItemsHeight) - submenuY;\n};","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;;;;AAmBA,OAAO,MAAMA,gBAAgB,GAAG,EAAzB;AACP,MAAMC,YAAY,GAAG,CAArB;AACA,MAAMC,qBAAqB,GAAG,EAA9B;AAEA;;;;;;;AAOA,OAAO,MAAMC,gBAAgB,GAAG,UAC9BC,OAD8B,EAE9BC,UAF8B,EAG9BC,uBAH8B,EAI9BC,qBAJ8B,EAK5B,KAFFD,uBAEE,cAFFA,uBAEE,GAFwBE,MAAM,CAACC,gBAE/B,MADFF,qBACE,cADFA,qBACE,GADsB,CACtB;EACF;EACA,MAAMG,EAAE,GAAGC,IAAI,CAACC,GAAL,CACTC,QAAQ,CAACC,eAAT,CAAyBC,YAAzB,IAAyC,CADhC,EAETC,MAAM,CAACC,WAAP,IAAsB,CAFb,CAAX;EAKA,MAAMC,UAAU,GACdP,IAAI,CAACQ,GAAL,CAASnB,gBAAgB,GAAGK,UAA5B,EAAwCC,uBAAxC;EACAJ,qBADA;EAEAK,qBAHF;EAIA;EACA,OAAOG,EAAE,GAAGN,OAAL,GAAec,UAAf,GAA4BR,EAAE,GAAGQ,UAAjC,GAA8Cd,OAArD;AACD,CAlBM;AAoBP,OAAO,MAAMgB,iBAAiB,GAAG,UAC/BC,YAD+B,EAE/BhB,UAF+B,EAG/BiB,YAH+B,EAI/BhB,uBAJ+B,EAK/BC,qBAL+B,EAM7B,KAHFe,YAGE,cAHFA,YAGE,GAHa,CAGb,MAFFhB,uBAEE,cAFFA,uBAEE,GAFwBE,MAAM,CAACC,gBAE/B,MADFF,qBACE,cADFA,qBACE,GADsB,CACtB;EACF,MAAMgB,QAAQ,GACZF,YAAY;EACZpB,YADA;EAEAD,gBAAgB,GAAGsB,YAFnB;EAGArB,YAJF;EAMA,OACEE,gBAAgB,CACdoB,QADc,EAEdlB,UAFc,EAGdC,uBAHc,EAIdC,qBAJc,CAAhB,GAKIgB,QANN;AAQD,CArBM","names":["MENU_ITEM_HEIGHT","MENU_PADDING","MENU_VERTICAL_SPACING","getMenuAdjustedY","clientY","itemsCount","maxItemsContainerHeight","additionalItemsHeight","Number","MAX_SAFE_INTEGER","vh","Math","max","document","documentElement","clientHeight","window","innerHeight","menuHeight","min","getSubmenuYOffset","contextMenuY","submenuIndex","submenuY"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/components/Chart/utils.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport const MENU_ITEM_HEIGHT = 32;\nconst MENU_PADDING = 4;\nconst MENU_VERTICAL_SPACING = 32;\n\n/**\n * Calculates an adjusted Y-offset for a menu or submenu to prevent that\n * menu from appearing offscreen\n *\n * @param clientY The original Y-offset\n * @param itemsCount The number of menu items\n */\nexport const getMenuAdjustedY = (\n  clientY: number,\n  itemsCount: number,\n  maxItemsContainerHeight = Number.MAX_SAFE_INTEGER,\n  additionalItemsHeight = 0,\n) => {\n  // Viewport height\n  const vh = Math.max(\n    document.documentElement.clientHeight || 0,\n    window.innerHeight || 0,\n  );\n\n  const menuHeight =\n    Math.min(MENU_ITEM_HEIGHT * itemsCount, maxItemsContainerHeight) +\n    MENU_VERTICAL_SPACING +\n    additionalItemsHeight;\n  // Always show the context menu inside the viewport\n  return vh - clientY < menuHeight ? vh - menuHeight : clientY;\n};\n\nexport const getSubmenuYOffset = (\n  contextMenuY: number,\n  itemsCount: number,\n  submenuIndex = 0,\n  maxItemsContainerHeight = Number.MAX_SAFE_INTEGER,\n  additionalItemsHeight = 0,\n) => {\n  const submenuY =\n    contextMenuY +\n    MENU_PADDING +\n    MENU_ITEM_HEIGHT * submenuIndex +\n    MENU_PADDING;\n\n  return (\n    getMenuAdjustedY(\n      submenuY,\n      itemsCount,\n      maxItemsContainerHeight,\n      additionalItemsHeight,\n    ) - submenuY\n  );\n};\n"]},"metadata":{},"sourceType":"module"}