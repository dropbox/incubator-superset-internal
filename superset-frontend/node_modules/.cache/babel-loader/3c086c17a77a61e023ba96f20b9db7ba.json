{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport Fuse from 'fuse.js';\nimport cx from 'classnames';\nimport { t, styled, css, useTheme, chartLabelWeight, chartLabelExplanations } from '@superset-ui/core';\nimport { AntdCollapse } from 'src/components';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Input } from 'src/components/Input';\nimport Label from 'src/components/Label';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport Icons from 'src/components/Icons';\nimport { nativeFilterGate } from 'src/dashboard/components/nativeFilters/utils';\nimport scrollIntoView from 'scroll-into-view-if-needed';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nvar SECTIONS;\n(function (SECTIONS) {\n  SECTIONS[\"ALL_CHARTS\"] = \"ALL_CHARTS\";\n  SECTIONS[\"CATEGORY\"] = \"CATEGORY\";\n  SECTIONS[\"TAGS\"] = \"TAGS\";\n  SECTIONS[\"RECOMMENDED_TAGS\"] = \"RECOMMENDED_TAGS\";\n})(SECTIONS || (SECTIONS = {}));\nconst DEFAULT_ORDER = [\n'line',\n'big_number',\n'big_number_total',\n'table',\n'pivot_table_v2',\n'echarts_timeseries_line',\n'echarts_area',\n'echarts_timeseries_bar',\n'echarts_timeseries_scatter',\n'pie',\n'mixed_timeseries',\n'filter_box',\n'dist_bar',\n'area',\n'bar',\n'deck_polygon',\n'time_table',\n'histogram',\n'deck_scatter',\n'deck_hex',\n'time_pivot',\n'deck_arc',\n'heatmap',\n'deck_grid',\n'deck_screengrid',\n'treemap_v2',\n'box_plot',\n'sunburst',\n'sankey',\n'word_cloud',\n'mapbox',\n'kepler',\n'cal_heatmap',\n'rose',\n'bubble',\n'deck_geojson',\n'horizon',\n'deck_multi',\n'compare',\n'partition',\n'event_flow',\n'deck_path',\n'graph_chart',\n'world_map',\n'paired_ttest',\n'para',\n'country_map'];\n\nconst typesWithDefaultOrder = new Set(DEFAULT_ORDER);\nconst THUMBNAIL_GRID_UNITS = 24;\nexport const MAX_ADVISABLE_VIZ_GALLERY_WIDTH = 1090;\nconst OTHER_CATEGORY = t('Other');\nconst ALL_CHARTS = t('All charts');\nconst RECOMMENDED_TAGS = [t('Popular'), t('ECharts'), t('Advanced-Analytics')];\nexport const VIZ_TYPE_CONTROL_TEST_ID = 'viz-type-control';\nconst VizPickerLayout = styled.div`\n  ${(_ref) => {let { isSelectedVizMetadata } = _ref;return `\n    display: grid;\n    grid-template-rows: ${isSelectedVizMetadata ?\n  `auto minmax(100px, 1fr) minmax(200px, 35%)` :\n  'auto minmax(100px, 1fr)'};\n    // em is used here because the sidebar should be sized to fit the longest standard tag\n    grid-template-columns: minmax(14em, auto) 5fr;\n    grid-template-areas:\n      'sidebar search'\n      'sidebar main'\n      'details details';\n    height: 70vh;\n    overflow: auto;\n  `;}}\n`;\nconst SectionTitle = styled.h3`\n  margin-top: 0;\n  margin-bottom: ${(_ref2) => {let { theme } = _ref2;return theme.gridUnit * 2;}}px;\n  font-size: ${(_ref3) => {let { theme } = _ref3;return theme.typography.sizes.l;}}px;\n  font-weight: ${(_ref4) => {let { theme } = _ref4;return theme.typography.weights.bold;}};\n  line-height: ${(_ref5) => {let { theme } = _ref5;return theme.gridUnit * 6;}}px;\n`;\nconst LeftPane = styled.div`\n  grid-area: sidebar;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid ${(_ref6) => {let { theme } = _ref6;return theme.colors.grayscale.light2;}};\n  overflow: auto;\n\n  .ant-collapse .ant-collapse-item {\n    .ant-collapse-header {\n      font-size: ${(_ref7) => {let { theme } = _ref7;return theme.typography.sizes.s;}}px;\n      color: ${(_ref8) => {let { theme } = _ref8;return theme.colors.grayscale.base;}};\n      padding-left: ${(_ref9) => {let { theme } = _ref9;return theme.gridUnit * 2;}}px;\n      padding-bottom: ${(_ref10) => {let { theme } = _ref10;return theme.gridUnit;}}px;\n    }\n    .ant-collapse-content .ant-collapse-content-box {\n      display: flex;\n      flex-direction: column;\n      padding: 0 ${(_ref11) => {let { theme } = _ref11;return theme.gridUnit * 2;}}px;\n    }\n  }\n`;\nconst RightPane = styled.div`\n  grid-area: main;\n  overflow-y: auto;\n`;\nconst SearchWrapper = styled.div`\n  ${(_ref12) => {let { theme } = _ref12;return `\n    grid-area: search;\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-bottom: ${theme.gridUnit}px;\n    margin-left: ${theme.gridUnit * 3}px;\n    margin-right: ${theme.gridUnit * 3}px;\n    .ant-input-affix-wrapper {\n      padding-left: ${theme.gridUnit * 2}px;\n    }\n  `;}}\n`;\n/** Styles to line up prefix/suffix icons in the search input */\nconst InputIconAlignment = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${(_ref13) => {let { theme } = _ref13;return theme.colors.grayscale.base;}};\n`;\nconst SelectorLabel = styled.button`\n  ${(_ref14) => {let { theme } = _ref14;return `\n    all: unset; // remove default button styles\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    margin: ${theme.gridUnit}px 0;\n    padding: 0 ${theme.gridUnit}px;\n    border-radius: ${theme.borderRadius}px;\n    line-height: 2em;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n\n    &:focus {\n      outline: initial;\n    }\n\n    &.selected {\n      background-color: ${theme.colors.primary.base};\n      color: ${theme.colors.primary.light5};\n\n      svg {\n        color: ${theme.colors.primary.light5};\n      }\n\n      &:hover {\n        .cancel {\n          visibility: visible;\n        }\n      }\n    }\n\n    & span:first-of-type svg {\n      margin-top: ${theme.gridUnit * 1.5}px;\n    }\n\n    .cancel {\n      visibility: hidden;\n    }\n  `;}}\n`;\nconst IconsPane = styled.div`\n  overflow: auto;\n  display: grid;\n  grid-template-columns: repeat(\n    auto-fill,\n    ${(_ref15) => {let { theme } = _ref15;return theme.gridUnit * THUMBNAIL_GRID_UNITS;}}px\n  );\n  grid-auto-rows: max-content;\n  justify-content: space-evenly;\n  grid-gap: ${(_ref16) => {let { theme } = _ref16;return theme.gridUnit * 2;}}px;\n  justify-items: center;\n  // for some reason this padding doesn't seem to apply at the bottom of the container. Why is a mystery.\n  padding: ${(_ref17) => {let { theme } = _ref17;return theme.gridUnit * 2;}}px;\n`;\nconst DetailsPane = (theme) => css`\n  grid-area: details;\n  border-top: 1px solid ${theme.colors.grayscale.light2};\n`;\nconst DetailsPopulated = (theme) => css`\n  padding: ${theme.gridUnit * 4}px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: auto auto 1fr;\n  grid-template-areas:\n    'viz-name examples-header'\n    'viz-tags examples'\n    'description examples';\n`;\n// overflow hidden on the details pane and overflow auto on the description\n// (plus grid layout) enables the description to scroll while the header stays in place.\nconst TagsWrapper = styled.div`\n  grid-area: viz-tags;\n  width: ${(_ref18) => {let { theme } = _ref18;return theme.gridUnit * 120;}}px;\n  padding-right: ${(_ref19) => {let { theme } = _ref19;return theme.gridUnit * 14;}}px;\n  padding-bottom: ${(_ref20) => {let { theme } = _ref20;return theme.gridUnit * 2;}}px;\n`;\nconst Description = styled.p`\n  grid-area: description;\n  overflow: auto;\n  padding-right: ${(_ref21) => {let { theme } = _ref21;return theme.gridUnit * 14;}}px;\n  margin: 0;\n`;\nconst Examples = styled.div`\n  grid-area: examples;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow: auto;\n  gap: ${(_ref22) => {let { theme } = _ref22;return theme.gridUnit * 4;}}px;\n\n  img {\n    height: 100%;\n    border-radius: ${(_ref23) => {let { theme } = _ref23;return theme.gridUnit;}}px;\n    border: 1px solid ${(_ref24) => {let { theme } = _ref24;return theme.colors.grayscale.light2;}};\n  }\n`;\nconst thumbnailContainerCss = (theme) => css`\n  cursor: pointer;\n  width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n  position: relative;\n\n  img {\n    min-width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    min-height: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    border: 1px solid ${theme.colors.grayscale.light2};\n    border-radius: ${theme.gridUnit}px;\n    transition: border-color ${theme.transitionTiming};\n  }\n\n  &.selected img {\n    border: 2px solid ${theme.colors.primary.light2};\n  }\n\n  &:hover:not(.selected) img {\n    border: 1px solid ${theme.colors.grayscale.light1};\n  }\n\n  .viztype-label {\n    margin-top: ${theme.gridUnit * 2}px;\n    text-align: center;\n  }\n`;\nconst HighlightLabel = styled.div`\n  ${(_ref25) => {let { theme } = _ref25;return `\n    border: 1px solid ${theme.colors.primary.dark1};\n    box-sizing: border-box;\n    border-radius: ${theme.gridUnit}px;\n    background: ${theme.colors.grayscale.light5};\n    line-height: ${theme.gridUnit * 2.5}px;\n    color: ${theme.colors.primary.dark1};\n    font-size: ${theme.typography.sizes.s}px;\n    font-weight: ${theme.typography.weights.bold};\n    text-align: center;\n    padding: ${theme.gridUnit * 0.5}px ${theme.gridUnit}px;\n    text-transform: uppercase;\n    cursor: pointer;\n\n    div {\n      transform: scale(0.83,0.83);\n    }\n  `;}}\n`;\nconst ThumbnailLabelWrapper = styled.div`\n  position: absolute;\n  right: ${(_ref26) => {let { theme } = _ref26;return theme.gridUnit;}}px;\n  top: ${(_ref27) => {let { theme } = _ref27;return theme.gridUnit * 19;}}px;\n`;\nconst TitleLabelWrapper = styled.div`\n  display: inline-block !important;\n  margin-left: ${(_ref28) => {let { theme } = _ref28;return theme.gridUnit * 2;}}px;\n`;\nfunction vizSortFactor(entry) {\n  if (typesWithDefaultOrder.has(entry.key)) {\n    return DEFAULT_ORDER.indexOf(entry.key);\n  }\n  return DEFAULT_ORDER.length;\n}\nconst Thumbnail = (_ref29) => {let { entry, selectedViz, setSelectedViz, onDoubleClick } = _ref29;\n  const theme = useTheme();\n  const { key, value: type } = entry;\n  const isSelected = selectedViz === entry.key;\n  return ___EmotionJSX(\"div\", { role: \"button\"\n    // using css instead of a styled component to preserve\n    // the data-test attribute\n    , css: thumbnailContainerCss(theme), tabIndex: 0, className: isSelected ? 'selected' : '', onClick: () => setSelectedViz(key), onDoubleClick: onDoubleClick },\n  ___EmotionJSX(\"img\", { alt: type.name, width: \"100%\", className: `viztype-selector ${isSelected ? 'selected' : ''}`, src: type.thumbnail }),\n  ___EmotionJSX(\"div\", { className: \"viztype-label\" },\n  type.name),\n\n  type.label && ___EmotionJSX(ThumbnailLabelWrapper, null,\n  ___EmotionJSX(HighlightLabel, null,\n  ___EmotionJSX(\"div\", null, t(type.label)))));\n\n\n\n};\n/** A list of viz thumbnails, used within the viz picker modal */\nconst ThumbnailGallery = (_ref30) => {let { vizEntries, ...props } = _ref30;return ___EmotionJSX(IconsPane, null,\n  vizEntries.map((entry) => ___EmotionJSX(Thumbnail, _extends({ key: entry.key }, props, { entry: entry }))));};\n\nconst Selector = (_ref31) => {let { selector, sectionId, icon, isSelected, onClick, className } = _ref31;\n  const btnRef = useRef(null);\n  // see Element.scrollIntoViewIfNeeded()\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoViewIfNeeded\n  useEffect(() => {\n    if (isSelected) {\n      // We need to wait for the modal to open and then scroll, so we put it in the microtask queue\n      queueMicrotask(() => scrollIntoView(btnRef.current, {\n        behavior: 'smooth',\n        scrollMode: 'if-needed' }));\n\n    }\n  }, []);\n  return ___EmotionJSX(SelectorLabel, { ref: btnRef, key: selector, name: selector, className: cx(className, isSelected && 'selected'), onClick: () => onClick(selector, sectionId) },\n  icon,\n  selector);\n\n};\nconst doesVizMatchSelector = (viz, selector) => selector === viz.category ||\nselector === OTHER_CATEGORY && viz.category == null ||\n(viz.tags || []).indexOf(selector) > -1;\nexport default function VizTypeGallery(props) {var _selectedVizMetadata$, _selectedVizMetadata$2;\n  const { selectedViz, onChange, onDoubleClick, className } = props;\n  const { mountedPluginMetadata } = usePluginContext();\n  const searchInputRef = useRef();\n  const [searchInputValue, setSearchInputValue] = useState('');\n  const [isSearchFocused, setIsSearchFocused] = useState(true);\n  const isActivelySearching = isSearchFocused && !!searchInputValue;\n  const selectedVizMetadata = selectedViz ?\n  mountedPluginMetadata[selectedViz] :\n  null;\n  const chartMetadata = useMemo(() => {\n    const result = Object.entries(mountedPluginMetadata).\n    map((_ref32) => {let [key, value] = _ref32;return { key, value };}).\n    filter((_ref33) => {var _context;let { key } = _ref33;return !_includesInstanceProperty(_context = props.denyList).call(_context, key);}).\n    filter((_ref34) => {let { value } = _ref34;return nativeFilterGate(value.behaviors || []) && !value.deprecated;});\n    result.sort((a, b) => vizSortFactor(a) - vizSortFactor(b));\n    return result;\n  }, [mountedPluginMetadata]);\n  const chartsByCategory = useMemo(() => {\n    const result = {};\n    chartMetadata.forEach((entry) => {\n      const category = entry.value.category || OTHER_CATEGORY;\n      if (!result[category]) {\n        result[category] = [];\n      }\n      result[category].push(entry);\n    });\n    return result;\n  }, [chartMetadata]);\n  const categories = useMemo(() => Object.keys(chartsByCategory).sort((a, b) => {\n    // make sure Other goes at the end\n    if (a === OTHER_CATEGORY)\n    return 1;\n    if (b === OTHER_CATEGORY)\n    return -1;\n    // sort alphabetically\n    return a.localeCompare(b);\n  }), [chartsByCategory]);\n  const chartsByTags = useMemo(() => {\n    const result = {};\n    chartMetadata.forEach((entry) => {\n      const tags = entry.value.tags || [];\n      tags.forEach((tag) => {\n        if (!result[tag]) {\n          result[tag] = [];\n        }\n        result[tag].push(entry);\n      });\n    });\n    return result;\n  }, [chartMetadata]);\n  const tags = useMemo(() => Object.keys(chartsByTags).\n  sort((a, b) =>\n  // sort alphabetically\n  a.localeCompare(b)).\n  filter((tag) => RECOMMENDED_TAGS.indexOf(tag) === -1), [chartsByTags]);\n  const sortedMetadata = useMemo(() => chartMetadata.sort((a, b) => a.key.localeCompare(b.key)), [chartMetadata]);\n  const [activeSelector, setActiveSelector] = useState(() => (selectedVizMetadata == null ? void 0 : selectedVizMetadata.category) || RECOMMENDED_TAGS[0]);\n  const [activeSection, setActiveSection] = useState(() => selectedVizMetadata != null && selectedVizMetadata.category ?\n  SECTIONS.CATEGORY :\n  SECTIONS.RECOMMENDED_TAGS);\n  // get a fuse instance for fuzzy search\n  const fuse = useMemo(() => new Fuse(chartMetadata, {\n    ignoreLocation: true,\n    threshold: 0.3,\n    keys: [\n    {\n      name: 'value.name',\n      weight: 4 },\n\n    {\n      name: 'value.tags',\n      weight: 2 },\n\n    'value.description'] }),\n\n  [chartMetadata]);\n  const searchResults = useMemo(() => {\n    if (searchInputValue.trim() === '') {\n      return [];\n    }\n    return fuse.\n    search(searchInputValue).\n    map((result) => result.item).\n    sort((a, b) => {var _a$value, _b$value;\n      const aLabel = (_a$value = a.value) == null ? void 0 : _a$value.label;\n      const bLabel = (_b$value = b.value) == null ? void 0 : _b$value.label;\n      const aOrder = aLabel && chartLabelWeight[aLabel] ?\n      chartLabelWeight[aLabel].weight :\n      0;\n      const bOrder = bLabel && chartLabelWeight[bLabel] ?\n      chartLabelWeight[bLabel].weight :\n      0;\n      return bOrder - aOrder;\n    });\n  }, [searchInputValue, fuse]);\n  const focusSearch = useCallback(() => {\n    // \"start searching\" is actually a two-stage process.\n    // When you first click on the search bar, the input is focused and nothing else happens.\n    // Once you begin typing, the selected category is cleared and the displayed viz entries change.\n    setIsSearchFocused(true);\n  }, []);\n  const changeSearch = useCallback((event) => setSearchInputValue(event.target.value), []);\n  const stopSearching = useCallback(() => {\n    // stopping a search takes you back to the category you were looking at before.\n    // Unlike focusSearch, this is a simple one-step process.\n    setIsSearchFocused(false);\n    setSearchInputValue('');\n    searchInputRef.current.blur();\n  }, []);\n  const clickSelector = useCallback((selector, sectionId) => {\n    if (isSearchFocused) {\n      stopSearching();\n    }\n    setActiveSelector(selector);\n    setActiveSection(sectionId);\n    // clear the selected viz if it is not present in the new category or tags\n    const isSelectedVizCompatible = selectedVizMetadata &&\n    doesVizMatchSelector(selectedVizMetadata, selector);\n    if (selector !== activeSelector && !isSelectedVizCompatible) {\n      onChange(null);\n    }\n  }, [\n  stopSearching,\n  isSearchFocused,\n  activeSelector,\n  selectedVizMetadata,\n  onChange]);\n\n  const sectionMap = useMemo(() => ({\n    [SECTIONS.RECOMMENDED_TAGS]: {\n      title: t('Recommended tags'),\n      icon: ___EmotionJSX(Icons.Tags, null),\n      selectors: RECOMMENDED_TAGS },\n\n    [SECTIONS.CATEGORY]: {\n      title: t('Category'),\n      icon: ___EmotionJSX(Icons.Category, null),\n      selectors: categories },\n\n    [SECTIONS.TAGS]: {\n      title: t('Tags'),\n      icon: ___EmotionJSX(Icons.Tags, null),\n      selectors: tags } }),\n\n  [categories, tags]);\n  const getVizEntriesToDisplay = () => {\n    if (isActivelySearching) {\n      return searchResults;\n    }\n    if (activeSelector === ALL_CHARTS &&\n    activeSection === SECTIONS.ALL_CHARTS) {\n      return sortedMetadata;\n    }\n    if (activeSection === SECTIONS.CATEGORY &&\n    chartsByCategory[activeSelector]) {\n      return chartsByCategory[activeSelector];\n    }\n    if ((activeSection === SECTIONS.TAGS ||\n    activeSection === SECTIONS.RECOMMENDED_TAGS) &&\n    chartsByTags[activeSelector]) {\n      return chartsByTags[activeSelector];\n    }\n    return [];\n  };\n  return ___EmotionJSX(VizPickerLayout, { className: className, isSelectedVizMetadata: Boolean(selectedVizMetadata) },\n  ___EmotionJSX(LeftPane, null,\n  ___EmotionJSX(Selector, { css: (_ref35) => {let { gridUnit } = _ref35;return (\n        // adjust style for not being inside a collapse\n        css`\n              margin: ${gridUnit * 2}px;\n              margin-bottom: 0;\n            `);}, sectionId: SECTIONS.ALL_CHARTS, selector: ALL_CHARTS, icon: ___EmotionJSX(Icons.Ballot, null), isSelected: !isActivelySearching &&\n    ALL_CHARTS === activeSelector &&\n    SECTIONS.ALL_CHARTS === activeSection, onClick: clickSelector }),\n  ___EmotionJSX(AntdCollapse, { expandIconPosition: \"right\", ghost: true, defaultActiveKey: Object.keys(sectionMap) },\n  Object.keys(sectionMap).map((sectionId) => {\n    const section = sectionMap[sectionId];\n    return ___EmotionJSX(AntdCollapse.Panel, { header: ___EmotionJSX(\"span\", { className: \"header\" }, section.title), key: sectionId },\n    section.selectors.map((selector) => ___EmotionJSX(Selector, { key: selector, selector: selector, sectionId: sectionId, icon: section.icon, isSelected: !isActivelySearching &&\n      selector === activeSelector &&\n      sectionId === activeSection, onClick: clickSelector })));\n\n  }))),\n\n\n\n  ___EmotionJSX(SearchWrapper, null,\n  ___EmotionJSX(Input, { type: \"text\", ref: searchInputRef /* cast required because emotion */, value: searchInputValue, placeholder: t('Search all charts'), onChange: changeSearch, onFocus: focusSearch, prefix: ___EmotionJSX(InputIconAlignment, null,\n    ___EmotionJSX(Icons.Search, { iconSize: \"m\" })),\n    suffix: ___EmotionJSX(InputIconAlignment, null,\n    searchInputValue && ___EmotionJSX(Icons.XLarge, { iconSize: \"m\", onClick: stopSearching })) })),\n\n\n\n  ___EmotionJSX(RightPane, null,\n  ___EmotionJSX(ThumbnailGallery, { vizEntries: getVizEntriesToDisplay(), selectedViz: selectedViz, setSelectedViz: onChange, onDoubleClick: onDoubleClick })),\n\n\n  selectedVizMetadata ? ___EmotionJSX(\"div\", { css: (theme) => [\n    DetailsPane(theme),\n    DetailsPopulated(theme)] },\n\n  ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(SectionTitle, { css: css`\n                grid-area: viz-name;\n                position: relative;\n              ` },\n  selectedVizMetadata == null ? void 0 : selectedVizMetadata.name,\n  (selectedVizMetadata == null ? void 0 : selectedVizMetadata.label) && ___EmotionJSX(Tooltip, { id: \"viz-badge-tooltip\", placement: \"top\", title: (_selectedVizMetadata$ = selectedVizMetadata.labelExplanation) != null ? _selectedVizMetadata$ :\n    chartLabelExplanations[selectedVizMetadata.label] },\n  ___EmotionJSX(TitleLabelWrapper, null,\n  ___EmotionJSX(HighlightLabel, null,\n  ___EmotionJSX(\"div\", null, t(selectedVizMetadata.label)))))),\n\n\n\n\n  ___EmotionJSX(TagsWrapper, null,\n  selectedVizMetadata == null ? void 0 : selectedVizMetadata.tags.map((tag) => ___EmotionJSX(Label, { key: tag }, tag))),\n\n  ___EmotionJSX(Description, null,\n  (selectedVizMetadata == null ? void 0 : selectedVizMetadata.description) ||\n  t('No description available.')),\n\n  ___EmotionJSX(SectionTitle, { css: css`\n                grid-area: examples-header;\n              ` },\n  !!(selectedVizMetadata != null && (_selectedVizMetadata$2 = selectedVizMetadata.exampleGallery) != null && _selectedVizMetadata$2.length) && t('Examples')),\n\n  ___EmotionJSX(Examples, null,\n  ((selectedVizMetadata == null ? void 0 : selectedVizMetadata.exampleGallery) || []).map((example) => ___EmotionJSX(\"img\", { src: example.url, alt: example.caption, title: example.caption }))))) :\n\n\n  null);\n\n}","map":{"version":3,"mappings":"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","names":["React","useCallback","useEffect","useMemo","useRef","useState","Fuse","cx","t","styled","css","useTheme","chartLabelWeight","chartLabelExplanations","AntdCollapse","Tooltip","Input","Label","usePluginContext","Icons","nativeFilterGate","scrollIntoView","SECTIONS","DEFAULT_ORDER","typesWithDefaultOrder","Set","THUMBNAIL_GRID_UNITS","MAX_ADVISABLE_VIZ_GALLERY_WIDTH","OTHER_CATEGORY","ALL_CHARTS","RECOMMENDED_TAGS","VIZ_TYPE_CONTROL_TEST_ID","VizPickerLayout","div","isSelectedVizMetadata","SectionTitle","h3","theme","gridUnit","typography","sizes","l","weights","bold","LeftPane","colors","grayscale","light2","s","base","RightPane","SearchWrapper","InputIconAlignment","SelectorLabel","button","borderRadius","primary","light5","IconsPane","DetailsPane","DetailsPopulated","TagsWrapper","Description","p","Examples","thumbnailContainerCss","transitionTiming","light1","HighlightLabel","dark1","ThumbnailLabelWrapper","TitleLabelWrapper","vizSortFactor","entry","has","key","indexOf","length","Thumbnail","selectedViz","setSelectedViz","onDoubleClick","value","type","isSelected","name","thumbnail","label","ThumbnailGallery","vizEntries","props","map","Selector","selector","sectionId","icon","onClick","className","btnRef","queueMicrotask","current","behavior","scrollMode","doesVizMatchSelector","viz","category","tags","VizTypeGallery","onChange","mountedPluginMetadata","searchInputRef","searchInputValue","setSearchInputValue","isSearchFocused","setIsSearchFocused","isActivelySearching","selectedVizMetadata","chartMetadata","result","Object","entries","filter","denyList","behaviors","deprecated","sort","a","b","chartsByCategory","forEach","push","categories","keys","localeCompare","chartsByTags","tag","sortedMetadata","activeSelector","setActiveSelector","activeSection","setActiveSection","CATEGORY","fuse","ignoreLocation","threshold","weight","searchResults","trim","search","item","aLabel","bLabel","aOrder","bOrder","focusSearch","changeSearch","event","target","stopSearching","blur","clickSelector","isSelectedVizCompatible","sectionMap","title","selectors","TAGS","getVizEntriesToDisplay","Boolean","section","labelExplanation","description","exampleGallery","example","url","caption"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport Fuse from 'fuse.js';\nimport cx from 'classnames';\nimport {\n  t,\n  styled,\n  css,\n  ChartMetadata,\n  SupersetTheme,\n  useTheme,\n  chartLabelWeight,\n  chartLabelExplanations,\n} from '@superset-ui/core';\nimport { AntdCollapse } from 'src/components';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Input } from 'src/components/Input';\nimport Label from 'src/components/Label';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport Icons from 'src/components/Icons';\nimport { nativeFilterGate } from 'src/dashboard/components/nativeFilters/utils';\nimport scrollIntoView from 'scroll-into-view-if-needed';\n\ninterface VizTypeGalleryProps {\n  onChange: (vizType: string | null) => void;\n  onDoubleClick: () => void;\n  selectedViz: string | null;\n  className?: string;\n  denyList: string[];\n}\n\ntype VizEntry = {\n  key: string;\n  value: ChartMetadata;\n};\n\nenum SECTIONS {\n  ALL_CHARTS = 'ALL_CHARTS',\n  CATEGORY = 'CATEGORY',\n  TAGS = 'TAGS',\n  RECOMMENDED_TAGS = 'RECOMMENDED_TAGS',\n}\n\nconst DEFAULT_ORDER = [\n  'line',\n  'big_number',\n  'big_number_total',\n  'table',\n  'pivot_table_v2',\n  'echarts_timeseries_line',\n  'echarts_area',\n  'echarts_timeseries_bar',\n  'echarts_timeseries_scatter',\n  'pie',\n  'mixed_timeseries',\n  'filter_box',\n  'dist_bar',\n  'area',\n  'bar',\n  'deck_polygon',\n  'time_table',\n  'histogram',\n  'deck_scatter',\n  'deck_hex',\n  'time_pivot',\n  'deck_arc',\n  'heatmap',\n  'deck_grid',\n  'deck_screengrid',\n  'treemap_v2',\n  'box_plot',\n  'sunburst',\n  'sankey',\n  'word_cloud',\n  'mapbox',\n  'kepler',\n  'cal_heatmap',\n  'rose',\n  'bubble',\n  'deck_geojson',\n  'horizon',\n  'deck_multi',\n  'compare',\n  'partition',\n  'event_flow',\n  'deck_path',\n  'graph_chart',\n  'world_map',\n  'paired_ttest',\n  'para',\n  'country_map',\n];\n\nconst typesWithDefaultOrder = new Set(DEFAULT_ORDER);\n\nconst THUMBNAIL_GRID_UNITS = 24;\n\nexport const MAX_ADVISABLE_VIZ_GALLERY_WIDTH = 1090;\n\nconst OTHER_CATEGORY = t('Other');\n\nconst ALL_CHARTS = t('All charts');\n\nconst RECOMMENDED_TAGS = [t('Popular'), t('ECharts'), t('Advanced-Analytics')];\n\nexport const VIZ_TYPE_CONTROL_TEST_ID = 'viz-type-control';\n\nconst VizPickerLayout = styled.div<{ isSelectedVizMetadata: boolean }>`\n  ${({ isSelectedVizMetadata }) => `\n    display: grid;\n    grid-template-rows: ${\n      isSelectedVizMetadata\n        ? `auto minmax(100px, 1fr) minmax(200px, 35%)`\n        : 'auto minmax(100px, 1fr)'\n    };\n    // em is used here because the sidebar should be sized to fit the longest standard tag\n    grid-template-columns: minmax(14em, auto) 5fr;\n    grid-template-areas:\n      'sidebar search'\n      'sidebar main'\n      'details details';\n    height: 70vh;\n    overflow: auto;\n  `}\n`;\n\nconst SectionTitle = styled.h3`\n  margin-top: 0;\n  margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  font-size: ${({ theme }) => theme.typography.sizes.l}px;\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  line-height: ${({ theme }) => theme.gridUnit * 6}px;\n`;\n\nconst LeftPane = styled.div`\n  grid-area: sidebar;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  overflow: auto;\n\n  .ant-collapse .ant-collapse-item {\n    .ant-collapse-header {\n      font-size: ${({ theme }) => theme.typography.sizes.s}px;\n      color: ${({ theme }) => theme.colors.grayscale.base};\n      padding-left: ${({ theme }) => theme.gridUnit * 2}px;\n      padding-bottom: ${({ theme }) => theme.gridUnit}px;\n    }\n    .ant-collapse-content .ant-collapse-content-box {\n      display: flex;\n      flex-direction: column;\n      padding: 0 ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\n\nconst RightPane = styled.div`\n  grid-area: main;\n  overflow-y: auto;\n`;\n\nconst SearchWrapper = styled.div`\n  ${({ theme }) => `\n    grid-area: search;\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-bottom: ${theme.gridUnit}px;\n    margin-left: ${theme.gridUnit * 3}px;\n    margin-right: ${theme.gridUnit * 3}px;\n    .ant-input-affix-wrapper {\n      padding-left: ${theme.gridUnit * 2}px;\n    }\n  `}\n`;\n\n/** Styles to line up prefix/suffix icons in the search input */\nconst InputIconAlignment = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst SelectorLabel = styled.button`\n  ${({ theme }) => `\n    all: unset; // remove default button styles\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    margin: ${theme.gridUnit}px 0;\n    padding: 0 ${theme.gridUnit}px;\n    border-radius: ${theme.borderRadius}px;\n    line-height: 2em;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n\n    &:focus {\n      outline: initial;\n    }\n\n    &.selected {\n      background-color: ${theme.colors.primary.base};\n      color: ${theme.colors.primary.light5};\n\n      svg {\n        color: ${theme.colors.primary.light5};\n      }\n\n      &:hover {\n        .cancel {\n          visibility: visible;\n        }\n      }\n    }\n\n    & span:first-of-type svg {\n      margin-top: ${theme.gridUnit * 1.5}px;\n    }\n\n    .cancel {\n      visibility: hidden;\n    }\n  `}\n`;\n\nconst IconsPane = styled.div`\n  overflow: auto;\n  display: grid;\n  grid-template-columns: repeat(\n    auto-fill,\n    ${({ theme }) => theme.gridUnit * THUMBNAIL_GRID_UNITS}px\n  );\n  grid-auto-rows: max-content;\n  justify-content: space-evenly;\n  grid-gap: ${({ theme }) => theme.gridUnit * 2}px;\n  justify-items: center;\n  // for some reason this padding doesn't seem to apply at the bottom of the container. Why is a mystery.\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst DetailsPane = (theme: SupersetTheme) => css`\n  grid-area: details;\n  border-top: 1px solid ${theme.colors.grayscale.light2};\n`;\n\nconst DetailsPopulated = (theme: SupersetTheme) => css`\n  padding: ${theme.gridUnit * 4}px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: auto auto 1fr;\n  grid-template-areas:\n    'viz-name examples-header'\n    'viz-tags examples'\n    'description examples';\n`;\n\n// overflow hidden on the details pane and overflow auto on the description\n// (plus grid layout) enables the description to scroll while the header stays in place.\nconst TagsWrapper = styled.div`\n  grid-area: viz-tags;\n  width: ${({ theme }) => theme.gridUnit * 120}px;\n  padding-right: ${({ theme }) => theme.gridUnit * 14}px;\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst Description = styled.p`\n  grid-area: description;\n  overflow: auto;\n  padding-right: ${({ theme }) => theme.gridUnit * 14}px;\n  margin: 0;\n`;\n\nconst Examples = styled.div`\n  grid-area: examples;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow: auto;\n  gap: ${({ theme }) => theme.gridUnit * 4}px;\n\n  img {\n    height: 100%;\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n`;\n\nconst thumbnailContainerCss = (theme: SupersetTheme) => css`\n  cursor: pointer;\n  width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n  position: relative;\n\n  img {\n    min-width: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    min-height: ${theme.gridUnit * THUMBNAIL_GRID_UNITS}px;\n    border: 1px solid ${theme.colors.grayscale.light2};\n    border-radius: ${theme.gridUnit}px;\n    transition: border-color ${theme.transitionTiming};\n  }\n\n  &.selected img {\n    border: 2px solid ${theme.colors.primary.light2};\n  }\n\n  &:hover:not(.selected) img {\n    border: 1px solid ${theme.colors.grayscale.light1};\n  }\n\n  .viztype-label {\n    margin-top: ${theme.gridUnit * 2}px;\n    text-align: center;\n  }\n`;\n\nconst HighlightLabel = styled.div`\n  ${({ theme }) => `\n    border: 1px solid ${theme.colors.primary.dark1};\n    box-sizing: border-box;\n    border-radius: ${theme.gridUnit}px;\n    background: ${theme.colors.grayscale.light5};\n    line-height: ${theme.gridUnit * 2.5}px;\n    color: ${theme.colors.primary.dark1};\n    font-size: ${theme.typography.sizes.s}px;\n    font-weight: ${theme.typography.weights.bold};\n    text-align: center;\n    padding: ${theme.gridUnit * 0.5}px ${theme.gridUnit}px;\n    text-transform: uppercase;\n    cursor: pointer;\n\n    div {\n      transform: scale(0.83,0.83);\n    }\n  `}\n`;\n\nconst ThumbnailLabelWrapper = styled.div`\n  position: absolute;\n  right: ${({ theme }) => theme.gridUnit}px;\n  top: ${({ theme }) => theme.gridUnit * 19}px;\n`;\n\nconst TitleLabelWrapper = styled.div`\n  display: inline-block !important;\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nfunction vizSortFactor(entry: VizEntry) {\n  if (typesWithDefaultOrder.has(entry.key)) {\n    return DEFAULT_ORDER.indexOf(entry.key);\n  }\n  return DEFAULT_ORDER.length;\n}\n\ninterface ThumbnailProps {\n  entry: VizEntry;\n  selectedViz: string | null;\n  setSelectedViz: (viz: string) => void;\n  onDoubleClick: () => void;\n}\n\nconst Thumbnail: React.FC<ThumbnailProps> = ({\n  entry,\n  selectedViz,\n  setSelectedViz,\n  onDoubleClick,\n}) => {\n  const theme = useTheme();\n  const { key, value: type } = entry;\n  const isSelected = selectedViz === entry.key;\n\n  return (\n    <div\n      role=\"button\"\n      // using css instead of a styled component to preserve\n      // the data-test attribute\n      css={thumbnailContainerCss(theme)}\n      tabIndex={0}\n      className={isSelected ? 'selected' : ''}\n      onClick={() => setSelectedViz(key)}\n      onDoubleClick={onDoubleClick}\n      data-test=\"viztype-selector-container\"\n    >\n      <img\n        alt={type.name}\n        width=\"100%\"\n        className={`viztype-selector ${isSelected ? 'selected' : ''}`}\n        src={type.thumbnail}\n      />\n      <div\n        className=\"viztype-label\"\n        data-test={`${VIZ_TYPE_CONTROL_TEST_ID}__viztype-label`}\n      >\n        {type.name}\n      </div>\n      {type.label && (\n        <ThumbnailLabelWrapper>\n          <HighlightLabel>\n            <div>{t(type.label)}</div>\n          </HighlightLabel>\n        </ThumbnailLabelWrapper>\n      )}\n    </div>\n  );\n};\n\ninterface ThumbnailGalleryProps {\n  vizEntries: VizEntry[];\n  selectedViz: string | null;\n  setSelectedViz: (viz: string) => void;\n  onDoubleClick: () => void;\n}\n\n/** A list of viz thumbnails, used within the viz picker modal */\nconst ThumbnailGallery: React.FC<ThumbnailGalleryProps> = ({\n  vizEntries,\n  ...props\n}) => (\n  <IconsPane data-test={`${VIZ_TYPE_CONTROL_TEST_ID}__viz-row`}>\n    {vizEntries.map(entry => (\n      <Thumbnail key={entry.key} {...props} entry={entry} />\n    ))}\n  </IconsPane>\n);\n\nconst Selector: React.FC<{\n  selector: string;\n  sectionId: string;\n  icon: JSX.Element;\n  isSelected: boolean;\n  onClick: (selector: string, sectionId: string) => void;\n  className?: string;\n}> = ({ selector, sectionId, icon, isSelected, onClick, className }) => {\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  // see Element.scrollIntoViewIfNeeded()\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoViewIfNeeded\n  useEffect(() => {\n    if (isSelected) {\n      // We need to wait for the modal to open and then scroll, so we put it in the microtask queue\n      queueMicrotask(() =>\n        scrollIntoView(btnRef.current as HTMLButtonElement, {\n          behavior: 'smooth',\n          scrollMode: 'if-needed',\n        }),\n      );\n    }\n  }, []);\n\n  return (\n    <SelectorLabel\n      ref={btnRef}\n      key={selector}\n      name={selector}\n      className={cx(className, isSelected && 'selected')}\n      onClick={() => onClick(selector, sectionId)}\n    >\n      {icon}\n      {selector}\n    </SelectorLabel>\n  );\n};\n\nconst doesVizMatchSelector = (viz: ChartMetadata, selector: string) =>\n  selector === viz.category ||\n  (selector === OTHER_CATEGORY && viz.category == null) ||\n  (viz.tags || []).indexOf(selector) > -1;\n\nexport default function VizTypeGallery(props: VizTypeGalleryProps) {\n  const { selectedViz, onChange, onDoubleClick, className } = props;\n  const { mountedPluginMetadata } = usePluginContext();\n  const searchInputRef = useRef<HTMLInputElement>();\n  const [searchInputValue, setSearchInputValue] = useState('');\n  const [isSearchFocused, setIsSearchFocused] = useState(true);\n  const isActivelySearching = isSearchFocused && !!searchInputValue;\n\n  const selectedVizMetadata: ChartMetadata | null = selectedViz\n    ? mountedPluginMetadata[selectedViz]\n    : null;\n\n  const chartMetadata: VizEntry[] = useMemo(() => {\n    const result = Object.entries(mountedPluginMetadata)\n      .map(([key, value]) => ({ key, value }))\n      .filter(({ key }) => !props.denyList.includes(key))\n      .filter(\n        ({ value }) =>\n          nativeFilterGate(value.behaviors || []) && !value.deprecated,\n      );\n    result.sort((a, b) => vizSortFactor(a) - vizSortFactor(b));\n    return result;\n  }, [mountedPluginMetadata]);\n\n  const chartsByCategory = useMemo(() => {\n    const result: Record<string, VizEntry[]> = {};\n    chartMetadata.forEach(entry => {\n      const category = entry.value.category || OTHER_CATEGORY;\n      if (!result[category]) {\n        result[category] = [];\n      }\n      result[category].push(entry);\n    });\n    return result;\n  }, [chartMetadata]);\n\n  const categories = useMemo(\n    () =>\n      Object.keys(chartsByCategory).sort((a, b) => {\n        // make sure Other goes at the end\n        if (a === OTHER_CATEGORY) return 1;\n        if (b === OTHER_CATEGORY) return -1;\n        // sort alphabetically\n        return a.localeCompare(b);\n      }),\n    [chartsByCategory],\n  );\n\n  const chartsByTags = useMemo(() => {\n    const result: Record<string, VizEntry[]> = {};\n    chartMetadata.forEach(entry => {\n      const tags = entry.value.tags || [];\n      tags.forEach(tag => {\n        if (!result[tag]) {\n          result[tag] = [];\n        }\n        result[tag].push(entry);\n      });\n    });\n    return result;\n  }, [chartMetadata]);\n\n  const tags = useMemo(\n    () =>\n      Object.keys(chartsByTags)\n        .sort((a, b) =>\n          // sort alphabetically\n          a.localeCompare(b),\n        )\n        .filter(tag => RECOMMENDED_TAGS.indexOf(tag) === -1),\n    [chartsByTags],\n  );\n\n  const sortedMetadata = useMemo(\n    () => chartMetadata.sort((a, b) => a.key.localeCompare(b.key)),\n    [chartMetadata],\n  );\n\n  const [activeSelector, setActiveSelector] = useState<string>(\n    () => selectedVizMetadata?.category || RECOMMENDED_TAGS[0],\n  );\n\n  const [activeSection, setActiveSection] = useState<string>(() =>\n    selectedVizMetadata?.category\n      ? SECTIONS.CATEGORY\n      : SECTIONS.RECOMMENDED_TAGS,\n  );\n\n  // get a fuse instance for fuzzy search\n  const fuse = useMemo(\n    () =>\n      new Fuse(chartMetadata, {\n        ignoreLocation: true,\n        threshold: 0.3,\n        keys: [\n          {\n            name: 'value.name',\n            weight: 4,\n          },\n          {\n            name: 'value.tags',\n            weight: 2,\n          },\n          'value.description',\n        ],\n      }),\n    [chartMetadata],\n  );\n\n  const searchResults = useMemo(() => {\n    if (searchInputValue.trim() === '') {\n      return [];\n    }\n    return fuse\n      .search(searchInputValue)\n      .map(result => result.item)\n      .sort((a, b) => {\n        const aLabel = a.value?.label;\n        const bLabel = b.value?.label;\n        const aOrder =\n          aLabel && chartLabelWeight[aLabel]\n            ? chartLabelWeight[aLabel].weight\n            : 0;\n        const bOrder =\n          bLabel && chartLabelWeight[bLabel]\n            ? chartLabelWeight[bLabel].weight\n            : 0;\n        return bOrder - aOrder;\n      });\n  }, [searchInputValue, fuse]);\n\n  const focusSearch = useCallback(() => {\n    // \"start searching\" is actually a two-stage process.\n    // When you first click on the search bar, the input is focused and nothing else happens.\n    // Once you begin typing, the selected category is cleared and the displayed viz entries change.\n    setIsSearchFocused(true);\n  }, []);\n\n  const changeSearch: ChangeEventHandler<HTMLInputElement> = useCallback(\n    event => setSearchInputValue(event.target.value),\n    [],\n  );\n\n  const stopSearching = useCallback(() => {\n    // stopping a search takes you back to the category you were looking at before.\n    // Unlike focusSearch, this is a simple one-step process.\n    setIsSearchFocused(false);\n    setSearchInputValue('');\n    searchInputRef.current!.blur();\n  }, []);\n\n  const clickSelector = useCallback(\n    (selector: string, sectionId: string) => {\n      if (isSearchFocused) {\n        stopSearching();\n      }\n      setActiveSelector(selector);\n      setActiveSection(sectionId);\n      // clear the selected viz if it is not present in the new category or tags\n      const isSelectedVizCompatible =\n        selectedVizMetadata &&\n        doesVizMatchSelector(selectedVizMetadata, selector);\n      if (selector !== activeSelector && !isSelectedVizCompatible) {\n        onChange(null);\n      }\n    },\n    [\n      stopSearching,\n      isSearchFocused,\n      activeSelector,\n      selectedVizMetadata,\n      onChange,\n    ],\n  );\n\n  const sectionMap = useMemo(\n    () => ({\n      [SECTIONS.RECOMMENDED_TAGS]: {\n        title: t('Recommended tags'),\n        icon: <Icons.Tags />,\n        selectors: RECOMMENDED_TAGS,\n      },\n      [SECTIONS.CATEGORY]: {\n        title: t('Category'),\n        icon: <Icons.Category />,\n        selectors: categories,\n      },\n      [SECTIONS.TAGS]: {\n        title: t('Tags'),\n        icon: <Icons.Tags />,\n        selectors: tags,\n      },\n    }),\n    [categories, tags],\n  );\n\n  const getVizEntriesToDisplay = () => {\n    if (isActivelySearching) {\n      return searchResults;\n    }\n    if (\n      activeSelector === ALL_CHARTS &&\n      activeSection === SECTIONS.ALL_CHARTS\n    ) {\n      return sortedMetadata;\n    }\n    if (\n      activeSection === SECTIONS.CATEGORY &&\n      chartsByCategory[activeSelector]\n    ) {\n      return chartsByCategory[activeSelector];\n    }\n    if (\n      (activeSection === SECTIONS.TAGS ||\n        activeSection === SECTIONS.RECOMMENDED_TAGS) &&\n      chartsByTags[activeSelector]\n    ) {\n      return chartsByTags[activeSelector];\n    }\n    return [];\n  };\n\n  return (\n    <VizPickerLayout\n      className={className}\n      isSelectedVizMetadata={Boolean(selectedVizMetadata)}\n    >\n      <LeftPane>\n        <Selector\n          css={({ gridUnit }) =>\n            // adjust style for not being inside a collapse\n            css`\n              margin: ${gridUnit * 2}px;\n              margin-bottom: 0;\n            `\n          }\n          sectionId={SECTIONS.ALL_CHARTS}\n          selector={ALL_CHARTS}\n          icon={<Icons.Ballot />}\n          isSelected={\n            !isActivelySearching &&\n            ALL_CHARTS === activeSelector &&\n            SECTIONS.ALL_CHARTS === activeSection\n          }\n          onClick={clickSelector}\n        />\n        <AntdCollapse\n          expandIconPosition=\"right\"\n          ghost\n          defaultActiveKey={Object.keys(sectionMap)}\n        >\n          {Object.keys(sectionMap).map(sectionId => {\n            const section = sectionMap[sectionId];\n\n            return (\n              <AntdCollapse.Panel\n                header={<span className=\"header\">{section.title}</span>}\n                key={sectionId}\n              >\n                {section.selectors.map((selector: string) => (\n                  <Selector\n                    key={selector}\n                    selector={selector}\n                    sectionId={sectionId}\n                    icon={section.icon}\n                    isSelected={\n                      !isActivelySearching &&\n                      selector === activeSelector &&\n                      sectionId === activeSection\n                    }\n                    onClick={clickSelector}\n                  />\n                ))}\n              </AntdCollapse.Panel>\n            );\n          })}\n        </AntdCollapse>\n      </LeftPane>\n\n      <SearchWrapper>\n        <Input\n          type=\"text\"\n          ref={searchInputRef as any /* cast required because emotion */}\n          value={searchInputValue}\n          placeholder={t('Search all charts')}\n          onChange={changeSearch}\n          onFocus={focusSearch}\n          data-test={`${VIZ_TYPE_CONTROL_TEST_ID}__search-input`}\n          prefix={\n            <InputIconAlignment>\n              <Icons.Search iconSize=\"m\" />\n            </InputIconAlignment>\n          }\n          suffix={\n            <InputIconAlignment>\n              {searchInputValue && (\n                <Icons.XLarge iconSize=\"m\" onClick={stopSearching} />\n              )}\n            </InputIconAlignment>\n          }\n        />\n      </SearchWrapper>\n\n      <RightPane>\n        <ThumbnailGallery\n          vizEntries={getVizEntriesToDisplay()}\n          selectedViz={selectedViz}\n          setSelectedViz={onChange}\n          onDoubleClick={onDoubleClick}\n        />\n      </RightPane>\n\n      {selectedVizMetadata ? (\n        <div\n          css={(theme: SupersetTheme) => [\n            DetailsPane(theme),\n            DetailsPopulated(theme),\n          ]}\n        >\n          <>\n            <SectionTitle\n              css={css`\n                grid-area: viz-name;\n                position: relative;\n              `}\n            >\n              {selectedVizMetadata?.name}\n              {selectedVizMetadata?.label && (\n                <Tooltip\n                  id=\"viz-badge-tooltip\"\n                  placement=\"top\"\n                  title={\n                    selectedVizMetadata.labelExplanation ??\n                    chartLabelExplanations[selectedVizMetadata.label]\n                  }\n                >\n                  <TitleLabelWrapper>\n                    <HighlightLabel>\n                      <div>{t(selectedVizMetadata.label)}</div>\n                    </HighlightLabel>\n                  </TitleLabelWrapper>\n                </Tooltip>\n              )}\n            </SectionTitle>\n            <TagsWrapper>\n              {selectedVizMetadata?.tags.map(tag => (\n                <Label key={tag}>{tag}</Label>\n              ))}\n            </TagsWrapper>\n            <Description>\n              {selectedVizMetadata?.description ||\n                t('No description available.')}\n            </Description>\n            <SectionTitle\n              css={css`\n                grid-area: examples-header;\n              `}\n            >\n              {!!selectedVizMetadata?.exampleGallery?.length && t('Examples')}\n            </SectionTitle>\n            <Examples>\n              {(selectedVizMetadata?.exampleGallery || []).map(example => (\n                <img\n                  src={example.url}\n                  alt={example.caption}\n                  title={example.caption}\n                />\n              ))}\n            </Examples>\n          </>\n        </div>\n      ) : null}\n    </VizPickerLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}