{"ast":null,"code":"import { format as d3Format } from 'd3-format';\nimport NumberFormats from '../NumberFormats';\nimport createNumberFormatter from '../createNumberFormatter';\nconst siFormatter = d3Format(\".3~s\");\nconst float2PointFormatter = d3Format(\".2~f\");\nconst float4PointFormatter = d3Format(\".4~f\");\n\nfunction formatValue(value) {\n  if (value === 0) {\n    return '0';\n  }\n\n  const absoluteValue = Math.abs(value);\n\n  if (absoluteValue >= 1000) {\n    // Normal human being are more familiar\n    // with billion (B) that giga (G)\n    return siFormatter(value).replace('G', 'B');\n  }\n\n  if (absoluteValue >= 1) {\n    return float2PointFormatter(value);\n  }\n\n  if (absoluteValue >= 0.001) {\n    return float4PointFormatter(value);\n  }\n\n  if (absoluteValue > 0.000001) {\n    return siFormatter(value * 1000000) + \"\\xB5\";\n  }\n\n  return siFormatter(value);\n}\n\nconst BLANK = () => '';\n\nconst ADD_PLUS = (value) => value > 0 ? '+' : '';\n\nexport default function createSmartNumberFormatter(_temp)\n\n\n\n\n{let { signed = false, id, label, description } = _temp === void 0 ? {} : _temp;\n  const getSign = signed ? ADD_PLUS : BLANK;\n  return createNumberFormatter((value) => \"\" + getSign(value) + formatValue(value), {\n    id: (id != null ? id : signed) ? NumberFormats.signed.SMART_NUMBER : NumberFormats.SMART_NUMBER,\n    label: label != null ? label : 'Adaptive formatter',\n    description });\n\n}","map":{"version":3,"names":["format","d3Format","NumberFormats","createNumberFormatter","siFormatter","float2PointFormatter","float4PointFormatter","formatValue","value","absoluteValue","Math","abs","replace","BLANK","ADD_PLUS","createSmartNumberFormatter","signed","id","label","description","getSign","SMART_NUMBER"],"sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/node_modules/@encodable/format/esm/number/factories/createSmartNumberFormatter.js"],"sourcesContent":["import { format as d3Format } from 'd3-format';\nimport NumberFormats from '../NumberFormats';\nimport createNumberFormatter from '../createNumberFormatter';\nconst siFormatter = d3Format(\".3~s\");\nconst float2PointFormatter = d3Format(\".2~f\");\nconst float4PointFormatter = d3Format(\".4~f\");\n\nfunction formatValue(value) {\n  if (value === 0) {\n    return '0';\n  }\n\n  const absoluteValue = Math.abs(value);\n\n  if (absoluteValue >= 1000) {\n    // Normal human being are more familiar\n    // with billion (B) that giga (G)\n    return siFormatter(value).replace('G', 'B');\n  }\n\n  if (absoluteValue >= 1) {\n    return float2PointFormatter(value);\n  }\n\n  if (absoluteValue >= 0.001) {\n    return float4PointFormatter(value);\n  }\n\n  if (absoluteValue > 0.000001) {\n    return siFormatter(value * 1000000) + \"\\xB5\";\n  }\n\n  return siFormatter(value);\n}\n\nconst BLANK = () => '';\n\nconst ADD_PLUS = value => value > 0 ? '+' : '';\n\nexport default function createSmartNumberFormatter({\n  signed = false,\n  id,\n  label,\n  description\n} = {}) {\n  const getSign = signed ? ADD_PLUS : BLANK;\n  return createNumberFormatter(value => \"\" + getSign(value) + formatValue(value), {\n    id: (id != null ? id : signed) ? NumberFormats.signed.SMART_NUMBER : NumberFormats.SMART_NUMBER,\n    label: label != null ? label : 'Adaptive formatter',\n    description\n  });\n}"],"mappings":"AAAA,SAASA,MAAM,IAAIC,QAAnB,QAAmC,WAAnC;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,qBAAP,MAAkC,0BAAlC;AACA,MAAMC,WAAW,GAAGH,QAAQ,CAAC,MAAD,CAA5B;AACA,MAAMI,oBAAoB,GAAGJ,QAAQ,CAAC,MAAD,CAArC;AACA,MAAMK,oBAAoB,GAAGL,QAAQ,CAAC,MAAD,CAArC;;AAEA,SAASM,WAAT,CAAqBC,KAArB,EAA4B;EAC1B,IAAIA,KAAK,KAAK,CAAd,EAAiB;IACf,OAAO,GAAP;EACD;;EAED,MAAMC,aAAa,GAAGC,IAAI,CAACC,GAAL,CAASH,KAAT,CAAtB;;EAEA,IAAIC,aAAa,IAAI,IAArB,EAA2B;IACzB;IACA;IACA,OAAOL,WAAW,CAACI,KAAD,CAAX,CAAmBI,OAAnB,CAA2B,GAA3B,EAAgC,GAAhC,CAAP;EACD;;EAED,IAAIH,aAAa,IAAI,CAArB,EAAwB;IACtB,OAAOJ,oBAAoB,CAACG,KAAD,CAA3B;EACD;;EAED,IAAIC,aAAa,IAAI,KAArB,EAA4B;IAC1B,OAAOH,oBAAoB,CAACE,KAAD,CAA3B;EACD;;EAED,IAAIC,aAAa,GAAG,QAApB,EAA8B;IAC5B,OAAOL,WAAW,CAACI,KAAK,GAAG,OAAT,CAAX,GAA+B,MAAtC;EACD;;EAED,OAAOJ,WAAW,CAACI,KAAD,CAAlB;AACD;;AAED,MAAMK,KAAK,GAAG,MAAM,EAApB;;AAEA,MAAMC,QAAQ,GAAG,CAAAN,KAAK,KAAIA,KAAK,GAAG,CAAR,GAAY,GAAZ,GAAkB,EAA5C;;AAEA,eAAe,SAASO,0BAAT;;;;;AAKP,KAL2C,EACjDC,MAAM,GAAG,KADwC,EAEjDC,EAFiD,EAGjDC,KAHiD,EAIjDC,WAJiD,EAK3C,sBAAJ,EAAI;EACN,MAAMC,OAAO,GAAGJ,MAAM,GAAGF,QAAH,GAAcD,KAApC;EACA,OAAOV,qBAAqB,CAAC,CAAAK,KAAK,KAAI,KAAKY,OAAO,CAACZ,KAAD,CAAZ,GAAsBD,WAAW,CAACC,KAAD,CAA3C,EAAoD;IAC9ES,EAAE,EAAE,CAACA,EAAE,IAAI,IAAN,GAAaA,EAAb,GAAkBD,MAAnB,IAA6Bd,aAAa,CAACc,MAAd,CAAqBK,YAAlD,GAAiEnB,aAAa,CAACmB,YADL;IAE9EH,KAAK,EAAEA,KAAK,IAAI,IAAT,GAAgBA,KAAhB,GAAwB,oBAF+C;IAG9EC,WAH8E,EAApD,CAA5B;;AAKD"},"metadata":{},"sourceType":"module"}