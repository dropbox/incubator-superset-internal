{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/light';\nimport sql from 'react-syntax-highlighter/dist/cjs/languages/hljs/sql';\nimport github from 'react-syntax-highlighter/dist/cjs/styles/hljs/github';\nimport { t } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nSyntaxHighlighter.registerLanguage('sql', sql);\nconst shrinkSql = (sql, maxLines, maxWidth) => {\n  const ssql = sql || '';\n  let lines = ssql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('{...}');\n  }\n  return lines.\n  map((line) => {\n    if (line.length > maxWidth) {\n      return `${line.slice(0, maxWidth)}{...}`;\n    }\n    return line;\n  }).\n  join('\\n');\n};\nfunction TriggerNode(_ref) {let { shrink, sql, maxLines, maxWidth } = _ref;\n  return ___EmotionJSX(SyntaxHighlighter, { language: \"sql\", style: github },\n  shrink ? shrinkSql(sql, maxLines, maxWidth) : sql);\n\n}\nfunction HighlightSqlModal(_ref2) {let { rawSql, sql } = _ref2;\n  return ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(\"h4\", null, t('Source SQL')),\n  ___EmotionJSX(SyntaxHighlighter, { language: \"sql\", style: github },\n  sql),\n\n  rawSql && rawSql !== sql && ___EmotionJSX(\"div\", null,\n  ___EmotionJSX(\"h4\", null, t('Executed SQL')),\n  ___EmotionJSX(SyntaxHighlighter, { language: \"sql\", style: github },\n  rawSql)));\n\n\n\n}\nfunction HighlightedSql(_ref3) {let { sql, rawSql, maxWidth = 50, maxLines = 5, shrink = false } = _ref3;\n  return ___EmotionJSX(ModalTrigger, { modalTitle: t('SQL'), modalBody: ___EmotionJSX(HighlightSqlModal, { rawSql: rawSql, sql: sql }), triggerNode: ___EmotionJSX(TriggerNode, { shrink: shrink, sql: sql, maxLines: maxLines, maxWidth: maxWidth }) });\n}\nexport default HighlightedSql;","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,iBAAP,MAA8B,yCAA9B;AACA,OAAOC,GAAP,MAAgB,sDAAhB;AACA,OAAOC,MAAP,MAAmB,sDAAnB;AACA,SAASC,CAAT,QAAkB,mBAAlB;AACA,OAAOC,YAAP,MAAyB,6BAAzB,C;AAEAJ,iBAAiB,CAACK,gBAAlB,CAAmC,KAAnC,EAA0CJ,GAA1C;AAsBA,MAAMK,SAAS,GAAG,CAACL,GAAD,EAAcM,QAAd,EAAgCC,QAAhC,KAAoD;EACpE,MAAMC,IAAI,GAAGR,GAAG,IAAI,EAApB;EACA,IAAIS,KAAK,GAAGD,IAAI,CAACE,KAAL,CAAW,IAAX,CAAZ;EACA,IAAID,KAAK,CAACE,MAAN,IAAgBL,QAApB,EAA8B;IAC5BG,KAAK,GAAGA,KAAK,CAACG,KAAN,CAAY,CAAZ,EAAeN,QAAf,CAAR;IACAG,KAAK,CAACI,IAAN,CAAW,OAAX;EACD;EACD,OAAOJ,KAAK;EACTK,GADI,CACA,KAAI,KAAG;IACV,IAAIC,IAAI,CAACJ,MAAL,GAAcJ,QAAlB,EAA4B;MAC1B,OAAO,GAAGQ,IAAI,CAACH,KAAL,CAAW,CAAX,EAAcL,QAAd,CAAuB,OAAjC;IACD;IACD,OAAOQ,IAAP;EACD,CANI;EAOJC,IAPI,CAOC,IAPD,CAAP;AAQD,CAfD;AAiBA,SAASC,WAAT,OAA0E,KAArD,EAAEC,MAAF,EAAUlB,GAAV,EAAeM,QAAf,EAAyBC,QAAzB,EAAqD;EACxE,OACE,cAAC,iBAAD,IAAmB,QAAQ,EAAC,KAA5B,EAAkC,KAAK,EAAEN,MAAzC;EACGiB,MAAM,GAAGb,SAAS,CAACL,GAAD,EAAMM,QAAN,EAAgBC,QAAhB,CAAZ,GAAwCP,GADjD,CADF;;AAKD;AAED,SAASmB,iBAAT,QAAoE,KAAzC,EAAEC,MAAF,EAAUpB,GAAV,EAAyC;EAClE,OACE;EACE,0BAAKE,CAAC,CAAC,YAAD,CAAN,CADF;EAEE,cAAC,iBAAD,IAAmB,QAAQ,EAAC,KAA5B,EAAkC,KAAK,EAAED,MAAzC;EACGD,GADH,CAFF;;EAKGoB,MAAM,IAAIA,MAAM,KAAKpB,GAArB,IACC;EACE,0BAAKE,CAAC,CAAC,cAAD,CAAN,CADF;EAEE,cAAC,iBAAD,IAAmB,QAAQ,EAAC,KAA5B,EAAkC,KAAK,EAAED,MAAzC;EACGmB,MADH,CAFF,CANJ,CADF;;;;AAgBD;AAED,SAASC,cAAT,QAMsB,KANE,EACtBrB,GADsB,EAEtBoB,MAFsB,EAGtBb,QAAQ,GAAG,EAHW,EAItBD,QAAQ,GAAG,CAJW,EAKtBY,MAAM,GAAG,KALa,EAMF;EACpB,OACE,cAAC,YAAD,IACE,UAAU,EAAEhB,CAAC,CAAC,KAAD,CADf,EAEE,SAAS,EAAE,cAAC,iBAAD,IAAmB,MAAM,EAAEkB,MAA3B,EAAmC,GAAG,EAAEpB,GAAxC,GAFb,EAGE,WAAW,EACT,cAAC,WAAD,IACE,MAAM,EAAEkB,MADV,EAEE,GAAG,EAAElB,GAFP,EAGE,QAAQ,EAAEM,QAHZ,EAIE,QAAQ,EAAEC,QAJZ,GAJJ,GADF;AAcD;AAED,eAAec,cAAf","names":["React","SyntaxHighlighter","sql","github","t","ModalTrigger","registerLanguage","shrinkSql","maxLines","maxWidth","ssql","lines","split","length","slice","push","map","line","join","TriggerNode","shrink","HighlightSqlModal","rawSql","HighlightedSql"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/SqlLab/components/HighlightedSql/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/light';\nimport sql from 'react-syntax-highlighter/dist/cjs/languages/hljs/sql';\nimport github from 'react-syntax-highlighter/dist/cjs/styles/hljs/github';\nimport { t } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\n\nSyntaxHighlighter.registerLanguage('sql', sql);\n\ninterface HighlightedSqlProps {\n  sql: string;\n  rawSql?: string;\n  maxWidth?: number;\n  maxLines?: number;\n  shrink?: any;\n}\n\ninterface HighlightedSqlModalTypes {\n  rawSql?: string;\n  sql: string;\n}\n\ninterface TriggerNodeProps {\n  shrink: boolean;\n  sql: string;\n  maxLines: number;\n  maxWidth: number;\n}\n\nconst shrinkSql = (sql: string, maxLines: number, maxWidth: number) => {\n  const ssql = sql || '';\n  let lines = ssql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('{...}');\n  }\n  return lines\n    .map(line => {\n      if (line.length > maxWidth) {\n        return `${line.slice(0, maxWidth)}{...}`;\n      }\n      return line;\n    })\n    .join('\\n');\n};\n\nfunction TriggerNode({ shrink, sql, maxLines, maxWidth }: TriggerNodeProps) {\n  return (\n    <SyntaxHighlighter language=\"sql\" style={github}>\n      {shrink ? shrinkSql(sql, maxLines, maxWidth) : sql}\n    </SyntaxHighlighter>\n  );\n}\n\nfunction HighlightSqlModal({ rawSql, sql }: HighlightedSqlModalTypes) {\n  return (\n    <div>\n      <h4>{t('Source SQL')}</h4>\n      <SyntaxHighlighter language=\"sql\" style={github}>\n        {sql}\n      </SyntaxHighlighter>\n      {rawSql && rawSql !== sql && (\n        <div>\n          <h4>{t('Executed SQL')}</h4>\n          <SyntaxHighlighter language=\"sql\" style={github}>\n            {rawSql}\n          </SyntaxHighlighter>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction HighlightedSql({\n  sql,\n  rawSql,\n  maxWidth = 50,\n  maxLines = 5,\n  shrink = false,\n}: HighlightedSqlProps) {\n  return (\n    <ModalTrigger\n      modalTitle={t('SQL')}\n      modalBody={<HighlightSqlModal rawSql={rawSql} sql={sql} />}\n      triggerNode={\n        <TriggerNode\n          shrink={shrink}\n          sql={sql}\n          maxLines={maxLines}\n          maxWidth={maxWidth}\n        />\n      }\n    />\n  );\n}\n\nexport default HighlightedSql;\n"]},"metadata":{},"sourceType":"module"}