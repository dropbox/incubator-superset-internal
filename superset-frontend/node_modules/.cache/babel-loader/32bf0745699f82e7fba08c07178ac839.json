{"ast":null,"code":"export var FilterBarOrientation;\n(function (FilterBarOrientation) {\n  FilterBarOrientation[\"VERTICAL\"] = \"VERTICAL\";\n  FilterBarOrientation[\"HORIZONTAL\"] = \"HORIZONTAL\";\n})(FilterBarOrientation || (FilterBarOrientation = {}));\n// chart's cross filter scoping can have its custom value or point to the global configuration\nexport const GLOBAL_SCOPE_POINTER = 'global';\nexport const isCrossFilterScopeGlobal = (scope) => scope === GLOBAL_SCOPE_POINTER;","map":{"version":3,"mappings":"AAwDA,WAAYA,oBAAZ;AAAA,WAAYA,oBAAZ,EAAgC;EAC9BA;EACAA;AACD,CAHD,EAAYA,oBAAoB,KAApBA,oBAAoB,MAAhC;AAKA;AACA,OAAO,MAAMC,oBAAoB,GAAG,QAA7B;AAUP,OAAO,MAAMC,wBAAwB,GAAG,CACtCC,KADsC,KAENA,KAAK,KAAKF,oBAFrC","names":["FilterBarOrientation","GLOBAL_SCOPE_POINTER","isCrossFilterScopeGlobal","scope"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/dashboard/types.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  ChartProps,\n  DataMaskStateWithId,\n  DatasourceType,\n  ExtraFormData,\n  GenericDataType,\n  JsonObject,\n  NativeFilterScope,\n  NativeFiltersState,\n} from '@superset-ui/core';\nimport { Dataset } from '@superset-ui/chart-controls';\nimport { chart } from 'src/components/Chart/chartReducer';\nimport componentTypes from 'src/dashboard/util/componentTypes';\nimport { UrlParamEntries } from 'src/utils/urlUtils';\n\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport { ChartState } from '../explore/types';\n\nexport type { Dashboard } from 'src/types/Dashboard';\n\nexport type ChartReducerInitialState = typeof chart;\n\n// chart query built from initialState\n// Ref: https://github.com/apache/superset/blob/dcac860f3e5528ecbc39e58f045c7388adb5c3d0/superset-frontend/src/dashboard/reducers/getInitialState.js#L120\nexport interface ChartQueryPayload extends Partial<ChartReducerInitialState> {\n  id: number;\n  form_data?: ChartProps['rawFormData'];\n  [key: string]: unknown;\n}\n\n/** Chart state of redux */\nexport type Chart = ChartState & {\n  form_data: {\n    viz_type: string;\n    datasource: string;\n  };\n};\n\nexport enum FilterBarOrientation {\n  VERTICAL = 'VERTICAL',\n  HORIZONTAL = 'HORIZONTAL',\n}\n\n// chart's cross filter scoping can have its custom value or point to the global configuration\nexport const GLOBAL_SCOPE_POINTER = 'global';\nexport type GlobalScopePointer = typeof GLOBAL_SCOPE_POINTER;\nexport type ChartCrossFiltersConfig = {\n  scope: NativeFilterScope | GlobalScopePointer;\n  chartsInScope: number[];\n};\nexport type GlobalChartCrossFilterConfig = {\n  scope: NativeFilterScope;\n  chartsInScope: number[];\n};\nexport const isCrossFilterScopeGlobal = (\n  scope: NativeFilterScope | GlobalScopePointer,\n): scope is GlobalScopePointer => scope === GLOBAL_SCOPE_POINTER;\n\nexport type ChartConfiguration = {\n  [chartId: number]: {\n    id: number;\n    crossFilters: ChartCrossFiltersConfig;\n  };\n};\n\nexport type ActiveTabs = string[];\nexport type DashboardLayout = { [key: string]: LayoutItem };\nexport type DashboardLayoutState = { present: DashboardLayout };\nexport type DashboardState = {\n  preselectNativeFilters?: JsonObject;\n  editMode: boolean;\n  isPublished: boolean;\n  directPathToChild: string[];\n  activeTabs: ActiveTabs;\n  fullSizeChartId: number | null;\n  isRefreshing: boolean;\n  isFiltersRefreshing: boolean;\n  hasUnsavedChanges: boolean;\n  dashboardIsSaving: boolean;\n  colorScheme: string;\n  sliceIds: number[];\n  directPathLastUpdated: number;\n  focusedFilterField?: {\n    chartId: number;\n    column: string;\n  };\n  overwriteConfirmMetadata?: {\n    updatedAt: string;\n    updatedBy: string;\n    overwriteConfirmItems: {\n      keyPath: string;\n      oldValue: string;\n      newValue: string;\n    }[];\n    dashboardId: number;\n    data: JsonObject;\n  };\n};\nexport type DashboardInfo = {\n  id: number;\n  common: {\n    flash_messages: string[];\n    conf: JsonObject;\n  };\n  userId: string;\n  dash_edit_perm: boolean;\n  json_metadata: string;\n  metadata: {\n    native_filter_configuration: JsonObject;\n    chart_configuration: ChartConfiguration;\n    global_chart_configuration: GlobalChartCrossFilterConfig;\n    color_scheme: string;\n    color_namespace: string;\n    color_scheme_domain: string[];\n    label_colors: JsonObject;\n    shared_label_colors: JsonObject;\n    cross_filters_enabled: boolean;\n  };\n  crossFiltersEnabled: boolean;\n  filterBarOrientation: FilterBarOrientation;\n};\n\nexport type ChartsState = { [key: string]: Chart };\n\nexport type Datasource = Dataset & {\n  uid: string;\n  column_types: GenericDataType[];\n  table_name: string;\n};\nexport type DatasourcesState = {\n  [key: string]: Datasource;\n};\n\n/** Root state of redux */\nexport type RootState = {\n  datasources: DatasourcesState;\n  sliceEntities: JsonObject;\n  charts: ChartsState;\n  dashboardLayout: DashboardLayoutState;\n  dashboardFilters: {};\n  dashboardState: DashboardState;\n  dashboardInfo: DashboardInfo;\n  dataMask: DataMaskStateWithId;\n  impressionId: string;\n  nativeFilters: NativeFiltersState;\n  user: UserWithPermissionsAndRoles;\n};\n\n/** State of dashboardLayout in redux */\nexport type Layout = { [key: string]: LayoutItem };\n\n/** State of charts in redux */\nexport type Charts = { [key: number]: Chart };\n\ntype ComponentTypesKeys = keyof typeof componentTypes;\nexport type ComponentType = typeof componentTypes[ComponentTypesKeys];\n\n/** State of dashboardLayout item in redux */\nexport type LayoutItem = {\n  children: string[];\n  parents: string[];\n  type: ComponentType;\n  id: string;\n  meta: {\n    chartId: number;\n    defaultText?: string;\n    height: number;\n    placeholder?: string;\n    sliceName?: string;\n    sliceNameOverride?: string;\n    text?: string;\n    uuid: string;\n    width: number;\n  };\n};\n\ntype ActiveFilter = {\n  scope: number[];\n  values: ExtraFormData;\n};\n\nexport type ActiveFilters = {\n  [key: string]: ActiveFilter;\n};\n\nexport interface DashboardPermalinkState {\n  dataMask: DataMaskStateWithId;\n  activeTabs: string[];\n  anchor: string;\n  urlParams?: UrlParamEntries;\n}\n\nexport interface DashboardPermalinkValue {\n  dashboardId: string;\n  state: DashboardPermalinkState;\n}\n\nexport type EmbeddedDashboard = {\n  uuid: string;\n  dashboard_id: string;\n  allowed_domains: string[];\n};\n\nexport type Slice = {\n  slice_id: number;\n  slice_name: string;\n  description: string;\n  description_markdown: string;\n  form_data: any;\n  slice_url: string;\n  viz_type: string;\n  thumbnail_url: string;\n  changed_on: number;\n  changed_on_humanized: string;\n  modified: string;\n  datasource_id: number;\n  datasource_type: DatasourceType;\n  datasource_url: string;\n  datasource_name: string;\n  owners: { id: number }[];\n  created_by: { id: number };\n};\n"]},"metadata":{},"sourceType":"module"}