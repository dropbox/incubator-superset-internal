{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { connect } from 'react-redux';\nimport { t, withTheme } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport ControlPopover, {\ngetSectionContainerElement } from\n'../ControlPopover/ControlPopover';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst AnnotationLayer = AsyncEsmComponent(\n() => import('./AnnotationLayer'),\n// size of overlay inner content\n() => ___EmotionJSX(\"div\", { style: { width: 450, height: 368 } }));\n\n\nconst propTypes = {\n  colorScheme: PropTypes.string.isRequired,\n  annotationError: PropTypes.object,\n  annotationQuery: PropTypes.object,\n  vizType: PropTypes.string,\n\n  validationErrors: PropTypes.array,\n  name: PropTypes.string.isRequired,\n  actions: PropTypes.object,\n  value: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func,\n  refreshAnnotationData: PropTypes.func };\n\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {} };\n\n\nclass AnnotationLayerControl extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null };\n\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n      name,\n      value,\n      Object.keys(annotationError));\n\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\n    let annotations = this.props.value;\n    if (_includesInstanceProperty(annotations).call(annotations, originalAnnotation)) {\n      annotations = annotations.map((anno) =>\n      anno === originalAnnotation ? newAnnotation : anno);\n\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true });\n\n\n    this.props.onChange(annotations);\n  }\n\n  handleVisibleChange(visible, popoverKey) {\n    this.setState((prevState) => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible } }));\n\n  }\n\n  removeAnnotationLayer(annotation) {\n    const annotations = this.props.value.filter((anno) => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover(popoverKey, annotation, error) {\n    const id = (annotation == null ? void 0 : annotation.name) || '_new';\n\n    return (\n      ___EmotionJSX(\"div\", { id: `annotation-pop-${id}`, \"data-test\": \"popover-content\" },\n      ___EmotionJSX(AnnotationLayer, _extends({},\n      annotation, {\n        error: error,\n        colorScheme: this.props.colorScheme,\n        vizType: this.props.vizType,\n        addAnnotationLayer: (newAnnotation) =>\n        this.addAnnotationLayer(annotation, newAnnotation),\n\n        removeAnnotationLayer: () => this.removeAnnotationLayer(annotation),\n        close: () => {\n          this.handleVisibleChange(false, popoverKey);\n          this.setState({ addedAnnotationIndex: null });\n        } }))));\n\n\n\n  }\n\n  renderInfo(anno) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        ___EmotionJSX(\"i\", {\n          className: \"fa fa-refresh\",\n          style: { color: theme.colors.primary.base },\n          \"aria-hidden\": true }));\n\n\n    }\n    if (annotationError[anno.name]) {\n      return (\n        ___EmotionJSX(InfoTooltipWithTrigger, {\n          label: \"validation-errors\",\n          bsStyle: \"danger\",\n          tooltip: annotationError[anno.name] }));\n\n\n    }\n    if (!anno.show) {\n      return ___EmotionJSX(\"span\", { style: { color: theme.colors.error.base } }, \" Hidden \");\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\n\n    const annotations = this.props.value.map((anno, i) =>\n    ___EmotionJSX(ControlPopover, {\n      key: i,\n      trigger: \"click\",\n      title: t('Edit annotation layer'),\n      css: (theme) => ({\n        '&:hover': {\n          cursor: 'pointer',\n          backgroundColor: theme.colors.grayscale.light4 } }),\n\n\n      content: this.renderPopover(\n      i,\n      anno,\n      this.props.annotationError[anno.name]),\n\n      visible: this.state.popoverVisible[i],\n      onVisibleChange: (visible) => this.handleVisibleChange(visible, i) },\n\n    ___EmotionJSX(CustomListItem, { selectable: true },\n    ___EmotionJSX(\"span\", null, anno.name),\n    ___EmotionJSX(\"span\", { style: { float: 'right' } }, this.renderInfo(anno)))));\n\n\n\n\n    const addLayerPopoverKey = 'add';\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(List, { bordered: true, css: (theme) => ({ borderRadius: theme.gridUnit }) },\n      annotations,\n      ___EmotionJSX(ControlPopover, {\n        trigger: \"click\",\n        content: this.renderPopover(addLayerPopoverKey, addedAnnotation),\n        title: t('Add annotation layer'),\n        visible: this.state.popoverVisible[addLayerPopoverKey],\n        destroyTooltipOnHide: true,\n        onVisibleChange: (visible) =>\n        this.handleVisibleChange(visible, addLayerPopoverKey) },\n\n\n      ___EmotionJSX(CustomListItem, { selectable: true },\n      ___EmotionJSX(\"i\", {\n        \"data-test\": \"add-annotation-layer-button\",\n        className: \"fa fa-plus\" }),\n      ' ', \"\\xA0 \",\n      t('Add annotation layer'))))));\n\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAnnotationLayerControl.propTypes = propTypes;\nAnnotationLayerControl.defaultProps = defaultProps;\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps(_ref) {var _explore$controls, _explore$controls$col;let { charts, explore } = _ref;\n  const chartKey = getChartKey(explore);\n  const chart = charts[chartKey] || charts[0] || {};\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: (_explore$controls = explore.controls) == null ? void 0 : (_explore$controls$col = _explore$controls.color_scheme) == null ? void 0 : _explore$controls$col.value,\n    annotationError: chart.annotationError,\n    annotationQuery: chart.annotationQuery,\n    vizType: explore.controls.viz_type.value };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: (annotationObj) =>\n    dispatch(runAnnotationQuery(annotationObj)) };\n\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);const _default =\n\nconnect(\nmapStateToProps,\nmapDispatchToProps)(\nthemedAnnotationLayerControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AnnotationLayer, \"AnnotationLayer\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(AnnotationLayerControl, \"AnnotationLayerControl\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(themedAnnotationLayerControl, \"themedAnnotationLayerControl\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(_default, \"default\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["React","PropTypes","List","connect","t","withTheme","InfoTooltipWithTrigger","AsyncEsmComponent","getChartKey","runAnnotationQuery","CustomListItem","ControlPopover","getSectionContainerElement","AnnotationLayer","width","height","propTypes","colorScheme","string","isRequired","annotationError","object","annotationQuery","vizType","validationErrors","array","name","actions","value","arrayOf","onChange","func","refreshAnnotationData","defaultProps","AnnotationLayerControl","PureComponent","constructor","props","state","popoverVisible","addedAnnotationIndex","addAnnotationLayer","bind","removeAnnotationLayer","handleVisibleChange","componentDidMount","preload","UNSAFE_componentWillReceiveProps","nextProps","Object","keys","length","setControlValue","originalAnnotation","newAnnotation","annotations","map","anno","setState","annotation","force","visible","popoverKey","prevState","filter","element","style","setProperty","renderPopover","error","id","renderInfo","theme","color","colors","primary","base","show","render","addedAnnotation","i","cursor","backgroundColor","grayscale","light4","float","addLayerPopoverKey","borderRadius","gridUnit","mapStateToProps","charts","explore","chartKey","chart","controls","color_scheme","viz_type","mapDispatchToProps","dispatch","annotationObj","themedAnnotationLayerControl"],"sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { connect } from 'react-redux';\nimport { t, withTheme } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport ControlPopover, {\n  getSectionContainerElement,\n} from '../ControlPopover/ControlPopover';\n\nconst AnnotationLayer = AsyncEsmComponent(\n  () => import('./AnnotationLayer'),\n  // size of overlay inner content\n  () => <div style={{ width: 450, height: 368 }} />,\n);\n\nconst propTypes = {\n  colorScheme: PropTypes.string.isRequired,\n  annotationError: PropTypes.object,\n  annotationQuery: PropTypes.object,\n  vizType: PropTypes.string,\n\n  validationErrors: PropTypes.array,\n  name: PropTypes.string.isRequired,\n  actions: PropTypes.object,\n  value: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func,\n  refreshAnnotationData: PropTypes.func,\n};\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {},\n};\n\nclass AnnotationLayerControl extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null,\n    };\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n        name,\n        value,\n        Object.keys(annotationError),\n      );\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\n    let annotations = this.props.value;\n    if (annotations.includes(originalAnnotation)) {\n      annotations = annotations.map(anno =>\n        anno === originalAnnotation ? newAnnotation : anno,\n      );\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true,\n    });\n\n    this.props.onChange(annotations);\n  }\n\n  handleVisibleChange(visible, popoverKey) {\n    this.setState(prevState => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible },\n    }));\n  }\n\n  removeAnnotationLayer(annotation) {\n    const annotations = this.props.value.filter(anno => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover(popoverKey, annotation, error) {\n    const id = annotation?.name || '_new';\n\n    return (\n      <div id={`annotation-pop-${id}`} data-test=\"popover-content\">\n        <AnnotationLayer\n          {...annotation}\n          error={error}\n          colorScheme={this.props.colorScheme}\n          vizType={this.props.vizType}\n          addAnnotationLayer={newAnnotation =>\n            this.addAnnotationLayer(annotation, newAnnotation)\n          }\n          removeAnnotationLayer={() => this.removeAnnotationLayer(annotation)}\n          close={() => {\n            this.handleVisibleChange(false, popoverKey);\n            this.setState({ addedAnnotationIndex: null });\n          }}\n        />\n      </div>\n    );\n  }\n\n  renderInfo(anno) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        <i\n          className=\"fa fa-refresh\"\n          style={{ color: theme.colors.primary.base }}\n          aria-hidden\n        />\n      );\n    }\n    if (annotationError[anno.name]) {\n      return (\n        <InfoTooltipWithTrigger\n          label=\"validation-errors\"\n          bsStyle=\"danger\"\n          tooltip={annotationError[anno.name]}\n        />\n      );\n    }\n    if (!anno.show) {\n      return <span style={{ color: theme.colors.error.base }}> Hidden </span>;\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\n\n    const annotations = this.props.value.map((anno, i) => (\n      <ControlPopover\n        key={i}\n        trigger=\"click\"\n        title={t('Edit annotation layer')}\n        css={theme => ({\n          '&:hover': {\n            cursor: 'pointer',\n            backgroundColor: theme.colors.grayscale.light4,\n          },\n        })}\n        content={this.renderPopover(\n          i,\n          anno,\n          this.props.annotationError[anno.name],\n        )}\n        visible={this.state.popoverVisible[i]}\n        onVisibleChange={visible => this.handleVisibleChange(visible, i)}\n      >\n        <CustomListItem selectable>\n          <span>{anno.name}</span>\n          <span style={{ float: 'right' }}>{this.renderInfo(anno)}</span>\n        </CustomListItem>\n      </ControlPopover>\n    ));\n\n    const addLayerPopoverKey = 'add';\n    return (\n      <div>\n        <List bordered css={theme => ({ borderRadius: theme.gridUnit })}>\n          {annotations}\n          <ControlPopover\n            trigger=\"click\"\n            content={this.renderPopover(addLayerPopoverKey, addedAnnotation)}\n            title={t('Add annotation layer')}\n            visible={this.state.popoverVisible[addLayerPopoverKey]}\n            destroyTooltipOnHide\n            onVisibleChange={visible =>\n              this.handleVisibleChange(visible, addLayerPopoverKey)\n            }\n          >\n            <CustomListItem selectable>\n              <i\n                data-test=\"add-annotation-layer-button\"\n                className=\"fa fa-plus\"\n              />{' '}\n              &nbsp; {t('Add annotation layer')}\n            </CustomListItem>\n          </ControlPopover>\n        </List>\n      </div>\n    );\n  }\n}\n\nAnnotationLayerControl.propTypes = propTypes;\nAnnotationLayerControl.defaultProps = defaultProps;\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps({ charts, explore }) {\n  const chartKey = getChartKey(explore);\n  const chart = charts[chartKey] || charts[0] || {};\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: explore.controls?.color_scheme?.value,\n    annotationError: chart.annotationError,\n    annotationQuery: chart.annotationQuery,\n    vizType: explore.controls.viz_type.value,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: annotationObj =>\n      dispatch(runAnnotationQuery(annotationObj)),\n  };\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(themedAnnotationLayerControl);\n"],"mappings":"scAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,IAAT,QAAqB,gBAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,CAAT,EAAYC,SAAZ,QAA6B,mBAA7B;AACA,SAASC,sBAAT,QAAuC,6BAAvC;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,kBAAT,QAAmC,kCAAnC;AACA,OAAOC,cAAP,MAA2B,gDAA3B;AACA,OAAOC,cAAP;AACEC,0BADF;AAEO,kCAFP,C;;AAIA,MAAMC,eAAe,GAAGN,iBAAiB;AACvC,MAAM,OAAO,mBAAP,CADiC;AAEvC;AACA,MAAM,uBAAK,KAAK,EAAE,EAAEO,KAAK,EAAE,GAAT,EAAcC,MAAM,EAAE,GAAtB,EAAZ,GAHiC,CAAzC;;;AAMA,MAAMC,SAAS,GAAG;EAChBC,WAAW,EAAEhB,SAAS,CAACiB,MAAV,CAAiBC,UADd;EAEhBC,eAAe,EAAEnB,SAAS,CAACoB,MAFX;EAGhBC,eAAe,EAAErB,SAAS,CAACoB,MAHX;EAIhBE,OAAO,EAAEtB,SAAS,CAACiB,MAJH;;EAMhBM,gBAAgB,EAAEvB,SAAS,CAACwB,KANZ;EAOhBC,IAAI,EAAEzB,SAAS,CAACiB,MAAV,CAAiBC,UAPP;EAQhBQ,OAAO,EAAE1B,SAAS,CAACoB,MARH;EAShBO,KAAK,EAAE3B,SAAS,CAAC4B,OAAV,CAAkB5B,SAAS,CAACoB,MAA5B,CATS;EAUhBS,QAAQ,EAAE7B,SAAS,CAAC8B,IAVJ;EAWhBC,qBAAqB,EAAE/B,SAAS,CAAC8B,IAXjB,EAAlB;;;AAcA,MAAME,YAAY,GAAG;EACnBV,OAAO,EAAE,EADU;EAEnBK,KAAK,EAAE,EAFY;EAGnBR,eAAe,EAAE,EAHE;EAInBE,eAAe,EAAE,EAJE;EAKnBQ,QAAQ,EAAE,MAAM,CAAE,CALC,EAArB;;;AAQA,MAAMI,sBAAN,SAAqClC,KAAK,CAACmC,aAA3C,CAAyD;EACvDC,WAAW,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;IACA,KAAKC,KAAL,GAAa;MACXC,cAAc,EAAE,EADL;MAEXC,oBAAoB,EAAE,IAFX,EAAb;;IAIA,KAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;IACA,KAAKC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BD,IAA3B,CAAgC,IAAhC,CAA7B;IACA,KAAKE,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBF,IAAzB,CAA8B,IAA9B,CAA3B;EACD;;EAEDG,iBAAiB,GAAG;IAClB;IACAhC,eAAe,CAACiC,OAAhB;EACD;;EAEDC,gCAAgC,CAACC,SAAD,EAAY;IAC1C,MAAM,EAAEtB,IAAF,EAAQN,eAAR,EAAyBI,gBAAzB,EAA2CI,KAA3C,KAAqDoB,SAA3D;IACA,IAAIC,MAAM,CAACC,IAAP,CAAY9B,eAAZ,EAA6B+B,MAA7B,IAAuC,CAAC3B,gBAAgB,CAAC2B,MAA7D,EAAqE;MACnE,KAAKd,KAAL,CAAWV,OAAX,CAAmByB,eAAnB;MACE1B,IADF;MAEEE,KAFF;MAGEqB,MAAM,CAACC,IAAP,CAAY9B,eAAZ,CAHF;;IAKD;IACD,IAAI,CAAC6B,MAAM,CAACC,IAAP,CAAY9B,eAAZ,EAA6B+B,MAA9B,IAAwC3B,gBAAgB,CAAC2B,MAA7D,EAAqE;MACnE,KAAKd,KAAL,CAAWV,OAAX,CAAmByB,eAAnB,CAAmC1B,IAAnC,EAAyCE,KAAzC,EAAgD,EAAhD;IACD;EACF;;EAEDa,kBAAkB,CAACY,kBAAD,EAAqBC,aAArB,EAAoC;IACpD,IAAIC,WAAW,GAAG,KAAKlB,KAAL,CAAWT,KAA7B;IACA,IAAI,0BAAA2B,WAAW,MAAX,CAAAA,WAAW,EAAUF,kBAAV,CAAf,EAA8C;MAC5CE,WAAW,GAAGA,WAAW,CAACC,GAAZ,CAAgB,CAAAC,IAAI;MAChCA,IAAI,KAAKJ,kBAAT,GAA8BC,aAA9B,GAA8CG,IADlC,CAAd;;IAGD,CAJD,MAIO;MACLF,WAAW,GAAG,CAAC,GAAGA,WAAJ,EAAiBD,aAAjB,CAAd;MACA,KAAKI,QAAL,CAAc,EAAElB,oBAAoB,EAAEe,WAAW,CAACJ,MAAZ,GAAqB,CAA7C,EAAd;IACD;;IAED,KAAKd,KAAL,CAAWL,qBAAX,CAAiC;MAC/B2B,UAAU,EAAEL,aADmB;MAE/BM,KAAK,EAAE,IAFwB,EAAjC;;;IAKA,KAAKvB,KAAL,CAAWP,QAAX,CAAoByB,WAApB;EACD;;EAEDX,mBAAmB,CAACiB,OAAD,EAAUC,UAAV,EAAsB;IACvC,KAAKJ,QAAL,CAAc,CAAAK,SAAS,MAAK;MAC1BxB,cAAc,EAAE,EAAE,GAAGwB,SAAS,CAACxB,cAAf,EAA+B,CAACuB,UAAD,GAAcD,OAA7C,EADU,EAAL,CAAvB;;EAGD;;EAEDlB,qBAAqB,CAACgB,UAAD,EAAa;IAChC,MAAMJ,WAAW,GAAG,KAAKlB,KAAL,CAAWT,KAAX,CAAiBoC,MAAjB,CAAwB,CAAAP,IAAI,KAAIA,IAAI,KAAKE,UAAzC,CAApB;IACA;IACA,MAAMM,OAAO,GAAGrD,0BAA0B,EAA1C;IACA,IAAIqD,OAAJ,EAAa;MACXA,OAAO,CAACC,KAAR,CAAcC,WAAd,CAA0B,YAA1B,EAAwC,MAAxC,EAAgD,WAAhD;IACD;IACD,KAAK9B,KAAL,CAAWP,QAAX,CAAoByB,WAApB;EACD;;EAEDa,aAAa,CAACN,UAAD,EAAaH,UAAb,EAAyBU,KAAzB,EAAgC;IAC3C,MAAMC,EAAE,GAAG,CAAAX,UAAU,QAAV,YAAAA,UAAU,CAAEjC,IAAZ,KAAoB,MAA/B;;IAEA;MACE,uBAAK,EAAE,EAAG,kBAAiB4C,EAAG,EAA9B,EAAiC,aAAU,iBAA3C;MACE,cAAC,eAAD;MACMX,UADN;QAEE,KAAK,EAAEU,KAFT;QAGE,WAAW,EAAE,KAAKhC,KAAL,CAAWpB,WAH1B;QAIE,OAAO,EAAE,KAAKoB,KAAL,CAAWd,OAJtB;QAKE,kBAAkB,EAAE,CAAA+B,aAAa;QAC/B,KAAKb,kBAAL,CAAwBkB,UAAxB,EAAoCL,aAApC,CANJ;;QAQE,qBAAqB,EAAE,MAAM,KAAKX,qBAAL,CAA2BgB,UAA3B,CAR/B;QASE,KAAK,EAAE,MAAM;UACX,KAAKf,mBAAL,CAAyB,KAAzB,EAAgCkB,UAAhC;UACA,KAAKJ,QAAL,CAAc,EAAElB,oBAAoB,EAAE,IAAxB,EAAd;QACD,CAZH,IADF,CADF;;;;EAkBD;;EAED+B,UAAU,CAACd,IAAD,EAAO;IACf,MAAM,EAAErC,eAAF,EAAmBE,eAAnB,EAAoCkD,KAApC,KAA8C,KAAKnC,KAAzD;IACA,IAAIf,eAAe,CAACmC,IAAI,CAAC/B,IAAN,CAAnB,EAAgC;MAC9B;QACE;UACE,SAAS,EAAC,eADZ;UAEE,KAAK,EAAE,EAAE+C,KAAK,EAAED,KAAK,CAACE,MAAN,CAAaC,OAAb,CAAqBC,IAA9B,EAFT;UAGE,mBAHF,GADF;;;IAOD;IACD,IAAIxD,eAAe,CAACqC,IAAI,CAAC/B,IAAN,CAAnB,EAAgC;MAC9B;QACE,cAAC,sBAAD;UACE,KAAK,EAAC,mBADR;UAEE,OAAO,EAAC,QAFV;UAGE,OAAO,EAAEN,eAAe,CAACqC,IAAI,CAAC/B,IAAN,CAH1B,GADF;;;IAOD;IACD,IAAI,CAAC+B,IAAI,CAACoB,IAAV,EAAgB;MACd,OAAO,wBAAM,KAAK,EAAE,EAAEJ,KAAK,EAAED,KAAK,CAACE,MAAN,CAAaL,KAAb,CAAmBO,IAA5B,EAAb,eAAP;IACD;IACD,OAAO,EAAP;EACD;;EAEDE,MAAM,GAAG;IACP,MAAM,EAAEtC,oBAAF,KAA2B,KAAKF,KAAtC;IACA,MAAMyC,eAAe,GAAG,KAAK1C,KAAL,CAAWT,KAAX,CAAiBY,oBAAjB,CAAxB;;IAEA,MAAMe,WAAW,GAAG,KAAKlB,KAAL,CAAWT,KAAX,CAAiB4B,GAAjB,CAAqB,CAACC,IAAD,EAAOuB,CAAP;IACvC,cAAC,cAAD;MACE,GAAG,EAAEA,CADP;MAEE,OAAO,EAAC,OAFV;MAGE,KAAK,EAAE5E,CAAC,CAAC,uBAAD,CAHV;MAIE,GAAG,EAAE,CAAAoE,KAAK,MAAK;QACb,WAAW;UACTS,MAAM,EAAE,SADC;UAETC,eAAe,EAAEV,KAAK,CAACE,MAAN,CAAaS,SAAb,CAAuBC,MAF/B,EADE,EAAL,CAJZ;;;MAUE,OAAO,EAAE,KAAKhB,aAAL;MACPY,CADO;MAEPvB,IAFO;MAGP,KAAKpB,KAAL,CAAWjB,eAAX,CAA2BqC,IAAI,CAAC/B,IAAhC,CAHO,CAVX;;MAeE,OAAO,EAAE,KAAKY,KAAL,CAAWC,cAAX,CAA0ByC,CAA1B,CAfX;MAgBE,eAAe,EAAE,CAAAnB,OAAO,KAAI,KAAKjB,mBAAL,CAAyBiB,OAAzB,EAAkCmB,CAAlC,CAhB9B;;IAkBE,cAAC,cAAD,IAAgB,UAAU,MAA1B;IACE,4BAAOvB,IAAI,CAAC/B,IAAZ,CADF;IAEE,wBAAM,KAAK,EAAE,EAAE2D,KAAK,EAAE,OAAT,EAAb,IAAkC,KAAKd,UAAL,CAAgBd,IAAhB,CAAlC,CAFF,CAlBF,CADkB,CAApB;;;;;IA0BA,MAAM6B,kBAAkB,GAAG,KAA3B;IACA;MACE;MACE,cAAC,IAAD,IAAM,QAAQ,MAAd,EAAe,GAAG,EAAE,CAAAd,KAAK,MAAK,EAAEe,YAAY,EAAEf,KAAK,CAACgB,QAAtB,EAAL,CAAzB;MACGjC,WADH;MAEE,cAAC,cAAD;QACE,OAAO,EAAC,OADV;QAEE,OAAO,EAAE,KAAKa,aAAL,CAAmBkB,kBAAnB,EAAuCP,eAAvC,CAFX;QAGE,KAAK,EAAE3E,CAAC,CAAC,sBAAD,CAHV;QAIE,OAAO,EAAE,KAAKkC,KAAL,CAAWC,cAAX,CAA0B+C,kBAA1B,CAJX;QAKE,oBAAoB,MALtB;QAME,eAAe,EAAE,CAAAzB,OAAO;QACtB,KAAKjB,mBAAL,CAAyBiB,OAAzB,EAAkCyB,kBAAlC,CAPJ;;;MAUE,cAAC,cAAD,IAAgB,UAAU,MAA1B;MACE;QACE,aAAU,6BADZ;QAEE,SAAS,EAAC,YAFZ,GADF;MAIK,GAJL;MAKUlF,CAAC,CAAC,sBAAD,CALX,CAVF,CAFF,CADF,CADF;;;;;;EAyBD,CA3KsD;EAAA;IAAA;AA8KzD8B,sBAAsB,CAAClB,SAAvB,GAAmCA,SAAnC;AACAkB,sBAAsB,CAACD,YAAvB,GAAsCA,YAAtC;;AAEA;AACA;AACA,SAASwD,eAAT,OAA8C,kDAArB,EAAEC,MAAF,EAAUC,OAAV,EAAqB;EAC5C,MAAMC,QAAQ,GAAGpF,WAAW,CAACmF,OAAD,CAA5B;EACA,MAAME,KAAK,GAAGH,MAAM,CAACE,QAAD,CAAN,IAAoBF,MAAM,CAAC,CAAD,CAA1B,IAAiC,EAA/C;;EAEA,OAAO;IACL;IACAzE,WAAW,uBAAE0E,OAAO,CAACG,QAAV,8CAAE,kBAAkBC,YAApB,qBAAE,sBAAgCnE,KAFxC;IAGLR,eAAe,EAAEyE,KAAK,CAACzE,eAHlB;IAILE,eAAe,EAAEuE,KAAK,CAACvE,eAJlB;IAKLC,OAAO,EAAEoE,OAAO,CAACG,QAAR,CAAiBE,QAAjB,CAA0BpE,KAL9B,EAAP;;AAOD;;AAED,SAASqE,kBAAT,CAA4BC,QAA5B,EAAsC;EACpC,OAAO;IACLlE,qBAAqB,EAAE,CAAAmE,aAAa;IAClCD,QAAQ,CAACzF,kBAAkB,CAAC0F,aAAD,CAAnB,CAFL,EAAP;;AAID;;AAED,MAAMC,4BAA4B,GAAG/F,SAAS,CAAC6B,sBAAD,CAA9C,C;;AAEe/B,OAAO;AACpBsF,eADoB;AAEpBQ,kBAFoB,CAAP;AAGbG,4BAHa,C,CAAf,wB,iLArOMvF,e,kLAMAG,S,4KAcAiB,Y,+KAQAC,sB,yLAmLGuD,e,kLAaAQ,kB,qLAOHG,4B"},"metadata":{},"sourceType":"module"}