{"ast":null,"code":"import { css as _css } from \"@emotion/react\";import _debounce from \"lodash/debounce\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport { FAST_DEBOUNCE, useTheme } from '@superset-ui/core';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nexport * from './ControlFormItem';\nexport function ControlFormRow(_ref) {let { children } = _ref;\n  const { gridUnit } = useTheme();\n  return ___EmotionJSX(\"div\", { css: /*#__PURE__*/_css({\n      display: 'flex',\n      flexWrap: 'nowrap',\n      margin: -2 * gridUnit,\n      marginBottom: gridUnit }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:ControlFormRow;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96aGFvcnVpL3NyYy9pbmN1YmF0b3Itc3VwZXJzZXQtaW50ZXJuYWwvc3VwZXJzZXQtZnJvbnRlbmQvcGFja2FnZXMvc3VwZXJzZXQtdWktY2hhcnQtY29udHJvbHMvc3JjL2NvbXBvbmVudHMvQ29udHJvbEZvcm0vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdCaUIiLCJmaWxlIjoiL1VzZXJzL3poYW9ydWkvc3JjL2luY3ViYXRvci1zdXBlcnNldC1pbnRlcm5hbC9zdXBlcnNldC1mcm9udGVuZC9wYWNrYWdlcy9zdXBlcnNldC11aS1jaGFydC1jb250cm9scy9zcmMvY29tcG9uZW50cy9Db250cm9sRm9ybS9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZBU1RfREVCT1VOQ0UsIHVzZVRoZW1lLCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJztcbmV4cG9ydCAqIGZyb20gJy4vQ29udHJvbEZvcm1JdGVtJztcbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sRm9ybVJvdyh7IGNoaWxkcmVuIH0pIHtcbiAgICBjb25zdCB7IGdyaWRVbml0IH0gPSB1c2VUaGVtZSgpO1xuICAgIHJldHVybiAoPGRpdiBjc3M9e3tcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgIGZsZXhXcmFwOiAnbm93cmFwJyxcbiAgICAgICAgICAgIG1hcmdpbjogLTIgKiBncmlkVW5pdCxcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogZ3JpZFVuaXQsXG4gICAgICAgIH19PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvZGl2Pik7XG59XG4vKipcbiAqIExpZ2h0IHdlaWdodCBmb3JtIGZvciBjb250cm9sIHBhbmVsLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb250cm9sRm9ybSh7IG9uQ2hhbmdlLCB2YWx1ZSwgY2hpbGRyZW4sIH0pIHtcbiAgICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKCk7XG4gICAgY29uc3QgZGVib3VuY2VkT25DaGFuZ2UgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgICAgIDA6IG9uQ2hhbmdlLFxuICAgICAgICBbRkFTVF9ERUJPVU5DRV06IGRlYm91bmNlKG9uQ2hhbmdlLCBGQVNUX0RFQk9VTkNFKSxcbiAgICB9KSwgW29uQ2hhbmdlXSk7XG4gICAgY29uc3QgdXBkYXRlZENoaWxkcmVuID0gUmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCByb3cgPT4ge1xuICAgICAgICBpZiAoJ2NoaWxkcmVuJyBpbiByb3cucHJvcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRXaWR0aCA9IEFycmF5LmlzQXJyYXkocm93LnByb3BzLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgID8gYCR7MTAwIC8gcm93LnByb3BzLmNoaWxkcmVuLmxlbmd0aH0lYFxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChyb3csIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogUmVhY3QuQ2hpbGRyZW4ubWFwKHJvdy5wcm9wcy5jaGlsZHJlbiwgaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgd2lkdGgsIGRlYm91bmNlRGVsYXkgPSBGQVNUX0RFQk9VTkNFLCBvbkNoYW5nZTogb25JdGVtVmFsdWVDaGFuZ2UsIH0gPSBpdGVtLnByb3BzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGl0ZW0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCB8fCBkZWZhdWx0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWU/LltuYW1lXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBgZGVib3VuY2VEZWxheWAgZnJvbSByZW5kZXJlZCBjb250cm9sIGl0ZW0gcHJvcHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIFJlYWN0IERldlRvb2xzIGRvbid0IHRocm93IGEgYGludmFsaWQgcHJvcGAgd2FybmluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYm91bmNlRGVsYXk6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGBvbkNoYW5nZWAgb24gZWFjaCBGb3JtSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkl0ZW1WYWx1ZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkl0ZW1WYWx1ZUNoYW5nZShmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvcGFnYXRlIHRvIHRoZSBmb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGVib3VuY2VEZWxheSBpbiBkZWJvdW5jZWRPbkNoYW5nZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVib3VuY2VkT25DaGFuZ2VbZGVib3VuY2VEZWxheV0gPSBkZWJvdW5jZShvbkNoYW5nZSwgZGVib3VuY2VEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYm91bmNlZE9uQ2hhbmdlW2RlYm91bmNlRGVsYXldKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuYW1lXTogZmllbGRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvdztcbiAgICB9KTtcbiAgICByZXR1cm4gKDxkaXYgY3NzPXt7XG4gICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLFxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGVtZS5jb2xvcnMudGV4dC5sYWJlbCxcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogdGhlbWUudHlwb2dyYXBoeS5zaXplcy5zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfX0+XG4gICAgICB7dXBkYXRlZENoaWxkcmVufVxuICAgIDwvZGl2Pik7XG59XG4iXX0= */\") },\n\n  children);\n\n}\n/**\n * Light weight form for control panel.\n */\nexport default function ControlForm(_ref2) {let { onChange, value, children } = _ref2;\n  const theme = useTheme();\n  const debouncedOnChange = useMemo(() => ({\n    0: onChange,\n    [FAST_DEBOUNCE]: _debounce(onChange, FAST_DEBOUNCE) }),\n  [onChange]);\n  const updatedChildren = React.Children.map(children, (row) => {\n    if ('children' in row.props) {\n      const defaultWidth = Array.isArray(row.props.children) ?\n      `${100 / row.props.children.length}%` :\n      undefined;\n      return /*#__PURE__*/React.cloneElement(row, {\n        children: React.Children.map(row.props.children, (item) => {\n          const { name, width, debounceDelay = FAST_DEBOUNCE, onChange: onItemValueChange } = item.props;\n          return /*#__PURE__*/React.cloneElement(item, {\n            width: width || defaultWidth,\n            value: value == null ? void 0 : value[name],\n            // remove `debounceDelay` from rendered control item props\n            // so React DevTools don't throw a `invalid prop` warning.\n            debounceDelay: undefined,\n            onChange(fieldValue) {\n              // call `onChange` on each FormItem\n              if (onItemValueChange) {\n                onItemValueChange(fieldValue);\n              }\n              // propagate to the form\n              if (!(debounceDelay in debouncedOnChange)) {\n                debouncedOnChange[debounceDelay] = _debounce(onChange, debounceDelay);\n              }\n              debouncedOnChange[debounceDelay]({\n                ...value,\n                [name]: fieldValue });\n\n            } });\n\n        }) });\n\n    }\n    return row;\n  });\n  return ___EmotionJSX(\"div\", { css: /*#__PURE__*/_css({\n      label: {\n        textTransform: 'uppercase',\n        color: theme.colors.text.label,\n        fontSize: theme.typography.sizes.s } }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:ControlForm;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96aGFvcnVpL3NyYy9pbmN1YmF0b3Itc3VwZXJzZXQtaW50ZXJuYWwvc3VwZXJzZXQtZnJvbnRlbmQvcGFja2FnZXMvc3VwZXJzZXQtdWktY2hhcnQtY29udHJvbHMvc3JjL2NvbXBvbmVudHMvQ29udHJvbEZvcm0vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRFaUIiLCJmaWxlIjoiL1VzZXJzL3poYW9ydWkvc3JjL2luY3ViYXRvci1zdXBlcnNldC1pbnRlcm5hbC9zdXBlcnNldC1mcm9udGVuZC9wYWNrYWdlcy9zdXBlcnNldC11aS1jaGFydC1jb250cm9scy9zcmMvY29tcG9uZW50cy9Db250cm9sRm9ybS9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZBU1RfREVCT1VOQ0UsIHVzZVRoZW1lLCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJztcbmV4cG9ydCAqIGZyb20gJy4vQ29udHJvbEZvcm1JdGVtJztcbmV4cG9ydCBmdW5jdGlvbiBDb250cm9sRm9ybVJvdyh7IGNoaWxkcmVuIH0pIHtcbiAgICBjb25zdCB7IGdyaWRVbml0IH0gPSB1c2VUaGVtZSgpO1xuICAgIHJldHVybiAoPGRpdiBjc3M9e3tcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgIGZsZXhXcmFwOiAnbm93cmFwJyxcbiAgICAgICAgICAgIG1hcmdpbjogLTIgKiBncmlkVW5pdCxcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogZ3JpZFVuaXQsXG4gICAgICAgIH19PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvZGl2Pik7XG59XG4vKipcbiAqIExpZ2h0IHdlaWdodCBmb3JtIGZvciBjb250cm9sIHBhbmVsLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb250cm9sRm9ybSh7IG9uQ2hhbmdlLCB2YWx1ZSwgY2hpbGRyZW4sIH0pIHtcbiAgICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKCk7XG4gICAgY29uc3QgZGVib3VuY2VkT25DaGFuZ2UgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgICAgIDA6IG9uQ2hhbmdlLFxuICAgICAgICBbRkFTVF9ERUJPVU5DRV06IGRlYm91bmNlKG9uQ2hhbmdlLCBGQVNUX0RFQk9VTkNFKSxcbiAgICB9KSwgW29uQ2hhbmdlXSk7XG4gICAgY29uc3QgdXBkYXRlZENoaWxkcmVuID0gUmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCByb3cgPT4ge1xuICAgICAgICBpZiAoJ2NoaWxkcmVuJyBpbiByb3cucHJvcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRXaWR0aCA9IEFycmF5LmlzQXJyYXkocm93LnByb3BzLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgID8gYCR7MTAwIC8gcm93LnByb3BzLmNoaWxkcmVuLmxlbmd0aH0lYFxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChyb3csIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogUmVhY3QuQ2hpbGRyZW4ubWFwKHJvdy5wcm9wcy5jaGlsZHJlbiwgaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgd2lkdGgsIGRlYm91bmNlRGVsYXkgPSBGQVNUX0RFQk9VTkNFLCBvbkNoYW5nZTogb25JdGVtVmFsdWVDaGFuZ2UsIH0gPSBpdGVtLnByb3BzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGl0ZW0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCB8fCBkZWZhdWx0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWU/LltuYW1lXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBgZGVib3VuY2VEZWxheWAgZnJvbSByZW5kZXJlZCBjb250cm9sIGl0ZW0gcHJvcHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIFJlYWN0IERldlRvb2xzIGRvbid0IHRocm93IGEgYGludmFsaWQgcHJvcGAgd2FybmluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYm91bmNlRGVsYXk6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGBvbkNoYW5nZWAgb24gZWFjaCBGb3JtSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkl0ZW1WYWx1ZUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkl0ZW1WYWx1ZUNoYW5nZShmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvcGFnYXRlIHRvIHRoZSBmb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGVib3VuY2VEZWxheSBpbiBkZWJvdW5jZWRPbkNoYW5nZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVib3VuY2VkT25DaGFuZ2VbZGVib3VuY2VEZWxheV0gPSBkZWJvdW5jZShvbkNoYW5nZSwgZGVib3VuY2VEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYm91bmNlZE9uQ2hhbmdlW2RlYm91bmNlRGVsYXldKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuYW1lXTogZmllbGRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvdztcbiAgICB9KTtcbiAgICByZXR1cm4gKDxkaXYgY3NzPXt7XG4gICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgIHRleHRUcmFuc2Zvcm06ICd1cHBlcmNhc2UnLFxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGVtZS5jb2xvcnMudGV4dC5sYWJlbCxcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogdGhlbWUudHlwb2dyYXBoeS5zaXplcy5zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfX0+XG4gICAgICB7dXBkYXRlZENoaWxkcmVufVxuICAgIDwvZGl2Pik7XG59XG4iXX0= */\") },\n\n\n  updatedChildren);\n\n}","map":{"version":3,"mappings":"sFAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAP,IAA0CC,OAA1C,QAAyD,OAAzD;AACA,SACEC,aADF,EAIEC,QAJF,QAKO,mBALP,C;;AASA,cAAc,mBAAd;AAMA,OAAM,SAAUC,cAAV,OAA0D,KAAjC,EAAEC,QAAF,EAAiC;EAC9D,MAAM,EAAEC,QAAF,KAAeH,QAAQ,EAA7B;EACA,OACE,uBACE,GAAG,oBAAE;MACHI,OAAO,EAAE,MADN;MAEHC,QAAQ,EAAE,QAFP;MAGHC,MAAM,EAAE,CAAC,CAAD,GAAKH,QAHV;MAIHI,YAAY,EAAEJ,QAJX,EAAF,o2KADL;;EAQGD,QARH,CADF;;AAYD;AAaD;;;AAGA,eAAc,SAAUM,WAAV,QAIK,KAJiB,EAClCC,QADkC,EAElCC,KAFkC,EAGlCR,QAHkC,EAIjB;EACjB,MAAMS,KAAK,GAAGX,QAAQ,EAAtB;EACA,MAAMY,iBAAiB,GAAGd,OAAO,CAC/B,OACG;IACC,GAAGW,QADJ;IAEC,CAACV,aAAD,GAAiB,UAASU,QAAT,EAAmBV,aAAnB,CAFlB,EADH,CAD+B;EAM/B,CAACU,QAAD,CAN+B,CAAjC;EASA,MAAMI,eAAe,GAAGhB,KAAK,CAACiB,QAAN,CAAeC,GAAf,CAAmBb,QAAnB,EAA6B,IAAG,KAAG;IACzD,IAAI,cAAcc,GAAG,CAACC,KAAtB,EAA6B;MAC3B,MAAMC,YAAY,GAAGC,KAAK,CAACC,OAAN,CAAcJ,GAAG,CAACC,KAAJ,CAAUf,QAAxB;MACjB,GAAG,MAAMc,GAAG,CAACC,KAAJ,CAAUf,QAAV,CAAmBmB,MAAM,GADjB;MAEjBC,SAFJ;MAGA,oBAAOzB,KAAK,CAAC0B,YAAN,CAAmBP,GAAnB,EAAwB;QAC7Bd,QAAQ,EAAEL,KAAK,CAACiB,QAAN,CAAeC,GAAf,CAAmBC,GAAG,CAACC,KAAJ,CAAUf,QAA7B,EAAuC,KAAI,KAAG;UACtD,MAAM,EACJsB,IADI,EAEJC,KAFI,EAGJC,aAAa,GAAG3B,aAHZ,EAIJU,QAAQ,EAAEkB,iBAJN,KAKFC,IAAI,CAACX,KALT;UAMA,oBAAOpB,KAAK,CAAC0B,YAAN,CAAmBK,IAAnB,EAAyB;YAC9BH,KAAK,EAAEA,KAAK,IAAIP,YADc;YAE9BR,KAAK,EAAEA,KAAF,oBAAEA,KAAK,CAAGc,IAAH,CAFkB;YAG9B;YACA;YACAE,aAAa,EAAEJ,SALe;YAM9Bb,QAAQ,CAACoB,UAAD,EAAsB;cAC5B;cACA,IAAIF,iBAAJ,EAAuB;gBACrBA,iBAAiB,CAACE,UAAD,CAAjB;cACD;cACD;cACA,IAAI,EAAEH,aAAa,IAAId,iBAAnB,CAAJ,EAA2C;gBACzCA,iBAAiB,CAACc,aAAD,CAAjB,GAAmC,UACjCjB,QADiC,EAEjCiB,aAFiC,CAAnC;cAID;cACDd,iBAAiB,CAACc,aAAD,CAAjB,CAAiC;gBAC/B,GAAGhB,KAD4B;gBAE/B,CAACc,IAAD,GAAQK,UAFuB,EAAjC;;YAID,CAtB6B,EAAzB,CAAP;;QAwBD,CA/BS,CADmB,EAAxB,CAAP;;IAkCD;IACD,OAAOb,GAAP;EACD,CAzCuB,CAAxB;EA0CA,OACE,uBACE,GAAG,oBAAE;MACHc,KAAK,EAAE;QACLC,aAAa,EAAE,WADV;QAELC,KAAK,EAAErB,KAAK,CAACsB,MAAN,CAAaC,IAAb,CAAkBJ,KAFpB;QAGLK,QAAQ,EAAExB,KAAK,CAACyB,UAAN,CAAiBC,KAAjB,CAAuBC,CAH5B,EADJ,EAAF,i2KADL;;;EASGzB,eATH,CADF;;AAaD","names":["React","useMemo","FAST_DEBOUNCE","useTheme","ControlFormRow","children","gridUnit","display","flexWrap","margin","marginBottom","ControlForm","onChange","value","theme","debouncedOnChange","updatedChildren","Children","map","row","props","defaultWidth","Array","isArray","length","undefined","cloneElement","name","width","debounceDelay","onItemValueChange","item","fieldValue","label","textTransform","color","colors","text","fontSize","typography","sizes","s"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/packages/superset-ui-chart-controls/src/components/ControlForm/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FunctionComponentElement, useMemo } from 'react';\nimport {\n  FAST_DEBOUNCE,\n  JsonObject,\n  JsonValue,\n  useTheme,\n} from '@superset-ui/core';\nimport { debounce } from 'lodash';\nimport { ControlFormItemNode } from './ControlFormItem';\n\nexport * from './ControlFormItem';\n\nexport type ControlFormRowProps = {\n  children: ControlFormItemNode | ControlFormItemNode[];\n};\n\nexport function ControlFormRow({ children }: ControlFormRowProps) {\n  const { gridUnit } = useTheme();\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexWrap: 'nowrap',\n        margin: -2 * gridUnit,\n        marginBottom: gridUnit,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\ntype ControlFormRowNode = FunctionComponentElement<ControlFormRowProps>;\n\nexport type ControlFormProps = {\n  /**\n   * Form field values dict.\n   */\n  value?: JsonObject;\n  onChange: (value: JsonObject) => void;\n  children: ControlFormRowNode | ControlFormRowNode[];\n};\n\n/**\n * Light weight form for control panel.\n */\nexport default function ControlForm({\n  onChange,\n  value,\n  children,\n}: ControlFormProps) {\n  const theme = useTheme();\n  const debouncedOnChange = useMemo(\n    () =>\n      ({\n        0: onChange,\n        [FAST_DEBOUNCE]: debounce(onChange, FAST_DEBOUNCE),\n      } as Record<number, typeof onChange>),\n    [onChange],\n  );\n\n  const updatedChildren = React.Children.map(children, row => {\n    if ('children' in row.props) {\n      const defaultWidth = Array.isArray(row.props.children)\n        ? `${100 / row.props.children.length}%`\n        : undefined;\n      return React.cloneElement(row, {\n        children: React.Children.map(row.props.children, item => {\n          const {\n            name,\n            width,\n            debounceDelay = FAST_DEBOUNCE,\n            onChange: onItemValueChange,\n          } = item.props;\n          return React.cloneElement(item, {\n            width: width || defaultWidth,\n            value: value?.[name],\n            // remove `debounceDelay` from rendered control item props\n            // so React DevTools don't throw a `invalid prop` warning.\n            debounceDelay: undefined,\n            onChange(fieldValue: JsonValue) {\n              // call `onChange` on each FormItem\n              if (onItemValueChange) {\n                onItemValueChange(fieldValue);\n              }\n              // propagate to the form\n              if (!(debounceDelay in debouncedOnChange)) {\n                debouncedOnChange[debounceDelay] = debounce(\n                  onChange,\n                  debounceDelay,\n                );\n              }\n              debouncedOnChange[debounceDelay]({\n                ...value,\n                [name]: fieldValue,\n              });\n            },\n          });\n        }),\n      });\n    }\n    return row;\n  });\n  return (\n    <div\n      css={{\n        label: {\n          textTransform: 'uppercase',\n          color: theme.colors.text.label,\n          fontSize: theme.typography.sizes.s,\n        },\n      }}\n    >\n      {updatedChildren}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}