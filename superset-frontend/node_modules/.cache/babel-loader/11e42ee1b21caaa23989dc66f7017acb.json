{"ast":null,"code":"import _isPlainObject from \"lodash/isPlainObject\";\nexport function isUser(user) {\n  return _isPlainObject(user) && 'username' in user;\n}\nexport function isUserWithPermissionsAndRoles(user) {\n  return isUser(user) && 'permissions' in user && 'roles' in user;\n}","map":{"version":3,"mappings":";AAqKA,OAAM,SAAUA,MAAV,CAAiBC,IAAjB,EAA0B;EAC9B,OAAO,eAAcA,IAAd,KAAuB,cAAcA,IAA5C;AACD;AAED,OAAM,SAAUC,6BAAV,CACJD,IADI,EACK;EAET,OAAOD,MAAM,CAACC,IAAD,CAAN,IAAgB,iBAAiBA,IAAjC,IAAyC,WAAWA,IAA3D;AACD","names":["isUser","user","isUserWithPermissionsAndRoles"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/types/bootstrapTypes.ts"],"sourcesContent":["import {\n  ColorSchemeConfig,\n  FeatureFlagMap,\n  JsonObject,\n  LanguagePack,\n  Locale,\n  SequentialSchemeConfig,\n} from '@superset-ui/core';\nimport { FormatLocaleDefinition } from 'd3-format';\nimport { isPlainObject } from 'lodash';\nimport { Languages } from 'src/features/home/LanguagePicker';\nimport { FlashMessage } from '../components/FlashProvider';\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport type User = {\n  createdOn?: string;\n  email?: string;\n  firstName: string;\n  isActive: boolean;\n  isAnonymous: boolean;\n  lastName: string;\n  userId?: number; // optional because guest user doesn't have a user id\n  username: string;\n};\n\nexport type UserRoles = Record<string, [string, string][]>;\nexport interface PermissionsAndRoles {\n  permissions: {\n    database_access?: string[];\n    datasource_access?: string[];\n  };\n  roles: UserRoles;\n}\n\nexport type UserWithPermissionsAndRoles = User & PermissionsAndRoles;\n\nexport type UndefinedUser = {};\n\nexport type BootstrapUser = UserWithPermissionsAndRoles | undefined;\n\nexport type Dashboard = {\n  dttm: number;\n  id: number;\n  url: string;\n  title: string;\n  creator?: string;\n  creator_url?: string;\n};\n\nexport type DashboardData = {\n  dashboard_title?: string;\n  created_on_delta_humanized?: string;\n  url: string;\n};\n\nexport type DashboardResponse = {\n  result: DashboardData[];\n};\n\nexport type ChartData = {\n  slice_name: string;\n  created_on_delta_humanized?: string;\n  url: string;\n};\n\nexport type ChartResponse = {\n  result: ChartData[];\n};\n\nexport interface BrandProps {\n  path: string;\n  icon: string;\n  alt: string;\n  tooltip: string;\n  text: string;\n}\n\nexport interface NavBarProps {\n  show_watermark: boolean;\n  bug_report_url?: string;\n  bug_report_text?: string;\n  bug_report_icon?: string;\n  version_string?: string;\n  version_sha?: string;\n  build_number?: string;\n  documentation_url?: string;\n  documentation_text?: string;\n  documentation_icon?: string;\n  languages: Languages;\n  show_language_picker: boolean;\n  user_is_anonymous: boolean;\n  user_info_url: string;\n  user_login_url: string;\n  user_logout_url: string;\n  user_profile_url: string | null;\n  locale: string;\n}\n\nexport interface MenuObjectChildProps {\n  label: string;\n  name?: string;\n  icon?: string;\n  index?: number;\n  url?: string;\n  isFrontendRoute?: boolean;\n  perm?: string | boolean;\n  view?: string;\n  disable?: boolean;\n}\n\nexport interface MenuObjectProps extends MenuObjectChildProps {\n  childs?: (MenuObjectChildProps | string)[];\n  isHeader?: boolean;\n}\n\nexport interface MenuData {\n  menu: MenuObjectProps[];\n  brand: BrandProps;\n  navbar_right: NavBarProps;\n  settings: MenuObjectProps[];\n  environment_tag: {\n    text: string;\n    color: string;\n  };\n}\n\nexport interface CommonBootstrapData {\n  flash_messages: FlashMessage[];\n  conf: JsonObject;\n  locale: Locale;\n  feature_flags: FeatureFlagMap;\n  language_pack: LanguagePack;\n  extra_categorical_color_schemes: ColorSchemeConfig[];\n  extra_sequential_color_schemes: SequentialSchemeConfig[];\n  theme_overrides: JsonObject;\n  menu_data: MenuData;\n  d3_format: Partial<FormatLocaleDefinition>;\n}\n\nexport interface BootstrapData {\n  user?: BootstrapUser;\n  common: CommonBootstrapData;\n  config?: any;\n  embedded?: {\n    dashboard_id: string;\n  };\n}\n\nexport function isUser(user: any): user is User {\n  return isPlainObject(user) && 'username' in user;\n}\n\nexport function isUserWithPermissionsAndRoles(\n  user: any,\n): user is UserWithPermissionsAndRoles {\n  return isUser(user) && 'permissions' in user && 'roles' in user;\n}\n"]},"metadata":{},"sourceType":"module"}