{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { AntdDropdown } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport Button from 'src/components/Button';\nimport { t, styled } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { CssEditor as AceCssEditor } from 'src/components/AsyncAceEditor';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst StyledWrapper = styled.div`\n  ${(_ref) => {let { theme } = _ref;return `\n    .css-editor-header {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      margin-bottom: ${theme.gridUnit * 2}px;\n\n      h5 {\n        margin-top: ${theme.gridUnit}px;\n      }\n    }\n    .css-editor {\n      border: 1px solid ${theme.colors.grayscale.light1};\n    }\n  `;}}\n`;\n\nconst propTypes = {\n  initialCss: PropTypes.string,\n  triggerNode: PropTypes.node.isRequired,\n  onChange: PropTypes.func,\n  templates: PropTypes.array };\n\n\nconst defaultProps = {\n  initialCss: '',\n  onChange: () => {} };\n\n\nclass CssEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      css: props.initialCss };\n\n    this.changeCss = this.changeCss.bind(this);\n    this.changeCssTemplate = this.changeCssTemplate.bind(this);\n  }\n\n  componentDidMount() {\n    AceCssEditor.preload();\n  }\n\n  changeCss(css) {\n    this.setState({ css }, () => {\n      this.props.onChange(css);\n    });\n  }\n\n  changeCssTemplate(_ref2) {let { key } = _ref2;\n    this.changeCss(key);\n  }\n\n  renderTemplateSelector() {\n    if (this.props.templates) {\n      const menu =\n      ___EmotionJSX(Menu, { onClick: this.changeCssTemplate },\n      this.props.templates.map((template) =>\n      ___EmotionJSX(Menu.Item, { key: template.css }, template.label)));\n\n\n\n\n      return (\n        ___EmotionJSX(AntdDropdown, { overlay: menu, placement: \"bottomRight\" },\n        ___EmotionJSX(Button, null, t('Load a CSS template'))));\n\n\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      ___EmotionJSX(ModalTrigger, {\n        triggerNode: this.props.triggerNode,\n        modalTitle: t('CSS'),\n        modalBody:\n        ___EmotionJSX(StyledWrapper, null,\n        ___EmotionJSX(\"div\", { className: \"css-editor-header\" },\n        ___EmotionJSX(\"h5\", null, t('Live CSS editor')),\n        this.renderTemplateSelector()),\n\n        ___EmotionJSX(AceCssEditor, {\n          className: \"css-editor\",\n          minLines: 12,\n          maxLines: 30,\n          onChange: this.changeCss,\n          height: \"200px\",\n          width: \"100%\",\n          editorProps: { $blockScrolling: true },\n          enableLiveAutocompletion: true,\n          value: this.state.css || '' })) }));\n\n\n\n\n\n  }}\n\n\nCssEditor.propTypes = propTypes;\nCssEditor.defaultProps = defaultProps;\n\nexport default CssEditor;","map":{"version":3,"names":["React","PropTypes","AntdDropdown","Menu","Button","t","styled","ModalTrigger","CssEditor","AceCssEditor","StyledWrapper","div","theme","gridUnit","colors","grayscale","light1","propTypes","initialCss","string","triggerNode","node","isRequired","onChange","func","templates","array","defaultProps","PureComponent","constructor","props","state","css","changeCss","bind","changeCssTemplate","componentDidMount","preload","setState","key","renderTemplateSelector","menu","map","template","label","render","$blockScrolling"],"sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/dashboard/components/CssEditor/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { AntdDropdown } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport Button from 'src/components/Button';\nimport { t, styled } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { CssEditor as AceCssEditor } from 'src/components/AsyncAceEditor';\n\nconst StyledWrapper = styled.div`\n  ${({ theme }) => `\n    .css-editor-header {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      margin-bottom: ${theme.gridUnit * 2}px;\n\n      h5 {\n        margin-top: ${theme.gridUnit}px;\n      }\n    }\n    .css-editor {\n      border: 1px solid ${theme.colors.grayscale.light1};\n    }\n  `}\n`;\n\nconst propTypes = {\n  initialCss: PropTypes.string,\n  triggerNode: PropTypes.node.isRequired,\n  onChange: PropTypes.func,\n  templates: PropTypes.array,\n};\n\nconst defaultProps = {\n  initialCss: '',\n  onChange: () => {},\n};\n\nclass CssEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      css: props.initialCss,\n    };\n    this.changeCss = this.changeCss.bind(this);\n    this.changeCssTemplate = this.changeCssTemplate.bind(this);\n  }\n\n  componentDidMount() {\n    AceCssEditor.preload();\n  }\n\n  changeCss(css) {\n    this.setState({ css }, () => {\n      this.props.onChange(css);\n    });\n  }\n\n  changeCssTemplate({ key }) {\n    this.changeCss(key);\n  }\n\n  renderTemplateSelector() {\n    if (this.props.templates) {\n      const menu = (\n        <Menu onClick={this.changeCssTemplate}>\n          {this.props.templates.map(template => (\n            <Menu.Item key={template.css}>{template.label}</Menu.Item>\n          ))}\n        </Menu>\n      );\n\n      return (\n        <AntdDropdown overlay={menu} placement=\"bottomRight\">\n          <Button>{t('Load a CSS template')}</Button>\n        </AntdDropdown>\n      );\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <ModalTrigger\n        triggerNode={this.props.triggerNode}\n        modalTitle={t('CSS')}\n        modalBody={\n          <StyledWrapper>\n            <div className=\"css-editor-header\">\n              <h5>{t('Live CSS editor')}</h5>\n              {this.renderTemplateSelector()}\n            </div>\n            <AceCssEditor\n              className=\"css-editor\"\n              minLines={12}\n              maxLines={30}\n              onChange={this.changeCss}\n              height=\"200px\"\n              width=\"100%\"\n              editorProps={{ $blockScrolling: true }}\n              enableLiveAutocompletion\n              value={this.state.css || ''}\n            />\n          </StyledWrapper>\n        }\n      />\n    );\n  }\n}\n\nCssEditor.propTypes = propTypes;\nCssEditor.defaultProps = defaultProps;\n\nexport default CssEditor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}