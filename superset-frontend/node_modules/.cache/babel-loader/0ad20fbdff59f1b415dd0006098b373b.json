{"ast":null,"code":"var _bootstrapData$common, _bootstrapData$common2;function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";} /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useRef } from 'react';\nimport SchemaForm from 'react-jsonschema-form';\nimport { Row, Col } from 'src/components';\nimport { Input, TextArea } from 'src/components/Input';\nimport { t, styled } from '@superset-ui/core';\nimport * as chrono from 'chrono-node';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { Form, FormItem } from 'src/components/Form';\nimport Button from 'src/components/Button';\nimport getBootstrapData from 'src/utils/getBootstrapData';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst bootstrapData = getBootstrapData();\nconst scheduledQueriesConf = bootstrapData == null ? void 0 : (_bootstrapData$common = bootstrapData.common) == null ? void 0 : (_bootstrapData$common2 = _bootstrapData$common.conf) == null ? void 0 : _bootstrapData$common2.SCHEDULED_QUERIES;\nconst validators = {\n  greater: (a, b) => a > b,\n  greater_equal: (a, b) => a >= b,\n  less: (a, b) => a < b,\n  less_equal: (a, b) => a <= b };\n\nconst getJSONSchema = () => {\n  const jsonSchema = scheduledQueriesConf == null ? void 0 : scheduledQueriesConf.JSONSCHEMA;\n  // parse date-time into usable value (eg, 'today' => `new Date()`)\n  if (jsonSchema) {\n    Object.entries(jsonSchema.properties).forEach((_ref) => {let [key, value] = _ref;\n      if (value.default && value.format === 'date-time') {\n        jsonSchema.properties[key] = {\n          ...value,\n          default: chrono.parseDate(value.default).toISOString() };\n\n      }\n    });\n    return jsonSchema;\n  }\n  return {};\n};\nconst getUISchema = () => scheduledQueriesConf == null ? void 0 : scheduledQueriesConf.UISCHEMA;\nconst getValidationRules = () => (scheduledQueriesConf == null ? void 0 : scheduledQueriesConf.VALIDATION) || [];\nconst getValidator = () => {\n  const rules = getValidationRules();\n  return (formData, errors) => {\n    rules.forEach((rule) => {\n      const test = validators[rule.name];\n      const args = rule.arguments.map((name) => formData[name]);\n      const container = rule.container || rule.arguments.slice(-1)[0];\n      if (!test(...args)) {\n        errors[container].addError(rule.message);\n      }\n    });\n    return errors;\n  };\n};\nconst StyledRow = styled(Row)`\n  padding-bottom: ${(_ref2) => {let { theme } = _ref2;return theme.gridUnit * 2;}}px;\n`;\nexport const StyledButtonComponent = styled(Button)`\n  ${(_ref3) => {let { theme } = _ref3;return `\n    background: none;\n    text-transform: none;\n    padding: 0px;\n    color: ${theme.colors.grayscale.dark2};\n    font-size: 14px;\n    font-weight: ${theme.typography.weights.normal};\n    margin-left: 0;\n    &:disabled {\n      margin-left: 0;\n      background: none;\n      color: ${theme.colors.grayscale.dark2};\n      &:hover {\n        background: none;\n        color: ${theme.colors.grayscale.dark2};\n      }\n    }\n  `;}}\n`;\nconst StyledJsonSchema = styled.div`\n  i.glyphicon {\n    display: none;\n  }\n  .btn-add::after {\n    content: '+';\n  }\n  .array-item-move-up::after {\n    content: '↑';\n  }\n  .array-item-move-down::after {\n    content: '↓';\n  }\n  .array-item-remove::after {\n    content: '-';\n  }\n`;var _ref6 = process.env.NODE_ENV === \"production\" ? { name: \"tjo4qw\", styles: \"float:right\" } : { name: \"nh75pi-renderModalBody\", styles: \"float:right;label:renderModalBody;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ib2dkYW5reXJ5bGl1ay9jb2RlL29wZW5zb3VyY2Uvc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1NjaGVkdWxlUXVlcnlCdXR0b24vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWdKOEQiLCJmaWxlIjoiL1VzZXJzL2JvZ2Rhbmt5cnlsaXVrL2NvZGUvb3BlbnNvdXJjZS9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvU2NoZWR1bGVRdWVyeUJ1dHRvbi9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBTY2hlbWFGb3JtIGZyb20gJ3JlYWN0LWpzb25zY2hlbWEtZm9ybSc7XG5pbXBvcnQgeyBSb3csIENvbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzJztcbmltcG9ydCB7IElucHV0LCBUZXh0QXJlYSB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0lucHV0JztcbmltcG9ydCB7IHQsIHN0eWxlZCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCAqIGFzIGNocm9ubyBmcm9tICdjaHJvbm8tbm9kZSc7XG5pbXBvcnQgTW9kYWxUcmlnZ2VyIGZyb20gJ3NyYy9jb21wb25lbnRzL01vZGFsVHJpZ2dlcic7XG5pbXBvcnQgeyBGb3JtLCBGb3JtSXRlbSB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0Zvcm0nO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IGdldEJvb3RzdHJhcERhdGEgZnJvbSAnc3JjL3V0aWxzL2dldEJvb3RzdHJhcERhdGEnO1xuY29uc3QgYm9vdHN0cmFwRGF0YSA9IGdldEJvb3RzdHJhcERhdGEoKTtcbmNvbnN0IHNjaGVkdWxlZFF1ZXJpZXNDb25mID0gYm9vdHN0cmFwRGF0YT8uY29tbW9uPy5jb25mPy5TQ0hFRFVMRURfUVVFUklFUztcbmNvbnN0IHZhbGlkYXRvcnMgPSB7XG4gICAgZ3JlYXRlcjogKGEsIGIpID0+IGEgPiBiLFxuICAgIGdyZWF0ZXJfZXF1YWw6IChhLCBiKSA9PiBhID49IGIsXG4gICAgbGVzczogKGEsIGIpID0+IGEgPCBiLFxuICAgIGxlc3NfZXF1YWw6IChhLCBiKSA9PiBhIDw9IGIsXG59O1xuY29uc3QgZ2V0SlNPTlNjaGVtYSA9ICgpID0+IHtcbiAgICBjb25zdCBqc29uU2NoZW1hID0gc2NoZWR1bGVkUXVlcmllc0NvbmY/LkpTT05TQ0hFTUE7XG4gICAgLy8gcGFyc2UgZGF0ZS10aW1lIGludG8gdXNhYmxlIHZhbHVlIChlZywgJ3RvZGF5JyA9PiBgbmV3IERhdGUoKWApXG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoanNvblNjaGVtYS5wcm9wZXJ0aWVzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5kZWZhdWx0ICYmIHZhbHVlLmZvcm1hdCA9PT0gJ2RhdGUtdGltZScpIHtcbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hLnByb3BlcnRpZXNba2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGNocm9uby5wYXJzZURhdGUodmFsdWUuZGVmYXVsdCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGpzb25TY2hlbWE7XG4gICAgfVxuICAgIHJldHVybiB7fTtcbn07XG5jb25zdCBnZXRVSVNjaGVtYSA9ICgpID0+IHNjaGVkdWxlZFF1ZXJpZXNDb25mPy5VSVNDSEVNQTtcbmNvbnN0IGdldFZhbGlkYXRpb25SdWxlcyA9ICgpID0+IHNjaGVkdWxlZFF1ZXJpZXNDb25mPy5WQUxJREFUSU9OIHx8IFtdO1xuY29uc3QgZ2V0VmFsaWRhdG9yID0gKCkgPT4ge1xuICAgIGNvbnN0IHJ1bGVzID0gZ2V0VmFsaWRhdGlvblJ1bGVzKCk7XG4gICAgcmV0dXJuIChmb3JtRGF0YSwgZXJyb3JzKSA9PiB7XG4gICAgICAgIHJ1bGVzLmZvckVhY2goKHJ1bGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlc3QgPSB2YWxpZGF0b3JzW3J1bGUubmFtZV07XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gcnVsZS5hcmd1bWVudHMubWFwKChuYW1lKSA9PiBmb3JtRGF0YVtuYW1lXSk7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBydWxlLmNvbnRhaW5lciB8fCBydWxlLmFyZ3VtZW50cy5zbGljZSgtMSlbMF07XG4gICAgICAgICAgICBpZiAoIXRlc3QoLi4uYXJncykpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnNbY29udGFpbmVyXS5hZGRFcnJvcihydWxlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9O1xufTtcbmNvbnN0IFN0eWxlZFJvdyA9IHN0eWxlZChSb3cpIGBcbiAgcGFkZGluZy1ib3R0b206ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZ3JpZFVuaXQgKiAyfXB4O1xuYDtcbmV4cG9ydCBjb25zdCBTdHlsZWRCdXR0b25Db21wb25lbnQgPSBzdHlsZWQoQnV0dG9uKSBgXG4gICR7KHsgdGhlbWUgfSkgPT4gYFxuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgdGV4dC10cmFuc2Zvcm06IG5vbmU7XG4gICAgcGFkZGluZzogMHB4O1xuICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuZGFyazJ9O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBmb250LXdlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMubm9ybWFsfTtcbiAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAmOmRpc2FibGVkIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuZGFyazJ9O1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUuZGFyazJ9O1xuICAgICAgfVxuICAgIH1cbiAgYH1cbmA7XG5jb25zdCBTdHlsZWRKc29uU2NoZW1hID0gc3R5bGVkLmRpdiBgXG4gIGkuZ2x5cGhpY29uIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG4gIC5idG4tYWRkOjphZnRlciB7XG4gICAgY29udGVudDogJysnO1xuICB9XG4gIC5hcnJheS1pdGVtLW1vdmUtdXA6OmFmdGVyIHtcbiAgICBjb250ZW50OiAn4oaRJztcbiAgfVxuICAuYXJyYXktaXRlbS1tb3ZlLWRvd246OmFmdGVyIHtcbiAgICBjb250ZW50OiAn4oaTJztcbiAgfVxuICAuYXJyYXktaXRlbS1yZW1vdmU6OmFmdGVyIHtcbiAgICBjb250ZW50OiAnLSc7XG4gIH1cbmA7XG5jb25zdCBTY2hlZHVsZVF1ZXJ5QnV0dG9uID0gKHsgZGVmYXVsdExhYmVsID0gdCgnVW5kZWZpbmVkJyksIHNxbCwgc2NoZW1hLCBkYklkLCBvblNjaGVkdWxlID0gKCkgPT4geyB9LCBzY2hlZHVsZVF1ZXJ5V2FybmluZywgdG9vbHRpcCwgZGlzYWJsZWQgPSBmYWxzZSwgfSkgPT4ge1xuICAgIGNvbnN0IFtkZXNjcmlwdGlvbiwgc2V0RGVzY3JpcHRpb25dID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtsYWJlbCwgc2V0TGFiZWxdID0gdXNlU3RhdGUoZGVmYXVsdExhYmVsKTtcbiAgICBjb25zdCBbc2hvd1NjaGVkdWxlLCBzZXRTaG93U2NoZWR1bGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHNhdmVNb2RhbCA9IHVzZVJlZigpO1xuICAgIGNvbnN0IG9uU2NoZWR1bGVTdWJtaXQgPSAoeyBmb3JtRGF0YSwgfSkgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHtcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBkYl9pZDogZGJJZCxcbiAgICAgICAgICAgIHNjaGVtYSxcbiAgICAgICAgICAgIHNxbCxcbiAgICAgICAgICAgIGV4dHJhX2pzb246IEpTT04uc3RyaW5naWZ5KHsgc2NoZWR1bGVfaW5mbzogZm9ybURhdGEgfSksXG4gICAgICAgIH07XG4gICAgICAgIG9uU2NoZWR1bGUocXVlcnkpO1xuICAgICAgICBzYXZlTW9kYWw/LmN1cnJlbnQ/LmNsb3NlKCk7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJNb2RhbEJvZHkgPSAoKSA9PiAoPEZvcm0gbGF5b3V0PVwidmVydGljYWxcIj5cbiAgICAgIDxTdHlsZWRSb3c+XG4gICAgICAgIDxDb2wgeHM9ezI0fT5cbiAgICAgICAgICA8Rm9ybUl0ZW0gbGFiZWw9e3QoJ0xhYmVsJyl9PlxuICAgICAgICAgICAgPElucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9e3QoJ0xhYmVsIGZvciB5b3VyIHF1ZXJ5Jyl9IHZhbHVlPXtsYWJlbH0gb25DaGFuZ2U9eyhldmVudCkgPT4gc2V0TGFiZWwoZXZlbnQudGFyZ2V0LnZhbHVlKX0vPlxuICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgIDwvQ29sPlxuICAgICAgPC9TdHlsZWRSb3c+XG4gICAgICA8U3R5bGVkUm93PlxuICAgICAgICA8Q29sIHhzPXsyNH0+XG4gICAgICAgICAgPEZvcm1JdGVtIGxhYmVsPXt0KCdEZXNjcmlwdGlvbicpfT5cbiAgICAgICAgICAgIDxUZXh0QXJlYSByb3dzPXs0fSBwbGFjZWhvbGRlcj17dCgnV3JpdGUgYSBkZXNjcmlwdGlvbiBmb3IgeW91ciBxdWVyeScpfSB2YWx1ZT17ZGVzY3JpcHRpb259IG9uQ2hhbmdlPXsoZXZlbnQpID0+IHNldERlc2NyaXB0aW9uKGV2ZW50LnRhcmdldC52YWx1ZSl9Lz5cbiAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICA8L0NvbD5cbiAgICAgIDwvU3R5bGVkUm93PlxuICAgICAgPFJvdz5cbiAgICAgICAgPENvbCB4cz17MjR9PlxuICAgICAgICAgIDxTdHlsZWRKc29uU2NoZW1hPlxuICAgICAgICAgICAgPFNjaGVtYUZvcm0gc2NoZW1hPXtnZXRKU09OU2NoZW1hKCl9IHVpU2NoZW1hPXtnZXRVSVNjaGVtYSgpfSBvblN1Ym1pdD17b25TY2hlZHVsZVN1Ym1pdH0gdmFsaWRhdGU9e2dldFZhbGlkYXRvcigpfT5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBidXR0b25TdHlsZT1cInByaW1hcnlcIiBodG1sVHlwZT1cInN1Ym1pdFwiIGNzcz17eyBmbG9hdDogJ3JpZ2h0JyB9fT5cbiAgICAgICAgICAgICAgICB7dCgnU3VibWl0Jyl9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9TY2hlbWFGb3JtPlxuICAgICAgICAgIDwvU3R5bGVkSnNvblNjaGVtYT5cbiAgICAgICAgPC9Db2w+XG4gICAgICA8L1Jvdz5cbiAgICAgIHtzY2hlZHVsZVF1ZXJ5V2FybmluZyAmJiAoPFJvdz5cbiAgICAgICAgICA8Q29sIHhzPXsyNH0+XG4gICAgICAgICAgICA8c21hbGw+e3NjaGVkdWxlUXVlcnlXYXJuaW5nfTwvc21hbGw+XG4gICAgICAgICAgPC9Db2w+XG4gICAgICAgIDwvUm93Pil9XG4gICAgPC9Gb3JtPik7XG4gICAgcmV0dXJuICg8c3BhbiBjbGFzc05hbWU9XCJTY2hlZHVsZVF1ZXJ5QnV0dG9uXCI+XG4gICAgICA8TW9kYWxUcmlnZ2VyIHJlZj17c2F2ZU1vZGFsfSBtb2RhbFRpdGxlPXt0KCdTY2hlZHVsZSBxdWVyeScpfSBtb2RhbEJvZHk9e3JlbmRlck1vZGFsQm9keSgpfSB0cmlnZ2VyTm9kZT17PFN0eWxlZEJ1dHRvbkNvbXBvbmVudCBvbkNsaWNrPXsoKSA9PiBzZXRTaG93U2NoZWR1bGUoIXNob3dTY2hlZHVsZSl9IGJ1dHRvblNpemU9XCJzbWFsbFwiIGJ1dHRvblN0eWxlPVwibGlua1wiIHRvb2x0aXA9e3Rvb2x0aXB9IGRpc2FibGVkPXtkaXNhYmxlZH0+XG4gICAgICAgICAgICB7dCgnU2NoZWR1bGUnKX1cbiAgICAgICAgICA8L1N0eWxlZEJ1dHRvbkNvbXBvbmVudD59Lz5cbiAgICA8L3NwYW4+KTtcbn07XG5leHBvcnQgZGVmYXVsdCBTY2hlZHVsZVF1ZXJ5QnV0dG9uO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nconst ScheduleQueryButton = (_ref4) => {let { defaultLabel = t('Undefined'), sql, schema, dbId, onSchedule = () => {}, scheduleQueryWarning, tooltip, disabled = false } = _ref4;\n  const [description, setDescription] = useState('');\n  const [label, setLabel] = useState(defaultLabel);\n  const [showSchedule, setShowSchedule] = useState(false);\n  const saveModal = useRef();\n  const onScheduleSubmit = (_ref5) => {var _saveModal$current;let { formData } = _ref5;\n    const query = {\n      label,\n      description,\n      db_id: dbId,\n      schema,\n      sql,\n      extra_json: JSON.stringify({ schedule_info: formData }) };\n\n    onSchedule(query);\n    saveModal == null ? void 0 : (_saveModal$current = saveModal.current) == null ? void 0 : _saveModal$current.close();\n  };\n  const renderModalBody = () => ___EmotionJSX(Form, { layout: \"vertical\" },\n  ___EmotionJSX(StyledRow, null,\n  ___EmotionJSX(Col, { xs: 24 },\n  ___EmotionJSX(FormItem, { label: t('Label') },\n  ___EmotionJSX(Input, { type: \"text\", placeholder: t('Label for your query'), value: label, onChange: (event) => setLabel(event.target.value) })))),\n\n\n\n  ___EmotionJSX(StyledRow, null,\n  ___EmotionJSX(Col, { xs: 24 },\n  ___EmotionJSX(FormItem, { label: t('Description') },\n  ___EmotionJSX(TextArea, { rows: 4, placeholder: t('Write a description for your query'), value: description, onChange: (event) => setDescription(event.target.value) })))),\n\n\n\n  ___EmotionJSX(Row, null,\n  ___EmotionJSX(Col, { xs: 24 },\n  ___EmotionJSX(StyledJsonSchema, null,\n  ___EmotionJSX(SchemaForm, { schema: getJSONSchema(), uiSchema: getUISchema(), onSubmit: onScheduleSubmit, validate: getValidator() },\n  ___EmotionJSX(Button, { buttonStyle: \"primary\", htmlType: \"submit\", css: _ref6 },\n  t('Submit')))))),\n\n\n\n\n\n  scheduleQueryWarning && ___EmotionJSX(Row, null,\n  ___EmotionJSX(Col, { xs: 24 },\n  ___EmotionJSX(\"small\", null, scheduleQueryWarning))));\n\n\n\n  return ___EmotionJSX(\"span\", { className: \"ScheduleQueryButton\" },\n  ___EmotionJSX(ModalTrigger, { ref: saveModal, modalTitle: t('Schedule query'), modalBody: renderModalBody(), triggerNode: ___EmotionJSX(StyledButtonComponent, { onClick: () => setShowSchedule(!showSchedule), buttonSize: \"small\", buttonStyle: \"link\", tooltip: tooltip, disabled: disabled },\n    t('Schedule')) }));\n\n\n};\nexport default ScheduleQueryButton;","map":{"version":3,"mappings":"0UAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAP,IAAmCC,QAAnC,EAA6CC,MAA7C,QAA2D,OAA3D;AACA,OAAOC,UAAP,MAAsD,uBAAtD;AACA,SAASC,GAAT,EAAcC,GAAd,QAAyB,gBAAzB;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,sBAAhC;AACA,SAASC,CAAT,EAAYC,MAAZ,QAA0B,mBAA1B;AACA,OAAO,KAAKC,MAAZ,MAAwB,aAAxB;AACA,OAAOC,YAAP,MAA8C,6BAA9C;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,qBAA/B;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,OAAOC,gBAAP,MAA6B,4BAA7B,C;AAEA,MAAMC,aAAa,GAAGD,gBAAgB,EAAtC;AACA,MAAME,oBAAoB,GAAGD,aAAH,6CAAGA,aAAa,CAAEE,MAAlB,+CAAG,sBAAuBC,IAA1B,qBAAG,uBAA6BC,iBAA1D;AAEA,MAAMC,UAAU,GAAG;EACjBC,OAAO,EAAE,CAACC,CAAD,EAAYC,CAAZ,KAA0BD,CAAC,GAAGC,CADtB;EAEjBC,aAAa,EAAE,CAACF,CAAD,EAAYC,CAAZ,KAA0BD,CAAC,IAAIC,CAF7B;EAGjBE,IAAI,EAAE,CAACH,CAAD,EAAYC,CAAZ,KAA0BD,CAAC,GAAGC,CAHnB;EAIjBG,UAAU,EAAE,CAACJ,CAAD,EAAYC,CAAZ,KAA0BD,CAAC,IAAIC,CAJ1B,EAAnB;;AAOA,MAAMI,aAAa,GAAG,MAAK;EACzB,MAAMC,UAAU,GAAGZ,oBAAH,oBAAGA,oBAAoB,CAAEa,UAAzC;EACA;EACA,IAAID,UAAJ,EAAgB;IACdE,MAAM,CAACC,OAAP,CAAeH,UAAU,CAACI,UAA1B,EAAsCC,OAAtC,CACE,UAAgC,KAA/B,CAACC,GAAD,EAAMC,KAAN,CAA+B;MAC9B,IAAIA,KAAK,CAACC,OAAN,IAAiBD,KAAK,CAACE,MAAN,KAAiB,WAAtC,EAAmD;QACjDT,UAAU,CAACI,UAAX,CAAsBE,GAAtB,IAA6B;UAC3B,GAAGC,KADwB;UAE3BC,OAAO,EAAE3B,MAAM,CAAC6B,SAAP,CAAiBH,KAAK,CAACC,OAAvB,EAAgCG,WAAhC,EAFkB,EAA7B;;MAID;IACF,CARH;IAUA,OAAOX,UAAP;EACD;EACD,OAAO,EAAP;AACD,CAjBD;AAmBA,MAAMY,WAAW,GAAG,MAAMxB,oBAAN,oBAAMA,oBAAoB,CAAEyB,QAAhD;AAEA,MAAMC,kBAAkB,GAAG,MAAM,qBAAoB,QAApB,gCAAoB,CAAEC,UAAtB,KAAoC,EAArE;AAEA,MAAMC,YAAY,GAAG,MAAK;EACxB,MAAMC,KAAK,GAAQH,kBAAkB,EAArC;EACA,OAAO,CAACI,QAAD,EAAgCC,MAAhC,KAA0D;IAC/DF,KAAK,CAACZ,OAAN,CAAc,CAACe,IAAD,KAAc;MAC1B,MAAMC,IAAI,GAAG7B,UAAU,CAAC4B,IAAI,CAACE,IAAN,CAAvB;MACA,MAAMC,IAAI,GAAGH,IAAI,CAACI,SAAL,CAAeC,GAAf,CAAmB,CAACH,IAAD,KAAkBJ,QAAQ,CAACI,IAAD,CAA7C,CAAb;MACA,MAAMI,SAAS,GAAGN,IAAI,CAACM,SAAL,IAAkBN,IAAI,CAACI,SAAL,CAAeG,KAAf,CAAqB,CAAC,CAAtB,EAAyB,CAAzB,CAApC;MACA,IAAI,CAACN,IAAI,CAAC,GAAGE,IAAJ,CAAT,EAAoB;QAClBJ,MAAM,CAACO,SAAD,CAAN,CAAkBE,QAAlB,CAA2BR,IAAI,CAACS,OAAhC;MACD;IACF,CAPD;IAQA,OAAOV,MAAP;EACD,CAVD;AAWD,CAbD;AA2BA,MAAMW,SAAS,GAAGlD,MAAM,CAACL,GAAD,CAAK;oBACT,gBAAC,EAAEwD,KAAF,EAAD,gBAAeA,KAAK,CAACC,QAAN,GAAiB,CAAhC,EAAiC;CADrD;AAIA,OAAO,MAAMC,qBAAqB,GAAGrD,MAAM,CAACK,MAAD,CAAQ;IAC/C,gBAAC,EAAE8C,KAAF,EAAD,gBAAe;;;;aAINA,KAAK,CAACG,MAAN,CAAaC,SAAb,CAAuBC,KAAK;;mBAEtBL,KAAK,CAACM,UAAN,CAAiBC,OAAjB,CAAyBC,MAAM;;;;;eAKnCR,KAAK,CAACG,MAAN,CAAaC,SAAb,CAAuBC,KAAK;;;iBAG1BL,KAAK,CAACG,MAAN,CAAaC,SAAb,CAAuBC,KAAK;;;GAdzC,EAiBD;CAlBI;AAqBP,MAAMI,gBAAgB,GAAG5D,MAAM,CAAC6D,GAAG;;;;;;;;;;;;;;;;CAAnC,C;AAkBA,MAAMC,mBAAmB,GAAgD,WASpE,KATqE,EACxEC,YAAY,GAAGhE,CAAC,CAAC,WAAD,CADwD,EAExEiE,GAFwE,EAGxEC,MAHwE,EAIxEC,IAJwE,EAKxEC,UAAU,GAAG,MAAK,CAAG,CALmD,EAMxEC,oBANwE,EAOxEC,OAPwE,EAQxEC,QAAQ,GAAG,KAR6D,EASrE;EACH,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgChF,QAAQ,CAAC,EAAD,CAA9C;EACA,MAAM,CAACiF,KAAD,EAAQC,QAAR,IAAoBlF,QAAQ,CAACuE,YAAD,CAAlC;EACA,MAAM,CAACY,YAAD,EAAeC,eAAf,IAAkCpF,QAAQ,CAAC,KAAD,CAAhD;EACA,MAAMqF,SAAS,GAA2BpF,MAAM,EAAhD;EAEA,MAAMqF,gBAAgB,GAAG,WAIpB,4BAJqB,EACxBxC,QADwB,EAIrB;IACH,MAAMyC,KAAK,GAAG;MACZN,KADY;MAEZF,WAFY;MAGZS,KAAK,EAAEd,IAHK;MAIZD,MAJY;MAKZD,GALY;MAMZiB,UAAU,EAAEC,IAAI,CAACC,SAAL,CAAe,EAAEC,aAAa,EAAE9C,QAAjB,EAAf,CANA,EAAd;;IAQA6B,UAAU,CAACY,KAAD,CAAV;IACAF,SAAS,QAAT,2CAAS,CAAEQ,OAAX,wCAAoBC,KAApB;EACD,CAfD;EAiBA,MAAMC,eAAe,GAAG,MACtB,cAAC,IAAD,IAAM,MAAM,EAAC,UAAb;EACE,cAAC,SAAD;EACE,cAAC,GAAD,IAAK,EAAE,EAAE,EAAT;EACE,cAAC,QAAD,IAAU,KAAK,EAAExF,CAAC,CAAC,OAAD,CAAlB;EACE,cAAC,KAAD,IACE,IAAI,EAAC,MADP,EAEE,WAAW,EAAEA,CAAC,CAAC,sBAAD,CAFhB,EAGE,KAAK,EAAE0E,KAHT,EAIE,QAAQ,EAAE,CAACe,KAAD,KACRd,QAAQ,CAACc,KAAK,CAACC,MAAN,CAAa9D,KAAd,CALZ,GADF,CADF,CADF,CADF;;;;EAeE,cAAC,SAAD;EACE,cAAC,GAAD,IAAK,EAAE,EAAE,EAAT;EACE,cAAC,QAAD,IAAU,KAAK,EAAE5B,CAAC,CAAC,aAAD,CAAlB;EACE,cAAC,QAAD,IACE,IAAI,EAAE,CADR,EAEE,WAAW,EAAEA,CAAC,CAAC,oCAAD,CAFhB,EAGE,KAAK,EAAEwE,WAHT,EAIE,QAAQ,EAAE,CAACiB,KAAD,KACRhB,cAAc,CAACgB,KAAK,CAACC,MAAN,CAAa9D,KAAd,CALlB,GADF,CADF,CADF,CAfF;;;;EA6BE,cAAC,GAAD;EACE,cAAC,GAAD,IAAK,EAAE,EAAE,EAAT;EACE,cAAC,gBAAD;EACE,cAAC,UAAD,IACE,MAAM,EAAER,aAAa,EADvB,EAEE,QAAQ,EAAEa,WAAW,EAFvB,EAGE,QAAQ,EAAE8C,gBAHZ,EAIE,QAAQ,EAAE1C,YAAY,EAJxB;EAME,cAAC,MAAD,IACE,WAAW,EAAC,SADd,EAEE,QAAQ,EAAC,QAFX,EAGE,GAAG,OAHL;EAKGrC,CAAC,CAAC,QAAD,CALJ,CANF,CADF,CADF,CADF,CA7BF;;;;;;EAiDGqE,oBAAoB,IACnB,cAAC,GAAD;EACE,cAAC,GAAD,IAAK,EAAE,EAAE,EAAT;EACE,6BAAQA,oBAAR,CADF,CADF,CAlDJ,CADF;;;;EA4DA,OACE,wBAAM,SAAS,EAAC,qBAAhB;EACE,cAAC,YAAD,IACE,GAAG,EAAES,SADP,EAEE,UAAU,EAAE9E,CAAC,CAAC,gBAAD,CAFf,EAGE,SAAS,EAAEwF,eAAe,EAH5B,EAIE,WAAW,EACT,cAAC,qBAAD,IACE,OAAO,EAAE,MAAMX,eAAe,CAAC,CAACD,YAAF,CADhC,EAEE,UAAU,EAAC,OAFb,EAGE,WAAW,EAAC,MAHd,EAIE,OAAO,EAAEN,OAJX,EAKE,QAAQ,EAAEC,QALZ;IAOGvE,CAAC,CAAC,UAAD,CAPJ,CALJ,GADF,CADF;;;AAoBD,CAhHD;AAkHA,eAAe+D,mBAAf","names":["React","useState","useRef","SchemaForm","Row","Col","Input","TextArea","t","styled","chrono","ModalTrigger","Form","FormItem","Button","getBootstrapData","bootstrapData","scheduledQueriesConf","common","conf","SCHEDULED_QUERIES","validators","greater","a","b","greater_equal","less","less_equal","getJSONSchema","jsonSchema","JSONSCHEMA","Object","entries","properties","forEach","key","value","default","format","parseDate","toISOString","getUISchema","UISCHEMA","getValidationRules","VALIDATION","getValidator","rules","formData","errors","rule","test","name","args","arguments","map","container","slice","addError","message","StyledRow","theme","gridUnit","StyledButtonComponent","colors","grayscale","dark2","typography","weights","normal","StyledJsonSchema","div","ScheduleQueryButton","defaultLabel","sql","schema","dbId","onSchedule","scheduleQueryWarning","tooltip","disabled","description","setDescription","label","setLabel","showSchedule","setShowSchedule","saveModal","onScheduleSubmit","query","db_id","extra_json","JSON","stringify","schedule_info","current","close","renderModalBody","event","target"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/SqlLab/components/ScheduleQueryButton/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FunctionComponent, useState, useRef } from 'react';\nimport SchemaForm, { FormProps, FormValidation } from 'react-jsonschema-form';\nimport { Row, Col } from 'src/components';\nimport { Input, TextArea } from 'src/components/Input';\nimport { t, styled } from '@superset-ui/core';\nimport * as chrono from 'chrono-node';\nimport ModalTrigger, { ModalTriggerRef } from 'src/components/ModalTrigger';\nimport { Form, FormItem } from 'src/components/Form';\nimport Button from 'src/components/Button';\nimport getBootstrapData from 'src/utils/getBootstrapData';\n\nconst bootstrapData = getBootstrapData();\nconst scheduledQueriesConf = bootstrapData?.common?.conf?.SCHEDULED_QUERIES;\n\nconst validators = {\n  greater: (a: number, b: number) => a > b,\n  greater_equal: (a: number, b: number) => a >= b,\n  less: (a: number, b: number) => a < b,\n  less_equal: (a: number, b: number) => a <= b,\n};\n\nconst getJSONSchema = () => {\n  const jsonSchema = scheduledQueriesConf?.JSONSCHEMA;\n  // parse date-time into usable value (eg, 'today' => `new Date()`)\n  if (jsonSchema) {\n    Object.entries(jsonSchema.properties).forEach(\n      ([key, value]: [string, any]) => {\n        if (value.default && value.format === 'date-time') {\n          jsonSchema.properties[key] = {\n            ...value,\n            default: chrono.parseDate(value.default).toISOString(),\n          };\n        }\n      },\n    );\n    return jsonSchema;\n  }\n  return {};\n};\n\nconst getUISchema = () => scheduledQueriesConf?.UISCHEMA;\n\nconst getValidationRules = () => scheduledQueriesConf?.VALIDATION || [];\n\nconst getValidator = () => {\n  const rules: any = getValidationRules();\n  return (formData: Record<string, any>, errors: FormValidation) => {\n    rules.forEach((rule: any) => {\n      const test = validators[rule.name];\n      const args = rule.arguments.map((name: string) => formData[name]);\n      const container = rule.container || rule.arguments.slice(-1)[0];\n      if (!test(...args)) {\n        errors[container].addError(rule.message);\n      }\n    });\n    return errors;\n  };\n};\n\ninterface ScheduleQueryButtonProps {\n  defaultLabel?: string;\n  sql: string;\n  schema?: string;\n  dbId: number;\n  animation?: boolean;\n  onSchedule?: Function;\n  scheduleQueryWarning: string | null;\n  disabled: boolean;\n  tooltip: string;\n}\n\nconst StyledRow = styled(Row)`\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nexport const StyledButtonComponent = styled(Button)`\n  ${({ theme }) => `\n    background: none;\n    text-transform: none;\n    padding: 0px;\n    color: ${theme.colors.grayscale.dark2};\n    font-size: 14px;\n    font-weight: ${theme.typography.weights.normal};\n    margin-left: 0;\n    &:disabled {\n      margin-left: 0;\n      background: none;\n      color: ${theme.colors.grayscale.dark2};\n      &:hover {\n        background: none;\n        color: ${theme.colors.grayscale.dark2};\n      }\n    }\n  `}\n`;\n\nconst StyledJsonSchema = styled.div`\n  i.glyphicon {\n    display: none;\n  }\n  .btn-add::after {\n    content: '+';\n  }\n  .array-item-move-up::after {\n    content: '↑';\n  }\n  .array-item-move-down::after {\n    content: '↓';\n  }\n  .array-item-remove::after {\n    content: '-';\n  }\n`;\n\nconst ScheduleQueryButton: FunctionComponent<ScheduleQueryButtonProps> = ({\n  defaultLabel = t('Undefined'),\n  sql,\n  schema,\n  dbId,\n  onSchedule = () => {},\n  scheduleQueryWarning,\n  tooltip,\n  disabled = false,\n}) => {\n  const [description, setDescription] = useState('');\n  const [label, setLabel] = useState(defaultLabel);\n  const [showSchedule, setShowSchedule] = useState(false);\n  const saveModal: ModalTriggerRef | null = useRef() as ModalTriggerRef;\n\n  const onScheduleSubmit = ({\n    formData,\n  }: {\n    formData: Omit<FormProps<Record<string, any>>, 'schema'>;\n  }) => {\n    const query = {\n      label,\n      description,\n      db_id: dbId,\n      schema,\n      sql,\n      extra_json: JSON.stringify({ schedule_info: formData }),\n    };\n    onSchedule(query);\n    saveModal?.current?.close();\n  };\n\n  const renderModalBody = () => (\n    <Form layout=\"vertical\">\n      <StyledRow>\n        <Col xs={24}>\n          <FormItem label={t('Label')}>\n            <Input\n              type=\"text\"\n              placeholder={t('Label for your query')}\n              value={label}\n              onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                setLabel(event.target.value)\n              }\n            />\n          </FormItem>\n        </Col>\n      </StyledRow>\n      <StyledRow>\n        <Col xs={24}>\n          <FormItem label={t('Description')}>\n            <TextArea\n              rows={4}\n              placeholder={t('Write a description for your query')}\n              value={description}\n              onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) =>\n                setDescription(event.target.value)\n              }\n            />\n          </FormItem>\n        </Col>\n      </StyledRow>\n      <Row>\n        <Col xs={24}>\n          <StyledJsonSchema>\n            <SchemaForm\n              schema={getJSONSchema()}\n              uiSchema={getUISchema()}\n              onSubmit={onScheduleSubmit}\n              validate={getValidator()}\n            >\n              <Button\n                buttonStyle=\"primary\"\n                htmlType=\"submit\"\n                css={{ float: 'right' }}\n              >\n                {t('Submit')}\n              </Button>\n            </SchemaForm>\n          </StyledJsonSchema>\n        </Col>\n      </Row>\n      {scheduleQueryWarning && (\n        <Row>\n          <Col xs={24}>\n            <small>{scheduleQueryWarning}</small>\n          </Col>\n        </Row>\n      )}\n    </Form>\n  );\n\n  return (\n    <span className=\"ScheduleQueryButton\">\n      <ModalTrigger\n        ref={saveModal}\n        modalTitle={t('Schedule query')}\n        modalBody={renderModalBody()}\n        triggerNode={\n          <StyledButtonComponent\n            onClick={() => setShowSchedule(!showSchedule)}\n            buttonSize=\"small\"\n            buttonStyle=\"link\"\n            tooltip={tooltip}\n            disabled={disabled}\n          >\n            {t('Schedule')}\n          </StyledButtonComponent>\n        }\n      />\n    </span>\n  );\n};\n\nexport default ScheduleQueryButton;\n"]},"metadata":{},"sourceType":"module"}