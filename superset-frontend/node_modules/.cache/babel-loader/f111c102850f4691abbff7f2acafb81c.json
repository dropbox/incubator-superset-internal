{"ast":null,"code":"import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { SEPARATOR } from 'src/explore/components/controls/DateFilterControl/utils';\nimport { Input } from 'src/components/Input';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport DateFunctionTooltip from './DateFunctionTooltip';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nfunction getAdvancedRange(value) {\n  if (_includesInstanceProperty(value).call(value, SEPARATOR)) {\n    return value;\n  }\n  if (value.startsWith('Last')) {\n    return [value, ''].join(SEPARATOR);\n  }\n  if (value.startsWith('Next')) {\n    return ['', value].join(SEPARATOR);\n  }\n  return SEPARATOR;\n}\nexport function AdvancedFrame(props) {\n  const advancedRange = getAdvancedRange(props.value || '');\n  const [since, until] = advancedRange.split(SEPARATOR);\n  if (advancedRange !== props.value) {\n    props.onChange(getAdvancedRange(props.value || ''));\n  }\n  function onChange(control, value) {\n    if (control === 'since') {\n      props.onChange(`${value}${SEPARATOR}${until}`);\n    } else\n    {\n      props.onChange(`${since}${SEPARATOR}${value}`);\n    }\n  }\n  return ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(\"div\", { className: \"section-title\" },\n  t('Configure Advanced Time Range '),\n  ___EmotionJSX(DateFunctionTooltip, { placement: \"rightBottom\" },\n  ___EmotionJSX(\"i\", { className: \"fa fa-info-circle text-muted\" }))),\n\n\n  ___EmotionJSX(\"div\", { className: \"control-label\" },\n  t('START (INCLUSIVE)'), ' ',\n  ___EmotionJSX(InfoTooltipWithTrigger, { tooltip: t('Start date included in time range'), placement: \"right\" })),\n\n  ___EmotionJSX(Input, { key: \"since\", value: since, onChange: (e) => onChange('since', e.target.value) }),\n  ___EmotionJSX(\"div\", { className: \"control-label\" },\n  t('END (EXCLUSIVE)'), ' ',\n  ___EmotionJSX(InfoTooltipWithTrigger, { tooltip: t('End date excluded from time range'), placement: \"right\" })),\n\n  ___EmotionJSX(Input, { key: \"until\", value: until, onChange: (e) => onChange('until', e.target.value) }));\n\n}","map":{"version":3,"mappings":"iGAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,CAAT,QAAkB,mBAAlB;AACA,SAASC,SAAT,QAA0B,yDAA1B;AACA,SAASC,KAAT,QAAsB,sBAAtB;AACA,SAASC,sBAAT,QAAuC,6BAAvC;AAEA,OAAOC,mBAAP,MAAgC,uBAAhC,C;AAEA,SAASC,gBAAT,CAA0BC,KAA1B,EAAuC;EACrC,IAAI,+BAAK,MAAL,MAAK,EAAUL,SAAV,CAAT,EAA+B;IAC7B,OAAOK,KAAP;EACD;EACD,IAAIA,KAAK,CAACC,UAAN,CAAiB,MAAjB,CAAJ,EAA8B;IAC5B,OAAO,CAACD,KAAD,EAAQ,EAAR,EAAYE,IAAZ,CAAiBP,SAAjB,CAAP;EACD;EACD,IAAIK,KAAK,CAACC,UAAN,CAAiB,MAAjB,CAAJ,EAA8B;IAC5B,OAAO,CAAC,EAAD,EAAKD,KAAL,EAAYE,IAAZ,CAAiBP,SAAjB,CAAP;EACD;EACD,OAAOA,SAAP;AACD;AAED,OAAM,SAAUQ,aAAV,CAAwBC,KAAxB,EAAkD;EACtD,MAAMC,aAAa,GAAGN,gBAAgB,CAACK,KAAK,CAACJ,KAAN,IAAe,EAAhB,CAAtC;EACA,MAAM,CAACM,KAAD,EAAQC,KAAR,IAAiBF,aAAa,CAACG,KAAd,CAAoBb,SAApB,CAAvB;EACA,IAAIU,aAAa,KAAKD,KAAK,CAACJ,KAA5B,EAAmC;IACjCI,KAAK,CAACK,QAAN,CAAeV,gBAAgB,CAACK,KAAK,CAACJ,KAAN,IAAe,EAAhB,CAA/B;EACD;EAED,SAASS,QAAT,CAAkBC,OAAlB,EAA8CV,KAA9C,EAA2D;IACzD,IAAIU,OAAO,KAAK,OAAhB,EAAyB;MACvBN,KAAK,CAACK,QAAN,CAAe,GAAGT,KAAK,GAAGL,SAAS,GAAGY,KAAK,EAA3C;IACD,CAFD;IAEO;MACLH,KAAK,CAACK,QAAN,CAAe,GAAGH,KAAK,GAAGX,SAAS,GAAGK,KAAK,EAA3C;IACD;EACF;EAED,OACE;EACE,uBAAK,SAAS,EAAC,eAAf;EACGN,CAAC,CAAC,gCAAD,CADJ;EAEE,cAAC,mBAAD,IAAqB,SAAS,EAAC,aAA/B;EACE,qBAAG,SAAS,EAAC,8BAAb,GADF,CAFF,CADF;;;EAOE,uBAAK,SAAS,EAAC,eAAf;EACGA,CAAC,CAAC,mBAAD,CADJ,EAC2B,GAD3B;EAEE,cAAC,sBAAD,IACE,OAAO,EAAEA,CAAC,CAAC,mCAAD,CADZ,EAEE,SAAS,EAAC,OAFZ,GAFF,CAPF;;EAcE,cAAC,KAAD,IACE,GAAG,EAAC,OADN,EAEE,KAAK,EAAEY,KAFT,EAGE,QAAQ,EAAE,EAAC,KAAIG,QAAQ,CAAC,OAAD,EAAUE,CAAC,CAACC,MAAF,CAASZ,KAAnB,CAHzB,GAdF;EAmBE,uBAAK,SAAS,EAAC,eAAf;EACGN,CAAC,CAAC,iBAAD,CADJ,EACyB,GADzB;EAEE,cAAC,sBAAD,IACE,OAAO,EAAEA,CAAC,CAAC,mCAAD,CADZ,EAEE,SAAS,EAAC,OAFZ,GAFF,CAnBF;;EA0BE,cAAC,KAAD,IACE,GAAG,EAAC,OADN,EAEE,KAAK,EAAEa,KAFT,EAGE,QAAQ,EAAE,EAAC,KAAIE,QAAQ,CAAC,OAAD,EAAUE,CAAC,CAACC,MAAF,CAASZ,KAAnB,CAHzB,GA1BF,CADF;;AAkCD","names":["React","t","SEPARATOR","Input","InfoTooltipWithTrigger","DateFunctionTooltip","getAdvancedRange","value","startsWith","join","AdvancedFrame","props","advancedRange","since","until","split","onChange","control","e","target"],"sourceRoot":"","sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/src/explore/components/controls/DateFilterControl/components/AdvancedFrame.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { SEPARATOR } from 'src/explore/components/controls/DateFilterControl/utils';\nimport { Input } from 'src/components/Input';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport { FrameComponentProps } from 'src/explore/components/controls/DateFilterControl/types';\nimport DateFunctionTooltip from './DateFunctionTooltip';\n\nfunction getAdvancedRange(value: string): string {\n  if (value.includes(SEPARATOR)) {\n    return value;\n  }\n  if (value.startsWith('Last')) {\n    return [value, ''].join(SEPARATOR);\n  }\n  if (value.startsWith('Next')) {\n    return ['', value].join(SEPARATOR);\n  }\n  return SEPARATOR;\n}\n\nexport function AdvancedFrame(props: FrameComponentProps) {\n  const advancedRange = getAdvancedRange(props.value || '');\n  const [since, until] = advancedRange.split(SEPARATOR);\n  if (advancedRange !== props.value) {\n    props.onChange(getAdvancedRange(props.value || ''));\n  }\n\n  function onChange(control: 'since' | 'until', value: string) {\n    if (control === 'since') {\n      props.onChange(`${value}${SEPARATOR}${until}`);\n    } else {\n      props.onChange(`${since}${SEPARATOR}${value}`);\n    }\n  }\n\n  return (\n    <>\n      <div className=\"section-title\">\n        {t('Configure Advanced Time Range ')}\n        <DateFunctionTooltip placement=\"rightBottom\">\n          <i className=\"fa fa-info-circle text-muted\" />\n        </DateFunctionTooltip>\n      </div>\n      <div className=\"control-label\">\n        {t('START (INCLUSIVE)')}{' '}\n        <InfoTooltipWithTrigger\n          tooltip={t('Start date included in time range')}\n          placement=\"right\"\n        />\n      </div>\n      <Input\n        key=\"since\"\n        value={since}\n        onChange={e => onChange('since', e.target.value)}\n      />\n      <div className=\"control-label\">\n        {t('END (EXCLUSIVE)')}{' '}\n        <InfoTooltipWithTrigger\n          tooltip={t('End date excluded from time range')}\n          placement=\"right\"\n        />\n      </div>\n      <Input\n        key=\"until\"\n        value={until}\n        onChange={e => onChange('until', e.target.value)}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}