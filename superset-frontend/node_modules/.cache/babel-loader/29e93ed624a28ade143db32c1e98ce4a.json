{"ast":null,"code":"import _pt from \"prop-types\";\n\nfunction _extends() {_extends = Object.assign || function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}\n\nimport React from 'react';\nimport Legend from './Legend';\n\nvar formatZero = function formatZero(label) {\n  return label === 0 ? '0' : label || '';\n};\n\n/** Default transform implicitly assumes that Datum is of type number. */\nfunction defaultTransform(_ref) {\n  var labelDelimiter = _ref.labelDelimiter,\n  labelLower = _ref.labelLower,\n  labelUpper = _ref.labelUpper;\n  return function (_ref2) {\n    var scale = _ref2.scale,\n    labelFormat = _ref2.labelFormat;\n    var scaleRange = scale.range();\n    var scaleDomain = scale.domain();\n    return function (d, i) {\n      var _ref3 = scaleRange.length >= i ? scale.invertExtent(scaleRange[i]) : [undefined, undefined],\n      d0 = _ref3[0],\n      d1 = _ref3[1];\n\n      var delimiter = \" \" + labelDelimiter + \" \";\n      var text = '';\n      var value;\n\n      if (d0 == null && typeof d1 === 'number') {\n        // lower threshold e.g., [undefined, number]\n        delimiter = labelLower || delimiter;\n        value = d1 - 1;\n        text = \"\" + delimiter + formatZero(labelFormat(d1, i));\n      } else if (d0 != null && d1 != null) {\n        // threshold step\n        value = d;\n        text = \"\" + formatZero(labelFormat(d0, i)) + delimiter + formatZero(labelFormat(d1, i));\n      } else if (typeof d0 === 'number' && d1 == null) {\n        // upper threshold e.g., [number, undefined]\n        delimiter = labelUpper || delimiter;\n        value = d0 + scaleDomain[1]; // x0,x1 are from the domain, so the domain is numeric if d0 is\n\n        text = \"\" + delimiter + formatZero(labelFormat(d0, i));\n      }\n\n      return {\n        extent: [d0, d1],\n        value: scale(value || d),\n        text: text,\n        datum: d,\n        index: i };\n\n    };\n  };\n}\n\nexport default function Threshold(_ref4) {\n  var scale = _ref4.scale,\n  inputDomain = _ref4.domain,\n  _ref4$labelFormat = _ref4.labelFormat,\n  labelFormat = _ref4$labelFormat === void 0 ? function (d) {\n    return d;\n  } : _ref4$labelFormat,\n  inputLabelTransform = _ref4.labelTransform,\n  _ref4$labelDelimiter = _ref4.labelDelimiter,\n  labelDelimiter = _ref4$labelDelimiter === void 0 ? 'to' : _ref4$labelDelimiter,\n  _ref4$labelLower = _ref4.labelLower,\n  labelLower = _ref4$labelLower === void 0 ? 'Less than ' : _ref4$labelLower,\n  _ref4$labelUpper = _ref4.labelUpper,\n  labelUpper = _ref4$labelUpper === void 0 ? 'More than ' : _ref4$labelUpper,\n  restProps = _objectWithoutPropertiesLoose(_ref4, [\"scale\", \"domain\", \"labelFormat\", \"labelTransform\", \"labelDelimiter\", \"labelLower\", \"labelUpper\"]);\n\n  // d3 docs specify that for n values in a domain, there should be n+1 values in the range\n  // https://github.com/d3/d3-scale#threshold_domain\n  // therefore if a domain is not specified we transform the range into input values\n  // because it should contain more elements\n  var domain = inputDomain || scale.range().map(function (output) {\n    return scale.invertExtent(output)[0];\n  });\n  var labelTransform = inputLabelTransform || defaultTransform({\n    labelDelimiter: labelDelimiter,\n    labelLower: labelLower,\n    labelUpper: labelUpper });\n\n  return /*#__PURE__*/React.createElement(Legend, _extends({\n    scale: scale,\n    domain: domain,\n    labelFormat: labelFormat,\n    labelTransform: labelTransform },\n  restProps));\n}\nThreshold.propTypes = {\n  labelDelimiter: _pt.string,\n  labelLower: _pt.string,\n  labelUpper: _pt.string };","map":{"version":3,"names":["_pt","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","Legend","formatZero","label","defaultTransform","_ref","labelDelimiter","labelLower","labelUpper","_ref2","scale","labelFormat","scaleRange","range","scaleDomain","domain","d","_ref3","invertExtent","undefined","d0","d1","delimiter","text","value","extent","datum","index","Threshold","_ref4","inputDomain","_ref4$labelFormat","inputLabelTransform","labelTransform","_ref4$labelDelimiter","_ref4$labelLower","_ref4$labelUpper","restProps","map","output","createElement","propTypes","string"],"sources":["/Users/zhaorui/src/incubator-superset-internal/superset-frontend/plugins/legacy-plugin-chart-histogram/node_modules/@vx/legend/esm/legends/Threshold.js"],"sourcesContent":["import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from 'react';\nimport Legend from './Legend';\n\nvar formatZero = function formatZero(label) {\n  return label === 0 ? '0' : label || '';\n};\n\n/** Default transform implicitly assumes that Datum is of type number. */\nfunction defaultTransform(_ref) {\n  var labelDelimiter = _ref.labelDelimiter,\n      labelLower = _ref.labelLower,\n      labelUpper = _ref.labelUpper;\n  return function (_ref2) {\n    var scale = _ref2.scale,\n        labelFormat = _ref2.labelFormat;\n    var scaleRange = scale.range();\n    var scaleDomain = scale.domain();\n    return function (d, i) {\n      var _ref3 = scaleRange.length >= i ? scale.invertExtent(scaleRange[i]) : [undefined, undefined],\n          d0 = _ref3[0],\n          d1 = _ref3[1];\n\n      var delimiter = \" \" + labelDelimiter + \" \";\n      var text = '';\n      var value;\n\n      if (d0 == null && typeof d1 === 'number') {\n        // lower threshold e.g., [undefined, number]\n        delimiter = labelLower || delimiter;\n        value = d1 - 1;\n        text = \"\" + delimiter + formatZero(labelFormat(d1, i));\n      } else if (d0 != null && d1 != null) {\n        // threshold step\n        value = d;\n        text = \"\" + formatZero(labelFormat(d0, i)) + delimiter + formatZero(labelFormat(d1, i));\n      } else if (typeof d0 === 'number' && d1 == null) {\n        // upper threshold e.g., [number, undefined]\n        delimiter = labelUpper || delimiter;\n        value = d0 + scaleDomain[1]; // x0,x1 are from the domain, so the domain is numeric if d0 is\n\n        text = \"\" + delimiter + formatZero(labelFormat(d0, i));\n      }\n\n      return {\n        extent: [d0, d1],\n        value: scale(value || d),\n        text: text,\n        datum: d,\n        index: i\n      };\n    };\n  };\n}\n\nexport default function Threshold(_ref4) {\n  var scale = _ref4.scale,\n      inputDomain = _ref4.domain,\n      _ref4$labelFormat = _ref4.labelFormat,\n      labelFormat = _ref4$labelFormat === void 0 ? function (d) {\n    return d;\n  } : _ref4$labelFormat,\n      inputLabelTransform = _ref4.labelTransform,\n      _ref4$labelDelimiter = _ref4.labelDelimiter,\n      labelDelimiter = _ref4$labelDelimiter === void 0 ? 'to' : _ref4$labelDelimiter,\n      _ref4$labelLower = _ref4.labelLower,\n      labelLower = _ref4$labelLower === void 0 ? 'Less than ' : _ref4$labelLower,\n      _ref4$labelUpper = _ref4.labelUpper,\n      labelUpper = _ref4$labelUpper === void 0 ? 'More than ' : _ref4$labelUpper,\n      restProps = _objectWithoutPropertiesLoose(_ref4, [\"scale\", \"domain\", \"labelFormat\", \"labelTransform\", \"labelDelimiter\", \"labelLower\", \"labelUpper\"]);\n\n  // d3 docs specify that for n values in a domain, there should be n+1 values in the range\n  // https://github.com/d3/d3-scale#threshold_domain\n  // therefore if a domain is not specified we transform the range into input values\n  // because it should contain more elements\n  var domain = inputDomain || scale.range().map(function (output) {\n    return scale.invertExtent(output)[0];\n  });\n  var labelTransform = inputLabelTransform || defaultTransform({\n    labelDelimiter: labelDelimiter,\n    labelLower: labelLower,\n    labelUpper: labelUpper\n  });\n  return /*#__PURE__*/React.createElement(Legend, _extends({\n    scale: scale,\n    domain: domain,\n    labelFormat: labelFormat,\n    labelTransform: labelTransform\n  }, restProps));\n}\nThreshold.propTypes = {\n  labelDelimiter: _pt.string,\n  labelLower: _pt.string,\n  labelUpper: _pt.string\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}