{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { styled, css, useTheme } from '@superset-ui/core';\n\nimport { Global } from '@emotion/react';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { Row, Col, Grid } from 'src/components';\nimport { MainNav as DropdownMenu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Link } from 'react-router-dom';\nimport { GenericLink } from 'src/components/GenericLink/GenericLink';\nimport Icons from 'src/components/Icons';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport { URL_PARAMS } from 'src/constants';\nimport RightMenu from './RightMenu';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst StyledHeader = styled.header`\n  ${(_ref) => {let { theme } = _ref;return `\n      background-color: ${theme.colors.grayscale.light5};\n      margin-bottom: 2px;\n      z-index: 10;\n\n      &:nth-last-of-type(2) nav {\n        margin-bottom: 2px;\n      }\n      .caret {\n        display: none;\n      }\n      .navbar-brand {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        /* must be exactly the height of the Antd navbar */\n        min-height: 50px;\n        padding: ${theme.gridUnit}px\n          ${theme.gridUnit * 2}px\n          ${theme.gridUnit}px\n          ${theme.gridUnit * 4}px;\n        max-width: ${theme.gridUnit * theme.brandIconMaxWidth}px;\n        img {\n          height: 100%;\n          object-fit: contain;\n        }\n      }\n      .navbar-brand-text {\n        border-left: 1px solid ${theme.colors.grayscale.light2};\n        border-right: 1px solid ${theme.colors.grayscale.light2};\n        height: 100%;\n        color: ${theme.colors.grayscale.dark1};\n        padding-left: ${theme.gridUnit * 4}px;\n        padding-right: ${theme.gridUnit * 4}px;\n        margin-right: ${theme.gridUnit * 6}px;\n        font-size: ${theme.gridUnit * 4}px;\n        float: left;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n\n        span {\n          max-width: ${theme.gridUnit * 58}px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        @media (max-width: 1127px) {\n          display: none;\n        }\n      }\n      .main-nav .ant-menu-submenu-title > svg {\n        top: ${theme.gridUnit * 5.25}px;\n      }\n      @media (max-width: 767px) {\n        .navbar-brand {\n          float: none;\n        }\n      }\n      .ant-menu-horizontal .ant-menu-item {\n        height: 100%;\n        line-height: inherit;\n      }\n      .ant-menu > .ant-menu-item > a {\n        padding: ${theme.gridUnit * 4}px;\n      }\n      @media (max-width: 767px) {\n        .ant-menu-item {\n          padding: 0 ${theme.gridUnit * 6}px 0\n            ${theme.gridUnit * 3}px !important;\n        }\n        .ant-menu > .ant-menu-item > a {\n          padding: 0px;\n        }\n        .main-nav .ant-menu-submenu-title > svg:nth-of-type(1) {\n          display: none;\n        }\n        .ant-menu-item-active > a {\n          &:hover {\n            color: ${theme.colors.primary.base} !important;\n            background-color: transparent !important;\n          }\n        }\n      }\n      .ant-menu-item a {\n        &:hover {\n          color: ${theme.colors.grayscale.dark1};\n          background-color: ${theme.colors.primary.light5};\n          border-bottom: none;\n          margin: 0;\n          &:after {\n            opacity: 1;\n            width: 100%;\n          }\n        }\n      }\n  `;}}\n`;\nconst globalStyles = (theme) => css`\n  .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light.ant-menu-submenu-placement-bottomLeft {\n    border-radius: 0px;\n  }\n  .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light {\n    border-radius: 0px;\n  }\n  .ant-menu-vertical > .ant-menu-submenu.data-menu > .ant-menu-submenu-title {\n    height: 28px;\n    i {\n      padding-right: ${theme.gridUnit * 2}px;\n      margin-left: ${theme.gridUnit * 1.75}px;\n    }\n  }\n`;\nconst { SubMenu } = DropdownMenu;\nconst { useBreakpoint } = Grid;\nexport function Menu(_ref2) {let { data: { menu, brand, navbar_right: navbarRight, settings, environment_tag: environmentTag }, isFrontendRoute = () => false } = _ref2;\n  const [showMenu, setMenu] = useState('horizontal');\n  const screens = useBreakpoint();\n  const uiConfig = useUiConfig();\n  const theme = useTheme();\n  useEffect(() => {\n    function handleResize() {\n      if (window.innerWidth <= 767) {\n        setMenu('inline');\n      } else\n\n      setMenu('horizontal');\n    }\n    handleResize();\n    const windowResize = _debounce(() => handleResize(), 10);\n    window.addEventListener('resize', windowResize);\n    return () => window.removeEventListener('resize', windowResize);\n  }, []);\n  const standalone = getUrlParam(URL_PARAMS.standalone);\n  if (standalone || uiConfig.hideNav)\n  return ___EmotionJSX(React.Fragment, null);\n  const renderSubMenu = (_ref3) => {let { label, childs, url, index, isFrontendRoute } = _ref3;\n    if (url && isFrontendRoute) {\n      return ___EmotionJSX(DropdownMenu.Item, { key: label, role: \"presentation\" },\n      ___EmotionJSX(Link, { role: \"button\", to: url },\n      label));\n\n\n    }\n    if (url) {\n      return ___EmotionJSX(DropdownMenu.Item, { key: label },\n      ___EmotionJSX(\"a\", { href: url }, label));\n\n    }\n    return ___EmotionJSX(SubMenu, { key: index, title: label, icon: showMenu === 'inline' ? ___EmotionJSX(React.Fragment, null) : ___EmotionJSX(Icons.TriangleDown, null) },\n    childs == null ? void 0 : childs.map((child, index1) => {\n      if (typeof child === 'string' && child === '-' && label !== 'Data') {\n        return ___EmotionJSX(DropdownMenu.Divider, { key: `$${index1}` });\n      }\n      if (typeof child !== 'string') {\n        return ___EmotionJSX(DropdownMenu.Item, { key: `${child.label}` },\n        child.isFrontendRoute ? ___EmotionJSX(Link, { to: child.url || '' }, child.label) : ___EmotionJSX(\"a\", { href: child.url }, child.label));\n\n      }\n      return null;\n    }));\n\n  };\n  return ___EmotionJSX(StyledHeader, { className: \"top\", id: \"main-menu\", role: \"navigation\" },\n  ___EmotionJSX(Global, { styles: globalStyles(theme) }),\n  ___EmotionJSX(Row, null,\n  ___EmotionJSX(Col, { md: 16, xs: 24 },\n  ___EmotionJSX(Tooltip, { id: \"brand-tooltip\", placement: \"bottomLeft\", title: brand.tooltip, arrowPointAtCenter: true },\n  isFrontendRoute(window.location.pathname) ? ___EmotionJSX(GenericLink, { className: \"navbar-brand\", to: brand.path },\n  ___EmotionJSX(\"img\", { src: brand.icon, alt: brand.alt })) :\n  ___EmotionJSX(\"a\", { className: \"navbar-brand\", href: brand.path },\n  ___EmotionJSX(\"img\", { src: brand.icon, alt: brand.alt }))),\n\n\n  brand.text && ___EmotionJSX(\"div\", { className: \"navbar-brand-text\" },\n  ___EmotionJSX(\"span\", null, brand.text)),\n\n  ___EmotionJSX(DropdownMenu, { mode: showMenu, \"data-test\": \"navbar-top\", className: \"main-nav\" },\n  menu.map((item, index) => {var _item$childs;\n    const props = {\n      index,\n      ...item,\n      isFrontendRoute: isFrontendRoute(item.url),\n      childs: (_item$childs = item.childs) == null ? void 0 : _item$childs.map((c) => {\n        if (typeof c === 'string') {\n          return c;\n        }\n        return {\n          ...c,\n          isFrontendRoute: isFrontendRoute(c.url) };\n\n      }) };\n\n    return renderSubMenu(props);\n  }))),\n\n\n  ___EmotionJSX(Col, { md: 8, xs: 24 },\n  ___EmotionJSX(RightMenu, { align: screens.md ? 'flex-end' : 'flex-start', settings: settings, navbarRight: navbarRight, isFrontendRoute: isFrontendRoute, environmentTag: environmentTag }))));\n\n\n\n}\n// transform the menu data to reorganize components\n__signature__(Menu, \"useState{[showMenu, setMenu]('horizontal')}\\nuseBreakpoint{screens}\\nuseUiConfig{uiConfig}\\nuseTheme{theme}\\nuseEffect{}\", () => [useBreakpoint, useUiConfig, useTheme]);export default function MenuWrapper(_ref4) {let { data, ...rest } = _ref4;\n  const newMenuData = {\n    ...data };\n\n  // Menu items that should go into settings dropdown\n  const settingsMenus = {\n    Data: true,\n    Security: true,\n    Manage: true };\n\n  // Cycle through menu.menu to build out cleanedMenu and settings\n  const cleanedMenu = [];\n  const settings = [];\n  newMenuData.menu.forEach((item) => {\n    if (!item) {\n      return;\n    }\n    const children = [];\n    const newItem = {\n      ...item };\n\n    // Filter childs\n    if (item.childs) {\n      item.childs.forEach((child) => {\n        if (typeof child === 'string') {\n          children.push(child);\n        } else\n        if (child.label) {\n          children.push(child);\n        }\n      });\n      newItem.childs = children;\n    }\n    if (!settingsMenus.hasOwnProperty(item.name)) {\n      cleanedMenu.push(newItem);\n    } else\n    {\n      settings.push(newItem);\n    }\n  });\n  newMenuData.menu = cleanedMenu;\n  newMenuData.settings = settings;\n  return ___EmotionJSX(Menu, _extends({ data: newMenuData }, rest));\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledHeader, \"StyledHeader\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/Menu.tsx\");reactHotLoader.register(globalStyles, \"globalStyles\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/Menu.tsx\");reactHotLoader.register(SubMenu, \"SubMenu\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/Menu.tsx\");reactHotLoader.register(useBreakpoint, \"useBreakpoint\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/Menu.tsx\");reactHotLoader.register(Menu, \"Menu\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/Menu.tsx\");reactHotLoader.register(MenuWrapper, \"MenuWrapper\", \"/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/Menu.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"mappings":"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","names":["React","useState","useEffect","styled","css","useTheme","Global","getUrlParam","Row","Col","Grid","MainNav","DropdownMenu","Tooltip","Link","GenericLink","Icons","useUiConfig","URL_PARAMS","RightMenu","StyledHeader","header","theme","colors","grayscale","light5","gridUnit","brandIconMaxWidth","light2","dark1","primary","base","globalStyles","SubMenu","useBreakpoint","Menu","data","menu","brand","navbar_right","navbarRight","settings","environment_tag","environmentTag","isFrontendRoute","showMenu","setMenu","screens","uiConfig","handleResize","window","innerWidth","windowResize","addEventListener","removeEventListener","standalone","hideNav","renderSubMenu","label","childs","url","index","map","child","index1","tooltip","location","pathname","path","icon","alt","text","item","props","c","md","MenuWrapper","rest","newMenuData","settingsMenus","Data","Security","Manage","cleanedMenu","forEach","children","newItem","push","hasOwnProperty","name"],"sourceRoot":"","sources":["/Users/bogdankyryliuk/code/opensource/superset/superset-frontend/src/features/home/Menu.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { styled, css, useTheme, SupersetTheme } from '@superset-ui/core';\nimport { debounce } from 'lodash';\nimport { Global } from '@emotion/react';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { Row, Col, Grid } from 'src/components';\nimport { MainNav as DropdownMenu, MenuMode } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Link } from 'react-router-dom';\nimport { GenericLink } from 'src/components/GenericLink/GenericLink';\nimport Icons from 'src/components/Icons';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport { URL_PARAMS } from 'src/constants';\nimport {\n  MenuObjectChildProps,\n  MenuObjectProps,\n  MenuData,\n} from 'src/types/bootstrapTypes';\nimport RightMenu from './RightMenu';\n\ninterface MenuProps {\n  data: MenuData;\n  isFrontendRoute?: (path?: string) => boolean;\n}\n\nconst StyledHeader = styled.header`\n  ${({ theme }) => `\n      background-color: ${theme.colors.grayscale.light5};\n      margin-bottom: 2px;\n      z-index: 10;\n\n      &:nth-last-of-type(2) nav {\n        margin-bottom: 2px;\n      }\n      .caret {\n        display: none;\n      }\n      .navbar-brand {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        /* must be exactly the height of the Antd navbar */\n        min-height: 50px;\n        padding: ${theme.gridUnit}px\n          ${theme.gridUnit * 2}px\n          ${theme.gridUnit}px\n          ${theme.gridUnit * 4}px;\n        max-width: ${theme.gridUnit * theme.brandIconMaxWidth}px;\n        img {\n          height: 100%;\n          object-fit: contain;\n        }\n      }\n      .navbar-brand-text {\n        border-left: 1px solid ${theme.colors.grayscale.light2};\n        border-right: 1px solid ${theme.colors.grayscale.light2};\n        height: 100%;\n        color: ${theme.colors.grayscale.dark1};\n        padding-left: ${theme.gridUnit * 4}px;\n        padding-right: ${theme.gridUnit * 4}px;\n        margin-right: ${theme.gridUnit * 6}px;\n        font-size: ${theme.gridUnit * 4}px;\n        float: left;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n\n        span {\n          max-width: ${theme.gridUnit * 58}px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        @media (max-width: 1127px) {\n          display: none;\n        }\n      }\n      .main-nav .ant-menu-submenu-title > svg {\n        top: ${theme.gridUnit * 5.25}px;\n      }\n      @media (max-width: 767px) {\n        .navbar-brand {\n          float: none;\n        }\n      }\n      .ant-menu-horizontal .ant-menu-item {\n        height: 100%;\n        line-height: inherit;\n      }\n      .ant-menu > .ant-menu-item > a {\n        padding: ${theme.gridUnit * 4}px;\n      }\n      @media (max-width: 767px) {\n        .ant-menu-item {\n          padding: 0 ${theme.gridUnit * 6}px 0\n            ${theme.gridUnit * 3}px !important;\n        }\n        .ant-menu > .ant-menu-item > a {\n          padding: 0px;\n        }\n        .main-nav .ant-menu-submenu-title > svg:nth-of-type(1) {\n          display: none;\n        }\n        .ant-menu-item-active > a {\n          &:hover {\n            color: ${theme.colors.primary.base} !important;\n            background-color: transparent !important;\n          }\n        }\n      }\n      .ant-menu-item a {\n        &:hover {\n          color: ${theme.colors.grayscale.dark1};\n          background-color: ${theme.colors.primary.light5};\n          border-bottom: none;\n          margin: 0;\n          &:after {\n            opacity: 1;\n            width: 100%;\n          }\n        }\n      }\n  `}\n`;\nconst globalStyles = (theme: SupersetTheme) => css`\n  .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light.ant-menu-submenu-placement-bottomLeft {\n    border-radius: 0px;\n  }\n  .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light {\n    border-radius: 0px;\n  }\n  .ant-menu-vertical > .ant-menu-submenu.data-menu > .ant-menu-submenu-title {\n    height: 28px;\n    i {\n      padding-right: ${theme.gridUnit * 2}px;\n      margin-left: ${theme.gridUnit * 1.75}px;\n    }\n  }\n`;\nconst { SubMenu } = DropdownMenu;\n\nconst { useBreakpoint } = Grid;\n\nexport function Menu({\n  data: {\n    menu,\n    brand,\n    navbar_right: navbarRight,\n    settings,\n    environment_tag: environmentTag,\n  },\n  isFrontendRoute = () => false,\n}: MenuProps) {\n  const [showMenu, setMenu] = useState<MenuMode>('horizontal');\n  const screens = useBreakpoint();\n  const uiConfig = useUiConfig();\n  const theme = useTheme();\n\n  useEffect(() => {\n    function handleResize() {\n      if (window.innerWidth <= 767) {\n        setMenu('inline');\n      } else setMenu('horizontal');\n    }\n    handleResize();\n    const windowResize = debounce(() => handleResize(), 10);\n    window.addEventListener('resize', windowResize);\n    return () => window.removeEventListener('resize', windowResize);\n  }, []);\n\n  const standalone = getUrlParam(URL_PARAMS.standalone);\n  if (standalone || uiConfig.hideNav) return <></>;\n\n  const renderSubMenu = ({\n    label,\n    childs,\n    url,\n    index,\n    isFrontendRoute,\n  }: MenuObjectProps) => {\n    if (url && isFrontendRoute) {\n      return (\n        <DropdownMenu.Item key={label} role=\"presentation\">\n          <Link role=\"button\" to={url}>\n            {label}\n          </Link>\n        </DropdownMenu.Item>\n      );\n    }\n    if (url) {\n      return (\n        <DropdownMenu.Item key={label}>\n          <a href={url}>{label}</a>\n        </DropdownMenu.Item>\n      );\n    }\n    return (\n      <SubMenu\n        key={index}\n        title={label}\n        icon={showMenu === 'inline' ? <></> : <Icons.TriangleDown />}\n      >\n        {childs?.map((child: MenuObjectChildProps | string, index1: number) => {\n          if (typeof child === 'string' && child === '-' && label !== 'Data') {\n            return <DropdownMenu.Divider key={`$${index1}`} />;\n          }\n          if (typeof child !== 'string') {\n            return (\n              <DropdownMenu.Item key={`${child.label}`}>\n                {child.isFrontendRoute ? (\n                  <Link to={child.url || ''}>{child.label}</Link>\n                ) : (\n                  <a href={child.url}>{child.label}</a>\n                )}\n              </DropdownMenu.Item>\n            );\n          }\n          return null;\n        })}\n      </SubMenu>\n    );\n  };\n  return (\n    <StyledHeader className=\"top\" id=\"main-menu\" role=\"navigation\">\n      <Global styles={globalStyles(theme)} />\n      <Row>\n        <Col md={16} xs={24}>\n          <Tooltip\n            id=\"brand-tooltip\"\n            placement=\"bottomLeft\"\n            title={brand.tooltip}\n            arrowPointAtCenter\n          >\n            {isFrontendRoute(window.location.pathname) ? (\n              <GenericLink className=\"navbar-brand\" to={brand.path}>\n                <img src={brand.icon} alt={brand.alt} />\n              </GenericLink>\n            ) : (\n              <a className=\"navbar-brand\" href={brand.path}>\n                <img src={brand.icon} alt={brand.alt} />\n              </a>\n            )}\n          </Tooltip>\n          {brand.text && (\n            <div className=\"navbar-brand-text\">\n              <span>{brand.text}</span>\n            </div>\n          )}\n          <DropdownMenu\n            mode={showMenu}\n            data-test=\"navbar-top\"\n            className=\"main-nav\"\n          >\n            {menu.map((item, index) => {\n              const props = {\n                index,\n                ...item,\n                isFrontendRoute: isFrontendRoute(item.url),\n                childs: item.childs?.map(c => {\n                  if (typeof c === 'string') {\n                    return c;\n                  }\n\n                  return {\n                    ...c,\n                    isFrontendRoute: isFrontendRoute(c.url),\n                  };\n                }),\n              };\n\n              return renderSubMenu(props);\n            })}\n          </DropdownMenu>\n        </Col>\n        <Col md={8} xs={24}>\n          <RightMenu\n            align={screens.md ? 'flex-end' : 'flex-start'}\n            settings={settings}\n            navbarRight={navbarRight}\n            isFrontendRoute={isFrontendRoute}\n            environmentTag={environmentTag}\n          />\n        </Col>\n      </Row>\n    </StyledHeader>\n  );\n}\n\n// transform the menu data to reorganize components\nexport default function MenuWrapper({ data, ...rest }: MenuProps) {\n  const newMenuData = {\n    ...data,\n  };\n  // Menu items that should go into settings dropdown\n  const settingsMenus = {\n    Data: true,\n    Security: true,\n    Manage: true,\n  };\n\n  // Cycle through menu.menu to build out cleanedMenu and settings\n  const cleanedMenu: MenuObjectProps[] = [];\n  const settings: MenuObjectProps[] = [];\n  newMenuData.menu.forEach((item: any) => {\n    if (!item) {\n      return;\n    }\n\n    const children: (MenuObjectProps | string)[] = [];\n    const newItem = {\n      ...item,\n    };\n\n    // Filter childs\n    if (item.childs) {\n      item.childs.forEach((child: MenuObjectChildProps | string) => {\n        if (typeof child === 'string') {\n          children.push(child);\n        } else if ((child as MenuObjectChildProps).label) {\n          children.push(child);\n        }\n      });\n\n      newItem.childs = children;\n    }\n\n    if (!settingsMenus.hasOwnProperty(item.name)) {\n      cleanedMenu.push(newItem);\n    } else {\n      settings.push(newItem);\n    }\n  });\n\n  newMenuData.menu = cleanedMenu;\n  newMenuData.settings = settings;\n\n  return <Menu data={newMenuData} {...rest} />;\n}\n"]},"metadata":{},"sourceType":"module"}