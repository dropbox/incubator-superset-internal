!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("reduce-css-calc")):"function"==typeof define&&define.amd?define(["exports","react","reduce-css-calc"],t):t(e.vx=e.vx||{},e.React,null)}(this,function(e,t,w){"use strict";var O="default"in t?t.default:t;w=w&&w.hasOwnProperty("default")?w.default:w;var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e};var h=o,f=function(e){};"production"!==process.env.NODE_ENV&&(f=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")});var v=function(e,t,r,n,o,i,a,u){if(f(t),!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,a,u],l=0;(s=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}},i=h;if("production"!==process.env.NODE_ENV){i=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var r=arguments.length,n=Array(2<r?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];(function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0,i="Warning: "+e.replace(/%s/g,function(){return r[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}}).apply(void 0,[t].concat(n))}}}var b=i,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var g=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in r=Object(arguments[i]))c.call(r,a)&&(o[a]=r[a]);if(s){n=s(r);for(var u=0;u<n.length;u++)l.call(r,n[u])&&(o[n[u]]=r[n[u]])}}return o},m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";if("production"!==process.env.NODE_ENV)var p=v,d=b,y=m,_={};var a,j=function(e,t,r,n,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(e.hasOwnProperty(i)){var a;try{p("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",n||"React class",r,i,typeof e[i]),a=e[i](t,i,n,r,null,y)}catch(e){a=e}if(d(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",r,i,typeof a),a instanceof Error&&!(a.message in _)){_[a.message]=!0;var u=o?o():"";d(!1,"Failed %s type: %s%s",r,a.message,null!=u?u:"")}}},u=function(u,f){var i="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";var p="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:r(h.thatReturnsNull),arrayOf:function(c){return r(function(e,t,r,n,o){if("function"!=typeof c)return new d("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i)){var a=y(i);return new d("Invalid "+n+" `"+o+"` of type `"+a+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<i.length;u++){var s=c(i,u,r,n,o+"["+u+"]",m);if(s instanceof Error)return s}return null})},element:r(function(e,t,r,n,o){var i=e[t];if(!u(i)){var a=y(i);return new d("Invalid "+n+" `"+o+"` of type `"+a+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}),instanceOf:function(u){return r(function(e,t,r,n,o){if(!(e[t]instanceof u)){var i=u.name||p,a=function(e){if(!e.constructor||!e.constructor.name)return p;return e.constructor.name}(e[t]);return new d("Invalid "+n+" `"+o+"` of type `"+a+"` supplied to `"+r+"`, expected instance of `"+i+"`.")}return null})},node:r(function(e,t,r,n,o){return s(e[t])?null:new d("Invalid "+n+" `"+o+"` supplied to `"+r+"`, expected a ReactNode.")}),objectOf:function(c){return r(function(e,t,r,n,o){if("function"!=typeof c)return new d("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var i=e[t],a=y(i);if("object"!==a)return new d("Invalid "+n+" `"+o+"` of type `"+a+"` supplied to `"+r+"`, expected an object.");for(var u in i)if(i.hasOwnProperty(u)){var s=c(i,u,r,n,o+"."+u,m);if(s instanceof Error)return s}return null})},oneOf:function(s){if(!Array.isArray(s))return"production"!==process.env.NODE_ENV&&b(!1,"Invalid argument supplied to oneOf, expected an instance of array."),h.thatReturnsNull;return r(function(e,t,r,n,o){for(var i=e[t],a=0;a<s.length;a++)if(c(i,s[a]))return null;var u=JSON.stringify(s);return new d("Invalid "+n+" `"+o+"` of value `"+i+"` supplied to `"+r+"`, expected one of "+u+".")})},oneOfType:function(u){if(!Array.isArray(u))return"production"!==process.env.NODE_ENV&&b(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),h.thatReturnsNull;for(var e=0;e<u.length;e++){var t=u[e];if("function"!=typeof t)return b(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",n(t),e),h.thatReturnsNull}return r(function(e,t,r,n,o){for(var i=0;i<u.length;i++){var a=u[i];if(null==a(e,t,r,n,o,m))return null}return new d("Invalid "+n+" `"+o+"` supplied to `"+r+"`.")})},shape:function(l){return r(function(e,t,r,n,o){var i=e[t],a=y(i);if("object"!==a)return new d("Invalid "+n+" `"+o+"` of type `"+a+"` supplied to `"+r+"`, expected `object`.");for(var u in l){var s=l[u];if(s){var c=s(i,u,r,n,o+"."+u,m);if(c)return c}}return null})},exact:function(f){return r(function(e,t,r,n,o){var i=e[t],a=y(i);if("object"!==a)return new d("Invalid "+n+" `"+o+"` of type `"+a+"` supplied to `"+r+"`, expected `object`.");var u=g({},e[t],f);for(var s in u){var c=f[s];if(!c)return new d("Invalid "+n+" `"+o+"` key `"+s+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(f),null,"  "));var l=c(i,s,r,n,o+"."+s,m);if(l)return l}return null})}};function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){this.message=e,this.stack=""}function r(s){if("production"!==process.env.NODE_ENV)var c={},l=0;function e(e,t,r,n,o,i,a){if(n=n||p,i=i||r,a!==m)if(f)v(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var u=n+":"+r;!c[u]&&l<3&&(b(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",i,n),c[u]=!0,l++)}return null==t[r]?e?null===t[r]?new d("The "+o+" `"+i+"` is marked as required in `"+n+"`, but its value is `null`."):new d("The "+o+" `"+i+"` is marked as required in `"+n+"`, but its value is `undefined`."):null:s(t,r,n,o,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(u){return r(function(e,t,r,n,o,i){var a=e[t];return y(a)!==u?new d("Invalid "+n+" `"+o+"` of type `"+l(a)+"` supplied to `"+r+"`, expected `"+u+"`."):null})}function s(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(s);if(null===e||u(e))return!0;var t=function(e){var t=e&&(i&&e[i]||e[a]);if("function"==typeof t)return t}(e);if(!t)return!1;var r,n=t.call(e);if(t!==e.entries){for(;!(r=n.next()).done;)if(!s(r.value))return!1}else for(;!(r=n.next()).done;){var o=r.value;if(o&&!s(o[1]))return!1}return!0;default:return!1}}function y(e){var t,r=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(t=e,"symbol"===r||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol?"symbol":r)}function l(e){if(null==e)return""+e;var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function n(e){var t=l(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return d.prototype=Error.prototype,e.checkPropTypes=j,e.PropTypes=e},x=(function(e){if("production"!==process.env.NODE_ENV){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=u(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},!0)}else e.exports=function(){function e(e,t,r,n,o,i){i!==m&&v(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=h,r.PropTypes=r}()}(a={exports:{}},a.exports),a.exports),E="object"==typeof r&&r&&r.Object===Object&&r,T="object"==typeof self&&self&&self.Object===Object&&self,P=E||T||Function("return this")(),S=P.Symbol,k=Object.prototype,N=k.hasOwnProperty,R=k.toString,A=S?S.toStringTag:void 0;var I=function(e){var t=N.call(e,A),r=e[A];try{e[A]=void 0}catch(e){}var n=R.call(e);return t?e[A]=r:delete e[A],n},W=Object.prototype.toString;var C=function(e){return W.call(e)},F=S?S.toStringTag:void 0;var z=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":F&&F in Object(e)?I(e):C(e)};var B=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var D,L=function(e){if(!B(e))return!1;var t=z(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},q=P["__core-js_shared__"],V=(D=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"";var $=function(e){return!!V&&V in e},H=Function.prototype.toString;var J=function(e){if(null!=e){try{return H.call(e)}catch(e){}try{return e+""}catch(e){}}return""},M=/^\[object .+?Constructor\]$/,U=Function.prototype,Y=Object.prototype,G=U.toString,K=Y.hasOwnProperty,Q=RegExp("^"+G.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var X=function(e){return!(!B(e)||$(e))&&(L(e)?Q:M).test(J(e))};var Z=function(e,t){return null==e?void 0:e[t]};var ee=function(e,t){var r=Z(e,t);return X(r)?r:void 0},te=ee(Object,"create");var re=function(){this.__data__=te?te(null):{},this.size=0};var ne=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},oe=Object.prototype.hasOwnProperty;var ie=function(e){var t=this.__data__;if(te){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return oe.call(t,e)?t[e]:void 0},ae=Object.prototype.hasOwnProperty;var ue=function(e){var t=this.__data__;return te?void 0!==t[e]:ae.call(t,e)};var se=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this};function ce(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ce.prototype.clear=re,ce.prototype.delete=ne,ce.prototype.get=ie,ce.prototype.has=ue,ce.prototype.set=se;var le=ce;var fe=function(){this.__data__=[],this.size=0};var pe=function(e,t){return e===t||e!=e&&t!=t};var de=function(e,t){for(var r=e.length;r--;)if(pe(e[r][0],t))return r;return-1},ye=Array.prototype.splice;var he=function(e){var t=this.__data__,r=de(t,e);return!(r<0||(r==t.length-1?t.pop():ye.call(t,r,1),--this.size,0))};var ve=function(e){var t=this.__data__,r=de(t,e);return r<0?void 0:t[r][1]};var be=function(e){return-1<de(this.__data__,e)};var ge=function(e,t){var r=this.__data__,n=de(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function me(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}me.prototype.clear=fe,me.prototype.delete=he,me.prototype.get=ve,me.prototype.has=be,me.prototype.set=ge;var _e=me,we=ee(P,"Map");var Oe=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var je=function(e,t){var r=e.__data__;return Oe(t)?r["string"==typeof t?"string":"hash"]:r.map};var xe=function(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t};var Ee=function(e){return je(this,e).get(e)};var Te=function(e){return je(this,e).has(e)};var Pe=function(e,t){var r=je(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Se(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Se.prototype.clear=function(){this.size=0,this.__data__={hash:new le,map:new(we||_e),string:new le}},Se.prototype.delete=xe,Se.prototype.get=Ee,Se.prototype.has=Te,Se.prototype.set=Pe;var ke=Se,Ne="Expected a function";function Re(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(Ne);var a=function(){var e=arguments,t=i?i.apply(this,e):e[0],r=a.cache;if(r.has(t))return r.get(t);var n=o.apply(this,e);return a.cache=r.set(t,n)||r,n};return a.cache=new(Re.Cache||ke),a}Re.Cache=ke;var Ae="__react_svg_text_measurement_id";var Ie=Re(function(e,t){try{var r=document.getElementById(Ae);if(!r){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.width=0,n.style.height=0,n.style.position="absolute",n.style.top="-100%",n.style.left="-100%",(r=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id",Ae),n.appendChild(r),document.body.appendChild(n)}return Object.assign(r.style,t),r.textContent=e,r.getComputedTextLength()}catch(e){return null}},function(e,t){return e+"_"+JSON.stringify(t)}),We=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fe=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={wordsByLines:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t.Component),We(r,[{key:"componentWillMount",value:function(){this.updateWordsByLines(this.props,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.children!==e.children||this.props.style!==e.style;this.updateWordsByLines(e,t)}},{key:"updateWordsByLines",value:function(t,e){if(t.width||t.scaleToFit){if(e){var r=t.children?t.children.toString().split(/\s+/):[];this.wordsWithComputedWidth=r.map(function(e){return{word:e,width:Ie(e,t.style)}}),this.spaceWidth=Ie(" ",t.style)}var n=this.calculateWordsByLines(this.wordsWithComputedWidth,this.spaceWidth,t.width);this.setState({wordsByLines:n})}else this.updateWordsWithoutCalculate(t)}},{key:"updateWordsWithoutCalculate",value:function(e){var t=e.children?e.children.toString().split(/\s+/):[];this.setState({wordsByLines:[{words:t}]})}},{key:"calculateWordsByLines",value:function(e,a,u){var s=this.props.scaleToFit;return e.reduce(function(e,t){var r=t.word,n=t.width,o=e[e.length-1];if(o&&(null==u||s||o.width+n+a<u))o.words.push(r),o.width+=n+a;else{var i={words:[r],width:n};e.push(i)}return e},[])}},{key:"render",value:function(){var e=this.props,t=e.dx,r=e.dy,n=e.textAnchor,o=e.verticalAnchor,i=e.scaleToFit,a=e.angle,u=e.lineHeight,s=e.capHeight,c=e.innerRef,l=function(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","innerRef"]),f=this.state.wordsByLines,p=l.x,d=l.y,y=void 0;switch(o){case"start":y=w("calc("+s+")");break;case"middle":y=w("calc("+(f.length-1)/2+" * -"+u+" + ("+s+" / 2))");break;default:y=w("calc("+(f.length-1)+" * -"+u+")")}var h=[];if(i&&f.length){var v=f[0].width,b=this.props.width/v,g=b,m=p-b*p,_=d-g*d;h.push("matrix("+b+", 0, 0, "+g+", "+m+", "+_+")")}return a&&h.push("rotate("+a+", "+p+", "+d+")"),h.length&&(l.transform=h.join(" ")),O.createElement("svg",{ref:c,x:t,y:r,fontSize:l.fontSize,style:{overflow:"visible"}},O.createElement("text",Ce({},l,{textAnchor:n}),f.map(function(e,t){return O.createElement("tspan",{x:p,dy:0===t?y:u,key:t},e.words.join(" "))})))}}]),r}();Fe.defaultProps={x:0,y:0,dx:0,dy:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"},Fe.propTypes={scaleToFit:x.bool,angle:x.number,textAnchor:x.oneOf(["start","middle","end","inherit"]),verticalAnchor:x.oneOf(["start","middle","end"]),style:x.object,innerRef:x.func},e.Text=Fe,e.getStringWidth=Ie,Object.defineProperty(e,"__esModule",{value:!0})});
