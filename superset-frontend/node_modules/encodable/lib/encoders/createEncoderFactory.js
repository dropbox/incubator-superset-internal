"use strict";

exports.__esModule = true;
exports.default = createEncoderFactory;

var _reselect = require("reselect");

var _Encoder = _interopRequireDefault(require("./Encoder"));

var _mergeEncoding = _interopRequireDefault(require("../utils/mergeEncoding"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createEncoderFactory(params) {
  const {
    channelTypes
  } = params;
  const completeEncoding = 'defaultEncoding' in params ? encoding => (0, _mergeEncoding.default)(params.defaultEncoding, encoding) : params.completeEncoding;

  const create = (encoding = {}) => new _Encoder.default({
    channelTypes,
    encoding: completeEncoding(encoding)
  });

  return {
    channelTypes,
    create,
    createSelector: () => (0, _reselect.createSelector)(encoding => encoding, create),
    DEFAULT_ENCODING: completeEncoding({})
  };
}