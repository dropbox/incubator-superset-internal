!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("prop-types"),require("react"),require("reduce-css-calc")):"function"==typeof define&&define.amd?define(["exports","prop-types","react","reduce-css-calc"],e):e(t.vx=t.vx||{},t.PropTypes,t.React,null)}(this,function(t,e,n,m){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var O="default"in n?n.default:n;m=m&&m.hasOwnProperty("default")?m.default:m;var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o="object"==typeof r&&r&&r.Object===Object&&r,i="object"==typeof self&&self&&self.Object===Object&&self,a=o||i||Function("return this")(),s=a.Symbol,c=Object.prototype,u=c.hasOwnProperty,l=c.toString,p=s?s.toStringTag:void 0;var h=function(t){var e=u.call(t,p),r=t[p];try{t[p]=void 0}catch(t){}var n=l.call(t);return e?t[p]=r:delete t[p],n},f=Object.prototype.toString;var d=function(t){return f.call(t)},y=s?s.toStringTag:void 0;var v=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":y&&y in Object(t)?h(t):d(t)};var _=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var g,b=function(t){if(!_(t))return!1;var e=v(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},w=a["__core-js_shared__"],j=(g=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";var x=function(t){return!!j&&j in t},T=Function.prototype.toString;var P=function(t){if(null!=t){try{return T.call(t)}catch(t){}try{return t+""}catch(t){}}return""},S=/^\[object .+?Constructor\]$/,W=Function.prototype,z=Object.prototype,C=W.toString,E=z.hasOwnProperty,k=RegExp("^"+C.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var A=function(t){return!(!_(t)||x(t))&&(b(t)?k:S).test(P(t))};var F=function(t,e){return null==t?void 0:t[e]};var B=function(t,e){var r=F(t,e);return A(r)?r:void 0},L=B(Object,"create");var H=function(){this.__data__=L?L(null):{},this.size=0};var R=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$=Object.prototype.hasOwnProperty;var N=function(t){var e=this.__data__;if(L){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return $.call(e,t)?e[t]:void 0},q=Object.prototype.hasOwnProperty;var M=function(t){var e=this.__data__;return L?void 0!==e[t]:q.call(e,t)};var I=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=L&&void 0===e?"__lodash_hash_undefined__":e,this};function G(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}G.prototype.clear=H,G.prototype.delete=R,G.prototype.get=N,G.prototype.has=M,G.prototype.set=I;var J=G;var U=function(){this.__data__=[],this.size=0};var D=function(t,e){return t===e||t!=t&&e!=e};var K=function(t,e){for(var r=t.length;r--;)if(D(t[r][0],e))return r;return-1},Q=Array.prototype.splice;var V=function(t){var e=this.__data__,r=K(e,t);return!(r<0||(r==e.length-1?e.pop():Q.call(e,r,1),--this.size,0))};var X=function(t){var e=this.__data__,r=K(e,t);return r<0?void 0:e[r][1]};var Y=function(t){return-1<K(this.__data__,t)};var Z=function(t,e){var r=this.__data__,n=K(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tt.prototype.clear=U,tt.prototype.delete=V,tt.prototype.get=X,tt.prototype.has=Y,tt.prototype.set=Z;var et=tt,rt=B(a,"Map");var nt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ot=function(t,e){var r=t.__data__;return nt(e)?r["string"==typeof e?"string":"hash"]:r.map};var it=function(t){var e=ot(this,t).delete(t);return this.size-=e?1:0,e};var at=function(t){return ot(this,t).get(t)};var st=function(t){return ot(this,t).has(t)};var ct=function(t,e){var r=ot(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ut(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ut.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(rt||et),string:new J}},ut.prototype.delete=it,ut.prototype.get=at,ut.prototype.has=st,ut.prototype.set=ct;var lt=ut,pt="Expected a function";function ht(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError(pt);var a=function(){var t=arguments,e=i?i.apply(this,t):t[0],r=a.cache;if(r.has(e))return r.get(e);var n=o.apply(this,t);return a.cache=r.set(e,n)||r,n};return a.cache=new(ht.Cache||lt),a}ht.Cache=lt;var ft="__react_svg_text_measurement_id";var dt=ht(function(t,e){try{var r=document.getElementById(ft);if(!r){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.width=0,n.style.height=0,n.style.position="absolute",n.style.top="-100%",n.style.left="-100%",(r=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id",ft),n.appendChild(r),document.body.appendChild(n)}return Object.assign(r.style,e),r.textContent=t,r.getComputedTextLength()}catch(t){return null}},function(t,e){return t+"_"+JSON.stringify(e)}),yt=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),vt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_t=function(t){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return e.state={wordsByLines:[]},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,n.Component),yt(r,[{key:"componentWillMount",value:function(){this.updateWordsByLines(this.props,!0)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props.children!==t.children||this.props.style!==t.style;this.updateWordsByLines(t,e)}},{key:"updateWordsByLines",value:function(e,t){if(e.width||e.scaleToFit){if(t){var r=e.children?e.children.toString().split(/\s+/):[];this.wordsWithComputedWidth=r.map(function(t){return{word:t,width:dt(t,e.style)}}),this.spaceWidth=dt("Â ",e.style)}var n=this.calculateWordsByLines(this.wordsWithComputedWidth,this.spaceWidth,e.width);this.setState({wordsByLines:n})}else this.updateWordsWithoutCalculate(e)}},{key:"updateWordsWithoutCalculate",value:function(t){var e=t.children?t.children.toString().split(/\s+/):[];this.setState({wordsByLines:[{words:e}]})}},{key:"calculateWordsByLines",value:function(t,a,s){var c=this.props.scaleToFit;return t.reduce(function(t,e){var r=e.word,n=e.width,o=t[t.length-1];if(o&&(null==s||c||o.width+n+a<s))o.words.push(r),o.width+=n+a;else{var i={words:[r],width:n};t.push(i)}return t},[])}},{key:"render",value:function(){var t=this.props,e=t.dx,r=t.dy,n=t.textAnchor,o=t.verticalAnchor,i=t.scaleToFit,a=t.angle,s=t.lineHeight,c=t.capHeight,u=t.innerRef,l=function(t,e){var r={};for(var n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}(t,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","innerRef"]),p=this.state.wordsByLines,h=l.x,f=l.y,d=void 0;switch(o){case"start":d=m("calc("+c+")");break;case"middle":d=m("calc("+(p.length-1)/2+" * -"+s+" + ("+c+" / 2))");break;default:d=m("calc("+(p.length-1)+" * -"+s+")")}var y=[];if(i&&p.length){var v=p[0].width,_=this.props.width/v,g=_,b=h-_*h,w=f-g*f;y.push("matrix("+_+", 0, 0, "+g+", "+b+", "+w+")")}return a&&y.push("rotate("+a+", "+h+", "+f+")"),y.length&&(l.transform=y.join(" ")),O.createElement("svg",{ref:u,x:e,y:r,fontSize:l.fontSize,style:{overflow:"visible"}},O.createElement("text",vt({},l,{textAnchor:n}),p.map(function(t,e){return O.createElement("tspan",{x:h,dy:0===e?d:s,key:e},t.words.join(" "))})))}}]),r}();_t.defaultProps={x:0,y:0,dx:0,dy:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"},_t.propTypes={scaleToFit:e.bool,angle:e.number,textAnchor:e.oneOf(["start","middle","end","inherit"]),verticalAnchor:e.oneOf(["start","middle","end"]),style:e.object,innerRef:e.func,x:e.oneOfType([e.number,e.string]),y:e.oneOfType([e.number,e.string]),dx:e.oneOfType([e.number,e.string]),dy:e.oneOfType([e.number,e.string]),lineHeight:e.oneOfType([e.number,e.string]),capHeight:e.oneOfType([e.number,e.string])},t.Text=_t,t.getStringWidth=dt,Object.defineProperty(t,"__esModule",{value:!0})});
