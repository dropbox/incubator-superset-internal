{"version":3,"sources":["../../../../src/effects/lighting/sun-light.js"],"names":["SunLight","timestamp","others","layer","viewport","context","isGlobe","resolution","x","y","z","direction","latitude","longitude","DirectionalLight"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;;;IAEqBA,Q;;;;;AACnB,0BAAoC;AAAA;;AAAA,QAAvBC,SAAuB,QAAvBA,SAAuB;AAAA,QAATC,MAAS;AAAA;AAClC,8BAAMA,MAAN;AAEA,UAAKD,SAAL,GAAiBA,SAAjB;AAHkC;AAInC;;;;6CAE0B;AAAA,UAARE,KAAQ,SAARA,KAAQ;AAAA,UAClBC,QADkB,GACND,KAAK,CAACE,OADA,CAClBD,QADkB;AAEzB,UAAME,OAAO,GAAGF,QAAQ,CAACG,UAAT,GAAsB,CAAtC;;AAEA,UAAID,OAAJ,EAAa;AAAA,oCAEO,mCAAqB,KAAKL,SAA1B,EAAqC,CAArC,EAAwC,CAAxC,CAFP;AAAA;AAAA,YAEJO,CAFI;AAAA,YAEDC,CAFC;AAAA,YAEEC,CAFF;;AAGX,aAAKC,SAAL,GAAiB,CAACH,CAAD,EAAI,CAACE,CAAL,EAAQD,CAAR,CAAjB;AACD,OAJD,MAIO;AAAA,YACEG,QADF,GACyBR,QADzB,CACEQ,QADF;AAAA,YACYC,SADZ,GACyBT,QADzB,CACYS,SADZ;AAEL,aAAKF,SAAL,GAAiB,mCAAqB,KAAKV,SAA1B,EAAqCW,QAArC,EAA+CC,SAA/C,CAAjB;AACD;;AAED,aAAO,IAAP;AACD;;;EArBmCC,kC","sourcesContent":["import {DirectionalLight} from './directional-light';\nimport {getSunlightDirection} from './suncalc';\n\nexport default class SunLight extends DirectionalLight {\n  constructor({timestamp, ...others}) {\n    super(others);\n\n    this.timestamp = timestamp;\n  }\n\n  getProjectedLight({layer}) {\n    const {viewport} = layer.context;\n    const isGlobe = viewport.resolution > 0;\n\n    if (isGlobe) {\n      // Rotate vector to align with the direction of the globe projection (up at lon:0,lat:0 is [0, -1, 0])\n      const [x, y, z] = getSunlightDirection(this.timestamp, 0, 0);\n      this.direction = [x, -z, y];\n    } else {\n      const {latitude, longitude} = viewport;\n      this.direction = getSunlightDirection(this.timestamp, latitude, longitude);\n    }\n\n    return this;\n  }\n}\n"],"file":"sun-light.js"}