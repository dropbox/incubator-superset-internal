{"version":3,"sources":["../../src/config.js"],"names":["defaultClassicCredentials","username","apiKey","region","mapsUrl","defaultCloudNativeCredentials","accessToken","apiBaseUrl","credentials","setDefaultCredentials","opts","apiVersion","API_VERSIONS","V2","V1","V3","Error","buildMapsUrlFromBase","getDefaultCredentials","suffix","endsWith","substring"],"mappings":";;;;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,yBAAyB,GAAG;AAChCC,EAAAA,QAAQ,EAAE,QADsB;AAEhCC,EAAAA,MAAM,EAAE,gBAFwB;AAGhCC,EAAAA,MAAM,EAAE,IAHwB;AAIhCC,EAAAA,OAAO,EAAE;AAJuB,CAAlC;AAOA,IAAMC,6BAA6B,GAAG;AACpCC,EAAAA,WAAW,EAAE,IADuB;AAEpCC,EAAAA,UAAU,EAAE,IAFwB;AAGpCH,EAAAA,OAAO,EAAE;AAH2B,CAAtC;AAMA,IAAII,WAAW,GAAG,EAAlB;AAEAC,qBAAqB,CAAC,EAAD,CAArB;;AAEO,SAASA,qBAAT,CAA+BC,IAA/B,EAAqC;AAC1C,MAAMC,UAAU,GAAGD,IAAI,CAACC,UAAL,IAAmBC,4BAAaC,EAAnD;;AAEA,UAAQF,UAAR;AACE,SAAKC,4BAAaE,EAAlB;AACEJ,MAAAA,IAAI,CAACN,OAAL,GAAeM,IAAI,CAACN,OAAL,IAAgB,qCAA/B;AACAI,MAAAA,WAAW;AACTG,QAAAA,UAAU,EAAVA;AADS,SAENX,yBAFM,GAGNU,IAHM,CAAX;AAKA;;AAEF,SAAKE,4BAAaC,EAAlB;AACEH,MAAAA,IAAI,CAACN,OAAL,GAAeM,IAAI,CAACN,OAAL,IAAgB,oDAA/B;AACAI,MAAAA,WAAW;AACTG,QAAAA,UAAU,EAAVA;AADS,SAENX,yBAFM,GAGNU,IAHM,CAAX;AAMA;;AACF,SAAKE,4BAAaG,EAAlB;AACE,UAAI,CAACL,IAAI,CAACH,UAAV,EAAsB;AACpB,cAAM,IAAIS,KAAJ,uBAEFJ,4BAAaG,EAFX,wGAAN;AAKD;;AAED,UAAMR,UAAU,GAAGG,IAAI,CAACH,UAAL,IAAmBF,6BAA6B,CAACE,UAApE;AACAG,MAAAA,IAAI,CAACN,OAAL,GAAeM,IAAI,CAACN,OAAL,IAAgBa,oBAAoB,CAACV,UAAD,CAAnD;AACAC,MAAAA,WAAW;AACTG,QAAAA,UAAU,EAAVA;AADS,SAENN,6BAFM,GAGNK,IAHM,CAAX;AAKA;;AACF;AACE,YAAM,IAAIM,KAAJ,+BAAiCL,UAAjC,8BAAN;AArCJ;AAuCD;;AAEM,SAASO,qBAAT,GAAiC;AACtC,SAAOV,WAAP;AACD;;AAEM,SAASS,oBAAT,CAA8BV,UAA9B,EAA0C;AAC/C,MAAIY,MAAM,GAAG,UAAb;;AACA,MAAIZ,UAAU,CAACa,QAAX,CAAoB,GAApB,CAAJ,EAA8B;AAC5BD,IAAAA,MAAM,GAAGA,MAAM,CAACE,SAAP,CAAiB,CAAjB,CAAT;AACD;;AAED,mBAAUd,UAAV,SAAuBY,MAAvB;AACD","sourcesContent":["import {API_VERSIONS} from './api/maps-api-common';\n\nconst defaultClassicCredentials = {\n  username: 'public',\n  apiKey: 'default_public',\n  region: 'us',\n  mapsUrl: null\n};\n\nconst defaultCloudNativeCredentials = {\n  accessToken: null,\n  apiBaseUrl: null,\n  mapsUrl: null\n};\n\nlet credentials = {};\n\nsetDefaultCredentials({});\n\nexport function setDefaultCredentials(opts) {\n  const apiVersion = opts.apiVersion || API_VERSIONS.V2;\n\n  switch (apiVersion) {\n    case API_VERSIONS.V1:\n      opts.mapsUrl = opts.mapsUrl || 'https://{user}.carto.com/api/v1/map';\n      credentials = {\n        apiVersion,\n        ...defaultClassicCredentials,\n        ...opts\n      };\n      break;\n\n    case API_VERSIONS.V2:\n      opts.mapsUrl = opts.mapsUrl || 'https://maps-api-v2.{region}.carto.com/user/{user}';\n      credentials = {\n        apiVersion,\n        ...defaultClassicCredentials,\n        ...opts\n      };\n\n      break;\n    case API_VERSIONS.V3:\n      if (!opts.apiBaseUrl) {\n        throw new Error(\n          `API version ${\n            API_VERSIONS.V3\n          } requires to define apiBaseUrl at credentials. Go to https://app.carto.com to get your apiBaseUrl.`\n        );\n      }\n\n      const apiBaseUrl = opts.apiBaseUrl || defaultCloudNativeCredentials.apiBaseUrl;\n      opts.mapsUrl = opts.mapsUrl || buildMapsUrlFromBase(apiBaseUrl);\n      credentials = {\n        apiVersion,\n        ...defaultCloudNativeCredentials,\n        ...opts\n      };\n      break;\n    default:\n      throw new Error(`Invalid API version ${apiVersion}. Use API_VERSIONS enum.`);\n  }\n}\n\nexport function getDefaultCredentials() {\n  return credentials;\n}\n\nexport function buildMapsUrlFromBase(apiBaseUrl) {\n  let suffix = '/v3/maps';\n  if (apiBaseUrl.endsWith('/')) {\n    suffix = suffix.substring(1);\n  }\n\n  return `${apiBaseUrl}${suffix}`;\n}\n"],"file":"config.js"}