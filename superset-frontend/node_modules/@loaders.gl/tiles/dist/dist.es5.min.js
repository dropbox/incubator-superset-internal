!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=77)}([function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return o}));var n=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},function(e,t,r){"use strict";r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"l",(function(){return u})),r.d(t,"m",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"s",(function(){return h})),r.d(t,"r",(function(){return d})),r.d(t,"o",(function(){return p})),r.d(t,"i",(function(){return y})),r.d(t,"p",(function(){return m})),r.d(t,"h",(function(){return b})),r.d(t,"q",(function(){return v})),r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return w})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return _})),r.d(t,"n",(function(){return x})),r.d(t,"j",(function(){return k})),r.d(t,"k",(function(){return T})),r.d(t,"t",(function(){return S}));var n=r(9);const i=1/Math.PI*180,o=1/180*Math.PI,a={};function s(e={}){for(const t in e)Object(n.a)(t in a),a[t]=e[t];return a}function u(e,{precision:t=a.precision||4}={}){return e=function(e){return Math.round(e/a.EPSILON)*a.EPSILON}(e),"".concat(parseFloat(e.toPrecision(t)))}function c(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function l(e){return e.clone?e.clone():new Array(...e)}function f(e,t,r){if(c(e)){r=r||((n=e).clone?n.clone():new Array(n.length));for(let n=0;n<r.length&&n<e.length;++n)r[n]=t(e[n],n,r);return r}var n;return t(e)}function h(e){return p(e)}function d(e){return y(e)}function p(e,t){return f(e,e=>e*o,t)}function y(e,t){return f(e,e=>e*i,t)}function m(e){return f(e,e=>Math.sin(e))}function b(e){return f(e,e=>Math.cos(e))}function v(e){return f(e,e=>Math.tan(e))}function g(e){return f(e,e=>Math.asin(e))}function w(e){return f(e,e=>Math.acos(e))}function O(e){return f(e,e=>Math.atan(e))}function _(e,t,r){return f(e,e=>Math.max(t,Math.min(r,e)))}function x(e,t,r){return c(e)?e.map((e,n)=>x(e,t[n],r)):r*t+(1-r)*e}function k(e,t,r){const n=a.EPSILON;r&&(a.EPSILON=r);try{if(e===t)return!0;if(c(e)&&c(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!k(e[r],t[r]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{a.EPSILON=n}}function T(e,t){if(e===t)return!0;if(e&&"object"==typeof e&&t&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(e.exactEquals)return e.exactEquals(t)}if(c(e)&&c(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!T(e[r],t[r]))return!1;return!0}return!1}function S(e,t){const r=a.EPSILON;let n;a.EPSILON=e;try{n=t()}finally{a.EPSILON=r}return n}a.EPSILON=1e-12,a.debug=!1,a.precision=4,a.printTypes=!1,a.printDegrees=!1,a.printRowMajor=!0},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s}));var n=r(1);function i(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function o(e,t,r=""){if(n.f.debug&&!function(e,t){if(e.length!==t)return!1;for(let t=0;t<e.length;++t)if(!Number.isFinite(e[t]))return!1;return!0}(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}const a={};function s(e,t){a[e]||(a[e]=!0,console.warn("".concat(e," has been removed in version ").concat(t,", see upgrade guide for more information")))}},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"g",(function(){return o})),r.d(t,"e",(function(){return a})),r.d(t,"h",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"m",(function(){return l})),r.d(t,"l",(function(){return f})),r.d(t,"n",(function(){return h})),r.d(t,"i",(function(){return d})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return y})),r.d(t,"a",(function(){return m})),r.d(t,"f",(function(){return v}));var n=r(0);function i(){var e=new n.a(3);return n.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function o(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function a(e,t,r){var i=new n.a(3);return i[0]=e,i[1]=t,i[2]=r,i}function s(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function u(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function c(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2];return e[0]=i*u-o*s,e[1]=o*a-n*u,e[2]=n*s-i*a,e}function l(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function f(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function h(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],u=t[1],c=t[2],l=i*c-o*u,f=o*s-n*c,h=n*u-i*s,d=i*h-o*f,p=o*l-n*h,y=n*f-i*l,m=2*a;return l*=m,f*=m,h*=m,d*=2,p*=2,y*=2,e[0]=s+l+d,e[1]=u+f+p,e[2]=c+h+y,e}function d(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function p(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function y(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function m(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],c=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(o*o+a*a+s*s),l=c&&u(e,t)/c;return Math.acos(Math.min(Math.max(l,-1),1))}var b,v=o;b=i()},function(e,t,r){"use strict";r.r(t),function(e){var n=r(1),i=r(49);r.d(t,"Vector2",(function(){return i.a}));var o=r(20);r.d(t,"Vector3",(function(){return o.a}));var a=r(50);r.d(t,"Vector4",(function(){return a.a}));var s=r(51);r.d(t,"Matrix3",(function(){return s.a}));var u=r(24);r.d(t,"Matrix4",(function(){return u.a}));var c=r(31);r.d(t,"Quaternion",(function(){return c.a})),r.d(t,"config",(function(){return n.f})),r.d(t,"configure",(function(){return n.g})),r.d(t,"formatValue",(function(){return n.l})),r.d(t,"isArray",(function(){return n.m})),r.d(t,"clone",(function(){return n.e})),r.d(t,"equals",(function(){return n.j})),r.d(t,"exactEquals",(function(){return n.k})),r.d(t,"toRadians",(function(){return n.s})),r.d(t,"toDegrees",(function(){return n.r})),r.d(t,"radians",(function(){return n.o})),r.d(t,"degrees",(function(){return n.i})),r.d(t,"sin",(function(){return n.p})),r.d(t,"cos",(function(){return n.h})),r.d(t,"tan",(function(){return n.q})),r.d(t,"asin",(function(){return n.b})),r.d(t,"acos",(function(){return n.a})),r.d(t,"atan",(function(){return n.c})),r.d(t,"clamp",(function(){return n.d})),r.d(t,"lerp",(function(){return n.n})),r.d(t,"withEpsilon",(function(){return n.t}));var l=r(2);r.d(t,"checkNumber",(function(){return l.a}));var f=r(52);r.d(t,"_MathUtils",(function(){return f.a}));var h=r(32);r.d(t,"SphericalCoordinates",(function(){return h.a}));var d=r(33);r.d(t,"Pose",(function(){return d.a}));var p=r(15);r.d(t,"Euler",(function(){return p.a}));var y=r(9);r.d(t,"assert",(function(){return y.a})),r.d(t,"_SphericalCoordinates",(function(){return h.a})),r.d(t,"_Pose",(function(){return d.a})),r.d(t,"_Euler",(function(){return p.a}));const m={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e};(m.global||m.self||m.window).mathgl={config:n.f}}.call(this,r(25))},function(e,t,r){"use strict";r.d(t,"p",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"o",(function(){return u})),r.d(t,"n",(function(){return c})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return f})),r.d(t,"l",(function(){return h})),r.d(t,"m",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return m})),r.d(t,"i",(function(){return b})),r.d(t,"h",(function(){return v})),r.d(t,"f",(function(){return g}));var n=r(0);function i(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function o(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],y=t[13],m=t[14],b=t[15],v=r*s-n*a,g=r*u-i*a,w=r*c-o*a,O=n*u-i*s,_=n*c-o*s,x=i*c-o*u,k=l*y-f*p,T=l*m-h*p,S=l*b-d*p,P=f*m-h*y,j=f*b-d*y,E=h*b-d*m,M=v*E-g*j+w*P+O*S-_*T+x*k;return M?(M=1/M,e[0]=(s*E-u*j+c*P)*M,e[1]=(i*j-n*E-o*P)*M,e[2]=(y*x-m*_+b*O)*M,e[3]=(h*_-f*x-d*O)*M,e[4]=(u*S-a*E-c*T)*M,e[5]=(r*E-i*S+o*T)*M,e[6]=(m*w-p*x-b*g)*M,e[7]=(l*x-h*w+d*g)*M,e[8]=(a*j-s*S+c*k)*M,e[9]=(n*S-r*j-o*k)*M,e[10]=(p*_-y*w+b*v)*M,e[11]=(f*w-l*_-d*v)*M,e[12]=(s*T-a*P-u*k)*M,e[13]=(r*P-n*T+i*k)*M,e[14]=(y*g-p*O-m*v)*M,e[15]=(l*O-f*g+h*v)*M,e):null}function a(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11],d=e[12],p=e[13],y=e[14],m=e[15];return(t*a-r*o)*(f*m-h*y)-(t*s-n*o)*(l*m-h*p)+(t*u-i*o)*(l*y-f*p)+(r*s-n*a)*(c*m-h*d)-(r*u-i*a)*(c*y-f*d)+(n*u-i*s)*(c*p-l*d)}function s(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],y=t[12],m=t[13],b=t[14],v=t[15],g=r[0],w=r[1],O=r[2],_=r[3];return e[0]=g*n+w*s+O*f+_*y,e[1]=g*i+w*u+O*h+_*m,e[2]=g*o+w*c+O*d+_*b,e[3]=g*a+w*l+O*p+_*v,g=r[4],w=r[5],O=r[6],_=r[7],e[4]=g*n+w*s+O*f+_*y,e[5]=g*i+w*u+O*h+_*m,e[6]=g*o+w*c+O*d+_*b,e[7]=g*a+w*l+O*p+_*v,g=r[8],w=r[9],O=r[10],_=r[11],e[8]=g*n+w*s+O*f+_*y,e[9]=g*i+w*u+O*h+_*m,e[10]=g*o+w*c+O*d+_*b,e[11]=g*a+w*l+O*p+_*v,g=r[12],w=r[13],O=r[14],_=r[15],e[12]=g*n+w*s+O*f+_*y,e[13]=g*i+w*u+O*h+_*m,e[14]=g*o+w*c+O*d+_*b,e[15]=g*a+w*l+O*p+_*v,e}function u(e,t,r){var n,i,o,a,s,u,c,l,f,h,d,p,y=r[0],m=r[1],b=r[2];return t===e?(e[12]=t[0]*y+t[4]*m+t[8]*b+t[12],e[13]=t[1]*y+t[5]*m+t[9]*b+t[13],e[14]=t[2]*y+t[6]*m+t[10]*b+t[14],e[15]=t[3]*y+t[7]*m+t[11]*b+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=n*y+s*m+f*b+t[12],e[13]=i*y+u*m+h*b+t[13],e[14]=o*y+c*m+d*b+t[14],e[15]=a*y+l*m+p*b+t[15]),e}function c(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function l(e,t,r,i){var o,a,s,u,c,l,f,h,d,p,y,m,b,v,g,w,O,_,x,k,T,S,P,j,E=i[0],M=i[1],R=i[2],A=Math.hypot(E,M,R);return A<n.b?null:(E*=A=1/A,M*=A,R*=A,o=Math.sin(r),s=1-(a=Math.cos(r)),u=t[0],c=t[1],l=t[2],f=t[3],h=t[4],d=t[5],p=t[6],y=t[7],m=t[8],b=t[9],v=t[10],g=t[11],w=E*E*s+a,O=M*E*s+R*o,_=R*E*s-M*o,x=E*M*s-R*o,k=M*M*s+a,T=R*M*s+E*o,S=E*R*s+M*o,P=M*R*s-E*o,j=R*R*s+a,e[0]=u*w+h*O+m*_,e[1]=c*w+d*O+b*_,e[2]=l*w+p*O+v*_,e[3]=f*w+y*O+g*_,e[4]=u*x+h*k+m*T,e[5]=c*x+d*k+b*T,e[6]=l*x+p*k+v*T,e[7]=f*x+y*k+g*T,e[8]=u*S+h*P+m*j,e[9]=c*S+d*P+b*j,e[10]=l*S+p*P+v*j,e[11]=f*S+y*P+g*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function f(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*n,e[5]=a*i+l*n,e[6]=s*i+f*n,e[7]=u*i+h*n,e[8]=c*i-o*n,e[9]=l*i-a*n,e[10]=f*i-s*n,e[11]=h*i-u*n,e}function h(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*n,e[1]=a*i-l*n,e[2]=s*i-f*n,e[3]=u*i-h*n,e[8]=o*n+c*i,e[9]=a*n+l*i,e[10]=s*n+f*i,e[11]=u*n+h*i,e}function d(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*n,e[1]=a*i+l*n,e[2]=s*i+f*n,e[3]=u*i+h*n,e[4]=c*i-o*n,e[5]=l*i-a*n,e[6]=f*i-s*n,e[7]=h*i-u*n,e}function p(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(u,c,l),e}function y(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,h=i*a,d=i*s,p=i*u,y=o*a,m=o*s,b=o*u;return e[0]=1-f-p,e[1]=l+b,e[2]=h-m,e[3]=0,e[4]=l-b,e[5]=1-c-p,e[6]=d+y,e[7]=0,e[8]=h+m,e[9]=d-y,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function m(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function b(e,t,r,n,i){var o,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e}function v(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*c,e[15]=1,e}function g(e,t,r,i){var o,a,s,u,c,l,f,h,d,p,y=t[0],m=t[1],b=t[2],v=i[0],g=i[1],w=i[2],O=r[0],_=r[1],x=r[2];return Math.abs(y-O)<n.b&&Math.abs(m-_)<n.b&&Math.abs(b-x)<n.b?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(f=y-O,h=m-_,d=b-x,o=g*(d*=p=1/Math.hypot(f,h,d))-w*(h*=p),a=w*(f*=p)-v*d,s=v*h-g*f,(p=Math.hypot(o,a,s))?(o*=p=1/p,a*=p,s*=p):(o=0,a=0,s=0),u=h*s-d*a,c=d*o-f*s,l=f*a-h*o,(p=Math.hypot(u,c,l))?(u*=p=1/p,c*=p,l*=p):(u=0,c=0,l=0),e[0]=o,e[1]=u,e[2]=f,e[3]=0,e[4]=a,e[5]=c,e[6]=h,e[7]=0,e[8]=s,e[9]=l,e[10]=d,e[11]=0,e[12]=-(o*y+a*m+s*b),e[13]=-(u*y+c*m+l*b),e[14]=-(f*y+h*m+d*b),e[15]=1,e)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return o.assert}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return a.isBrowser}}),Object.defineProperty(t,"isWorker",{enumerable:!0,get:function(){return a.isWorker}}),Object.defineProperty(t,"nodeVersion",{enumerable:!0,get:function(){return a.nodeVersion}}),Object.defineProperty(t,"self",{enumerable:!0,get:function(){return a.self}}),Object.defineProperty(t,"window",{enumerable:!0,get:function(){return a.window}}),Object.defineProperty(t,"global",{enumerable:!0,get:function(){return a.global}}),Object.defineProperty(t,"document",{enumerable:!0,get:function(){return a.document}}),Object.defineProperty(t,"createLoaderWorker",{enumerable:!0,get:function(){return s.createLoaderWorker}}),Object.defineProperty(t,"parseWithWorker",{enumerable:!0,get:function(){return u.parseWithWorker}}),Object.defineProperty(t,"canParseWithWorker",{enumerable:!0,get:function(){return u.canParseWithWorker}}),Object.defineProperty(t,"parseJSON",{enumerable:!0,get:function(){return c.parseJSON}}),Object.defineProperty(t,"toArrayBuffer",{enumerable:!0,get:function(){return l.toArrayBuffer}}),Object.defineProperty(t,"sliceArrayBuffer",{enumerable:!0,get:function(){return l.sliceArrayBuffer}}),Object.defineProperty(t,"concatenateArrayBuffers",{enumerable:!0,get:function(){return l.concatenateArrayBuffers}}),Object.defineProperty(t,"concatenateTypedArrays",{enumerable:!0,get:function(){return l.concatenateTypedArrays}}),Object.defineProperty(t,"compareArrayBuffers",{enumerable:!0,get:function(){return l.compareArrayBuffers}}),Object.defineProperty(t,"padToNBytes",{enumerable:!0,get:function(){return f.padToNBytes}}),Object.defineProperty(t,"copyToArray",{enumerable:!0,get:function(){return f.copyToArray}}),Object.defineProperty(t,"copyArrayBuffer",{enumerable:!0,get:function(){return f.copyArrayBuffer}}),Object.defineProperty(t,"copyPaddedArrayBufferToDataView",{enumerable:!0,get:function(){return h.copyPaddedArrayBufferToDataView}}),Object.defineProperty(t,"copyPaddedStringToDataView",{enumerable:!0,get:function(){return h.copyPaddedStringToDataView}}),Object.defineProperty(t,"padStringToByteAlignment",{enumerable:!0,get:function(){return d.padStringToByteAlignment}}),Object.defineProperty(t,"copyStringToDataView",{enumerable:!0,get:function(){return d.copyStringToDataView}}),Object.defineProperty(t,"copyBinaryToDataView",{enumerable:!0,get:function(){return d.copyBinaryToDataView}}),Object.defineProperty(t,"getFirstCharacters",{enumerable:!0,get:function(){return p.getFirstCharacters}}),Object.defineProperty(t,"getMagicString",{enumerable:!0,get:function(){return p.getMagicString}}),Object.defineProperty(t,"makeTextEncoderIterator",{enumerable:!0,get:function(){return y.makeTextEncoderIterator}}),Object.defineProperty(t,"makeTextDecoderIterator",{enumerable:!0,get:function(){return y.makeTextDecoderIterator}}),Object.defineProperty(t,"makeLineIterator",{enumerable:!0,get:function(){return y.makeLineIterator}}),Object.defineProperty(t,"makeNumberedLineIterator",{enumerable:!0,get:function(){return y.makeNumberedLineIterator}}),Object.defineProperty(t,"forEach",{enumerable:!0,get:function(){return m.forEach}}),Object.defineProperty(t,"concatenateArrayBuffersAsync",{enumerable:!0,get:function(){return m.concatenateArrayBuffersAsync}}),Object.defineProperty(t,"RequestScheduler",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"setPathPrefix",{enumerable:!0,get:function(){return g.setPathPrefix}}),Object.defineProperty(t,"getPathPrefix",{enumerable:!0,get:function(){return g.getPathPrefix}}),Object.defineProperty(t,"resolvePath",{enumerable:!0,get:function(){return g.resolvePath}}),Object.defineProperty(t,"_addAliases",{enumerable:!0,get:function(){return g.addAliases}}),Object.defineProperty(t,"isBuffer",{enumerable:!0,get:function(){return O.isBuffer}}),Object.defineProperty(t,"toBuffer",{enumerable:!0,get:function(){return O.toBuffer}}),Object.defineProperty(t,"bufferToArrayBuffer",{enumerable:!0,get:function(){return O.bufferToArrayBuffer}}),Object.defineProperty(t,"JSONLoader",{enumerable:!0,get:function(){return _.JSONLoader}}),t.fs=t.path=void 0;var i,o=r(53),a=r(80),s=r(81),u=r(90),c=r(91),l=r(61),f=r(63),h=r(92),d=r(93),p=r(60),y=r(94),m=r(95),b=(i=r(96))&&i.__esModule?i:{default:i},v=k(r(97));t.path=v;var g=r(98),w=k(r(99));t.fs=w;var O=r(100),_=r(101);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}},function(e,t,r){"use strict";(function(e,n){r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return l}));const i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"==typeof n&&n},o=i.self||i.window||i.global,a=i.window||i.self||i.global,s=i.global||i.self||i.window,u=i.document||{},c=i.process||{},l=console}).call(this,r(25),r(21))},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"g",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"l",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"k",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"m",(function(){return f})),r.d(t,"j",(function(){return h})),r.d(t,"d",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"n",(function(){return y})),r.d(t,"o",(function(){return m})),r.d(t,"f",(function(){return b})),r.d(t,"e",(function(){return v}));var n=r(0);function i(e){var t=new n.a(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function o(e,t,r,i){var o=new n.a(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function u(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function l(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function f(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function h(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function d(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function p(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function y(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function m(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,h=c*o+a*i-s*n,d=-a*n-s*i-u*o;return e[0]=l*c+d*-a+f*-u-h*-s,e[1]=f*c+d*-s+h*-a-l*-u,e[2]=h*c+d*-u+l*-s-f*-a,e[3]=t[3],e}function b(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function v(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-s)<=n.b*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=n.b*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=n.b*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=n.b*Math.max(1,Math.abs(a),Math.abs(l))}var g,w;g=new n.a(4),n.a!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0,g[3]=0),w=g},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function i(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function o(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function a(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function s(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return s}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"i",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"h",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return f})),r.d(t,"c",(function(){return h}));var n=r(0);function i(){var e=new n.a(9);return n.a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function o(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function a(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=l*a-s*c,h=-l*o+s*u,d=c*o-a*u,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-l*n+i*c)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(l*r-i*u)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-c*r+n*u)*p,e[8]=(a*r-n*o)*p,e):null}function s(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*(c*o-a*u)+r*(-c*i+a*s)+n*(u*i-o*s)}function u(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=r[0],d=r[1],p=r[2],y=r[3],m=r[4],b=r[5],v=r[6],g=r[7],w=r[8];return e[0]=h*n+d*a+p*c,e[1]=h*i+d*s+p*l,e[2]=h*o+d*u+p*f,e[3]=y*n+m*a+b*c,e[4]=y*i+m*s+b*l,e[5]=y*o+m*u+b*f,e[6]=v*n+g*a+w*c,e[7]=v*i+g*s+w*l,e[8]=v*o+g*u+w*f,e}function c(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=h*n+d*a+c,e[7]=h*i+d*s+l,e[8]=h*o+d*u+f,e}function l(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*u,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*u-h*o,e[6]=c,e[7]=l,e[8]=f,e}function f(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function h(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,h=i*a,d=i*s,p=i*u,y=o*a,m=o*s,b=o*u;return e[0]=1-f-p,e[3]=l-b,e[6]=h+m,e[1]=l+b,e[4]=1-c-p,e[7]=d-y,e[2]=h-m,e[5]=d+y,e[8]=1-c-f,e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s}));var n=r(0);function i(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function o(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function a(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function s(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}var u,c;u=new n.a(2),n.a!=Float32Array&&(u[0]=0,u[1]=0),c=u},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isWritableStream=t.isReadableStream=t.isReadableNodeStream=t.isWritableNodeStream=t.isBuffer=t.isReadableDOMStream=t.isWritableDOMStream=t.isBlob=t.isFile=t.isResponse=t.isIterator=t.isAsyncIterable=t.isIterable=t.isPromise=t.isPureObject=t.isObject=void 0;var i=function(e){return"boolean"==typeof e},o=function(e){return"function"==typeof e},a=function(e){return null!==e&&"object"===n(e)};t.isObject=a;t.isPureObject=function(e){return a(e)&&e.constructor==={}.constructor};t.isPromise=function(e){return a(e)&&o(e.then)};t.isIterable=function(e){return e&&"function"==typeof e[Symbol.iterator]};t.isAsyncIterable=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]};t.isIterator=function(e){return e&&o(e.next)};t.isResponse=function(e){return"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json};t.isFile=function(e){return"undefined"!=typeof File&&e instanceof File};t.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob};var s=function(e){return a(e)&&o(e.abort)&&o(e.getWriter)};t.isWritableDOMStream=s;var u=function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||a(e)&&o(e.tee)&&o(e.cancel)&&o(e.getReader)};t.isReadableDOMStream=u;t.isBuffer=function(e){return e&&"object"===n(e)&&e.isBuffer};var c=function(e){return a(e)&&o(e.end)&&o(e.write)&&i(e.writable)};t.isWritableNodeStream=c;var l=function(e){return a(e)&&o(e.read)&&o(e.pipe)&&i(e.readable)};t.isReadableNodeStream=l;t.isReadableStream=function(e){return u(e)||l(e)};t.isWritableStream=function(e){return s(e)||c(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalLoaderState=d,t.setGlobalOptions=function(e){var t=d(),r=p();t.globalOptions=b(r,e)},t.normalizeOptions=function(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],function(e,t){y(e,null,s.DEFAULT_LOADER_OPTIONS,s.REMOVED_LOADER_OPTIONS,t);var r,n=u(t);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=e&&e[i.id]||{},a=i.options&&i.options[i.id]||{},c=i.deprecatedOptions&&i.deprecatedOptions[i.id]||{};y(o,i.id,a,c,t)}}catch(e){n.e(e)}finally{n.f()}}(e,r),b(t,e,n)},t.getFetchFunction=function(e,t){var r=p(),n=e||r;if("function"==typeof n.fetch)return n.fetch;if((0,i.isObject)(n.fetch))return function(e){return(0,o.fetchFile)(e,n)};if(null!=t&&t.fetch)return null==t?void 0:t.fetch;return o.fetchFile};var n=r(6),i=r(13),o=r(43),a=r(69),s=r(110);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){n.global.loaders=n.global.loaders||{};var e=n.global.loaders;return e._state=e._state||{},e._state}var p=function(){var e=d();return e.globalOptions=e.globalOptions||f({},s.DEFAULT_LOADER_OPTIONS),e.globalOptions};function y(e,t,r,n,o){var s=t||"Top level",u=t?"".concat(t,"."):"";for(var c in e){var l=!t&&(0,i.isObject)(e[c]);if(!(c in r)&&!("baseUri"===c&&!t)&&!("workerUrl"===c&&t))if(c in n)a.probeLog.warn("".concat(s," loader option '").concat(u).concat(c,"' no longer supported, use '").concat(n[c],"'"))();else if(!l){var f=m(c,o);a.probeLog.warn("".concat(s," loader option '").concat(u).concat(c,"' not recognized. ").concat(f))()}}}function m(e,t){var r,n=e.toLowerCase(),i="",o=u(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;for(var s in a.options){if(e===s)return"Did you mean '".concat(a.id,".").concat(s,"'?");var c=s.toLowerCase();(n.startsWith(c)||c.startsWith(n))&&(i=i||"Did you mean '".concat(a.id,".").concat(s,"'?"))}}}catch(e){o.e(e)}finally{o.f()}return i}function b(e,t,r){var n=f({},e.options||{});return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,r),null===n.log&&(n.log=new a.NullLog),v(n,p()),v(n,t),n}function v(e,t){for(var r in t)if(r in t){var n=t[r];(0,i.isPureObject)(n)&&(0,i.isPureObject)(e[r])?e[r]=f(f({},e[r]),t[r]):e[r]=t[r]}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(16),i=r(1),o=r(2),a=r(31);class s extends n.a{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return s.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(e){return s.RotationOrders[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,r=0,n=s.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,r,n)}fromQuaternion(e){const[t,r,n,i]=e,o=r*r,a=-2*(o+n*n)+1,u=2*(t*r+i*n);let c=-2*(t*n-i*r);const l=2*(r*n+i*t),f=-2*(t*t+o)+1;c=c>1?1:c,c=c<-1?-1:c;const h=Math.atan2(l,f),d=Math.asin(c),p=Math.atan2(u,a);return new s(h,d,p,s.RollPitchYaw)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,r=0,n){return this[0]=e,this[1]=t,this[2]=r,this[3]=Number.isFinite(n)?n:this[3],this.check()}validate(){return(e=this[3])>=0&&e<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var e}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=Object(o.a)(e)}get y(){return this[1]}set y(e){this[1]=Object(o.a)(e)}get z(){return this[2]}set z(e){this[2]=Object(o.a)(e)}get alpha(){return this[0]}set alpha(e){this[0]=Object(o.a)(e)}get beta(){return this[1]}set beta(e){this[1]=Object(o.a)(e)}get gamma(){return this[2]}set gamma(e){this[2]=Object(o.a)(e)}get phi(){return this[0]}set phi(e){this[0]=Object(o.a)(e)}get theta(){return this[1]}set theta(e){this[1]=Object(o.a)(e)}get psi(){return this[2]}set psi(e){this[2]=Object(o.a)(e)}get roll(){return this[0]}set roll(e){this[0]=Object(o.a)(e)}get pitch(){return this[1]}set pitch(e){this[1]=Object(o.a)(e)}get yaw(){return this[2]}set yaw(e){this[2]=Object(o.a)(e)}get order(){return this[3]}set order(e){this[3]=function(e){if(e<0&&e>=6)throw new Error("Unknown Euler angle order");return e}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,r){return this.set(e,t,r,s.ZYX)}fromRotationMatrix(e,t=s.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new a.a;switch(this[4]){case s.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case s.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case s.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case s.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case s.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case s.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error("Unknown Euler angle order")}}_fromRotationMatrix(e,t=s.DefaultOrder){const r=e.elements,n=r[0],o=r[4],a=r[8],u=r[1],c=r[5],l=r[9],f=r[2],h=r[6],d=r[10];switch(t=t||this[3]){case s.XYZ:this[1]=Math.asin(Object(i.d)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-l,d),this[2]=Math.atan2(-o,n)):(this[0]=Math.atan2(h,c),this[2]=0);break;case s.YXZ:this[0]=Math.asin(-Object(i.d)(l,-1,1)),Math.abs(l)<.99999?(this[1]=Math.atan2(a,d),this[2]=Math.atan2(u,c)):(this[1]=Math.atan2(-f,n),this[2]=0);break;case s.ZXY:this[0]=Math.asin(Object(i.d)(h,-1,1)),Math.abs(h)<.99999?(this[1]=Math.atan2(-f,d),this[2]=Math.atan2(-o,c)):(this[1]=0,this[2]=Math.atan2(u,n));break;case s.ZYX:this[1]=Math.asin(-Object(i.d)(f,-1,1)),Math.abs(f)<.99999?(this[0]=Math.atan2(h,d),this[2]=Math.atan2(u,n)):(this[0]=0,this[2]=Math.atan2(-o,c));break;case s.YZX:this[2]=Math.asin(Object(i.d)(u,-1,1)),Math.abs(u)<.99999?(this[0]=Math.atan2(-l,c),this[1]=Math.atan2(-f,n)):(this[0]=0,this[1]=Math.atan2(a,d));break;case s.XZY:this[2]=Math.asin(-Object(i.d)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(h,c),this[1]=Math.atan2(a,n)):(this[0]=Math.atan2(-l,d),this[1]=0);break;default:throw new Error("Unknown Euler angle order")}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=this.x,n=this.y,i=this.z,o=Math.cos(r),a=Math.cos(n),u=Math.cos(i),c=Math.sin(r),l=Math.sin(n),f=Math.sin(i);switch(this[3]){case s.XYZ:{const e=o*u,r=o*f,n=c*u,i=c*f;t[0]=a*u,t[4]=-a*f,t[8]=l,t[1]=r+n*l,t[5]=e-i*l,t[9]=-c*a,t[2]=i-e*l,t[6]=n+r*l,t[10]=o*a;break}case s.YXZ:{const e=a*u,r=a*f,n=l*u,i=l*f;t[0]=e+i*c,t[4]=n*c-r,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-c,t[2]=r*c-n,t[6]=i+e*c,t[10]=o*a;break}case s.ZXY:{const e=a*u,r=a*f,n=l*u,i=l*f;t[0]=e-i*c,t[4]=-o*f,t[8]=n+r*c,t[1]=r+n*c,t[5]=o*u,t[9]=i-e*c,t[2]=-o*l,t[6]=c,t[10]=o*a;break}case s.ZYX:{const e=o*u,r=o*f,n=c*u,i=c*f;t[0]=a*u,t[4]=n*l-r,t[8]=e*l+i,t[1]=a*f,t[5]=i*l+e,t[9]=r*l-n,t[2]=-l,t[6]=c*a,t[10]=o*a;break}case s.YZX:{const e=o*a,r=o*l,n=c*a,i=c*l;t[0]=a*u,t[4]=i-e*f,t[8]=n*f+r,t[1]=f,t[5]=o*u,t[9]=-c*u,t[2]=-l*u,t[6]=r*f+n,t[10]=e-i*f;break}case s.XZY:{const e=o*a,r=o*l,n=c*a,i=c*l;t[0]=a*u,t[4]=-f,t[8]=l*u,t[1]=e*f+i,t[5]=o*u,t[9]=r*f-n,t[2]=n*f-r,t[6]=c*u,t[10]=i*f+e;break}default:throw new Error("Unknown Euler angle order")}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),n=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch),s=e*r*i+t*n*o,u=e*n*i-t*r*o,c=e*r*o+t*n*i,l=t*r*i-e*n*o;return new a.a(u,c,l,s)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(1),i=r(9);class o extends(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array)){get ELEMENTS(){return Object(i.a)(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check()}to(e){return e===this?this:Object(n.m)(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(n.f)}formatString(e){let t="";for(let r=0;r<this.ELEMENTS;++r)t+=(r>0?", ":"")+Object(n.l)(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Object(n.j)(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,r){void 0===r&&(r=t,t=e,e=this);for(let n=0;n<this.ELEMENTS;++n){const i=e[n];this[n]=i+r*(t[n]-i)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),t[r]);return this.check()}add(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]+=t[e];return this.check()}subtract(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]-=t[e];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(n.f.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLoaderObject=s,t.normalizeLoader=function(e){var t,r,i;(0,n.assert)(e,"null loader"),(0,n.assert)(s(e),"invalid loader"),Array.isArray(e)&&(i=e[1],e=o(o({},e=e[0]),{},{options:o(o({},e.options),i)}));(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(r=e)&&void 0!==r&&r.parseText)&&(e.text=!0);e.text||(e.binary=!0);return e};var n=r(6);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t;return!!e&&(Array.isArray(e)&&(e=e[0]),Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions))}},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o}));var n=r(22);function i(){return!("object"==typeof e&&"[object process]"===String(e)&&!e.browser)||Object(n.a)()}function o(){return i()&&"undefined"!=typeof document}}).call(this,r(21))},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(23),i=r(1),o=r(2),a=r(3),s=r(10);const u=[0,0,0],c={};class l extends n.a{static get ZERO(){return c.ZERO=c.ZERO||Object.freeze(new l(0,0,0,0))}constructor(e=0,t=0,r=0){super(-0,-0,-0),1===arguments.length&&Object(i.m)(e)?this.copy(e):(i.f.debug&&(Object(o.a)(e),Object(o.a)(t),Object(o.a)(r)),this[0]=e,this[1]=t,this[2]=r)}set(e,t,r){return this[0]=e,this[1]=t,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return i.f.debug&&(Object(o.a)(e.x),Object(o.a)(e.y),Object(o.a)(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Object(o.a)(e)}angle(e){return a.a(this,e)}cross(e){return a.c(this,this,e),this.check()}rotateX({radians:e,origin:t=u}){return a.i(this,this,t,e),this.check()}rotateY({radians:e,origin:t=u}){return a.j(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=u}){return a.k(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return a.m(this,this,e),this.check()}transformAsVector(e){return Object(s.c)(this,this,e),this.check()}transformByMatrix3(e){return a.l(this,this,e),this.check()}transformByMatrix2(e){return Object(s.b)(this,this,e),this.check()}transformByQuaternion(e){return a.n(this,this,e),this.check()}}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){function n(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"==typeof e.versions&&Boolean(e.versions.electron))return!0;const r="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||r;return!!(n&&n.indexOf("Electron")>=0)}r.d(t,"a",(function(){return n}))}).call(this,r(21))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(16),i=r(2),o=r(9);class a extends n.a{get ELEMENTS(){return Object(o.a)(!1),0}copy(e){return Object(o.a)(!1),this}get x(){return this[0]}set x(e){this[0]=Object(i.a)(e)}get y(){return this[1]}set y(e){this[1]=Object(i.a)(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let r=0;r<this.ELEMENTS;++r){const n=this[r]-e[r];t+=n*n}return Object(i.a)(t)}dot(e){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return Object(i.a)(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t[e];return this.check()}divide(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Object(o.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),Object(i.a)(this[e])}setComponent(e,t){return Object(o.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(2),i=r(37),o=r(10),a=r(5),s=r(12),u=r(3),c=r(8);const l=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),h=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),d={};class p extends i.a{static get IDENTITY(){return d.IDENTITY=d.IDENTITY||Object.freeze(new p(l)),d.IDENTITY}static get ZERO(){return d.ZERO=d.ZERO||Object.freeze(new p(f)),d.ZERO}get INDICES(){return h}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,r,n,i,o,a,s,u,c,l,f,h,d,p,y){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=h,this[13]=d,this[14]=p,this[15]=y,this.check()}setRowMajor(e,t,r,n,i,o,a,s,u,c,l,f,h,d,p,y){return this[0]=e,this[1]=i,this[2]=u,this[3]=h,this[4]=t,this[5]=o,this[6]=c,this[7]=d,this[8]=r,this[9]=a,this[10]=l,this[11]=p,this[12]=n,this[13]=s,this[14]=f,this[15]=y,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(l)}fromQuaternion(e){return a.b(this,e),this.check()}frustum({left:e,right:t,bottom:r,top:n,near:i,far:o}){return o===1/0?p._computeInfinitePerspectiveOffCenter(this,e,t,r,n,i):a.c(this,e,t,r,n,i,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),u=(r+t)/(r-t),c=(i+n)/(i-n),l=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=u,e[9]=c,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=l,e[15]=0,e}lookAt(e,t,r){return 1===arguments.length&&({eye:e,center:t,up:r}=e),t=t||[0,0,0],r=r||[0,1,0],a.f(this,e,t,r),this.check()}ortho({left:e,right:t,bottom:r,top:n,near:i=.1,far:o=500}){return a.h(this,e,t,r,n,i,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:r=1,near:n=.1,far:i=500}){if(e>2*Math.PI)throw Error("radians");const o=e/2,a=r*Math.tan(o),s=a*t;return(new p).ortho({left:-s,right:s,bottom:-a,top:a,near:n,far:i})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:r=1,near:n=.1,far:i=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return a.i(this,e,r,n,i),this.check()}determinant(){return a.a(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const r=this.getScale(t||[-0,-0,-0]),n=1/r[0],i=1/r[1],o=1/r[2];return e[0]=this[0]*n,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*n,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*n,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const r=this.getScale(t||[-0,-0,-0]),n=1/r[0],i=1/r[1],o=1/r[2];return e[0]=this[0]*n,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*n,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*n,e[7]=this[9]*i,e[8]=this[10]*o,e}transpose(){return a.p(this,this),this.check()}invert(){return a.e(this,this),this.check()}multiplyLeft(e){return a.g(this,e,this),this.check()}multiplyRight(e){return a.g(this,this,e),this.check()}rotateX(e){return a.k(this,this,e),this.check()}rotateY(e){return a.l(this,this,e),this.check()}rotateZ(e){return a.m(this,this,e),this.check()}rotateXYZ([e,t,r]){return this.rotateX(e).rotateY(t).rotateZ(r)}rotateAxis(e,t){return a.j(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?a.n(this,this,e):a.n(this,this,[e,e,e]),this.check()}translate(e){return a.o(this,this,e),this.check()}transform(e,t){return 4===e.length?(t=c.n(t||[-0,-0,-0,-0],e,this),Object(n.b)(t,4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:r}=e;switch(r){case 2:t=s.d(t||[-0,-0],e,this);break;case 3:t=u.m(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(n.b)(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=Object(o.a)(t||[-0,-0],e,this);break;case 3:t=Object(o.c)(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(n.b)(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,r){return this.identity().translate([e,t,r])}transformPoint(e,t){return Object(n.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return Object(n.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return Object(n.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResourceUrlAndType=function(e){if((0,n.isResponse)(e)){var t=a(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:(0,i.parseMIMEType)(r)||(0,i.parseMIMETypeFromURL)(t)}}if((0,n.isBlob)(e))return{url:a(e.name||""),type:e.type||""};if("string"==typeof e)return{url:a(e),type:(0,i.parseMIMETypeFromURL)(e)};return{url:"",type:""}},t.getResourceContentLength=function(e){if((0,n.isResponse)(e))return e.headers["content-length"]||-1;if((0,n.isBlob)(e))return e.size;if("string"==typeof e)return e.length;if(e instanceof ArrayBuffer)return e.byteLength;if(ArrayBuffer.isView(e))return e.byteLength;return-1};var n=r(13),i=r(105),o=/\?.*/;function a(e){return e.replace(o,"")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TILE3D_OPTIMIZATION_HINT=t.LOD_METRIC_TYPE=t.TILESET_TYPE=t.TILE_TYPE=t.TILE_REFINEMENT=t.TILE_CONTENT_STATE=void 0;t.TILE_CONTENT_STATE={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};t.TILE_REFINEMENT={ADD:1,REPLACE:2};t.TILE_TYPE={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"};t.TILESET_TYPE={I3S:"I3S",TILES3D:"TILES3D"};t.LOD_METRIC_TYPE={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"};t.TILE3D_OPTIMIZATION_HINT={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_PROPS=void 0;var n,i=(n=r(127))&&n.__esModule?n:{default:n},o=r(27);function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""};t.DEFAULT_PROPS=h;var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"options",void 0),f(this,"root",void 0),f(this,"requestedTiles",void 0),f(this,"selectedTiles",void 0),f(this,"emptyTiles",void 0),f(this,"_traversalStack",void 0),f(this,"_emptyTraversalStack",void 0),f(this,"_frameNumber",void 0),this.options=c(c({},h),t),this._traversalStack=new i.default,this._emptyTraversalStack=new i.default,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}var t,r,n;return t=e,(r=[{key:"traverse",value:function(e,t,r){this.root=e,this.options=c(c({},this.options),r),this.reset(),this.updateTile(e,t),this._frameNumber=t.frameNumber,this.executeTraversal(e,t)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(e,t){var r=this._traversalStack;for(e._selectionDepth=1,r.push(e);r.length>0;){var n=r.pop(),i=!1;this.canTraverse(n,t)&&(this.updateChildTiles(n,t),i=this.updateAndPushChildren(n,t,r,n.hasRenderContent?n._selectionDepth+1:n._selectionDepth));var a=n.parent,s=Boolean(!a||a._shouldRefine),u=!i;n.hasRenderContent?n.refine===o.TILE_REFINEMENT.ADD?(this.loadTile(n,t),this.selectTile(n,t)):n.refine===o.TILE_REFINEMENT.REPLACE&&(this.loadTile(n,t),u&&this.selectTile(n,t)):(this.emptyTiles[n.id]=n,this.loadTile(n,t),u&&this.selectTile(n,t)),this.touchTile(n,t),n._shouldRefine=i&&s}this.options.onTraversalEnd(t)}},{key:"updateChildTiles",value:function(e,t){var r,n=a(e.children);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.updateTile(i,t)}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"updateAndPushChildren",value:function(e,t,r,n){var i=this.options,s=i.loadSiblings,u=i.skipLevelOfDetail,c=e.children;c.sort(this.compareDistanceToCamera.bind(this));var l,f=e.refine===o.TILE_REFINEMENT.REPLACE&&e.hasRenderContent&&!u,h=!1,d=!0,p=a(c);try{for(p.s();!(l=p.n()).done;){var y=l.value;if(y._selectionDepth=n,y.isVisibleAndInRequestVolume?(r.find(y)&&r.delete(y),r.push(y),h=!0):(f||s)&&(this.loadTile(y,t),this.touchTile(y,t)),f){var m=void 0;if(m=!!y._inRequestVolume&&(y.hasRenderContent?y.contentAvailable:this.executeEmptyTraversal(y,t)),!(d=d&&m))return!1}}}catch(e){p.e(e)}finally{p.f()}return h||(d=!1),d}},{key:"updateTile",value:function(e,t){this.updateTileVisibility(e,t)}},{key:"selectTile",value:function(e,t){this.shouldSelectTile(e)&&(e._selectedFrame=t.frameNumber,this.selectedTiles[e.id]=e)}},{key:"loadTile",value:function(e,t){this.shouldLoadTile(e)&&(e._requestedFrame=t.frameNumber,e._priority=e._getPriority(),this.requestedTiles[e.id]=e)}},{key:"touchTile",value:function(e,t){e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber}},{key:"canTraverse",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!e.hasChildren&&(e.hasTilesetContent?!e.contentExpired:!(!n&&!e.isVisibleAndInRequestVolume)&&this.shouldRefine(e,t,r))}},{key:"shouldLoadTile",value:function(e){return e.hasUnloadedContent||e.contentExpired}},{key:"shouldSelectTile",value:function(e){return e.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(e,t,r){var n=e._screenSpaceError;return r&&(n=e.getScreenSpaceError(t,!0)),n>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(e,t){var r=[];if(this.options.viewportTraversersMap)for(var n in this.options.viewportTraversersMap)this.options.viewportTraversersMap[n]===t.viewport.id&&r.push(n);else r.push(t.viewport.id);e.updateVisibility(t,r)}},{key:"compareDistanceToCamera",value:function(e,t){return e._distanceToCamera-t._distanceToCamera}},{key:"anyChildrenVisible",value:function(e,t){var r,n=!1,i=a(e.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.updateVisibility(t),n=n||o.isVisibleAndInRequestVolume}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"executeEmptyTraversal",value:function(e,t){var r=!0,n=this._emptyTraversalStack;for(n.push(e);n.length>0&&r;){var i=n.pop();if(this.updateTile(i,t),i.isVisibleAndInRequestVolume||this.loadTile(i,t),this.touchTile(i,t),!i.hasRenderContent&&this.canTraverse(i,t,!1,!0)){var o,s=a(i.children);try{for(s.s();!(o=s.n()).done;){var u=o.value;n.find(u)&&n.delete(u),n.push(u)}}catch(e){s.e(e)}finally{s.f()}}else i.contentAvailable||(r=!1)}return r}}])&&l(t.prototype,r),n&&l(t,n),e}();t.default=d},function(e,t,r){"use strict";r.r(t),r.d(t,"Stats",(function(){return o})),r.d(t,"Stat",(function(){return i})),r.d(t,"_getHiResTimestamp",(function(){return n.a}));var n=r(30);class i{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Object(n.a)(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Object(n.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class o{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(e=>this._getOrCreate(e))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:r}=e;return this.stats[t]||(this.stats[t]=e instanceof i?e:new i(t,r)),this.stats[t]}}},function(e,t,r){"use strict";(function(e){function n(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==e&&e.hrtime){const r=e.hrtime();t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}r.d(t,"a",(function(){return n}))}).call(this,r(21))},function(e,t,r){"use strict";r.d(t,"a",(function(){return M}));var n=r(16),i=r(2),o=r(9),a=r(0),s=r(11),u=r(3),c=r(8);function l(){var e=new a.a(4);return a.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function f(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function h(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+a*s+i*c-o*u,e[1]=i*l+a*u+o*s-n*c,e[2]=o*l+a*c+n*u-i*s,e[3]=a*l-n*s-i*u-o*c,e}function d(e,t,r,n){var i,o,s,u,c,l=t[0],f=t[1],h=t[2],d=t[3],p=r[0],y=r[1],m=r[2],b=r[3];return(o=l*p+f*y+h*m+d*b)<0&&(o=-o,p=-p,y=-y,m=-m,b=-b),1-o>a.b?(i=Math.acos(o),s=Math.sin(i),u=Math.sin((1-n)*i)/s,c=Math.sin(n*i)/s):(u=1-n,c=n),e[0]=u*l+c*p,e[1]=u*f+c*y,e[2]=u*h+c*m,e[3]=u*d+c*b,e}function p(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*o+a]-t[3*a+o])*r,e[o]=(t[3*o+i]+t[3*i+o])*r,e[a]=(t[3*a+i]+t[3*i+a])*r}return e}c.b,c.g,c.c,c.l;var y,m,b,v,g,w,O=c.a,_=c.k,x=c.d,k=c.i,T=c.h,S=c.m,P=c.j,j=(c.f,c.e,y=u.b(),m=u.e(1,0,0),b=u.e(0,1,0),function(e,t,r){var n=u.d(t,r);return n<-.999999?(u.c(y,m,t),u.f(y)<1e-6&&u.c(y,b,t),u.h(y,y),f(e,y,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(u.c(y,t,r),e[0]=y[0],e[1]=y[1],e[2]=y[2],e[3]=1+n,P(e,e))});v=l(),g=l(),w=s.a();const E=[0,0,0,1];class M extends n.a{constructor(e=0,t=0,r=0,n=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,r,n)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,r,n){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this.check()}fromMatrix3(e){return p(this,e),this.check()}identity(){var e;return(e=this)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.check()}fromAxisRotation(e,t){return f(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Object(i.a)(e)}get y(){return this[1]}set y(e){this[1]=Object(i.a)(e)}get z(){return this[2]}set z(e){this[2]=Object(i.a)(e)}get w(){return this[3]}set w(e){this[3]=Object(i.a)(e)}len(){return T(this)}lengthSquared(){return S(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return x(this,e)}rotationTo(e,t){return j(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return O(this,this,e),this.check()}calculateW(){var e,t,r,n,i;return e=this,r=(t=this)[0],n=t[1],i=t[2],e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),this.check()}conjugate(){var e,t;return t=this,(e=this)[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],this.check()}invert(){var e,t,r,n,i,o,a,s;return e=this,r=(t=this)[0],n=t[1],i=t[2],o=t[3],s=(a=r*r+n*n+i*i+o*o)?1/a:0,e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,this.check()}lerp(e,t,r){return k(this,e,t,r),this.check()}multiplyRight(e,t){return Object(o.a)(!t),h(this,this,e),this.check()}multiplyLeft(e,t){return Object(o.a)(!t),h(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-n*s}(this,this,e),this.check()}rotateY(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u-o*s,e[1]=i*u+a*s,e[2]=o*u+n*s,e[3]=a*u-i*s}(this,this,e),this.check()}rotateZ(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u+i*s,e[1]=i*u-n*s,e[2]=o*u+a*s,e[3]=a*u-o*s}(this,this,e),this.check()}scale(e){return _(this,this,e),this.check()}slerp(e,t,r){switch(arguments.length){case 1:({start:e=E,target:t,ratio:r}=arguments[0]);break;case 2:[t,r]=arguments,e=this}return d(this,e,t,r),this.check()}transformVector4(e,t=e){return c.o(t,e,this),Object(i.b)(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(1),i=r(20),o=r(3);class a{constructor({phi:e=0,theta:t=0,radius:r=1,bearing:n,pitch:i,altitude:o,radiusScale:a=6371e3}={}){this.phi=e,this.theta=t,this.radius=r||o||1,this.radiusScale=a||1,void 0!==n&&(this.bearing=n),void 0!==i&&(this.pitch=i),this.check()}toString(){return this.formatString(n.f)}formatString({printTypes:e=!1}){const t=n.l;return"".concat(e?"Spherical":"","[rho:").concat(t(this.radius),",theta:").concat(t(this.theta),",phi:").concat(t(this.phi),"]")}equals(e){return Object(n.j)(this.radius,e.radius)&&Object(n.j)(this.theta,e.theta)&&Object(n.j)(this.phi,e.phi)}exactEquals(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}get bearing(){return 180-Object(n.i)(this.phi)}set bearing(e){this.phi=Math.PI-Object(n.o)(e)}get pitch(){return Object(n.i)(this.theta)}set pitch(e){this.theta=Object(n.o)(e)}get longitude(){return Object(n.i)(this.phi)}get latitude(){return Object(n.i)(this.theta)}get lng(){return Object(n.i)(this.phi)}get lat(){return Object(n.i)(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this.check()}clone(){return(new a).copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}fromLngLatZ([e,t,r]){this.radius=1+r/this.radiusScale,this.phi=Object(n.o)(t),this.theta=Object(n.o)(e)}fromVector3(e){return this.radius=o.g(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(n.d)(e[2]/this.radius,-1,1))),this.check()}toVector3(){return new i.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(24),i=r(20),o=r(15);class a{constructor({x:e=0,y:t=0,z:r=0,roll:n=0,pitch:a=0,yaw:s=0,position:u,orientation:c}={}){Array.isArray(u)&&3===u.length?this.position=new i.a(u):this.position=new i.a(e,t,r),Array.isArray(c)&&4===c.length?this.orientation=new o.a(c,c[3]):this.orientation=new o.a(n,a,s,o.a.RollPitchYaw)}get x(){return this.position.x}set x(e){this.position.x=e}get y(){return this.position.y}set y(e){this.position.y=e}get z(){return this.position.z}set z(e){this.position.z=e}get roll(){return this.orientation.roll}set roll(e){this.orientation.roll=e}get pitch(){return this.orientation.pitch}set pitch(e){this.orientation.pitch=e}get yaw(){return this.orientation.yaw}set yaw(e){this.orientation.yaw=e}getPosition(){return this.position}getOrientation(){return this.orientation}equals(e){return!!e&&(this.position.equals(e.position)&&this.orientation.equals(e.orientation))}exactEquals(e){return!!e&&(this.position.exactEquals(e.position)&&this.orientation.exactEquals(e.orientation))}getTransformationMatrix(){const e=Math.sin(this.roll),t=Math.sin(this.pitch),r=Math.sin(this.yaw),i=Math.cos(this.roll),o=Math.cos(this.pitch),a=Math.cos(this.yaw);return(new n.a).setRowMajor(a*o,-r*i+a*t*e,r*e+a*t*i,this.x,r*o,a*i+r*t*e,-a*e+r*t*i,this.y,-t,o*e,o*i,this.z,0,0,0,1)}getTransformationMatrixFromPose(e){return(new n.a).multiplyRight(this.getTransformationMatrix()).multiplyRight(e.getTransformationMatrix().invert())}getTransformationMatrixToPose(e){return(new n.a).multiplyRight(e.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0;t.VERSION="3.0.8"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectLoader=function(e){return g.apply(this,arguments)},t.selectLoaderSync=w;var n=r(6),i=r(18),o=r(26),a=r(70),s=r(13);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))}}var v=/\.([^.]+)$/;function g(){return(g=b(regeneratorRuntime.mark((function e(t){var r,n,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:[],n=a.length>2?a[2]:void 0,i=a.length>3?a[3]:void 0,_(t)){e.next=5;break}return e.abrupt("return",null);case 5:if(!(o=w(t,r,c(c({},n),{},{nothrow:!0}),i))){e.next=8;break}return e.abrupt("return",o);case 8:if(!(0,s.isBlob)(t)){e.next=13;break}return e.next=11,t.slice(0,10).arrayBuffer();case 11:t=e.sent,o=w(t,r,n,i);case 13:if(o||null!=n&&n.nothrow){e.next=15;break}throw new Error(x(t));case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!_(e))return null;if(t&&!Array.isArray(t))return(0,i.normalizeLoader)(t);var o,s=[];(t&&(s=s.concat(t)),null!=r&&r.ignoreRegisteredLoaders)||(o=s).push.apply(o,d((0,a.getRegisteredLoaders)()));k(s);var u=O(e,s,r,n);if(!(u||null!=r&&r.nothrow))throw new Error(x(e));return u}function O(e,t,r,n){var i=(0,o.getResourceUrlAndType)(e),a=i.url,s=i.type,u=a||(null==n?void 0:n.url),c=null;return null!=r&&r.mimeType&&(c=T(t,null==r?void 0:r.mimeType)),c=(c=(c=(c=c||function(e,t){var r=t&&v.exec(t),n=r&&r[1];return n?function(e,t){t=t.toLowerCase();var r,n=h(e);try{for(n.s();!(r=n.n()).done;){var i,o=r.value,a=h(o.extensions);try{for(a.s();!(i=a.n()).done;){if(i.value.toLowerCase()===t)return o}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}return null}(e,n):null}(t,u))||T(t,s))||function(e,t){if(!t)return null;var r,n=h(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("string"==typeof t){if(S(t,i))return i}else if(ArrayBuffer.isView(t)){if(P(t.buffer,t.byteOffset,i))return i}else if(t instanceof ArrayBuffer){if(P(t,0,i))return i}}}catch(e){n.e(e)}finally{n.f()}return null}(t,e))||T(t,null==r?void 0:r.fallbackMimeType)}function _(e){return!(e instanceof Response&&204===e.status)}function x(e){var t=(0,o.getResourceUrlAndType)(e),r=t.url,n=t.type,i="No valid loader found";return e&&(i+=' data: "'.concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return j(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){var r=0;return j(e,r,t)}return""}(e),'", contentType: "').concat(n,'"')),r&&(i+=" url: ".concat(r)),i}function k(e){var t,r=h(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;(0,i.normalizeLoader)(n)}}catch(e){r.e(e)}finally{r.f()}}function T(e,t){var r,n=h(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.mimeTypes&&i.mimeTypes.includes(t))return i;if(t==="application/x.".concat(i.id))return i}}catch(e){n.e(e)}finally{n.f()}return null}function S(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some((function(t){return e.startsWith(t)}))}function P(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((function(i){return function(e,t,r,i){if(i instanceof ArrayBuffer)return(0,n.compareArrayBuffers)(i,e,i.byteLength);switch(f(i)){case"function":return i(e,r);case"string":var o=j(e,t,i.length);return i===o;default:return!1}}(e,t,r,i)}))}function j(e,t,r){if(e.byteLength<t+r)return"";for(var n=new DataView(e),i="",o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}},function(e,t,r){"use strict";r.r(t),r.d(t,"Ellipsoid",(function(){return I})),r.d(t,"isWGS84",(function(){return p}));var n=r(20),i=r(9),o=r(52),a=r(24),s=r(1),u=r(3);const c={radii:[6378137,6378137,6356752.314245179],radiiSquared:[40680631590769,40680631590769,40408299984661.445],oneOverRadii:[1/6378137,1/6378137,1/6356752.314245179],oneOverRadiiSquared:[1/40680631590769,1/40680631590769,1/40408299984661.445],maximumRadius:Math.max(6378137,6378137,6356752.314245179),centerToleranceSquared:.1},l=e=>e,f=new n.a;function h(e,t,r=l){return Object(s.m)(e)?(t[0]=r(e[0]),t[1]=r(e[1]),t[2]=e[2]):"longitude"in e?(t[0]=r(e.longitude),t[1]=r(e.latitude),t[2]=e.height):(t[0]=r(e.x),t[1]=r(e.y),t[2]=e.z),t}function d(e,t,r=l){return Object(s.m)(t)?(t[0]=r(e[0]),t[1]=r(e[1]),t[2]=e[2]):"longitude"in t?(t.longitude=r(e[0]),t.latitude=r(e[1]),t.height=e[2]):(t.x=r(e[0]),t.y=r(e[1]),t.z=e[2]),t}function p(e){if(!e)return!1;f.from(e);const{oneOverRadiiSquared:t,centerToleranceSquared:r}=c,n=e[0]*e[0]*t[0],i=e[1]*e[1]*t[1],o=e[2]*e[2]*t[2];return Math.abs(n+i+o-1)<r}const y=new n.a,m=new n.a,b=new n.a;const v=new n.a,g={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},w={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},O={east:new n.a,north:new n.a,up:new n.a,west:new n.a,south:new n.a,down:new n.a},_=new n.a,x=new n.a,k=new n.a;function T(e,t,r,n,o,a){const u=g[t]&&g[t][r];let c,l,f;Object(i.a)(u&&(!n||n===u));const h=v.copy(o);if(Object(s.j)(h.x,0,1e-14)&&Object(s.j)(h.y,0,1e-14)){const e=Math.sign(h.z);c=_.fromArray(w[t]),"east"!==t&&"west"!==t&&c.scale(e),l=x.fromArray(w[r]),"east"!==r&&"west"!==r&&l.scale(e),f=k.fromArray(w[n]),"east"!==n&&"west"!==n&&f.scale(e)}else{const{up:i,east:o,north:a}=O;o.set(-h.y,h.x,0).normalize(),e.geodeticSurfaceNormal(h,i),a.copy(i).cross(o);const{down:s,west:u,south:d}=O;s.copy(i).scale(-1),u.copy(o).scale(-1),d.copy(a).scale(-1),c=O[t],l=O[r],f=O[n]}return a[0]=c.x,a[1]=c.y,a[2]=c.z,a[3]=0,a[4]=l.x,a[5]=l.y,a[6]=l.z,a[7]=0,a[8]=f.x,a[9]=f.y,a[10]=f.z,a[11]=0,a[12]=h.x,a[13]=h.y,a[14]=h.z,a[15]=1,a}const S=new n.a,P=new n.a,j=new n.a,E=new n.a,M=new n.a,R=new n.a;let A;class I{static get WGS84(){return A=A||new I(6378137,6378137,6356752.314245179),A}constructor(e=0,t=0,r=0){Object(i.a)(e>=0),Object(i.a)(t>=0),Object(i.a)(r>=0),this.radii=new n.a(e,t,r),this.radiiSquared=new n.a(e*e,t*t,r*r),this.radiiToTheFourth=new n.a(e*e*e*e,t*t*t*t,r*r*r*r),this.oneOverRadii=new n.a(0===e?0:1/e,0===t?0:1/t,0===r?0:1/r),this.oneOverRadiiSquared=new n.a(0===e?0:1/(e*e),0===t?0:1/(t*t),0===r?0:1/(r*r)),this.minimumRadius=Math.min(e,t,r),this.maximumRadius=Math.max(e,t,r),this.centerToleranceSquared=o.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(e){return this===e||Boolean(e&&this.radii.equals(e.radii))}toString(){return this.radii.toString()}cartographicToCartesian(e,t=[0,0,0]){const r=P,n=j,[,,i]=e;this.geodeticSurfaceNormalCartographic(e,r),n.copy(this.radiiSquared).scale(r);const o=Math.sqrt(r.dot(n));return n.scale(1/o),r.scale(i),n.add(r),n.to(t)}cartesianToCartographic(e,t=[0,0,0]){R.from(e);const r=this.scaleToGeodeticSurface(R,E);if(!r)return;const n=this.geodeticSurfaceNormal(r,P),i=M;i.copy(R).subtract(r);const o=Math.atan2(n.y,n.x),a=Math.asin(n.z),c=Math.sign(u.d(i,R))*u.g(i);return d([o,a,c],t,s.f._cartographicRadians?l:s.r)}eastNorthUpToFixedFrame(e,t=new a.a){return T(this,"east","north","up",e,t)}localFrameToFixedFrame(e,t,r,n,i=new a.a){return T(this,e,t,r,n,i)}geocentricSurfaceNormal(e,t=[0,0,0]){return S.from(e).normalize().to(t)}geodeticSurfaceNormalCartographic(e,t=[0,0,0]){const r=function(e,t=f){return h(e,t,s.f._cartographicRadians?l:s.s)}(e),n=r[0],i=r[1],o=Math.cos(i);return S.set(o*Math.cos(n),o*Math.sin(n),Math.sin(i)).normalize(),S.to(t)}geodeticSurfaceNormal(e,t=[0,0,0]){return S.from(e).scale(this.oneOverRadiiSquared).normalize().to(t)}scaleToGeodeticSurface(e,t){return function(e,t,r=new n.a){const{oneOverRadii:i,oneOverRadiiSquared:a,centerToleranceSquared:s}=t;y.from(e);const u=e.x,c=e.y,l=e.z,f=i.x,h=i.y,d=i.z,p=u*u*f*f,v=c*c*h*h,g=l*l*d*d,w=p+v+g,O=Math.sqrt(1/w);if(!Number.isFinite(O))return;const _=m;if(_.copy(e).scale(O),w<s)return _.to(r);const x=a.x,k=a.y,T=a.z,S=b;S.set(_.x*x*2,_.y*k*2,_.z*T*2);let P,j,E,M,R=(1-O)*e.len()/(.5*S.len()),A=0;do{R-=A,P=1/(1+R*x),j=1/(1+R*k),E=1/(1+R*T);const e=P*P,t=j*j,r=E*E;M=p*e+v*t+g*r-1;A=M/(-2*(p*(e*P)*x+v*(t*j)*k+g*(r*E)*T))}while(Math.abs(M)>o.a.EPSILON12);return y.scale([P,j,E]).to(r)}(e,this,t)}scaleToGeocentricSurface(e,t=[0,0,0]){E.from(e);const r=E.x,n=E.y,i=E.z,o=this.oneOverRadiiSquared,a=1/Math.sqrt(r*r*o.x+n*n*o.y+i*i*o.z);return E.multiplyScalar(a).to(t)}transformPositionToScaledSpace(e,t=[0,0,0]){return E.from(e).scale(this.oneOverRadii).to(t)}transformPositionFromScaledSpace(e,t=[0,0,0]){return E.from(e).scale(this.radii).to(t)}getSurfaceNormalIntersectionWithZAxis(e,t=0,r=[0,0,0]){Object(i.a)(Object(s.j)(this.radii.x,this.radii.y,o.a.EPSILON15)),Object(i.a)(this.radii.z>0),E.from(e);const n=E.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(n)>=this.radii.z-t))return E.set(0,0,n).to(r)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(16),i=r(2),o=r(1),a=r(9);class s extends n.a{get ELEMENTS(){return Object(a.a)(!1),0}get RANK(){return Object(a.a)(!1),0}toString(){let e="[";if(o.f.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,r){return this[t*this.RANK+e]=Object(i.a)(r),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let e=0;e<this.RANK;++e)t[e]=this[r+e];return t}setColumn(e,t){const r=e*this.RANK;for(let e=0;e<this.RANK;++e)this[r+e]=t[e];return this}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return i.assert}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return o.isBrowser}}),Object.defineProperty(t,"isWorker",{enumerable:!0,get:function(){return o.isWorker}}),Object.defineProperty(t,"WorkerJob",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"WorkerThread",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"WorkerFarm",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"WorkerPool",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"WorkerBody",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"processOnWorker",{enumerable:!0,get:function(){return f.processOnWorker}}),Object.defineProperty(t,"canProcessOnWorker",{enumerable:!0,get:function(){return f.canProcessOnWorker}}),Object.defineProperty(t,"createWorker",{enumerable:!0,get:function(){return h.createWorker}}),Object.defineProperty(t,"getWorkerURL",{enumerable:!0,get:function(){return d.getWorkerURL}}),Object.defineProperty(t,"validateWorkerVersion",{enumerable:!0,get:function(){return p.validateWorkerVersion}}),Object.defineProperty(t,"getTransferList",{enumerable:!0,get:function(){return y.getTransferList}}),Object.defineProperty(t,"getLibraryUrl",{enumerable:!0,get:function(){return m.getLibraryUrl}}),Object.defineProperty(t,"loadLibrary",{enumerable:!0,get:function(){return m.loadLibrary}}),Object.defineProperty(t,"AsyncQueue",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"ChildProcessProxy",{enumerable:!0,get:function(){return v.default}}),t.NullWorker=void 0;var n=r(34),i=r(17),o=r(39),a=g(r(54)),s=g(r(40)),u=g(r(55)),c=g(r(56)),l=g(r(57)),f=r(83),h=r(85),d=r(58),p=r(86),y=r(41),m=r(87),b=g(r(59)),v=g(r(89));function g(e){return e&&e.__esModule?e:{default:e}}var w={id:"null",name:"null",module:"worker-utils",version:n.VERSION,options:{null:{}}};t.NullWorker=w},function(e,t,r){"use strict";(function(e,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.nodeVersion=t.isMobile=t.isWorker=t.isBrowser=t.document=t.global=t.window=t.self=void 0;var i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},o=i.self||i.window||i.global||{};t.self=o;var a=i.window||i.self||i.global||{};t.window=a;var s=i.global||i.self||i.window||{};t.global=s;var u=i.document||{};t.document=u;var c="object"!==(void 0===r?"undefined":n(r))||"[object process]"!==String(r)||r.browser;t.isBrowser=c;var l="function"==typeof importScripts;t.isWorker=l;var f="undefined"!=typeof window&&void 0!==window.orientation;t.isMobile=f;var h=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version),d=h&&parseFloat(h[1])||0;t.nodeVersion=d}).call(this,r(25),r(21))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(17),i=r(82),o=r(41);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){},c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"name",void 0),s(this,"source",void 0),s(this,"url",void 0),s(this,"terminated",!1),s(this,"worker",void 0),s(this,"onMessage",void 0),s(this,"onError",void 0),s(this,"_loadableURL","");var r=t.name,i=t.source,o=t.url;(0,n.assert)(i||o),this.name=r,this.source=i,this.url=o,this.onMessage=u,this.onError=function(e){return console.log(e)},this.worker=this._createBrowserWorker()}var t,r,c;return t=e,c=[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}],(r=[{key:"destroy",value:function(){this.onMessage=u,this.onError=u,this.worker.terminate(),this.terminated=!0}},{key:"isRunning",get:function(){return Boolean(this.onMessage)}},{key:"postMessage",value:function(e,t){t=t||(0,o.getTransferList)(e),this.worker.postMessage(e,t)}},{key:"_getErrorFromErrorEvent",value:function(e){var t="Failed to load ";return t+="worker ".concat(this.name,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}},{key:"_createBrowserWorker",value:function(){var e=this;this._loadableURL=(0,i.getLoadableWorkerURL)({source:this.source,url:this.url});var t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=function(t){t.data?e.onMessage(t.data):e.onError(new Error("No data received"))},t.onerror=function(t){e.onError(e._getErrorFromErrorEvent(t)),e.terminated=!0},t.onmessageerror=function(e){return console.error(e)},t}}])&&a(t.prototype,r),c&&a(t,c),e}();t.default=c},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}Object.defineProperty(t,"__esModule",{value:!0}),t.getTransferList=function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0,a=o||new Set;if(t){if(i(t))a.add(t);else if(i(t.buffer))a.add(t.buffer);else if(ArrayBuffer.isView(t));else if(r&&"object"===n(t))for(var s in t)e(t[s],r,a)}else;return void 0===o?Array.from(a):[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=r(4),o=r(48),a=r(67),s=r(27),u=r(75),c=r(125),l=r(76),f=r(126),h=(n=r(28))&&n.__esModule?n:{default:n};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=new i.Vector3;var w=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";m(this,e),v(this,"tileset",void 0),v(this,"header",void 0),v(this,"id",void 0),v(this,"url",void 0),v(this,"parent",void 0),v(this,"refine",void 0),v(this,"type",void 0),v(this,"contentUrl",void 0),v(this,"lodMetricType",void 0),v(this,"lodMetricValue",void 0),v(this,"boundingVolume",void 0),v(this,"content",void 0),v(this,"contentState",void 0),v(this,"gpuMemoryUsageInBytes",void 0),v(this,"children",void 0),v(this,"depth",void 0),v(this,"viewportIds",void 0),v(this,"transform",void 0),v(this,"userData",void 0),v(this,"computedTransform",void 0),v(this,"hasEmptyContent",void 0),v(this,"hasTilesetContent",void 0),v(this,"traverser",void 0),v(this,"_cacheNode",void 0),v(this,"_frameNumber",void 0),v(this,"_lodJudge",void 0),v(this,"_expireDate",void 0),v(this,"_expiredContent",void 0),v(this,"_shouldRefine",void 0),v(this,"_distanceToCamera",void 0),v(this,"_centerZDepth",void 0),v(this,"_screenSpaceError",void 0),v(this,"_visibilityPlaneMask",void 0),v(this,"_visible",void 0),v(this,"_inRequestVolume",void 0),v(this,"_stackLength",void 0),v(this,"_selectionDepth",void 0),v(this,"_touchedFrame",void 0),v(this,"_visitedFrame",void 0),v(this,"_selectedFrame",void 0),v(this,"_requestedFrame",void 0),v(this,"_priority",void 0),v(this,"_contentBoundingVolume",void 0),v(this,"_viewerRequestVolume",void 0),v(this,"_initialTransform",void 0),this.header=r,this.tileset=t,this.id=o||r.id,this.url=r.url,this.parent=n,this.refine=this._getRefine(r.refine),this.type=r.type,this.contentUrl=r.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=s.TILE_CONTENT_STATE.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new h.default({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new i.Matrix4,this.transform=new i.Matrix4,this._initializeLodMetric(r),this._initializeTransforms(r),this._initializeBoundingVolumes(r),this._initializeContent(r),this._initializeRenderingState(r),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,Object.seal(this)}var t,r,n,d,w;return t=e,(r=[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return null===this.header}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===s.TILE_CONTENT_STATE.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===s.TILE_CONTENT_STATE.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===s.TILE_CONTENT_STATE.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===s.TILE_CONTENT_STATE.FAILED}},{key:"getScreenSpaceError",value:function(e,t){switch(this.tileset.type){case s.TILESET_TYPE.I3S:return(0,l.getI3ScreenSize)(this,e);case s.TILESET_TYPE.TILES3D:return(0,c.getTiles3DScreenSpaceError)(this,e,t);default:throw new Error("Unsupported tileset type")}}},{key:"_getPriority",value:function(){var e=this.tileset._traverser,t=e.options.skipLevelOfDetail,r=this.refine===s.TILE_REFINEMENT.ADD||t;if(r&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(this.contentState===s.TILE_CONTENT_STATE.UNLOADED)return-1;var n=this.parent,i=!n||r&&0!==this._screenSpaceError&&!n.hasTilesetContent?this._screenSpaceError:n._screenSpaceError,o=e.root?e.root._screenSpaceError:0;return Math.max(o-i,0)}},{key:"loadContent",value:(d=regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasEmptyContent){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.content){e.next=4;break}return e.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=s.TILE_CONTENT_STATE.LOADING,e.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(t=e.sent){e.next=13;break}return this.contentState=s.TILE_CONTENT_STATE.UNLOADED,e.abrupt("return",!1);case 13:return e.prev=13,r=this.tileset.getTileUrl(this.contentUrl),n=this.tileset.loader,i=p(p({},this.tileset.loadOptions),{},v({},n.id,p(p({},this.tileset.loadOptions[n.id]),{},{isTileset:"json"===this.type},this._getLoaderSpecificOptions(n.id)))),e.next=19,(0,a.load)(r,n,i);case 19:if(this.content=e.sent,!this.tileset.options.contentLoader){e.next=23;break}return e.next=23,this.tileset.options.contentLoader(this);case 23:return this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=s.TILE_CONTENT_STATE.READY,this._onContentLoaded(),e.abrupt("return",!0);case 29:throw e.prev=29,e.t0=e.catch(13),this.contentState=s.TILE_CONTENT_STATE.FAILED,e.t0;case 33:return e.prev=33,t.done(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[13,29,33,36]])})),w=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=d.apply(e,t);function o(e){y(i,r,n,o,a,"next",e)}function a(e){y(i,r,n,o,a,"throw",e)}o(void 0)}))},function(){return w.apply(this,arguments)})},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=s.TILE_CONTENT_STATE.UNLOADED,!0}},{key:"updateVisibility",value:function(e,t){if(this._frameNumber!==e.frameNumber){var r=this.parent,n=r?r._visibilityPlaneMask:o.CullingVolume.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){var i=r?r.computedTransform:this.tileset.modelMatrix;this._updateTransform(i)}this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,n),this._visible=this._visibilityPlaneMask!==o.CullingVolume.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._frameNumber=e.frameNumber,this.viewportIds=t}}},{key:"visibility",value:function(e,t){var r=e.cullingVolume,n=this.boundingVolume;return r.computeVisibilityWithPlaneMask(n,t)}},{key:"contentVisibility",value:function(){return!0}},{key:"distanceToTile",value:function(e){var t=this.boundingVolume;return Math.sqrt(Math.max(t.distanceSquaredTo(e.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(e){var t=e.camera,r=this.boundingVolume;return g.subVectors(r.center,t.position),t.direction.dot(g)}},{key:"insideViewerRequestVolume",value:function(e){var t=this._viewerRequestVolume;return!t||t.distanceSquaredTo(e.camera.position)<=0}},{key:"updateExpiration",value:function(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){var e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=s.TILE_CONTENT_STATE.EXPIRED,this._expiredContent=this.content)}}},{key:"extras",get:function(){return this.header.extras}},{key:"_initializeLodMetric",value:function(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(e){this.transform=e.transform?new i.Matrix4(e.transform):new i.Matrix4;var t=this.parent,r=this.tileset,n=t&&t.computedTransform?t.computedTransform.clone():r.modelMatrix.clone();this.computedTransform=new i.Matrix4(n).multiplyRight(this.transform);var o=t&&t._initialTransform?t._initialTransform.clone():new i.Matrix4;this._initialTransform=new i.Matrix4(o).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}},{key:"_initializeContent",value:function(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=s.TILE_CONTENT_STATE.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(e){this.depth=e.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=o.CullingVolume.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(e){return e||this.parent&&this.parent.refine||s.TILE_REFINEMENT.REPLACE}},{key:"_isTileset",value:function(){return-1!==this.contentUrl.indexOf(".json")}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(e){this.boundingVolume=(0,u.createBoundingVolume)(e.boundingVolume,this.computedTransform,this.boundingVolume);var t=e.content;t&&(t.boundingVolume&&(this._contentBoundingVolume=(0,u.createBoundingVolume)(t.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=(0,u.createBoundingVolume)(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Matrix4,t=e.clone().multiplyRight(this.transform),r=!t.equals(this.computedTransform);r&&(this.computedTransform=t,this._updateBoundingVolume(this.header))}},{key:"_getLoaderSpecificOptions",value:function(e){switch(e){case"i3s":return p(p({},this.tileset.options.i3s),{},{tile:this.header,tileset:this.tileset.tileset,isTileHeader:!1});case"3d-tiles":case"cesium-ion":default:return(0,f.get3dTilesOptions)(this.tileset.tileset)}}}])&&b(t.prototype,r),n&&b(t,n),e}();t.default=w},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFile=function(e,t){return s.apply(this,arguments)};var n=r(6),i=r(68);function o(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,u,"next",e)}function u(e){o(a,n,i,s,u,"throw",e)}s(void 0)}))}}function s(){return(s=a(regeneratorRuntime.mark((function e(t,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}return t=(0,n.resolvePath)(t),o=r,null!=r&&r.fetch&&"function"!=typeof(null==r?void 0:r.fetch)&&(o=r.fetch),e.next=6,fetch(t,o);case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,(0,i.makeResponse)(t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeFile=function(e,t,r){return a.apply(this,arguments)},t.writeFileSync=function(e,t,r){e=(0,n.resolvePath)(e),n.isBrowser||n.fs.writeFileSync(e,(0,n.toBuffer)(t),{flag:"w"});(0,n.assert)(!1)};var n=r(6);function i(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}function a(){return(a=o(regeneratorRuntime.mark((function e(t,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,n.resolvePath)(t),n.isBrowser){e.next=4;break}return e.next=4,n.fs.writeFile(t,(0,n.toBuffer)(r),{flag:"w"});case 4:(0,n.assert)(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=p;var n=r(38),i=r(6),o=r(18),a=r(14),s=r(46),u=r(47),c=r(26),l=r(35);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)}))}}function p(e,t,r,n){return y.apply(this,arguments)}function y(){return(y=d(regeneratorRuntime.mark((function e(t,r,i,s){var h,d,y,b,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,n.assert)(!s||"object"===f(s)),!r||Array.isArray(r)||(0,o.isLoaderObject)(r)||(s=void 0,i=r,r=void 0),e.next=4,t;case 4:return t=e.sent,i=i||{},h=(0,c.getResourceUrlAndType)(t),d=h.url,y=r,b=(0,u.getLoadersFromContext)(y,s),e.next=11,(0,l.selectLoader)(t,b,i);case 11:if(v=e.sent){e.next=14;break}return e.abrupt("return",null);case 14:return i=(0,a.normalizeOptions)(i,v,b,d),s=(0,u.getLoaderContext)({url:d,parse:p,loaders:b},i,s),e.next=18,m(v,t,i,s);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,r,n){return b.apply(this,arguments)}function b(){return(b=d(regeneratorRuntime.mark((function e(t,r,o,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,n.validateWorkerVersion)(t),e.next=3,(0,s.getArrayBufferOrStringFromData)(r,t,o);case 3:if(r=e.sent,!t.parseTextSync||"string"!=typeof r){e.next=7;break}return o.dataType="text",e.abrupt("return",t.parseTextSync(r,o,a,t));case 7:if(!(0,i.canParseWithWorker)(t,o)){e.next=11;break}return e.next=10,(0,i.parseWithWorker)(t,r,o,a,p);case 10:return e.abrupt("return",e.sent);case 11:if(!t.parseText||"string"!=typeof r){e.next=15;break}return e.next=14,t.parseText(r,o,a,t);case 14:return e.abrupt("return",e.sent);case 15:if(!t.parse){e.next=19;break}return e.next=18,t.parse(r,o,a,t);case 18:return e.abrupt("return",e.sent);case 19:throw(0,n.assert)(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArrayBufferOrStringFromDataSync=l,t.getArrayBufferOrStringFromData=function(e,t,r){return f.apply(this,arguments)},t.getAsyncIterableFromData=function(e,t){return h.apply(this,arguments)},t.getReadableStream=function(e){return d.apply(this,arguments)};var n=r(6),i=r(13),o=r(71),a=r(68);function s(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,u,"next",e)}function u(e){s(o,n,i,a,u,"throw",e)}a(void 0)}))}}var c="Cannot convert supplied data type";function l(e,t,r){if(t.text&&"string"==typeof e)return e;if((0,i.isBuffer)(e)&&(e=e.buffer),e instanceof ArrayBuffer){var n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);var o=e.buffer,a=e.byteLength||e.length;return 0===e.byteOffset&&a===o.byteLength||(o=o.slice(e.byteOffset,e.byteOffset+a)),o}throw new Error(c)}function f(){return(f=u(regeneratorRuntime.mark((function e(t,r,s){var u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!u){e.next=3;break}return e.abrupt("return",l(t,r));case 3:if(!(0,i.isBlob)(t)){e.next=7;break}return e.next=6,(0,a.makeResponse)(t);case 6:t=e.sent;case 7:if(!(0,i.isResponse)(t)){e.next=21;break}return f=t,e.next=11,(0,a.checkResponse)(f);case 11:if(!r.binary){e.next=17;break}return e.next=14,f.arrayBuffer();case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,f.text();case 19:e.t0=e.sent;case 20:return e.abrupt("return",e.t0);case 21:if((0,i.isReadableStream)(t)&&(t=(0,o.makeIterator)(t,s)),!(0,i.isIterable)(t)&&!(0,i.isAsyncIterable)(t)){e.next=24;break}return e.abrupt("return",(0,n.concatenateArrayBuffersAsync)(t));case 24:throw new Error(c);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=u(regeneratorRuntime.mark((function e(t,r){var n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,i.isIterator)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,i.isResponse)(t)){e.next=10;break}return n=t,e.next=6,(0,a.checkResponse)(n);case 6:return e.next=8,n.body;case 8:return s=e.sent,e.abrupt("return",(0,o.makeIterator)(s,r));case 10:if(!(0,i.isBlob)(t)&&!(0,i.isReadableStream)(t)){e.next=12;break}return e.abrupt("return",(0,o.makeIterator)(t,r));case 12:if(!(0,i.isAsyncIterable)(t)){e.next=14;break}return e.abrupt("return",t[Symbol.asyncIterator]());case 14:return e.abrupt("return",p(t));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=u(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,i.isReadableStream)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,i.isResponse)(t)){e.next=4;break}return e.abrupt("return",t.body);case 4:return e.next=6,(0,a.makeResponse)(t);case 6:return r=e.sent,e.abrupt("return",r.body);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){if(ArrayBuffer.isView(e))return regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buffer;case 2:case"end":return t.stop()}}),t)}))();if(e instanceof ArrayBuffer)return regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)}))();if((0,i.isIterator)(e))return e;if((0,i.isIterable)(e))return e[Symbol.iterator]();throw new Error(c)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLoaderContext=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r)return r;var i=s({fetch:(0,n.getFetchFunction)(t,e)},e);Array.isArray(i.loaders)||(i.loaders=null);return i},t.getLoadersFromContext=function(e,t){if(!t&&e&&!Array.isArray(e))return e;var r;e&&(r=Array.isArray(e)?e:[e]);if(t&&t.loaders){var n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[].concat(i(r),i(n)):n}return r&&r.length?r:null};var n=r(14);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";r.r(t),r.d(t,"INTERSECTION",(function(){return n})),r.d(t,"AxisAlignedBoundingBox",(function(){return s})),r.d(t,"BoundingSphere",(function(){return f})),r.d(t,"OrientedBoundingBox",(function(){return M})),r.d(t,"CullingVolume",(function(){return V})),r.d(t,"Plane",(function(){return N})),r.d(t,"_PerspectiveOffCenterFrustum",(function(){return Z})),r.d(t,"_PerspectiveFrustum",(function(){return G})),r.d(t,"makeBoundingSphereFromPoints",(function(){return ue})),r.d(t,"makeAxisAlignedBoundingBoxFromPoints",(function(){return je})),r.d(t,"makeOrientedBoundingBoxFromPoints",(function(){return Pe})),r.d(t,"computeEigenDecomposition",(function(){return ye})),r.d(t,"Intersect",(function(){return n})),r.d(t,"INTERSECT",(function(){return n}));const n=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});var i=r(20);const o=new i.a,a=new i.a;class s{constructor(e=[0,0,0],t=[0,0,0],r=null){r=r||o.copy(e).add(t).scale(.5),this.center=new i.a(r),this.halfDiagonal=new i.a(t).subtract(this.center),this.minimum=new i.a(e),this.maximum=new i.a(t)}clone(){return new s(this.minimum,this.maximum,this.center)}equals(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:t}=this,r=a.from(e.normal),i=t.x*Math.abs(r.x)+t.y*Math.abs(r.y)+t.z*Math.abs(r.z),o=this.center.dot(r)+e.distance;return o-i>0?n.INSIDE:o+i<0?n.OUTSIDE:n.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=o.from(e).subtract(this.center),{halfDiagonal:r}=this;let n,i=0;return n=Math.abs(t.x)-r.x,n>0&&(i+=n*n),n=Math.abs(t.y)-r.y,n>0&&(i+=n*n),n=Math.abs(t.z)-r.z,n>0&&(i+=n*n),i}}var u=r(5);const c=new i.a,l=new i.a;class f{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new i.a,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=c.from(t),this.center=(new i.a).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new f(this.center,this.radius)}union(e){const t=this.center,r=this.radius,n=e.center,i=e.radius,o=c.copy(n).subtract(t),a=o.magnitude();if(r>=a+i)return this.clone();if(i>=a+r)return e.clone();const s=.5*(r+a+i);return l.copy(o).scale((-r+s)/a).add(t),this.center.copy(l),this.radius=s,this}expand(e){const t=(e=c.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=u.d(c,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){return(e=c.from(e)).subtract(this.center).lengthSquared()-this.radius*this.radius}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}intersectPlane(e){const t=this.center,r=this.radius,i=e.normal.dot(t)+e.distance;return i<-r?n.OUTSIDE:i<r?n.INTERSECTING:n.INSIDE}}var h=r(51),d=r(31);const p=new i.a,y=new i.a,m=new i.a,b=new i.a,v=new i.a,g=new i.a,w=new i.a,O=0,_=1,x=2,k=3,T=4,S=5,P=6,j=7,E=8;class M{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new i.a).from(e),this.halfAxes=new h.a(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2);return[new i.a(e).len(),new i.a(t).len(),new i.a(r).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),n=new i.a(e).normalize(),o=new i.a(t).normalize(),a=new i.a(r).normalize();return(new d.a).fromMatrix3(new h.a([...n,...o,...a]))}fromCenterHalfSizeQuaternion(e,t,r){const n=new d.a(r),o=(new h.a).fromQuaternion(n);return o[0]=o[0]*t[0],o[1]=o[1]*t[0],o[2]=o[2]*t[0],o[3]=o[3]*t[1],o[4]=o[4]*t[1],o[5]=o[5]*t[1],o[6]=o[6]*t[2],o[7]=o[7]*t[2],o[8]=o[8]*t[2],this.center=(new i.a).from(e),this.halfAxes=o,this}clone(){return new M(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new f){const t=this.halfAxes,r=t.getColumn(0,m),n=t.getColumn(1,b),i=t.getColumn(2,v),o=p.copy(r).add(n).add(i);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,r=e.normal,i=this.halfAxes,o=r.x,a=r.y,s=r.z,u=Math.abs(o*i[O]+a*i[_]+s*i[x])+Math.abs(o*i[k]+a*i[T]+s*i[S])+Math.abs(o*i[P]+a*i[j]+s*i[E]),c=r.dot(t)+e.distance;return c<=-u?n.OUTSIDE:c>=u?n.INSIDE:n.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=y.from(e).subtract(this.center),r=this.halfAxes,n=r.getColumn(0,m),i=r.getColumn(1,b),o=r.getColumn(2,v),a=n.magnitude(),s=i.magnitude(),u=o.magnitude();n.normalize(),i.normalize(),o.normalize();let c,l=0;return c=Math.abs(t.dot(n))-a,c>0&&(l+=c*c),c=Math.abs(t.dot(i))-s,c>0&&(l+=c*c),c=Math.abs(t.dot(o))-u,c>0&&(l+=c*c),l}computePlaneDistances(e,t,r=[-0,-0]){let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,s=a.getColumn(0,m),u=a.getColumn(1,b),c=a.getColumn(2,v),l=g.copy(s).add(u).add(c).add(o),f=w.copy(l).subtract(e);let h=t.dot(f);return n=Math.min(h,n),i=Math.max(h,i),l.copy(o).add(s).add(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),n=Math.min(h,n),i=Math.max(h,i),l.copy(o).add(s).subtract(u).add(c),f.copy(l).subtract(e),h=t.dot(f),n=Math.min(h,n),i=Math.max(h,i),l.copy(o).add(s).subtract(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),n=Math.min(h,n),i=Math.max(h,i),o.copy(l).subtract(s).add(u).add(c),f.copy(l).subtract(e),h=t.dot(f),n=Math.min(h,n),i=Math.max(h,i),o.copy(l).subtract(s).add(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),n=Math.min(h,n),i=Math.max(h,i),o.copy(l).subtract(s).subtract(u).add(c),f.copy(l).subtract(e),h=t.dot(f),n=Math.min(h,n),i=Math.max(h,i),o.copy(l).subtract(s).subtract(u).subtract(c),f.copy(l).subtract(e),h=t.dot(f),n=Math.min(h,n),i=Math.max(h,i),r[0]=n,r[1]=i,r}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,m);t.transformAsPoint(e);const r=this.halfAxes.getColumn(1,b);r.transformAsPoint(e);const n=this.halfAxes.getColumn(2,v);return n.transformAsPoint(e),this.halfAxes=new h.a([...t,...r,...n]),this}getTransform(){throw new Error("not implemented")}}var R=r(9),A=r(1);const I=new i.a,L=new i.a;class N{constructor(e=[0,0,1],t=0){this.normal=new i.a,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Object(R.a)(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=I.from(e),this.normal.from(t).normalize();const r=-this.normal.dot(e);return this.distance=r,this}fromCoefficients(e,t,r,n){return this.normal.set(e,t,r),Object(R.a)(Object(A.j)(this.normal.len(),1)),this.distance=n,this}clone(e){return new N(this.normal,this.distance)}equals(e){return Object(A.j)(this.distance,e.distance)&&Object(A.j)(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=L.copy(this.normal).transformAsVector(e).normalize(),r=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(r,t)}projectPointOntoPlane(e,t=[0,0,0]){e=I.from(e);const r=this.getPointDistance(e),n=L.copy(this.normal).scale(r);return e.subtract(n).to(t)}}const C=[new i.a([1,0,0]),new i.a([0,1,0]),new i.a([0,0,1])],D=new i.a,B=new i.a;new N(new i.a(1,0,0),0);class V{static get MASK_OUTSIDE(){return 4294967295}static get MASK_INSIDE(){return 0}static get MASK_INDETERMINATE(){return 2147483647}constructor(e=[]){this.planes=e,Object(R.a)(this.planes.every(e=>e instanceof N))}fromBoundingSphere(e){this.planes.length=2*C.length;const t=e.center,r=e.radius;let n=0;for(const e of C){let i=this.planes[n],o=this.planes[n+1];i||(i=this.planes[n]=new N),o||(o=this.planes[n+1]=new N);const a=D.copy(e).scale(-r).add(t);e.dot(a);i.fromPointNormal(a,e);const s=D.copy(e).scale(r).add(t),u=B.copy(e).negate();u.dot(s);o.fromPointNormal(s,u),n+=2}return this}computeVisibility(e){Object(R.a)(e);let t=n.INSIDE;for(const r of this.planes){switch(e.intersectPlane(r)){case n.OUTSIDE:return n.OUTSIDE;case n.INTERSECTING:t=n.INTERSECTING}}return t}computeVisibilityWithPlaneMask(e,t){if(Object(R.a)(e,"boundingVolume is required."),Object(R.a)(Number.isFinite(t),"parentPlaneMask is required."),t===V.MASK_OUTSIDE||t===V.MASK_INSIDE)return t;let r=V.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&0==(t&a))continue;const s=i[o],u=e.intersectPlane(s);if(u===n.OUTSIDE)return V.MASK_OUTSIDE;u===n.INTERSECTING&&(r|=a)}return r}}var q=r(24);const F=new i.a,W=new i.a,U=new i.a,z=new i.a,Y=new i.a;class Z{constructor(e={}){e={near:1,far:5e8,...e},this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this._cullingVolume=new V([new N,new N,new N,new N,new N,new N]),this._perspectiveMatrix=new q.a,this._infinitePerspective=new q.a}clone(){return new Z({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}equals(e){return e&&e instanceof Z&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far}get projectionMatrix(){return X(this),this._perspectiveMatrix}get infiniteProjectionMatrix(){return X(this),this._infinitePerspective}computeCullingVolume(e,t,r){Object(R.a)(e,"position is required."),Object(R.a)(t,"direction is required."),Object(R.a)(r,"up is required.");const n=this._cullingVolume.planes;r=F.copy(r).normalize();const o=W.copy(t).cross(r).normalize(),a=U.copy(t).multiplyByScalar(this.near).add(e),s=z.copy(t).multiplyByScalar(this.far).add(e);let u=Y;return u.copy(o).multiplyByScalar(this.left).add(a).subtract(e).cross(r),n[0].fromPointNormal(e,u),u.copy(o).multiplyByScalar(this.right).add(a).subtract(e).cross(r).negate(),n[1].fromPointNormal(e,u),u.copy(r).multiplyByScalar(this.bottom).add(a).subtract(e).cross(o).negate(),n[2].fromPointNormal(e,u),u.copy(r).multiplyByScalar(this.top).add(a).subtract(e).cross(o),n[3].fromPointNormal(e,u),u=(new i.a).copy(t),n[4].fromPointNormal(a,u),u.negate(),n[5].fromPointNormal(s,u),this._cullingVolume}getPixelDimensions(e,t,r,n){X(this),Object(R.a)(Number.isFinite(e)&&Number.isFinite(t)),Object(R.a)(e>0),Object(R.a)(t>0),Object(R.a)(r>0),Object(R.a)(n);const i=1/this.near;let o=this.top*i;const a=2*r*o/t;o=this.right*i;const s=2*r*o/e;return n.x=s,n.y=a,n}}function X(e){Object(R.a)(Number.isFinite(e.right)&&Number.isFinite(e.left)&&Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.near)&&Number.isFinite(e.far));const{top:t,bottom:r,right:n,left:i,near:o,far:a}=e;t===e._top&&r===e._bottom&&i===e._left&&n===e._right&&o===e._near&&a===e._far||(Object(R.a)(e.near>0&&e.near<e.far,"near must be greater than zero and less than far."),e._left=i,e._right=n,e._top=t,e._bottom=r,e._near=o,e._far=a,e._perspectiveMatrix=(new q.a).frustum({left:i,right:n,bottom:r,top:t,near:o,far:a}),e._infinitePerspective=(new q.a).frustum({left:i,right:n,bottom:r,top:t,near:o,far:1/0}))}class G{constructor(e={}){e={near:1,far:5e8,xOffset:0,yOffset:0,...e},this._offCenterFrustum=new Z,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this.xOffset=e.xOffset,this._xOffset=this.xOffset,this.yOffset=e.yOffset,this._yOffset=this.yOffset}clone(){return new G({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}equals(e){return null!=e&&e instanceof G&&(Q(this),Q(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this.near===e.near&&this.far===e.far&&this._offCenterFrustum.equals(e._offCenterFrustum))}get projectionMatrix(){return Q(this),this._offCenterFrustum.projectionMatrix}get infiniteProjectionMatrix(){return Q(this),this._offCenterFrustum.infiniteProjectionMatrix}get fovy(){return Q(this),this._fovy}get sseDenominator(){return Q(this),this._sseDenominator}computeCullingVolume(e,t,r){return Q(this),this._offCenterFrustum.computeCullingVolume(e,t,r)}getPixelDimensions(e,t,r,n){return Q(this),this._offCenterFrustum.getPixelDimensions(e,t,r,n)}}function Q(e){Object(R.a)(Number.isFinite(e.fov)&&Number.isFinite(e.aspectRatio)&&Number.isFinite(e.near)&&Number.isFinite(e.far));const t=e._offCenterFrustum;e.fov===e._fov&&e.aspectRatio===e._aspectRatio&&e.near===e._near&&e.far===e._far&&e.xOffset===e._xOffset&&e.yOffset===e._yOffset||(Object(R.a)(e.fov>=0&&e.fov<Math.PI),Object(R.a)(e.aspectRatio>0),Object(R.a)(e.near>=0&&e.near<e.far),e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset,t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset)}const H=new i.a,J=new i.a,K=new i.a,$=new i.a,ee=new i.a,te=new i.a,re=new i.a,ne=new i.a,ie=new i.a,oe=new i.a,ae=new i.a,se=new i.a;Math.PI;function ue(e,t=new f){if(!e||0===e.length)return t.fromCenterRadius([0,0,0],0);const r=re.copy(e[0]),n=H.copy(r),i=J.copy(r),o=K.copy(r),a=$.copy(r),s=ee.copy(r),u=te.copy(r);for(const t of e){r.copy(t);const e=r.x,c=r.y,l=r.z;e<n.x&&r.copy(n),e>a.x&&r.copy(a),c<i.y&&r.copy(i),c>s.y&&r.copy(s),l<o.z&&r.copy(o),l>u.z&&r.copy(u)}const c=ne.copy(a).subtract(n).magnitudeSquared(),l=ne.copy(s).subtract(i).magnitudeSquared(),h=ne.copy(u).subtract(o).magnitudeSquared();let d=n,p=a,y=c;l>y&&(y=l,d=i,p=s),h>y&&(y=h,d=o,p=u);const m=ie;m.x=.5*(d.x+p.x),m.y=.5*(d.y+p.y),m.z=.5*(d.z+p.z);let b=ne.copy(p).subtract(m).magnitudeSquared(),v=Math.sqrt(b);const g=oe;g.x=n.x,g.y=i.y,g.z=o.z;const w=ae;w.x=a.x,w.y=s.y,w.z=u.z;const O=se.copy(g).add(w).multiplyByScalar(.5);let _=0;for(const t of e){r.copy(t);const e=ne.copy(r).subtract(O).magnitude();e>_&&(_=e);const n=ne.copy(r).subtract(m).magnitudeSquared();if(n>b){const e=Math.sqrt(n);v=.5*(v+e),b=v*v;const t=e-v;m.x=(v*m.x+t*r.x)/e,m.y=(v*m.y+t*r.y)/e,m.z=(v*m.z+t*r.z)/e}}return v<_?(m.to(t.center),t.radius=v):(O.to(t.center),t.radius=_),t}var ce=r(52);const le=new h.a,fe=new h.a,he=new h.a,de=new h.a,pe=new h.a;function ye(e,t={}){const r=ce.a.EPSILON20;let n=0,i=0;const o=fe,a=he;o.identity(),a.copy(e);const s=r*function(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}(a);for(;i<10&&ve(a)>s;)ge(a,de),pe.copy(de).transpose(),a.multiplyRight(de),a.multiplyLeft(pe),o.multiplyRight(de),++n>2&&(++i,n=0);return t.unitary=o.toTarget(t.unitary),t.diagonal=a.toTarget(t.diagonal),t}const me=[1,0,0],be=[2,2,1];function ve(e){let t=0;for(let r=0;r<3;++r){const n=e[le.getElementIndex(be[r],me[r])];t+=2*n*n}return Math.sqrt(t)}function ge(e,t){const r=ce.a.EPSILON15;let n=0,i=1;for(let t=0;t<3;++t){const r=Math.abs(e[le.getElementIndex(be[t],me[t])]);r>n&&(i=t,n=r)}const o=me[i],a=be[i];let s=1,u=0;if(Math.abs(e[le.getElementIndex(a,o)])>r){const t=(e[le.getElementIndex(a,a)]-e[le.getElementIndex(o,o)])/2/e[le.getElementIndex(a,o)];let r;r=t<0?-1/(-t+Math.sqrt(1+t*t)):1/(t+Math.sqrt(1+t*t)),s=1/Math.sqrt(1+r*r),u=r*s}return h.a.IDENTITY.to(t),t[le.getElementIndex(o,o)]=t[le.getElementIndex(a,a)]=s,t[le.getElementIndex(a,o)]=u,t[le.getElementIndex(o,a)]=-u,t}const we=new i.a,Oe=new i.a,_e=new i.a,xe=new i.a,ke=new i.a,Te=new h.a,Se={diagonal:new h.a,unitary:new h.a};function Pe(e,t=new M){if(!e||0===e.length)return t.halfAxes=new h.a([0,0,0,0,0,0,0,0,0]),t.center=new i.a,t;const r=e.length,n=new i.a(0,0,0);for(const t of e)n.add(t);const o=1/r;n.multiplyByScalar(o);let a=0,s=0,u=0,c=0,l=0,f=0;for(const t of e){const e=we.copy(t).subtract(n);a+=e.x*e.x,s+=e.x*e.y,u+=e.x*e.z,c+=e.y*e.y,l+=e.y*e.z,f+=e.z*e.z}a*=o,s*=o,u*=o,c*=o,l*=o,f*=o;const d=Te;d[0]=a,d[1]=s,d[2]=u,d[3]=s,d[4]=c,d[5]=l,d[6]=u,d[7]=l,d[8]=f;const{unitary:p}=ye(d,Se),y=t.halfAxes.copy(p);let m=y.getColumn(0,_e),b=y.getColumn(1,xe),v=y.getColumn(2,ke),g=-Number.MAX_VALUE,w=-Number.MAX_VALUE,O=-Number.MAX_VALUE,_=Number.MAX_VALUE,x=Number.MAX_VALUE,k=Number.MAX_VALUE;for(const t of e)g=Math.max(t.dot(m),g),w=Math.max(t.dot(b),w),O=Math.max(t.dot(v),O),_=Math.min(t.dot(m),_),x=Math.min(t.dot(b),x),k=Math.min(t.dot(v),k);m=m.multiplyByScalar(.5*(_+g)),b=b.multiplyByScalar(.5*(x+w)),v=v.multiplyByScalar(.5*(k+O)),t.center.copy(m).add(b).add(v);const T=Oe.set(g-_,w-x,O-k).multiplyByScalar(.5),S=new h.a([T[0],0,0,0,T[1],0,0,0,T[2]]);return t.halfAxes.multiplyRight(S),t}function je(e,t=new s){if(!e||0===e.length)return t.minimum.set(0,0,0),t.maximum.set(0,0,0),t.center.set(0,0,0),t.halfDiagonal.set(0,0,0),t;let r=e[0][0],n=e[0][1],i=e[0][2],o=e[0][0],a=e[0][1],u=e[0][2];for(const t of e){const e=t[0],s=t[1],c=t[2];r=Math.min(e,r),o=Math.max(e,o),n=Math.min(s,n),a=Math.max(s,a),i=Math.min(c,i),u=Math.max(c,u)}return t.minimum.set(r,n,i),t.maximum.set(o,a,u),t.center.copy(t.minimum).add(t.maximum).scale(.5),t.halfDiagonal.copy(t.maximum).subtract(t.center),t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(23),i=r(1),o=r(2),a=r(12),s=r(10);class u extends n.a{constructor(e=0,t=0){super(2),Object(i.m)(e)&&1===arguments.length?this.copy(e):(i.f.debug&&(Object(o.a)(e),Object(o.a)(t)),this[0]=e,this[1]=t)}set(e,t){return this[0]=e,this[1]=t,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this.check()}fromObject(e){return i.f.debug&&(Object(o.a)(e.x),Object(o.a)(e.y)),this[0]=e.x,this[1]=e.y,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return a.d(this,this,e),this.check()}transformAsVector(e){return Object(s.a)(this,this,e),this.check()}transformByMatrix3(e){return a.c(this,this,e),this.check()}transformByMatrix2x3(e){return a.b(this,this,e),this.check()}transformByMatrix2(e){return a.a(this,this,e),this.check()}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(23),i=r(1),o=r(2),a=r(3),s=r(10);const u={};class c extends n.a{static get ZERO(){return u.ZERO=u.ZERO||Object.freeze(new c(0,0,0,0))}constructor(e=0,t=0,r=0,n=0){super(-0,-0,-0,-0),Object(i.m)(e)&&1===arguments.length?this.copy(e):(i.f.debug&&(Object(o.a)(e),Object(o.a)(t),Object(o.a)(r),Object(o.a)(n)),this[0]=e,this[1]=t,this[2]=r,this[3]=n)}set(e,t,r,n){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return i.f.debug&&(Object(o.a)(e.x),Object(o.a)(e.y),Object(o.a)(e.z),Object(o.a)(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Object(o.a)(e)}get w(){return this[3]}set w(e){this[3]=Object(o.a)(e)}transform(e){return a.m(this,this,e),this.check()}transformByMatrix3(e){return Object(s.e)(this,this,e),this.check()}transformByMatrix2(e){return Object(s.d)(this,this,e),this.check()}transformByQuaternion(e){return a.n(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(37),i=r(2),o=r(10),a=r(11),s=r(12),u=r(3);const c=Object.freeze([1,0,0,0,1,0,0,0,1]),l=Object.freeze([0,0,0,0,0,0,0,0,0]),f=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),h={};class d extends n.a{static get IDENTITY(){return h.IDENTITY=h.IDENTITY||Object.freeze(new d(c)),h.IDENTITY}static get ZERO(){return h.ZERO=h.ZERO||Object.freeze(new d(l)),h.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return f}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,r,n,i,o,a,s,u){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this.check()}setRowMajor(e,t,r,n,i,o,a,s,u){return this[0]=e,this[1]=n,this[2]=a,this[3]=t,this[4]=i,this[5]=s,this[6]=r,this[7]=o,this[8]=u,this.check()}determinant(){return a.b(this)}identity(){return this.copy(c)}fromQuaternion(e){return a.c(this,e),this.check()}transpose(){return a.i(this,this),this.check()}invert(){return a.d(this,this),this.check()}multiplyLeft(e){return a.e(this,e,this),this.check()}multiplyRight(e){return a.e(this,this,e),this.check()}rotate(e){return a.f(this,this,e),this.check()}scale(e){return Array.isArray(e)?a.g(this,this,e):a.g(this,this,[e,e,e]),this.check()}translate(e){return a.h(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=s.c(t||[-0,-0],e,this);break;case 3:t=u.l(t||[-0,-0,-0],e,this);break;case 4:t=Object(o.e)(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(i.b)(t,e.length),t}transformVector(e,t){return Object(i.c)("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return Object(i.c)("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return Object(i.c)("Matrix3.transformVector"),this.transform(e,t)}}},function(e,t,r){"use strict";t.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error(t||"loader assertion failed.")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(17);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"name",void 0),o(this,"workerThread",void 0),o(this,"isRunning",void 0),o(this,"result",void 0),o(this,"_resolve",void 0),o(this,"_reject",void 0),this.name=t,this.workerThread=r,this.isRunning=!0,this._resolve=function(){},this._reject=function(){},this.result=new Promise((function(e,t){n._resolve=e,n._reject=t}))}var t,r,a;return t=e,(r=[{key:"postMessage",value:function(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}},{key:"done",value:function(e){(0,n.assert)(this.isRunning),this.isRunning=!1,this._resolve(e)}},{key:"error",value:function(e){(0,n.assert)(this.isRunning),this.isRunning=!1,this._reject(e)}}])&&i(t.prototype,r),a&&i(t,a),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(56)),i=o(r(40));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"props",void 0),f(this,"workerPools",new Map),this.props=c({},h),this.setProps(t),this.workerPools=new Map}var t,r,o;return t=e,o=[{key:"isSupported",value:function(){return i.default.isSupported()}},{key:"getWorkerFarm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e._workerFarm=e._workerFarm||new e({}),e._workerFarm.setProps(t),e._workerFarm}}],(r=[{key:"destroy",value:function(){var e,t=a(this.workerPools.values());try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(e){t.e(e)}finally{t.f()}}},{key:"setProps",value:function(e){this.props=c(c({},this.props),e);var t,r=a(this.workerPools.values());try{for(r.s();!(t=r.n()).done;)t.value.setProps(this._getWorkerPoolProps())}catch(e){r.e(e)}finally{r.f()}}},{key:"getWorkerPool",value:function(e){var t=e.name,r=e.source,i=e.url,o=this.workerPools.get(t);return o||((o=new n.default({name:t,source:r,url:i})).setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}},{key:"_getWorkerPoolProps",value:function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}])&&l(t.prototype,r),o&&l(t,o),e}();t.default=d,f(d,"_workerFarm",void 0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(39),i=a(r(40)),o=a(r(54));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,u,"next",e)}function u(e){s(o,n,i,a,u,"throw",e)}a(void 0)}))}}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"name","unnamed"),h(this,"source",void 0),h(this,"url",void 0),h(this,"maxConcurrency",1),h(this,"maxMobileConcurrency",1),h(this,"onDebug",(function(){})),h(this,"reuseWorkers",!0),h(this,"props",{}),h(this,"jobQueue",[]),h(this,"idleQueue",[]),h(this,"count",0),h(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}var t,r,a,s,c;return t=e,(r=[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"setProps",value:function(e){this.props=l(l({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}},{key:"startJob",value:(c=u(regeneratorRuntime.mark((function e(t){var r,n,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:function(e,t,r){return e.done(r)},n=a.length>2&&void 0!==a[2]?a[2]:function(e,t){return e.error(t)},i=new Promise((function(e){return o.jobQueue.push({name:t,onMessage:r,onError:n,onStart:e}),o})),this._startQueuedJob(),e.next=6,i;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"_startQueuedJob",value:(s=u(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.jobQueue.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this._getAvailableWorker()){e.next=5;break}return e.abrupt("return");case 5:if(!(r=this.jobQueue.shift())){e.next=18;break}return this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length}),n=new o.default(r.name,t),t.onMessage=function(e){return r.onMessage(n,e.type,e.payload)},t.onError=function(e){return r.onError(n,e)},r.onStart(n),e.prev=12,e.next=15,n.result;case 15:return e.prev=15,this.returnWorkerToQueue(t),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[12,,15,18]])}))),function(){return s.apply(this,arguments)})},{key:"returnWorkerToQueue",value:function(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new i.default({name:e,source:this.source,url:this.url})}return null}},{key:"_getMaxConcurrency",value:function(){return n.isMobile?this.maxMobileConcurrency:this.maxConcurrency}}])&&f(t.prototype,r),a&&f(t,a),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(41);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=new Map,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,a=[{key:"onmessage",set:function(e){self.onmessage=function(t){if(s(t)){var r=t.data,n=r.type,i=r.payload;e(n,i)}}}},{key:"addEventListener",value:function(e){var t=o.get(e);t||(t=function(t){if(s(t)){var r=t.data,n=r.type,i=r.payload;e(n,i)}}),self.addEventListener("message",t)}},{key:"removeEventListener",value:function(e){var t=o.get(e);o.delete(e),self.removeEventListener("message",t)}},{key:"postMessage",value:function(e,t){if(self){var r={source:"loaders.gl",type:e,payload:t},i=(0,n.getTransferList)(t);self.postMessage(r,i)}}}],(r=null)&&i(t.prototype,r),a&&i(t,a),e}();function s(e){var t=e.type,r=e.data;return"message"===t&&r&&"string"==typeof r.source&&r.source.startsWith("loaders.gl")}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWorkerName=function(e){var t="3.0.8"!==e.version?" (worker-utils@".concat("3.0.8",")"):"";return"".concat(e.name,"@").concat(e.version).concat(t)},t.getWorkerURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t[e.id]||{},i="".concat(e.id,"-worker.js"),o=r.workerUrl;"test"===t._workerType&&(o="modules/".concat(e.module,"/dist/").concat(i));if(!o){var a=e.version;"latest"===a&&(a="latest");var s=a?"@".concat(a):"";o="https://unpkg.com/@loaders.gl/".concat(e.module).concat(s,"/dist/").concat(i)}return(0,n.assert)(o),o};var n=r(17);r(34)},function(e,t,r){"use strict";var n;function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n=Symbol.asyncIterator;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_values",void 0),o(this,"_settlers",void 0),o(this,"_closed",void 0),this._values=[],this._settlers=[],this._closed=!1}var t,r,a;return t=e,(r=[{key:n,value:function(){return this}},{key:"push",value:function(e){return this.enqueue(e)}},{key:"enqueue",value:function(e){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var t=this._settlers.shift();e instanceof Error?t.reject(e):t.resolve({value:e})}else this._values.push(e)}},{key:"close",value:function(){for(;this._settlers.length>0;)this._settlers.shift().resolve({done:!0});this._closed=!0}},{key:"next",value:function(){var e=this;if(this._values.length>0){var t=this._values.shift();return t instanceof Error?Promise.reject(t):Promise.resolve({done:!1,value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(t,r){e._settlers.push({resolve:t,reject:r})}))}}])&&i(t.prototype,r),a&&i(t,a),e}();t.default=a},function(e,t,r){"use strict";function n(e,t,r){if(e.byteLength<=t+r)return"";for(var n=new DataView(e),i="",o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstCharacters=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return n(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){var r=0;return n(e,r,t)}return""},t.getMagicString=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArrayBuffer=function(e){n.toArrayBuffer&&(e=n.toArrayBuffer(e));if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"===s(e)&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")},t.compareArrayBuffers=function(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;for(var n=new Uint8Array(e),i=new Uint8Array(t),o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0},t.concatenateArrayBuffers=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=t.map((function(e){return e instanceof ArrayBuffer?new Uint8Array(e):e})),a=i.reduce((function(e,t){return e+t.byteLength}),0),s=new Uint8Array(a),u=0,c=o(i);try{for(c.s();!(n=c.n()).done;){var l=n.value;s.set(l,u),u+=l.byteLength}}catch(e){c.e(e)}finally{c.f()}return s.buffer},t.concatenateTypedArrays=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t,i=n&&n.length>1&&n[0].constructor||null;if(!i)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');for(var o=n.reduce((function(e,t){return e+t.length}),0),a=new i(o),s=0,u=0,c=n;u<c.length;u++){var l=c[u];a.set(l,s),s+=l.length}return a},t.sliceArrayBuffer=function(e,t,r){var n=void 0!==r?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(62));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.padToNBytes=i,t.copyArrayBuffer=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength,i=new Uint8Array(e,r,n),o=new Uint8Array(t);return i.set(o),e},t.copyToArray=function(e,t,r){var n;if(e instanceof ArrayBuffer)n=new Uint8Array(e);else{var o=e.byteOffset,a=e.byteLength;n=new Uint8Array(e.buffer||e.arrayBuffer,o,a)}return t.set(n,r),r+i(n.byteLength,4)};var n=r(53);function i(e,t){return(0,n.assert)(e>=0),(0,n.assert)(t>0),e+(t-1)&~(t-1)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(102))&&n.__esModule?n:{default:n};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return null!=e}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_list",void 0),a(this,"_sentinel",void 0),a(this,"_trimTiles",void 0),this._list=new i.default,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}var t,r,n;return t=e,(r=[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(e){var t=e._cacheNode;s(t)&&this._list.splice(this._sentinel,t)}},{key:"add",value:function(e,t,r){s(t._cacheNode)||(t._cacheNode=this._list.add(t),r&&r(e,t))}},{key:"unloadTile",value:function(e,t,r){var n=t._cacheNode;s(n)&&(this._list.remove(n),t._cacheNode=void 0,r&&r(e,t))}},{key:"unloadTiles",value:function(e,t){var r=this._trimTiles;this._trimTiles=!1;for(var n=this._list,i=1024*e.maximumMemoryUsage*1024,o=this._sentinel,a=n.head;a!==o&&(e.gpuMemoryUsageInBytes>i||r);){var s=a.item;a=a.next,this.unloadTile(e,s,t)}}},{key:"trim",value:function(){this._trimTiles=!0}}])&&o(t.prototype,r),n&&o(t,n),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTransformProps=function(e,t){(0,o.assert)(e),(0,o.assert)(t);var r=t.rtcCenter,a=t.gltfUpAxis,s=e.computedTransform,u=e.boundingVolume.center,c=new i.Matrix4(s);r&&c.translate(r);switch(a){case"Z":break;case"Y":var l=(new i.Matrix4).rotateX(Math.PI/2);c=c.multiplyRight(l);break;case"X":var f=(new i.Matrix4).rotateY(-Math.PI/2);c=c.multiplyRight(f)}t.isQuantized&&c.translate(t.quantizedVolumeOffset).scale(t.quantizedVolumeScale);var h=new i.Vector3(u);t.cartesianModelMatrix=c,t.cartesianOrigin=h;var d=n.Ellipsoid.WGS84.cartesianToCartographic(h,new i.Vector3),p=n.Ellipsoid.WGS84.eastNorthUpToFixedFrame(h).invert();t.cartographicModelMatrix=p.multiplyRight(c),t.cartographicOrigin=d,t.modelMatrix=t.cartographicModelMatrix};var n=r(36),i=r(4),o=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFrameState=function(e,t){var r=e.cameraDirection,i=e.cameraUp,c=e.height,l=e.distanceScales.metersPerUnit,f=[e.longitude,e.latitude,0],h=o.Ellipsoid.WGS84.cartographicToCartesian(f,new n.Vector3),d=o.Ellipsoid.WGS84.eastNorthUpToFixedFrame(h),p=e.unprojectPosition(e.cameraPosition),y=o.Ellipsoid.WGS84.cartographicToCartesian(p,new n.Vector3),m=new n.Vector3(d.transformAsVector(new n.Vector3(r).scale(l))).normalize(),b=new n.Vector3(d.transformAsVector(new n.Vector3(i).scale(l))).normalize();return function(e,t){var r=e.getFrustumPlanes(),i=0;for(var c in r){var l=r[c],f=l.normal.dot(e.center);s.copy(l.normal).scale(l.distance-f).add(e.center);var h=e.unprojectPosition(s),d=o.Ellipsoid.WGS84.cartographicToCartesian(h,new n.Vector3);u.planes[i++].fromPointNormal(d,a.copy(t).subtract(d))}}(e,h),{camera:{position:y,direction:m,up:b},viewport:e,height:c,cullingVolume:u,frameNumber:t,sseDenominator:1.15}};var n=r(4),i=r(48),o=r(36),a=new n.Vector3,s=new n.Vector3,u=new i.CullingVolume([new i.Plane,new i.Plane,new i.Plane,new i.Plane,new i.Plane,new i.Plane])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return n.fetchFile}}),Object.defineProperty(t,"readArrayBuffer",{enumerable:!0,get:function(){return i.readArrayBuffer}}),Object.defineProperty(t,"readFileSync",{enumerable:!0,get:function(){return o.readFileSync}}),Object.defineProperty(t,"writeFile",{enumerable:!0,get:function(){return a.writeFile}}),Object.defineProperty(t,"writeFileSync",{enumerable:!0,get:function(){return a.writeFileSync}}),Object.defineProperty(t,"setLoaderOptions",{enumerable:!0,get:function(){return s.setLoaderOptions}}),Object.defineProperty(t,"registerLoaders",{enumerable:!0,get:function(){return u.registerLoaders}}),Object.defineProperty(t,"_unregisterLoaders",{enumerable:!0,get:function(){return u._unregisterLoaders}}),Object.defineProperty(t,"selectLoader",{enumerable:!0,get:function(){return c.selectLoader}}),Object.defineProperty(t,"selectLoaderSync",{enumerable:!0,get:function(){return c.selectLoaderSync}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return l.parse}}),Object.defineProperty(t,"parseSync",{enumerable:!0,get:function(){return f.parseSync}}),Object.defineProperty(t,"parseInBatches",{enumerable:!0,get:function(){return h.parseInBatches}}),Object.defineProperty(t,"load",{enumerable:!0,get:function(){return d.load}}),Object.defineProperty(t,"loadInBatches",{enumerable:!0,get:function(){return p.loadInBatches}}),Object.defineProperty(t,"encode",{enumerable:!0,get:function(){return y.encode}}),Object.defineProperty(t,"encodeSync",{enumerable:!0,get:function(){return y.encodeSync}}),Object.defineProperty(t,"encodeInBatches",{enumerable:!0,get:function(){return y.encodeInBatches}}),Object.defineProperty(t,"encodeText",{enumerable:!0,get:function(){return y.encodeText}}),Object.defineProperty(t,"encodeURLtoURL",{enumerable:!0,get:function(){return y.encodeURLtoURL}}),Object.defineProperty(t,"save",{enumerable:!0,get:function(){return m.save}}),Object.defineProperty(t,"saveSync",{enumerable:!0,get:function(){return m.saveSync}}),Object.defineProperty(t,"setPathPrefix",{enumerable:!0,get:function(){return b.setPathPrefix}}),Object.defineProperty(t,"getPathPrefix",{enumerable:!0,get:function(){return b.getPathPrefix}}),Object.defineProperty(t,"resolvePath",{enumerable:!0,get:function(){return b.resolvePath}}),Object.defineProperty(t,"RequestScheduler",{enumerable:!0,get:function(){return b.RequestScheduler}}),Object.defineProperty(t,"JSONLoader",{enumerable:!0,get:function(){return b.JSONLoader}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return b.isBrowser}}),Object.defineProperty(t,"isWorker",{enumerable:!0,get:function(){return b.isWorker}}),Object.defineProperty(t,"self",{enumerable:!0,get:function(){return b.self}}),Object.defineProperty(t,"window",{enumerable:!0,get:function(){return b.window}}),Object.defineProperty(t,"global",{enumerable:!0,get:function(){return b.global}}),Object.defineProperty(t,"document",{enumerable:!0,get:function(){return b.document}}),Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return b.assert}}),Object.defineProperty(t,"forEach",{enumerable:!0,get:function(){return b.forEach}}),Object.defineProperty(t,"concatenateArrayBuffersAsync",{enumerable:!0,get:function(){return b.concatenateArrayBuffersAsync}}),Object.defineProperty(t,"makeTextDecoderIterator",{enumerable:!0,get:function(){return b.makeTextDecoderIterator}}),Object.defineProperty(t,"makeTextEncoderIterator",{enumerable:!0,get:function(){return b.makeTextEncoderIterator}}),Object.defineProperty(t,"makeLineIterator",{enumerable:!0,get:function(){return b.makeLineIterator}}),Object.defineProperty(t,"makeNumberedLineIterator",{enumerable:!0,get:function(){return b.makeNumberedLineIterator}}),Object.defineProperty(t,"makeIterator",{enumerable:!0,get:function(){return v.makeIterator}}),Object.defineProperty(t,"makeStream",{enumerable:!0,get:function(){return g.makeStream}}),Object.defineProperty(t,"makeDOMStream",{enumerable:!0,get:function(){return w.makeDOMStream}}),Object.defineProperty(t,"makeNodeStream",{enumerable:!0,get:function(){return O.makeNodeStream}}),Object.defineProperty(t,"NullWorkerLoader",{enumerable:!0,get:function(){return _.NullWorkerLoader}}),Object.defineProperty(t,"NullLoader",{enumerable:!0,get:function(){return _.NullLoader}}),Object.defineProperty(t,"_fetchProgress",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"_BrowserFileSystem",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"isPureObject",{enumerable:!0,get:function(){return T.isPureObject}}),Object.defineProperty(t,"isPromise",{enumerable:!0,get:function(){return T.isPromise}}),Object.defineProperty(t,"isIterable",{enumerable:!0,get:function(){return T.isIterable}}),Object.defineProperty(t,"isAsyncIterable",{enumerable:!0,get:function(){return T.isAsyncIterable}}),Object.defineProperty(t,"isIterator",{enumerable:!0,get:function(){return T.isIterator}}),Object.defineProperty(t,"isResponse",{enumerable:!0,get:function(){return T.isResponse}}),Object.defineProperty(t,"isReadableStream",{enumerable:!0,get:function(){return T.isReadableStream}}),Object.defineProperty(t,"isWritableStream",{enumerable:!0,get:function(){return T.isWritableStream}});var n=r(43),i=r(106),o=r(107),a=r(44),s=r(108),u=r(70),c=r(35),l=r(45),f=r(115),h=r(72),d=r(116),p=r(117),y=r(73),m=r(118),b=r(6),v=r(71),g=r(119),w=r(74),O=r(121),_=r(122),x=S(r(123)),k=S(r(124)),T=r(13);function S(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeResponse=function(e){return s.apply(this,arguments)},t.checkResponse=function(e){return u.apply(this,arguments)},t.checkResponseSync=function(e){if(!e.ok){var t="".concat(e.status," ").concat(e.statusText);throw t=t.length>60?"".concat(t.slice(60),"..."):t,new Error(t)}};var n=r(13),i=r(26);function o(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,u,"next",e)}function u(e){o(a,n,i,s,u,"throw",e)}s(void 0)}))}}function s(){return(s=a(regeneratorRuntime.mark((function e(t){var r,o,a,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.isResponse)(t)){e.next=2;break}return e.abrupt("return",t);case 2:return r={},(o=(0,i.getResourceContentLength)(t))>=0&&(r["content-length"]=String(o)),a=(0,i.getResourceUrlAndType)(t),s=a.url,(u=a.type)&&(r["content-type"]=u),e.next=9,f(t);case 9:return(c=e.sent)&&(r["x-first-bytes"]=c),"string"==typeof t&&(t=(new TextEncoder).encode(t)),l=new Response(t,{headers:r}),Object.defineProperty(l,"url",{value:s}),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=a(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,c(t);case 3:throw r=e.sent,new Error(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=a(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,n=t.headers.get("Content-Type"),i=t.statusText,!n.includes("application/json")){e.next=11;break}return e.t0=i,e.t1=" ",e.next=9,t.text();case 9:e.t2=e.sent,i=e.t0+=e.t1.concat.call(e.t1,e.t2);case 11:r=(r+=i).length>60?"".concat(r.slice(60),"..."):r,e.next=17;break;case 15:e.prev=15,e.t3=e.catch(1);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=a(regeneratorRuntime.mark((function e(t){var r,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=5,"string"!=typeof t){e.next=3;break}return e.abrupt("return","data:,".concat(t.slice(0,r)));case 3:if(!(t instanceof Blob)){e.next=8;break}return n=t.slice(0,5),e.next=7,new Promise((function(e){var t=new FileReader;t.onload=function(t){var r;return e(null==t||null===(r=t.target)||void 0===r?void 0:r.result)},t.readAsDataURL(n)}));case 7:return e.abrupt("return",e.sent);case 8:if(!(t instanceof ArrayBuffer)){e.next=12;break}return i=t.slice(0,r),o=d(i),e.abrupt("return","data:base64,".concat(o));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){for(var t="",r=new Uint8Array(e),n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLog=t.NullLog=t.probeLog=void 0;var a=new(r(131).Log)({id:"loaders.gl"});t.probeLog=a;var s=function(){function e(){n(this,e)}return o(e,[{key:"log",value:function(){return function(){}}},{key:"info",value:function(){return function(){}}},{key:"warn",value:function(){return function(){}}},{key:"error",value:function(){return function(){}}}]),e}();t.NullLog=s;var u=function(){function e(){var t,r,i;n(this,e),i=void 0,(r="console")in(t=this)?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,this.console=console}return o(e,[{key:"log",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.log).bind.apply(e,[this.console].concat(r))}},{key:"info",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.info).bind.apply(e,[this.console].concat(r))}},{key:"warn",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.warn).bind.apply(e,[this.console].concat(r))}},{key:"error",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.error).bind.apply(e,[this.console].concat(r))}}]),e}();t.ConsoleLog=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerLoaders=function(e){var t,r=a(),i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}(e=Array.isArray(e)?e:[e]);try{var s=function(){var e=t.value,i=(0,n.normalizeLoader)(e);r.find((function(e){return i===e}))||r.unshift(i)};for(i.s();!(t=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}},t.getRegisteredLoaders=function(){return a()},t._unregisterLoaders=function(){(0,i.getGlobalLoaderState)().loaderRegistry=[]};var n=r(18),i=r(14);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=function(){var e=(0,i.getGlobalLoaderState)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeIterator=function(e,t){if("string"==typeof e)return(0,n.makeStringIterator)(e,t);if(e instanceof ArrayBuffer)return(0,i.makeArrayBufferIterator)(e,t);if((0,s.isBlob)(e))return(0,o.makeBlobIterator)(e,t);if((0,s.isReadableStream)(e))return(0,a.makeStreamIterator)(e,t);if((0,s.isResponse)(e)){var r=e;return(0,a.makeStreamIterator)(r.body,t)}throw new Error("makeIterator")};var n=r(111),i=r(112),o=r(113),a=r(114),s=r(13)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInBatches=x;var n=r(6),i=r(18),o=r(14),a=r(47),s=r(46),u=r(26),c=r(35),l=r(45);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,s,"next",e)}function s(e){y(o,n,i,a,s,"throw",e)}a(void 0)}))}}function b(e){return function(){return new v(e.apply(this,arguments))}}function v(e){var t,r;function n(t,r){try{var o=e[t](r),a=o.value,s=a instanceof w;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function g(e){return new w(e)}function w(e){this.wrapped=e}function O(e){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=e[Symbol.iterator])),null==t&&(t=e["@@asyncIterator"]),null==t&&(t=e["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(e)}function _(e,t){var r={},n=!1;function i(r,i){return n=!0,i=new Promise((function(t){t(e[r](i))})),{done:!1,value:t(i)}}return r["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},r.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(r.return=function(e){return n?(n=!1,e):i("return",e)}),r}function x(e,t,r,n){return k.apply(this,arguments)}function k(){return(k=m(regeneratorRuntime.mark((function e(t,r,s,f){var h,d,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,n.assert)(!f||"object"===p(f)),Array.isArray(r)||(0,i.isLoaderObject)(r)||(f=void 0,s=r,r=void 0),e.next=4,t;case 4:return t=e.sent,s=s||{},h=(0,u.getResourceUrlAndType)(t),d=h.url,e.next=9,(0,c.selectLoader)(t,r,s);case 9:if(y=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return s=(0,o.normalizeOptions)(s,y,r,d),f=(0,a.getLoaderContext)({url:d,parseInBatches:x,parse:l.parse,loaders:r},s,f),e.next=16,T(y,t,s,f);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,r,n){var i,o,a,s;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return s=function(){return(s=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o;case 2:return e.delegateYield(_(O(t),g),"t0",3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(e){return s.apply(this,arguments)},u.next=4,regeneratorRuntime.awrap(S(e,t,r,n));case 4:if(i=u.sent,r.metadata){u.next=7;break}return u.abrupt("return",i);case 7:return o={batchType:"metadata",metadata:{_loader:e,_context:n},data:[],bytesUsed:0},u.abrupt("return",a(i));case 9:case"end":return u.stop()}}),null,null,null,Promise)}function S(e,t,r,n){return P.apply(this,arguments)}function P(){return(P=m(regeneratorRuntime.mark((function e(t,r,i,o){var a,u,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=function(){return(f=b(regeneratorRuntime.mark((function e(){var r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g((0,n.concatenateArrayBuffersAsync)(u));case 2:return r=e.sent,e.next=5,g((0,l.parse)(r,t,h(h({},i),{},{mimeType:t.mimeTypes[0]}),o));case 5:return a=e.sent,s={mimeType:t.mimeTypes[0],shape:Array.isArray(a)?"row-table":"unknown",batchType:"data",data:a,length:Array.isArray(a)?a.length:1},e.next=9,s;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(){return f.apply(this,arguments)},e.next=4,(0,s.getAsyncIterableFromData)(r,i);case 4:return a=e.sent,e.next=7,j(a,(null==i?void 0:i.transforms)||[]);case 7:if(u=e.sent,!t.parseInBatches){e.next=10;break}return e.abrupt("return",t.parseInBatches(u,i,o));case 10:return e.abrupt("return",c());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return E.apply(this,arguments)}function E(){return(E=m(regeneratorRuntime.mark((function e(t){var r,n,i,o,a,s,u,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>1&&void 0!==l[1]?l[1]:[],n=t,i=!0,o=!1,e.prev=4,s=O(r);case 6:return e.next=8,s.next();case 8:return u=e.sent,i=u.done,e.next=12,u.value;case 12:if(c=e.sent,i){e.next=19;break}n=c(n);case 16:i=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),o=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,i||null==s.return){e.next=30;break}return e.next=30,s.return();case 30:if(e.prev=30,!o){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:return e.abrupt("return",n);case 36:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}v.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},v.prototype.next=function(e){return this._invoke("next",e)},v.prototype.throw=function(e){return this._invoke("throw",e)},v.prototype.return=function(e){return this._invoke("return",e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encode=c,t.encodeSync=function(e,t,r){if(t.encodeSync)return t.encodeSync(e,r);throw new Error("Writer could not synchronously encode data")},t.encodeText=function(e,t,r){return f.apply(this,arguments)},t.encodeInBatches=h,t.encodeURLtoURL=d;var n=r(6),i=r(44),o=r(43);function a(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,u,"next",e)}function u(e){a(o,n,i,s,u,"throw",e)}s(void 0)}))}}function u(e){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=e[Symbol.iterator])),null==t&&(t=e["@@asyncIterator"]),null==t&&(t=e["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(e)}function c(e,t,r){return l.apply(this,arguments)}function l(){return(l=s(regeneratorRuntime.mark((function e(t,r,a){var s,c,l,f,p,m,b,v,g,w,O,_,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.encode){e.next=4;break}return e.next=3,r.encode(t,a);case 3:return e.abrupt("return",e.sent);case 4:if(!r.encodeSync){e.next=6;break}return e.abrupt("return",r.encodeSync(t,a));case 6:if(!r.encodeText){e.next=12;break}return e.t0=new TextEncoder,e.next=10,r.encodeText(t,a);case 10:return e.t1=e.sent,e.abrupt("return",e.t0.encode.call(e.t0,e.t1));case 12:if(!r.encodeInBatches){e.next=49;break}s=h(t,r,a),c=[],l=!0,f=!1,e.prev=17,m=u(s);case 19:return e.next=21,m.next();case 21:return b=e.sent,l=b.done,e.next=25,b.value;case 25:if(v=e.sent,l){e.next=32;break}g=v,c.push(g);case 29:l=!0,e.next=19;break;case 32:e.next=38;break;case 34:e.prev=34,e.t2=e.catch(17),f=!0,p=e.t2;case 38:if(e.prev=38,e.prev=39,l||null==m.return){e.next=43;break}return e.next=43,m.return();case 43:if(e.prev=43,!f){e.next=46;break}throw p;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return e.abrupt("return",n.concatenateArrayBuffers.apply(void 0,c));case 49:if(n.isBrowser||!r.encodeURLtoURL){e.next=61;break}return w=y("input"),e.next=53,(0,i.writeFile)(w,t);case 53:return O=y("output"),e.next=56,d(w,O,r,a);case 56:return _=e.sent,e.next=59,(0,o.fetchFile)(_);case 59:return x=e.sent,e.abrupt("return",x.arrayBuffer());case 61:throw new Error("Writer could not encode data");case 62:case"end":return e.stop()}}),e,null,[[17,34,38,48],[39,,43,47]])})))).apply(this,arguments)}function f(){return(f=s(regeneratorRuntime.mark((function e(t,r,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.text||!r.encodeText){e.next=4;break}return e.next=3,r.encodeText(t,n);case 3:return e.abrupt("return",e.sent);case 4:if(!r.text||!r.encode&&!r.encodeInBatches){e.next=9;break}return e.next=7,c(t,r,n);case 7:return i=e.sent,e.abrupt("return",(new TextDecoder).decode(i));case 9:throw new Error("Writer could not encode data as text");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,r){if(t.encodeInBatches){var n=function(e){return[{table:e,start:0,end:e.length}]}(e);return t.encodeInBatches(n,r)}throw new Error("Writer could not encode data in batches")}function d(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=s(regeneratorRuntime.mark((function e(t,r,i,o){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,n.resolvePath)(t),r=(0,n.resolvePath)(r),!n.isBrowser&&i.encodeURLtoURL){e.next=4;break}throw new Error;case 4:return e.next=6,i.encodeURLtoURL(t,r,o);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return"/tmp/".concat(e)}},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,u,"next",e)}function u(e){o(a,n,i,s,u,"throw",e)}s(void 0)}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeDOMStream=function(e,t){var r=e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]();return new ReadableStream({type:"bytes",pull:function(e){return a(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.next();case 3:n=t.sent,i=n.done,o=n.value,i?e.close():e.enqueue(new Uint8Array(o)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},cancel:function(){return a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==r||null===(t=r.return)||void 0===t?void 0:t.call(r);case 2:case"end":return e.stop()}}),e)})))()}},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({highWaterMark:Math.pow(2,24)},t))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBoundingVolume=function(e,t,r){if((0,a.assert)(e,"3D Tile: boundingVolume must be defined"),e.box)return function(e,t,r){var o=new n.Vector3(e[0],e[1],e[2]);t.transform(o,o);var a=[];if(10===e.length){var u=e.slice(3,6),c=new n.Quaternion;c.fromArray(e,6);var f=new n.Vector3([1,0,0]),h=new n.Vector3([0,1,0]),d=new n.Vector3([0,0,1]);f.transformByQuaternion(c),f.scale(u[0]),h.transformByQuaternion(c),h.scale(u[1]),d.transformByQuaternion(c),d.scale(u[2]),a=[].concat(s(f.toArray()),s(h.toArray()),s(d.toArray()))}else a=[].concat(s(e.slice(3,6)),s(e.slice(6,9)),s(e.slice(9,12)));var p=t.transformAsVector(a.slice(0,3)),y=t.transformAsVector(a.slice(3,6)),m=t.transformAsVector(a.slice(6,9)),b=new n.Matrix3([p[0],p[1],p[2],y[0],y[1],y[2],m[0],m[1],m[2]]);if(l(r))return r.center=o,r.halfAxes=b,r;return new i.OrientedBoundingBox(o,b)}(e.box,t,r);if(e.region){var c=(k=e.region,T=6,function(e){if(Array.isArray(e))return e}(k)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(k,T)||u(k,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=c[0],y=c[1],m=c[2],b=c[3],v=c[4],g=c[5],w=o.Ellipsoid.WGS84.cartographicToCartesian([(0,n.degrees)(f),(0,n.degrees)(b),v],h),O=o.Ellipsoid.WGS84.cartographicToCartesian([(0,n.degrees)(m),(0,n.degrees)(y),g],d),_=(new n.Vector3).addVectors(w,O).multiplyScalar(.5),x=(new n.Vector3).subVectors(w,O).len()/2;return p([_[0],_[1],_[2],x],new n.Matrix4)}var k,T;if(e.sphere)return p(e.sphere,t,r);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")};var n=r(4),i=r(48),o=r(36),a=r(6);function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){return null!=e}var f=new n.Vector3,h=new n.Vector3,d=new n.Vector3;function p(e,t,r){var o=new n.Vector3(e[0],e[1],e[2]);t.transform(o,o);var a=t.getScale(f),s=Math.max(Math.max(a[0],a[1]),a[2]),u=e[3]*s;return l(r)?(r.center=o,r.radius=u,r):new i.BoundingSphere(o,u)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lodJudge=function(e,t){var r=t.viewport,n=r.metersPerPixel,i=e.header.mbs[1],o=e.header.mbs[0],s=e.header.mbs[2],l=e.header.mbs[3],f=r.height,h=r.width,d=r.latitude,p=r.longitude,y=[p,d],m=[o,i,s],b=[p,i],v=[o,d],g=Math.sqrt(f*f+h*h)*n[0],w=u(y,m),O=.5*f+l/6378137,_=.5*h+l/6378137;if(w>g+l/6378137)return"OUT";if(u(y,b)>O)return"OUT";if(u(y,v)>_)return"OUT";if(0===e.lodMetricValue)return"DIG";var x=c(e,t);if((x*=a)<.5)return"OUT";if(!e.header.children||x<=e.lodMetricValue)return"DRAW";if(e.header.children)return"DIG";return"OUT"},t.getI3ScreenSize=c;var n=r(4);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=Math.PI/2;function s(e){var t=i(e,3),r=t[0],o=t[1],a=t[2],s=(0,n.toRadians)(r),u=(0,n.toRadians)(o),c=1+a/6378137,l=c*Math.cos(u);return[r=l*Math.cos(s),o=l*Math.sin(s),a=c*Math.sin(u)]}function u(e,t){var r=i(e,3),n=r[0],o=r[1],a=r[2],u=void 0===a?0:a,c=i(t,3),l=c[0],f=c[1],h=c[2],d=s([l,f,void 0===h?0:h]),p=s([n,o,u]),y=p[0]-d[0],m=p[1]-d[1],b=p[2]-d[2];return y*y+m*m+b*b}function c(e,t){var r=t.viewport,n=e.header.mbs[1],i=[e.header.mbs[0],n,e.header.mbs[2]],o=e.header.mbs[3]/6378137,a=u(r.unprojectPosition(r.cameraPosition),i)-o*o;return a<=0?170141175e30:function(e){return e.viewport.projectionMatrix[5]}(t)*o/Math.sqrt(a)*300}},function(e,t,r){"use strict";(function(t){var n=r(78),i="undefined"==typeof window?t:window;i.loaders=i.loaders||{},e.exports=Object.assign(i.loaders,n)}).call(this,r(25))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Tileset3D",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Tile3D",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TilesetTraverser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TilesetCache",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"createBoundingVolume",{enumerable:!0,get:function(){return s.createBoundingVolume}}),Object.defineProperty(t,"calculateTransformProps",{enumerable:!0,get:function(){return u.calculateTransformProps}}),Object.defineProperty(t,"getFrameState",{enumerable:!0,get:function(){return c.getFrameState}}),Object.defineProperty(t,"TILE_CONTENT_STATE",{enumerable:!0,get:function(){return l.TILE_CONTENT_STATE}}),Object.defineProperty(t,"TILE_REFINEMENT",{enumerable:!0,get:function(){return l.TILE_REFINEMENT}}),Object.defineProperty(t,"TILE_TYPE",{enumerable:!0,get:function(){return l.TILE_TYPE}}),Object.defineProperty(t,"TILESET_TYPE",{enumerable:!0,get:function(){return l.TILESET_TYPE}}),Object.defineProperty(t,"LOD_METRIC_TYPE",{enumerable:!0,get:function(){return l.LOD_METRIC_TYPE}});var n=f(r(79)),i=f(r(42)),o=f(r(28)),a=f(r(64)),s=r(75),u=r(65),c=r(66),l=r(27);function f(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(4),i=r(36),o=r(29),a=r(6),s=m(r(64)),u=r(65),c=r(66),l=r(104),f=m(r(42)),h=m(r(128)),d=m(r(28)),p=m(r(129)),y=r(27);function m(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k={description:"",ellipsoid:i.Ellipsoid.WGS84,modelMatrix:new n.Matrix4,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){},onTraversalComplete:function(e){return e},contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},T=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"options",void 0),x(this,"loadOptions",void 0),x(this,"type",void 0),x(this,"tileset",void 0),x(this,"loader",void 0),x(this,"url",void 0),x(this,"basePath",void 0),x(this,"modelMatrix",void 0),x(this,"ellipsoid",void 0),x(this,"lodMetricType",void 0),x(this,"lodMetricValue",void 0),x(this,"refine",void 0),x(this,"root",void 0),x(this,"roots",void 0),x(this,"asset",void 0),x(this,"description",void 0),x(this,"properties",void 0),x(this,"extras",void 0),x(this,"attributions",void 0),x(this,"credits",void 0),x(this,"stats",void 0),x(this,"traverseCounter",void 0),x(this,"geometricError",void 0),x(this,"selectedTiles",void 0),x(this,"cartographicCenter",void 0),x(this,"cartesianCenter",void 0),x(this,"zoom",void 0),x(this,"boundingVolume",void 0),x(this,"gpuMemoryUsageInBytes",void 0),x(this,"dynamicScreenSpaceErrorComputedDensity",void 0),x(this,"_traverser",void 0),x(this,"_cache",void 0),x(this,"_requestScheduler",void 0),x(this,"_frameNumber",void 0),x(this,"_queryParamsString",void 0),x(this,"_queryParams",void 0),x(this,"_extensionsUsed",void 0),x(this,"_tiles",void 0),x(this,"_pendingCount",void 0),x(this,"lastUpdatedVieports",void 0),x(this,"_requestedTiles",void 0),x(this,"_emptyTiles",void 0),x(this,"frameStateData",void 0),x(this,"maximumMemoryUsage",void 0),(0,a.assert)(t),this.options=O(O({},k),r),this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||a.path.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new s.default,this._requestScheduler=new a.RequestScheduler({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new o.Stats({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this._initializeTileSet(t)}var t,r,m,g,w;return t=e,(r=[{key:"destroy",value:function(){this._destroy()}},{key:"isLoaded",value:function(){return 0===this._pendingCount&&0!==this._frameNumber}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(e){for(var t=[],r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t.push("".concat(i,"=").concat(e[i]))}switch(t.length){case 0:return"";case 1:return"?".concat(t[0]);default:return"?".concat(t.join("&"))}}(this._queryParams)),this._queryParamsString}},{key:"setProps",value:function(e){this.options=O(O({},this.options),e)}},{key:"setOptions",value:function(e){this.options=O(O({},this.options),e)}},{key:"getTileUrl",value:function(e){return e.startsWith("data:")?e:"".concat(e).concat(this.queryParams)}},{key:"hasExtension",value:function(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)}},{key:"update",value:function(e){if((!("loadTiles"in this.options)||this.options.loadTiles)&&!(this.traverseCounter>0)){!e&&this.lastUpdatedVieports?e=this.lastUpdatedVieports:this.lastUpdatedVieports=e,e instanceof Array||(e=[e]),this._cache.reset(),this._frameNumber++,this.traverseCounter=e.length;var t,r=[],n=v(e);try{for(n.s();!(t=n.n()).done;){var i=t.value.id;this._needTraverse(i)?r.push(i):this.traverseCounter--}}catch(e){n.e(e)}finally{n.f()}var o,a=v(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=s.id;if(this.roots[u]||(this.roots[u]=this._initializeTileHeaders(this.tileset,null)),r.includes(u)){var l=(0,c.getFrameState)(s,this._frameNumber);this._traverser.traverse(this.roots[u],l,this.options)}}}catch(e){a.e(e)}finally{a.f()}}}},{key:"_needTraverse",value:function(e){var t=e;return this.options.viewportTraversersMap&&(t=this.options.viewportTraversersMap[e]),t===e}},{key:"_onTraversalEnd",value:function(e){var t=e.viewport.id;this.frameStateData[t]||(this.frameStateData[t]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var r=this.frameStateData[t],n=Object.values(this._traverser.selectedTiles);r.selectedTiles=n,r._requestedTiles=Object.values(this._traverser.requestedTiles),r._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()}},{key:"_updateTiles",value:function(){for(var e in this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[],this.frameStateData){var t=this.frameStateData[e];this.selectedTiles=this.selectedTiles.concat(t.selectedTiles),this._requestedTiles=this._requestedTiles.concat(t._requestedTiles),this._emptyTiles=this._emptyTiles.concat(t._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);var r,n=v(this.selectedTiles);try{for(n.s();!(r=n.n()).done;){var i=r.value;this._tiles[i.id]=i}}catch(e){n.e(e)}finally{n.f()}this._loadTiles(),this._unloadTiles(),this._updateStats()}},{key:"_tilesChanged",value:function(e,t){if(e.length!==t.length)return!0;var r=new Set(e.map((function(e){return e.id}))),n=new Set(t.map((function(e){return e.id}))),i=e.filter((function(e){return!n.has(e.id)})).length>0;return i=i||t.filter((function(e){return!r.has(e.id)})).length>0}},{key:"_loadTiles",value:function(){var e,t=v(this._requestedTiles);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.contentUnloaded&&this._loadTile(r)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,(function(e,t){return e._unloadTile(t)}))}},{key:"_updateStats",value:function(){var e,t=0,r=0,n=v(this.selectedTiles);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.contentAvailable&&i.content&&(t++,i.content.pointCount&&(r+=i.content.pointCount))}}catch(e){n.e(e)}finally{n.f()}this.stats.get("Tiles In View").count=this.selectedTiles.length,this.stats.get("Tiles To Render").count=t,this.stats.get("Points").count=r}},{key:"_initializeTileSet",value:function(e){this.root=this._initializeTileHeaders(e,null),this.type===y.TILESET_TYPE.TILES3D&&this._initializeCesiumTileset(e),this.type===y.TILESET_TYPE.I3S&&this._initializeI3STileset(),this._calculateViewProps()}},{key:"_calculateViewProps",value:function(){var e=this.root;(0,a.assert)(e);var t=e.boundingVolume.center;if(!t)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new n.Vector3,void(this.zoom=1);this.cartographicCenter=i.Ellipsoid.WGS84.cartesianToCartographic(t,new n.Vector3),this.cartesianCenter=t,this.zoom=(0,l.getZoomFromBoundingVolume)(e.boundingVolume)}},{key:"_initializeStats",value:function(){this.stats.get("Tiles In Tileset(s)"),this.stats.get("Tiles Loading"),this.stats.get("Tiles In Memory"),this.stats.get("Tiles In View"),this.stats.get("Tiles To Render"),this.stats.get("Tiles Loaded"),this.stats.get("Tiles Unloaded"),this.stats.get("Failed Tile Loads"),this.stats.get("Points","memory"),this.stats.get("Tile Memory Use","memory")}},{key:"_initializeTileHeaders",value:function(e,t){var r=new f.default(this,e.root,t);if(t&&(t.children.push(r),r.depth=t.depth+1),this.type===y.TILESET_TYPE.TILES3D){var n=[];for(n.push(r);n.length>0;){var i=n.pop();this.stats.get("Tiles In Tileset(s)").incrementCount();var o,a=v(i.header.children||[]);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=new f.default(this,s,i);i.children.push(u),u.depth=i.depth+1,n.push(u)}}catch(e){a.e(e)}finally{a.f()}}}return r}},{key:"_initializeTraverser",value:function(){var e;switch(this.type){case y.TILESET_TYPE.TILES3D:e=h.default;break;case y.TILESET_TYPE.I3S:e=p.default;break;default:e=d.default}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(e){this._destroySubtree(e)}},{key:"_loadTile",value:(g=regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._onStartTileLoading(),e.next=4,t.loadContent();case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this._onTileLoadError(t,e.t0);case 10:return e.prev=10,this._onEndTileLoading(),this._onTileLoad(t,r),e.finish(10);case 14:case"end":return e.stop()}}),e,this,[[0,7,10,14]])})),w=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=g.apply(e,t);function o(e){b(i,r,n,o,a,"next",e)}function a(e){b(i,r,n,o,a,"throw",e)}o(void 0)}))},function(e){return w.apply(this,arguments)})},{key:"_onTileLoadError",value:function(e,t){this.stats.get("Failed Tile Loads").incrementCount();var r=t.message||t.toString(),n=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(r)),this.options.onTileError(e,r,n)}},{key:"_onTileLoad",value:function(e,t){t&&(e&&e.content&&(0,u.calculateTransformProps)(e,e.content),this._addTileToCache(e),this.options.onTileLoad(e))}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get("Tiles Loading").incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get("Tiles Loading").decrementCount()}},{key:"_addTileToCache",value:function(e){this._cache.add(this,e,(function(t){return t._updateCacheStats(e)}))}},{key:"_updateCacheStats",value:function(e){this.stats.get("Tiles Loaded").incrementCount(),this.stats.get("Tiles In Memory").incrementCount(),this.gpuMemoryUsageInBytes+=e.content.byteLength||0,this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(e){this.gpuMemoryUsageInBytes-=e.content&&e.content.byteLength||0,this.stats.get("Tiles In Memory").decrementCount(),this.stats.get("Tiles Unloaded").incrementCount(),this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}},{key:"_destroy",value:function(){var e=[];for(this.root&&e.push(this.root);e.length>0;){var t,r=e.pop(),n=v(r.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(i)}}catch(e){n.e(e)}finally{n.f()}this._destroyTile(r)}this.root=null}},{key:"_destroySubtree",value:function(e){var t=e,r=[];for(r.push(t);r.length>0;){var n,i=v((e=r.pop()).children);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(o)}}catch(e){i.e(e)}finally{i.f()}e!==t&&this._destroyTile(e)}t.children=[]}},{key:"_destroyTile",value:function(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}},{key:"_initializeCesiumTileset",value:function(e){if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this.extras=e.extras}},{key:"_initializeI3STileset",value:function(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}])&&_(t.prototype,r),m&&_(t,m),e}();t.default=T},function(e,t,r){"use strict";(function(e,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.nodeVersion=t.isWorker=t.isBrowser=t.document=t.global=t.window=t.self=void 0;var i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},o=i.self||i.window||i.global||{};t.self=o;var a=i.window||i.self||i.global||{};t.window=a;var s=i.global||i.self||i.window||{};t.global=s;var u=i.document||{};t.document=u;var c="object"!==(void 0===r?"undefined":n(r))||"[object process]"!==String(r)||r.browser;t.isBrowser=c;var l="function"==typeof importScripts;t.isWorker=l;var f=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version),h=f&&parseFloat(f[1])||0;t.nodeVersion=h}).call(this,r(25),r(21))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLoaderWorker=function(e){if("undefined"==typeof self)return;n.WorkerBody.onmessage=function(){var t=u(regeneratorRuntime.mark((function t(r,i){var o,a,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next="process"===t.t0?3:16;break;case 3:return t.prev=3,o=i.input,a=i.options,s=void 0===a?{}:a,t.next=7,f({loader:e,arrayBuffer:o,options:s,context:{parse:l}});case 7:u=t.sent,n.WorkerBody.postMessage("done",{result:u}),t.next=15;break;case 11:t.prev=11,t.t1=t.catch(3),c=t.t1 instanceof Error?t.t1.message:"",n.WorkerBody.postMessage("error",{error:c});case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,r){return t.apply(this,arguments)}}()};var n=r(38);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,u,"next",e)}function u(e){s(o,n,i,a,u,"throw",e)}a(void 0)}))}}var c=0;function l(e,t){return new Promise((function(r,i){var o=c++;n.WorkerBody.addEventListener((function e(t,a){if(a.id===o)switch(t){case"done":n.WorkerBody.removeEventListener(e),r(a.result);break;case"error":n.WorkerBody.removeEventListener(e),i(a.error)}}));var a={id:o,input:e,options:t};n.WorkerBody.postMessage("process",a)}))}function f(e){return h.apply(this,arguments)}function h(){return(h=u(regeneratorRuntime.mark((function e(t){var r,n,i,a,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.loader,n=t.arrayBuffer,i=t.options,a=t.context,!r.parseSync&&!r.parse){e.next=6;break}s=n,u=r.parseSync||r.parse,e.next=13;break;case 6:if(!r.parseTextSync){e.next=12;break}c=new TextDecoder,s=c.decode(n),u=r.parseTextSync,e.next=13;break;case 12:throw new Error("Could not load data with ".concat(r.name," loader"));case 13:return i=o(o({},i),{},{modules:r&&r.options&&r.options.modules||{},worker:!1}),e.next=16,u(s,o({},i),a,r);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLoadableWorkerURL=function(e){(0,n.assert)(e.source&&!e.url||!e.source&&e.url);var t=i.get(e.source||e.url);t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return o((t=e,"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var t}(e.url),i.set(e.url,t)),e.source&&(t=o(e.source),i.set(e.source,t)));return(0,n.assert)(t),t};var n=r(17),i=new Map;function o(e){var t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canProcessOnWorker=function(e,t){if(!i.default.isSupported())return!1;return e.worker&&(null==t?void 0:t.worker)},t.processOnWorker=function(e,t){return c.apply(this,arguments)};var n,i=(n=r(55))&&n.__esModule?n:{default:n},o=r(84),a=r(58);function s(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,u,"next",e)}function u(e){s(o,n,i,a,u,"throw",e)}a(void 0)}))}}function c(){return(c=u(regeneratorRuntime.mark((function e(t,r){var n,s,u,c,f,h,d,p,y,m,b=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length>2&&void 0!==b[2]?b[2]:{},s=b.length>3&&void 0!==b[3]?b[3]:{},u=(0,a.getWorkerName)(t),c=(0,a.getWorkerURL)(t,n),f=i.default.getWorkerFarm(n),h=f.getWorkerPool({name:u,url:c}),d=n.jobName||t.name,e.next=9,h.startJob(d,l.bind(null,s));case 9:return p=e.sent,y=(0,o.removeNontransferableOptions)(n),p.postMessage("process",{input:r,options:y}),e.next=14,p.result;case 14:return m=e.sent,e.abrupt("return",m.result);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,r,n){return f.apply(this,arguments)}function f(){return(f=u(regeneratorRuntime.mark((function e(t,r,n,i){var o,a,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="done"===e.t0?3:"error"===e.t0?5:"process"===e.t0?7:23;break;case 3:return r.done(i),e.abrupt("break",24);case 5:return r.error(i.error),e.abrupt("break",24);case 7:if(o=i.id,a=i.input,s=i.options,e.prev=8,t.process){e.next=12;break}return r.postMessage("error",{id:o,error:"Worker not set up to process on main thread"}),e.abrupt("return");case 12:return e.next=14,t.process(a,s);case 14:u=e.sent,r.postMessage("done",{id:o,result:u}),e.next=22;break;case 18:e.prev=18,e.t1=e.catch(8),c=e.t1 instanceof Error?e.t1.message:"unknown error",r.postMessage("error",{id:o,error:c});case 22:return e.abrupt("break",24);case 23:console.warn("process-on-worker: unknown message ".concat(n));case 24:case"end":return e.stop()}}),e,null,[[8,18]])})))).apply(this,arguments)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.removeNontransferableOptions=function(e){return JSON.parse((t=e,r=new Set,JSON.stringify(t,(function(e,t){if("object"===n(t)&&null!==t){if(r.has(t))try{return JSON.parse(JSON.stringify(t))}catch(e){return}r.add(t)}return t}))));var t,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWorker=function(e,t){if("undefined"==typeof self)return;var r={process:f};i.default.onmessage=function(){var o,l=(o=regeneratorRuntime.mark((function o(a,l){var f,h,d,p,y,m,b,v,g,w;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.prev=0,o.t0=a,o.next="process"===o.t0?4:"process-in-batches"===o.t0?11:"input-batch"===o.t0?51:"input-done"===o.t0?53:55;break;case 4:if(e){o.next=6;break}throw new Error("Worker does not support atomic processing");case 6:return o.next=8,e(l.input,l.options||{},r);case 8:return f=o.sent,i.default.postMessage("done",{result:f}),o.abrupt("break",55);case 11:if(t){o.next=13;break}throw new Error("Worker does not support batched processing");case 13:u=new n.default,c=l.options||{},h=t(u,c,null==r?void 0:r.processInBatches),d=!0,p=!1,o.prev=18,m=s(h);case 20:return o.next=22,m.next();case 22:return b=o.sent,d=b.done,o.next=26,b.value;case 26:if(v=o.sent,d){o.next=33;break}g=v,i.default.postMessage("output-batch",{result:g});case 30:d=!0,o.next=20;break;case 33:o.next=39;break;case 35:o.prev=35,o.t1=o.catch(18),p=!0,y=o.t1;case 39:if(o.prev=39,o.prev=40,d||null==m.return){o.next=44;break}return o.next=44,m.return();case 44:if(o.prev=44,!p){o.next=47;break}throw y;case 47:return o.finish(44);case 48:return o.finish(39);case 49:return i.default.postMessage("done",{}),o.abrupt("break",55);case 51:return u.push(l.input),o.abrupt("break",55);case 53:return u.close(),o.abrupt("break",55);case 55:o.next=61;break;case 57:o.prev=57,o.t2=o.catch(0),w=o.t2 instanceof Error?o.t2.message:"",i.default.postMessage("error",{error:w});case 61:case"end":return o.stop()}}),o,null,[[0,57],[18,35,39,49],[40,,44,48]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function s(e){a(i,r,n,s,u,"next",e)}function u(e){a(i,r,n,s,u,"throw",e)}s(void 0)}))});return function(e,t){return l.apply(this,arguments)}}()};var n=o(r(59)),i=o(r(57));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function s(e){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=e[Symbol.iterator])),null==t&&(t=e["@@asyncIterator"]),null==t&&(t=e["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(e)}var u,c,l=0;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){var o=l++;i.default.addEventListener((function e(t,a){if(a.id===o)switch(t){case"done":i.default.removeEventListener(e),r(a.result);break;case"error":i.default.removeEventListener(e),n(a.error)}}));var a={id:o,input:e,options:t};i.default.postMessage("process",a)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateWorkerVersion=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.VERSION;(0,n.assert)(e,"no worker provided");var r=e.version;if(!t||!r)return!1;return!0};var n=r(17),i=r(34)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.loadLibrary=function(e){return f.apply(this,arguments)},t.getLibraryUrl=h;var i=r(39),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=e[a]}i.default=e,r&&r.set(e,i);return i}(r(88)),a=r(17);r(34);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function u(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))}}var l={};function f(){return(f=c(regeneratorRuntime.mark((function e(t){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:null,n=i.length>2&&void 0!==i[2]?i[2]:{},r&&(t=h(t,r,n)),l[t]=l[t]||d(t),e.next=6,l[t];case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,r){if(e.startsWith("http"))return e;var n=r.modules||{};return n[e]?n[e]:i.isBrowser?r.CDN?((0,a.assert)(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(t,"@").concat("3.0.8","/dist/libs/").concat(e)):i.isWorker?"../src/libs/".concat(e):"modules/".concat(t,"/src/libs/").concat(e):"modules/".concat(t,"/dist/libs/").concat(e)}function d(e){return p.apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endsWith("wasm")){e.next=7;break}return e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.arrayBuffer();case 6:return e.abrupt("return",e.sent);case 7:if(i.isBrowser){e.next=14;break}if(e.t0=o.requireFromFile,!e.t0){e.next=13;break}return e.next=12,o.requireFromFile(t);case 12:e.t0=e.sent;case 13:return e.abrupt("return",e.t0);case 14:if(!i.isWorker){e.next=16;break}return e.abrupt("return",importScripts(t));case 16:return e.next=18,fetch(t);case 18:return n=e.sent,e.next=21,n.text();case 21:return a=e.sent,e.abrupt("return",y(a,t));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){if(!i.isBrowser)return o.requireFromString&&o.requireFromString(e,t);if(i.isWorker)return eval.call(i.global,e),null;var r=document.createElement("script");r.id=t;try{r.appendChild(document.createTextNode(e))}catch(t){r.text=e}return document.body.appendChild(r),null}},function(e,t){},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canParseWithWorker=function(e,t){if(!n.WorkerFarm.isSupported())return!1;return e.worker&&(null==t?void 0:t.worker)},t.parseWithWorker=function(e,t,r,n,i){return a.apply(this,arguments)};var n=r(38);function i(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}function a(){return(a=o(regeneratorRuntime.mark((function e(t,r,i,o,a){var u,c,l,f,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.id,c=(0,n.getWorkerURL)(t,i),l=n.WorkerFarm.getWorkerFarm(i),f=l.getWorkerPool({name:u,url:c}),i=JSON.parse(JSON.stringify(i)),e.next=7,f.startJob("process-on-worker",s.bind(null,a));case 7:return(h=e.sent).postMessage("process",{input:r,options:i}),e.next=11,h.result;case 11:return d=e.sent,e.next=14,d.result;case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e,t,r,n){return u.apply(this,arguments)}function u(){return(u=o(regeneratorRuntime.mark((function e(t,r,n,i){var o,a,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="done"===e.t0?3:"error"===e.t0?5:"process"===e.t0?7:20;break;case 3:return r.done(i),e.abrupt("break",21);case 5:return r.error(i.error),e.abrupt("break",21);case 7:return o=i.id,a=i.input,s=i.options,e.prev=8,e.next=11,t(a,s);case 11:u=e.sent,r.postMessage("done",{id:o,result:u}),e.next=19;break;case 15:e.prev=15,e.t1=e.catch(8),c=e.t1 instanceof Error?e.t1.message:"unknown error",r.postMessage("error",{id:o,error:c});case 19:return e.abrupt("break",21);case 20:console.warn("parse-with-worker unknown message ".concat(n));case 21:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseJSON=function(e){try{return JSON.parse(e)}catch(t){throw new Error('Failed to parse JSON from data starting with "'.concat((0,n.getFirstCharacters)(e),'"'))}};var n=r(60)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyPaddedArrayBufferToDataView=i,t.copyPaddedStringToDataView=function(e,t,r,n){var o=(new TextEncoder).encode(r);return t=i(e,t,o,n)};var n=r(63);function i(e,t,r,i){var o=(0,n.padToNBytes)(r.byteLength,i),a=o-r.byteLength;if(e){var s=new Uint8Array(e.buffer,e.byteOffset+t,r.byteLength),u=new Uint8Array(r);s.set(u);for(var c=0;c<a;++c)e.setUint8(t+r.byteLength+c,32)}return t+=o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.padStringToByteAlignment=function(e,t){for(var r=e.length,n=Math.ceil(r/t)*t-r,i="",o=0;o<n;++o)i+=" ";return e+i},t.copyStringToDataView=function(e,t,r,n){if(e)for(var i=0;i<n;i++)e.setUint8(t+i,r.charCodeAt(i));return t+n},t.copyBinaryToDataView=function(e,t,r,n){if(e)for(var i=0;i<n;i++)e.setUint8(t+i,r[i]);return t+n}},function(e,t,r){"use strict";function n(e){return new a(e)}function i(e){return function(){return new o(e.apply(this,arguments))}}function o(e){var t,r;function n(t,r){try{var o=e[t](r),s=o.value,u=s instanceof a;Promise.resolve(u?s.wrapped:s).then((function(e){u?n("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function a(e){this.wrapped=e}function s(e){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=e[Symbol.iterator])),null==t&&(t=e["@@asyncIterator"]),null==t&&(t=e["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(e)}function u(){return(u=i(regeneratorRuntime.mark((function e(t){var r,i,o,a,u,c,l,f,h,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>1&&void 0!==d[1]?d[1]:{},i=new TextDecoder(void 0,r),o=!0,a=!1,e.prev=4,c=s(t);case 6:return e.next=8,n(c.next());case 8:return l=e.sent,o=l.done,e.next=12,n(l.value);case 12:if(f=e.sent,o){e.next=20;break}return h=f,e.next=17,"string"==typeof h?h:i.decode(h,{stream:!0});case 17:o=!0,e.next=6;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),a=!0,u=e.t0;case 26:if(e.prev=26,e.prev=27,o||null==c.return){e.next=31;break}return e.next=31,n(c.return());case 31:if(e.prev=31,!a){e.next=34;break}throw u;case 34:return e.finish(31);case 35:return e.finish(26);case 36:case"end":return e.stop()}}),e,null,[[4,22,26,36],[27,,31,35]])})))).apply(this,arguments)}function c(){return(c=i(regeneratorRuntime.mark((function e(t){var r,i,o,a,u,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new TextEncoder,i=!0,o=!1,e.prev=3,u=s(t);case 5:return e.next=7,n(u.next());case 7:return c=e.sent,i=c.done,e.next=11,n(c.value);case 11:if(l=e.sent,i){e.next=19;break}return f=l,e.next=16,"string"==typeof f?r.encode(f):f;case 16:i=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),o=!0,a=e.t0;case 25:if(e.prev=25,e.prev=26,i||null==u.return){e.next=30;break}return e.next=30,n(u.return());case 30:if(e.prev=30,!o){e.next=33;break}throw a;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[3,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark((function e(t){var r,i,o,a,u,c,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="",i=!0,o=!1,e.prev=3,u=s(t);case 5:return e.next=7,n(u.next());case 7:return c=e.sent,i=c.done,e.next=11,n(c.value);case 11:if(l=e.sent,i){e.next=26;break}r+=l,f=void 0;case 16:if(!((f=r.indexOf("\n"))>=0)){e.next=23;break}return h=r.slice(0,f+1),r=r.slice(f+1),e.next=21,h;case 21:e.next=16;break;case 23:i=!0,e.next=5;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(3),o=!0,a=e.t0;case 32:if(e.prev=32,e.prev=33,i||null==u.return){e.next=37;break}return e.next=37,n(u.return());case 37:if(e.prev=37,!o){e.next=40;break}throw a;case 40:return e.finish(37);case 41:return e.finish(32);case 42:if(!(r.length>0)){e.next=45;break}return e.next=45,r;case 45:case"end":return e.stop()}}),e,null,[[3,28,32,42],[33,,37,41]])})))).apply(this,arguments)}function f(){return(f=i(regeneratorRuntime.mark((function e(t){var r,i,o,a,u,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=1,i=!0,o=!1,e.prev=3,u=s(t);case 5:return e.next=7,n(u.next());case 7:return c=e.sent,i=c.done,e.next=11,n(c.value);case 11:if(l=e.sent,i){e.next=20;break}return f=l,e.next=16,{counter:r,line:f};case 16:r++;case 17:i=!0,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),o=!0,a=e.t0;case 26:if(e.prev=26,e.prev=27,i||null==u.return){e.next=31;break}return e.next=31,n(u.return());case 31:if(e.prev=31,!o){e.next=34;break}throw a;case 34:return e.finish(31);case 35:return e.finish(26);case 36:case"end":return e.stop()}}),e,null,[[3,22,26,36],[27,,31,35]])})))).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.makeTextDecoderIterator=function(e){return u.apply(this,arguments)},t.makeTextEncoderIterator=function(e){return c.apply(this,arguments)},t.makeLineIterator=function(e){return l.apply(this,arguments)},t.makeNumberedLineIterator=function(e){return f.apply(this,arguments)},o.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=function(e,t){return s.apply(this,arguments)},t.concatenateArrayBuffersAsync=function(e){return u.apply(this,arguments)},t.concatenateStringsAsync=function(e){return c.apply(this,arguments)};var n=r(61);function i(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}function a(e){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=e[Symbol.iterator])),null==t&&(t=e["@@asyncIterator"]),null==t&&(t=e["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(e)}function s(){return(s=o(regeneratorRuntime.mark((function e(t,r){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.next();case 3:if(n=e.sent,i=n.done,o=n.value,!i){e.next=9;break}return t.return(),e.abrupt("return");case 9:if(!r(o)){e.next=12;break}return e.abrupt("return");case 12:e.next=0;break;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=o(regeneratorRuntime.mark((function e(t){var r,i,o,s,u,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=!0,o=!1,e.prev=3,u=a(t);case 5:return e.next=7,u.next();case 7:return c=e.sent,i=c.done,e.next=11,c.value;case 11:if(l=e.sent,i){e.next=18;break}f=l,r.push(f);case 15:i=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),o=!0,s=e.t0;case 24:if(e.prev=24,e.prev=25,i||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!o){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(24);case 34:return e.abrupt("return",n.concatenateArrayBuffers.apply(void 0,r));case 35:case"end":return e.stop()}}),e,null,[[3,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function c(){return(c=o(regeneratorRuntime.mark((function e(t){var r,n,i,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!0,i=!1,e.prev=3,s=a(t);case 5:return e.next=7,s.next();case 7:return u=e.sent,n=u.done,e.next=11,u.value;case 11:if(c=e.sent,n){e.next=18;break}l=c,r.push(l);case 15:n=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),i=!0,o=e.t0;case 24:if(e.prev=24,e.prev=25,n||null==s.return){e.next=29;break}return e.next=29,s.return();case 29:if(e.prev=29,!i){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(24);case 34:return e.abrupt("return",r.join(""));case 35:case"end":return e.stop()}}),e,null,[[3,20,24,34],[25,,29,33]])})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(29);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={id:"request-scheduler",throttleRequests:!0,maxRequests:6},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),u(this,"props",void 0),u(this,"stats",void 0),u(this,"activeRequestCount",0),u(this,"requestQueue",[]),u(this,"requestMap",new Map),u(this,"deferredUpdate",null),this.props=o(o({},c),t),this.stats=new n.Stats({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}var t,r,i;return t=e,(r=[{key:"scheduleRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var r={handle:e,priority:0,getPriority:t},n=new Promise((function(e){return r.resolve=e,r}));return this.requestQueue.push(r),this.requestMap.set(e,n),this._issueNewRequests(),n}},{key:"_issueRequest",value:function(e){var t=this,r=e.handle,n=e.resolve,i=!1,o=function(){i||(i=!0,t.requestMap.delete(r),t.activeRequestCount--,t._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}},{key:"_issueNewRequests",value:function(){var e=this;this.deferredUpdate||(this.deferredUpdate=setTimeout((function(){return e._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this.deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(var t=0;t<e;++t){var r=this.requestQueue.shift();r&&this._issueRequest(r)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,t=0;t<e.length;++t){var r=e[t];this._updateRequest(r)||(e.splice(t,1),this.requestMap.delete(r.handle),t--)}e.sort((function(e,t){return e.priority-t.priority}))}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),!(e.priority<0&&(e.resolve(null),1))}}])&&s(t.prototype,r),i&&s(t,i),e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dirname=function(e){var t=e&&e.lastIndexOf("/");return t>=0?e.substr(0,t):""},t.join=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n="/";return(t=t.map((function(e,r){return r&&(e=e.replace(new RegExp("^".concat(n)),"")),r!==t.length-1&&(e=e.replace(new RegExp("".concat(n,"$")),"")),e}))).join(n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPathPrefix=function(e){n=e},t.getPathPrefix=function(){return n},t.addAliases=function(e){Object.assign(i,e)},t.resolvePath=function(e){for(var t in i)if(e.startsWith(t)){var r=i[t];e=e.replace(t,r)}e.startsWith("http://")||e.startsWith("https://")||(e="".concat(n).concat(e));return e};var n="",i={}},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBuffer=function(e){return e&&"object"===o(e)&&e.isBuffer},t.toBuffer=function(e){return n.toBuffer?n.toBuffer(e):e},t.bufferToArrayBuffer=function(e){if(n.toArrayBuffer)return n.toArrayBuffer(e);return e};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(n,s,u):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r(62));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}Object.defineProperty(t,"__esModule",{value:!0}),t._typecheckJSONLoader=t.JSONLoader=void 0;var i,o,a={name:"JSON",id:"json",module:"json",version:"3.0.8",extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:s,parse:(i=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s((new TextDecoder).decode(t)));case 1:case"end":return e.stop()}}),e)})),o=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=i.apply(e,t);function s(e){n(a,r,o,s,u,"next",e)}function u(e){n(a,r,o,s,u,"throw",e)}s(void 0)}))},function(e){return o.apply(this,arguments)}),options:{}};function s(e){return JSON.parse(e)}t.JSONLoader=a;var u=a;t._typecheckJSONLoader=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(103))&&n.__esModule?n:{default:n};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this._length=0}var t,r,n;return t=e,(r=[{key:"length",get:function(){return this._length}},{key:"add",value:function(e){var t=new i.default(e,this.tail,null);return this.tail?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t}},{key:"remove",value:function(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}},{key:"splice",value:function(e,t){e!==t&&(this.remove(t),this._insert(e,t))}},{key:"_insert",value:function(e,t){var r=e.next;e.next=t,this.tail===e?this.tail=t:r.previous=t,t.next=r,t.previous=e,++this._length}}])&&o(t.prototype,r),n&&o(t,n),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.item=t,this.previous=r,this.next=n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getZoomFromBoundingVolume=function(e){var t=e.halfAxes,r=e.radius,n=e.width,o=e.height;if(t){var a=function(e){e.getColumn(0,i);var t=e.getColumn(1),r=e.getColumn(2);return i.add(t).add(r).len()}(t);return Math.log2(6356752.314245179/a)}if(r)return Math.log2(6356752.314245179/r);if(o&&n){var s=Math.log2(6378137/n),u=Math.log2(6378137/o);return(s+u)/2}return 1};var n=r(4),i=new n.Vector3},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMIMEType=function(e){var t=i.exec(e);if(t)return t[1];return e},t.parseMIMETypeFromURL=function(e){var t=n.exec(e);if(t)return t[1];return""};var n=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,i=/^([-\w.]+\/[-\w.+]+)/},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readArrayBuffer=function(e,t,r){return a.apply(this,arguments)},t.readBlob=s;var n=r(6);function i(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}function a(){return(a=o(regeneratorRuntime.mark((function e(t,r,i){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("number"!=typeof t){e.next=4;break}return e.next=3,n.fs._readToArrayBuffer(t,r,i);case 3:return e.abrupt("return",e.sent);case 4:return t instanceof Blob||(t=new Blob([t])),o=t.slice(r,r+i),e.next=8,s(o);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){var n=new FileReader;n.onload=function(t){var r;return e(null==t||null===(r=t.target)||void 0===r?void 0:r.result)},n.onerror=function(e){return r(e)},n.readAsArrayBuffer(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readFileSync=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=(0,n.resolvePath)(e),!n.isBrowser){var r=n.fs.readFileSync(e,t);return"string"!=typeof r?(0,n.toArrayBuffer)(r):r}t.nothrow||(0,n.assert)(!1);return null};var n=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLoaderOptions=function(e){(0,n.setGlobalOptions)(e)};var n=r(14)},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOVED_LOADER_OPTIONS=t.DEFAULT_LOADER_OPTIONS=void 0;var n={fetch:null,mimeType:void 0,nothrow:!1,log:new(r(69).ConsoleLog),CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]};t.DEFAULT_LOADER_OPTIONS=n;t.REMOVED_LOADER_OPTIONS={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStringIterator=i;var n=regeneratorRuntime.mark(i);function i(e,t){var r,i,o,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=(null==t?void 0:t.chunkSize)||262144,i=0,o=new TextEncoder;case 3:if(!(i<e.length)){n.next=11;break}return a=Math.min(e.length-i,r),s=e.slice(i,i+a),i+=a,n.next=9,o.encode(s);case 9:n.next=3;break;case 11:case"end":return n.stop()}}),n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeArrayBufferIterator=i;var n=regeneratorRuntime.mark(i);function i(e){var t,r,i,o,a,s,u,c=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=c.length>1&&void 0!==c[1]?c[1]:{},r=t.chunkSize,i=void 0===r?262144:r,o=0;case 3:if(!(o<e.byteLength)){n.next=14;break}return a=Math.min(e.byteLength-o,i),s=new ArrayBuffer(a),u=new Uint8Array(e,o,a),new Uint8Array(s).set(u),o+=a,n.next=12,s;case 12:n.next=3;break;case 14:case"end":return n.stop()}}),n)}},function(e,t,r){"use strict";function n(e){return new a(e)}function i(e){return function(){return new o(e.apply(this,arguments))}}function o(e){var t,r;function n(t,r){try{var o=e[t](r),s=o.value,u=s instanceof a;Promise.resolve(u?s.wrapped:s).then((function(e){u?n("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function a(e){this.wrapped=e}Object.defineProperty(t,"__esModule",{value:!0}),t.makeBlobIterator=function(e,t){return s.apply(this,arguments)},o.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)};function s(){return(s=i(regeneratorRuntime.mark((function e(t,r){var i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(null==r?void 0:r.chunkSize)||1048576,o=0;case 2:if(!(o<t.size)){e.next=12;break}return a=o+i,e.next=6,n(t.slice(o,a).arrayBuffer());case 6:return s=e.sent,o=a,e.next=10,s;case 10:e.next=2;break;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStreamIterator=function(e,t){return n.isBrowser?function(e,t){return c.apply(this,arguments)}(e,t):function(e,t){return l.apply(this,arguments)}(e,t)};var n=r(6);function i(e){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=e[Symbol.iterator])),null==t&&(t=e["@@asyncIterator"]),null==t&&(t=e["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(e)}function o(e){return new u(e)}function a(e){return function(){return new s(e.apply(this,arguments))}}function s(e){var t,r;function n(t,r){try{var o=e[t](r),a=o.value,s=a instanceof u;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function u(e){this.wrapped=e}function c(){return(c=a(regeneratorRuntime.mark((function e(t,r){var i,a,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.getReader(),e.prev=1;case 2:return s=a||i.read(),null!=r&&r._streamReadAhead&&(a=i.read()),e.next=7,o(s);case 7:if(u=e.sent,c=u.done,l=u.value,!c){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,n.toArrayBuffer)(l);case 14:e.next=2;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),i.releaseLock();case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}function l(){return(l=a(regeneratorRuntime.mark((function e(t,r){var a,s,u,c,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,s=!1,e.prev=2,c=i(t);case 4:return e.next=6,o(c.next());case 6:return l=e.sent,a=l.done,e.next=10,o(l.value);case 10:if(f=e.sent,a){e.next=18;break}return h=f,e.next=15,(0,n.toArrayBuffer)(h);case 15:a=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),s=!0,u=e.t0;case 24:if(e.prev=24,e.prev=25,a||null==c.return){e.next=29;break}return e.next=29,o(c.return());case 29:if(e.prev=29,!s){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])})))).apply(this,arguments)}s.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},s.prototype.next=function(e){return this._invoke("next",e)},s.prototype.throw=function(e){return this._invoke("throw",e)},s.prototype.return=function(e){return this._invoke("return",e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSync=function e(t,r,f,h){(0,n.assert)(!h||"object"===l(h)),Array.isArray(r)||(0,o.isLoaderObject)(r)||(h=void 0,f=r,r=void 0);f=f||{};var d=r,p=(0,u.getLoadersFromContext)(d,h),y=(0,i.selectLoaderSync)(t,p,f);if(!y)return null;f=(0,a.normalizeOptions)(f,y,p);var m=(0,c.getResourceUrlAndType)(t).url;return h=(0,u.getLoaderContext)({url:m,parseSync:e,parse:function(){throw new Error("parseSync called parse")},loaders:r},f),function(e,t,r,n){if(t=(0,s.getArrayBufferOrStringFromDataSync)(t,e,r),e.parseTextSync&&"string"==typeof t)return e.parseTextSync(t,r);if(e.parseSync&&t instanceof ArrayBuffer)return e.parseSync(t,r,n);throw new Error("".concat(e.name," loader: 'parseSync' not supported by this loader, use 'parse' instead. ").concat(n.url||""))}(y,t,f,h)};var n=r(6),i=r(35),o=r(18),a=r(14),s=r(46),u=r(47),c=r(26);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e,t,r,n){return c.apply(this,arguments)};var n=r(13),i=r(18),o=r(14),a=r(45);function s(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,u,"next",e)}function u(e){s(o,n,i,a,u,"throw",e)}a(void 0)}))}}function c(){return(c=u(regeneratorRuntime.mark((function e(t,r,s,u){var c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(r)||(0,i.isLoaderObject)(r)||(void 0,s=r,r=void 0),c=(0,o.getFetchFunction)(s),l=t,"string"!=typeof t){e.next=7;break}return e.next=6,c(t);case 6:l=e.sent;case 7:if(!(0,n.isBlob)(t)){e.next=11;break}return e.next=10,c(t);case 10:l=e.sent;case 11:return e.next=13,(0,a.parse)(l,r,s);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadInBatches=function(e,t,r,o){Array.isArray(t)||(0,n.isLoaderObject)(t)||(void 0,r=t,t=null);var a=(0,i.getFetchFunction)(r||{});if(!Array.isArray(e))return u(e,t,r,a);return e.map((function(e){return u(e,t,r,a)}))};var n=r(18),i=r(14),o=r(72);function a(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,u,"next",e)}function u(e){a(o,n,i,s,u,"throw",e)}s(void 0)}))}}function u(e,t,r,n){return c.apply(this,arguments)}function c(){return(c=s(regeneratorRuntime.mark((function e(t,r,n,i){var a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=8;break}return a=t,e.next=4,i(a);case 4:return s=e.sent,e.next=7,(0,o.parseInBatches)(s,r,n);case 7:return e.abrupt("return",e.sent);case 8:return e.next=10,(0,o.parseInBatches)(t,r,n);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.save=function(e,t,r,n){return s.apply(this,arguments)},t.saveSync=function(e,t,r,o){var a=(0,n.encodeSync)(e,r,o);return(0,i.writeFileSync)(t,a)};var n=r(73),i=r(44);function o(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,u,"next",e)}function u(e){o(a,n,i,s,u,"throw",e)}s(void 0)}))}}function s(){return(s=a(regeneratorRuntime.mark((function e(t,r,o,a){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.encode)(t,o,a);case 2:return s=e.sent,e.next=5,(0,i.writeFile)(r,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStream=function(e,t){return n.isBrowser?(0,i.makeDOMStream)(e,t):(0,o.makeNodeStream)(e,t)};var n=r(6),i=r(74),o=r(120)},function(e,t){},function(e,t){},function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return new a(e)}function o(e){var t,r;function n(t,r){try{var o=e[t](r),s=o.value,u=s instanceof a;Promise.resolve(u?s.wrapped:s).then((function(e){u?n("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function a(e){this.wrapped=e}function s(e){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=e[Symbol.iterator])),null==t&&(t=e["@@asyncIterator"]),null==t&&(t=e["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NullLoader=t.NullWorkerLoader=void 0,o.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)};var u={name:"Null loader",id:"null",module:"core",version:"3.0.8",worker:!0,mimeTypes:["application/x.empty"],extensions:["null"],tests:[function(){return!1}],options:{null:{}}};t.NullWorkerLoader=u;var c,l,f,h={name:"Null loader",id:"null",module:"core",version:"3.0.8",mimeTypes:["application/x.empty"],extensions:["null"],parse:(l=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})),f=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=l.apply(e,t);function a(e){n(o,r,i,a,s,"next",e)}function s(e){n(o,r,i,a,s,"throw",e)}a(void 0)}))},function(e){return f.apply(this,arguments)}),parseSync:function(e){return e},parseInBatches:(c=function(e){return function(){return new o(e.apply(this,arguments))}}(regeneratorRuntime.mark((function e(t){var r,n,o,a,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,n=!1,e.prev=2,a=s(t);case 4:return e.next=6,i(a.next());case 6:return u=e.sent,r=u.done,e.next=10,i(u.value);case 10:if(c=e.sent,r){e.next=18;break}return l=c,e.next=15,l;case 15:r=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),n=!0,o=e.t0;case 24:if(e.prev=24,e.prev=25,r||null==a.return){e.next=29;break}return e.next=29,i(a.return());case 29:if(e.prev=29,!n){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])}))),function(e){return c.apply(this,arguments)}),tests:[function(){return!1}],options:{null:{}}};t.NullLoader=h},function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}function o(){return(o=i(regeneratorRuntime.mark((function e(t,r){var n,o,s,u,c,l,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>2&&void 0!==f[2]?f[2]:function(){},o=f.length>3&&void 0!==f[3]?f[3]:function(){},e.next=4,t;case 4:if((t=e.sent).ok){e.next=7;break}return e.abrupt("return",t);case 7:if(s=t.body){e.next=10;break}return e.abrupt("return",t);case 10:if(u=t.headers.get("content-length")||0,c=u&&parseInt(u),u>0){e.next=14;break}return e.abrupt("return",t);case 14:if("undefined"!=typeof ReadableStream&&s.getReader){e.next=16;break}return e.abrupt("return",t);case 16:return l=new ReadableStream({start:function(e){return i(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.getReader(),t.next=3,a(e,i,0,c,r,n,o);case 3:case"end":return t.stop()}}),t)})))()}}),e.abrupt("return",new Response(l));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e,t,r,n,i,o,a){return s.apply(this,arguments)}function s(){return(s=i(regeneratorRuntime.mark((function e(t,r,n,i,o,s,u){var c,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.read();case 3:if(c=e.sent,l=c.done,f=c.value,!l){e.next=10;break}return s(),t.close(),e.abrupt("return");case 10:return n+=f.byteLength,h=Math.round(n/i*100),o(h,{loadedBytes:n,totalBytes:i}),t.enqueue(f),e.next=16,a(t,r,n,i,o,s,u);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),t.error(e.t0),u(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return o.apply(this,arguments)}},function(e,t,r){"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_fetch",void 0),a(this,"files",{}),a(this,"lowerCaseFiles",{}),a(this,"usedFiles",{}),this._fetch=(null==r?void 0:r.fetch)||fetch;for(var n=0;n<t.length;++n){var i=t[n];this.files[i.name]=i,this.lowerCaseFiles[i.name.toLowerCase()]=i,this.usedFiles[i.name]=!1}this.fetch=this.fetch.bind(this)}var t,r,n,s,u,c,l,f,h,d;return t=e,(r=[{key:"fetch",value:(d=i(regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s,u,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.includes("://")){e.next=2;break}return e.abrupt("return",this._fetch(t,r));case 2:if(n=this.files[t]){e.next=5;break}return e.abrupt("return",new Response(t,{status:400,statusText:"NOT FOUND"}));case 5:if(i=new Headers(null==r?void 0:r.headers),o=i.get("Range"),!(a=o&&/bytes=($1)-($2)/.exec(o))){e.next=17;break}return s=parseInt(a[1]),u=parseInt(a[2]),e.next=13,n.slice(s,u).arrayBuffer();case 13:return c=e.sent,l=new Response(c),Object.defineProperty(l,"url",{value:t}),e.abrupt("return",l);case 17:return f=new Response(n),Object.defineProperty(f,"url",{value:t}),e.abrupt("return",f);case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"readdir",value:(h=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in r=[],this.files)r.push(n);return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"stat",value:(f=i(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.files[t]){e.next=3;break}throw new Error(t);case 3:return e.abrupt("return",{size:n.size});case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"unlink",value:(l=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.files[t],delete this.lowerCaseFiles[t],this.usedFiles[t]=!0;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"open",value:(c=i(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.files[t]);case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"read",value:(u=i(regeneratorRuntime.mark((function e(t,r){var n,i,o,a,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>2&&void 0!==s[2]&&s[2],n=s.length>3&&void 0!==s[3]?s[3]:r.byteLength,s.length>4&&void 0!==s[4]&&s[4],i=t,o=0,e.next=7,i.slice(o,o+n).arrayBuffer();case 7:return a=e.sent,e.abrupt("return",{bytesRead:n,buffer:a});case 9:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"close",value:(s=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"_getFile",value:function(e,t){var r=this.files[e]||this.lowerCaseFiles[e];return r&&t&&(this.usedFiles[e]=!0),r}}])&&o(t.prototype,r),n&&o(t,n),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateDynamicScreenSpaceError=function(e,t){var r,l,f,h,d,p=t.camera,y=t.mapProjection,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},b=m.dynamicScreenSpaceErrorHeightFalloff,v=void 0===b?.25:b,g=m.dynamicScreenSpaceErrorDensity,w=void 0===g?.00278:g,O=e.contentBoundingVolume;if(O instanceof TileBoundingRegion)r=Cartesian3.normalize(p.positionWC,i),l=p.directionWC,f=p.positionCartographic.height,h=O.minimumHeight,d=O.maximumHeight;else{var _=n.Matrix4.inverseTransformation(e.computedTransform,a),x=y.ellipsoid,k=O.boundingVolume,T=n.Matrix4.multiplyByPoint(_,k.center,s);if(Cartesian3.magnitude(T)>x.minimumRadius){var S=Cartographic.fromCartesian(T,x,o);r=Cartesian3.normalize(p.positionWC,i),l=p.directionWC,f=p.positionCartographic.height,h=0,d=2*S.height}else{var P=n.Matrix4.multiplyByPoint(_,p.positionWC,u);if(r=Cartesian3.UNIT_Z,l=n.Matrix4.multiplyByPointAsVector(_,p.directionWC,c),l=Cartesian3.normalize(l,l),f=P.z,O instanceof TileOrientedBoundingBox){var j=e._header.boundingVolume.box[11];h=T.z-j,d=T.z+j}else if(O instanceof TileBoundingSphere){var E=k.radius;h=T.z-E,d=T.z+E}}}var M=v,R=h+(d-h)*M,A=d,I=(0,n.clamp)((f-R)/(A-R),0,1),L=Math.abs(Cartesian3.dot(l,r)),N=1-L;return w*(N*=1-I)},t.fog=l,t.getDynamicScreenSpaceError=f,t.getTiles3DScreenSpaceError=function(e,t,r){var n=e.tileset,i=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,o=r?i:e.lodMetricValue;if(0===o)return 0;var a=Math.max(e._distanceToCamera,1e-7),s=t.height,u=t.sseDenominator,c=n.options.viewDistanceScale,l=o*s*(c||1)/(a*u);return l-=f(n,a)};var n=r(4),i=new n.Vector3,o=new n.Vector3,a=new n.Matrix4,s=new n.Vector3,u=new n.Vector3,c=new n.Vector3;function l(e,t){var r=e*t;return 1-Math.exp(-r*r)}function f(e,t){if(e.dynamicScreenSpaceError&&e.dynamicScreenSpaceErrorComputedDensity){var r=e.dynamicScreenSpaceErrorComputedDensity,n=e.dynamicScreenSpaceErrorFactor;return l(t,r)*n}return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get3dTilesOptions=function(e){return{assetGltfUpAxis:e.asset&&e.asset.gltfUpAxis||"Y"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(6);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i(this,e),this._array=new Array(t),this._map=new Map,this._length=t}var t,r,a;return t=e,(r=[{key:"length",get:function(){return this._length},set:function(e){this._length=e,e>this._array.length&&(this._array.length=e)}},{key:"values",get:function(){return this._array}},{key:"get",value:function(e){return(0,n.assert)(e<this._array.length),this._array[e]}},{key:"set",value:function(e,t){(0,n.assert)(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=t,this._map.set(t,e)}},{key:"delete",value:function(e){var t=this._map.get(e);t>=0&&(this._array.splice(t,1),this._map.delete(e),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(e){if(!this._map.has(e)){var t=this.length++;this._array[t]=e,this._map.set(e,t)}}},{key:"pop",value:function(){var e=this._array[--this.length];return this._map.delete(e),e}},{key:"reserve",value:function(e){(0,n.assert)(e>=0),e>this._array.length&&(this._array.length=e)}},{key:"resize",value:function(e){(0,n.assert)(e>=0),this.length=e}},{key:"trim",value:function(e){null==e&&(e=this.length),this._array.length=e}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(e){return this._map.has(e)}}])&&o(t.prototype,r),a&&o(t,a),e}();t.default=a},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=r(27);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,r,n,i=l(f);function f(){return a(this,f),i.apply(this,arguments)}return t=f,(r=[{key:"compareDistanceToCamera",value:function(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}},{key:"updateTileVisibility",value:function(e,t){if(u(h(f.prototype),"updateTileVisibility",this).call(this,e,t),e.isVisibleAndInRequestVolume){var r=e.children.length>0;if(e.hasTilesetContent&&r){var n=e.children[0];return this.updateTileVisibility(n,t),void(e._visible=n._visible)}if(this.meetsScreenSpaceErrorEarly(e,t))e._visible=!1;else{var i=e.refine===o.TILE_REFINEMENT.REPLACE,a=e._optimChildrenWithinParent===o.TILE3D_OPTIMIZATION_HINT.USE_OPTIMIZATION;i&&a&&r&&!this.anyChildrenVisible(e,t)&&(e._visible=!1)}}}},{key:"meetsScreenSpaceErrorEarly",value:function(e,t){var r=e.parent;return!(!r||r.hasTilesetContent||r.refine!==o.TILE_REFINEMENT.ADD||this.shouldRefine(e,t,!0))}}])&&s(t.prototype,r),n&&s(t,n),f}(((i=r(28))&&i.__esModule?i:{default:i}).default);t.default=d},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(67),o=c(r(28)),a=r(76),s=c(r(42)),u=c(r(130));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(p,e);var t,r,n,o,c,l=b(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),O(g(t=l.call(this,e)),"_tileManager",void 0),t._tileManager=new u.default,t}return t=p,(r=[{key:"shouldRefine",value:function(e,t){return e._lodJudge=(0,a.lodJudge)(e,t),"DIG"===e._lodJudge}},{key:"updateChildTiles",value:function(e,t){var r,n=this,i=e.header.children||[],o=e.children,a=e.tileset,s=d(i);try{var u=function(){var i=r.value,s="".concat(i.id,"-").concat(t.viewport.id),u=o&&o.find((function(e){return e.id===s}));if(u)u&&n.updateTile(u,t);else{var c=function(){return n._loadTile(i.id,a)};n._tileManager.find(s)?n._tileManager.update(s,t):(a.tileset.nodePages&&(c=function(){return a.tileset.nodePagesTile.formTileFromNodePages(i.id)}),n._tileManager.add(c,s,(function(t){return n._onTileLoad(t,e,s)}),t))}};for(s.s();!(r=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}return!1}},{key:"_loadTile",value:(o=regeneratorRuntime.mark((function e(t,r){var n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.loader,o=r.getTileUrl("".concat(r.url,"/nodes/").concat(t)),a=f(f({},r.loadOptions),{},{i3s:f(f({},r.loadOptions.i3s),{},{isTileHeader:!0,loadContent:!1})}),e.next=5,(0,i.load)(o,n,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})),c=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){h(i,r,n,a,s,"next",e)}function s(e){h(i,r,n,a,s,"throw",e)}a(void 0)}))},function(e,t){return c.apply(this,arguments)})},{key:"_onTileLoad",value:function(e,t,r){var n=new s.default(t.tileset,e,t,r);t.children.push(n);var i=this._tileManager.find(n.id).frameState;this.updateTile(n,i),this._frameNumber===i.frameNumber&&this.executeTraversal(n,i)}}])&&y(t.prototype,r),n&&y(t,n),p}(o.default);t.default=_},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i="REQUESTED",o="COMPLETED",a="ERROR",s=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(r="_statusMap")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._statusMap={}}var t,r,s;return t=e,(r=[{key:"add",value:function(e,t,r,n){var s=this;this._statusMap[t]||(this._statusMap[t]={request:e,callback:r,key:t,frameState:n,status:i},e().then((function(e){s._statusMap[t].status=o,s._statusMap[t].callback(e,n)})).catch((function(e){s._statusMap[t].status=a,r(e)})))}},{key:"update",value:function(e,t){this._statusMap[e]&&(this._statusMap[e].frameState=t)}},{key:"find",value:function(e){return this._statusMap[e]}}])&&n(t.prototype,r),s&&n(t,s),e}();t.default=s},function(e,t,r){"use strict";r.r(t),r.d(t,"VERSION",(function(){return i})),r.d(t,"self",(function(){return y.e})),r.d(t,"window",(function(){return y.f})),r.d(t,"global",(function(){return y.c})),r.d(t,"document",(function(){return y.b})),r.d(t,"process",(function(){return y.d})),r.d(t,"console",(function(){return y.a})),r.d(t,"isBrowser",(function(){return n.a})),r.d(t,"isBrowserMainThread",(function(){return n.b})),r.d(t,"getBrowser",(function(){return j})),r.d(t,"isMobile",(function(){return P})),r.d(t,"isElectron",(function(){return S.a})),r.d(t,"assert",(function(){return p})),r.d(t,"Log",(function(){return x})),r.d(t,"COLOR",(function(){return l})),r.d(t,"addColor",(function(){return h})),r.d(t,"leftPad",(function(){return s})),r.d(t,"rightPad",(function(){return u})),r.d(t,"autobind",(function(){return d})),r.d(t,"LocalStorage",(function(){return a})),r.d(t,"getHiResTimestamp",(function(){return m})),r.d(t,"Stats",(function(){return E.Stats})),r.d(t,"Stat",(function(){return E.Stat}));var n=r(19);const i="3.0.8",o=Object(n.a)();class a{constructor(e,t,r="sessionStorage"){this.storage=function(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch(e){return null}}(r),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function s(e,t=8){const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function u(e,t=8){const r=Math.max(t-e.length,0);return"".concat(e).concat(" ".repeat(r))}function c(e,t,r,n=600){const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}const l={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function f(e){return"string"==typeof e?l[e.toUpperCase()]||l.WHITE:e}function h(e,t,r){return o||"string"!=typeof e||(t&&(t=f(t),e="[".concat(t,"m").concat(e,"[39m")),r&&(t=f(r),e="[".concat(r+10,"m").concat(e,"[49m"))),e}function d(e,t=["constructor"]){const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const r of n)"function"==typeof e[r]&&(t.find(e=>r===e)||(e[r]=e[r].bind(e)))}function p(e,t){if(!e)throw new Error(t||"Assertion failed")}var y=r(7);function m(){let e;if(o&&y.f.performance)e=y.f.performance.now();else if(y.d.hrtime){const t=y.d.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const b={debug:o&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},v={enabled:!0,level:0};function g(){}const w={},O={once:!0};function _(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}class x{constructor({id:e}={id:""}){this.id=e,this.VERSION=i,this._startTs=m(),this._deltaTs=m(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new a("__probe-".concat(this.id,"__"),v),this.userData={},this.timeStamp("".concat(this.id," started")),d(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((m()-this._startTs).toPrecision(10))}getDelta(){return Number((m()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}assert(e,t){p(e,t)}warn(e){return this._getLogFunction(0,e,b.warn,arguments,O)}error(e){return this._getLogFunction(0,e,b.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,b.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,b.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,b.debug||b.info,arguments,O)}table(e,t,r){return t?this._getLogFunction(e,t,console.table||g,r&&[r],{tag:_(t)}):g}image({logLevel:e,priority:t,image:n,message:i="",scale:a=1}){return this._shouldLog(e||t)?o?function({image:e,message:t="",scale:r=1}){if("string"==typeof e){const n=new Image;return n.onload=()=>{const e=c(n,t,r);console.log(...e)},n.src=e,g}const n=e.nodeName||"";if("img"===n.toLowerCase())return console.log(...c(e,t,r)),g;if("canvas"===n.toLowerCase()){const n=new Image;return n.onload=()=>console.log(...c(n,t,r)),n.src=e.toDataURL(),g}return g}({image:n,message:i,scale:a}):function({image:e,message:t="",scale:n=1}){let i=null;try{i=r(109)}catch(e){}if(i)return()=>i(e,{fit:"box",width:"".concat(Math.round(80*n),"%")}).then(e=>console.log(e));return g}({image:n,message:i,scale:a}):g}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(e){return this._storage.config[e]}set(e,t){this._storage.updateConfiguration({[e]:t})}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||g)}group(e,t,r={collapsed:!1}){r=T({logLevel:e,message:t,opts:r});const{collapsed:n}=r;return r.method=(n?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t,r={}){return this.group(e,t,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||g)}withGroup(e,t,r){this.group(e,t)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=k(e)}_getLogFunction(e,t,r,n=[],i){if(this._shouldLog(e)){i=T({logLevel:e,message:t,args:n,opts:i}),p(r=r||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=m();const o=i.tag||i.message;if(i.once){if(w[o])return g;w[o]=m()}return t=function(e,t,r){if("string"==typeof t){const n=r.time?s(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(r.total)):"";t=h(t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),r.color,r.background)}return t}(this.id,i.message,i),r.bind(console,t,...i.args)}return g}}function k(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return p(Number.isFinite(t)&&t>=0),t}function T(e){const{logLevel:t,message:r}=e;e.logLevel=k(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(e.args=n,typeof t){case"string":case"function":void 0!==r&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const i=typeof e.message;return p("string"===i||"object"===i),Object.assign(e,e.opts)}x.VERSION=i;var S=r(22);function P(){return void 0!==y.f.orientation}function j(e){if(!e&&!Object(n.a)())return"Node";if(Object(S.a)(e))return"Electron";const t="undefined"!=typeof navigator?navigator:{},r=e||t.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const i=-1!==r.indexOf("MSIE "),o=-1!==r.indexOf("Trident/");return i||o?"IE":y.f.chrome?"Chrome":y.f.safari?"Safari":y.f.mozInnerScreenX?"Firefox":"Unknown"}var E=r(29);t.default=new x({id:"probe.gl"})}]);
//# sourceMappingURL=dist.es5.min.js.map