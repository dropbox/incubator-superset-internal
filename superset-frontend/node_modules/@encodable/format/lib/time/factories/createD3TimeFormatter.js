"use strict";

exports.__esModule = true;
exports.default = createD3TimeFormatter;

var _d3TimeFormat = require("d3-time-format");

var _TimeFormats = require("../TimeFormats");

var _createTimeFormatter = _interopRequireDefault(require("../createTimeFormatter"));

var _prefix = require("../../utils/prefix");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createD3TimeFormatter({
  format,
  locale,
  useLocalTime = false,
  id,
  label,
  description
}) {
  let formatFunc;

  if (typeof locale === 'undefined') {
    const factory = useLocalTime ? _d3TimeFormat.timeFormat : _d3TimeFormat.utcFormat;
    formatFunc = factory(format);
  } else {
    const localeObject = (0, _d3TimeFormat.timeFormatLocale)(locale);
    formatFunc = useLocalTime ? localeObject.format(format) : localeObject.utcFormat(format);
  }

  return (0, _createTimeFormatter.default)(formatFunc, {
    id: id != null ? id : useLocalTime ? (0, _prefix.addPrefix)(_TimeFormats.LOCAL_TIME_PREFIX, format) : format,
    label,
    description,
    useLocalTime
  });
}