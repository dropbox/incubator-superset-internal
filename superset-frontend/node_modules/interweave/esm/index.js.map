{"version":3,"file":"index.js","sources":["../src/StyleFilter.ts","../src/Parser.ts","../src/Markup.tsx","../src/Interweave.tsx"],"sourcesContent":null,"names":["INVALID_STYLES","StyleFilter","Filter","attribute","name","value","Object","keys","forEach","key","String","match","ELEMENT_NODE","TEXT_NODE","INVALID_ROOTS","ALLOWED_ATTRS","OPEN_TOKEN","createDocument","window","document","undefined","implementation","createHTMLDocument","Parser","allowed","banned","blocked","container","content","props","matchers","filters","keyIndex","constructor","markup","__DEV__","TypeError","createContainer","Set","allowList","ALLOWED_TAG_LIST","BANNED_TAG_LIST","blockList","applyAttributeFilters","reduce","nextValue","filter","applyNodeFilters","node","nextNode","applyMatchers","string","parentConfig","elements","matchedString","elementIndex","parts","matcher","tagName","asTag","toLowerCase","config","getTagConfig","inverseName","isTagAllowed","canRenderChild","tokenizedString","index","length","valid","void","isVoid","partProps","tokenName","propName","slice","children","greedy","replaceTokens","childConfig","includes","invalid","parent","self","Boolean","type","convertLineBreaks","noHtml","disableLineBreaks","nextMarkup","replace","factory","global","INTERWEAVE_SSR_POLYFILL","doc","tag","containerTagName","el","body","createElement","Error","innerHTML","escapeHtml","extractAttributes","allowAttributes","attributes","count","nodeType","attr","newName","ATTRIBUTES","isSafe","FILTER_DENY","startsWith","newValue","extractStyleAttribute","FILTER_CAST_BOOL","FILTER_CAST_NUMBER","Number","parseFloat","FILTER_NO_CAST","ATTRIBUTES_TO_PROPS","styles","Array","from","style","letter","toUpperCase","common","TAGS","HTMLAnchorElement","href","getAttribute","protocol","has","allowElements","parse","parseNode","nodeName","parentNode","noHtmlExceptMatchers","transform","transformOnlyAllowList","mergedText","childNodes","push","transformed","React","cloneElement","elementProps","selfClose","Element","text","textContent","isArray","nodes","open","startIndex","endIndex","close","RegExp","Markup","className","emptyContent","parsedContent","noWrap","baseNoWrap","mainContent","Interweave","disableFilters","disableMatchers","onAfterParse","onBeforeParse","parserProps","allMatchers","allFilters","beforeCallbacks","afterCallbacks","bind","callback","nextString","parser","parserNodes","nextNodes"],"mappings":"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"}