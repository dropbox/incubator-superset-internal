"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[5181],{45181:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(55786),l=a(10581),r=a(62720),o=a(61988),u=a(16355),s=a(67294),i=a(4715),c=a(23279),p=a.n(c),f=a(27600),h=a(90057),d=a(24554),v=a(74448),S=a(56080),g=a(11965);function m(e,t){switch(t.type){case"ownState":return e.ownState={...e.ownState,...t.ownState},e;case"filterState":return e.extraFormData=t.extraFormData,e.__cache=t.__cache,e.filterState={...e.filterState,...t.filterState},e;default:return e}}function b(e){const{coltypeMap:t,data:a,filterState:c,formData:b,height:w,isRefreshing:y,width:C,setDataMask:M,setFocusedFilter:F,unsetFocusedFilter:O,setFilterActive:E,appSection:N,showOverflow:Z,parentRef:k,inputRef:T}=e,{enableEmptyFilter:x,multiSelect:_,showSearch:A,inverseSelection:D,defaultToFirstItem:L,searchAllOptions:R}=b,I=(0,s.useMemo)((()=>(0,n.Z)(b.groupby).map(l.Z)),[b.groupby]),[j]=I,[$]=(0,s.useState)(t),[J,P]=(0,h.C)(m,{extraFormData:{},filterState:c}),G=t[j],K=(0,s.useMemo)((()=>(0,S.EG)({timeFormatter:r.Z})),[]),V=(0,s.useCallback)((e=>{const t=x&&!D&&!(null!=e&&e.length),a=D&&null!=e&&e.length?(0,o.t)(" (excluded)"):"";P({type:"filterState",__cache:c,extraFormData:(0,S.vb)(j,e,t,D),filterState:{...c,label:null!=e&&e.length?`${(e||[]).map((e=>K(e,G))).join(", ")}${a}`:void 0,value:N===u.Tr.FILTER_CONFIG_MODAL&&L?void 0:e}})}),[N,j,G,L,P,x,D,JSON.stringify(c),K]);(0,s.useEffect)((()=>{V(c.value)}),[JSON.stringify(c.value)]);const B=N===u.Tr.FILTER_CONFIG_MODAL&&L,W=(0,s.useCallback)(p()((e=>{P({type:"ownState",ownState:{coltypeMap:$,search:e}})}),f.M$),[]),q=(0,s.useCallback)((e=>{R&&W(e)}),[W,R]),H=(0,s.useCallback)((()=>{R&&P({type:"ownState",ownState:{coltypeMap:$,search:null}})}),[P,$,R]),Q=(0,s.useCallback)((()=>{H(),O()}),[H,O]),U=(0,s.useCallback)((e=>{const t=null===e?[null]:(0,n.Z)(e);0===t.length?V(null):V(t)}),[V]);(0,s.useEffect)((()=>{if(L&&void 0===c.value){const e=a[0]?I.map((e=>a[0][e])):null;e&&void 0!==e[0]&&V(e)}else V(B?null:c.value)}),[j,B,L,x,D,V,a,I,JSON.stringify(c)]),(0,s.useEffect)((()=>{M(J)}),[JSON.stringify(J)]);const z=0===a.length?(0,o.t)("No data"):(0,o.tn)("%s option","%s options",a.length,a.length),X=(0,s.useMemo)((()=>{if(c.validateMessage)return(0,g.tZ)(v.Am,{status:c.validateStatus},c.validateMessage)}),[c.validateMessage,c.validateStatus]),Y=(0,s.useMemo)((()=>{const e=[];return a.forEach((t=>{const[a]=I.map((e=>t[e]));e.push({label:K(a,G),value:a})})),e}),[a,G,I,K]),ee=(0,s.useCallback)(((e,t)=>{const a=(0,d.mj)("label");return b.sortAscending?a(e,t):a(t,e)}),[b.sortAscending]);return(0,g.tZ)(v.un,{height:w,width:C},(0,g.tZ)(v.jp,{validateStatus:c.validateStatus,extra:X},(0,g.tZ)(i.Ph,{allowClear:!0,allowNewOptions:!0,value:c.value||[],disabled:B,getPopupContainer:Z?()=>null==k?void 0:k.current:e=>null==e?void 0:e.parentNode,showSearch:A,mode:_?"multiple":"single",placeholder:z,onSearch:q,onSelect:H,onBlur:Q,onMouseEnter:F,onMouseLeave:O,onChange:U,ref:T,loading:y,maxTagCount:5,invertSelection:D,options:Y,sortComparator:ee,onDropdownVisibleChange:E})))}},74448:(e,t,a)=>{a.d(t,{un:()=>r,jp:()=>o,Am:()=>u});var n=a(51995),l=a(4591);const r=n.iK.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e}px;
`,o=(0,n.iK)(l.Z)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,u=n.iK.div`
  color: ${({theme:e,status:t="error"})=>{var a;return null==(a=e.colors[t])?void 0:a.base}};
`},56080:(e,t,a)=>{a.d(t,{vb:()=>r,WO:()=>o,EG:()=>u});var n=a(88889),l=a(54076);const r=(e,t,a=!1,n=!1)=>{const l={};return a?l.adhoc_filters=[{expressionType:"SQL",clause:"WHERE",sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(l.filters=[{col:e,op:n?"NOT IN":"IN",val:t}]),l},o=(e,t,a)=>{const n=[];return null!=t&&t!==a&&n.push({col:e,op:">=",val:t}),null!=a&&a!==t&&n.push({col:e,op:"<=",val:a}),null!=a&&null!=t&&a===t&&n.push({col:e,op:"==",val:a}),n.length?{filters:n}:{}};function u({timeFormatter:e,numberFormatter:t}={}){return(a,r)=>{if(null==a)return l.li;if("boolean"==typeof a)return a?l.Tb:l.jy;if(r===n.Z.BOOLEAN)try{return JSON.parse(String(a).toLowerCase())?l.Tb:l.jy}catch{return l.jy}return"string"==typeof a?a:e&&r===n.Z.TEMPORAL?e(a):t&&"number"==typeof a&&r===n.Z.NUMERIC?t(a):String(a)}}},90057:(e,t,a)=>{a.d(t,{x:()=>r,C:()=>o});var n=a(18172),l=a(67294);function r(e){var t=(0,l.useState)((function(){return(0,n.vV)("function"==typeof e?e():e,!0)})),a=t[1];return[t[0],(0,l.useCallback)((function(e){a("function"==typeof e?(0,n.ZP)(e):(0,n.vV)(e))}),[])]}function o(e,t,a){var r=(0,l.useMemo)((function(){return(0,n.ZP)(e)}),[e]);return(0,l.useReducer)(r,t,a)}}}]);
//# sourceMappingURL=26c317d9c3baa9529fe0.chunk.js.map