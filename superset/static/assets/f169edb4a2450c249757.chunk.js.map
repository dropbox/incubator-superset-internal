{"version":3,"file":"f169edb4a2450c249757.chunk.js","mappings":"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","sources":["webpack://superset/./src/components/Datasource/utils.js","webpack://superset/./src/components/Datasource/Field.tsx","webpack://superset/./src/components/Datasource/Fieldset.tsx","webpack://superset/./src/components/Datasource/CollectionTable.tsx","webpack://superset/./src/components/Datasource/DatasourceEditor.jsx","webpack://superset/./src/components/EditableTitle/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\n\nexport function recurseReactClone(children, type, propExtender) {\n  /**\n   * Clones a React component's children, and injects new props\n   * where the type specified is matched.\n   */\n  return React.Children.map(children, child => {\n    let newChild = child;\n    if (child && child.type.name === type.name) {\n      newChild = React.cloneElement(child, propExtender(child));\n    }\n    if (newChild && newChild.props.children) {\n      newChild = React.cloneElement(newChild, {\n        children: recurseReactClone(\n          newChild.props.children,\n          type,\n          propExtender,\n        ),\n      });\n    }\n    return newChild;\n  });\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback } from 'react';\nimport { css, SupersetTheme } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { FormItem, FormLabel } from 'src/components/Form';\n\nconst formItemInlineCss = css`\n  .ant-form-item-control-input-content {\n    display: flex;\n    flex-direction: row;\n  }\n`;\n\ninterface FieldProps<V> {\n  fieldKey: string;\n  value?: V;\n  label: string;\n  description?: React.ReactNode;\n  control: React.ReactElement;\n  onChange: (fieldKey: string, newValue: V) => void;\n  compact: boolean;\n  inline: boolean;\n}\n\nexport default function Field<V>({\n  fieldKey,\n  value,\n  label,\n  description = null,\n  control,\n  onChange = () => {},\n  compact = false,\n  inline,\n}: FieldProps<V>) {\n  const onControlChange = useCallback(\n    newValue => {\n      onChange(fieldKey, newValue);\n    },\n    [onChange, fieldKey],\n  );\n\n  const hookedControl = React.cloneElement(control, {\n    value,\n    onChange: onControlChange,\n  });\n  return (\n    <FormItem\n      label={\n        <FormLabel className=\"m-r-5\">\n          {label || fieldKey}\n          {compact && description && (\n            <Tooltip id=\"field-descr\" placement=\"right\" title={description}>\n              <i className=\"fa fa-info-circle m-l-5\" />\n            </Tooltip>\n          )}\n        </FormLabel>\n      }\n      css={inline && formItemInlineCss}\n    >\n      {hookedControl}\n      {!compact && description && (\n        <div\n          css={(theme: SupersetTheme) => ({\n            color: theme.colors.grayscale.base,\n            [inline ? 'marginLeft' : 'marginTop']: theme.gridUnit,\n          })}\n        >\n          {description}\n        </div>\n      )}\n    </FormItem>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { Form } from 'src/components/Form';\n\nimport { recurseReactClone } from './utils';\nimport Field from './Field';\n\ninterface FieldsetProps {\n  children: React.ReactNode;\n  onChange: Function;\n  item: Record<string, any>;\n  title: React.ReactNode;\n  compact: boolean;\n}\n\ntype fieldKeyType = string | number;\n\nexport default class Fieldset extends React.PureComponent<FieldsetProps> {\n  static defaultProps = {\n    compact: false,\n    title: null,\n  };\n\n  constructor(props: FieldsetProps) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(fieldKey: fieldKeyType, val: any) {\n    return this.props.onChange({\n      ...this.props.item,\n      [fieldKey]: val,\n    });\n  }\n\n  render() {\n    const { title } = this.props;\n    const propExtender = (field: { props: { fieldKey: fieldKeyType } }) => ({\n      onChange: this.onChange,\n      value: this.props.item[field.props.fieldKey],\n      compact: this.props.compact,\n    });\n    return (\n      <Form className=\"CRUD\" layout=\"vertical\">\n        {title && <legend>{title}</legend>}\n        {recurseReactClone(this.props.children, Field, propExtender)}\n      </Form>\n    );\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode } from 'react';\nimport shortid from 'shortid';\nimport { t, styled } from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport Fieldset from './Fieldset';\nimport { recurseReactClone } from './utils';\n\ninterface CRUDCollectionProps {\n  allowAddItem?: boolean;\n  allowDeletes?: boolean;\n  collection: Array<object>;\n  columnLabels?: object;\n  emptyMessage?: ReactNode;\n  expandFieldset?: ReactNode;\n  extraButtons?: ReactNode;\n  itemGenerator?: () => any;\n  itemRenderers?: ((\n    val: unknown,\n    onChange: () => void,\n    label: string,\n    record: any,\n  ) => ReactNode)[];\n  onChange?: (arg0: any) => void;\n  tableColumns: Array<any>;\n  sortColumns: Array<string>;\n  stickyHeader?: boolean;\n}\n\ntype Sort = number | string | boolean | any;\n\nenum SortOrder {\n  asc = 1,\n  desc = 2,\n  unsort = 0,\n}\n\ninterface CRUDCollectionState {\n  collection: object;\n  collectionArray: Array<object>;\n  expandedColumns: object;\n  sortColumn: string;\n  sort: SortOrder;\n}\n\nfunction createCollectionArray(collection: object) {\n  return Object.keys(collection).map(k => collection[k]);\n}\n\nfunction createKeyedCollection(arr: Array<object>) {\n  const collectionArray = arr.map((o: any) => ({\n    ...o,\n    id: o.id || shortid.generate(),\n  }));\n\n  const collection = {};\n  collectionArray.forEach((o: any) => {\n    collection[o.id] = o;\n  });\n\n  return {\n    collection,\n    collectionArray,\n  };\n}\n\nconst CrudTableWrapper = styled.div<{ stickyHeader?: boolean }>`\n  ${({ stickyHeader }) =>\n    stickyHeader &&\n    `\n      height: 350px;\n      overflow-y: auto;\n      overflow-x: auto;\n\n      .table {\n        min-width: 800px;\n      }\n      thead th {\n        background: #fff;\n        position: sticky;\n        top: 0;\n        z-index: 9;\n        min\n      }\n    `}\n  ${({ theme }) => `\n    th span {\n      vertical-align: ${theme.gridUnit * -2}px;\n    }\n    .text-right {\n      text-align: right;\n    }\n    .empty-collection {\n      padding: ${theme.gridUnit * 2 + 2}px;\n    }\n    .tiny-cell {\n      width: ${theme.gridUnit + 1}px;\n    }\n    i.fa-caret-down,\n    i.fa-caret-up {\n      width: ${theme.gridUnit + 1}px;\n    }\n    td.expanded {\n      border-top: 0;\n      padding: 0;\n    }\n  `}\n`;\n\nconst CrudButtonWrapper = styled.div`\n  text-align: right;\n  ${({ theme }) => `margin-bottom: ${theme.gridUnit * 2}px`}\n`;\n\nconst StyledButtonWrapper = styled.span`\n  ${({ theme }) => `\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-left: ${theme.gridUnit * 3}px;\n  `}\n`;\n\nexport default class CRUDCollection extends React.PureComponent<\n  CRUDCollectionProps,\n  CRUDCollectionState\n> {\n  constructor(props: CRUDCollectionProps) {\n    super(props);\n\n    const { collection, collectionArray } = createKeyedCollection(\n      props.collection,\n    );\n    this.state = {\n      expandedColumns: {},\n      collection,\n      collectionArray,\n      sortColumn: '',\n      sort: 0,\n    };\n    this.renderItem = this.renderItem.bind(this);\n    this.onAddItem = this.onAddItem.bind(this);\n    this.renderExpandableSection = this.renderExpandableSection.bind(this);\n    this.getLabel = this.getLabel.bind(this);\n    this.onFieldsetChange = this.onFieldsetChange.bind(this);\n    this.renderTableBody = this.renderTableBody.bind(this);\n    this.changeCollection = this.changeCollection.bind(this);\n    this.sortColumn = this.sortColumn.bind(this);\n    this.renderSortIcon = this.renderSortIcon.bind(this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: CRUDCollectionProps) {\n    if (nextProps.collection !== this.props.collection) {\n      const { collection, collectionArray } = createKeyedCollection(\n        nextProps.collection,\n      );\n      this.setState({\n        collection,\n        collectionArray,\n      });\n    }\n  }\n\n  onCellChange(id: number, col: string, val: boolean) {\n    this.changeCollection({\n      ...this.state.collection,\n      [id]: {\n        ...this.state.collection[id],\n        [col]: val,\n      },\n    });\n  }\n\n  onAddItem() {\n    if (this.props.itemGenerator) {\n      let newItem = this.props.itemGenerator();\n      if (!newItem.id) {\n        newItem = { ...newItem, id: shortid.generate() };\n      }\n      this.changeCollection(this.state.collection, newItem);\n    }\n  }\n\n  onFieldsetChange(item: any) {\n    this.changeCollection({\n      ...this.state.collection,\n      [item.id]: item,\n    });\n  }\n\n  getLabel(col: any) {\n    const { columnLabels } = this.props;\n    let label = columnLabels && columnLabels[col] ? columnLabels[col] : col;\n    if (label.startsWith('__')) {\n      // special label-free columns (ie: caret for expand, delete cross)\n      label = '';\n    }\n    return label;\n  }\n\n  changeCollection(collection: any, newItem?: object) {\n    this.setState({ collection });\n    if (this.props.onChange) {\n      const collectionArray = this.state.collectionArray\n        .map((c: { id: number }) => collection[c.id])\n        // filter out removed items\n        .filter(c => c !== undefined);\n\n      if (newItem) {\n        collectionArray.unshift(newItem);\n      }\n      this.props.onChange(collectionArray);\n    }\n  }\n\n  deleteItem(id: number) {\n    const newColl = { ...this.state.collection };\n    delete newColl[id];\n    this.changeCollection(newColl);\n  }\n\n  effectiveTableColumns() {\n    const { tableColumns, allowDeletes, expandFieldset } = this.props;\n    const cols = allowDeletes\n      ? tableColumns.concat(['__actions'])\n      : tableColumns;\n    return expandFieldset ? ['__expand'].concat(cols) : cols;\n  }\n\n  toggleExpand(id: any) {\n    this.onCellChange(id, '__expanded', false);\n    this.setState(prevState => ({\n      expandedColumns: {\n        ...prevState.expandedColumns,\n        [id]: !prevState.expandedColumns[id],\n      },\n    }));\n  }\n\n  sortColumn(col: string, sort = SortOrder.unsort) {\n    const { sortColumns } = this.props;\n    // default sort logic sorting string, boolean and number\n    const compareSort = (m: Sort, n: Sort) => {\n      if (typeof m === 'string') {\n        return (m || ' ').localeCompare(n);\n      }\n      return m - n;\n    };\n    return () => {\n      if (sortColumns?.includes(col)) {\n        // display in unsorted order if no sort specified\n        if (sort === SortOrder.unsort) {\n          const { collection } = createKeyedCollection(this.props.collection);\n          const collectionArray = createCollectionArray(collection);\n          this.setState({\n            collectionArray,\n            sortColumn: '',\n            sort,\n          });\n          return;\n        }\n\n        // newly ordered collection\n        const sorted = [...this.state.collectionArray].sort(\n          (a: object, b: object) => compareSort(a[col], b[col]),\n        );\n        const newCollection =\n          sort === SortOrder.asc ? sorted : sorted.reverse();\n\n        this.setState(prevState => ({\n          ...prevState,\n          collectionArray: newCollection,\n          sortColumn: col,\n          sort,\n        }));\n      }\n    };\n  }\n\n  renderSortIcon(col: string) {\n    if (this.state.sortColumn === col && this.state.sort === SortOrder.asc) {\n      return <Icons.SortAsc onClick={this.sortColumn(col, 2)} />;\n    }\n    if (this.state.sortColumn === col && this.state.sort === SortOrder.desc) {\n      return <Icons.SortDesc onClick={this.sortColumn(col, 0)} />;\n    }\n    return <Icons.Sort onClick={this.sortColumn(col, 1)} />;\n  }\n\n  renderHeaderRow() {\n    const cols = this.effectiveTableColumns();\n    const { allowDeletes, expandFieldset, extraButtons, sortColumns } =\n      this.props;\n    return (\n      <thead>\n        <tr>\n          {expandFieldset && <th aria-label=\"Expand\" className=\"tiny-cell\" />}\n          {cols.map(col => (\n            <th key={col}>\n              {this.getLabel(col)}\n              {sortColumns?.includes(col) && this.renderSortIcon(col)}\n            </th>\n          ))}\n          {extraButtons}\n          {allowDeletes && (\n            <th key=\"delete-item\" aria-label=\"Delete\" className=\"tiny-cell\" />\n          )}\n        </tr>\n      </thead>\n    );\n  }\n\n  renderExpandableSection(item: any) {\n    const propsGenerator = () => ({ item, onChange: this.onFieldsetChange });\n    return recurseReactClone(\n      this.props.expandFieldset,\n      Fieldset,\n      propsGenerator,\n    );\n  }\n\n  renderCell(record: any, col: any) {\n    const renderer = this.props.itemRenderers && this.props.itemRenderers[col];\n    const val = record[col];\n    const onChange = this.onCellChange.bind(this, record.id, col);\n    return renderer ? renderer(val, onChange, this.getLabel(col), record) : val;\n  }\n\n  renderItem(record: any) {\n    const { allowAddItem, allowDeletes, expandFieldset, tableColumns } =\n      this.props;\n    /* eslint-disable no-underscore-dangle */\n    const isExpanded =\n      !!this.state.expandedColumns[record.id] || record.__expanded;\n    let tds = [];\n    if (expandFieldset) {\n      tds.push(\n        <td key=\"__expand\" className=\"expand\">\n          <i\n            role=\"button\"\n            aria-label=\"Toggle expand\"\n            tabIndex={0}\n            className={`fa fa-caret-${\n              isExpanded ? 'down' : 'right'\n            } text-primary pointer`}\n            onClick={this.toggleExpand.bind(this, record.id)}\n          />\n        </td>,\n      );\n    }\n    tds = tds.concat(\n      tableColumns.map(col => (\n        <td key={col}>{this.renderCell(record, col)}</td>\n      )),\n    );\n    if (allowAddItem) {\n      tds.push(<td key=\"add\" />);\n    }\n    if (allowDeletes) {\n      tds.push(\n        <td\n          key=\"__actions\"\n          data-test=\"crud-delete-option\"\n          className=\"text-primary\"\n        >\n          <Icons.Trash\n            aria-label=\"Delete item\"\n            className=\"pointer\"\n            data-test=\"crud-delete-icon\"\n            role=\"button\"\n            tabIndex={0}\n            onClick={this.deleteItem.bind(this, record.id)}\n          />\n        </td>,\n      );\n    }\n    const trs = [\n      <tr {...{ 'data-test': 'table-row' }} className=\"row\" key={record.id}>\n        {tds}\n      </tr>,\n    ];\n    if (isExpanded) {\n      trs.push(\n        <tr className=\"exp\" key={`exp__${record.id}`}>\n          <td\n            colSpan={this.effectiveTableColumns().length}\n            className=\"expanded\"\n          >\n            <div>{this.renderExpandableSection(record)}</div>\n          </td>\n        </tr>,\n      );\n    }\n    return trs;\n  }\n\n  renderEmptyCell() {\n    return (\n      <tr>\n        <td className=\"empty-collection\">{this.props.emptyMessage}</td>\n      </tr>\n    );\n  }\n\n  renderTableBody() {\n    const data = this.state.collectionArray;\n    const content = data.length\n      ? data.map(d => this.renderItem(d))\n      : this.renderEmptyCell();\n    return <tbody data-test=\"table-content-rows\">{content}</tbody>;\n  }\n\n  render() {\n    return (\n      <>\n        <CrudButtonWrapper>\n          {this.props.allowAddItem && (\n            <StyledButtonWrapper>\n              <Button\n                buttonSize=\"small\"\n                buttonStyle=\"tertiary\"\n                onClick={this.onAddItem}\n                data-test=\"add-item-button\"\n              >\n                <i data-test=\"crud-add-table-item\" className=\"fa fa-plus\" />{' '}\n                {t('Add item')}\n              </Button>\n            </StyledButtonWrapper>\n          )}\n        </CrudButtonWrapper>\n        <CrudTableWrapper\n          className=\"CRUD\"\n          stickyHeader={this.props.stickyHeader}\n        >\n          <table data-test=\"crud-table\" className=\"table\">\n            {this.renderHeaderRow()}\n            {this.renderTableBody()}\n          </table>\n        </CrudTableWrapper>\n      </>\n    );\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport rison from 'rison';\nimport React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Radio } from 'src/components/Radio';\nimport Card from 'src/components/Card';\nimport Alert from 'src/components/Alert';\nimport Badge from 'src/components/Badge';\nimport shortid from 'shortid';\nimport { styled, SupersetClient, t, withTheme } from '@superset-ui/core';\nimport { Select, Row, Col } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport Button from 'src/components/Button';\nimport Tabs from 'src/components/Tabs';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport DatabaseSelector from 'src/components/DatabaseSelector';\nimport Label from 'src/components/Label';\nimport Loading from 'src/components/Loading';\nimport TableSelector from 'src/components/TableSelector';\nimport EditableTitle from 'src/components/EditableTitle';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport CheckboxControl from 'src/explore/components/controls/CheckboxControl';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport TextAreaControl from 'src/explore/components/controls/TextAreaControl';\nimport SpatialControl from 'src/explore/components/controls/SpatialControl';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport Icons from 'src/components/Icons';\nimport CollectionTable from './CollectionTable';\nimport Fieldset from './Fieldset';\nimport Field from './Field';\n\nconst DatasourceContainer = styled.div`\n  .change-warning {\n    margin: 16px 10px 0;\n    color: ${({ theme }) => theme.colors.warning.base};\n  }\n\n  .change-warning .bold {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n\n  .form-group.has-feedback > .help-block {\n    margin-top: 8px;\n  }\n\n  .form-group.form-group-md {\n    margin-bottom: 8px;\n  }\n`;\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledTableTabs = styled(Tabs)`\n  overflow: visible;\n  .ant-tabs-content-holder {\n    overflow: visible;\n  }\n`;\n\nconst StyledBadge = styled(Badge)`\n  .ant-badge-count {\n    line-height: ${({ theme }) => theme.gridUnit * 4}px;\n    height: ${({ theme }) => theme.gridUnit * 4}px;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst EditLockContainer = styled.div`\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  display: flex;\n  align-items: center;\n  a {\n    padding: 0 10px;\n  }\n`;\n\nconst ColumnButtonWrapper = styled.div`\n  text-align: right;\n  ${({ theme }) => `margin-bottom: ${theme.gridUnit * 2}px`}\n`;\n\nconst StyledLabelWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  span {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledColumnsTabWrapper = styled.div`\n  .table > tbody > tr > td {\n    vertical-align: middle;\n  }\n\n  .ant-tag {\n    margin-top: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst StyledButtonWrapper = styled.span`\n  ${({ theme }) => `\n    margin-top: ${theme.gridUnit * 3}px;\n    margin-left: ${theme.gridUnit * 3}px;\n  `}\n`;\n\nconst checkboxGenerator = (d, onChange) => (\n  <CheckboxControl value={d} onChange={onChange} />\n);\nconst DATA_TYPES = [\n  { value: 'STRING', label: 'STRING' },\n  { value: 'NUMERIC', label: 'NUMERIC' },\n  { value: 'DATETIME', label: 'DATETIME' },\n  { value: 'BOOLEAN', label: 'BOOLEAN' },\n];\n\nconst DATASOURCE_TYPES_ARR = [\n  { key: 'physical', label: t('Physical (table or view)') },\n  { key: 'virtual', label: t('Virtual (SQL)') },\n];\nconst DATASOURCE_TYPES = {};\nDATASOURCE_TYPES_ARR.forEach(o => {\n  DATASOURCE_TYPES[o.key] = o;\n});\n\nfunction CollectionTabTitle({ title, collection }) {\n  return (\n    <div\n      css={{ display: 'flex', alignItems: 'center' }}\n      data-test={`collection-tab-${title}`}\n    >\n      {title}{' '}\n      <StyledBadge count={collection ? collection.length : 0} showZero />\n    </div>\n  );\n}\n\nCollectionTabTitle.propTypes = {\n  title: PropTypes.string,\n  collection: PropTypes.array,\n};\n\nfunction ColumnCollectionTable({\n  columns,\n  datasource,\n  onColumnsChange,\n  onDatasourceChange,\n  editableColumnName,\n  showExpression,\n  allowAddItem,\n  allowEditDataType,\n  itemGenerator,\n}) {\n  return (\n    <CollectionTable\n      collection={columns}\n      tableColumns={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? [\n              'column_name',\n              'advanced_data_type',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n          : [\n              'column_name',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n      }\n      sortColumns={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? [\n              'column_name',\n              'advanced_data_type',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n          : [\n              'column_name',\n              'type',\n              'is_dttm',\n              'main_dttm_col',\n              'filterable',\n              'groupby',\n            ]\n      }\n      allowDeletes\n      allowAddItem={allowAddItem}\n      itemGenerator={itemGenerator}\n      stickyHeader\n      expandFieldset={\n        <FormContainer>\n          <Fieldset compact>\n            {showExpression && (\n              <Field\n                fieldKey=\"expression\"\n                label={t('SQL expression')}\n                control={\n                  <TextAreaControl\n                    language=\"markdown\"\n                    offerEditInModal={false}\n                  />\n                }\n              />\n            )}\n            <Field\n              fieldKey=\"verbose_name\"\n              label={t('Label')}\n              control={\n                <TextControl\n                  controlId=\"verbose_name\"\n                  placeholder={t('Label')}\n                />\n              }\n            />\n            <Field\n              fieldKey=\"description\"\n              label={t('Description')}\n              control={\n                <TextControl\n                  controlId=\"description\"\n                  placeholder={t('Description')}\n                />\n              }\n            />\n            {allowEditDataType && (\n              <Field\n                fieldKey=\"type\"\n                label={t('Data type')}\n                control={\n                  <Select\n                    ariaLabel={t('Data type')}\n                    options={DATA_TYPES}\n                    name=\"type\"\n                    allowNewOptions\n                    allowClear\n                  />\n                }\n              />\n            )}\n            {isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES) ? (\n              <Field\n                fieldKey=\"advanced_data_type\"\n                label={t('Advanced data type')}\n                control={\n                  <TextControl\n                    controlId=\"advanced_data_type\"\n                    placeholder={t('Advanced Data type')}\n                  />\n                }\n              />\n            ) : (\n              <></>\n            )}\n            <Field\n              fieldKey=\"python_date_format\"\n              label={t('Datetime format')}\n              description={\n                /* Note the fragmented translations may not work. */\n                <div>\n                  {t('The pattern of timestamp format. For strings use ')}\n                  <a href=\"https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior\">\n                    {t('Python datetime string pattern')}\n                  </a>\n                  {t(' expression which needs to adhere to the ')}\n                  <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">\n                    {t('ISO 8601')}\n                  </a>\n                  {t(` standard to ensure that the lexicographical ordering\n                      coincides with the chronological ordering. If the\n                      timestamp format does not adhere to the ISO 8601 standard\n                      you will need to define an expression and type for\n                      transforming the string into a date or timestamp. Note\n                      currently time zones are not supported. If time is stored\n                      in epoch format, put \\`epoch_s\\` or \\`epoch_ms\\`. If no pattern\n                      is specified we fall back to using the optional defaults on a per\n                      database/column name level via the extra parameter.`)}\n                </div>\n              }\n              control={\n                <TextControl\n                  controlId=\"python_date_format\"\n                  placeholder=\"%Y/%m/%d\"\n                />\n              }\n            />\n            <Field\n              fieldKey=\"certified_by\"\n              label={t('Certified By')}\n              description={t('Person or group that has certified this metric')}\n              control={\n                <TextControl\n                  controlId=\"certified\"\n                  placeholder={t('Certified by')}\n                />\n              }\n            />\n            <Field\n              fieldKey=\"certification_details\"\n              label={t('Certification details')}\n              description={t('Details of the certification')}\n              control={\n                <TextControl\n                  controlId=\"certificationDetails\"\n                  placeholder={t('Certification details')}\n                />\n              }\n            />\n          </Fieldset>\n        </FormContainer>\n      }\n      columnLabels={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? {\n              column_name: t('Column'),\n              advanced_data_type: t('Advanced data type'),\n              type: t('Data type'),\n              groupby: t('Is dimension'),\n              is_dttm: t('Is temporal'),\n              main_dttm_col: t('Default datetime'),\n              filterable: t('Is filterable'),\n            }\n          : {\n              column_name: t('Column'),\n              type: t('Data type'),\n              groupby: t('Is dimension'),\n              is_dttm: t('Is temporal'),\n              main_dttm_col: t('Default datetime'),\n              filterable: t('Is filterable'),\n            }\n      }\n      onChange={onColumnsChange}\n      itemRenderers={\n        isFeatureEnabled(FeatureFlag.ENABLE_ADVANCED_DATA_TYPES)\n          ? {\n              column_name: (v, onItemChange, _, record) =>\n                editableColumnName ? (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    <EditableTitle\n                      canEdit\n                      title={v}\n                      onSaveTitle={onItemChange}\n                    />\n                  </StyledLabelWrapper>\n                ) : (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    {v}\n                  </StyledLabelWrapper>\n                ),\n              main_dttm_col: (value, _onItemChange, _label, record) => {\n                const checked = datasource.main_dttm_col === record.column_name;\n                const disabled = !columns.find(\n                  column => column.column_name === record.column_name,\n                ).is_dttm;\n                return (\n                  <Radio\n                    data-test={`radio-default-dttm-${record.column_name}`}\n                    checked={checked}\n                    disabled={disabled}\n                    onChange={() =>\n                      onDatasourceChange({\n                        ...datasource,\n                        main_dttm_col: record.column_name,\n                      })\n                    }\n                  />\n                );\n              },\n              type: d => (d ? <Label>{d}</Label> : null),\n              advanced_data_type: d => (\n                <Label onChange={onColumnsChange}>{d}</Label>\n              ),\n              is_dttm: checkboxGenerator,\n              filterable: checkboxGenerator,\n              groupby: checkboxGenerator,\n            }\n          : {\n              column_name: (v, onItemChange, _, record) =>\n                editableColumnName ? (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    <TextControl value={v} onChange={onItemChange} />\n                  </StyledLabelWrapper>\n                ) : (\n                  <StyledLabelWrapper>\n                    {record.is_certified && (\n                      <CertifiedBadge\n                        certifiedBy={record.certified_by}\n                        details={record.certification_details}\n                      />\n                    )}\n                    {v}\n                  </StyledLabelWrapper>\n                ),\n              main_dttm_col: (value, _onItemChange, _label, record) => {\n                const checked = datasource.main_dttm_col === record.column_name;\n                const disabled = !columns.find(\n                  column => column.column_name === record.column_name,\n                ).is_dttm;\n                return (\n                  <Radio\n                    data-test={`radio-default-dttm-${record.column_name}`}\n                    checked={checked}\n                    disabled={disabled}\n                    onChange={() =>\n                      onDatasourceChange({\n                        ...datasource,\n                        main_dttm_col: record.column_name,\n                      })\n                    }\n                  />\n                );\n              },\n              type: d => (d ? <Label>{d}</Label> : null),\n              is_dttm: checkboxGenerator,\n              filterable: checkboxGenerator,\n              groupby: checkboxGenerator,\n            }\n      }\n    />\n  );\n}\nColumnCollectionTable.propTypes = {\n  columns: PropTypes.array.isRequired,\n  datasource: PropTypes.object.isRequired,\n  onColumnsChange: PropTypes.func.isRequired,\n  onDatasourceChange: PropTypes.func.isRequired,\n  editableColumnName: PropTypes.bool,\n  showExpression: PropTypes.bool,\n  allowAddItem: PropTypes.bool,\n  allowEditDataType: PropTypes.bool,\n  itemGenerator: PropTypes.func,\n};\nColumnCollectionTable.defaultProps = {\n  editableColumnName: false,\n  showExpression: false,\n  allowAddItem: false,\n  allowEditDataType: false,\n  itemGenerator: () => ({\n    column_name: '<new column>',\n    filterable: true,\n    groupby: true,\n  }),\n};\n\nfunction StackedField({ label, formElement }) {\n  return (\n    <div>\n      <div>\n        <strong>{label}</strong>\n      </div>\n      <div>{formElement}</div>\n    </div>\n  );\n}\n\nStackedField.propTypes = {\n  label: PropTypes.string,\n  formElement: PropTypes.node,\n};\n\nfunction FormContainer({ children }) {\n  return <Card padded>{children}</Card>;\n}\n\nFormContainer.propTypes = {\n  children: PropTypes.node,\n};\n\nconst propTypes = {\n  datasource: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  setIsEditing: PropTypes.func,\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  setIsEditing: () => {},\n};\n\nfunction OwnersSelector({ datasource, onChange }) {\n  const loadOptions = useCallback((search = '', page, pageSize) => {\n    const query = rison.encode({ filter: search, page, page_size: pageSize });\n    return SupersetClient.get({\n      endpoint: `/api/v1/dataset/related/owners?q=${query}`,\n    }).then(response => ({\n      data: response.json.result.map(item => ({\n        value: item.value,\n        label: item.text,\n      })),\n      totalCount: response.json.count,\n    }));\n  }, []);\n\n  return (\n    <Select\n      ariaLabel={t('Select owners')}\n      mode=\"multiple\"\n      name=\"owners\"\n      value={datasource.owners}\n      options={loadOptions}\n      onChange={onChange}\n      header={<FormLabel>{t('Owners')}</FormLabel>}\n      allowClear\n    />\n  );\n}\n\nclass DatasourceEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      datasource: {\n        ...props.datasource,\n        owners: props.datasource.owners.map(owner => ({\n          value: owner.value || owner.id,\n          label: owner.label || `${owner.first_name} ${owner.last_name}`,\n        })),\n        metrics: props.datasource.metrics?.map(metric => {\n          const {\n            certified_by: certifiedByMetric,\n            certification_details: certificationDetails,\n          } = metric;\n          const {\n            certification: { details, certified_by: certifiedBy } = {},\n            warning_markdown: warningMarkdown,\n          } = JSON.parse(metric.extra || '{}') || {};\n          return {\n            ...metric,\n            certification_details: certificationDetails || details,\n            warning_markdown: warningMarkdown || '',\n            certified_by: certifiedBy || certifiedByMetric,\n          };\n        }),\n      },\n      errors: [],\n      isDruid:\n        props.datasource.type === 'druid' ||\n        props.datasource.datasource_type === 'druid',\n      isSqla:\n        props.datasource.datasource_type === 'table' ||\n        props.datasource.type === 'table',\n      isEditMode: false,\n      databaseColumns: props.datasource.columns.filter(col => !col.expression),\n      calculatedColumns: props.datasource.columns.filter(\n        col => !!col.expression,\n      ),\n      metadataLoading: false,\n      activeTabKey: 0,\n      datasourceType: props.datasource.sql\n        ? DATASOURCE_TYPES.virtual.key\n        : DATASOURCE_TYPES.physical.key,\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onChangeEditMode = this.onChangeEditMode.bind(this);\n    this.onDatasourcePropChange = this.onDatasourcePropChange.bind(this);\n    this.onDatasourceChange = this.onDatasourceChange.bind(this);\n    this.tableChangeAndSyncMetadata =\n      this.tableChangeAndSyncMetadata.bind(this);\n    this.syncMetadata = this.syncMetadata.bind(this);\n    this.setColumns = this.setColumns.bind(this);\n    this.validateAndChange = this.validateAndChange.bind(this);\n    this.handleTabSelect = this.handleTabSelect.bind(this);\n    this.allowEditSource = !isFeatureEnabled(\n      FeatureFlag.DISABLE_DATASET_SOURCE_EDIT,\n    );\n  }\n\n  onChange() {\n    // Emptying SQL if \"Physical\" radio button is selected\n    // Currently the logic to know whether the source is\n    // physical or virtual is based on whether SQL is empty or not.\n    const { datasourceType, datasource } = this.state;\n    const sql =\n      datasourceType === DATASOURCE_TYPES.physical.key ? '' : datasource.sql;\n    const newDatasource = {\n      ...this.state.datasource,\n      sql,\n      columns: [...this.state.databaseColumns, ...this.state.calculatedColumns],\n    };\n    this.props.onChange(newDatasource, this.state.errors);\n  }\n\n  onChangeEditMode() {\n    this.props.setIsEditing(!this.state.isEditMode);\n    this.setState(prevState => ({ isEditMode: !prevState.isEditMode }));\n  }\n\n  onDatasourceChange(datasource, callback = this.validateAndChange) {\n    this.setState({ datasource }, callback);\n  }\n\n  onDatasourcePropChange(attr, value) {\n    if (value === undefined) return; // if value is undefined do not update state\n    const datasource = { ...this.state.datasource, [attr]: value };\n    this.setState(\n      prevState => ({\n        datasource: { ...prevState.datasource, [attr]: value },\n      }),\n      attr === 'table_name'\n        ? this.onDatasourceChange(datasource, this.tableChangeAndSyncMetadata)\n        : this.onDatasourceChange(datasource, this.validateAndChange),\n    );\n  }\n\n  onDatasourceTypeChange(datasourceType) {\n    this.setState({ datasourceType });\n  }\n\n  setColumns(obj) {\n    // update calculatedColumns or databaseColumns\n    this.setState(obj, this.validateAndChange);\n  }\n\n  validateAndChange() {\n    this.validate(this.onChange);\n  }\n\n  tableChangeAndSyncMetadata() {\n    this.validate(() => {\n      this.syncMetadata();\n      this.onChange();\n    });\n  }\n\n  updateColumns(cols) {\n    const { databaseColumns } = this.state;\n    const databaseColumnNames = cols.map(col => col.name);\n    const currentCols = databaseColumns.reduce(\n      (agg, col) => ({\n        ...agg,\n        [col.column_name]: col,\n      }),\n      {},\n    );\n    const finalColumns = [];\n    const results = {\n      added: [],\n      modified: [],\n      removed: databaseColumns\n        .map(col => col.column_name)\n        .filter(col => !databaseColumnNames.includes(col)),\n    };\n    cols.forEach(col => {\n      const currentCol = currentCols[col.name];\n      if (!currentCol) {\n        // new column\n        finalColumns.push({\n          id: shortid.generate(),\n          column_name: col.name,\n          type: col.type,\n          groupby: true,\n          filterable: true,\n          is_dttm: col.is_dttm,\n        });\n        results.added.push(col.name);\n      } else if (\n        currentCol.type !== col.type ||\n        (!currentCol.is_dttm && col.is_dttm)\n      ) {\n        // modified column\n        finalColumns.push({\n          ...currentCol,\n          type: col.type,\n          is_dttm: currentCol.is_dttm || col.is_dttm,\n        });\n        results.modified.push(col.name);\n      } else {\n        // unchanged\n        finalColumns.push(currentCol);\n      }\n    });\n    if (\n      results.added.length ||\n      results.modified.length ||\n      results.removed.length\n    ) {\n      this.setColumns({ databaseColumns: finalColumns });\n    }\n    return results;\n  }\n\n  syncMetadata() {\n    const { datasource } = this.state;\n    const params = {\n      datasource_type: datasource.type || datasource.datasource_type,\n      database_name:\n        datasource.database.database_name || datasource.database.name,\n      schema_name: datasource.schema,\n      table_name: datasource.table_name,\n    };\n    Object.entries(params).forEach(([key, value]) => {\n      // rison can't encode the undefined value\n      if (value === undefined) {\n        params[key] = null;\n      }\n    });\n    const endpoint = `/datasource/external_metadata_by_name/?q=${rison.encode(\n      params,\n    )}`;\n    this.setState({ metadataLoading: true });\n\n    SupersetClient.get({ endpoint })\n      .then(({ json }) => {\n        const results = this.updateColumns(json);\n        if (results.modified.length) {\n          this.props.addSuccessToast(\n            t('Modified columns: %s', results.modified.join(', ')),\n          );\n        }\n        if (results.removed.length) {\n          this.props.addSuccessToast(\n            t('Removed columns: %s', results.removed.join(', ')),\n          );\n        }\n        if (results.added.length) {\n          this.props.addSuccessToast(\n            t('New columns added: %s', results.added.join(', ')),\n          );\n        }\n        this.props.addSuccessToast(t('Metadata has been synced'));\n        this.setState({ metadataLoading: false });\n      })\n      .catch(response =>\n        getClientErrorObject(response).then(({ error, statusText }) => {\n          this.props.addDangerToast(\n            error || statusText || t('An error has occurred'),\n          );\n          this.setState({ metadataLoading: false });\n        }),\n      );\n  }\n\n  findDuplicates(arr, accessor) {\n    const seen = {};\n    const dups = [];\n    arr.forEach(obj => {\n      const item = accessor(obj);\n      if (item in seen) {\n        dups.push(item);\n      } else {\n        seen[item] = null;\n      }\n    });\n    return dups;\n  }\n\n  validate(callback) {\n    let errors = [];\n    let dups;\n    const { datasource } = this.state;\n\n    // Looking for duplicate column_name\n    dups = this.findDuplicates(datasource.columns, obj => obj.column_name);\n    errors = errors.concat(\n      dups.map(name => t('Column name [%s] is duplicated', name)),\n    );\n\n    // Looking for duplicate metric_name\n    dups = this.findDuplicates(datasource.metrics, obj => obj.metric_name);\n    errors = errors.concat(\n      dups.map(name => t('Metric name [%s] is duplicated', name)),\n    );\n\n    // Making sure calculatedColumns have an expression defined\n    const noFilterCalcCols = this.state.calculatedColumns.filter(\n      col => !col.expression && !col.json,\n    );\n    errors = errors.concat(\n      noFilterCalcCols.map(col =>\n        t('Calculated column [%s] requires an expression', col.column_name),\n      ),\n    );\n\n    this.setState({ errors }, callback);\n  }\n\n  handleTabSelect(activeTabKey) {\n    this.setState({ activeTabKey });\n  }\n\n  sortMetrics(metrics) {\n    return metrics.sort(({ id: a }, { id: b }) => b - a);\n  }\n\n  renderSettingsFieldset() {\n    const { datasource } = this.state;\n    return (\n      <Fieldset\n        title={t('Basic')}\n        item={datasource}\n        onChange={this.onDatasourceChange}\n      >\n        <Field\n          fieldKey=\"description\"\n          label={t('Description')}\n          control={\n            <TextAreaControl language=\"markdown\" offerEditInModal={false} />\n          }\n        />\n        <Field\n          fieldKey=\"default_endpoint\"\n          label={t('Default URL')}\n          description={t(\n            'Default URL to redirect to when accessing from the dataset list page',\n          )}\n          control={<TextControl controlId=\"default_endpoint\" />}\n        />\n        <Field\n          inline\n          fieldKey=\"filter_select_enabled\"\n          label={t('Autocomplete filters')}\n          description={t('Whether to populate autocomplete filters options')}\n          control={<CheckboxControl />}\n        />\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"fetch_values_predicate\"\n            label={t('Autocomplete query predicate')}\n            description={t(\n              'When using \"Autocomplete filters\", this can be used to improve performance ' +\n                'of the query fetching the values. Use this option to apply a ' +\n                'predicate (WHERE clause) to the query selecting the distinct ' +\n                'values from the table. Typically the intent would be to limit the scan ' +\n                'by applying a relative time filter on a partitioned or indexed time-related field.',\n            )}\n            control={\n              <TextAreaControl\n                language=\"sql\"\n                controlId=\"fetch_values_predicate\"\n                minLines={5}\n              />\n            }\n          />\n        )}\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"extra\"\n            label={t('Extra')}\n            description={t(\n              'Extra data to specify table metadata. Currently supports ' +\n                'metadata of the format: `{ \"certification\": { \"certified_by\": ' +\n                '\"Data Platform Team\", \"details\": \"This table is the source of truth.\" ' +\n                '}, \"warning_markdown\": \"This is a warning.\" }`.',\n            )}\n            control={\n              <TextAreaControl\n                controlId=\"extra\"\n                language=\"json\"\n                offerEditInModal={false}\n              />\n            }\n          />\n        )}\n        <OwnersSelector\n          datasource={datasource}\n          onChange={newOwners => {\n            this.onDatasourceChange({ ...datasource, owners: newOwners });\n          }}\n        />\n      </Fieldset>\n    );\n  }\n\n  renderAdvancedFieldset() {\n    const { datasource } = this.state;\n    return (\n      <Fieldset\n        title={t('Advanced')}\n        item={datasource}\n        onChange={this.onDatasourceChange}\n      >\n        <Field\n          fieldKey=\"cache_timeout\"\n          label={t('Cache timeout')}\n          description={t(\n            'The duration of time in seconds before the cache is invalidated',\n          )}\n          control={<TextControl controlId=\"cache_timeout\" />}\n        />\n        <Field\n          fieldKey=\"offset\"\n          label={t('Hours offset')}\n          control={<TextControl controlId=\"offset\" />}\n          description={t(\n            'The number of hours, negative or positive, to shift the time column. This can be used to move UTC time to local time.',\n          )}\n        />\n        {this.state.isSqla && (\n          <Field\n            fieldKey=\"template_params\"\n            label={t('Template parameters')}\n            description={t(\n              'A set of parameters that become available in the query using Jinja templating syntax',\n            )}\n            control={<TextControl controlId=\"template_params\" />}\n          />\n        )}\n      </Fieldset>\n    );\n  }\n\n  renderSpatialTab() {\n    const { datasource } = this.state;\n    const { spatials, all_cols: allCols } = datasource;\n    return (\n      <Tabs.TabPane\n        tab={<CollectionTabTitle collection={spatials} title={t('Spatial')} />}\n        key={4}\n      >\n        <CollectionTable\n          tableColumns={['name', 'config']}\n          onChange={this.onDatasourcePropChange.bind(this, 'spatials')}\n          itemGenerator={() => ({\n            name: '<new spatial>',\n            type: '<no type>',\n            config: null,\n          })}\n          collection={spatials}\n          allowDeletes\n          itemRenderers={{\n            name: (d, onChange) => (\n              <EditableTitle canEdit title={d} onSaveTitle={onChange} />\n            ),\n            config: (v, onChange) => (\n              <SpatialControl value={v} onChange={onChange} choices={allCols} />\n            ),\n          }}\n        />\n      </Tabs.TabPane>\n    );\n  }\n\n  renderSourceFieldset(theme) {\n    const { datasource } = this.state;\n    return (\n      <div>\n        {this.allowEditSource && (\n          <EditLockContainer>\n            <span role=\"button\" tabIndex={0} onClick={this.onChangeEditMode}>\n              {this.state.isEditMode ? (\n                <Icons.LockUnlocked iconColor={theme.colors.grayscale.base} />\n              ) : (\n                <Icons.LockLocked iconColor={theme.colors.grayscale.base} />\n              )}\n            </span>\n            {!this.state.isEditMode && (\n              <div>{t('Click the lock to make changes.')}</div>\n            )}\n            {this.state.isEditMode && (\n              <div>{t('Click the lock to prevent further changes.')}</div>\n            )}\n          </EditLockContainer>\n        )}\n        <div className=\"m-l-10 m-t-20 m-b-10\">\n          {DATASOURCE_TYPES_ARR.map(type => (\n            <Radio\n              key={type.key}\n              value={type.key}\n              inline\n              onChange={this.onDatasourceTypeChange.bind(this, type.key)}\n              checked={this.state.datasourceType === type.key}\n              disabled={!this.state.isEditMode}\n            >\n              {type.label}\n            </Radio>\n          ))}\n        </div>\n        <hr />\n        <Fieldset item={datasource} onChange={this.onDatasourceChange} compact>\n          {this.state.datasourceType === DATASOURCE_TYPES.virtual.key && (\n            <div>\n              {this.state.isSqla && (\n                <>\n                  <Col xs={24} md={12}>\n                    <Field\n                      fieldKey=\"databaseSelector\"\n                      label={t('virtual')}\n                      control={\n                        <div css={{ marginTop: 8 }}>\n                          <DatabaseSelector\n                            db={datasource?.database}\n                            schema={datasource.schema}\n                            onSchemaChange={schema =>\n                              this.state.isEditMode &&\n                              this.onDatasourcePropChange('schema', schema)\n                            }\n                            onDbChange={database =>\n                              this.state.isEditMode &&\n                              this.onDatasourcePropChange('database', database)\n                            }\n                            formMode={false}\n                            handleError={this.props.addDangerToast}\n                            readOnly={!this.state.isEditMode}\n                          />\n                        </div>\n                      }\n                    />\n                    <div css={{ width: 'calc(100% - 34px)', marginTop: -16 }}>\n                      <Field\n                        fieldKey=\"table_name\"\n                        label={t('Dataset name')}\n                        control={\n                          <TextControl\n                            controlId=\"table_name\"\n                            onChange={table => {\n                              this.onDatasourcePropChange('table_name', table);\n                            }}\n                            placeholder={t('Dataset name')}\n                            disabled={!this.state.isEditMode}\n                          />\n                        }\n                      />\n                    </div>\n                  </Col>\n                  <Field\n                    fieldKey=\"sql\"\n                    label={t('SQL')}\n                    description={t(\n                      'When specifying SQL, the datasource acts as a view. ' +\n                        'Superset will use this statement as a subquery while grouping and filtering ' +\n                        'on the generated parent queries.',\n                    )}\n                    control={\n                      <TextAreaControl\n                        language=\"sql\"\n                        offerEditInModal={false}\n                        minLines={20}\n                        maxLines={20}\n                        readOnly={!this.state.isEditMode}\n                      />\n                    }\n                  />\n                </>\n              )}\n              {this.state.isDruid && (\n                <Field\n                  fieldKey=\"json\"\n                  label={t('JSON')}\n                  description={\n                    <div>\n                      {t('The JSON metric or post aggregation definition.')}\n                    </div>\n                  }\n                  control={\n                    <TextAreaControl language=\"json\" offerEditInModal={false} />\n                  }\n                />\n              )}\n            </div>\n          )}\n          {this.state.datasourceType === DATASOURCE_TYPES.physical.key && (\n            <Col xs={24} md={12}>\n              {this.state.isSqla && (\n                <Field\n                  fieldKey=\"tableSelector\"\n                  label={t('Physical')}\n                  control={\n                    <div css={{ marginTop: 8 }}>\n                      <TableSelector\n                        clearable={false}\n                        database={{\n                          ...datasource.database,\n                          database_name:\n                            datasource.database?.database_name ||\n                            datasource.database?.name,\n                        }}\n                        dbId={datasource.database?.id}\n                        handleError={this.props.addDangerToast}\n                        schema={datasource.schema}\n                        sqlLabMode={false}\n                        tableValue={datasource.table_name}\n                        onSchemaChange={\n                          this.state.isEditMode\n                            ? schema =>\n                                this.onDatasourcePropChange('schema', schema)\n                            : undefined\n                        }\n                        onDbChange={\n                          this.state.isEditMode\n                            ? database =>\n                                this.onDatasourcePropChange(\n                                  'database',\n                                  database,\n                                )\n                            : undefined\n                        }\n                        onTableSelectChange={\n                          this.state.isEditMode\n                            ? table =>\n                                this.onDatasourcePropChange('table_name', table)\n                            : undefined\n                        }\n                        readOnly={!this.state.isEditMode}\n                      />\n                    </div>\n                  }\n                  description={t(\n                    'The pointer to a physical table (or view). Keep in mind that the chart is ' +\n                      'associated to this Superset logical table, and this logical table points ' +\n                      'the physical table referenced here.',\n                  )}\n                />\n              )}\n            </Col>\n          )}\n        </Fieldset>\n      </div>\n    );\n  }\n\n  renderErrors() {\n    if (this.state.errors.length > 0) {\n      return (\n        <Alert\n          css={theme => ({ marginBottom: theme.gridUnit * 4 })}\n          type=\"error\"\n          message={\n            <>\n              {this.state.errors.map(err => (\n                <div key={err}>{err}</div>\n              ))}\n            </>\n          }\n        />\n      );\n    }\n    return null;\n  }\n\n  renderMetricCollection() {\n    const { datasource } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics?.length ? this.sortMetrics(metrics) : [];\n    return (\n      <CollectionTable\n        tableColumns={['metric_name', 'verbose_name', 'expression']}\n        sortColumns={['metric_name', 'verbose_name', 'expression']}\n        columnLabels={{\n          metric_name: t('Metric'),\n          verbose_name: t('Label'),\n          expression: t('SQL expression'),\n        }}\n        expandFieldset={\n          <FormContainer>\n            <Fieldset compact>\n              <Field\n                fieldKey=\"description\"\n                label={t('Description')}\n                control={\n                  <TextControl\n                    controlId=\"description\"\n                    placeholder={t('Description')}\n                  />\n                }\n              />\n              <Field\n                fieldKey=\"d3format\"\n                label={t('D3 format')}\n                control={\n                  <TextControl controlId=\"d3format\" placeholder=\"%y/%m/%d\" />\n                }\n              />\n              <Field\n                label={t('Certified by')}\n                fieldKey=\"certified_by\"\n                description={t(\n                  'Person or group that has certified this metric',\n                )}\n                control={\n                  <TextControl\n                    controlId=\"certified_by\"\n                    placeholder={t('Certified by')}\n                  />\n                }\n              />\n              <Field\n                label={t('Certification details')}\n                fieldKey=\"certification_details\"\n                description={t('Details of the certification')}\n                control={\n                  <TextControl\n                    controlId=\"certification_details\"\n                    placeholder={t('Certification details')}\n                  />\n                }\n              />\n              <Field\n                label={t('Warning')}\n                fieldKey=\"warning_markdown\"\n                description={t('Optional warning about use of this metric')}\n                control={\n                  <TextAreaControl\n                    controlId=\"warning_markdown\"\n                    language=\"markdown\"\n                    offerEditInModal={false}\n                  />\n                }\n              />\n            </Fieldset>\n          </FormContainer>\n        }\n        collection={sortedMetrics}\n        allowAddItem\n        onChange={this.onDatasourcePropChange.bind(this, 'metrics')}\n        itemGenerator={() => ({\n          metric_name: '<new metric>',\n          verbose_name: '',\n          expression: '',\n        })}\n        itemRenderers={{\n          metric_name: (v, onChange, _, record) => (\n            <FlexRowContainer>\n              {record.is_certified && (\n                <CertifiedBadge\n                  certifiedBy={record.certified_by}\n                  details={record.certification_details}\n                />\n              )}\n              {record.warning_markdown && (\n                <WarningIconWithTooltip\n                  warningMarkdown={record.warning_markdown}\n                />\n              )}\n              <EditableTitle canEdit title={v} onSaveTitle={onChange} />\n            </FlexRowContainer>\n          ),\n          verbose_name: (v, onChange) => (\n            <TextControl canEdit value={v} onChange={onChange} />\n          ),\n          expression: (v, onChange) => (\n            <TextAreaControl\n              canEdit\n              initialValue={v}\n              onChange={onChange}\n              extraClasses={['datasource-sql-expression']}\n              language=\"sql\"\n              offerEditInModal={false}\n              minLines={5}\n            />\n          ),\n          description: (v, onChange, label) => (\n            <StackedField\n              label={label}\n              formElement={<TextControl value={v} onChange={onChange} />}\n            />\n          ),\n          d3format: (v, onChange, label) => (\n            <StackedField\n              label={label}\n              formElement={<TextControl value={v} onChange={onChange} />}\n            />\n          ),\n        }}\n        allowDeletes\n        stickyHeader\n      />\n    );\n  }\n\n  render() {\n    const { datasource, activeTabKey } = this.state;\n    const { metrics } = datasource;\n    const sortedMetrics = metrics?.length ? this.sortMetrics(metrics) : [];\n    const { theme } = this.props;\n\n    return (\n      <DatasourceContainer>\n        {this.renderErrors()}\n        <Alert\n          css={theme => ({ marginBottom: theme.gridUnit * 4 })}\n          type=\"warning\"\n          message={\n            <>\n              {' '}\n              <strong>{t('Be careful.')} </strong>\n              {t(\n                'Changing these settings will affect all charts using this dataset, including charts owned by other people.',\n              )}\n            </>\n          }\n        />\n        <StyledTableTabs\n          fullWidth={false}\n          id=\"table-tabs\"\n          data-test=\"edit-dataset-tabs\"\n          onChange={this.handleTabSelect}\n          defaultActiveKey={activeTabKey}\n        >\n          <Tabs.TabPane key={0} tab={t('Source')}>\n            {this.renderSourceFieldset(theme)}\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={sortedMetrics}\n                title={t('Metrics')}\n              />\n            }\n            key={1}\n          >\n            {this.renderMetricCollection()}\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={this.state.databaseColumns}\n                title={t('Columns')}\n              />\n            }\n            key={2}\n          >\n            <StyledColumnsTabWrapper>\n              <ColumnButtonWrapper>\n                <StyledButtonWrapper>\n                  <Button\n                    buttonSize=\"small\"\n                    buttonStyle=\"tertiary\"\n                    onClick={this.syncMetadata}\n                    className=\"sync-from-source\"\n                    disabled={this.state.isEditMode}\n                  >\n                    <i className=\"fa fa-database\" />{' '}\n                    {t('Sync columns from source')}\n                  </Button>\n                </StyledButtonWrapper>\n              </ColumnButtonWrapper>\n              <ColumnCollectionTable\n                className=\"columns-table\"\n                columns={this.state.databaseColumns}\n                datasource={datasource}\n                onColumnsChange={databaseColumns =>\n                  this.setColumns({ databaseColumns })\n                }\n                onDatasourceChange={this.onDatasourceChange}\n              />\n              {this.state.metadataLoading && <Loading />}\n            </StyledColumnsTabWrapper>\n          </Tabs.TabPane>\n          <Tabs.TabPane\n            tab={\n              <CollectionTabTitle\n                collection={this.state.calculatedColumns}\n                title={t('Calculated columns')}\n              />\n            }\n            key={3}\n          >\n            <StyledColumnsTabWrapper>\n              <ColumnCollectionTable\n                columns={this.state.calculatedColumns}\n                onColumnsChange={calculatedColumns =>\n                  this.setColumns({ calculatedColumns })\n                }\n                onDatasourceChange={this.onDatasourceChange}\n                datasource={datasource}\n                editableColumnName\n                showExpression\n                allowAddItem\n                allowEditDataType\n                itemGenerator={() => ({\n                  column_name: '<new column>',\n                  filterable: true,\n                  groupby: true,\n                  expression: '<enter SQL expression here>',\n                  __expanded: true,\n                })}\n              />\n            </StyledColumnsTabWrapper>\n          </Tabs.TabPane>\n          <Tabs.TabPane key={4} tab={t('Settings')}>\n            <Row gutter={16}>\n              <Col xs={24} md={12}>\n                <FormContainer>{this.renderSettingsFieldset()}</FormContainer>\n              </Col>\n              <Col xs={24} md={12}>\n                <FormContainer>{this.renderAdvancedFieldset()}</FormContainer>\n              </Col>\n            </Row>\n          </Tabs.TabPane>\n        </StyledTableTabs>\n      </DatasourceContainer>\n    );\n  }\n}\n\nDatasourceEditor.defaultProps = defaultProps;\nDatasourceEditor.propTypes = propTypes;\n\nconst DataSourceComponent = withTheme(DatasourceEditor);\n\nexport default withToasts(DataSourceComponent);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState, useRef } from 'react';\nimport cx from 'classnames';\nimport { css, styled, t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CertifiedBadge from '../CertifiedBadge';\n\nexport interface EditableTitleProps {\n  canEdit?: boolean;\n  editing?: boolean;\n  emptyText?: string;\n  extraClasses?: Array<string> | string;\n  multiLine?: boolean;\n  noPermitTooltip?: string;\n  onSaveTitle: (arg0: string) => void;\n  showTooltip?: boolean;\n  style?: object;\n  title?: string;\n  defaultTitle?: string;\n  placeholder?: string;\n  certifiedBy?: string;\n  certificationDetails?: string;\n  onClickTitle?: () => void;\n}\n\nconst StyledCertifiedBadge = styled(CertifiedBadge)`\n  vertical-align: middle;\n`;\n\nexport default function EditableTitle({\n  canEdit = false,\n  editing = false,\n  extraClasses,\n  multiLine = false,\n  noPermitTooltip,\n  onSaveTitle,\n  showTooltip = true,\n  style,\n  title = '',\n  defaultTitle = '',\n  placeholder = '',\n  certifiedBy,\n  certificationDetails,\n  onClickTitle,\n  // rest is related to title tooltip\n  ...rest\n}: EditableTitleProps) {\n  const [isEditing, setIsEditing] = useState(editing);\n  const [currentTitle, setCurrentTitle] = useState(title);\n  const [lastTitle, setLastTitle] = useState(title);\n  const [contentBoundingRect, setContentBoundingRect] =\n    useState<DOMRect | null>(null);\n  // Used so we can access the DOM element if a user clicks on this component.\n\n  const contentRef = useRef<any | HTMLInputElement | HTMLTextAreaElement>();\n\n  useEffect(() => {\n    if (title !== currentTitle) {\n      setLastTitle(currentTitle);\n      setCurrentTitle(title);\n    }\n  }, [title]);\n\n  useEffect(() => {\n    if (isEditing) {\n      contentRef.current.focus();\n      // move cursor and scroll to the end\n      if (contentRef.current.setSelectionRange) {\n        const { length } = contentRef.current.value;\n        contentRef.current.setSelectionRange(length, length);\n        contentRef.current.scrollLeft = contentRef.current.scrollWidth;\n        contentRef.current.scrollTop = contentRef.current.scrollHeight;\n      }\n    }\n  }, [isEditing]);\n\n  function handleClick() {\n    if (!canEdit || isEditing) {\n      return;\n    }\n\n    // For multi-line values, save the actual rendered size of the displayed text.\n    // Later, if a textarea is constructed for editing the value, we'll need this.\n    const contentBounding = contentRef.current\n      ? contentRef.current.getBoundingClientRect()\n      : null;\n    setIsEditing(true);\n    setContentBoundingRect(contentBounding);\n  }\n\n  function handleBlur() {\n    const formattedTitle = currentTitle.trim();\n\n    if (!canEdit) {\n      return;\n    }\n\n    setIsEditing(false);\n\n    if (!formattedTitle.length) {\n      setCurrentTitle(lastTitle);\n      return;\n    }\n\n    if (lastTitle !== formattedTitle) {\n      setLastTitle(formattedTitle);\n    }\n\n    if (title !== formattedTitle) {\n      onSaveTitle(formattedTitle);\n    }\n  }\n\n  // tl;dr when a EditableTitle is being edited, typically the Tab that wraps it has been\n  // clicked and is focused/active. For accessibility, when the focused tab anchor intercepts\n  // the ' ' key (among others, including all arrows) the onChange() doesn't fire. Somehow\n  // keydown is still called so we can detect this and manually add a ' ' to the current title\n  function handleKeyDown(event: any) {\n    if (event.key === ' ') {\n      event.stopPropagation();\n    }\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      handleBlur();\n    }\n  }\n\n  function handleChange(ev: any) {\n    if (!canEdit) {\n      return;\n    }\n    setCurrentTitle(ev.target.value);\n  }\n\n  function handleKeyPress(ev: any) {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      handleBlur();\n    }\n  }\n\n  let value: string | undefined;\n  value = currentTitle;\n  if (!isEditing && !currentTitle) {\n    value = defaultTitle || title;\n  }\n\n  // Construct an inline style based on previously-saved height of the rendered label. Only\n  // used in multi-line contexts.\n  const editStyle =\n    isEditing && contentBoundingRect\n      ? { height: `${contentBoundingRect.height}px` }\n      : undefined;\n\n  // Create a textarea when we're editing a multi-line value, otherwise create an input (which may\n  // be text or a button).\n  let titleComponent =\n    multiLine && isEditing ? (\n      <textarea\n        data-test=\"editable-title-input\"\n        ref={contentRef}\n        value={value}\n        className={!title ? 'text-muted' : undefined}\n        onKeyDown={handleKeyDown}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        onClick={handleClick}\n        onKeyPress={handleKeyPress}\n        placeholder={placeholder}\n        style={editStyle}\n      />\n    ) : (\n      <input\n        data-test=\"editable-title-input\"\n        ref={contentRef}\n        type={isEditing ? 'text' : 'button'}\n        value={value}\n        className={!title ? 'text-muted' : undefined}\n        onKeyDown={handleKeyDown}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        onClick={handleClick}\n        onKeyPress={handleKeyPress}\n        placeholder={placeholder}\n      />\n    );\n  if (showTooltip && !isEditing) {\n    titleComponent = (\n      <Tooltip\n        id=\"title-tooltip\"\n        title={\n          canEdit\n            ? t('Click to edit')\n            : noPermitTooltip ||\n              t(\"You don't have the rights to alter this title.\")\n        }\n      >\n        {titleComponent}\n      </Tooltip>\n    );\n  }\n  if (!canEdit) {\n    // don't actually want an input in this case\n    titleComponent = onClickTitle ? (\n      <span\n        role=\"button\"\n        onClick={onClickTitle}\n        tabIndex={0}\n        data-test=\"editable-title-input\"\n        css={css`\n          :hover {\n            text-decoration: underline;\n          }\n        `}\n      >\n        {value}\n      </span>\n    ) : (\n      <span data-test=\"editable-title-input\">{value}</span>\n    );\n  }\n  return (\n    <span\n      data-test=\"editable-title\"\n      className={cx(\n        'editable-title',\n        extraClasses,\n        canEdit && 'editable-title--editable',\n        isEditing && 'editable-title--editing',\n      )}\n      style={style}\n      {...rest}\n    >\n      {certifiedBy && (\n        <>\n          <StyledCertifiedBadge\n            certifiedBy={certifiedBy}\n            details={certificationDetails}\n            size=\"xl\"\n          />{' '}\n        </>\n      )}\n      {titleComponent}\n    </span>\n  );\n}\n"],"names":["recurseReactClone","children","type","propExtender","React","child","newChild","name","props","formItemInlineCss","Field","fieldKey","value","label","description","control","onChange","compact","inline","onControlChange","useCallback","newValue","hookedControl","Form","className","Tooltip","id","placement","title","css","theme","color","colors","grayscale","base","gridUnit","Fieldset","constructor","super","this","bind","val","item","render","layout","field","SortOrder","createKeyedCollection","arr","collectionArray","map","o","collection","forEach","defaultProps","CrudTableWrapper","style","stickyHeader","CrudButtonWrapper","StyledButtonWrapper","CRUDCollection","state","expandedColumns","sortColumn","sort","renderItem","onAddItem","renderExpandableSection","getLabel","onFieldsetChange","renderTableBody","changeCollection","renderSortIcon","UNSAFE_componentWillReceiveProps","nextProps","setState","onCellChange","col","itemGenerator","newItem","columnLabels","startsWith","c","filter","undefined","unshift","deleteItem","newColl","effectiveTableColumns","tableColumns","allowDeletes","expandFieldset","cols","concat","toggleExpand","prevState","unsort","sortColumns","includes","Object","keys","k","createCollectionArray","sorted","a","b","compareSort","m","n","localeCompare","newCollection","asc","reverse","Icons","onClick","desc","renderHeaderRow","extraButtons","key","renderCell","record","renderer","itemRenderers","allowAddItem","isExpanded","__expanded","tds","push","role","tabIndex","trs","colSpan","length","renderEmptyCell","emptyMessage","data","content","d","Button","buttonSize","buttonStyle","t","DatasourceContainer","styled","warning","typography","weights","bold","FlexRowContainer","StyledTableTabs","Tabs","StyledBadge","Badge","EditLockContainer","sizes","s","ColumnButtonWrapper","StyledLabelWrapper","StyledColumnsTabWrapper","checkboxGenerator","CheckboxControl","DATA_TYPES","DATASOURCE_TYPES_ARR","DATASOURCE_TYPES","CollectionTabTitle","count","showZero","ColumnCollectionTable","columns","datasource","onColumnsChange","onDatasourceChange","editableColumnName","showExpression","allowEditDataType","isFeatureEnabled","FeatureFlag","FormContainer","TextAreaControl","language","offerEditInModal","TextControl","controlId","placeholder","ariaLabel","options","allowNewOptions","allowClear","href","column_name","advanced_data_type","groupby","is_dttm","main_dttm_col","filterable","v","onItemChange","_","is_certified","CertifiedBadge","certifiedBy","certified_by","details","certification_details","EditableTitle","canEdit","onSaveTitle","_onItemChange","_label","checked","disabled","find","column","Radio","Label","StackedField","formElement","Card","padded","propTypes","PropTypes","addSuccessToast","addDangerToast","setIsEditing","OwnersSelector","loadOptions","search","page","pageSize","query","rison","page_size","SupersetClient","endpoint","then","response","json","result","text","totalCount","mode","owners","header","DatasourceEditor","owner","first_name","last_name","metrics","metric","certifiedByMetric","certificationDetails","certification","warning_markdown","warningMarkdown","JSON","parse","extra","errors","isDruid","datasource_type","isSqla","isEditMode","databaseColumns","expression","calculatedColumns","metadataLoading","activeTabKey","datasourceType","sql","virtual","physical","onChangeEditMode","onDatasourcePropChange","tableChangeAndSyncMetadata","syncMetadata","setColumns","validateAndChange","handleTabSelect","allowEditSource","newDatasource","callback","attr","onDatasourceTypeChange","obj","validate","updateColumns","databaseColumnNames","currentCols","reduce","agg","finalColumns","results","added","modified","removed","currentCol","shortid","params","database_name","database","schema_name","schema","table_name","entries","join","catch","getClientErrorObject","error","statusText","findDuplicates","accessor","seen","dups","metric_name","noFilterCalcCols","sortMetrics","renderSettingsFieldset","minLines","newOwners","renderAdvancedFieldset","renderSpatialTab","spatials","all_cols","allCols","tab","config","SpatialControl","choices","renderSourceFieldset","iconColor","xs","md","DatabaseSelector","db","onSchemaChange","onDbChange","formMode","handleError","readOnly","width","marginTop","table","maxLines","TableSelector","clearable","dbId","sqlLabMode","tableValue","onTableSelectChange","renderErrors","Alert","marginBottom","message","err","renderMetricCollection","sortedMetrics","verbose_name","WarningIconWithTooltip","initialValue","extraClasses","d3format","fullWidth","defaultActiveKey","Loading","gutter","DataSourceComponent","withTheme","withToasts","StyledCertifiedBadge","editing","multiLine","noPermitTooltip","showTooltip","defaultTitle","onClickTitle","rest","isEditing","useState","currentTitle","setCurrentTitle","lastTitle","setLastTitle","contentBoundingRect","setContentBoundingRect","contentRef","useRef","handleClick","contentBounding","current","getBoundingClientRect","handleBlur","formattedTitle","trim","handleKeyDown","event","stopPropagation","preventDefault","handleChange","ev","target","handleKeyPress","useEffect","focus","setSelectionRange","scrollLeft","scrollWidth","scrollTop","scrollHeight","editStyle","height","titleComponent","ref","onKeyDown","onBlur","onKeyPress","size"],"sourceRoot":""}