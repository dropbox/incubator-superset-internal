(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3811],{44272:(t,e,s)=>{"use strict";s.d(e,{Z:()=>b});var n=s(67294),r=s(45697),i=s.n(r),a=s(79362),o=s(42441),l=s.n(o),p=s(61988),u=s(19322),d=s.n(u),c=s(11965);function h(t){return(0,c.tZ)("span",{className:"BootstrapSliderWrapper"},(0,c.tZ)(d(),t))}const m={start:i().number.isRequired,step:i().number.isRequired,end:i().number.isRequired,values:i().array.isRequired,onChange:i().func,loopDuration:i().number,maxFrames:i().number,orientation:i().oneOf(["horizontal","vertical"]),reversed:i().bool,disabled:i().bool,range:i().bool};class f extends n.PureComponent{constructor(t){super(t),this.state={intervalId:null};const e=t.end-t.start,s=Math.min(t.maxFrames,e/t.step),n=e/s;this.intervalMilliseconds=t.loopDuration/s,this.increment=n<t.step?t.step:n-n%t.step,this.onChange=this.onChange.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.stepBackward=this.stepBackward.bind(this),this.stepForward=this.stepForward.bind(this),this.getPlayClass=this.getPlayClass.bind(this),this.formatter=this.formatter.bind(this)}componentDidMount(){l().bind(["space"],this.play)}componentWillUnmount(){l().unbind(["space"])}onChange(t){this.props.onChange(t.target.value),null!=this.state.intervalId&&this.pause()}getPlayClass(){return null==this.state.intervalId?"fa fa-play fa-lg slider-button":"fa fa-pause fa-lg slider-button"}play(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{const t=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:t})}}pause(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}stepForward(){const{start:t,end:e,step:s,values:n,disabled:r}=this.props;if(r)return;const i=(Array.isArray(n)?n:[n,n+s]).map((t=>t+this.increment)),a=i[1]>e?i[0]-t:0;this.props.onChange(i.map((t=>t-a)))}stepBackward(){const{start:t,end:e,step:s,values:n,disabled:r}=this.props;if(r)return;const i=(Array.isArray(n)?n:[n,n+s]).map((t=>t-this.increment)),a=i[0]<t?e-i[1]:0;this.props.onChange(i.map((t=>t+a)))}formatter(t){if(this.props.disabled)return(0,p.t)("Data has no time steps");let e=t;return Array.isArray(t)?t[0]===t[1]&&(e=[t[0]]):e=[t],e.map((t=>new Date(t).toUTCString())).join(" : ")}render(){const{start:t,end:e,step:s,orientation:n,reversed:r,disabled:i,range:a,values:o}=this.props;return(0,c.tZ)("div",{className:"play-slider"},(0,c.tZ)("div",{className:"play-slider-controls padded"},(0,c.tZ)("i",{className:"fa fa-step-backward fa-lg slider-button ",onClick:this.stepBackward}),(0,c.tZ)("i",{className:this.getPlayClass(),onClick:this.play}),(0,c.tZ)("i",{className:"fa fa-step-forward fa-lg slider-button ",onClick:this.stepForward})),(0,c.tZ)("div",{className:"play-slider-scrobbler padded"},(0,c.tZ)(h,{value:a?o:o[0],range:a,formatter:this.formatter,change:this.onChange,min:t,max:e,step:s,orientation:n,reversed:r,disabled:i?"disabled":"enabled"})))}}f.propTypes=m,f.defaultProps={onChange:()=>{},loopDuration:15e3,maxFrames:100,orientation:"horizontal",reversed:!1,disabled:!1,range:!0};const g={getLayers:i().func.isRequired,start:i().number.isRequired,end:i().number.isRequired,getStep:i().func,values:i().array.isRequired,aggregation:i().bool,disabled:i().bool,viewport:i().object.isRequired,children:i().node,mapStyle:i().string,mapboxApiAccessToken:i().string.isRequired,setControlValue:i().func,onValuesChange:i().func,width:i().number.isRequired,height:i().number.isRequired};class b extends n.PureComponent{constructor(...t){super(...t),this.containerRef=n.createRef(),this.setTooltip=t=>{const{current:e}=this.containerRef;e&&e.setTooltip(t)}}render(){const{start:t,end:e,getStep:s,disabled:n,aggregation:r,children:i,getLayers:o,values:l,onValuesChange:p,viewport:u,setControlValue:d,mapStyle:h,mapboxApiAccessToken:m,height:g,width:b}=this.props,v=o(l);return(0,c.tZ)("div",null,(0,c.tZ)(a.F,{ref:this.containerRef,viewport:u,layers:v,setControlValue:d,mapStyle:h,mapboxApiAccessToken:m,bottomMargin:n?0:20,width:b,height:g}),!n&&(0,c.tZ)(f,{start:t,end:e,step:s(t),values:l,range:!r,onChange:p}),i)}}b.propTypes=g,b.defaultProps={aggregation:!1,disabled:!1,mapStyle:"light",setControlValue:()=>{},onValuesChange:()=>{}}},79362:(t,e,s)=>{"use strict";s.d(e,{F:()=>g});var n=s(18446),r=s.n(n),i=s(67294),a=s(45697),o=s.n(a),l=s(98601),p=s(65274),u=s(51995),d=s(68924),c=s(11965);function h(t){const{tooltip:e}=t;if(null==e)return null;const{x:s,y:n,content:r}=e,a=(0,i.useMemo)((()=>({position:"absolute",top:`${n}px`,left:`${s}px`,padding:"8px",margin:"8px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",maxWidth:"300px",fontSize:"12px",zIndex:9,pointerEvents:"none"})),[s,n]);if("string"==typeof r){const t=(0,i.useMemo)((()=>({__html:(0,d.filterXSS)(r,{stripIgnoreTag:!0})})),[r]);return(0,c.tZ)("div",{style:a},(0,c.tZ)("div",{dangerouslySetInnerHTML:t}))}return(0,c.tZ)("div",{style:a},r)}const m={viewport:o().object.isRequired,layers:o().array.isRequired,setControlValue:o().func,mapStyle:o().string,mapboxApiAccessToken:o().string.isRequired,children:o().node,bottomMargin:o().number,width:o().number.isRequired,height:o().number.isRequired,onViewportChange:o().func};class f extends i.Component{constructor(t){super(t),this.setTooltip=t=>{this.setState({tooltip:t})},this.tick=this.tick.bind(this),this.onViewStateChange=this.onViewStateChange.bind(this),this.state={timer:setInterval(this.tick,250),tooltip:null,viewState:t.viewport}}UNSAFE_componentWillReceiveProps(t){r()(t.viewport,this.props.viewport)||this.setState({viewState:t.viewport})}componentWillUnmount(){clearInterval(this.state.timer)}onViewStateChange({viewState:t}){this.setState({viewState:t,lastUpdate:Date.now()})}tick(){const{lastUpdate:t}=this.state;if(t&&Date.now()-t>250){const t=this.props.setControlValue;t&&t("viewport",this.state.viewState),this.setState({lastUpdate:null})}}layers(){return this.props.layers.some((t=>"function"==typeof t))?this.props.layers.map((t=>"function"==typeof t?t():t)):this.props.layers}render(){const{children:t,bottomMargin:e,height:s,width:n}=this.props,{viewState:r,tooltip:a}=this.state,o=s-e,u=this.layers();return(0,c.tZ)(i.Fragment,null,(0,c.tZ)("div",{style:{position:"relative",width:n,height:o}},(0,c.tZ)(p.Z,{initWebGLParameters:!0,controller:!0,width:n,height:o,layers:u,viewState:r,glOptions:{preserveDrawingBuffer:!0},onViewStateChange:this.onViewStateChange},(0,c.tZ)(l.Z3,{preserveDrawingBuffer:!0,mapStyle:this.props.mapStyle,mapboxApiAccessToken:this.props.mapboxApiAccessToken})),t),(0,c.tZ)(h,{tooltip:a}))}}f.propTypes=m,f.defaultProps={mapStyle:"light",setControlValue:()=>{},children:null,bottomMargin:0};const g=(0,u.iK)(f)`
  .deckgl-tooltip > div {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`},1740:(t,e,s)=>{"use strict";s.d(e,{Z:()=>l});var n=s(67294),r=s(45697),i=s.n(r),a=s(11965);const o={label:i().string.isRequired,value:i().string.isRequired};class l extends n.PureComponent{render(){const{label:t,value:e}=this.props;return(0,a.tZ)("div",null,t,(0,a.tZ)("strong",null,e))}}l.propTypes=o},52154:(t,e,s)=>{"use strict";s.d(e,{N:()=>i,Z:()=>o});var n=s(4065),r=s(21207);function i(t,e,s,n){const i=t;let a,o,l=s;return i.js_tooltip&&(l=(0,r.Z)(i.js_tooltip)),l&&(a=t=>{t.picked?e({content:l(t),x:t.x,y:t.y}):e(null)}),i.js_onclick_href?o=t=>{const e=(0,r.Z)(i.js_onclick_href)(t);window.open(e)}:i.table_filter&&void 0!==n&&(o=t=>n(t.object[i.line_column])),{onClick:o,onHover:a,pickable:Boolean(a)}}const a={p1:.01,p5:.05,p95:.95,p99:.99};function o(t="sum",e=null){if("count"===t)return t=>t.length;let s;return s=t in a?(s,r)=>{let i;return i=e?s.sort(((t,s)=>n.ascending(e(t),e(s)))):s.sort(n.ascending),n.quantile(i,a[t],r)}:n[t],e?t=>s(t.map((t=>e(t)))):t=>s(t)}},64106:(t,e,s)=>{"use strict";s.r(e),s.d(e,{hexToRGB:()=>r});var n=s(16372);function r(t,e=255){if(!t)return[0,0,0,e];const{r:s,g:r,b:i}=(0,n.B8)(t);return[s,r,i,e]}},21207:(t,e,s)=>{"use strict";s.d(e,{Z:()=>p});var n=s(55140),r=s.n(n),i=s(77963),a=s(4065),o=s(64106);const l={console,_:i.ZP,colors:o,d3array:a};function p(t,e,s){const n={},i=`SAFE_EVAL_${Math.floor(1e6*Math.random())}`;n[i]={};const a=`${i}=${t}`,o={...l,...e};Object.keys(o).forEach((t=>{n[t]=o[t]}));try{return r().runInNewContext(a,n,s),n[i]}catch(t){return()=>t}}},66911:(t,e,s)=>{"use strict";s.d(e,{g:()=>o});var n=s(30381),r=s.n(n);const i=[1,0,1,0,0,0,0];function a(t,e){const s=parseInt(r()(e).format("x"),10);return parseInt(r()(e).add(t).format("x"),10)-s}function o(t,e){const s=r()(Number(t.reduce(((t,e)=>t<e?t:e)))),n=r()(Number(t.reduce(((t,e)=>t>e?t:e))));let o,l,p;if(e.includes("/")){const t=e.split("/",2);t[0].endsWith("Z")?(l=r()(t[0]),o=r().duration(t[1])):(l=r()(t[1]),o=r().duration(t[0]))}else o=r().duration(e),l=function(t,e){const s=r()(t).subtract(e),n=t.toArray(),a=s.toArray(),o=n.map(((t,e)=>a[e]!==t)).indexOf(!0),l=n.map(((t,e)=>{if(e===o){const s=t-a[e];return t-(t-i[e])%s}return e<o||-1===o?t:i[e]}));return r()(l)}(s,o);const u=s.valueOf();for(p=l.clone();p.valueOf()<u;)p.add(o);for(;p.valueOf()>u;)p.subtract(o);let d;const c=n.valueOf();for(d=l.clone();d.valueOf()>c;)d.subtract(o);for(;d.valueOf()<c;)d.add(o);const h=null!=e?[p,p.clone().add(o)]:[p,d],m=t.every((t=>null===t));return{start:parseInt(p.format("x"),10),end:parseInt(d.format("x"),10),getStep:a.bind(this,o),values:h.map((t=>parseInt(t.format("x"),10))),disabled:m}}},40461:(t,e,s)=>{"use strict";s.d(e,{Z:()=>l});var n=s(17013),r=s(4065);const i=[-90,90],a=[-180,180];function o([t,e],[s,n],r=.25){return t<e?[t,e]:[Math.max(s,t-r),Math.min(n,e+r)]}function l(t,{points:e,width:s,height:l,minExtent:p,maxZoom:u,offset:d,padding:c=20}){const{bearing:h,pitch:m}=t,f=function(t){const e=o((0,r.extent)(t,(t=>t[1])),i),s=o((0,r.extent)(t,(t=>t[0])),a);return[[s[0],e[0]],[s[1],e[1]]]}(e);try{return{...(0,n.Xg)({bounds:f,width:s,height:l,minExtent:p,maxZoom:u,offset:d,padding:c}),bearing:h,pitch:m}}catch(t){console.error("Could not fit viewport",t)}return t}},92540:()=>{},75307:()=>{}}]);