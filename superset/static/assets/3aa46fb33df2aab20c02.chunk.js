(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1161],{85531:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var s=n(67294),r=n(45697),i=n.n(r),a=n(84502),o=n(42441),l=n.n(o),p=n(51995),d=n(61988),u=n(19322),c=n.n(u),h=n(11965);const g=p.iK.div`
  ${({theme:t})=>`\n    .slider-selection {\n      background: ${t.colors.grayscale.light2};\n    }\n    .slider-handle {\n      background: ${t.colors.grayscale.light1};\n    }\n  `}
`;function m(t){return(0,h.tZ)(g,null,(0,h.tZ)(c(),t))}const f=p.iK.div`
  ${({theme:t})=>`\n    display: flex;\n    height: 40px;\n    width: 100%;\n    margin: 0;\n\n    .play-slider-controls {\n      flex: 0 0 80px;\n      text-align: middle;\n    }\n\n    .play-slider-scrobbler {\n      flex: 1;\n    }\n\n    .slider.slider-horizontal {\n      width: 100% !important;\n    }\n\n    .slider-button {\n      color: ${t.colors.grayscale.light1};\n      margin-right: ${t.gridUnit}px;\n    }\n\n    div.slider > div.tooltip.tooltip-main.top.in {\n      margin-left: 0 !important;\n    }\n  `}
`,b={start:i().number.isRequired,step:i().number.isRequired,end:i().number.isRequired,values:i().array.isRequired,onChange:i().func,loopDuration:i().number,maxFrames:i().number,orientation:i().oneOf(["horizontal","vertical"]),reversed:i().bool,disabled:i().bool,range:i().bool};class v extends s.PureComponent{constructor(t){super(t),this.state={intervalId:null};const e=t.end-t.start,n=Math.min(t.maxFrames,e/t.step),s=e/n;this.intervalMilliseconds=t.loopDuration/n,this.increment=s<t.step?t.step:s-s%t.step,this.onChange=this.onChange.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.stepBackward=this.stepBackward.bind(this),this.stepForward=this.stepForward.bind(this),this.getPlayClass=this.getPlayClass.bind(this),this.formatter=this.formatter.bind(this)}componentDidMount(){l().bind(["space"],this.play)}componentWillUnmount(){l().unbind(["space"])}onChange(t){this.props.onChange(t.target.value),null!=this.state.intervalId&&this.pause()}getPlayClass(){return null==this.state.intervalId?"fa fa-play fa-lg slider-button":"fa fa-pause fa-lg slider-button"}play(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{const t=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:t})}}pause(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}stepForward(){const{start:t,end:e,step:n,values:s,disabled:r}=this.props;if(r)return;const i=(Array.isArray(s)?s:[s,s+n]).map((t=>t+this.increment)),a=i[1]>e?i[0]-t:0;this.props.onChange(i.map((t=>t-a)))}stepBackward(){const{start:t,end:e,step:n,values:s,disabled:r}=this.props;if(r)return;const i=(Array.isArray(s)?s:[s,s+n]).map((t=>t-this.increment)),a=i[0]<t?e-i[1]:0;this.props.onChange(i.map((t=>t+a)))}formatter(t){if(this.props.disabled)return(0,d.t)("Data has no time steps");let e=t;return Array.isArray(t)?t[0]===t[1]&&(e=[t[0]]):e=[t],e.map((t=>new Date(t).toUTCString())).join(" : ")}render(){const{start:t,end:e,step:n,orientation:s,reversed:r,disabled:i,range:a,values:o}=this.props;return(0,h.tZ)(f,null,(0,h.tZ)("div",{className:"play-slider-controls padded"},(0,h.tZ)("i",{className:"fa fa-step-backward fa-lg slider-button ",onClick:this.stepBackward}),(0,h.tZ)("i",{className:this.getPlayClass(),onClick:this.play}),(0,h.tZ)("i",{className:"fa fa-step-forward fa-lg slider-button ",onClick:this.stepForward})),(0,h.tZ)("div",{className:"play-slider-scrobbler padded"},(0,h.tZ)(m,{value:a?o:o[0],range:a,formatter:this.formatter,change:this.onChange,min:t,max:e,step:n,orientation:s,reversed:r,disabled:i?"disabled":"enabled"})))}}v.propTypes=b,v.defaultProps={onChange:()=>{},loopDuration:15e3,maxFrames:100,orientation:"horizontal",reversed:!1,disabled:!1,range:!0};const y={getLayers:i().func.isRequired,start:i().number.isRequired,end:i().number.isRequired,getStep:i().func,values:i().array.isRequired,aggregation:i().bool,disabled:i().bool,viewport:i().object.isRequired,children:i().node,mapStyle:i().string,mapboxApiAccessToken:i().string.isRequired,setControlValue:i().func,onValuesChange:i().func,width:i().number.isRequired,height:i().number.isRequired};class w extends s.PureComponent{constructor(...t){super(...t),this.containerRef=s.createRef(),this.setTooltip=t=>{const{current:e}=this.containerRef;e&&e.setTooltip(t)}}render(){const{start:t,end:e,getStep:n,disabled:s,aggregation:r,children:i,getLayers:o,values:l,onValuesChange:p,viewport:d,setControlValue:u,mapStyle:c,mapboxApiAccessToken:g,height:m,width:f}=this.props,b=o(l);return(0,h.tZ)("div",null,(0,h.tZ)(a.F,{ref:this.containerRef,viewport:d,layers:b,setControlValue:u,mapStyle:c,mapboxApiAccessToken:g,bottomMargin:s?0:20,width:f,height:m}),!s&&(0,h.tZ)(v,{start:t,end:e,step:n(t),values:l,range:!r,onChange:p}),i)}}w.propTypes=y,w.defaultProps={aggregation:!1,disabled:!1,mapStyle:"light",setControlValue:()=>{},onValuesChange:()=>{}}},84502:(t,e,n)=>{"use strict";n.d(e,{F:()=>b});var s=n(18446),r=n.n(s),i=n(67294),a=n(45697),o=n.n(a),l=n(98601),p=n(65274),d=n(51995),u=n(68924),c=n(11965);const h=d.iK.div`
  ${({theme:t,top:e,left:n})=>`\n    position: absolute;\n    top: ${e}px;\n    left: ${n}px;\n    padding: ${2*t.gridUnit}px;\n    margin: ${2*t.gridUnit}px;\n    background: ${t.colors.grayscale.dark2};\n    color: ${t.colors.grayscale.light5};\n    maxWidth: 300px;\n    fontSize: ${t.typography.sizes.s}px;\n    zIndex: 9;\n    pointerEvents: none;\n  `}
`;function g(t){const{tooltip:e}=t;if(null==e)return null;const{x:n,y:s,content:r}=e;if("string"==typeof r){const t=(0,i.useMemo)((()=>({__html:(0,u.filterXSS)(r,{stripIgnoreTag:!0})})),[r]);return(0,c.tZ)(h,{top:s,left:n},(0,c.tZ)("div",{dangerouslySetInnerHTML:t}))}return(0,c.tZ)(h,{top:s,left:n},r)}const m={viewport:o().object.isRequired,layers:o().array.isRequired,setControlValue:o().func,mapStyle:o().string,mapboxApiAccessToken:o().string.isRequired,children:o().node,bottomMargin:o().number,width:o().number.isRequired,height:o().number.isRequired,onViewportChange:o().func};class f extends i.Component{constructor(t){super(t),this.setTooltip=t=>{this.setState({tooltip:t})},this.tick=this.tick.bind(this),this.onViewStateChange=this.onViewStateChange.bind(this),this.state={timer:setInterval(this.tick,250),tooltip:null,viewState:t.viewport}}UNSAFE_componentWillReceiveProps(t){r()(t.viewport,this.props.viewport)||this.setState({viewState:t.viewport})}componentWillUnmount(){clearInterval(this.state.timer)}onViewStateChange({viewState:t}){this.setState({viewState:t,lastUpdate:Date.now()})}tick(){const{lastUpdate:t}=this.state;if(t&&Date.now()-t>250){const t=this.props.setControlValue;t&&t("viewport",this.state.viewState),this.setState({lastUpdate:null})}}layers(){return this.props.layers.some((t=>"function"==typeof t))?this.props.layers.map((t=>"function"==typeof t?t():t)):this.props.layers}render(){const{children:t,bottomMargin:e,height:n,width:s}=this.props,{viewState:r,tooltip:a}=this.state,o=n-e,d=this.layers();return(0,c.tZ)(i.Fragment,null,(0,c.tZ)("div",{style:{position:"relative",width:s,height:o}},(0,c.tZ)(p.Z,{initWebGLParameters:!0,controller:!0,width:s,height:o,layers:d,viewState:r,glOptions:{preserveDrawingBuffer:!0},onViewStateChange:this.onViewStateChange},(0,c.tZ)(l.Z3,{preserveDrawingBuffer:!0,mapStyle:this.props.mapStyle,mapboxApiAccessToken:this.props.mapboxApiAccessToken})),t),(0,c.tZ)(g,{tooltip:a}))}}f.propTypes=m,f.defaultProps={mapStyle:"light",setControlValue:()=>{},children:null,bottomMargin:0};const b=(0,d.iK)(f)`
  .deckgl-tooltip > div {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`},1740:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var s=n(67294),r=n(45697),i=n.n(r),a=n(11965);const o={label:i().string.isRequired,value:i().string.isRequired};class l extends s.PureComponent{render(){const{label:t,value:e}=this.props;return(0,a.tZ)("div",null,t,(0,a.tZ)("strong",null,e))}}l.propTypes=o},52154:(t,e,n)=>{"use strict";n.d(e,{N:()=>i,Z:()=>o});var s=n(4065),r=n(21207);function i(t,e,n,s){const i=t;let a,o,l=n;return i.js_tooltip&&(l=(0,r.Z)(i.js_tooltip)),l&&(a=t=>{t.picked?e({content:l(t),x:t.x,y:t.y}):e(null)}),i.js_onclick_href?o=t=>{const e=(0,r.Z)(i.js_onclick_href)(t);window.open(e)}:i.table_filter&&void 0!==s&&(o=t=>s(t.object[i.line_column])),{onClick:o,onHover:a,pickable:Boolean(a)}}const a={p1:.01,p5:.05,p95:.95,p99:.99};function o(t="sum",e=null){if("count"===t)return t=>t.length;let n;return n=t in a?(n,r)=>{let i;return i=e?n.sort(((t,n)=>s.ascending(e(t),e(n)))):n.sort(s.ascending),s.quantile(i,a[t],r)}:s[t],e?t=>n(t.map((t=>e(t)))):t=>n(t)}},64106:(t,e,n)=>{"use strict";n.r(e),n.d(e,{hexToRGB:()=>r});var s=n(16372);function r(t,e=255){if(!t)return[0,0,0,e];const{r:n,g:r,b:i}=(0,s.B8)(t);return[n,r,i,e]}},21207:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var s=n(55140),r=n.n(s),i=n(77963),a=n(4065),o=n(64106);const l={console,_:i.ZP,colors:o,d3array:a};function p(t,e,n){const s={},i=`SAFE_EVAL_${Math.floor(1e6*Math.random())}`;s[i]={};const a=`${i}=${t}`,o={...l,...e};Object.keys(o).forEach((t=>{s[t]=o[t]}));try{return r().runInNewContext(a,s,n),s[i]}catch(t){return()=>t}}},66911:(t,e,n)=>{"use strict";n.d(e,{g:()=>o});var s=n(30381),r=n.n(s);const i=[1,0,1,0,0,0,0];function a(t,e){const n=parseInt(r()(e).format("x"),10);return parseInt(r()(e).add(t).format("x"),10)-n}function o(t,e){const n=r()(Number(t.reduce(((t,e)=>t<e?t:e)))),s=r()(Number(t.reduce(((t,e)=>t>e?t:e))));let o,l,p;if(e.includes("/")){const t=e.split("/",2);t[0].endsWith("Z")?(l=r()(t[0]),o=r().duration(t[1])):(l=r()(t[1]),o=r().duration(t[0]))}else o=r().duration(e),l=function(t,e){const n=r()(t).subtract(e),s=t.toArray(),a=n.toArray(),o=s.map(((t,e)=>a[e]!==t)).indexOf(!0),l=s.map(((t,e)=>{if(e===o){const n=t-a[e];return t-(t-i[e])%n}return e<o||-1===o?t:i[e]}));return r()(l)}(n,o);const d=n.valueOf();for(p=l.clone();p.valueOf()<d;)p.add(o);for(;p.valueOf()>d;)p.subtract(o);let u;const c=s.valueOf();for(u=l.clone();u.valueOf()>c;)u.subtract(o);for(;u.valueOf()<c;)u.add(o);const h=null!=e?[p,p.clone().add(o)]:[p,u],g=t.every((t=>null===t));return{start:parseInt(p.format("x"),10),end:parseInt(u.format("x"),10),getStep:a.bind(this,o),values:h.map((t=>parseInt(t.format("x"),10))),disabled:g}}},40461:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var s=n(17013),r=n(4065);const i=[-90,90],a=[-180,180];function o([t,e],[n,s],r=.25){return t<e?[t,e]:[Math.max(n,t-r),Math.min(s,e+r)]}function l(t,{points:e,width:n,height:l,minExtent:p,maxZoom:d,offset:u,padding:c=20}){const{bearing:h,pitch:g}=t,m=function(t){const e=o((0,r.extent)(t,(t=>t[1])),i),n=o((0,r.extent)(t,(t=>t[0])),a);return[[n[0],e[0]],[n[1],e[1]]]}(e);try{return{...(0,s.Xg)({bounds:m,width:n,height:l,minExtent:p,maxZoom:d,offset:u,padding:c}),bearing:h,pitch:g}}catch(t){console.error("Could not fit viewport",t)}return t}},92540:()=>{},75307:()=>{}}]);
//# sourceMappingURL=3aa46fb33df2aab20c02.chunk.js.map