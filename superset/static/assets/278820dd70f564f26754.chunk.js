"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7929],{47929:(t,n,e)=>{e.r(n),e.d(n,{default:()=>L});var r=e(67294),a=e(45697),o=e.n(a);function i(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let a=-1;for(let o of t)null!=(o=n(o,++a,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}var s=e(55786),l=Math.sqrt(50),u=Math.sqrt(10),c=Math.sqrt(2);function h(t,n,e){var r=(n-t)/Math.max(0,e),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return a>=0?(o>=l?10:o>=u?5:o>=c?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=l?10:o>=u?5:o>=c?2:1)}function f(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function d(t){let n=t,e=t;function r(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){const o=r+a>>>1;e(t[o],n)<0?r=o+1:a=o}return r}return 1===t.length&&(n=(n,e)=>t(n)-e,e=function(t){return(n,e)=>f(t(n),e)}(t)),{left:r,center:function(t,e,a,o){null==a&&(a=0),null==o&&(o=t.length);const i=r(t,e,a,o-1);return i>a&&n(t[i-1],e)>-n(t[i],e)?i-1:i},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){const o=r+a>>>1;e(t[o],n)>0?a=o:r=o+1}return r}}}const m=d(f),g=m.right,p=(m.left,d((function(t){return null===t?NaN:+t})).center,g);var v=e(15744),y=e(73626),M=e(55720);function b(t){return+t}var w=[0,1];function N(t){return t}function k(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function S(t,n,e){var r=t[0],a=t[1],o=n[0],i=n[1];return a<r?(r=k(a,r),o=e(i,o)):(r=k(r,a),o=e(o,i)),function(t){return o(r(t))}}function x(t,n,e){var r=Math.min(t.length,n.length)-1,a=new Array(r),o=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++i<r;)a[i]=k(t[i],t[i+1]),o[i]=e(n[i],n[i+1]);return function(n){var e=p(t,n,1,r)-1;return o[e](a[e](n))}}function Z(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function C(){return function(){var t,n,e,r,a,o,i=w,s=w,l=v.Z,u=N;function c(){var t,n,e,l=Math.min(i.length,s.length);return u!==N&&(t=i[0],n=i[l-1],t>n&&(e=t,t=n,n=e),u=function(e){return Math.max(t,Math.min(n,e))}),r=l>2?x:S,a=o=null,h}function h(n){return null==n||isNaN(n=+n)?e:(a||(a=r(i.map(t),s,l)))(t(u(n)))}return h.invert=function(e){return u(n((o||(o=r(s,i.map(t),y.Z)))(e)))},h.domain=function(t){return arguments.length?(i=Array.from(t,b),c()):i.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=M.Z,c()},h.clamp=function(t){return arguments.length?(u=!!t||N,c()):u!==N},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,c()}}()(N,N)}function A(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}var O=e(16722);function X(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,a,o,i,s=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(a=t,t=n,n=a),0===(i=h(t,n,e))||!isFinite(i))return[];if(i>0){let e=Math.round(t/i),r=Math.round(n/i);for(e*i<t&&++e,r*i>n&&--r,o=new Array(a=r-e+1);++s<a;)o[s]=(e+s)*i}else{i=-i;let e=Math.round(t*i),r=Math.round(n*i);for(e/i<t&&++e,r/i>n&&--r,o=new Array(a=r-e+1);++s<a;)o[s]=(e+s)/i}return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return function(t,n,e,r){var a,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=l?a*=10:o>=u?a*=5:o>=c&&(a*=2),n<t?-a:a}(t,n,e);switch((r=(0,O.YQ)(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(a=(0,O.S5)(o,i))||(r.precision=a),(0,O.jH)(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=(0,O.F0)(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=(0,O.zB)(o))||(r.precision=a-2*("%"===r.type))}return(0,O.WU)(r)}(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,a,o=n(),i=0,s=o.length-1,l=o[i],u=o[s],c=10;for(u<l&&(a=l,l=u,u=a,a=i,i=s,s=a);c-- >0;){if((a=h(l,u,e))===r)return o[i]=l,o[s]=u,n(o);if(a>0)l=Math.floor(l/a)*a,u=Math.ceil(u/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,u=Math.floor(u*a)/a}r=a}return t},t}function D(){var t=C();return t.copy=function(){return Z(t,D())},A.apply(t,arguments),X(t)}var R=e(11965);const q=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],T={className:o().string,width:o().number,height:o().number,data:o().arrayOf(o().shape({y:o().number})).isRequired,bands:o().number,colors:o().arrayOf(o().string),colorScale:o().string,mode:o().string,offsetX:o().number,title:o().string,yDomain:o().arrayOf(o().number)},H={className:"",width:800,height:20,bands:q.length>>1,colors:q,colorScale:"series",mode:"offset",offsetX:0,title:"",yDomain:void 0};class P extends r.PureComponent{componentDidMount(){this.drawChart()}componentDidUpdate(){this.drawChart()}componentWillUnmount(){this.canvas=null}drawChart(){if(this.canvas){const{data:t,yDomain:n,width:e,height:r,bands:a,colors:o,colorScale:s,offsetX:l,mode:u}=this.props,c="change"===s?t.map((n=>({...n,y:n.y-t[0].y}))):t,h=this.canvas.getContext("2d");h.imageSmoothingEnabled=!1,h.clearRect(0,0,e,r),h.setTransform(1,0,0,1,0,0),h.translate(.5,.5);const f=e/c.length,d=Math.floor(Math.max(0,-l/f)),m=Math.floor(Math.min(c.length,d+e/f));if(d>c.length)return;const[g,p]=n||i(c,(t=>t.y)),v=D().domain([0,Math.max(-g,p)]).range([0,r]);let y,M,b=!1;for(let t=0;t<a;t+=1){h.fillStyle=o[a+t],M=(t+1-a)*r,v.range([a*r+M,M]);for(let t=d;t<m;t+=1)y=c[t].y,y<=0?b=!0:void 0!==y&&h.fillRect(l+t*f,v(y),f+1,v(0)-v(y))}if(b){"offset"===u&&(h.translate(0,r),h.scale(1,-1));for(let t=0;t<a;t+=1){h.fillStyle=o[a-t-1],M=(t+1-a)*r,v.range([a*r+M,M]);for(let t=d;t<m;t+=1)y=c[t].y,y>=0||h.fillRect(l+t*f,v(-y),f+1,v(0)-v(-y))}}}}render(){const{className:t,title:n,width:e,height:r}=this.props;return(0,R.tZ)("div",{className:`horizon-row ${t}`},(0,R.tZ)("span",{className:"title"},n),(0,R.tZ)("canvas",{ref:t=>{this.canvas=t},width:e,height:r}))}}P.propTypes=T,P.defaultProps=H;const z=P,F={className:o().string,width:o().number,height:o().number,seriesHeight:o().number,data:o().arrayOf(o().shape({key:o().arrayOf(o().string),values:o().arrayOf(o().shape({y:o().number}))})).isRequired,bands:o().number,colors:o().arrayOf(o().string),colorScale:o().string,mode:o().string,offsetX:o().number},U={className:"",width:800,height:600,seriesHeight:20,bands:Math.floor(q.length/2),colors:q,colorScale:"series",mode:"offset",offsetX:0};class j extends r.PureComponent{render(){const{className:t,width:n,height:e,data:r,seriesHeight:a,bands:o,colors:l,colorScale:u,mode:c,offsetX:h}=this.props;let f;if("overall"===u){const t=r.reduce(((t,n)=>t.concat(n.values)),[]);f=i(t,(t=>t.y))}return(0,R.tZ)("div",{className:`superset-legacy-chart-horizon ${t}`,style:{height:e}},r.map((t=>(0,R.tZ)(z,{key:t.key,width:n,height:a,title:(0,s.Z)(t.key).join(", "),data:t.values,bands:o,colors:l,colorScale:u,mode:c,offsetX:h,yDomain:f}))))}}j.propTypes=F,j.defaultProps=U;const L=j}}]);