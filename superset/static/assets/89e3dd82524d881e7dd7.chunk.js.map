{"version":3,"file":"89e3dd82524d881e7dd7.chunk.js","mappings":"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","sources":["webpack://superset/./plugins/legacy-preset-chart-nvd3/src/PropTypes.js","webpack://superset/./plugins/legacy-preset-chart-nvd3/src/NVD3Vis.js","webpack://superset/./plugins/legacy-preset-chart-nvd3/src/ReactNVD3.jsx","webpack://superset/./packages/superset-ui-core/src/chart/components/reactify.tsx","webpack://superset/./packages/superset-ui-core/src/utils/isDefined.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/sort-prop-types */\nimport PropTypes from 'prop-types';\nimport { ANNOTATION_TYPES } from './vendor/superset/AnnotationTypes';\n\nexport const numberOrAutoType = PropTypes.oneOfType([\n  PropTypes.number,\n  PropTypes.oneOf(['auto']),\n]);\n\nexport const stringOrObjectWithLabelType = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.shape({\n    label: PropTypes.string,\n  }),\n]);\n\nexport const rgbObjectType = PropTypes.shape({\n  r: PropTypes.number.isRequired,\n  g: PropTypes.number.isRequired,\n  b: PropTypes.number.isRequired,\n});\n\nexport const numericXYType = PropTypes.shape({\n  x: PropTypes.number,\n  y: PropTypes.number,\n});\n\nexport const categoryAndValueXYType = PropTypes.shape({\n  x: PropTypes.string,\n  y: PropTypes.number,\n});\n\nexport const boxPlotValueType = PropTypes.shape({\n  outliers: PropTypes.arrayOf(PropTypes.number),\n  Q1: PropTypes.number,\n  Q2: PropTypes.number,\n  Q3: PropTypes.number,\n  whisker_high: PropTypes.number,\n  whisker_low: PropTypes.number,\n});\n\nexport const bulletDataType = PropTypes.shape({\n  markerLabels: PropTypes.arrayOf(PropTypes.string),\n  markerLineLabels: PropTypes.arrayOf(PropTypes.string),\n  markerLines: PropTypes.arrayOf(PropTypes.number),\n  markers: PropTypes.arrayOf(PropTypes.number),\n  measures: PropTypes.arrayOf(PropTypes.number),\n  rangeLabels: PropTypes.arrayOf(PropTypes.string),\n  ranges: PropTypes.arrayOf(PropTypes.number),\n});\n\nexport const annotationLayerType = PropTypes.shape({\n  annotationType: PropTypes.oneOf(Object.keys(ANNOTATION_TYPES)),\n  color: PropTypes.string,\n  hideLine: PropTypes.bool,\n  name: PropTypes.string,\n  opacity: PropTypes.string,\n  show: PropTypes.bool,\n  showMarkers: PropTypes.bool,\n  sourceType: PropTypes.string,\n  style: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  width: PropTypes.number,\n});\n","/* eslint-disable react/sort-prop-types */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { kebabCase, throttle } from 'lodash';\nimport d3 from 'd3';\nimport moment from 'moment';\nimport nv from 'nvd3-fork';\nimport PropTypes from 'prop-types';\nimport {\n  CategoricalColorNamespace,\n  evalExpression,\n  getNumberFormatter,\n  getTimeFormatter,\n  isDefined,\n  NumberFormats,\n  smartDateVerboseFormatter,\n  t,\n} from '@superset-ui/core';\n\nimport 'nvd3-fork/build/nv.d3.css';\n\n/* eslint-disable-next-line */\nimport ANNOTATION_TYPES, {\n  applyNativeColumns,\n} from './vendor/superset/AnnotationTypes';\nimport isTruthy from './utils/isTruthy';\nimport {\n  cleanColorInput,\n  computeBarChartWidth,\n  computeYDomain,\n  computeStackedYDomain,\n  drawBarValues,\n  generateBubbleTooltipContent,\n  generateCompareTooltipContent,\n  generateMultiLineTooltipContent,\n  generateRichLineTooltipContent,\n  generateTimePivotTooltip,\n  generateTooltipClassName,\n  generateAreaChartTooltipContent,\n  getMaxLabelSize,\n  getTimeOrNumberFormatter,\n  hideTooltips,\n  tipFactory,\n  tryNumify,\n  removeTooltip,\n  setAxisShowMaxMin,\n  stringifyTimeRange,\n  wrapTooltip,\n} from './utils';\nimport {\n  annotationLayerType,\n  boxPlotValueType,\n  bulletDataType,\n  categoryAndValueXYType,\n  rgbObjectType,\n  numericXYType,\n  numberOrAutoType,\n  stringOrObjectWithLabelType,\n} from './PropTypes';\n\nconst NO_DATA_RENDER_DATA = [\n  { text: 'No data', dy: '-.75em', class: 'header' },\n  {\n    text: 'Adjust filters or check the Datasource.',\n    dy: '.75em',\n    class: 'body',\n  },\n];\n\n// Override the noData render function to make a prettier UX\n// Code adapted from https://github.com/novus/nvd3/blob/master/src/utils.js#L653\nnv.utils.noData = function noData(chart, container) {\n  const opt = chart.options();\n  const margin = opt.margin();\n  const height = nv.utils.availableHeight(null, container, margin);\n  const width = nv.utils.availableWidth(null, container, margin);\n  const x = margin.left + width / 2;\n  const y = margin.top + height / 2;\n\n  // Remove any previously created chart components\n  container.selectAll('g').remove();\n\n  const noDataText = container\n    .selectAll('.nv-noData')\n    .data(NO_DATA_RENDER_DATA);\n\n  noDataText\n    .enter()\n    .append('text')\n    .attr('class', d => `nvd3 nv-noData ${d.class}`)\n    .attr('dy', d => d.dy)\n    .style('text-anchor', 'middle');\n\n  noDataText\n    .attr('x', x)\n    .attr('y', y)\n    .text(d => d.text);\n};\n\nconst { getColor, getScale } = CategoricalColorNamespace;\n\n// Limit on how large axes margins can grow as the chart window is resized\nconst MAX_MARGIN_PAD = 30;\nconst MIN_HEIGHT_FOR_BRUSH = 480;\nconst MAX_NO_CHARACTERS_IN_LABEL = 40;\n\nconst BREAKPOINTS = {\n  small: 340,\n};\n\nconst TIMESERIES_VIZ_TYPES = [\n  'line',\n  'dual_line',\n  'line_multi',\n  'area',\n  'compare',\n  'bar',\n  'time_pivot',\n];\n\nconst CHART_ID_PREFIX = 'chart-id-';\n\nconst propTypes = {\n  data: PropTypes.oneOfType([\n    PropTypes.arrayOf(\n      PropTypes.oneOfType([\n        // pie\n        categoryAndValueXYType,\n        // dist-bar\n        PropTypes.shape({\n          key: PropTypes.string,\n          values: PropTypes.arrayOf(categoryAndValueXYType),\n        }),\n        // area, line, compare, bar\n        PropTypes.shape({\n          key: PropTypes.arrayOf(PropTypes.string),\n          values: PropTypes.arrayOf(numericXYType),\n        }),\n        // dual-line\n        PropTypes.shape({\n          classed: PropTypes.string,\n          key: PropTypes.string,\n          type: PropTypes.string,\n          values: PropTypes.arrayOf(numericXYType),\n          yAxis: PropTypes.number,\n        }),\n        // box-plot\n        PropTypes.shape({\n          label: PropTypes.string,\n          values: PropTypes.arrayOf(boxPlotValueType),\n        }),\n        // bubble\n        PropTypes.shape({\n          key: PropTypes.string,\n          values: PropTypes.arrayOf(PropTypes.object),\n        }),\n      ]),\n    ),\n    // bullet\n    bulletDataType,\n  ]),\n  width: PropTypes.number,\n  height: PropTypes.number,\n  annotationData: PropTypes.object,\n  annotationLayers: PropTypes.arrayOf(annotationLayerType),\n  bottomMargin: numberOrAutoType,\n  colorScheme: PropTypes.string,\n  comparisonType: PropTypes.string,\n  contribution: PropTypes.bool,\n  leftMargin: numberOrAutoType,\n  onError: PropTypes.func,\n  showLegend: PropTypes.bool,\n  showMarkers: PropTypes.bool,\n  useRichTooltip: PropTypes.bool,\n  vizType: PropTypes.oneOf([\n    'area',\n    'bar',\n    'box_plot',\n    'bubble',\n    'bullet',\n    'compare',\n    'column',\n    'dist_bar',\n    'line',\n    'line_multi',\n    'time_pivot',\n    'pie',\n    'dual_line',\n  ]),\n  xAxisFormat: PropTypes.string,\n  numberFormat: PropTypes.string,\n  xAxisLabel: PropTypes.string,\n  xAxisShowMinMax: PropTypes.bool,\n  xIsLogScale: PropTypes.bool,\n  xTicksLayout: PropTypes.oneOf(['auto', 'staggered', '45°']),\n  yAxisFormat: PropTypes.string,\n  yAxisBounds: PropTypes.arrayOf(PropTypes.number),\n  yAxisLabel: PropTypes.string,\n  yAxisShowMinMax: PropTypes.bool,\n  yIsLogScale: PropTypes.bool,\n  // 'dist-bar' only\n  orderBars: PropTypes.bool,\n  // 'bar' or 'dist-bar'\n  isBarStacked: PropTypes.bool,\n  showBarValue: PropTypes.bool,\n  // 'bar', 'dist-bar' or 'column'\n  reduceXTicks: PropTypes.bool,\n  // 'bar', 'dist-bar' or 'area'\n  showControls: PropTypes.bool,\n  // 'line' only\n  showBrush: PropTypes.oneOf([true, 'yes', false, 'no', 'auto']),\n  onBrushEnd: PropTypes.func,\n  // 'line-multi' or 'dual-line'\n  yAxis2Format: PropTypes.string,\n  // 'line', 'time-pivot', 'dual-line' or 'line-multi'\n  lineInterpolation: PropTypes.string,\n  // 'pie' only\n  isDonut: PropTypes.bool,\n  isPieLabelOutside: PropTypes.bool,\n  pieLabelType: PropTypes.oneOf([\n    'key',\n    'value',\n    'percent',\n    'key_value',\n    'key_percent',\n    'key_value_percent',\n  ]),\n  showLabels: PropTypes.bool,\n  // 'area' only\n  areaStackedStyle: PropTypes.string,\n  // 'bubble' only\n  entity: PropTypes.string,\n  maxBubbleSize: PropTypes.number,\n  xField: stringOrObjectWithLabelType,\n  yField: stringOrObjectWithLabelType,\n  sizeField: stringOrObjectWithLabelType,\n  // time-pivot only\n  baseColor: rgbObjectType,\n};\n\nconst NOOP = () => {};\nconst formatter = getNumberFormatter();\n\nfunction nvd3Vis(element, props) {\n  const {\n    data,\n    width: maxWidth,\n    height: maxHeight,\n    annotationData,\n    annotationLayers = [],\n    areaStackedStyle,\n    baseColor,\n    bottomMargin,\n    colorScheme,\n    comparisonType,\n    contribution,\n    entity,\n    isBarStacked,\n    isDonut,\n    isPieLabelOutside,\n    leftMargin,\n    lineInterpolation = 'linear',\n    markerLabels,\n    markerLines,\n    markerLineLabels,\n    markers,\n    maxBubbleSize,\n    onBrushEnd = NOOP,\n    onError = NOOP,\n    orderBars,\n    pieLabelType,\n    rangeLabels,\n    ranges,\n    reduceXTicks = false,\n    showBarValue,\n    showBrush,\n    showControls,\n    showLabels,\n    showLegend,\n    showMarkers,\n    sizeField,\n    useRichTooltip,\n    vizType,\n    xAxisFormat,\n    numberFormat,\n    xAxisLabel,\n    xAxisShowMinMax = false,\n    xField,\n    xIsLogScale,\n    xTicksLayout,\n    yAxisFormat,\n    yAxis2Format,\n    yAxisBounds,\n    yAxis2Bounds,\n    yAxisLabel,\n    yAxisShowMinMax = false,\n    yAxis2ShowMinMax = false,\n    yField,\n    yIsLogScale,\n    sliceId,\n  } = props;\n\n  const isExplore = document.querySelector('#explorer-container') !== null;\n  const container = element;\n  container.innerHTML = '';\n  const activeAnnotationLayers = annotationLayers.filter(layer => layer.show);\n\n  // Search for the chart id in a parent div from the nvd3 chart\n  let chartContainer = container;\n  let chartId = null;\n  while (chartContainer.parentElement) {\n    if (chartContainer.parentElement.id.startsWith(CHART_ID_PREFIX)) {\n      chartId = chartContainer.parentElement.id;\n      break;\n    }\n\n    chartContainer = chartContainer.parentElement;\n  }\n\n  let chart;\n  let width = maxWidth;\n  let colorKey = 'key';\n\n  container.style.width = `${maxWidth}px`;\n  container.style.height = `${maxHeight}px`;\n\n  function isVizTypes(types) {\n    return types.includes(vizType);\n  }\n\n  const drawGraph = function drawGraph() {\n    const d3Element = d3.select(element);\n    d3Element.classed('superset-legacy-chart-nvd3', true);\n    d3Element.classed(`superset-legacy-chart-nvd3-${kebabCase(vizType)}`, true);\n    let svg = d3Element.select('svg');\n    if (svg.empty()) {\n      svg = d3Element.append('svg');\n    }\n    const height = vizType === 'bullet' ? Math.min(maxHeight, 50) : maxHeight;\n    const isTimeSeries = isVizTypes(TIMESERIES_VIZ_TYPES);\n\n    // Handling xAxis ticks settings\n    const staggerLabels = xTicksLayout === 'staggered';\n    const xLabelRotation =\n      (xTicksLayout === 'auto' && isVizTypes(['column', 'dist_bar'])) ||\n      xTicksLayout === '45°'\n        ? 45\n        : 0;\n    if (xLabelRotation === 45 && isTruthy(showBrush)) {\n      onError(\n        t('You cannot use 45° tick layout along with the time range filter'),\n      );\n\n      return null;\n    }\n\n    const canShowBrush =\n      isTruthy(showBrush) ||\n      (showBrush === 'auto' &&\n        maxHeight >= MIN_HEIGHT_FOR_BRUSH &&\n        xTicksLayout !== '45°');\n    const numberFormatter = getNumberFormatter(numberFormat);\n\n    switch (vizType) {\n      case 'line':\n        if (canShowBrush) {\n          chart = nv.models.lineWithFocusChart();\n          if (staggerLabels) {\n            // Give a bit more room to focus area if X axis ticks are staggered\n            chart.focus.margin({ bottom: 40 });\n            chart.focusHeight(80);\n          }\n          chart.focus.xScale(d3.time.scale.utc());\n        } else {\n          chart = nv.models.lineChart();\n        }\n        chart.xScale(d3.time.scale.utc());\n        chart.interpolate(lineInterpolation);\n        chart.clipEdge(false);\n        break;\n\n      case 'time_pivot':\n        chart = nv.models.lineChart();\n        chart.xScale(d3.time.scale.utc());\n        chart.interpolate(lineInterpolation);\n        break;\n\n      case 'dual_line':\n      case 'line_multi':\n        chart = nv.models.multiChart();\n        chart.interpolate(lineInterpolation);\n        chart.xScale(d3.time.scale.utc());\n        break;\n\n      case 'bar':\n        chart = nv.models\n          .multiBarChart()\n          .showControls(showControls)\n          .groupSpacing(0.1);\n\n        if (!reduceXTicks) {\n          width = computeBarChartWidth(data, isBarStacked, maxWidth);\n        }\n        chart.width(width);\n        chart.xAxis.showMaxMin(false);\n        chart.stacked(isBarStacked);\n        break;\n\n      case 'dist_bar':\n        chart = nv.models\n          .multiBarChart()\n          .showControls(showControls)\n          .reduceXTicks(reduceXTicks)\n          .groupSpacing(0.1); // Distance between each group of bars.\n\n        chart.xAxis.showMaxMin(false);\n\n        chart.stacked(isBarStacked);\n        if (orderBars) {\n          data.forEach(d => {\n            const newValues = [...d.values]; // need to copy values to avoid redux store changed.\n            // eslint-disable-next-line no-param-reassign\n            d.values = newValues.sort((a, b) =>\n              tryNumify(a.x) < tryNumify(b.x) ? -1 : 1,\n            );\n          });\n        }\n        if (!reduceXTicks) {\n          width = computeBarChartWidth(data, isBarStacked, maxWidth);\n        }\n        chart.width(width);\n        break;\n\n      case 'pie':\n        chart = nv.models.pieChart();\n        colorKey = 'x';\n        chart.valueFormat(numberFormatter);\n        if (isDonut) {\n          chart.donut(true);\n        }\n        chart.showLabels(showLabels);\n        chart.labelsOutside(isPieLabelOutside);\n        // Configure the minimum slice size for labels to show up\n        chart.labelThreshold(0.05);\n        chart.cornerRadius(true);\n\n        if (['key', 'value', 'percent'].includes(pieLabelType)) {\n          chart.labelType(pieLabelType);\n        } else if (pieLabelType === 'key_value') {\n          chart.labelType(d => `${d.data.x}: ${numberFormatter(d.data.y)}`);\n        } else {\n          // pieLabelType in ['key_percent', 'key_value_percent']\n          const total = d3.sum(data, d => d.y);\n          const percentFormatter = getNumberFormatter(\n            NumberFormats.PERCENT_2_POINT,\n          );\n          if (pieLabelType === 'key_percent') {\n            chart.tooltip.valueFormatter(d => percentFormatter(d));\n            chart.labelType(\n              d => `${d.data.x}: ${percentFormatter(d.data.y / total)}`,\n            );\n          } else {\n            // pieLabelType === 'key_value_percent'\n            chart.tooltip.valueFormatter(\n              d => `${numberFormatter(d)} (${percentFormatter(d / total)})`,\n            );\n            chart.labelType(\n              d =>\n                `${d.data.x}: ${numberFormatter(d.data.y)} (${percentFormatter(\n                  d.data.y / total,\n                )})`,\n            );\n          }\n        }\n        // Pie chart does not need top margin\n        chart.margin({ top: 0 });\n        break;\n\n      case 'column':\n        chart = nv.models.multiBarChart().reduceXTicks(false);\n        break;\n\n      case 'compare':\n        chart = nv.models.cumulativeLineChart();\n        chart.xScale(d3.time.scale.utc());\n        chart.useInteractiveGuideline(true);\n        chart.xAxis.showMaxMin(false);\n        break;\n\n      case 'bubble':\n        chart = nv.models.scatterChart();\n        chart.showDistX(false);\n        chart.showDistY(false);\n        chart.tooltip.contentGenerator(d =>\n          generateBubbleTooltipContent({\n            point: d.point,\n            entity,\n            xField,\n            yField,\n            sizeField,\n            xFormatter: getTimeOrNumberFormatter(xAxisFormat),\n            yFormatter: getTimeOrNumberFormatter(yAxisFormat),\n            sizeFormatter: formatter,\n          }),\n        );\n        chart.pointRange([5, maxBubbleSize ** 2]);\n        chart.pointDomain([\n          0,\n          d3.max(data, d => d3.max(d.values, v => v.size)),\n        ]);\n        break;\n\n      case 'area':\n        chart = nv.models.stackedAreaChart();\n        chart.showControls(showControls);\n        chart.style(areaStackedStyle);\n        chart.xScale(d3.time.scale.utc());\n        break;\n\n      case 'box_plot':\n        colorKey = 'label';\n        chart = nv.models.boxPlotChart();\n        chart.x(d => d.label);\n        chart.maxBoxWidth(75); // prevent boxes from being incredibly wide\n        break;\n\n      case 'bullet':\n        chart = nv.models.bulletChart();\n        data.rangeLabels = rangeLabels;\n        data.ranges = ranges;\n        data.markerLabels = markerLabels;\n        data.markerLines = markerLines;\n        data.markerLineLabels = markerLineLabels;\n        data.markers = markers;\n        break;\n\n      default:\n        throw new Error(`Unrecognized visualization for nvd3${vizType}`);\n    }\n    // Assuming the container has padding already other than for top margin\n    chart.margin({ left: 0, bottom: 0 });\n\n    if (showBarValue) {\n      drawBarValues(svg, data, isBarStacked, yAxisFormat);\n      chart.dispatch.on('stateChange.drawBarValues', () => {\n        drawBarValues(svg, data, isBarStacked, yAxisFormat);\n      });\n    }\n\n    if (canShowBrush && onBrushEnd !== NOOP) {\n      if (chart.focus) {\n        chart.focus.dispatch.on('brush', event => {\n          const timeRange = stringifyTimeRange(event.extent);\n          if (timeRange) {\n            event.brush.on('brushend', () => {\n              onBrushEnd(timeRange);\n            });\n          }\n        });\n      }\n    }\n\n    if (chart.xAxis && chart.xAxis.staggerLabels) {\n      chart.xAxis.staggerLabels(staggerLabels);\n    }\n    if (chart.xAxis && chart.xAxis.rotateLabels) {\n      chart.xAxis.rotateLabels(xLabelRotation);\n    }\n    if (chart.x2Axis && chart.x2Axis.staggerLabels) {\n      chart.x2Axis.staggerLabels(staggerLabels);\n    }\n    if (chart.x2Axis && chart.x2Axis.rotateLabels) {\n      chart.x2Axis.rotateLabels(xLabelRotation);\n    }\n\n    if ('showLegend' in chart && typeof showLegend !== 'undefined') {\n      if (width < BREAKPOINTS.small && vizType !== 'pie') {\n        chart.showLegend(false);\n      } else {\n        chart.showLegend(showLegend);\n      }\n    }\n\n    if (yIsLogScale) {\n      chart.yScale(d3.scale.log());\n    }\n    if (xIsLogScale) {\n      chart.xScale(d3.scale.log());\n    }\n\n    let xAxisFormatter;\n    if (isTimeSeries) {\n      xAxisFormatter = getTimeFormatter(xAxisFormat);\n      // In tooltips, always use the verbose time format\n      chart.interactiveLayer.tooltip.headerFormatter(smartDateVerboseFormatter);\n    } else {\n      xAxisFormatter = getTimeOrNumberFormatter(xAxisFormat);\n    }\n    if (chart.x2Axis && chart.x2Axis.tickFormat) {\n      chart.x2Axis.tickFormat(xAxisFormatter);\n    }\n    if (chart.xAxis && chart.xAxis.tickFormat) {\n      const isXAxisString = isVizTypes(['dist_bar', 'box_plot']);\n      if (isXAxisString) {\n        chart.xAxis.tickFormat(d =>\n          d.length > MAX_NO_CHARACTERS_IN_LABEL\n            ? `${d.slice(0, Math.max(0, MAX_NO_CHARACTERS_IN_LABEL))}…`\n            : d,\n        );\n      } else {\n        chart.xAxis.tickFormat(xAxisFormatter);\n      }\n    }\n\n    let yAxisFormatter = getTimeOrNumberFormatter(yAxisFormat);\n    if (chart.yAxis && chart.yAxis.tickFormat) {\n      if (\n        (contribution || comparisonType === 'percentage') &&\n        (!yAxisFormat ||\n          yAxisFormat === NumberFormats.SMART_NUMBER ||\n          yAxisFormat === NumberFormats.SMART_NUMBER_SIGNED)\n      ) {\n        // When computing a \"Percentage\" or \"Contribution\" selected,\n        // force a percentage format if no custom formatting set\n        yAxisFormatter = getNumberFormatter(NumberFormats.PERCENT_1_POINT);\n      }\n      chart.yAxis.tickFormat(yAxisFormatter);\n    }\n    if (chart.y2Axis && chart.y2Axis.tickFormat) {\n      chart.y2Axis.tickFormat(yAxisFormatter);\n    }\n\n    if (chart.yAxis) {\n      chart.yAxis.ticks(5);\n    }\n    if (chart.y2Axis) {\n      chart.y2Axis.ticks(5);\n    }\n\n    // Set showMaxMin for all axis\n    setAxisShowMaxMin(chart.xAxis, xAxisShowMinMax);\n    setAxisShowMaxMin(chart.x2Axis, xAxisShowMinMax);\n    setAxisShowMaxMin(chart.yAxis, yAxisShowMinMax);\n    setAxisShowMaxMin(chart.y2Axis, yAxis2ShowMinMax || yAxisShowMinMax);\n\n    if (vizType === 'time_pivot') {\n      if (baseColor) {\n        const { r, g, b } = baseColor;\n        chart.color(d => {\n          const alpha = d.rank > 0 ? d.perc * 0.5 : 1;\n\n          return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n        });\n      }\n\n      chart.useInteractiveGuideline(true);\n      chart.interactiveLayer.tooltip.contentGenerator(d =>\n        generateTimePivotTooltip(d, xAxisFormatter, yAxisFormatter),\n      );\n    } else if (vizType !== 'bullet') {\n      const colorFn = getScale(colorScheme);\n      chart.color(\n        d => d.color || colorFn(cleanColorInput(d[colorKey]), sliceId),\n      );\n    }\n\n    if (isVizTypes(['line', 'area', 'bar', 'dist_bar']) && useRichTooltip) {\n      chart.useInteractiveGuideline(true);\n      if (vizType === 'line' || vizType === 'bar') {\n        chart.interactiveLayer.tooltip.contentGenerator(d =>\n          generateRichLineTooltipContent(\n            d,\n            smartDateVerboseFormatter,\n            yAxisFormatter,\n          ),\n        );\n      } else if (vizType === 'dist_bar') {\n        chart.interactiveLayer.tooltip.contentGenerator(d =>\n          generateCompareTooltipContent(d, yAxisFormatter),\n        );\n      } else {\n        // area chart\n        chart.interactiveLayer.tooltip.contentGenerator(d =>\n          generateAreaChartTooltipContent(\n            d,\n            smartDateVerboseFormatter,\n            yAxisFormatter,\n            chart,\n          ),\n        );\n      }\n    }\n\n    if (isVizTypes(['compare'])) {\n      chart.interactiveLayer.tooltip.contentGenerator(d =>\n        generateCompareTooltipContent(d, yAxisFormatter),\n      );\n    }\n\n    if (isVizTypes(['dual_line', 'line_multi'])) {\n      const yAxisFormatter1 = getNumberFormatter(yAxisFormat);\n      const yAxisFormatter2 = getNumberFormatter(yAxis2Format);\n      chart.yAxis1.tickFormat(yAxisFormatter1);\n      chart.yAxis2.tickFormat(yAxisFormatter2);\n      const yAxisFormatters = data.map(datum =>\n        datum.yAxis === 1 ? yAxisFormatter1 : yAxisFormatter2,\n      );\n      chart.useInteractiveGuideline(true);\n      chart.interactiveLayer.tooltip.contentGenerator(d =>\n        generateMultiLineTooltipContent(d, xAxisFormatter, yAxisFormatters),\n      );\n    }\n    // This is needed for correct chart dimensions if a chart is rendered in a hidden container\n    chart.width(width);\n    chart.height(height);\n\n    svg\n      .datum(data)\n      .transition()\n      .duration(500)\n      .attr('height', height)\n      .attr('width', width)\n      .call(chart);\n\n    // For log scale, only show 1, 10, 100, 1000, ...\n    if (yIsLogScale) {\n      chart.yAxis.tickFormat(d =>\n        d !== 0 && Math.log10(d) % 1 === 0 ? yAxisFormatter(d) : '',\n      );\n    }\n\n    if (xLabelRotation > 0) {\n      // shift labels to the left so they look better\n      const xTicks = svg.select('.nv-x.nv-axis > g').selectAll('g');\n      xTicks.selectAll('text').attr('dx', -6.5);\n    }\n\n    const applyYAxisBounds = () => {\n      if (\n        chart.yDomain &&\n        Array.isArray(yAxisBounds) &&\n        yAxisBounds.length === 2\n      ) {\n        const [customMin, customMax] = yAxisBounds;\n        const hasCustomMin = isDefined(customMin) && !Number.isNaN(customMin);\n        const hasCustomMax = isDefined(customMax) && !Number.isNaN(customMax);\n\n        if (\n          (hasCustomMin || hasCustomMax) &&\n          vizType === 'area' &&\n          chart.style() === 'expand'\n        ) {\n          // Because there are custom bounds, we need to override them back to 0%-100% since this\n          // is an expanded area chart\n          chart.yDomain([0, 1]);\n        } else if (\n          (hasCustomMin || hasCustomMax) &&\n          vizType === 'area' &&\n          chart.style() === 'stream'\n        ) {\n          // Because there are custom bounds, we need to override them back to the domain of the\n          // data since this is a stream area chart\n          chart.yDomain(computeStackedYDomain(data));\n        } else if (hasCustomMin && hasCustomMax) {\n          // Override the y domain if there's both a custom min and max\n          chart.yDomain([customMin, customMax]);\n          chart.clipEdge(true);\n        } else if (hasCustomMin || hasCustomMax) {\n          // Only one of the bounds has been set, so we need to manually calculate the other one\n          let [trueMin, trueMax] = [0, 1];\n\n          // These viz types can be stacked\n          // They correspond to the nvd3 stackedAreaChart and multiBarChart\n          if (\n            vizType === 'area' ||\n            (isVizTypes(['bar', 'dist_bar']) && chart.stacked())\n          ) {\n            // This is a stacked area chart or a stacked bar chart\n            [trueMin, trueMax] = computeStackedYDomain(data);\n          } else {\n            [trueMin, trueMax] = computeYDomain(data);\n          }\n\n          const min = hasCustomMin ? customMin : trueMin;\n          const max = hasCustomMax ? customMax : trueMax;\n          chart.yDomain([min, max]);\n          chart.clipEdge(true);\n        }\n      }\n    };\n    applyYAxisBounds();\n\n    // Also reapply on each state change to account for enabled/disabled series\n    if (chart.dispatch && chart.dispatch.stateChange) {\n      chart.dispatch.on('stateChange.applyYAxisBounds', applyYAxisBounds);\n    }\n\n    // align yAxis1 and yAxis2 ticks\n    if (isVizTypes(['dual_line', 'line_multi'])) {\n      const count = chart.yAxis1.ticks();\n      const ticks1 = chart.yAxis1\n        .scale()\n        .domain(chart.yAxis1.domain())\n        .nice(count)\n        .ticks(count);\n      const ticks2 = chart.yAxis2\n        .scale()\n        .domain(chart.yAxis2.domain())\n        .nice(count)\n        .ticks(count);\n\n      // match number of ticks in both axes\n      const difference = ticks1.length - ticks2.length;\n      if (ticks1.length > 0 && ticks2.length > 0 && difference !== 0) {\n        const smallest = difference < 0 ? ticks1 : ticks2;\n        const delta = smallest[1] - smallest[0];\n        for (let i = 0; i < Math.abs(difference); i += 1) {\n          if (i % 2 === 0) {\n            smallest.unshift(smallest[0] - delta);\n          } else {\n            smallest.push(smallest[smallest.length - 1] + delta);\n          }\n        }\n        chart.yDomain1([ticks1[0], ticks1[ticks1.length - 1]]);\n        chart.yDomain2([ticks2[0], ticks2[ticks2.length - 1]]);\n        chart.yAxis1.tickValues(ticks1);\n        chart.yAxis2.tickValues(ticks2);\n      }\n\n      chart.yDomain1([\n        yAxisBounds[0] || ticks1[0],\n        yAxisBounds[1] || ticks1[ticks1.length - 1],\n      ]);\n      chart.yDomain2([\n        yAxis2Bounds[0] || ticks2[0],\n        yAxis2Bounds[1] || ticks2[ticks2.length - 1],\n      ]);\n    }\n\n    if (showMarkers) {\n      svg\n        .selectAll('.nv-point')\n        .style('stroke-opacity', 1)\n        .style('fill-opacity', 1);\n\n      // redo on legend toggle; nvd3 calls the callback *before* the line is\n      // drawn, so we need to add a small delay here\n      chart.dispatch.on('stateChange.showMarkers', () => {\n        setTimeout(() => {\n          svg\n            .selectAll('.nv-point')\n            .style('stroke-opacity', 1)\n            .style('fill-opacity', 1);\n        }, 10);\n      });\n    }\n\n    if (chart.yAxis !== undefined || chart.yAxis2 !== undefined) {\n      // Hack to adjust y axis left margin to accommodate long numbers\n      const marginPad = Math.ceil(\n        Math.min(maxWidth * (isExplore ? 0.01 : 0.03), MAX_MARGIN_PAD),\n      );\n      // Hack to adjust margins to accommodate long axis tick labels.\n      // - has to be done only after the chart has been rendered once\n      // - measure the width or height of the labels\n      // ---- (x axis labels are rotated 45 degrees so we use height),\n      // - adjust margins based on these measures and render again\n      const margins = chart.margin();\n      if (chart.xAxis) {\n        margins.bottom = 28;\n      }\n      const maxYAxisLabelWidth = getMaxLabelSize(\n        svg,\n        chart.yAxis2 ? 'nv-y1' : 'nv-y',\n      );\n      const maxXAxisLabelHeight = getMaxLabelSize(svg, 'nv-x');\n      margins.left = maxYAxisLabelWidth + marginPad;\n\n      if (yAxisLabel && yAxisLabel !== '') {\n        margins.left += 25;\n      }\n      if (showBarValue) {\n        // Add more margin to avoid label colliding with legend.\n        margins.top += 24;\n      }\n      if (xAxisShowMinMax) {\n        // If x bounds are shown, we need a right margin\n        margins.right = Math.max(20, maxXAxisLabelHeight / 2) + marginPad;\n      }\n      if (xLabelRotation === 45) {\n        margins.bottom =\n          maxXAxisLabelHeight * Math.sin((Math.PI * xLabelRotation) / 180) +\n          marginPad +\n          30;\n        margins.right =\n          maxXAxisLabelHeight * Math.cos((Math.PI * xLabelRotation) / 180) +\n          marginPad;\n      } else if (staggerLabels) {\n        margins.bottom = 40;\n      }\n\n      if (isVizTypes(['dual_line', 'line_multi'])) {\n        const maxYAxis2LabelWidth = getMaxLabelSize(svg, 'nv-y2');\n        margins.right = maxYAxis2LabelWidth + marginPad;\n      }\n      if (bottomMargin && bottomMargin !== 'auto') {\n        margins.bottom = parseInt(bottomMargin, 10);\n      }\n      if (leftMargin && leftMargin !== 'auto') {\n        margins.left = leftMargin;\n      }\n\n      if (xAxisLabel && xAxisLabel !== '' && chart.xAxis) {\n        margins.bottom += 25;\n        let distance = 0;\n        if (margins.bottom && !Number.isNaN(margins.bottom)) {\n          distance = margins.bottom - 45;\n        }\n        // nvd3 bug axisLabelDistance is disregarded on xAxis\n        // https://github.com/krispo/angular-nvd3/issues/90\n        chart.xAxis.axisLabel(xAxisLabel).axisLabelDistance(distance);\n      }\n\n      if (yAxisLabel && yAxisLabel !== '' && chart.yAxis) {\n        let distance = 0;\n        if (margins.left && !Number.isNaN(margins.left)) {\n          distance = margins.left - 70;\n        }\n        chart.yAxis.axisLabel(yAxisLabel).axisLabelDistance(distance);\n      }\n      if (isTimeSeries && annotationData && activeAnnotationLayers.length > 0) {\n        // Time series annotations add additional data\n        const timeSeriesAnnotations = activeAnnotationLayers\n          .filter(\n            layer => layer.annotationType === ANNOTATION_TYPES.TIME_SERIES,\n          )\n          .reduce(\n            (bushel, a) =>\n              bushel.concat(\n                (annotationData[a.name] || []).map(series => {\n                  if (!series) {\n                    return {};\n                  }\n                  const key = Array.isArray(series.key)\n                    ? `${a.name}, ${series.key.join(', ')}`\n                    : `${a.name}, ${series.key}`;\n\n                  return {\n                    ...series,\n                    key,\n                    color: a.color,\n                    strokeWidth: a.width,\n                    classed: `${a.opacity} ${a.style} nv-timeseries-annotation-layer showMarkers${a.showMarkers} hideLine${a.hideLine}`,\n                  };\n                }),\n              ),\n            [],\n          );\n        data.push(...timeSeriesAnnotations);\n      }\n\n      // Uniquely identify tooltips based on chartId so this chart instance only\n      // controls its own tooltips\n      if (chartId) {\n        if (chart && chart.interactiveLayer && chart.interactiveLayer.tooltip) {\n          chart.interactiveLayer.tooltip.classes([\n            generateTooltipClassName(chartId),\n          ]);\n        }\n\n        if (chart && chart.tooltip) {\n          chart.tooltip.classes([generateTooltipClassName(chartId)]);\n        }\n      }\n\n      // render chart\n      chart.margin(margins);\n      svg\n        .datum(data)\n        .transition()\n        .duration(500)\n        .attr('width', width)\n        .attr('height', height)\n        .call(chart);\n\n      // On scroll, hide (not remove) tooltips so they can reappear on hover.\n      // Throttle to only 4x/second.\n      window.addEventListener(\n        'scroll',\n        throttle(() => hideTooltips(false), 250),\n      );\n\n      // The below code should be run AFTER rendering because chart is updated in call()\n      if (isTimeSeries && activeAnnotationLayers.length > 0) {\n        // Formula annotations\n        const formulas = activeAnnotationLayers.filter(\n          a => a.annotationType === ANNOTATION_TYPES.FORMULA,\n        );\n\n        let xMax;\n        let xMin;\n        let xScale;\n        if (vizType === 'bar') {\n          xMin = d3.min(data[0].values, d => d.x);\n          xMax = d3.max(data[0].values, d => d.x);\n          xScale = d3.scale\n            .quantile()\n            .domain([xMin, xMax])\n            .range(chart.xAxis.range());\n        } else {\n          xMin = chart.xAxis.scale().domain()[0].valueOf();\n          xMax = chart.xAxis.scale().domain()[1].valueOf();\n          if (chart.xScale) {\n            xScale = chart.xScale();\n          } else if (chart.xAxis.scale) {\n            xScale = chart.xAxis.scale();\n          } else {\n            xScale = d3.scale.linear();\n          }\n        }\n        if (xScale && xScale.clamp) {\n          xScale.clamp(true);\n        }\n\n        if (formulas.length > 0) {\n          const xValues = [];\n          if (vizType === 'bar') {\n            // For bar-charts we want one data point evaluated for every\n            // data point that will be displayed.\n            const distinct = data.reduce((xVals, d) => {\n              d.values.forEach(x => xVals.add(x.x));\n\n              return xVals;\n            }, new Set());\n            xValues.push(...distinct.values());\n            xValues.sort();\n          } else {\n            // For every other time visualization it should be ok, to have a\n            // data points in even intervals.\n            let period = Math.min(\n              ...data.map(d =>\n                Math.min(\n                  ...d.values.slice(1).map((v, i) => v.x - d.values[i].x),\n                ),\n              ),\n            );\n            const dataPoints = (xMax - xMin) / (period || 1);\n            // make sure that there are enough data points and not too many\n            period = dataPoints < 100 ? (xMax - xMin) / 100 : period;\n            period = dataPoints > 500 ? (xMax - xMin) / 500 : period;\n            xValues.push(xMin);\n            for (let x = xMin; x < xMax; x += period) {\n              xValues.push(x);\n            }\n            xValues.push(xMax);\n          }\n          const formulaData = formulas.map(fo => {\n            const { value: expression } = fo;\n            return {\n              key: fo.name,\n              values: xValues.map(x => ({\n                x,\n                y: evalExpression(expression, x),\n              })),\n              color: fo.color,\n              strokeWidth: fo.width,\n              classed: `${fo.opacity} ${fo.style}`,\n            };\n          });\n          data.push(...formulaData);\n        }\n        const xAxis = chart.xAxis1 ? chart.xAxis1 : chart.xAxis;\n        const yAxis = chart.yAxis1 ? chart.yAxis1 : chart.yAxis;\n        const chartWidth = xAxis.scale().range()[1];\n        const annotationHeight = yAxis.scale().range()[0];\n\n        if (annotationData) {\n          // Event annotations\n          activeAnnotationLayers\n            .filter(\n              x =>\n                x.annotationType === ANNOTATION_TYPES.EVENT &&\n                annotationData &&\n                annotationData[x.name],\n            )\n            .forEach((config, index) => {\n              const e = applyNativeColumns(config);\n              // Add event annotation layer\n              const annotations = d3\n                .select(element)\n                .select('.nv-wrap')\n                .append('g')\n                .attr('class', `nv-event-annotation-layer-${index}`);\n              const aColor =\n                e.color || getColor(cleanColorInput(e.name), colorScheme);\n\n              const tip = tipFactory({\n                ...e,\n                annotationTipClass: `arrow-down nv-event-annotation-layer-${config.sourceType}`,\n              });\n              const records = (annotationData[e.name].records || [])\n                .map(r => {\n                  const timeValue = new Date(moment.utc(r[e.timeColumn]));\n\n                  return {\n                    ...r,\n                    [e.timeColumn]: timeValue,\n                  };\n                })\n                .filter(\n                  record =>\n                    !Number.isNaN(record[e.timeColumn].getMilliseconds()),\n                );\n\n              if (records.length > 0) {\n                annotations\n                  .selectAll('line')\n                  .data(records)\n                  .enter()\n                  .append('line')\n                  .attr({\n                    x1: d => xScale(new Date(d[e.timeColumn])),\n                    y1: 0,\n                    x2: d => xScale(new Date(d[e.timeColumn])),\n                    y2: annotationHeight,\n                  })\n                  .attr('class', `${e.opacity} ${e.style}`)\n                  .style('stroke', aColor)\n                  .style('stroke-width', e.width)\n                  .on('mouseover', tip.show)\n                  .on('mouseout', tip.hide)\n                  .call(tip);\n              }\n\n              // update annotation positions on brush event\n              if (chart.focus) {\n                chart.focus.dispatch.on('onBrush.event-annotation', () => {\n                  annotations\n                    .selectAll('line')\n                    .data(records)\n                    .attr({\n                      x1: d => xScale(new Date(d[e.timeColumn])),\n                      y1: 0,\n                      x2: d => xScale(new Date(d[e.timeColumn])),\n                      y2: annotationHeight,\n                      opacity: d => {\n                        const x = xScale(new Date(d[e.timeColumn]));\n\n                        return x > 0 && x < chartWidth ? 1 : 0;\n                      },\n                    });\n                });\n              }\n            });\n\n          // Interval annotations\n          activeAnnotationLayers\n            .filter(\n              x =>\n                x.annotationType === ANNOTATION_TYPES.INTERVAL &&\n                annotationData &&\n                annotationData[x.name],\n            )\n            .forEach((config, index) => {\n              const e = applyNativeColumns(config);\n              // Add interval annotation layer\n              const annotations = d3\n                .select(element)\n                .select('.nv-wrap')\n                .append('g')\n                .attr('class', `nv-interval-annotation-layer-${index}`);\n\n              const aColor =\n                e.color || getColor(cleanColorInput(e.name), colorScheme);\n              const tip = tipFactory(e);\n\n              const records = (annotationData[e.name].records || [])\n                .map(r => {\n                  const timeValue = new Date(moment.utc(r[e.timeColumn]));\n                  const intervalEndValue = new Date(\n                    moment.utc(r[e.intervalEndColumn]),\n                  );\n\n                  return {\n                    ...r,\n                    [e.timeColumn]: timeValue,\n                    [e.intervalEndColumn]: intervalEndValue,\n                  };\n                })\n                .filter(\n                  record =>\n                    !Number.isNaN(record[e.timeColumn].getMilliseconds()) &&\n                    !Number.isNaN(\n                      record[e.intervalEndColumn].getMilliseconds(),\n                    ),\n                );\n\n              if (records.length > 0) {\n                annotations\n                  .selectAll('rect')\n                  .data(records)\n                  .enter()\n                  .append('rect')\n                  .attr({\n                    x: d =>\n                      Math.min(\n                        xScale(new Date(d[e.timeColumn])),\n                        xScale(new Date(d[e.intervalEndColumn])),\n                      ),\n                    y: 0,\n                    width: d =>\n                      Math.max(\n                        Math.abs(\n                          xScale(new Date(d[e.intervalEndColumn])) -\n                            xScale(new Date(d[e.timeColumn])),\n                        ),\n                        1,\n                      ),\n                    height: annotationHeight,\n                  })\n                  .attr('class', `${e.opacity} ${e.style}`)\n                  .style('stroke-width', e.width)\n                  .style('stroke', aColor)\n                  .style('fill', aColor)\n                  .style('fill-opacity', 0.2)\n                  .on('mouseover', tip.show)\n                  .on('mouseout', tip.hide)\n                  .call(tip);\n              }\n\n              // update annotation positions on brush event\n              if (chart.focus) {\n                chart.focus.dispatch.on('onBrush.interval-annotation', () => {\n                  annotations\n                    .selectAll('rect')\n                    .data(records)\n                    .attr({\n                      x: d => xScale(new Date(d[e.timeColumn])),\n                      width: d => {\n                        const x1 = xScale(new Date(d[e.timeColumn]));\n                        const x2 = xScale(new Date(d[e.intervalEndColumn]));\n\n                        return x2 - x1;\n                      },\n                    });\n                });\n              }\n            });\n        }\n\n        // rerender chart appended with annotation layer\n        svg.datum(data).attr('height', height).attr('width', width).call(chart);\n\n        // Display styles for Time Series Annotations\n        chart.dispatch.on('renderEnd.timeseries-annotation', () => {\n          d3.selectAll(\n            '.slice_container .nv-timeseries-annotation-layer.showMarkerstrue .nv-point',\n          )\n            .style('stroke-opacity', 1)\n            .style('fill-opacity', 1);\n          d3.selectAll(\n            '.slice_container .nv-timeseries-annotation-layer.hideLinetrue',\n          ).style('stroke-width', 0);\n        });\n      }\n    }\n\n    wrapTooltip(chart);\n\n    return chart;\n  };\n\n  // Remove tooltips before rendering chart, if the chart is being re-rendered sometimes\n  // there are left over tooltips in the dom,\n  // this will clear them before rendering the chart again.\n  if (chartId) {\n    removeTooltip(chartId);\n  } else {\n    hideTooltips(true);\n  }\n\n  nv.addGraph(drawGraph);\n}\n\nnvd3Vis.displayName = 'NVD3';\nnvd3Vis.propTypes = propTypes;\nexport default nvd3Vis;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { reactify, styled } from '@superset-ui/core';\nimport PropTypes from 'prop-types';\nimport Component from './NVD3Vis';\nimport { hideTooltips, removeTooltip } from './utils';\n\nfunction componentWillUnmount() {\n  const { id } = this.props;\n  if (id !== null && id !== undefined) {\n    removeTooltip(id);\n  } else {\n    hideTooltips(true);\n  }\n}\n\nconst ReactNVD3 = reactify(Component, { componentWillUnmount });\n\nconst NVD3 = ({ className, ...otherProps }) => (\n  <div className={className}>\n    <ReactNVD3 {...otherProps} />\n  </div>\n);\n\nNVD3.propTypes = {\n  className: PropTypes.string.isRequired,\n};\n\nexport default styled(NVD3)`\n  .superset-legacy-chart-nvd3-dist-bar,\n  .superset-legacy-chart-nvd3-bar {\n    overflow-x: auto !important;\n    svg {\n      &.nvd3-svg {\n        width: auto;\n        font-size: ${({ theme }) => theme.typography.sizes.m};\n      }\n    }\n  }\n  .superset-legacy-chart-nvd3 {\n    nv-x text {\n      font-size: ${({ theme }) => theme.typography.sizes.m};\n    }\n    g.superset path {\n      stroke-dasharray: 5, 5;\n    }\n    .nvtooltip tr.highlight td {\n      font-weight: ${({ theme }) => theme.typography.weights.bold};\n      font-size: ${({ theme }) => theme.typography.sizes.m}px !important;\n    }\n    text.nv-axislabel {\n      font-size: ${({ theme }) => theme.typography.sizes.m} !important;\n    }\n    g.solid path,\n    line.solid {\n      stroke-dasharray: unset;\n    }\n    g.dashed path,\n    line.dashed {\n      stroke-dasharray: 5, 5;\n    }\n    g.longDashed path,\n    line.dotted {\n      stroke-dasharray: 1, 1;\n    }\n\n    g.opacityLow path,\n    line.opacityLow {\n      stroke-opacity: 0.2;\n    }\n\n    g.opacityMedium path,\n    line.opacityMedium {\n      stroke-opacity: 0.5;\n    }\n    g.opacityHigh path,\n    line.opacityHigh {\n      stroke-opacity: 0.8;\n    }\n    g.time-shift-0 path,\n    line.time-shift-0 {\n      stroke-dasharray: 5, 5;\n    }\n    g.time-shift-1 path,\n    line.time-shift-1 {\n      stroke-dasharray: 1, 5;\n    }\n    g.time-shift-2 path,\n    line.time-shift-3 {\n      stroke-dasharray: 5, 1;\n    }\n    g.time-shift-3 path,\n    line.time-shift-3 {\n      stroke-dasharray: 5, 1;\n    }\n    g.time-shift-4 path,\n    line.time-shift-4 {\n      stroke-dasharray: 5, 10;\n    }\n    g.time-shift-5 path,\n    line.time-shift-5 {\n      stroke-dasharray: 0.9;\n    }\n    g.time-shift-6 path,\n    line.time-shift-6 {\n      stroke-dasharray: 15, 10, 5;\n    }\n    g.time-shift-7 path,\n    line.time-shift-7 {\n      stroke-dasharray: 15, 10, 5, 10;\n    }\n    g.time-shift-8 path,\n    line.time-shift-8 {\n      stroke-dasharray: 15, 10, 5, 10, 15;\n    }\n    g.time-shift-9 path,\n    line.time-shift-9 {\n      stroke-dasharray: 5, 5, 1, 5;\n    }\n    .nv-noData.body {\n      font-size: ${({ theme }) => theme.typography.sizes.m};\n      font-weight: ${({ theme }) => theme.typography.weights.normal};\n    }\n  }\n  .superset-legacy-chart-nvd3-tr-highlight {\n    border-top: 1px solid;\n    border-bottom: 1px solid;\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n  .superset-legacy-chart-nvd3-tr-total {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n  .nvtooltip {\n    .tooltip-header {\n      white-space: nowrap;\n      font-weight: ${({ theme }) => theme.typography.weights.bold};\n    }\n    tbody tr:not(.tooltip-header) td:nth-child(2) {\n      word-break: break-word;\n    }\n  }\n  .d3-tip.nv-event-annotation-layer-table,\n  .d3-tip.nv-event-annotation-layer-NATIVE {\n    width: 200px;\n    border-radius: 2px;\n    background-color: ${({ theme }) => theme.colors.grayscale.base};\n    fill-opacity: 0.6;\n    margin: ${({ theme }) => theme.gridUnit * 2}px;\n    padding: ${({ theme }) => theme.gridUnit * 2}px;\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    &:after {\n      content: '\\\\25BC';\n      font-size: ${({ theme }) => theme.typography.sizes.m};\n      color: ${({ theme }) => theme.colors.grayscale.base};\n      position: absolute;\n      bottom: -14px;\n      left: 94px;\n    }\n  }\n`;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\n\n// TODO: Note that id and className can collide between Props and ReactifyProps\n// leading to (likely) unexpected behaviors. We should either require Props to not\n// contain an id/className, or not combine them (via intersection), instead preferring\n// wrapping (composition). As an example:\n// interface MyProps {\n//   id: number;\n// }\n// function myRender(container: HTMLDivElement, props: Readonly<MyProps>): void {\n//   props.id // unusable: id is string & number\n// }\n// new (reactify(myRender))({ id: 5 }); // error: id has to be string & number\n\nexport type ReactifyProps = {\n  id?: string;\n  className?: string;\n};\n\n// TODO: add more React lifecycle callbacks as needed\nexport type LifeCycleCallbacks = {\n  componentWillUnmount?: () => void;\n};\n\nexport interface RenderFuncType<Props> {\n  (container: HTMLDivElement, props: Readonly<Props & ReactifyProps>): void;\n  displayName?: string;\n  defaultProps?: Partial<Props & ReactifyProps>;\n  propTypes?: React.WeakValidationMap<Props & ReactifyProps>;\n}\n\nexport default function reactify<Props extends object>(\n  renderFn: RenderFuncType<Props>,\n  callbacks?: LifeCycleCallbacks,\n): React.ComponentClass<Props & ReactifyProps> {\n  class ReactifiedComponent extends React.Component<Props & ReactifyProps> {\n    container?: HTMLDivElement;\n\n    constructor(props: Props & ReactifyProps) {\n      super(props);\n      this.setContainerRef = this.setContainerRef.bind(this);\n    }\n\n    componentDidMount() {\n      this.execute();\n    }\n\n    componentDidUpdate() {\n      this.execute();\n    }\n\n    componentWillUnmount() {\n      this.container = undefined;\n      if (callbacks?.componentWillUnmount) {\n        callbacks.componentWillUnmount.bind(this)();\n      }\n    }\n\n    setContainerRef(ref: HTMLDivElement) {\n      this.container = ref;\n    }\n\n    execute() {\n      if (this.container) {\n        renderFn(this.container, this.props);\n      }\n    }\n\n    render() {\n      const { id, className } = this.props;\n\n      return <div ref={this.setContainerRef} id={id} className={className} />;\n    }\n  }\n\n  const ReactifiedClass: React.ComponentClass<Props & ReactifyProps> =\n    ReactifiedComponent;\n\n  if (renderFn.displayName) {\n    ReactifiedClass.displayName = renderFn.displayName;\n  }\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  if (renderFn.propTypes) {\n    ReactifiedClass.propTypes = {\n      ...ReactifiedClass.propTypes,\n      ...renderFn.propTypes,\n    };\n  }\n  if (renderFn.defaultProps) {\n    ReactifiedClass.defaultProps = renderFn.defaultProps;\n  }\n\n  return ReactifiedComponent;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport default function isDefined(x: unknown) {\n  return x !== null && x !== undefined;\n}\n"],"names":["numberOrAutoType","PropTypes","stringOrObjectWithLabelType","label","rgbObjectType","r","g","b","numericXYType","x","y","categoryAndValueXYType","boxPlotValueType","outliers","Q1","Q2","Q3","whisker_high","whisker_low","bulletDataType","markerLabels","markerLineLabels","markerLines","markers","measures","rangeLabels","ranges","annotationLayerType","annotationType","Object","keys","ANNOTATION_TYPES","color","hideLine","name","opacity","show","showMarkers","sourceType","style","value","width","NO_DATA_RENDER_DATA","text","dy","class","nv","chart","container","margin","options","height","left","top","selectAll","remove","noDataText","data","enter","append","attr","d","getColor","getScale","CategoricalColorNamespace","TIMESERIES_VIZ_TYPES","propTypes","key","values","classed","type","yAxis","annotationData","annotationLayers","bottomMargin","colorScheme","comparisonType","contribution","leftMargin","onError","showLegend","useRichTooltip","vizType","xAxisFormat","numberFormat","xAxisLabel","xAxisShowMinMax","xIsLogScale","xTicksLayout","yAxisFormat","yAxisBounds","yAxisLabel","yAxisShowMinMax","yIsLogScale","orderBars","isBarStacked","showBarValue","reduceXTicks","showControls","showBrush","onBrushEnd","yAxis2Format","lineInterpolation","isDonut","isPieLabelOutside","pieLabelType","showLabels","areaStackedStyle","entity","maxBubbleSize","xField","yField","sizeField","baseColor","NOOP","formatter","getNumberFormatter","nvd3Vis","element","props","maxWidth","maxHeight","yAxis2Bounds","yAxis2ShowMinMax","sliceId","isExplore","document","querySelector","innerHTML","activeAnnotationLayers","filter","layer","chartContainer","chartId","parentElement","id","startsWith","colorKey","isVizTypes","types","includes","removeTooltip","hideTooltips","d3Element","d3","svg","select","empty","Math","min","isTimeSeries","staggerLabels","xLabelRotation","isTruthy","t","canShowBrush","numberFormatter","focus","bottom","focusHeight","xScale","interpolate","clipEdge","groupSpacing","computeBarChartWidth","xAxis","showMaxMin","stacked","forEach","newValues","sort","a","tryNumify","valueFormat","donut","labelsOutside","labelThreshold","cornerRadius","labelType","total","percentFormatter","NumberFormats","tooltip","valueFormatter","useInteractiveGuideline","showDistX","showDistY","contentGenerator","generateBubbleTooltipContent","point","xFormatter","getTimeOrNumberFormatter","yFormatter","sizeFormatter","pointRange","pointDomain","v","size","maxBoxWidth","Error","xAxisFormatter","drawBarValues","dispatch","on","event","timeRange","stringifyTimeRange","extent","brush","rotateLabels","x2Axis","yScale","getTimeFormatter","interactiveLayer","headerFormatter","smartDateVerboseFormatter","tickFormat","length","slice","max","yAxisFormatter","y2Axis","ticks","setAxisShowMaxMin","alpha","rank","perc","generateTimePivotTooltip","colorFn","cleanColorInput","generateRichLineTooltipContent","generateCompareTooltipContent","generateAreaChartTooltipContent","yAxisFormatter1","yAxisFormatter2","yAxis1","yAxis2","yAxisFormatters","map","datum","generateMultiLineTooltipContent","transition","duration","call","log10","applyYAxisBounds","yDomain","Array","isArray","customMin","customMax","hasCustomMin","isDefined","Number","isNaN","hasCustomMax","computeStackedYDomain","trueMin","trueMax","computeYDomain","stateChange","count","ticks1","scale","domain","nice","ticks2","difference","smallest","delta","i","abs","unshift","push","yDomain1","yDomain2","tickValues","setTimeout","undefined","marginPad","ceil","margins","maxYAxisLabelWidth","getMaxLabelSize","maxXAxisLabelHeight","right","sin","PI","cos","maxYAxis2LabelWidth","parseInt","distance","axisLabel","axisLabelDistance","timeSeriesAnnotations","reduce","bushel","concat","series","join","strokeWidth","classes","generateTooltipClassName","window","addEventListener","formulas","xMax","xMin","range","valueOf","clamp","xValues","distinct","xVals","add","Set","period","dataPoints","formulaData","fo","expression","evalExpression","xAxis1","chartWidth","annotationHeight","config","index","e","applyNativeColumns","annotations","aColor","tip","tipFactory","annotationTipClass","records","timeValue","Date","moment","timeColumn","record","getMilliseconds","x1","y1","x2","y2","hide","intervalEndValue","intervalEndColumn","wrapTooltip","displayName","ReactNVD3","reactify","Component","componentWillUnmount","this","NVD3","className","otherProps","styled","theme","typography","sizes","m","weights","bold","normal","colors","grayscale","base","gridUnit","light5","renderFn","callbacks","ReactifiedComponent","constructor","super","setContainerRef","bind","componentDidMount","execute","componentDidUpdate","ref","render","ReactifiedClass","defaultProps"],"sourceRoot":""}