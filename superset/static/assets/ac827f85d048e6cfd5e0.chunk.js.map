{"version":3,"file":"ac827f85d048e6cfd5e0.chunk.js","mappings":"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","sources":["webpack://superset/./src/components/ListView/CardCollection.tsx","webpack://superset/./src/components/ListView/utils.ts","webpack://superset/./src/components/ListView/Filters/Search.tsx","webpack://superset/./src/components/ListView/Filters/Base.ts","webpack://superset/./src/components/ListView/Filters/Select.tsx","webpack://superset/./src/components/ListView/Filters/DateRange.tsx","webpack://superset/./src/components/ListView/Filters/index.tsx","webpack://superset/./src/components/ListView/CardSortSelect.tsx","webpack://superset/./src/components/ListView/ListView.tsx","webpack://superset/./src/components/ListView/types.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { TableInstance, Row } from 'react-table';\nimport { styled } from '@superset-ui/core';\nimport cx from 'classnames';\n\ninterface CardCollectionProps {\n  bulkSelectEnabled?: boolean;\n  loading: boolean;\n  prepareRow: TableInstance['prepareRow'];\n  renderCard?: (row: any) => React.ReactNode;\n  rows: TableInstance['rows'];\n  showThumbnails?: boolean;\n}\n\nconst CardContainer = styled.div<{ showThumbnails?: boolean }>`\n  ${({ theme, showThumbnails }) => `\n    display: grid;\n    grid-gap: ${theme.gridUnit * 12}px ${theme.gridUnit * 4}px;\n    grid-template-columns: repeat(auto-fit, 300px);\n    margin-top: ${theme.gridUnit * -6}px;\n    padding: ${\n      showThumbnails\n        ? `${theme.gridUnit * 8 + 3}px ${theme.gridUnit * 9}px`\n        : `${theme.gridUnit * 8 + 1}px ${theme.gridUnit * 9}px`\n    };\n  `}\n`;\n\nconst CardWrapper = styled.div`\n  border: 2px solid transparent;\n  &.card-selected {\n    border: 2px solid ${({ theme }) => theme.colors.primary.base};\n  }\n  &.bulk-select {\n    cursor: pointer;\n  }\n`;\n\nexport default function CardCollection({\n  bulkSelectEnabled,\n  loading,\n  prepareRow,\n  renderCard,\n  rows,\n  showThumbnails,\n}: CardCollectionProps) {\n  function handleClick(\n    event: React.MouseEvent<HTMLDivElement, MouseEvent>,\n    toggleRowSelected: Row['toggleRowSelected'],\n  ) {\n    if (bulkSelectEnabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      toggleRowSelected();\n    }\n  }\n\n  if (!renderCard) return null;\n  return (\n    <CardContainer showThumbnails={showThumbnails}>\n      {loading &&\n        rows.length === 0 &&\n        [...new Array(25)].map((e, i) => (\n          <div key={i}>{renderCard({ loading })}</div>\n        ))}\n      {rows.length > 0 &&\n        rows.map(row => {\n          if (!renderCard) return null;\n          prepareRow(row);\n          return (\n            <CardWrapper\n              className={cx({\n                'card-selected': bulkSelectEnabled && row.isSelected,\n                'bulk-select': bulkSelectEnabled,\n              })}\n              key={row.id}\n              onClick={e => handleClick(e, row.toggleRowSelected)}\n              role=\"none\"\n            >\n              {renderCard({ ...row.original, loading })}\n            </CardWrapper>\n          );\n        })}\n    </CardContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useMemo, useState } from 'react';\nimport {\n  useFilters,\n  usePagination,\n  useRowSelect,\n  useRowState,\n  useSortBy,\n  useTable,\n} from 'react-table';\n\nimport {\n  NumberParam,\n  StringParam,\n  useQueryParams,\n  QueryParamConfig,\n} from 'use-query-params';\n\nimport rison from 'rison';\nimport { isEqual } from 'lodash';\nimport { PartialStylesConfig } from 'src/components/Select';\nimport {\n  FetchDataConfig,\n  Filter,\n  FilterValue,\n  InternalFilter,\n  SortColumn,\n  ViewModeType,\n} from './types';\n\n// Define custom RisonParam for proper encoding/decoding; note that\n// %, &, +, and # must be encoded to avoid breaking the url\nconst RisonParam: QueryParamConfig<string, any> = {\n  encode: (data?: any | null) =>\n    data === undefined\n      ? undefined\n      : rison\n          .encode(data)\n          .replace(/%/g, '%25')\n          .replace(/&/g, '%26')\n          .replace(/\\+/g, '%2B')\n          .replace(/#/g, '%23'),\n  decode: (dataStr?: string | string[]) =>\n    dataStr === undefined || Array.isArray(dataStr)\n      ? undefined\n      : rison.decode(dataStr),\n};\n\nexport const SELECT_WIDTH = 200;\n\nexport class ListViewError extends Error {\n  name = 'ListViewError';\n}\n\n// removes element from a list, returns new list\nexport function removeFromList(list: any[], index: number): any[] {\n  return list.filter((_, i) => index !== i);\n}\n\n// apply update to elements of object list, returns new list\nfunction updateInList(list: any[], index: number, update: any): any[] {\n  const element = list.find((_, i) => index === i);\n\n  return [\n    ...list.slice(0, index),\n    { ...element, ...update },\n    ...list.slice(index + 1),\n  ];\n}\n\ntype QueryFilterState = {\n  [id: string]: FilterValue['value'];\n};\n\nfunction mergeCreateFilterValues(list: Filter[], updateObj: QueryFilterState) {\n  return list.map(({ id, urlDisplay, operator }) => {\n    const currentFilterId = urlDisplay || id;\n    const update = updateObj[currentFilterId];\n\n    return { id, urlDisplay, operator, value: update };\n  });\n}\n\n// convert filters from UI objects to data objects\nexport function convertFilters(fts: InternalFilter[]): FilterValue[] {\n  return fts\n    .filter(\n      f =>\n        !(\n          typeof f.value === 'undefined' ||\n          (Array.isArray(f.value) && !f.value.length)\n        ),\n    )\n    .map(({ value, operator, id }) => {\n      // handle between filter using 2 api filters\n      if (operator === 'between' && Array.isArray(value)) {\n        return [\n          {\n            value: value[0],\n            operator: 'gt',\n            id,\n          },\n          {\n            value: value[1],\n            operator: 'lt',\n            id,\n          },\n        ];\n      }\n      return {\n        value,\n        operator,\n        id,\n      };\n    })\n    .flat();\n}\n\n// convertFilters but to handle new decoded rison format\nexport function convertFiltersRison(\n  filterObj: any,\n  list: Filter[],\n): FilterValue[] {\n  const filters: FilterValue[] = [];\n  const refs = {};\n\n  Object.keys(filterObj).forEach(id => {\n    const filter: FilterValue = {\n      id,\n      value: filterObj[id],\n      // operator: filterObj[id][1], // TODO: can probably get rid of this\n    };\n\n    refs[id] = filter;\n    filters.push(filter);\n  });\n\n  // Add operators from filter list\n  list.forEach(value => {\n    const currentFilterId = value.urlDisplay || value.id;\n    const filter = refs[currentFilterId];\n\n    if (filter) {\n      filter.operator = value.operator;\n      filter.id = value.id;\n    }\n  });\n\n  return filters;\n}\n\nexport function extractInputValue(inputType: Filter['input'], event: any) {\n  if (!inputType || inputType === 'text') {\n    return event.currentTarget.value;\n  }\n  if (inputType === 'checkbox') {\n    return event.currentTarget.checked;\n  }\n\n  return null;\n}\n\ninterface UseListViewConfig {\n  fetchData: (conf: FetchDataConfig) => any;\n  columns: any[];\n  data: any[];\n  count: number;\n  initialPageSize: number;\n  initialSort?: SortColumn[];\n  bulkSelectMode?: boolean;\n  initialFilters?: Filter[];\n  bulkSelectColumnConfig?: {\n    id: string;\n    Header: (conf: any) => React.ReactNode;\n    Cell: (conf: any) => React.ReactNode;\n  };\n  renderCard?: boolean;\n  defaultViewMode?: ViewModeType;\n}\n\nexport function useListViewState({\n  fetchData,\n  columns,\n  data,\n  count,\n  initialPageSize,\n  initialFilters = [],\n  initialSort = [],\n  bulkSelectMode = false,\n  bulkSelectColumnConfig,\n  renderCard = false,\n  defaultViewMode = 'card',\n}: UseListViewConfig) {\n  const [query, setQuery] = useQueryParams({\n    filters: RisonParam,\n    pageIndex: NumberParam,\n    sortColumn: StringParam,\n    sortOrder: StringParam,\n    viewMode: StringParam,\n  });\n\n  const initialSortBy = useMemo(\n    () =>\n      query.sortColumn && query.sortOrder\n        ? [{ id: query.sortColumn, desc: query.sortOrder === 'desc' }]\n        : initialSort,\n    [query.sortColumn, query.sortOrder],\n  );\n\n  const initialState = {\n    filters: query.filters\n      ? convertFiltersRison(query.filters, initialFilters)\n      : [],\n    pageIndex: query.pageIndex || 0,\n    pageSize: initialPageSize,\n    sortBy: initialSortBy,\n  };\n\n  const [viewMode, setViewMode] = useState<ViewModeType>(\n    (query.viewMode as ViewModeType) ||\n      (renderCard ? defaultViewMode : 'table'),\n  );\n\n  const columnsWithSelect = useMemo(() => {\n    // add exact filter type so filters with falsey values are not filtered out\n    const columnsWithFilter = columns.map(f => ({ ...f, filter: 'exact' }));\n    return bulkSelectMode\n      ? [bulkSelectColumnConfig, ...columnsWithFilter]\n      : columnsWithFilter;\n  }, [bulkSelectMode, columns]);\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n    canPreviousPage,\n    canNextPage,\n    pageCount,\n    gotoPage,\n    setAllFilters,\n    selectedFlatRows,\n    toggleAllRowsSelected,\n    state: { pageIndex, pageSize, sortBy, filters },\n  } = useTable(\n    {\n      columns: columnsWithSelect,\n      count,\n      data,\n      disableFilters: true,\n      disableSortRemove: true,\n      initialState,\n      manualFilters: true,\n      manualPagination: true,\n      manualSortBy: true,\n      autoResetFilters: false,\n      pageCount: Math.ceil(count / initialPageSize),\n    },\n    useFilters,\n    useSortBy,\n    usePagination,\n    useRowState,\n    useRowSelect,\n  );\n\n  const [internalFilters, setInternalFilters] = useState<InternalFilter[]>(\n    query.filters && initialFilters.length\n      ? mergeCreateFilterValues(initialFilters, query.filters)\n      : [],\n  );\n\n  useEffect(() => {\n    if (initialFilters.length) {\n      setInternalFilters(\n        mergeCreateFilterValues(\n          initialFilters,\n          query.filters ? query.filters : {},\n        ),\n      );\n    }\n  }, [initialFilters]);\n\n  useEffect(() => {\n    // From internalFilters, produce a simplified obj\n    const filterObj = {};\n\n    internalFilters.forEach(filter => {\n      if (\n        filter.value !== undefined &&\n        (typeof filter.value !== 'string' || filter.value.length > 0)\n      ) {\n        const currentFilterId = filter.urlDisplay || filter.id;\n        filterObj[currentFilterId] = filter.value;\n      }\n    });\n\n    const queryParams: any = {\n      filters: Object.keys(filterObj).length ? filterObj : undefined,\n      pageIndex,\n    };\n    if (sortBy[0]) {\n      queryParams.sortColumn = sortBy[0].id;\n      queryParams.sortOrder = sortBy[0].desc ? 'desc' : 'asc';\n    }\n\n    if (renderCard) {\n      queryParams.viewMode = viewMode;\n    }\n\n    const method =\n      typeof query.pageIndex !== 'undefined' &&\n      queryParams.pageIndex !== query.pageIndex\n        ? 'push'\n        : 'replace';\n\n    setQuery(queryParams, method);\n\n    fetchData({ pageIndex, pageSize, sortBy, filters });\n  }, [fetchData, pageIndex, pageSize, sortBy, filters]);\n\n  useEffect(() => {\n    if (!isEqual(initialState.pageIndex, pageIndex)) {\n      gotoPage(initialState.pageIndex);\n    }\n  }, [query]);\n\n  const applyFilterValue = (index: number, value: any) => {\n    setInternalFilters(currentInternalFilters => {\n      // skip redunundant updates\n      if (currentInternalFilters[index].value === value) {\n        return currentInternalFilters;\n      }\n\n      const update = { ...currentInternalFilters[index], value };\n      const updatedFilters = updateInList(\n        currentInternalFilters,\n        index,\n        update,\n      );\n\n      setAllFilters(convertFilters(updatedFilters));\n      gotoPage(0); // clear pagination on filter\n      return updatedFilters;\n    });\n  };\n\n  return {\n    canNextPage,\n    canPreviousPage,\n    getTableBodyProps,\n    getTableProps,\n    gotoPage,\n    headerGroups,\n    pageCount,\n    prepareRow,\n    rows,\n    selectedFlatRows,\n    setAllFilters,\n    state: { pageIndex, pageSize, sortBy, filters, internalFilters, viewMode },\n    toggleAllRowsSelected,\n    applyFilterValue,\n    setViewMode,\n    query,\n  };\n}\n\nexport const filterSelectStyles: PartialStylesConfig = {\n  container: (provider, { getValue }) => ({\n    ...provider,\n    // dynamic width based on label string length\n    minWidth: `${Math.min(\n      12,\n      Math.max(5, 3 + getValue()[0].label.length / 2),\n    )}em`,\n  }),\n  control: provider => ({\n    ...provider,\n    borderWidth: 0,\n    boxShadow: 'none',\n    cursor: 'pointer',\n    backgroundColor: 'transparent',\n  }),\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { forwardRef, useImperativeHandle, useState } from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { AntdInput } from 'src/components';\nimport { SELECT_WIDTH } from 'src/components/ListView/utils';\nimport { FormLabel } from 'src/components/Form';\nimport { BaseFilter, FilterHandler } from './Base';\n\ninterface SearchHeaderProps extends BaseFilter {\n  Header: string;\n  onSubmit: (val: string) => void;\n  name: string;\n}\n\nconst Container = styled.div`\n  width: ${SELECT_WIDTH}px;\n`;\n\nconst SearchIcon = styled(Icons.Search)`\n  color: ${({ theme }) => theme.colors.grayscale.light1};\n`;\n\nconst StyledInput = styled(AntdInput)`\n  border-radius: ${({ theme }) => theme.gridUnit}px;\n`;\n\nfunction SearchFilter(\n  { Header, name, initialValue, onSubmit }: SearchHeaderProps,\n  ref: React.RefObject<FilterHandler>,\n) {\n  const [value, setValue] = useState(initialValue || '');\n  const handleSubmit = () => {\n    if (value) {\n      onSubmit(value.trim());\n    }\n  };\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.currentTarget.value);\n    if (e.currentTarget.value === '') {\n      onSubmit('');\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue('');\n      onSubmit('');\n    },\n  }));\n\n  return (\n    <Container>\n      <FormLabel>{Header}</FormLabel>\n      <StyledInput\n        allowClear\n        data-test=\"filters-search\"\n        placeholder={t('Type a value')}\n        name={name}\n        value={value}\n        onChange={handleChange}\n        onPressEnter={handleSubmit}\n        onBlur={handleSubmit}\n        prefix={<SearchIcon iconSize=\"l\" />}\n      />\n    </Container>\n  );\n}\n\nexport default forwardRef(SearchFilter);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ReactNode } from 'react';\nimport { styled } from '@superset-ui/core';\nimport { SELECT_WIDTH } from 'src/components/ListView/utils';\n\nexport interface BaseFilter {\n  Header: ReactNode;\n  initialValue: any;\n}\n\nexport const FilterContainer = styled.div`\n  display: inline-flex;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  align-items: center;\n  width: ${SELECT_WIDTH}px;\n`;\n\nexport type FilterHandler = {\n  clearFilter: () => void;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useState,\n  useMemo,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\nimport { t } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport { Filter, SelectOption } from 'src/components/ListView/types';\nimport { FormLabel } from 'src/components/Form';\nimport { FilterContainer, BaseFilter, FilterHandler } from './Base';\n\ninterface SelectFilterProps extends BaseFilter {\n  fetchSelects?: Filter['fetchSelects'];\n  name?: string;\n  onSelect: (selected: SelectOption | undefined) => void;\n  paginate?: boolean;\n  selects: Filter['selects'];\n}\n\nfunction SelectFilter(\n  {\n    Header,\n    name,\n    fetchSelects,\n    initialValue,\n    onSelect,\n    selects = [],\n  }: SelectFilterProps,\n  ref: React.RefObject<FilterHandler>,\n) {\n  const [selectedOption, setSelectedOption] = useState(initialValue);\n\n  const onChange = (selected: SelectOption) => {\n    onSelect(\n      selected ? { label: selected.label, value: selected.value } : undefined,\n    );\n    setSelectedOption(selected);\n  };\n\n  const onClear = () => {\n    onSelect(undefined);\n    setSelectedOption(undefined);\n  };\n\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      onClear();\n    },\n  }));\n\n  const fetchAndFormatSelects = useMemo(\n    () => async (inputValue: string, page: number, pageSize: number) => {\n      if (fetchSelects) {\n        const selectValues = await fetchSelects(inputValue, page, pageSize);\n        return {\n          data: selectValues.data,\n          totalCount: selectValues.totalCount,\n        };\n      }\n      return {\n        data: [],\n        totalCount: 0,\n      };\n    },\n    [fetchSelects],\n  );\n\n  return (\n    <FilterContainer>\n      <Select\n        allowClear\n        ariaLabel={typeof Header === 'string' ? Header : name || t('Filter')}\n        labelInValue\n        data-test=\"filters-select\"\n        header={<FormLabel>{Header}</FormLabel>}\n        onChange={onChange}\n        onClear={onClear}\n        options={fetchSelects ? fetchAndFormatSelects : selects}\n        placeholder={t('Select or type a value')}\n        showSearch\n        value={selectedOption}\n      />\n    </FilterContainer>\n  );\n}\nexport default forwardRef(SelectFilter);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useState,\n  useMemo,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\nimport moment, { Moment } from 'moment';\nimport { styled } from '@superset-ui/core';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { FormLabel } from 'src/components/Form';\nimport { BaseFilter, FilterHandler } from './Base';\n\ninterface DateRangeFilterProps extends BaseFilter {\n  onSubmit: (val: number[]) => void;\n  name: string;\n}\n\ntype ValueState = [number, number];\n\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\n\nfunction DateRangeFilter(\n  { Header, initialValue, onSubmit }: DateRangeFilterProps,\n  ref: React.RefObject<FilterHandler>,\n) {\n  const [value, setValue] = useState<ValueState | null>(initialValue ?? null);\n  const momentValue = useMemo((): [Moment, Moment] | null => {\n    if (!value || (Array.isArray(value) && !value.length)) return null;\n    return [moment(value[0]), moment(value[1])];\n  }, [value]);\n\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue(null);\n      onSubmit([]);\n    },\n  }));\n\n  return (\n    <RangeFilterContainer>\n      <FormLabel>{Header}</FormLabel>\n      <RangePicker\n        showTime\n        value={momentValue}\n        onChange={momentRange => {\n          if (!momentRange) {\n            setValue(null);\n            onSubmit([]);\n            return;\n          }\n          const changeValue = [\n            momentRange[0]?.valueOf() ?? 0,\n            momentRange[1]?.valueOf() ?? 0,\n          ] as ValueState;\n          setValue(changeValue);\n          onSubmit(changeValue);\n        }}\n      />\n    </RangeFilterContainer>\n  );\n}\n\nexport default forwardRef(DateRangeFilter);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  createRef,\n  forwardRef,\n  useImperativeHandle,\n  useMemo,\n} from 'react';\nimport { withTheme } from '@superset-ui/core';\n\nimport {\n  FilterValue,\n  Filters,\n  InternalFilter,\n  SelectOption,\n} from 'src/components/ListView/types';\nimport SearchFilter from './Search';\nimport SelectFilter from './Select';\nimport DateRangeFilter from './DateRange';\nimport { FilterHandler } from './Base';\n\ninterface UIFiltersProps {\n  filters: Filters;\n  internalFilters: InternalFilter[];\n  updateFilterValue: (id: number, value: FilterValue['value']) => void;\n}\n\nfunction UIFilters(\n  { filters, internalFilters = [], updateFilterValue }: UIFiltersProps,\n  ref: React.RefObject<{ clearFilters: () => void }>,\n) {\n  const filterRefs = useMemo(\n    () =>\n      Array.from({ length: filters.length }, () => createRef<FilterHandler>()),\n    [filters.length],\n  );\n\n  useImperativeHandle(ref, () => ({\n    clearFilters: () => {\n      filterRefs.forEach((filter: any) => {\n        filter.current?.clearFilter?.();\n      });\n    },\n  }));\n\n  return (\n    <>\n      {filters.map(\n        ({ Header, fetchSelects, id, input, paginate, selects }, index) => {\n          const initialValue =\n            internalFilters[index] && internalFilters[index].value;\n          if (input === 'select') {\n            return (\n              <SelectFilter\n                ref={filterRefs[index]}\n                Header={Header}\n                fetchSelects={fetchSelects}\n                initialValue={initialValue}\n                key={id}\n                name={id}\n                onSelect={(option: SelectOption | undefined) =>\n                  updateFilterValue(index, option)\n                }\n                paginate={paginate}\n                selects={selects}\n              />\n            );\n          }\n          if (input === 'search' && typeof Header === 'string') {\n            return (\n              <SearchFilter\n                ref={filterRefs[index]}\n                Header={Header}\n                initialValue={initialValue}\n                key={id}\n                name={id}\n                onSubmit={(value: string) => updateFilterValue(index, value)}\n              />\n            );\n          }\n          if (input === 'datetime_range') {\n            return (\n              <DateRangeFilter\n                ref={filterRefs[index]}\n                Header={Header}\n                initialValue={initialValue}\n                key={id}\n                name={id}\n                onSubmit={value => updateFilterValue(index, value)}\n              />\n            );\n          }\n          return null;\n        },\n      )}\n    </>\n  );\n}\n\nexport default withTheme(forwardRef(UIFilters));\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useMemo } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport { SELECT_WIDTH } from './utils';\nimport { CardSortSelectOption, FetchDataConfig, SortColumn } from './types';\n\nconst SortContainer = styled.div`\n  display: inline-flex;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  align-items: center;\n  text-align: left;\n  width: ${SELECT_WIDTH}px;\n`;\n\ninterface CardViewSelectSortProps {\n  onChange: (conf: FetchDataConfig) => any;\n  options: Array<CardSortSelectOption>;\n  initialSort?: SortColumn[];\n  pageIndex: number;\n  pageSize: number;\n}\n\nexport const CardSortSelect = ({\n  initialSort,\n  onChange,\n  options,\n  pageIndex,\n  pageSize,\n}: CardViewSelectSortProps) => {\n  const defaultSort =\n    (initialSort && options.find(({ id }) => id === initialSort[0].id)) ||\n    options[0];\n\n  const [value, setValue] = useState({\n    label: defaultSort.label,\n    value: defaultSort.value,\n  });\n\n  const formattedOptions = useMemo(\n    () => options.map(option => ({ label: option.label, value: option.value })),\n    [options],\n  );\n\n  const handleOnChange = (selected: { label: string; value: string }) => {\n    setValue(selected);\n    const originalOption = options.find(\n      ({ value }) => value === selected.value,\n    );\n    if (originalOption) {\n      const sortBy = [\n        {\n          id: originalOption.id,\n          desc: originalOption.desc,\n        },\n      ];\n      onChange({ pageIndex, pageSize, sortBy, filters: [] });\n    }\n  };\n\n  return (\n    <SortContainer>\n      <Select\n        ariaLabel={t('Sort')}\n        header={<FormLabel>{t('Sort')}</FormLabel>}\n        labelInValue\n        onChange={(value: CardSortSelectOption) => handleOnChange(value)}\n        options={formattedOptions}\n        showSearch\n        value={value}\n      />\n    </SortContainer>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t, styled } from '@superset-ui/core';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport Alert from 'src/components/Alert';\nimport cx from 'classnames';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport IndeterminateCheckbox from 'src/components/IndeterminateCheckbox';\nimport Pagination from 'src/components/Pagination';\nimport TableCollection from 'src/components/TableCollection';\nimport CardCollection from './CardCollection';\nimport FilterControls from './Filters';\nimport { CardSortSelect } from './CardSortSelect';\nimport {\n  FetchDataConfig,\n  Filters,\n  SortColumn,\n  CardSortSelectOption,\n  ViewModeType,\n} from './types';\nimport { ListViewError, useListViewState } from './utils';\nimport { EmptyStateBig, EmptyStateProps } from '../EmptyState';\n\nconst ListViewStyles = styled.div`\n  text-align: center;\n\n  .superset-list-view {\n    text-align: left;\n    border-radius: 4px 0;\n    margin: 0 ${({ theme }) => theme.gridUnit * 4}px;\n\n    .header {\n      display: flex;\n      padding-bottom: ${({ theme }) => theme.gridUnit * 4}px;\n\n      & .controls {\n        display: flex;\n        flex-wrap: wrap;\n        column-gap: ${({ theme }) => theme.gridUnit * 6}px;\n        row-gap: ${({ theme }) => theme.gridUnit * 4}px;\n      }\n    }\n\n    .body.empty table {\n      margin-bottom: 0;\n    }\n\n    .body {\n      overflow-x: auto;\n    }\n\n    .ant-empty {\n      .ant-empty-image {\n        height: auto;\n      }\n    }\n  }\n\n  .pagination-container {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n\n  .row-count-container {\n    margin-top: ${({ theme }) => theme.gridUnit * 2}px;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n  }\n`;\n\nconst BulkSelectWrapper = styled(Alert)`\n  ${({ theme }) => `\n    border-radius: 0;\n    margin-bottom: 0;\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.primary.light4};\n\n    .selectedCopy {\n      display: inline-block;\n      padding: ${theme.gridUnit * 2}px 0;\n    }\n\n    .deselect-all {\n      color: ${theme.colors.primary.base};\n      margin-left: ${theme.gridUnit * 4}px;\n    }\n\n    .divider {\n      margin: ${`${-theme.gridUnit * 2}px 0 ${-theme.gridUnit * 2}px ${\n        theme.gridUnit * 4\n      }px`};\n      width: 1px;\n      height: ${theme.gridUnit * 8}px;\n      box-shadow: inset -1px 0px 0px ${theme.colors.grayscale.light2};\n      display: inline-flex;\n      vertical-align: middle;\n      position: relative;\n    }\n\n    .ant-alert-close-icon {\n      margin-top: ${theme.gridUnit * 1.5}px;\n    }\n  `}\n`;\n\nconst bulkSelectColumnConfig = {\n  Cell: ({ row }: any) => (\n    <IndeterminateCheckbox {...row.getToggleRowSelectedProps()} id={row.id} />\n  ),\n  Header: ({ getToggleAllRowsSelectedProps }: any) => (\n    <IndeterminateCheckbox\n      {...getToggleAllRowsSelectedProps()}\n      id=\"header-toggle-all\"\n    />\n  ),\n  id: 'selection',\n  size: 'sm',\n};\n\nconst ViewModeContainer = styled.div`\n  padding-right: ${({ theme }) => theme.gridUnit * 4}px;\n  margin-top: ${({ theme }) => theme.gridUnit * 5 + 1}px;\n  white-space: nowrap;\n  display: inline-block;\n\n  .toggle-button {\n    display: inline-block;\n    border-radius: ${({ theme }) => theme.gridUnit / 2}px;\n    padding: ${({ theme }) => theme.gridUnit}px;\n    padding-bottom: ${({ theme }) => theme.gridUnit * 0.5}px;\n\n    &:first-of-type {\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n\n  .active {\n    background-color: ${({ theme }) => theme.colors.grayscale.base};\n    svg {\n      color: ${({ theme }) => theme.colors.grayscale.light5};\n    }\n  }\n`;\n\nconst EmptyWrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 40}px 0;\n\n  &.table {\n    background: ${({ theme }) => theme.colors.grayscale.light5};\n  }\n`;\n\nconst ViewModeToggle = ({\n  mode,\n  setMode,\n}: {\n  mode: 'table' | 'card';\n  setMode: (mode: 'table' | 'card') => void;\n}) => (\n  <ViewModeContainer>\n    <div\n      role=\"button\"\n      tabIndex={0}\n      onClick={e => {\n        e.currentTarget.blur();\n        setMode('card');\n      }}\n      className={cx('toggle-button', { active: mode === 'card' })}\n    >\n      <Icons.CardView />\n    </div>\n    <div\n      role=\"button\"\n      tabIndex={0}\n      onClick={e => {\n        e.currentTarget.blur();\n        setMode('table');\n      }}\n      className={cx('toggle-button', { active: mode === 'table' })}\n    >\n      <Icons.ListView />\n    </div>\n  </ViewModeContainer>\n);\n\nexport interface ListViewProps<T extends object = any> {\n  columns: any[];\n  data: T[];\n  count: number;\n  pageSize: number;\n  fetchData: (conf: FetchDataConfig) => any;\n  loading: boolean;\n  className?: string;\n  initialSort?: SortColumn[];\n  filters?: Filters;\n  bulkActions?: Array<{\n    key: string;\n    name: React.ReactNode;\n    onSelect: (rows: any[]) => any;\n    type?: 'primary' | 'secondary' | 'danger';\n  }>;\n  bulkSelectEnabled?: boolean;\n  disableBulkSelect?: () => void;\n  renderBulkSelectCopy?: (selects: any[]) => React.ReactNode;\n  renderCard?: (row: T & { loading: boolean }) => React.ReactNode;\n  cardSortSelectOptions?: Array<CardSortSelectOption>;\n  defaultViewMode?: ViewModeType;\n  highlightRowId?: number;\n  showThumbnails?: boolean;\n  emptyState?: EmptyStateProps;\n}\n\nfunction ListView<T extends object = any>({\n  columns,\n  data,\n  count,\n  pageSize: initialPageSize,\n  fetchData,\n  loading,\n  initialSort = [],\n  className = '',\n  filters = [],\n  bulkActions = [],\n  bulkSelectEnabled = false,\n  disableBulkSelect = () => {},\n  renderBulkSelectCopy = selected => t('%s Selected', selected.length),\n  renderCard,\n  showThumbnails,\n  cardSortSelectOptions,\n  defaultViewMode = 'card',\n  highlightRowId,\n  emptyState,\n}: ListViewProps<T>) {\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n    pageCount = 1,\n    gotoPage,\n    applyFilterValue,\n    selectedFlatRows,\n    toggleAllRowsSelected,\n    setViewMode,\n    state: { pageIndex, pageSize, internalFilters, viewMode },\n    query,\n  } = useListViewState({\n    bulkSelectColumnConfig,\n    bulkSelectMode: bulkSelectEnabled && Boolean(bulkActions.length),\n    columns,\n    count,\n    data,\n    fetchData,\n    initialPageSize,\n    initialSort,\n    initialFilters: filters,\n    renderCard: Boolean(renderCard),\n    defaultViewMode,\n  });\n  const filterable = Boolean(filters.length);\n  if (filterable) {\n    const columnAccessors = columns.reduce(\n      (acc, col) => ({ ...acc, [col.id || col.accessor]: true }),\n      {},\n    );\n    filters.forEach(f => {\n      if (!columnAccessors[f.id]) {\n        throw new ListViewError(\n          `Invalid filter config, ${f.id} is not present in columns`,\n        );\n      }\n    });\n  }\n\n  const filterControlsRef = useRef<{ clearFilters: () => void }>(null);\n\n  const handleClearFilterControls = useCallback(() => {\n    if (query.filters) {\n      filterControlsRef.current?.clearFilters();\n    }\n  }, [query.filters]);\n\n  const cardViewEnabled = Boolean(renderCard);\n\n  useEffect(() => {\n    // discard selections if bulk select is disabled\n    if (!bulkSelectEnabled) toggleAllRowsSelected(false);\n  }, [bulkSelectEnabled, toggleAllRowsSelected]);\n\n  return (\n    <ListViewStyles>\n      <div data-test={className} className={`superset-list-view ${className}`}>\n        <div className=\"header\">\n          {cardViewEnabled && (\n            <ViewModeToggle mode={viewMode} setMode={setViewMode} />\n          )}\n          <div className=\"controls\">\n            {filterable && (\n              <FilterControls\n                ref={filterControlsRef}\n                filters={filters}\n                internalFilters={internalFilters}\n                updateFilterValue={applyFilterValue}\n              />\n            )}\n            {viewMode === 'card' && cardSortSelectOptions && (\n              <CardSortSelect\n                initialSort={initialSort}\n                onChange={fetchData}\n                options={cardSortSelectOptions}\n                pageIndex={pageIndex}\n                pageSize={pageSize}\n              />\n            )}\n          </div>\n        </div>\n        <div className={`body ${rows.length === 0 ? 'empty' : ''}`}>\n          {bulkSelectEnabled && (\n            <BulkSelectWrapper\n              data-test=\"bulk-select-controls\"\n              type=\"info\"\n              closable\n              showIcon={false}\n              onClose={disableBulkSelect}\n              message={\n                <>\n                  <div className=\"selectedCopy\" data-test=\"bulk-select-copy\">\n                    {renderBulkSelectCopy(selectedFlatRows)}\n                  </div>\n                  {Boolean(selectedFlatRows.length) && (\n                    <>\n                      <span\n                        data-test=\"bulk-select-deselect-all\"\n                        role=\"button\"\n                        tabIndex={0}\n                        className=\"deselect-all\"\n                        onClick={() => toggleAllRowsSelected(false)}\n                      >\n                        {t('Deselect all')}\n                      </span>\n                      <div className=\"divider\" />\n                      {bulkActions.map(action => (\n                        <Button\n                          data-test=\"bulk-select-action\"\n                          key={action.key}\n                          buttonStyle={action.type}\n                          cta\n                          onClick={() =>\n                            action.onSelect(\n                              selectedFlatRows.map(r => r.original),\n                            )\n                          }\n                        >\n                          {action.name}\n                        </Button>\n                      ))}\n                    </>\n                  )}\n                </>\n              }\n            />\n          )}\n          {viewMode === 'card' && (\n            <CardCollection\n              bulkSelectEnabled={bulkSelectEnabled}\n              prepareRow={prepareRow}\n              renderCard={renderCard}\n              rows={rows}\n              loading={loading}\n              showThumbnails={showThumbnails}\n            />\n          )}\n          {viewMode === 'table' && (\n            <TableCollection\n              getTableProps={getTableProps}\n              getTableBodyProps={getTableBodyProps}\n              prepareRow={prepareRow}\n              headerGroups={headerGroups}\n              rows={rows}\n              columns={columns}\n              loading={loading}\n              highlightRowId={highlightRowId}\n            />\n          )}\n          {!loading && rows.length === 0 && (\n            <EmptyWrapper className={viewMode}>\n              {query.filters ? (\n                <EmptyStateBig\n                  title={t('No results match your filter criteria')}\n                  description={t('Try different criteria to display results.')}\n                  image=\"filter-results.svg\"\n                  buttonAction={() => handleClearFilterControls()}\n                  buttonText={t('clear all filters')}\n                />\n              ) : (\n                <EmptyStateBig\n                  {...emptyState}\n                  title={emptyState?.title || t('No Data')}\n                  image={emptyState?.image || 'filter-results.svg'}\n                />\n              )}\n            </EmptyWrapper>\n          )}\n        </div>\n      </div>\n\n      {rows.length > 0 && (\n        <div className=\"pagination-container\">\n          <Pagination\n            totalPages={pageCount || 0}\n            currentPage={pageCount ? pageIndex + 1 : 0}\n            onChange={(p: number) => gotoPage(p - 1)}\n            hideFirstAndLastPageLinks\n          />\n          <div className=\"row-count-container\">\n            {!loading &&\n              t(\n                '%s-%s of %s',\n                pageSize * pageIndex + (rows.length && 1),\n                pageSize * pageIndex + rows.length,\n                count,\n              )}\n          </div>\n        </div>\n      )}\n    </ListViewStyles>\n  );\n}\n\nexport default ListView;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ReactNode } from 'react';\n\nexport interface SortColumn {\n  id: string;\n  desc?: boolean;\n}\n\nexport type SortColumns = SortColumn[];\n\nexport interface SelectOption {\n  label: string;\n  value: any;\n}\n\nexport interface CardSortSelectOption {\n  desc: boolean;\n  id: any;\n  label: string;\n  value: any;\n}\n\nexport interface Filter {\n  Header: ReactNode;\n  id: string;\n  urlDisplay?: string;\n  operator?: FilterOperator;\n  input?:\n    | 'text'\n    | 'textarea'\n    | 'select'\n    | 'checkbox'\n    | 'search'\n    | 'datetime_range';\n  unfilteredLabel?: string;\n  selects?: SelectOption[];\n  onFilterOpen?: () => void;\n  fetchSelects?: (\n    filterValue: string,\n    page: number,\n    pageSize: number,\n  ) => Promise<{ data: SelectOption[]; totalCount: number }>;\n  paginate?: boolean;\n}\n\nexport type Filters = Filter[];\n\nexport type ViewModeType = 'card' | 'table';\n\nexport interface FilterValue {\n  id: string;\n  urlDisplay?: string;\n  operator?: string;\n  value:\n    | string\n    | boolean\n    | number\n    | null\n    | undefined\n    | string[]\n    | number[]\n    | { label: string; value: string | number };\n}\n\nexport interface FetchDataConfig {\n  pageIndex: number;\n  pageSize: number;\n  sortBy: SortColumns;\n  filters: FilterValue[];\n}\n\nexport interface InternalFilter extends FilterValue {\n  Header?: string;\n}\n\nexport enum FilterOperator {\n  startsWith = 'sw',\n  endsWith = 'ew',\n  contains = 'ct',\n  equals = 'eq',\n  notStartsWith = 'nsw',\n  notEndsWith = 'new',\n  notContains = 'nct',\n  notEquals = 'neq',\n  greaterThan = 'gt',\n  lessThan = 'lt',\n  relationManyMany = 'rel_m_m',\n  relationOneMany = 'rel_o_m',\n  titleOrSlug = 'title_or_slug',\n  nameOrDescription = 'name_or_description',\n  allText = 'all_text',\n  chartAllText = 'chart_all_text',\n  datasetIsNullOrEmpty = 'dataset_is_null_or_empty',\n  between = 'between',\n  dashboardIsFav = 'dashboard_is_favorite',\n  chartIsFav = 'chart_is_favorite',\n  chartIsCertified = 'chart_is_certified',\n  dashboardIsCertified = 'dashboard_is_certified',\n  datasetIsCertified = 'dataset_is_certified',\n}\n"],"names":["CardContainer","style","theme","showThumbnails","gridUnit","CardWrapper","colors","primary","base","CardCollection","bulkSelectEnabled","loading","prepareRow","renderCard","rows","length","Array","map","e","i","key","row","className","isSelected","id","onClick","handleClick","event","toggleRowSelected","preventDefault","stopPropagation","role","original","RisonParam","encode","data","undefined","replace","decode","dataStr","isArray","ListViewError","Error","name","mergeCreateFilterValues","list","updateObj","urlDisplay","operator","value","convertFiltersRison","filterObj","filters","refs","Object","keys","forEach","filter","push","currentFilterId","Container","SearchIcon","Icons","grayscale","light1","StyledInput","SearchFilter","Header","initialValue","onSubmit","ref","setValue","useState","handleSubmit","trim","useImperativeHandle","clearFilter","Form","allowClear","placeholder","t","onChange","currentTarget","onPressEnter","onBlur","prefix","iconSize","forwardRef","FilterContainer","typography","sizes","s","SelectFilter","fetchSelects","onSelect","selects","selectedOption","setSelectedOption","onClear","fetchAndFormatSelects","useMemo","async","inputValue","page","pageSize","selectValues","totalCount","ariaLabel","labelInValue","header","selected","label","options","showSearch","RangeFilterContainer","DateRangeFilter","momentValue","showTime","momentRange","changeValue","valueOf","UIFilters","internalFilters","updateFilterValue","filterRefs","from","createRef","clearFilters","current","input","paginate","index","Select","option","Search","DateRange","SortContainer","CardSortSelect","initialSort","pageIndex","defaultSort","find","formattedOptions","originalOption","sortBy","desc","handleOnChange","ListViewStyles","BulkSelectWrapper","Alert","dark1","light4","light2","bulkSelectColumnConfig","Cell","IndeterminateCheckbox","getToggleRowSelectedProps","getToggleAllRowsSelectedProps","size","ViewModeContainer","light5","EmptyWrapper","ViewModeToggle","mode","setMode","tabIndex","blur","active","columns","count","initialPageSize","fetchData","bulkActions","disableBulkSelect","renderBulkSelectCopy","cardSortSelectOptions","defaultViewMode","highlightRowId","emptyState","getTableProps","getTableBodyProps","headerGroups","pageCount","gotoPage","applyFilterValue","selectedFlatRows","toggleAllRowsSelected","setViewMode","state","viewMode","query","initialFilters","bulkSelectMode","setQuery","sortColumn","sortOrder","initialSortBy","initialState","columnsWithSelect","columnsWithFilter","f","canPreviousPage","canNextPage","setAllFilters","useTable","disableFilters","disableSortRemove","manualFilters","manualPagination","manualSortBy","autoResetFilters","Math","ceil","useFilters","useSortBy","usePagination","useRowState","useRowSelect","setInternalFilters","useEffect","queryParams","method","currentInternalFilters","update","updatedFilters","element","_","slice","updateInList","flat","useListViewState","Boolean","filterable","columnAccessors","reduce","acc","col","accessor","filterControlsRef","useRef","handleClearFilterControls","useCallback","cardViewEnabled","type","closable","showIcon","onClose","message","action","Button","buttonStyle","cta","r","TableCollection","EmptyState","title","description","image","buttonAction","buttonText","Pagination","totalPages","currentPage","p","hideFirstAndLastPageLinks","FilterOperator"],"sourceRoot":""}