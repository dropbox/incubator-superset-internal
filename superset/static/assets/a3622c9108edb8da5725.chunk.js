"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6961],{56961:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var s=n(43323),a=n(15078),r=n.n(a),l=n(45697),i=n.n(l),o=n(28062),c=n(67190),p=n(45636),h=n(45511);function u(t,e,n){t.each((function(){const t=r().select(this),s=t.text().split(/\s+/);let a=[],l=0;const i=t.attr("x"),o=t.attr("y"),c=parseFloat(t.attr("dy"));let p=t.text(null).append("tspan").attr("x",i).attr("y",o).attr("dy",`${c}em`),h=!1;s.forEach((n=>{a.push(n),p.text(a.join(" ")),p.node().getComputedTextLength()>e&&(l+=1,a.pop(),p.text(a.join(" ")),a=[n],p=t.append("tspan").attr("x",i).attr("y",o).attr("dy",`${1*l+c}em`).text(n),h=!0)})),h||void 0===n||p.attr("y",n)}))}const d={data:i().arrayOf(i().array),width:i().number,height:i().number,colorScheme:i().string,linearColorScheme:i().string,numberFormat:i().string,metrics:i().arrayOf(i().oneOfType([i().string,i().object]))};function m(t){return"string"==typeof t||t instanceof String?t:t.label}function g(t,e){const n=r().select(t),{data:s,width:a,height:l,colorScheme:i,linearColorScheme:d,metrics:g,numberFormat:y,sliceId:f}=e,v=function(t){return t>500?"l":t>200&&t<=500?"m":"s"}(a),x="s"===v;n.attr("class",`superset-legacy-chart-sunburst ${v}`);const $=a,b=l,T=.085*b,w=$-5-5,N=b-10-10-T,C=Math.min(w,N)/2;let k,A,S,P,W,R,I,M=!0;const Z=o.getScale(i);let _;const j=r().layout.partition().size([2*Math.PI,C*C]).value((t=>t.m1)),E=r().svg.arc().startAngle((t=>t.x)).endAngle((t=>t.x+t.dx)).innerRadius((t=>Math.sqrt(t.y))).outerRadius((t=>Math.sqrt(t.y+t.dy))),O=(0,c.JB)(y||p.Z.SI_3_DIGIT),U=(0,c.JB)(p.Z.PERCENT_3_POINT);n.select("svg").remove();const D=n.append("svg:svg").attr("width",$).attr("height",b);function F(t,e){const n=[];return x?(n.push("0,0"),n.push(`${a},0`),n.push(`${a},0`),n.push(`${a},${A.height}`),n.push(`0,${A.height}`)):(n.push("0,0"),n.push(`${A.width},0`),n.push(`${A.width+A.tipTailWidth},${A.height/2}`),n.push(`${A.width},${A.height}`),n.push(`0,${A.height}`),e>0&&n.push(`${A.tipTailWidth},${A.height/2}`)),n.join(" ")}function q(t){const e=function(t){const e=[];let n=t;for(;n.parent;)e.unshift(n),n=n.parent;return e}(t),n=e[e.length-2]||null,s=(t.m1/S).toPrecision(3),l=n?(t.m1/n.m1).toPrecision(3):null,i=U(s),o=n?U(l):"",c=function(t){return t>500?["0","20","40","60"]:t>200&&t<=500?["0","15","30","45"]:["0","10","20","30"]}(a);let p=0;const h=Math.abs(t.m1-t.m2)<1e-5;I.selectAll("*").remove(),p+=1,I.append("text").attr("class","path-abs-percent").attr("y",c[p]).text(`${i} of total`),o&&(p+=1,I.append("text").attr("class","path-cond-percent").attr("y",c[p]).text(`${o} of parent`)),p+=1,I.append("text").attr("class","path-metrics").attr("y",c[p]).text(`${m(g[0])}: ${O(t.m1)}${h?"":`, ${m(g[1])}: ${O(t.m2)}`}`),p+=1,I.append("text").attr("class","path-ratio").attr("y",c[p]).text(h?"":`${m(g[1])}/${m(g[0])}: ${U(t.m2/t.m1)}`),R.selectAll("path").style("stroke-width",null).style("stroke",null).style("opacity",.3),R.selectAll("path").filter((t=>e.includes(t))).style("opacity",1).style("stroke","#aaa"),function(t,e){const n=x?a:A.width,s=P.selectAll("g").data(t,(t=>t.name+t.depth)),l=s.enter().append("svg:g");l.append("svg:polygon").attr("points",F).style("fill",(t=>M?Z(t.name,f):_(t.m2/t.m1))),l.append("svg:text").attr("x",(n+A.tipTailWidth)/2).attr("y",A.height/4).attr("dy","0.35em").style("fill",(t=>r().hsl(M?Z(t.name,f):_(t.m2/t.m1)).l<.5?"white":"black")).attr("class","step-label").text((t=>t.name.replace(/_/g," "))).call(u,n,A.height/2),s.attr("transform",((t,e)=>x?`translate(0, ${e*(A.height+A.spacing)})`:`translate(${e*(A.width+A.spacing)}, 0)`)),s.exit().remove(),P.select(".end-label").attr("x",(()=>x?(n+A.tipTailWidth)/2:(t.length+.5)*(A.width+A.spacing))).attr("y",(()=>x?(t.length+1)*A.height:A.height/2)).attr("dy","0.35em").text(e),P.style("visibility",null)}(e,i)}function B(){P.style("visibility","hidden"),I.selectAll("*").remove(),R.selectAll("path").on("mouseenter",null),R.selectAll("path").transition().duration(200).style("opacity",1).style("stroke",null).style("stroke-width",null).each("end",(function(){r().select(this).on("mouseenter",q)}))}var J;J=s[0],k=J.length-2+1,A={width:w/k,height:.8*T,spacing:3,tipTailWidth:10},P=D.append("svg:g").attr("class","breadcrumbs").attr("transform","translate(5,10)"),P.append("svg:text").attr("class","end-label"),function(t){const e=function(t){const e={name:"root",children:[]};return t.forEach((t=>{const n=Number(t[t.length-2]),s=Number(t[t.length-1]),a=t.slice(0,-2);if(Number.isNaN(n))return;let r=e;for(let t=0;t<a.length;t+=1){const e=r.children||[],l=a[t].toString();let i;t>=a.length-1||0===a[t+1]?0!==l&&(i={name:l,m1:n,m2:s},e.push(i)):(i=e.find((e=>e.name===l&&e.level===t)),i||(i={name:l,children:[],level:t},e.push(i)),r=i)}})),function t(e){if(e.children){let n,s=0,a=0;for(let r=0;r<e.children.length;r+=1)n=t(e.children[r]),s+=n[0],a+=n[1];e.m1=s,e.m2=a}return[e.m1,e.m2]}(e),e}(t);k=t[0].length-2,W=D.append("svg:g").attr("class","sunburst-vis").attr("transform",`translate(${5+w/2},${10+(x?T*k:T)+N/2})`).on("mouseleave",B),R=W.append("svg:g").attr("id","arcs"),I=W.append("svg:g").attr("class","center-label"),R.append("svg:circle").attr("r",C).style("opacity",0);const n=j.nodes(e).filter((t=>t.dx>.005));if(g[0]!==g[1]&&g[1]&&!i){M=!1;const t=r().extent(n,(t=>t.m2/t.m1));_=(0,h.Z)().get(d).createLinearScale(t)}R.selectAll("path").data(n).enter().append("svg:path").attr("display",(t=>t.depth?null:"none")).attr("d",E).attr("fill-rule","evenodd").style("fill",(t=>M?Z(t.name,f):_(t.m2/t.m1))).style("opacity",1).on("mouseenter",q),S=e.value}(s)}g.displayName="Sunburst",g.propTypes=d;const y=g,f=(0,s.Z)(y)},43323:(t,e,n)=>{n.d(e,{Z:()=>r});var s=n(67294),a=n(11965);function r(t,e){class n extends s.Component{constructor(t){super(t),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=e&&e.componentWillUnmount&&e.componentWillUnmount.bind(this)()}setContainerRef(t){this.container=t}execute(){this.container&&t(this.container,this.props)}render(){const{id:t,className:e}=this.props;return(0,a.tZ)("div",{ref:this.setContainerRef,id:t,className:e})}}const r=n;return t.displayName&&(r.displayName=t.displayName),t.propTypes&&(r.propTypes={...r.propTypes,...t.propTypes}),t.defaultProps&&(r.defaultProps=t.defaultProps),n}}}]);