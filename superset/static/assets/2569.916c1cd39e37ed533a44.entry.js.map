{"version":3,"file":"2569.916c1cd39e37ed533a44.entry.js","mappings":"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","sources":["webpack://superset/./src/GlobalStyles.tsx","webpack://superset/./src/components/ErrorMessage/IssueCode.tsx","webpack://superset/./src/components/ErrorMessage/TimeoutErrorMessage.tsx","webpack://superset/./src/components/ErrorMessage/DatabaseErrorMessage.tsx","webpack://superset/./src/components/ErrorMessage/ParameterErrorMessage.tsx","webpack://superset/./src/components/ErrorMessage/DatasetNotFoundErrorMessage.tsx","webpack://superset/./src/setup/setupApp.ts","webpack://superset/./src/setup/setupErrorMessages.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { css } from '@superset-ui/core';\nimport { Global } from '@emotion/react';\n\nexport const GlobalStyles = () => (\n  <Global\n    styles={theme => css`\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6,\n      strong,\n      th {\n        font-weight: ${theme.typography.weights.bold};\n      }\n    `}\n  />\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\n\ninterface IssueCodeProps {\n  code: number;\n  message: string;\n}\n\nexport default function IssueCode({ code, message }: IssueCodeProps) {\n  return (\n    <>\n      {message}{' '}\n      <a\n        href={`https://superset.apache.org/docs/miscellaneous/issue-codes#issue-${code}`}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        <i className=\"fa fa-external-link\" />\n      </a>\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, tn } from '@superset-ui/core';\n\nimport { ErrorMessageComponentProps } from './types';\nimport IssueCode from './IssueCode';\nimport ErrorAlert from './ErrorAlert';\n\ninterface TimeoutErrorExtra {\n  issue_codes: {\n    code: number;\n    message: string;\n  }[];\n  owners?: string[];\n  timeout: number;\n}\n\nfunction TimeoutErrorMessage({\n  error,\n  source,\n}: ErrorMessageComponentProps<TimeoutErrorExtra>) {\n  const { extra, level } = error;\n\n  const isVisualization = (\n    ['dashboard', 'explore'] as (string | undefined)[]\n  ).includes(source);\n\n  const subtitle = isVisualization\n    ? tn(\n        'We’re having trouble loading this visualization. Queries are set to timeout after %s second.',\n        'We’re having trouble loading this visualization. Queries are set to timeout after %s seconds.',\n        extra.timeout,\n        extra.timeout,\n      )\n    : tn(\n        'We’re having trouble loading these results. Queries are set to timeout after %s second.',\n        'We’re having trouble loading these results. Queries are set to timeout after %s seconds.',\n        extra.timeout,\n        extra.timeout,\n      );\n\n  const body = (\n    <>\n      <p>\n        {t('This may be triggered by:')}\n        <br />\n        {extra.issue_codes\n          .map<React.ReactNode>(issueCode => <IssueCode {...issueCode} />)\n          .reduce((prev, curr) => [prev, <br />, curr])}\n      </p>\n      {isVisualization && extra.owners && (\n        <>\n          <br />\n          <p>\n            {tn(\n              'Please reach out to the Chart Owner for assistance.',\n              'Please reach out to the Chart Owners for assistance.',\n              extra.owners.length,\n            )}\n          </p>\n          <p>\n            {tn(\n              'Chart Owner: %s',\n              'Chart Owners: %s',\n              extra.owners.length,\n              extra.owners.join(', '),\n            )}\n          </p>\n        </>\n      )}\n    </>\n  );\n\n  const copyText = t('%(subtitle)s\\nThis may be triggered by:\\n %(issue)s', {\n    subtitle,\n    issue: extra.issue_codes.map(issueCode => issueCode.message).join('\\n'),\n  });\n\n  return (\n    <ErrorAlert\n      title={t('Timeout error')}\n      subtitle={subtitle}\n      level={level}\n      source={source}\n      copyText={copyText}\n      body={body}\n    />\n  );\n}\n\nexport default TimeoutErrorMessage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, tn } from '@superset-ui/core';\n\nimport { ErrorMessageComponentProps } from './types';\nimport IssueCode from './IssueCode';\nimport ErrorAlert from './ErrorAlert';\n\ninterface DatabaseErrorExtra {\n  owners?: string[];\n  issue_codes: {\n    code: number;\n    message: string;\n  }[];\n  engine_name: string | null;\n}\n\nfunction DatabaseErrorMessage({\n  error,\n  source = 'dashboard',\n  subtitle,\n}: ErrorMessageComponentProps<DatabaseErrorExtra>) {\n  const { extra, level, message } = error;\n\n  const isVisualization = ['dashboard', 'explore'].includes(source);\n\n  const body = extra && (\n    <>\n      <p>\n        {t('This may be triggered by:')}\n        <br />\n        {extra.issue_codes\n          .map<React.ReactNode>(issueCode => (\n            <IssueCode {...issueCode} key={issueCode.code} />\n          ))\n          .reduce((prev, curr) => [prev, <br />, curr])}\n      </p>\n      {isVisualization && extra.owners && (\n        <>\n          <br />\n          <p>\n            {tn(\n              'Please reach out to the Chart Owner for assistance.',\n              'Please reach out to the Chart Owners for assistance.',\n              extra.owners.length,\n            )}\n          </p>\n          <p>\n            {tn(\n              'Chart Owner: %s',\n              'Chart Owners: %s',\n              extra.owners.length,\n              extra.owners.join(', '),\n            )}\n          </p>\n        </>\n      )}\n    </>\n  );\n\n  const copyText =\n    extra && extra.issue_codes\n      ? t('%(message)s\\nThis may be triggered by: \\n%(issues)s', {\n          message,\n          issues: extra.issue_codes\n            .map(issueCode => issueCode.message)\n            .join('\\n'),\n        })\n      : message;\n\n  return (\n    <ErrorAlert\n      title={t('%s Error', (extra && extra.engine_name) || t('DB engine'))}\n      subtitle={subtitle}\n      level={level}\n      source={source}\n      copyText={copyText}\n      body={body}\n    />\n  );\n}\n\nexport default DatabaseErrorMessage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, tn } from '@superset-ui/core';\nimport levenshtein from 'js-levenshtein';\n\nimport { ErrorMessageComponentProps } from './types';\nimport IssueCode from './IssueCode';\nimport ErrorAlert from './ErrorAlert';\n\ninterface ParameterErrorExtra {\n  undefined_parameters?: string[];\n  template_parameters?: object;\n  issue_codes: {\n    code: number;\n    message: string;\n  }[];\n}\n\nconst maxDistanceForSuggestion = 2;\nconst findMatches = (undefinedParameters: string[], templateKeys: string[]) => {\n  const matches: { [undefinedParameter: string]: string[] } = {};\n  undefinedParameters.forEach(undefinedParameter => {\n    templateKeys.forEach(templateKey => {\n      if (\n        levenshtein(undefinedParameter, templateKey) <= maxDistanceForSuggestion\n      ) {\n        if (!matches[undefinedParameter]) {\n          matches[undefinedParameter] = [];\n        }\n        matches[undefinedParameter].push(`\"${templateKey}\"`);\n      }\n    });\n  });\n  return matches;\n};\n\nfunction ParameterErrorMessage({\n  error,\n  source = 'sqllab',\n  subtitle,\n}: ErrorMessageComponentProps<ParameterErrorExtra>) {\n  const { extra = { issue_codes: [] }, level, message } = error;\n\n  const triggerMessage = tn(\n    'This was triggered by:',\n    'This may be triggered by:',\n    extra.issue_codes.length,\n  );\n\n  const matches = findMatches(\n    extra.undefined_parameters || [],\n    Object.keys(extra.template_parameters || {}),\n  );\n\n  const body = (\n    <>\n      <p>\n        {Object.keys(matches).length > 0 && (\n          <>\n            <p>{t('Did you mean:')}</p>\n            <ul>\n              {Object.entries(matches).map(\n                ([undefinedParameter, templateKeys]) => (\n                  <li>\n                    {tn(\n                      '%(suggestion)s instead of \"%(undefinedParameter)s?\"',\n                      '%(firstSuggestions)s or %(lastSuggestion)s instead of \"%(undefinedParameter)s\"?',\n                      templateKeys.length,\n                      {\n                        suggestion: templateKeys.join(', '),\n                        firstSuggestions: templateKeys.slice(0, -1).join(', '),\n                        lastSuggestion: templateKeys[templateKeys.length - 1],\n                        undefinedParameter,\n                      },\n                    )}\n                  </li>\n                ),\n              )}\n            </ul>\n            <br />\n          </>\n        )}\n        {triggerMessage}\n        <br />\n        {extra.issue_codes.length > 0 &&\n          extra.issue_codes\n            .map<React.ReactNode>(issueCode => <IssueCode {...issueCode} />)\n            .reduce((prev, curr) => [prev, <br />, curr])}\n      </p>\n    </>\n  );\n\n  const copyText = `${message}\n${triggerMessage}\n${extra.issue_codes.map(issueCode => issueCode.message).join('\\n')}`;\n\n  return (\n    <ErrorAlert\n      title={t('Parameter error')}\n      subtitle={subtitle}\n      level={level}\n      source={source}\n      copyText={copyText}\n      body={body}\n    />\n  );\n}\n\nexport default ParameterErrorMessage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport { ErrorMessageComponentProps } from './types';\nimport ErrorAlert from './ErrorAlert';\n\nfunction DatasetNotFoundErrorMessage({\n  error,\n  source = 'dashboard',\n  subtitle,\n}: ErrorMessageComponentProps) {\n  const { level, message } = error;\n\n  return (\n    <ErrorAlert\n      title={t('Missing dataset')}\n      subtitle={subtitle}\n      level={level}\n      source={source}\n      copyText={message}\n      body={null}\n    />\n  );\n}\n\nexport default DatasetNotFoundErrorMessage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint global-require: 0 */\nimport $ from 'jquery';\nimport { SupersetClient } from '@superset-ui/core';\nimport {\n  getClientErrorObject,\n  ClientErrorObject,\n} from 'src/utils/getClientErrorObject';\nimport setupErrorMessages from 'src/setup/setupErrorMessages';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ndeclare global {\n  interface Window {\n    $: any;\n    jQuery: any;\n  }\n}\n\nfunction showApiMessage(resp: ClientErrorObject) {\n  const template =\n    '<div class=\"alert\"> ' +\n    '<button type=\"button\" class=\"close\" ' +\n    'data-dismiss=\"alert\">\\xD7</button> </div>';\n  const severity = resp.severity || 'info';\n  $(template)\n    .addClass(`alert-${severity}`)\n    .append(resp.message || '')\n    .appendTo($('#alert-container'));\n}\n\nfunction toggleCheckbox(apiUrlPrefix: string, selector: string) {\n  SupersetClient.get({\n    endpoint: apiUrlPrefix + ($(selector)[0] as HTMLInputElement).checked,\n  })\n    .then(() => undefined)\n    .catch(response =>\n      getClientErrorObject(response).then(parsedResp => {\n        if (parsedResp && parsedResp.message) {\n          showApiMessage(parsedResp);\n        }\n      }),\n    );\n}\n\nexport default function setupApp() {\n  $(document).ready(function () {\n    $(':checkbox[data-checkbox-api-prefix]').change(function (\n      this: HTMLElement,\n    ) {\n      const $this = $(this);\n      const prefix = $this.data('checkbox-api-prefix');\n      const id = $this.attr('id');\n      toggleCheckbox(prefix, `#${id}`);\n    });\n\n    // for language picker dropdown\n    $('#language-picker a').click(function (\n      ev: JQuery.ClickEvent<\n        HTMLLinkElement,\n        null,\n        HTMLLinkElement,\n        HTMLLinkElement\n      >,\n    ) {\n      ev.preventDefault();\n      SupersetClient.get({\n        url: ev.currentTarget.href,\n        parseMethod: null,\n      }).then(() => {\n        window.location.reload();\n      });\n    });\n  });\n\n  // A set of hacks to allow apps to run within a FAB template\n  // this allows for the server side generated menus to function\n  window.$ = $;\n  window.jQuery = $;\n  require('bootstrap');\n\n  // setup appwide custom error messages\n  setupErrorMessages();\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport getErrorMessageComponentRegistry from 'src/components/ErrorMessage/getErrorMessageComponentRegistry';\nimport { ErrorTypeEnum } from 'src/components/ErrorMessage/types';\nimport TimeoutErrorMessage from 'src/components/ErrorMessage/TimeoutErrorMessage';\nimport DatabaseErrorMessage from 'src/components/ErrorMessage/DatabaseErrorMessage';\nimport ParameterErrorMessage from 'src/components/ErrorMessage/ParameterErrorMessage';\nimport DatasetNotFoundErrorMessage from 'src/components/ErrorMessage/DatasetNotFoundErrorMessage';\n\nimport setupErrorMessagesExtra from './setupErrorMessagesExtra';\n\nexport default function setupErrorMessages() {\n  const errorMessageComponentRegistry = getErrorMessageComponentRegistry();\n\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.FRONTEND_TIMEOUT_ERROR,\n    TimeoutErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.BACKEND_TIMEOUT_ERROR,\n    TimeoutErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.DATABASE_NOT_FOUND_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.GENERIC_DB_ENGINE_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.GENERIC_BACKEND_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.COLUMN_DOES_NOT_EXIST_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.TABLE_DOES_NOT_EXIST_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.MISSING_TEMPLATE_PARAMS_ERROR,\n    ParameterErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.INVALID_TEMPLATE_PARAMS_ERROR,\n    ParameterErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.RESULTS_BACKEND_NOT_CONFIGURED_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.DML_NOT_ALLOWED_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.INVALID_CTAS_QUERY_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.INVALID_CVAS_QUERY_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.QUERY_SECURITY_ACCESS_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_INVALID_HOSTNAME_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.RESULTS_BACKEND_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.ASYNC_WORKERS_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.SQLLAB_TIMEOUT_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_PORT_CLOSED_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_HOST_DOWN_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_INVALID_USERNAME_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_INVALID_PASSWORD_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_ACCESS_DENIED_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_UNKNOWN_DATABASE_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.SCHEMA_DOES_NOT_EXIST_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.OBJECT_DOES_NOT_EXIST_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.SYNTAX_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.CONNECTION_DATABASE_PERMISSIONS_ERROR,\n    DatabaseErrorMessage,\n  );\n  errorMessageComponentRegistry.registerValue(\n    ErrorTypeEnum.FAILED_FETCHING_DATASOURCE_INFO_ERROR,\n    DatasetNotFoundErrorMessage,\n  );\n  setupErrorMessagesExtra();\n}\n"],"names":["GlobalStyles","styles","theme","typography","weights","bold","IssueCode","code","message","href","rel","target","className","error","source","extra","level","isVisualization","includes","subtitle","tn","timeout","body","t","issue_codes","map","issueCode","reduce","prev","curr","owners","length","join","copyText","issue","ErrorAlert","title","key","issues","engine_name","triggerMessage","matches","undefinedParameters","templateKeys","forEach","undefinedParameter","templateKey","push","findMatches","undefined_parameters","Object","keys","template_parameters","entries","suggestion","firstSuggestions","slice","lastSuggestion","setupApp","document","ready","change","$this","this","apiUrlPrefix","selector","data","attr","SupersetClient","endpoint","checked","then","catch","response","getClientErrorObject","parsedResp","resp","severity","addClass","append","appendTo","showApiMessage","click","ev","preventDefault","url","currentTarget","parseMethod","window","location","reload","$","jQuery","errorMessageComponentRegistry","getErrorMessageComponentRegistry","registerValue","setupErrorMessages"],"sourceRoot":""}