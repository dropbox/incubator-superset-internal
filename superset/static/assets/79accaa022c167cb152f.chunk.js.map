{"version":3,"file":"79accaa022c167cb152f.chunk.js","mappings":"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","sources":["webpack://superset/./plugins/legacy-preset-chart-nvd3/src/PropTypes.js","webpack://superset/./plugins/legacy-preset-chart-nvd3/src/NVD3Vis.js","webpack://superset/./plugins/legacy-preset-chart-nvd3/src/ReactNVD3.jsx","webpack://superset/./packages/superset-ui-core/src/chart/components/reactify.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/sort-prop-types */\nimport PropTypes from 'prop-types';\nimport { ANNOTATION_TYPES } from './vendor/superset/AnnotationTypes';\n\nexport const numberOrAutoType = PropTypes.oneOfType([\n  PropTypes.number,\n  PropTypes.oneOf(['auto']),\n]);\n\nexport const stringOrObjectWithLabelType = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.shape({\n    label: PropTypes.string,\n  }),\n]);\n\nexport const rgbObjectType = PropTypes.shape({\n  r: PropTypes.number.isRequired,\n  g: PropTypes.number.isRequired,\n  b: PropTypes.number.isRequired,\n});\n\nexport const numericXYType = PropTypes.shape({\n  x: PropTypes.number,\n  y: PropTypes.number,\n});\n\nexport const categoryAndValueXYType = PropTypes.shape({\n  x: PropTypes.string,\n  y: PropTypes.number,\n});\n\nexport const boxPlotValueType = PropTypes.shape({\n  outliers: PropTypes.arrayOf(PropTypes.number),\n  Q1: PropTypes.number,\n  Q2: PropTypes.number,\n  Q3: PropTypes.number,\n  whisker_high: PropTypes.number,\n  whisker_low: PropTypes.number,\n});\n\nexport const bulletDataType = PropTypes.shape({\n  markerLabels: PropTypes.arrayOf(PropTypes.string),\n  markerLineLabels: PropTypes.arrayOf(PropTypes.string),\n  markerLines: PropTypes.arrayOf(PropTypes.number),\n  markers: PropTypes.arrayOf(PropTypes.number),\n  measures: PropTypes.arrayOf(PropTypes.number),\n  rangeLabels: PropTypes.arrayOf(PropTypes.string),\n  ranges: PropTypes.arrayOf(PropTypes.number),\n});\n\nexport const annotationLayerType = PropTypes.shape({\n  annotationType: PropTypes.oneOf(Object.keys(ANNOTATION_TYPES)),\n  color: PropTypes.string,\n  hideLine: PropTypes.bool,\n  name: PropTypes.string,\n  opacity: PropTypes.string,\n  show: PropTypes.bool,\n  showMarkers: PropTypes.bool,\n  sourceType: PropTypes.string,\n  style: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  width: PropTypes.number,\n});\n","/* eslint-disable react/sort-prop-types */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { kebabCase, throttle } from 'lodash';\nimport d3 from 'd3';\nimport moment from 'moment';\nimport nv from 'nvd3-fork';\nimport PropTypes from 'prop-types';\nimport {\n  CategoricalColorNamespace,\n  evalExpression,\n  getNumberFormatter,\n  getTimeFormatter,\n  isDefined,\n  NumberFormats,\n  smartDateVerboseFormatter,\n  t,\n} from '@superset-ui/core';\n\nimport 'nvd3-fork/build/nv.d3.css';\n\n/* eslint-disable-next-line */\nimport ANNOTATION_TYPES, {\n  applyNativeColumns,\n} from './vendor/superset/AnnotationTypes';\nimport isTruthy from './utils/isTruthy';\nimport {\n  cleanColorInput,\n  computeBarChartWidth,\n  computeYDomain,\n  computeStackedYDomain,\n  drawBarValues,\n  generateBubbleTooltipContent,\n  generateCompareTooltipContent,\n  generateRichLineTooltipContent,\n  generateTimePivotTooltip,\n  generateTooltipClassName,\n  generateAreaChartTooltipContent,\n  getMaxLabelSize,\n  getTimeOrNumberFormatter,\n  hideTooltips,\n  tipFactory,\n  tryNumify,\n  removeTooltip,\n  setAxisShowMaxMin,\n  stringifyTimeRange,\n  wrapTooltip,\n} from './utils';\nimport {\n  annotationLayerType,\n  boxPlotValueType,\n  bulletDataType,\n  categoryAndValueXYType,\n  rgbObjectType,\n  numericXYType,\n  numberOrAutoType,\n  stringOrObjectWithLabelType,\n} from './PropTypes';\n\nconst NO_DATA_RENDER_DATA = [\n  { text: 'No data', dy: '-.75em', class: 'header' },\n  {\n    text: 'Adjust filters or check the Datasource.',\n    dy: '.75em',\n    class: 'body',\n  },\n];\n\n// Override the noData render function to make a prettier UX\n// Code adapted from https://github.com/novus/nvd3/blob/master/src/utils.js#L653\nnv.utils.noData = function noData(chart, container) {\n  const opt = chart.options();\n  const margin = opt.margin();\n  const height = nv.utils.availableHeight(null, container, margin);\n  const width = nv.utils.availableWidth(null, container, margin);\n  const x = margin.left + width / 2;\n  const y = margin.top + height / 2;\n\n  // Remove any previously created chart components\n  container.selectAll('g').remove();\n\n  const noDataText = container\n    .selectAll('.nv-noData')\n    .data(NO_DATA_RENDER_DATA);\n\n  noDataText\n    .enter()\n    .append('text')\n    .attr('class', d => `nvd3 nv-noData ${d.class}`)\n    .attr('dy', d => d.dy)\n    .style('text-anchor', 'middle');\n\n  noDataText\n    .attr('x', x)\n    .attr('y', y)\n    .text(d => d.text);\n};\n\nconst { getColor, getScale } = CategoricalColorNamespace;\n\n// Limit on how large axes margins can grow as the chart window is resized\nconst MAX_MARGIN_PAD = 30;\nconst MIN_HEIGHT_FOR_BRUSH = 480;\nconst MAX_NO_CHARACTERS_IN_LABEL = 40;\n\nconst BREAKPOINTS = {\n  small: 340,\n};\n\nconst TIMESERIES_VIZ_TYPES = ['line', 'area', 'compare', 'bar', 'time_pivot'];\n\nconst CHART_ID_PREFIX = 'chart-id-';\n\nconst propTypes = {\n  data: PropTypes.oneOfType([\n    PropTypes.arrayOf(\n      PropTypes.oneOfType([\n        // pie\n        categoryAndValueXYType,\n        // dist-bar\n        PropTypes.shape({\n          key: PropTypes.string,\n          values: PropTypes.arrayOf(categoryAndValueXYType),\n        }),\n        // area, line, compare, bar\n        PropTypes.shape({\n          key: PropTypes.arrayOf(PropTypes.string),\n          values: PropTypes.arrayOf(numericXYType),\n        }),\n        // dual-line\n        PropTypes.shape({\n          classed: PropTypes.string,\n          key: PropTypes.string,\n          type: PropTypes.string,\n          values: PropTypes.arrayOf(numericXYType),\n          yAxis: PropTypes.number,\n        }),\n        // box-plot\n        PropTypes.shape({\n          label: PropTypes.string,\n          values: PropTypes.arrayOf(boxPlotValueType),\n        }),\n        // bubble\n        PropTypes.shape({\n          key: PropTypes.string,\n          values: PropTypes.arrayOf(PropTypes.object),\n        }),\n      ]),\n    ),\n    // bullet\n    bulletDataType,\n  ]),\n  width: PropTypes.number,\n  height: PropTypes.number,\n  annotationData: PropTypes.object,\n  annotationLayers: PropTypes.arrayOf(annotationLayerType),\n  bottomMargin: numberOrAutoType,\n  colorScheme: PropTypes.string,\n  comparisonType: PropTypes.string,\n  contribution: PropTypes.bool,\n  leftMargin: numberOrAutoType,\n  onError: PropTypes.func,\n  showLegend: PropTypes.bool,\n  showMarkers: PropTypes.bool,\n  useRichTooltip: PropTypes.bool,\n  vizType: PropTypes.oneOf([\n    'area',\n    'bar',\n    'box_plot',\n    'bubble',\n    'bullet',\n    'compare',\n    'column',\n    'dist_bar',\n    'line',\n    'time_pivot',\n    'pie',\n  ]),\n  xAxisFormat: PropTypes.string,\n  numberFormat: PropTypes.string,\n  xAxisLabel: PropTypes.string,\n  xAxisShowMinMax: PropTypes.bool,\n  xIsLogScale: PropTypes.bool,\n  xTicksLayout: PropTypes.oneOf(['auto', 'staggered', '45°']),\n  yAxisFormat: PropTypes.string,\n  yAxisBounds: PropTypes.arrayOf(PropTypes.number),\n  yAxisLabel: PropTypes.string,\n  yAxisShowMinMax: PropTypes.bool,\n  yIsLogScale: PropTypes.bool,\n  // 'dist-bar' only\n  orderBars: PropTypes.bool,\n  // 'bar' or 'dist-bar'\n  isBarStacked: PropTypes.bool,\n  showBarValue: PropTypes.bool,\n  // 'bar', 'dist-bar' or 'column'\n  reduceXTicks: PropTypes.bool,\n  // 'bar', 'dist-bar' or 'area'\n  showControls: PropTypes.bool,\n  // 'line' only\n  showBrush: PropTypes.oneOf([true, 'yes', false, 'no', 'auto']),\n  onBrushEnd: PropTypes.func,\n  // 'line-multi' or 'dual-line'\n  yAxis2Format: PropTypes.string,\n  // 'line', 'time-pivot', 'dual-line' or 'line-multi'\n  lineInterpolation: PropTypes.string,\n  // 'pie' only\n  isDonut: PropTypes.bool,\n  isPieLabelOutside: PropTypes.bool,\n  pieLabelType: PropTypes.oneOf([\n    'key',\n    'value',\n    'percent',\n    'key_value',\n    'key_percent',\n    'key_value_percent',\n  ]),\n  showLabels: PropTypes.bool,\n  // 'area' only\n  areaStackedStyle: PropTypes.string,\n  // 'bubble' only\n  entity: PropTypes.string,\n  maxBubbleSize: PropTypes.number,\n  xField: stringOrObjectWithLabelType,\n  yField: stringOrObjectWithLabelType,\n  sizeField: stringOrObjectWithLabelType,\n  // time-pivot only\n  baseColor: rgbObjectType,\n};\n\nconst NOOP = () => {};\nconst formatter = getNumberFormatter();\n\nfunction nvd3Vis(element, props) {\n  const {\n    data,\n    width: maxWidth,\n    height: maxHeight,\n    annotationData,\n    annotationLayers = [],\n    areaStackedStyle,\n    baseColor,\n    bottomMargin,\n    colorScheme,\n    comparisonType,\n    contribution,\n    entity,\n    isBarStacked,\n    isDonut,\n    isPieLabelOutside,\n    leftMargin,\n    lineInterpolation = 'linear',\n    markerLabels,\n    markerLines,\n    markerLineLabels,\n    markers,\n    maxBubbleSize,\n    onBrushEnd = NOOP,\n    onError = NOOP,\n    orderBars,\n    pieLabelType,\n    rangeLabels,\n    ranges,\n    reduceXTicks = false,\n    showBarValue,\n    showBrush,\n    showControls,\n    showLabels,\n    showLegend,\n    showMarkers,\n    sizeField,\n    useRichTooltip,\n    vizType,\n    xAxisFormat,\n    numberFormat,\n    xAxisLabel,\n    xAxisShowMinMax = false,\n    xField,\n    xIsLogScale,\n    xTicksLayout,\n    yAxisFormat,\n    yAxisBounds,\n    yAxisLabel,\n    yAxisShowMinMax = false,\n    yAxis2ShowMinMax = false,\n    yField,\n    yIsLogScale,\n    sliceId,\n  } = props;\n\n  const isExplore = document.querySelector('#explorer-container') !== null;\n  const container = element;\n  container.innerHTML = '';\n  const activeAnnotationLayers = annotationLayers.filter(layer => layer.show);\n\n  // Search for the chart id in a parent div from the nvd3 chart\n  let chartContainer = container;\n  let chartId = null;\n  while (chartContainer.parentElement) {\n    if (chartContainer.parentElement.id.startsWith(CHART_ID_PREFIX)) {\n      chartId = chartContainer.parentElement.id;\n      break;\n    }\n\n    chartContainer = chartContainer.parentElement;\n  }\n\n  let chart;\n  let width = maxWidth;\n  let colorKey = 'key';\n\n  container.style.width = `${maxWidth}px`;\n  container.style.height = `${maxHeight}px`;\n\n  function isVizTypes(types) {\n    return types.includes(vizType);\n  }\n\n  const drawGraph = function drawGraph() {\n    const d3Element = d3.select(element);\n    d3Element.classed('superset-legacy-chart-nvd3', true);\n    d3Element.classed(`superset-legacy-chart-nvd3-${kebabCase(vizType)}`, true);\n    let svg = d3Element.select('svg');\n    if (svg.empty()) {\n      svg = d3Element.append('svg');\n    }\n    const height = vizType === 'bullet' ? Math.min(maxHeight, 50) : maxHeight;\n    const isTimeSeries = isVizTypes(TIMESERIES_VIZ_TYPES);\n\n    // Handling xAxis ticks settings\n    const staggerLabels = xTicksLayout === 'staggered';\n    const xLabelRotation =\n      (xTicksLayout === 'auto' && isVizTypes(['column', 'dist_bar'])) ||\n      xTicksLayout === '45°'\n        ? 45\n        : 0;\n    if (xLabelRotation === 45 && isTruthy(showBrush)) {\n      onError(\n        t('You cannot use 45° tick layout along with the time range filter'),\n      );\n\n      return null;\n    }\n\n    const canShowBrush =\n      isTruthy(showBrush) ||\n      (showBrush === 'auto' &&\n        maxHeight >= MIN_HEIGHT_FOR_BRUSH &&\n        xTicksLayout !== '45°');\n    const numberFormatter = getNumberFormatter(numberFormat);\n\n    switch (vizType) {\n      case 'line':\n        if (canShowBrush) {\n          chart = nv.models.lineWithFocusChart();\n          if (staggerLabels) {\n            // Give a bit more room to focus area if X axis ticks are staggered\n            chart.focus.margin({ bottom: 40 });\n            chart.focusHeight(80);\n          }\n          chart.focus.xScale(d3.time.scale.utc());\n        } else {\n          chart = nv.models.lineChart();\n        }\n        chart.xScale(d3.time.scale.utc());\n        chart.interpolate(lineInterpolation);\n        chart.clipEdge(false);\n        break;\n\n      case 'time_pivot':\n        chart = nv.models.lineChart();\n        chart.xScale(d3.time.scale.utc());\n        chart.interpolate(lineInterpolation);\n        break;\n\n      case 'bar':\n        chart = nv.models\n          .multiBarChart()\n          .showControls(showControls)\n          .groupSpacing(0.1);\n\n        if (!reduceXTicks) {\n          width = computeBarChartWidth(data, isBarStacked, maxWidth);\n        }\n        chart.width(width);\n        chart.xAxis.showMaxMin(false);\n        chart.stacked(isBarStacked);\n        break;\n\n      case 'dist_bar':\n        chart = nv.models\n          .multiBarChart()\n          .showControls(showControls)\n          .reduceXTicks(reduceXTicks)\n          .groupSpacing(0.1); // Distance between each group of bars.\n\n        chart.xAxis.showMaxMin(false);\n\n        chart.stacked(isBarStacked);\n        if (orderBars) {\n          data.forEach(d => {\n            const newValues = [...d.values]; // need to copy values to avoid redux store changed.\n            // eslint-disable-next-line no-param-reassign\n            d.values = newValues.sort((a, b) =>\n              tryNumify(a.x) < tryNumify(b.x) ? -1 : 1,\n            );\n          });\n        }\n        if (!reduceXTicks) {\n          width = computeBarChartWidth(data, isBarStacked, maxWidth);\n        }\n        chart.width(width);\n        break;\n\n      case 'pie':\n        chart = nv.models.pieChart();\n        colorKey = 'x';\n        chart.valueFormat(numberFormatter);\n        if (isDonut) {\n          chart.donut(true);\n        }\n        chart.showLabels(showLabels);\n        chart.labelsOutside(isPieLabelOutside);\n        // Configure the minimum slice size for labels to show up\n        chart.labelThreshold(0.05);\n        chart.cornerRadius(true);\n\n        if (['key', 'value', 'percent'].includes(pieLabelType)) {\n          chart.labelType(pieLabelType);\n        } else if (pieLabelType === 'key_value') {\n          chart.labelType(d => `${d.data.x}: ${numberFormatter(d.data.y)}`);\n        } else {\n          // pieLabelType in ['key_percent', 'key_value_percent']\n          const total = d3.sum(data, d => d.y);\n          const percentFormatter = getNumberFormatter(\n            NumberFormats.PERCENT_2_POINT,\n          );\n          if (pieLabelType === 'key_percent') {\n            chart.tooltip.valueFormatter(d => percentFormatter(d));\n            chart.labelType(\n              d => `${d.data.x}: ${percentFormatter(d.data.y / total)}`,\n            );\n          } else {\n            // pieLabelType === 'key_value_percent'\n            chart.tooltip.valueFormatter(\n              d => `${numberFormatter(d)} (${percentFormatter(d / total)})`,\n            );\n            chart.labelType(\n              d =>\n                `${d.data.x}: ${numberFormatter(d.data.y)} (${percentFormatter(\n                  d.data.y / total,\n                )})`,\n            );\n          }\n        }\n        // Pie chart does not need top margin\n        chart.margin({ top: 0 });\n        break;\n\n      case 'column':\n        chart = nv.models.multiBarChart().reduceXTicks(false);\n        break;\n\n      case 'compare':\n        chart = nv.models.cumulativeLineChart();\n        chart.xScale(d3.time.scale.utc());\n        chart.useInteractiveGuideline(true);\n        chart.xAxis.showMaxMin(false);\n        break;\n\n      case 'bubble':\n        chart = nv.models.scatterChart();\n        chart.showDistX(false);\n        chart.showDistY(false);\n        chart.tooltip.contentGenerator(d =>\n          generateBubbleTooltipContent({\n            point: d.point,\n            entity,\n            xField,\n            yField,\n            sizeField,\n            xFormatter: getTimeOrNumberFormatter(xAxisFormat),\n            yFormatter: getTimeOrNumberFormatter(yAxisFormat),\n            sizeFormatter: formatter,\n          }),\n        );\n        chart.pointRange([5, maxBubbleSize ** 2]);\n        chart.pointDomain([\n          0,\n          d3.max(data, d => d3.max(d.values, v => v.size)),\n        ]);\n        break;\n\n      case 'area':\n        chart = nv.models.stackedAreaChart();\n        chart.showControls(showControls);\n        chart.style(areaStackedStyle);\n        chart.xScale(d3.time.scale.utc());\n        break;\n\n      case 'box_plot':\n        colorKey = 'label';\n        chart = nv.models.boxPlotChart();\n        chart.x(d => d.label);\n        chart.maxBoxWidth(75); // prevent boxes from being incredibly wide\n        break;\n\n      case 'bullet':\n        chart = nv.models.bulletChart();\n        data.rangeLabels = rangeLabels;\n        data.ranges = ranges;\n        data.markerLabels = markerLabels;\n        data.markerLines = markerLines;\n        data.markerLineLabels = markerLineLabels;\n        data.markers = markers;\n        break;\n\n      default:\n        throw new Error(`Unrecognized visualization for nvd3${vizType}`);\n    }\n    // Assuming the container has padding already other than for top margin\n    chart.margin({ left: 0, bottom: 0 });\n\n    if (showBarValue) {\n      drawBarValues(svg, data, isBarStacked, yAxisFormat);\n      chart.dispatch.on('stateChange.drawBarValues', () => {\n        drawBarValues(svg, data, isBarStacked, yAxisFormat);\n      });\n    }\n\n    if (canShowBrush && onBrushEnd !== NOOP) {\n      if (chart.focus) {\n        chart.focus.dispatch.on('brush', event => {\n          const timeRange = stringifyTimeRange(event.extent);\n          if (timeRange) {\n            event.brush.on('brushend', () => {\n              onBrushEnd(timeRange);\n            });\n          }\n        });\n      }\n    }\n\n    if (chart.xAxis && chart.xAxis.staggerLabels) {\n      chart.xAxis.staggerLabels(staggerLabels);\n    }\n    if (chart.xAxis && chart.xAxis.rotateLabels) {\n      chart.xAxis.rotateLabels(xLabelRotation);\n    }\n    if (chart.x2Axis && chart.x2Axis.staggerLabels) {\n      chart.x2Axis.staggerLabels(staggerLabels);\n    }\n    if (chart.x2Axis && chart.x2Axis.rotateLabels) {\n      chart.x2Axis.rotateLabels(xLabelRotation);\n    }\n\n    if ('showLegend' in chart && typeof showLegend !== 'undefined') {\n      if (width < BREAKPOINTS.small && vizType !== 'pie') {\n        chart.showLegend(false);\n      } else {\n        chart.showLegend(showLegend);\n      }\n    }\n\n    if (yIsLogScale) {\n      chart.yScale(d3.scale.log());\n    }\n    if (xIsLogScale) {\n      chart.xScale(d3.scale.log());\n    }\n\n    let xAxisFormatter;\n    if (isTimeSeries) {\n      xAxisFormatter = getTimeFormatter(xAxisFormat);\n      // In tooltips, always use the verbose time format\n      chart.interactiveLayer.tooltip.headerFormatter(smartDateVerboseFormatter);\n    } else {\n      xAxisFormatter = getTimeOrNumberFormatter(xAxisFormat);\n    }\n    if (chart.x2Axis && chart.x2Axis.tickFormat) {\n      chart.x2Axis.tickFormat(xAxisFormatter);\n    }\n    if (chart.xAxis && chart.xAxis.tickFormat) {\n      const isXAxisString = isVizTypes(['dist_bar', 'box_plot']);\n      if (isXAxisString) {\n        chart.xAxis.tickFormat(d =>\n          d.length > MAX_NO_CHARACTERS_IN_LABEL\n            ? `${d.slice(0, Math.max(0, MAX_NO_CHARACTERS_IN_LABEL))}…`\n            : d,\n        );\n      } else {\n        chart.xAxis.tickFormat(xAxisFormatter);\n      }\n    }\n\n    let yAxisFormatter = getTimeOrNumberFormatter(yAxisFormat);\n    if (chart.yAxis && chart.yAxis.tickFormat) {\n      if (\n        (contribution || comparisonType === 'percentage') &&\n        (!yAxisFormat ||\n          yAxisFormat === NumberFormats.SMART_NUMBER ||\n          yAxisFormat === NumberFormats.SMART_NUMBER_SIGNED)\n      ) {\n        // When computing a \"Percentage\" or \"Contribution\" selected,\n        // force a percentage format if no custom formatting set\n        yAxisFormatter = getNumberFormatter(NumberFormats.PERCENT_1_POINT);\n      }\n      chart.yAxis.tickFormat(yAxisFormatter);\n    }\n    if (chart.y2Axis && chart.y2Axis.tickFormat) {\n      chart.y2Axis.tickFormat(yAxisFormatter);\n    }\n\n    if (chart.yAxis) {\n      chart.yAxis.ticks(5);\n    }\n    if (chart.y2Axis) {\n      chart.y2Axis.ticks(5);\n    }\n\n    // Set showMaxMin for all axis\n    setAxisShowMaxMin(chart.xAxis, xAxisShowMinMax);\n    setAxisShowMaxMin(chart.x2Axis, xAxisShowMinMax);\n    setAxisShowMaxMin(chart.yAxis, yAxisShowMinMax);\n    setAxisShowMaxMin(chart.y2Axis, yAxis2ShowMinMax || yAxisShowMinMax);\n\n    if (vizType === 'time_pivot') {\n      if (baseColor) {\n        const { r, g, b } = baseColor;\n        chart.color(d => {\n          const alpha = d.rank > 0 ? d.perc * 0.5 : 1;\n\n          return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n        });\n      }\n\n      chart.useInteractiveGuideline(true);\n      chart.interactiveLayer.tooltip.contentGenerator(d =>\n        generateTimePivotTooltip(d, xAxisFormatter, yAxisFormatter),\n      );\n    } else if (vizType !== 'bullet') {\n      const colorFn = getScale(colorScheme);\n      chart.color(\n        d => d.color || colorFn(cleanColorInput(d[colorKey]), sliceId),\n      );\n    }\n\n    if (isVizTypes(['line', 'area', 'bar', 'dist_bar']) && useRichTooltip) {\n      chart.useInteractiveGuideline(true);\n      if (vizType === 'line' || vizType === 'bar') {\n        chart.interactiveLayer.tooltip.contentGenerator(d =>\n          generateRichLineTooltipContent(\n            d,\n            smartDateVerboseFormatter,\n            yAxisFormatter,\n          ),\n        );\n      } else if (vizType === 'dist_bar') {\n        chart.interactiveLayer.tooltip.contentGenerator(d =>\n          generateCompareTooltipContent(d, yAxisFormatter),\n        );\n      } else {\n        // area chart\n        chart.interactiveLayer.tooltip.contentGenerator(d =>\n          generateAreaChartTooltipContent(\n            d,\n            smartDateVerboseFormatter,\n            yAxisFormatter,\n            chart,\n          ),\n        );\n      }\n    }\n\n    if (isVizTypes(['compare'])) {\n      chart.interactiveLayer.tooltip.contentGenerator(d =>\n        generateCompareTooltipContent(d, yAxisFormatter),\n      );\n    }\n\n    // This is needed for correct chart dimensions if a chart is rendered in a hidden container\n    chart.width(width);\n    chart.height(height);\n\n    svg\n      .datum(data)\n      .transition()\n      .duration(500)\n      .attr('height', height)\n      .attr('width', width)\n      .call(chart);\n\n    // For log scale, only show 1, 10, 100, 1000, ...\n    if (yIsLogScale) {\n      chart.yAxis.tickFormat(d =>\n        d !== 0 && Math.log10(d) % 1 === 0 ? yAxisFormatter(d) : '',\n      );\n    }\n\n    if (xLabelRotation > 0) {\n      // shift labels to the left so they look better\n      const xTicks = svg.select('.nv-x.nv-axis > g').selectAll('g');\n      xTicks.selectAll('text').attr('dx', -6.5);\n    }\n\n    const applyYAxisBounds = () => {\n      if (\n        chart.yDomain &&\n        Array.isArray(yAxisBounds) &&\n        yAxisBounds.length === 2\n      ) {\n        const [customMin, customMax] = yAxisBounds;\n        const hasCustomMin = isDefined(customMin) && !Number.isNaN(customMin);\n        const hasCustomMax = isDefined(customMax) && !Number.isNaN(customMax);\n\n        if (\n          (hasCustomMin || hasCustomMax) &&\n          vizType === 'area' &&\n          chart.style() === 'expand'\n        ) {\n          // Because there are custom bounds, we need to override them back to 0%-100% since this\n          // is an expanded area chart\n          chart.yDomain([0, 1]);\n        } else if (\n          (hasCustomMin || hasCustomMax) &&\n          vizType === 'area' &&\n          chart.style() === 'stream'\n        ) {\n          // Because there are custom bounds, we need to override them back to the domain of the\n          // data since this is a stream area chart\n          chart.yDomain(computeStackedYDomain(data));\n        } else if (hasCustomMin && hasCustomMax) {\n          // Override the y domain if there's both a custom min and max\n          chart.yDomain([customMin, customMax]);\n          chart.clipEdge(true);\n        } else if (hasCustomMin || hasCustomMax) {\n          // Only one of the bounds has been set, so we need to manually calculate the other one\n          let [trueMin, trueMax] = [0, 1];\n\n          // These viz types can be stacked\n          // They correspond to the nvd3 stackedAreaChart and multiBarChart\n          if (\n            vizType === 'area' ||\n            (isVizTypes(['bar', 'dist_bar']) && chart.stacked())\n          ) {\n            // This is a stacked area chart or a stacked bar chart\n            [trueMin, trueMax] = computeStackedYDomain(data);\n          } else {\n            [trueMin, trueMax] = computeYDomain(data);\n          }\n\n          const min = hasCustomMin ? customMin : trueMin;\n          const max = hasCustomMax ? customMax : trueMax;\n          chart.yDomain([min, max]);\n          chart.clipEdge(true);\n        }\n      }\n    };\n    applyYAxisBounds();\n\n    // Also reapply on each state change to account for enabled/disabled series\n    if (chart.dispatch && chart.dispatch.stateChange) {\n      chart.dispatch.on('stateChange.applyYAxisBounds', applyYAxisBounds);\n    }\n\n    if (showMarkers) {\n      svg\n        .selectAll('.nv-point')\n        .style('stroke-opacity', 1)\n        .style('fill-opacity', 1);\n\n      // redo on legend toggle; nvd3 calls the callback *before* the line is\n      // drawn, so we need to add a small delay here\n      chart.dispatch.on('stateChange.showMarkers', () => {\n        setTimeout(() => {\n          svg\n            .selectAll('.nv-point')\n            .style('stroke-opacity', 1)\n            .style('fill-opacity', 1);\n        }, 10);\n      });\n    }\n\n    if (chart.yAxis !== undefined || chart.yAxis2 !== undefined) {\n      // Hack to adjust y axis left margin to accommodate long numbers\n      const marginPad = Math.ceil(\n        Math.min(maxWidth * (isExplore ? 0.01 : 0.03), MAX_MARGIN_PAD),\n      );\n      // Hack to adjust margins to accommodate long axis tick labels.\n      // - has to be done only after the chart has been rendered once\n      // - measure the width or height of the labels\n      // ---- (x axis labels are rotated 45 degrees so we use height),\n      // - adjust margins based on these measures and render again\n      const margins = chart.margin();\n      if (chart.xAxis) {\n        margins.bottom = 28;\n      }\n      const maxYAxisLabelWidth = getMaxLabelSize(\n        svg,\n        chart.yAxis2 ? 'nv-y1' : 'nv-y',\n      );\n      const maxXAxisLabelHeight = getMaxLabelSize(svg, 'nv-x');\n      margins.left = maxYAxisLabelWidth + marginPad;\n\n      if (yAxisLabel && yAxisLabel !== '') {\n        margins.left += 25;\n      }\n      if (showBarValue) {\n        // Add more margin to avoid label colliding with legend.\n        margins.top += 24;\n      }\n      if (xAxisShowMinMax) {\n        // If x bounds are shown, we need a right margin\n        margins.right = Math.max(20, maxXAxisLabelHeight / 2) + marginPad;\n      }\n      if (xLabelRotation === 45) {\n        margins.bottom =\n          maxXAxisLabelHeight * Math.sin((Math.PI * xLabelRotation) / 180) +\n          marginPad +\n          30;\n        margins.right =\n          maxXAxisLabelHeight * Math.cos((Math.PI * xLabelRotation) / 180) +\n          marginPad;\n      } else if (staggerLabels) {\n        margins.bottom = 40;\n      }\n\n      if (bottomMargin && bottomMargin !== 'auto') {\n        margins.bottom = parseInt(bottomMargin, 10);\n      }\n      if (leftMargin && leftMargin !== 'auto') {\n        margins.left = leftMargin;\n      }\n\n      if (xAxisLabel && xAxisLabel !== '' && chart.xAxis) {\n        margins.bottom += 25;\n        let distance = 0;\n        if (margins.bottom && !Number.isNaN(margins.bottom)) {\n          distance = margins.bottom - 45;\n        }\n        // nvd3 bug axisLabelDistance is disregarded on xAxis\n        // https://github.com/krispo/angular-nvd3/issues/90\n        chart.xAxis.axisLabel(xAxisLabel).axisLabelDistance(distance);\n      }\n\n      if (yAxisLabel && yAxisLabel !== '' && chart.yAxis) {\n        let distance = 0;\n        if (margins.left && !Number.isNaN(margins.left)) {\n          distance = margins.left - 70;\n        }\n        chart.yAxis.axisLabel(yAxisLabel).axisLabelDistance(distance);\n      }\n      if (isTimeSeries && annotationData && activeAnnotationLayers.length > 0) {\n        // Time series annotations add additional data\n        const timeSeriesAnnotations = activeAnnotationLayers\n          .filter(\n            layer => layer.annotationType === ANNOTATION_TYPES.TIME_SERIES,\n          )\n          .reduce(\n            (bushel, a) =>\n              bushel.concat(\n                (annotationData[a.name] || []).map(series => {\n                  if (!series) {\n                    return {};\n                  }\n                  const key = Array.isArray(series.key)\n                    ? `${a.name}, ${series.key.join(', ')}`\n                    : `${a.name}, ${series.key}`;\n\n                  return {\n                    ...series,\n                    key,\n                    color: a.color,\n                    strokeWidth: a.width,\n                    classed: `${a.opacity} ${a.style} nv-timeseries-annotation-layer showMarkers${a.showMarkers} hideLine${a.hideLine}`,\n                  };\n                }),\n              ),\n            [],\n          );\n        data.push(...timeSeriesAnnotations);\n      }\n\n      // Uniquely identify tooltips based on chartId so this chart instance only\n      // controls its own tooltips\n      if (chartId) {\n        if (chart && chart.interactiveLayer && chart.interactiveLayer.tooltip) {\n          chart.interactiveLayer.tooltip.classes([\n            generateTooltipClassName(chartId),\n          ]);\n        }\n\n        if (chart && chart.tooltip) {\n          chart.tooltip.classes([generateTooltipClassName(chartId)]);\n        }\n      }\n\n      // render chart\n      chart.margin(margins);\n      svg\n        .datum(data)\n        .transition()\n        .duration(500)\n        .attr('width', width)\n        .attr('height', height)\n        .call(chart);\n\n      // On scroll, hide (not remove) tooltips so they can reappear on hover.\n      // Throttle to only 4x/second.\n      window.addEventListener(\n        'scroll',\n        throttle(() => hideTooltips(false), 250),\n      );\n\n      // The below code should be run AFTER rendering because chart is updated in call()\n      if (isTimeSeries && activeAnnotationLayers.length > 0) {\n        // Formula annotations\n        const formulas = activeAnnotationLayers.filter(\n          a => a.annotationType === ANNOTATION_TYPES.FORMULA,\n        );\n\n        let xMax;\n        let xMin;\n        let xScale;\n        if (vizType === 'bar') {\n          xMin = d3.min(data[0].values, d => d.x);\n          xMax = d3.max(data[0].values, d => d.x);\n          xScale = d3.scale\n            .quantile()\n            .domain([xMin, xMax])\n            .range(chart.xAxis.range());\n        } else {\n          xMin = chart.xAxis.scale().domain()[0].valueOf();\n          xMax = chart.xAxis.scale().domain()[1].valueOf();\n          if (chart.xScale) {\n            xScale = chart.xScale();\n          } else if (chart.xAxis.scale) {\n            xScale = chart.xAxis.scale();\n          } else {\n            xScale = d3.scale.linear();\n          }\n        }\n        if (xScale && xScale.clamp) {\n          xScale.clamp(true);\n        }\n\n        if (formulas.length > 0) {\n          const xValues = [];\n          if (vizType === 'bar') {\n            // For bar-charts we want one data point evaluated for every\n            // data point that will be displayed.\n            const distinct = data.reduce((xVals, d) => {\n              d.values.forEach(x => xVals.add(x.x));\n\n              return xVals;\n            }, new Set());\n            xValues.push(...distinct.values());\n            xValues.sort();\n          } else {\n            // For every other time visualization it should be ok, to have a\n            // data points in even intervals.\n            let period = Math.min(\n              ...data.map(d =>\n                Math.min(\n                  ...d.values.slice(1).map((v, i) => v.x - d.values[i].x),\n                ),\n              ),\n            );\n            const dataPoints = (xMax - xMin) / (period || 1);\n            // make sure that there are enough data points and not too many\n            period = dataPoints < 100 ? (xMax - xMin) / 100 : period;\n            period = dataPoints > 500 ? (xMax - xMin) / 500 : period;\n            xValues.push(xMin);\n            for (let x = xMin; x < xMax; x += period) {\n              xValues.push(x);\n            }\n            xValues.push(xMax);\n          }\n          const formulaData = formulas.map(fo => {\n            const { value: expression } = fo;\n            return {\n              key: fo.name,\n              values: xValues.map(x => ({\n                x,\n                y: evalExpression(expression, x),\n              })),\n              color: fo.color,\n              strokeWidth: fo.width,\n              classed: `${fo.opacity} ${fo.style}`,\n            };\n          });\n          data.push(...formulaData);\n        }\n        const xAxis = chart.xAxis1 ? chart.xAxis1 : chart.xAxis;\n        const yAxis = chart.yAxis1 ? chart.yAxis1 : chart.yAxis;\n        const chartWidth = xAxis.scale().range()[1];\n        const annotationHeight = yAxis.scale().range()[0];\n\n        if (annotationData) {\n          // Event annotations\n          activeAnnotationLayers\n            .filter(\n              x =>\n                x.annotationType === ANNOTATION_TYPES.EVENT &&\n                annotationData &&\n                annotationData[x.name],\n            )\n            .forEach((config, index) => {\n              const e = applyNativeColumns(config);\n              // Add event annotation layer\n              const annotations = d3\n                .select(element)\n                .select('.nv-wrap')\n                .append('g')\n                .attr('class', `nv-event-annotation-layer-${index}`);\n              const aColor =\n                e.color || getColor(cleanColorInput(e.name), colorScheme);\n\n              const tip = tipFactory({\n                ...e,\n                annotationTipClass: `arrow-down nv-event-annotation-layer-${config.sourceType}`,\n              });\n              const records = (annotationData[e.name].records || [])\n                .map(r => {\n                  const timeValue = new Date(moment.utc(r[e.timeColumn]));\n\n                  return {\n                    ...r,\n                    [e.timeColumn]: timeValue,\n                  };\n                })\n                .filter(\n                  record =>\n                    !Number.isNaN(record[e.timeColumn].getMilliseconds()),\n                );\n\n              if (records.length > 0) {\n                annotations\n                  .selectAll('line')\n                  .data(records)\n                  .enter()\n                  .append('line')\n                  .attr({\n                    x1: d => xScale(new Date(d[e.timeColumn])),\n                    y1: 0,\n                    x2: d => xScale(new Date(d[e.timeColumn])),\n                    y2: annotationHeight,\n                  })\n                  .attr('class', `${e.opacity} ${e.style}`)\n                  .style('stroke', aColor)\n                  .style('stroke-width', e.width)\n                  .on('mouseover', tip.show)\n                  .on('mouseout', tip.hide)\n                  .call(tip);\n              }\n\n              // update annotation positions on brush event\n              if (chart.focus) {\n                chart.focus.dispatch.on('onBrush.event-annotation', () => {\n                  annotations\n                    .selectAll('line')\n                    .data(records)\n                    .attr({\n                      x1: d => xScale(new Date(d[e.timeColumn])),\n                      y1: 0,\n                      x2: d => xScale(new Date(d[e.timeColumn])),\n                      y2: annotationHeight,\n                      opacity: d => {\n                        const x = xScale(new Date(d[e.timeColumn]));\n\n                        return x > 0 && x < chartWidth ? 1 : 0;\n                      },\n                    });\n                });\n              }\n            });\n\n          // Interval annotations\n          activeAnnotationLayers\n            .filter(\n              x =>\n                x.annotationType === ANNOTATION_TYPES.INTERVAL &&\n                annotationData &&\n                annotationData[x.name],\n            )\n            .forEach((config, index) => {\n              const e = applyNativeColumns(config);\n              // Add interval annotation layer\n              const annotations = d3\n                .select(element)\n                .select('.nv-wrap')\n                .append('g')\n                .attr('class', `nv-interval-annotation-layer-${index}`);\n\n              const aColor =\n                e.color || getColor(cleanColorInput(e.name), colorScheme);\n              const tip = tipFactory(e);\n\n              const records = (annotationData[e.name].records || [])\n                .map(r => {\n                  const timeValue = new Date(moment.utc(r[e.timeColumn]));\n                  const intervalEndValue = new Date(\n                    moment.utc(r[e.intervalEndColumn]),\n                  );\n\n                  return {\n                    ...r,\n                    [e.timeColumn]: timeValue,\n                    [e.intervalEndColumn]: intervalEndValue,\n                  };\n                })\n                .filter(\n                  record =>\n                    !Number.isNaN(record[e.timeColumn].getMilliseconds()) &&\n                    !Number.isNaN(\n                      record[e.intervalEndColumn].getMilliseconds(),\n                    ),\n                );\n\n              if (records.length > 0) {\n                annotations\n                  .selectAll('rect')\n                  .data(records)\n                  .enter()\n                  .append('rect')\n                  .attr({\n                    x: d =>\n                      Math.min(\n                        xScale(new Date(d[e.timeColumn])),\n                        xScale(new Date(d[e.intervalEndColumn])),\n                      ),\n                    y: 0,\n                    width: d =>\n                      Math.max(\n                        Math.abs(\n                          xScale(new Date(d[e.intervalEndColumn])) -\n                            xScale(new Date(d[e.timeColumn])),\n                        ),\n                        1,\n                      ),\n                    height: annotationHeight,\n                  })\n                  .attr('class', `${e.opacity} ${e.style}`)\n                  .style('stroke-width', e.width)\n                  .style('stroke', aColor)\n                  .style('fill', aColor)\n                  .style('fill-opacity', 0.2)\n                  .on('mouseover', tip.show)\n                  .on('mouseout', tip.hide)\n                  .call(tip);\n              }\n\n              // update annotation positions on brush event\n              if (chart.focus) {\n                chart.focus.dispatch.on('onBrush.interval-annotation', () => {\n                  annotations\n                    .selectAll('rect')\n                    .data(records)\n                    .attr({\n                      x: d => xScale(new Date(d[e.timeColumn])),\n                      width: d => {\n                        const x1 = xScale(new Date(d[e.timeColumn]));\n                        const x2 = xScale(new Date(d[e.intervalEndColumn]));\n\n                        return x2 - x1;\n                      },\n                    });\n                });\n              }\n            });\n        }\n\n        // rerender chart appended with annotation layer\n        svg.datum(data).attr('height', height).attr('width', width).call(chart);\n\n        // Display styles for Time Series Annotations\n        chart.dispatch.on('renderEnd.timeseries-annotation', () => {\n          d3.selectAll(\n            '.slice_container .nv-timeseries-annotation-layer.showMarkerstrue .nv-point',\n          )\n            .style('stroke-opacity', 1)\n            .style('fill-opacity', 1);\n          d3.selectAll(\n            '.slice_container .nv-timeseries-annotation-layer.hideLinetrue',\n          ).style('stroke-width', 0);\n        });\n      }\n    }\n\n    wrapTooltip(chart);\n\n    return chart;\n  };\n\n  // Remove tooltips before rendering chart, if the chart is being re-rendered sometimes\n  // there are left over tooltips in the dom,\n  // this will clear them before rendering the chart again.\n  if (chartId) {\n    removeTooltip(chartId);\n  } else {\n    hideTooltips(true);\n  }\n\n  nv.addGraph(drawGraph);\n}\n\nnvd3Vis.displayName = 'NVD3';\nnvd3Vis.propTypes = propTypes;\nexport default nvd3Vis;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { reactify, styled } from '@superset-ui/core';\nimport PropTypes from 'prop-types';\nimport Component from './NVD3Vis';\nimport { hideTooltips, removeTooltip } from './utils';\n\nfunction componentWillUnmount() {\n  const { id } = this.props;\n  if (id !== null && id !== undefined) {\n    removeTooltip(id);\n  } else {\n    hideTooltips(true);\n  }\n}\n\nconst ReactNVD3 = reactify(Component, { componentWillUnmount });\n\nconst NVD3 = ({ className, ...otherProps }) => (\n  <div className={className}>\n    <ReactNVD3 {...otherProps} />\n  </div>\n);\n\nNVD3.propTypes = {\n  className: PropTypes.string.isRequired,\n};\n\nexport default styled(NVD3)`\n  .superset-legacy-chart-nvd3-dist-bar,\n  .superset-legacy-chart-nvd3-bar {\n    overflow-x: auto !important;\n    svg {\n      &.nvd3-svg {\n        width: auto;\n        font-size: ${({ theme }) => theme.typography.sizes.m};\n      }\n    }\n  }\n  .superset-legacy-chart-nvd3 {\n    nv-x text {\n      font-size: ${({ theme }) => theme.typography.sizes.m};\n    }\n    g.superset path {\n      stroke-dasharray: 5, 5;\n    }\n    .nvtooltip tr.highlight td {\n      font-weight: ${({ theme }) => theme.typography.weights.bold};\n      font-size: ${({ theme }) => theme.typography.sizes.m}px !important;\n    }\n    text.nv-axislabel {\n      font-size: ${({ theme }) => theme.typography.sizes.m} !important;\n    }\n    g.solid path,\n    line.solid {\n      stroke-dasharray: unset;\n    }\n    g.dashed path,\n    line.dashed {\n      stroke-dasharray: 5, 5;\n    }\n    g.longDashed path,\n    line.dotted {\n      stroke-dasharray: 1, 1;\n    }\n\n    g.opacityLow path,\n    line.opacityLow {\n      stroke-opacity: 0.2;\n    }\n\n    g.opacityMedium path,\n    line.opacityMedium {\n      stroke-opacity: 0.5;\n    }\n    g.opacityHigh path,\n    line.opacityHigh {\n      stroke-opacity: 0.8;\n    }\n    g.time-shift-0 path,\n    line.time-shift-0 {\n      stroke-dasharray: 5, 5;\n    }\n    g.time-shift-1 path,\n    line.time-shift-1 {\n      stroke-dasharray: 1, 5;\n    }\n    g.time-shift-2 path,\n    line.time-shift-3 {\n      stroke-dasharray: 5, 1;\n    }\n    g.time-shift-3 path,\n    line.time-shift-3 {\n      stroke-dasharray: 5, 1;\n    }\n    g.time-shift-4 path,\n    line.time-shift-4 {\n      stroke-dasharray: 5, 10;\n    }\n    g.time-shift-5 path,\n    line.time-shift-5 {\n      stroke-dasharray: 0.9;\n    }\n    g.time-shift-6 path,\n    line.time-shift-6 {\n      stroke-dasharray: 15, 10, 5;\n    }\n    g.time-shift-7 path,\n    line.time-shift-7 {\n      stroke-dasharray: 15, 10, 5, 10;\n    }\n    g.time-shift-8 path,\n    line.time-shift-8 {\n      stroke-dasharray: 15, 10, 5, 10, 15;\n    }\n    g.time-shift-9 path,\n    line.time-shift-9 {\n      stroke-dasharray: 5, 5, 1, 5;\n    }\n    .nv-noData.body {\n      font-size: ${({ theme }) => theme.typography.sizes.m};\n      font-weight: ${({ theme }) => theme.typography.weights.normal};\n    }\n  }\n  .superset-legacy-chart-nvd3-tr-highlight {\n    border-top: 1px solid;\n    border-bottom: 1px solid;\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n  .superset-legacy-chart-nvd3-tr-total {\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n  .nvtooltip {\n    .tooltip-header {\n      white-space: nowrap;\n      font-weight: ${({ theme }) => theme.typography.weights.bold};\n    }\n    tbody tr:not(.tooltip-header) td:nth-of-type(2) {\n      word-break: break-word;\n    }\n  }\n  .d3-tip.nv-event-annotation-layer-table,\n  .d3-tip.nv-event-annotation-layer-NATIVE {\n    width: 200px;\n    border-radius: 2px;\n    background-color: ${({ theme }) => theme.colors.grayscale.base};\n    fill-opacity: 0.6;\n    margin: ${({ theme }) => theme.gridUnit * 2}px;\n    padding: ${({ theme }) => theme.gridUnit * 2}px;\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    &:after {\n      content: '\\\\25BC';\n      font-size: ${({ theme }) => theme.typography.sizes.m};\n      color: ${({ theme }) => theme.colors.grayscale.base};\n      position: absolute;\n      bottom: -14px;\n      left: 94px;\n    }\n  }\n`;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\n\n// TODO: Note that id and className can collide between Props and ReactifyProps\n// leading to (likely) unexpected behaviors. We should either require Props to not\n// contain an id/className, or not combine them (via intersection), instead preferring\n// wrapping (composition). As an example:\n// interface MyProps {\n//   id: number;\n// }\n// function myRender(container: HTMLDivElement, props: Readonly<MyProps>): void {\n//   props.id // unusable: id is string & number\n// }\n// new (reactify(myRender))({ id: 5 }); // error: id has to be string & number\n\nexport type ReactifyProps = {\n  id?: string;\n  className?: string;\n};\n\n// TODO: add more React lifecycle callbacks as needed\nexport type LifeCycleCallbacks = {\n  componentWillUnmount?: () => void;\n};\n\nexport interface RenderFuncType<Props> {\n  (container: HTMLDivElement, props: Readonly<Props & ReactifyProps>): void;\n  displayName?: string;\n  defaultProps?: Partial<Props & ReactifyProps>;\n  propTypes?: React.WeakValidationMap<Props & ReactifyProps>;\n}\n\nexport default function reactify<Props extends object>(\n  renderFn: RenderFuncType<Props>,\n  callbacks?: LifeCycleCallbacks,\n): React.ComponentClass<Props & ReactifyProps> {\n  class ReactifiedComponent extends React.Component<Props & ReactifyProps> {\n    container?: HTMLDivElement;\n\n    constructor(props: Props & ReactifyProps) {\n      super(props);\n      this.setContainerRef = this.setContainerRef.bind(this);\n    }\n\n    componentDidMount() {\n      this.execute();\n    }\n\n    componentDidUpdate() {\n      this.execute();\n    }\n\n    componentWillUnmount() {\n      this.container = undefined;\n      if (callbacks?.componentWillUnmount) {\n        callbacks.componentWillUnmount.bind(this)();\n      }\n    }\n\n    setContainerRef(ref: HTMLDivElement) {\n      this.container = ref;\n    }\n\n    execute() {\n      if (this.container) {\n        renderFn(this.container, this.props);\n      }\n    }\n\n    render() {\n      const { id, className } = this.props;\n\n      return <div ref={this.setContainerRef} id={id} className={className} />;\n    }\n  }\n\n  const ReactifiedClass: React.ComponentClass<Props & ReactifyProps> =\n    ReactifiedComponent;\n\n  if (renderFn.displayName) {\n    ReactifiedClass.displayName = renderFn.displayName;\n  }\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  if (renderFn.propTypes) {\n    ReactifiedClass.propTypes = {\n      ...ReactifiedClass.propTypes,\n      ...renderFn.propTypes,\n    };\n  }\n  if (renderFn.defaultProps) {\n    ReactifiedClass.defaultProps = renderFn.defaultProps;\n  }\n\n  return ReactifiedComponent;\n}\n"],"names":["numberOrAutoType","PropTypes","stringOrObjectWithLabelType","label","rgbObjectType","r","isRequired","g","b","numericXYType","x","y","categoryAndValueXYType","boxPlotValueType","outliers","Q1","Q2","Q3","whisker_high","whisker_low","bulletDataType","markerLabels","markerLineLabels","markerLines","markers","measures","rangeLabels","ranges","annotationLayerType","annotationType","Object","keys","ANNOTATION_TYPES","color","hideLine","name","opacity","show","showMarkers","sourceType","style","value","width","NO_DATA_RENDER_DATA","text","dy","class","nv","noData","chart","container","margin","options","height","availableHeight","availableWidth","left","top","selectAll","remove","noDataText","data","enter","append","attr","d","getColor","getScale","CategoricalColorNamespace","TIMESERIES_VIZ_TYPES","propTypes","key","values","classed","type","yAxis","annotationData","annotationLayers","bottomMargin","colorScheme","comparisonType","contribution","leftMargin","onError","showLegend","useRichTooltip","vizType","xAxisFormat","numberFormat","xAxisLabel","xAxisShowMinMax","xIsLogScale","xTicksLayout","yAxisFormat","yAxisBounds","yAxisLabel","yAxisShowMinMax","yIsLogScale","orderBars","isBarStacked","showBarValue","reduceXTicks","showControls","showBrush","onBrushEnd","yAxis2Format","lineInterpolation","isDonut","isPieLabelOutside","pieLabelType","showLabels","areaStackedStyle","entity","maxBubbleSize","xField","yField","sizeField","baseColor","NOOP","formatter","getNumberFormatter","nvd3Vis","element","props","maxWidth","maxHeight","yAxis2ShowMinMax","sliceId","isExplore","document","querySelector","innerHTML","activeAnnotationLayers","filter","layer","chartContainer","chartId","parentElement","id","startsWith","colorKey","isVizTypes","types","includes","removeTooltip","hideTooltips","d3Element","d3","_kebabCase","svg","select","empty","Math","min","isTimeSeries","staggerLabels","xLabelRotation","isTruthy","t","canShowBrush","numberFormatter","lineWithFocusChart","focus","bottom","focusHeight","xScale","scale","utc","lineChart","interpolate","clipEdge","multiBarChart","groupSpacing","computeBarChartWidth","xAxis","showMaxMin","stacked","forEach","newValues","sort","a","tryNumify","pieChart","valueFormat","donut","labelsOutside","labelThreshold","cornerRadius","labelType","total","percentFormatter","NumberFormats","PERCENT_2_POINT","tooltip","valueFormatter","cumulativeLineChart","useInteractiveGuideline","scatterChart","showDistX","showDistY","contentGenerator","generateBubbleTooltipContent","point","xFormatter","getTimeOrNumberFormatter","yFormatter","sizeFormatter","pointRange","pointDomain","v","size","stackedAreaChart","boxPlotChart","maxBoxWidth","bulletChart","Error","xAxisFormatter","drawBarValues","dispatch","on","event","timeRange","stringifyTimeRange","extent","brush","rotateLabels","x2Axis","yScale","log","getTimeFormatter","interactiveLayer","headerFormatter","smartDateVerboseFormatter","tickFormat","length","slice","max","yAxisFormatter","SMART_NUMBER","SMART_NUMBER_SIGNED","PERCENT_1_POINT","y2Axis","ticks","setAxisShowMaxMin","alpha","rank","perc","generateTimePivotTooltip","colorFn","cleanColorInput","generateRichLineTooltipContent","generateCompareTooltipContent","generateAreaChartTooltipContent","datum","transition","duration","call","log10","applyYAxisBounds","yDomain","Array","isArray","customMin","customMax","hasCustomMin","isDefined","Number","isNaN","hasCustomMax","computeStackedYDomain","trueMin","trueMax","computeYDomain","stateChange","setTimeout","undefined","yAxis2","marginPad","ceil","margins","maxYAxisLabelWidth","getMaxLabelSize","maxXAxisLabelHeight","right","sin","PI","cos","parseInt","distance","axisLabel","axisLabelDistance","timeSeriesAnnotations","TIME_SERIES","reduce","bushel","concat","map","series","join","strokeWidth","push","classes","generateTooltipClassName","window","addEventListener","_throttle","formulas","FORMULA","xMax","xMin","quantile","domain","range","valueOf","linear","clamp","xValues","distinct","xVals","add","Set","period","i","dataPoints","formulaData","fo","expression","evalExpression","xAxis1","yAxis1","chartWidth","annotationHeight","EVENT","config","index","e","applyNativeColumns","annotations","aColor","tip","tipFactory","annotationTipClass","records","timeValue","Date","moment","timeColumn","record","getMilliseconds","x1","y1","x2","y2","hide","INTERVAL","intervalEndValue","intervalEndColumn","abs","wrapTooltip","displayName","ReactNVD3","reactify","Component","componentWillUnmount","this","NVD3","_ref","className","otherProps","___EmotionJSX","styled","_ref2","theme","typography","sizes","m","_ref3","_ref4","weights","bold","_ref5","_ref6","_ref7","_ref8","normal","_ref9","_ref10","_ref11","_ref12","colors","grayscale","base","_ref13","gridUnit","_ref14","_ref15","light5","_ref16","_ref17","renderFn","callbacks","ReactifiedComponent","React","constructor","super","setContainerRef","bind","componentDidMount","execute","componentDidUpdate","ref","render","ReactifiedClass","defaultProps"],"sourceRoot":""}