{"version":3,"file":"ccf213c8a0828ebb7f45.chunk.js","mappings":"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","sources":["webpack://superset/./node_modules/@deck.gl/core/dist/esm/debug/index.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/range.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/constants.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/texture.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/layer.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/count.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/transition.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/assert.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/flatten.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/log.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/memoize.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/shader.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/positions.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/views/view.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/controller.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/views/map-view.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/effect.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/init.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/query.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","webpack://superset/./node_modules/@deck.gl/core/dist/esm/lib/deck.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/use-isomorphic-layout-effect.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/inherits-from.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/extract-jsx-layers.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/evaluate-children.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/extract-styles.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/deckgl.js","webpack://superset/./node_modules/@deck.gl/react/dist/esm/utils/position-children-under-views.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-loadable-worker-url.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-thread.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-job.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-pool.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-farm.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/parse-with-worker.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/get-worker-url.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-array-buffer-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-stream-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-string-iterator.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-blob-iterator.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterators/async-iteration.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loader-context.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","webpack://superset/./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-defaults.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","webpack://superset/./node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/utils/version.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack://superset/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack://superset/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/model.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","webpack://superset/./node_modules/@luma.gl/engine/dist/esm/transform/transform.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/log.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/assert.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","webpack://superset/./node_modules/@luma.gl/gltools/dist/esm/context/context.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","webpack://superset/./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/program.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/features/features.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/init.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","webpack://superset/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/common.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack://superset/./node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack://superset/./node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","webpack://superset/./node_modules/@probe.gl/stats/dist/esm/lib/stat.js","webpack://superset/./node_modules/@probe.gl/stats/dist/esm/lib/stats.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/get-browser.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/globals.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/index.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/is-browser.js","webpack://superset/./node_modules/probe.gl/dist/es5/env/is-electron.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/globals.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack://superset/./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/globals.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/formatters.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/color.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/assert.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack://superset/./node_modules/probe.gl/dist/esm/lib/log.js","webpack://superset/./node_modules/probe.gl/dist/esm/utils/autobind.js","webpack://superset/./node_modules/vm-browserify/index.js","webpack://superset/./node_modules/underscore/modules/_setup.js","webpack://superset/./node_modules/underscore/modules/restArguments.js","webpack://superset/./node_modules/underscore/modules/isObject.js","webpack://superset/./node_modules/underscore/modules/isNull.js","webpack://superset/./node_modules/underscore/modules/isUndefined.js","webpack://superset/./node_modules/underscore/modules/isBoolean.js","webpack://superset/./node_modules/underscore/modules/isElement.js","webpack://superset/./node_modules/underscore/modules/_tagTester.js","webpack://superset/./node_modules/underscore/modules/isString.js","webpack://superset/./node_modules/underscore/modules/isNumber.js","webpack://superset/./node_modules/underscore/modules/isDate.js","webpack://superset/./node_modules/underscore/modules/isRegExp.js","webpack://superset/./node_modules/underscore/modules/isError.js","webpack://superset/./node_modules/underscore/modules/isSymbol.js","webpack://superset/./node_modules/underscore/modules/isArrayBuffer.js","webpack://superset/./node_modules/underscore/modules/isFunction.js","webpack://superset/./node_modules/underscore/modules/_hasObjectTag.js","webpack://superset/./node_modules/underscore/modules/_stringTagBug.js","webpack://superset/./node_modules/underscore/modules/isDataView.js","webpack://superset/./node_modules/underscore/modules/isArray.js","webpack://superset/./node_modules/underscore/modules/_has.js","webpack://superset/./node_modules/underscore/modules/isArguments.js","webpack://superset/./node_modules/underscore/modules/isFinite.js","webpack://superset/./node_modules/underscore/modules/isNaN.js","webpack://superset/./node_modules/underscore/modules/constant.js","webpack://superset/./node_modules/underscore/modules/_createSizePropertyCheck.js","webpack://superset/./node_modules/underscore/modules/_shallowProperty.js","webpack://superset/./node_modules/underscore/modules/_getByteLength.js","webpack://superset/./node_modules/underscore/modules/_isBufferLike.js","webpack://superset/./node_modules/underscore/modules/isTypedArray.js","webpack://superset/./node_modules/underscore/modules/_getLength.js","webpack://superset/./node_modules/underscore/modules/_collectNonEnumProps.js","webpack://superset/./node_modules/underscore/modules/keys.js","webpack://superset/./node_modules/underscore/modules/isEmpty.js","webpack://superset/./node_modules/underscore/modules/isMatch.js","webpack://superset/./node_modules/underscore/modules/underscore.js","webpack://superset/./node_modules/underscore/modules/_toBufferView.js","webpack://superset/./node_modules/underscore/modules/isEqual.js","webpack://superset/./node_modules/underscore/modules/allKeys.js","webpack://superset/./node_modules/underscore/modules/_methodFingerprint.js","webpack://superset/./node_modules/underscore/modules/isMap.js","webpack://superset/./node_modules/underscore/modules/isWeakMap.js","webpack://superset/./node_modules/underscore/modules/isSet.js","webpack://superset/./node_modules/underscore/modules/isWeakSet.js","webpack://superset/./node_modules/underscore/modules/values.js","webpack://superset/./node_modules/underscore/modules/pairs.js","webpack://superset/./node_modules/underscore/modules/invert.js","webpack://superset/./node_modules/underscore/modules/functions.js","webpack://superset/./node_modules/underscore/modules/_createAssigner.js","webpack://superset/./node_modules/underscore/modules/extend.js","webpack://superset/./node_modules/underscore/modules/extendOwn.js","webpack://superset/./node_modules/underscore/modules/defaults.js","webpack://superset/./node_modules/underscore/modules/_baseCreate.js","webpack://superset/./node_modules/underscore/modules/create.js","webpack://superset/./node_modules/underscore/modules/clone.js","webpack://superset/./node_modules/underscore/modules/tap.js","webpack://superset/./node_modules/underscore/modules/toPath.js","webpack://superset/./node_modules/underscore/modules/_toPath.js","webpack://superset/./node_modules/underscore/modules/_deepGet.js","webpack://superset/./node_modules/underscore/modules/get.js","webpack://superset/./node_modules/underscore/modules/has.js","webpack://superset/./node_modules/underscore/modules/identity.js","webpack://superset/./node_modules/underscore/modules/matcher.js","webpack://superset/./node_modules/underscore/modules/property.js","webpack://superset/./node_modules/underscore/modules/_optimizeCb.js","webpack://superset/./node_modules/underscore/modules/_baseIteratee.js","webpack://superset/./node_modules/underscore/modules/iteratee.js","webpack://superset/./node_modules/underscore/modules/_cb.js","webpack://superset/./node_modules/underscore/modules/mapObject.js","webpack://superset/./node_modules/underscore/modules/noop.js","webpack://superset/./node_modules/underscore/modules/propertyOf.js","webpack://superset/./node_modules/underscore/modules/times.js","webpack://superset/./node_modules/underscore/modules/random.js","webpack://superset/./node_modules/underscore/modules/now.js","webpack://superset/./node_modules/underscore/modules/_createEscaper.js","webpack://superset/./node_modules/underscore/modules/_escapeMap.js","webpack://superset/./node_modules/underscore/modules/escape.js","webpack://superset/./node_modules/underscore/modules/unescape.js","webpack://superset/./node_modules/underscore/modules/_unescapeMap.js","webpack://superset/./node_modules/underscore/modules/templateSettings.js","webpack://superset/./node_modules/underscore/modules/template.js","webpack://superset/./node_modules/underscore/modules/result.js","webpack://superset/./node_modules/underscore/modules/uniqueId.js","webpack://superset/./node_modules/underscore/modules/chain.js","webpack://superset/./node_modules/underscore/modules/_executeBound.js","webpack://superset/./node_modules/underscore/modules/partial.js","webpack://superset/./node_modules/underscore/modules/bind.js","webpack://superset/./node_modules/underscore/modules/_isArrayLike.js","webpack://superset/./node_modules/underscore/modules/_flatten.js","webpack://superset/./node_modules/underscore/modules/bindAll.js","webpack://superset/./node_modules/underscore/modules/memoize.js","webpack://superset/./node_modules/underscore/modules/delay.js","webpack://superset/./node_modules/underscore/modules/defer.js","webpack://superset/./node_modules/underscore/modules/throttle.js","webpack://superset/./node_modules/underscore/modules/debounce.js","webpack://superset/./node_modules/underscore/modules/wrap.js","webpack://superset/./node_modules/underscore/modules/negate.js","webpack://superset/./node_modules/underscore/modules/compose.js","webpack://superset/./node_modules/underscore/modules/after.js","webpack://superset/./node_modules/underscore/modules/before.js","webpack://superset/./node_modules/underscore/modules/once.js","webpack://superset/./node_modules/underscore/modules/findKey.js","webpack://superset/./node_modules/underscore/modules/_createPredicateIndexFinder.js","webpack://superset/./node_modules/underscore/modules/findIndex.js","webpack://superset/./node_modules/underscore/modules/findLastIndex.js","webpack://superset/./node_modules/underscore/modules/sortedIndex.js","webpack://superset/./node_modules/underscore/modules/_createIndexFinder.js","webpack://superset/./node_modules/underscore/modules/indexOf.js","webpack://superset/./node_modules/underscore/modules/lastIndexOf.js","webpack://superset/./node_modules/underscore/modules/find.js","webpack://superset/./node_modules/underscore/modules/findWhere.js","webpack://superset/./node_modules/underscore/modules/each.js","webpack://superset/./node_modules/underscore/modules/map.js","webpack://superset/./node_modules/underscore/modules/_createReduce.js","webpack://superset/./node_modules/underscore/modules/reduce.js","webpack://superset/./node_modules/underscore/modules/reduceRight.js","webpack://superset/./node_modules/underscore/modules/filter.js","webpack://superset/./node_modules/underscore/modules/reject.js","webpack://superset/./node_modules/underscore/modules/every.js","webpack://superset/./node_modules/underscore/modules/some.js","webpack://superset/./node_modules/underscore/modules/contains.js","webpack://superset/./node_modules/underscore/modules/invoke.js","webpack://superset/./node_modules/underscore/modules/pluck.js","webpack://superset/./node_modules/underscore/modules/where.js","webpack://superset/./node_modules/underscore/modules/max.js","webpack://superset/./node_modules/underscore/modules/min.js","webpack://superset/./node_modules/underscore/modules/toArray.js","webpack://superset/./node_modules/underscore/modules/sample.js","webpack://superset/./node_modules/underscore/modules/shuffle.js","webpack://superset/./node_modules/underscore/modules/sortBy.js","webpack://superset/./node_modules/underscore/modules/_group.js","webpack://superset/./node_modules/underscore/modules/groupBy.js","webpack://superset/./node_modules/underscore/modules/indexBy.js","webpack://superset/./node_modules/underscore/modules/countBy.js","webpack://superset/./node_modules/underscore/modules/partition.js","webpack://superset/./node_modules/underscore/modules/size.js","webpack://superset/./node_modules/underscore/modules/_keyInObj.js","webpack://superset/./node_modules/underscore/modules/pick.js","webpack://superset/./node_modules/underscore/modules/omit.js","webpack://superset/./node_modules/underscore/modules/initial.js","webpack://superset/./node_modules/underscore/modules/first.js","webpack://superset/./node_modules/underscore/modules/rest.js","webpack://superset/./node_modules/underscore/modules/last.js","webpack://superset/./node_modules/underscore/modules/compact.js","webpack://superset/./node_modules/underscore/modules/flatten.js","webpack://superset/./node_modules/underscore/modules/difference.js","webpack://superset/./node_modules/underscore/modules/without.js","webpack://superset/./node_modules/underscore/modules/uniq.js","webpack://superset/./node_modules/underscore/modules/union.js","webpack://superset/./node_modules/underscore/modules/intersection.js","webpack://superset/./node_modules/underscore/modules/unzip.js","webpack://superset/./node_modules/underscore/modules/zip.js","webpack://superset/./node_modules/underscore/modules/object.js","webpack://superset/./node_modules/underscore/modules/range.js","webpack://superset/./node_modules/underscore/modules/chunk.js","webpack://superset/./node_modules/underscore/modules/_chainResult.js","webpack://superset/./node_modules/underscore/modules/mixin.js","webpack://superset/./node_modules/underscore/modules/underscore-array-methods.js","webpack://superset/./node_modules/underscore/modules/index-default.js"],"sourcesContent":["import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nlet loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    loggers[eventType].call(...arguments);\n  }\n}\n//# sourceMappingURL=index.js.map","export default class ShaderAttribute {\n  constructor(dataColumn, opts) {\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  get value() {\n    return this.source.value;\n  }\n\n  getValue() {\n    const buffer = this.source.getBuffer();\n    const accessor = this.getAccessor();\n\n    if (buffer) {\n      return [buffer, accessor];\n    }\n\n    const {\n      value\n    } = this.source;\n    const {\n      size\n    } = accessor;\n    let constantValue = value;\n\n    if (value && value.length !== size) {\n      constantValue = new Float32Array(size);\n      const index = accessor.elementOffset || 0;\n\n      for (let i = 0; i < size; ++i) {\n        constantValue[i] = value[index + i];\n      }\n    }\n\n    return constantValue;\n  }\n\n  getAccessor() {\n    return { ...this.source.getAccessor(),\n      ...this.opts\n    };\n  }\n\n}\n//# sourceMappingURL=shader-attribute.js.map","import { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  const stride = getStride(baseAccessor);\n  const vertexOffset = 'vertexOffset' in shaderAttributeOptions ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  const elementOffset = shaderAttributeOptions.elementOffset || 0;\n  const offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return { ...shaderAttributeOptions,\n    offset,\n    stride\n  };\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  const resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: { ...resolvedOptions,\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    }\n  };\n}\n\nexport default class DataColumn {\n  constructor(gl, opts) {\n    this.gl = gl;\n    this.id = opts.id;\n    this.size = opts.size;\n    const logicalType = opts.logicalType || opts.type;\n    const doublePrecision = logicalType === 5130;\n    let {\n      defaultValue\n    } = opts;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    opts.defaultValue = defaultValue;\n    let bufferType = logicalType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!bufferType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else if (!bufferType) {\n      bufferType = 5126;\n    }\n\n    opts.logicalType = logicalType;\n    opts.type = bufferType;\n    let defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.shaderAttributes = {};\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    opts.bytesPerElement = defaultType.BYTES_PER_ELEMENT;\n    this.defaultType = defaultType;\n    this.value = null;\n    this.settings = opts;\n    this.state = {\n      externalBuffer: null,\n      bufferAccessor: opts,\n      allocatedValue: null,\n      constant: false\n    };\n    this._buffer = null;\n    this.setData(opts);\n  }\n\n  get buffer() {\n    if (!this._buffer) {\n      const {\n        isIndexed,\n        type\n      } = this.settings;\n      this._buffer = new Buffer(this.gl, {\n        id: this.id,\n        target: isIndexed ? 34963 : 34962,\n        accessor: {\n          type\n        }\n      });\n    }\n\n    return this._buffer;\n  }\n\n  get byteOffset() {\n    const accessor = this.getAccessor();\n\n    if (accessor.vertexOffset) {\n      return accessor.vertexOffset * getStride(accessor);\n    }\n\n    return 0;\n  }\n\n  delete() {\n    if (this._buffer) {\n      this._buffer.delete();\n\n      this._buffer = null;\n    }\n\n    typedArrayManager.release(this.state.allocatedValue);\n  }\n\n  getShaderAttributes(id, options) {\n    if (this.doublePrecision) {\n      const shaderAttributes = {};\n      const isBuffer64Bit = this.value instanceof Float64Array;\n      const doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n      shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n      shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n      return shaderAttributes;\n    }\n\n    if (options) {\n      const shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n      return {\n        [id]: new ShaderAttribute(this, shaderAttributeDef)\n      };\n    }\n\n    return {\n      [id]: this\n    };\n  }\n\n  getBuffer() {\n    if (this.state.constant) {\n      return null;\n    }\n\n    return this.state.externalBuffer || this._buffer;\n  }\n\n  getValue() {\n    if (this.state.constant) {\n      return this.value;\n    }\n\n    return [this.getBuffer(), this.getAccessor()];\n  }\n\n  getAccessor() {\n    return this.state.bufferAccessor;\n  }\n\n  setData(opts) {\n    const {\n      state\n    } = this;\n\n    if (ArrayBuffer.isView(opts)) {\n      opts = {\n        value: opts\n      };\n    } else if (opts instanceof Buffer) {\n      opts = {\n        buffer: opts\n      };\n    }\n\n    const accessor = { ...this.settings,\n      ...opts\n    };\n    state.bufferAccessor = accessor;\n\n    if (opts.constant) {\n      let value = opts.value;\n      value = this._normalizeValue(value, [], 0);\n\n      if (this.settings.normalized) {\n        value = this._normalizeConstant(value);\n      }\n\n      const hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n      if (!hasChanged) {\n        return false;\n      }\n\n      state.externalBuffer = null;\n      state.constant = true;\n      this.value = value;\n    } else if (opts.buffer) {\n      const buffer = opts.buffer;\n      state.externalBuffer = buffer;\n      state.constant = false;\n      this.value = opts.value;\n      const isBuffer64Bit = opts.value instanceof Float64Array;\n      accessor.type = opts.type || buffer.accessor.type;\n      accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n      accessor.stride = getStride(accessor);\n    } else if (opts.value) {\n      this._checkExternalBuffer(opts);\n\n      let value = opts.value;\n      state.externalBuffer = null;\n      state.constant = false;\n      this.value = value;\n      accessor.bytesPerElement = value.BYTES_PER_ELEMENT;\n      accessor.stride = getStride(accessor);\n      const {\n        buffer,\n        byteOffset\n      } = this;\n\n      if (this.doublePrecision && value instanceof Float64Array) {\n        value = toDoublePrecisionArray(value, accessor);\n      }\n\n      const requiredBufferSize = value.byteLength + byteOffset + accessor.stride * 2;\n\n      if (buffer.byteLength < requiredBufferSize) {\n        buffer.reallocate(requiredBufferSize);\n      }\n\n      buffer.setAccessor(null);\n      buffer.subData({\n        data: value,\n        offset: byteOffset\n      });\n      accessor.type = opts.type || buffer.accessor.type;\n    }\n\n    return true;\n  }\n\n  updateSubBuffer(opts = {}) {\n    const {\n      value\n    } = this;\n    const {\n      startOffset = 0,\n      endOffset\n    } = opts;\n    this.buffer.subData({\n      data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n        size: this.size,\n        startIndex: startOffset,\n        endIndex: endOffset\n      }) : value.subarray(startOffset, endOffset),\n      offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n    });\n  }\n\n  allocate({\n    numInstances,\n    copy = false\n  }) {\n    const {\n      state\n    } = this;\n    const oldValue = state.allocatedValue;\n    const value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n      size: this.size,\n      type: this.defaultType,\n      copy\n    });\n    this.value = value;\n    const {\n      buffer,\n      byteOffset\n    } = this;\n\n    if (buffer.byteLength < value.byteLength + byteOffset) {\n      buffer.reallocate(value.byteLength + byteOffset);\n\n      if (copy && oldValue) {\n        buffer.subData({\n          data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n          offset: byteOffset\n        });\n      }\n    }\n\n    state.allocatedValue = value;\n    state.constant = false;\n    state.externalBuffer = null;\n    state.bufferAccessor = this.settings;\n    return true;\n  }\n\n  _checkExternalBuffer(opts) {\n    const {\n      value\n    } = opts;\n\n    if (!opts.constant && value) {\n      const ArrayType = this.defaultType;\n      let illegalArrayType = false;\n\n      if (this.doublePrecision) {\n        illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n      }\n\n      if (illegalArrayType) {\n        throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n      }\n\n      if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n        log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n      }\n    }\n  }\n\n  _normalizeConstant(value) {\n    switch (this.settings.type) {\n      case 5120:\n        return new Float32Array(value).map(x => (x + 128) / 255 * 2 - 1);\n\n      case 5122:\n        return new Float32Array(value).map(x => (x + 32768) / 65535 * 2 - 1);\n\n      case 5121:\n        return new Float32Array(value).map(x => x / 255);\n\n      case 5123:\n        return new Float32Array(value).map(x => x / 65535);\n\n      default:\n        return value;\n    }\n  }\n\n  _normalizeValue(value, out, start) {\n    const {\n      defaultValue,\n      size\n    } = this.settings;\n\n    if (Number.isFinite(value)) {\n      out[start] = value;\n      return out;\n    }\n\n    if (!value) {\n      out[start] = defaultValue[0];\n      return out;\n    }\n\n    switch (size) {\n      case 4:\n        out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n      case 3:\n        out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n      case 2:\n        out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n      case 1:\n        out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n        break;\n\n      default:\n        let i = size;\n\n        while (--i >= 0) {\n          out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n        }\n\n    }\n\n    return out;\n  }\n\n  _areValuesEqual(value1, value2) {\n    if (!value1 || !value2) {\n      return false;\n    }\n\n    const {\n      size\n    } = this;\n\n    for (let i = 0; i < size; i++) {\n      if (value1[i] !== value2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n}\n//# sourceMappingURL=data-column.js.map","export const EMPTY = [];\nexport const FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  const newRangeList = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","import DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\nexport default class Attribute extends DataColumn {\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    const {\n      transition = false,\n      noAlloc = false,\n      update = null,\n      accessor = null,\n      transform = null,\n      startIndices = null\n    } = opts;\n    Object.assign(this.settings, {\n      transition,\n      noAlloc,\n      update: update || accessor && this._autoUpdater,\n      accessor,\n      transform\n    });\n    Object.assign(this.state, {\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL,\n      startIndices\n    });\n    Object.seal(this.settings);\n    Object.seal(this.state);\n\n    this._validateAttributeUpdaters();\n  }\n\n  get startIndices() {\n    return this.state.startIndices;\n  }\n\n  set startIndices(layout) {\n    this.state.startIndices = layout;\n  }\n\n  needsUpdate() {\n    return this.state.needsUpdate;\n  }\n\n  needsRedraw({\n    clearChangedFlags = false\n  } = {}) {\n    const needsRedraw = this.state.needsRedraw;\n    this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n    return needsRedraw;\n  }\n\n  getUpdateTriggers() {\n    const {\n      accessor\n    } = this.settings;\n    return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n  }\n\n  supportsTransition() {\n    return Boolean(this.settings.transition);\n  }\n\n  getTransitionSetting(opts) {\n    if (!opts || !this.supportsTransition()) {\n      return null;\n    }\n\n    const {\n      accessor\n    } = this.settings;\n    const layerSettings = this.settings.transition;\n    const userSettings = Array.isArray(accessor) ? opts[accessor.find(a => opts[a])] : opts[accessor];\n    return normalizeTransitionSettings(userSettings, layerSettings);\n  }\n\n  setNeedsUpdate(reason = this.id, dataRange) {\n    this.state.needsUpdate = this.state.needsUpdate || reason;\n    this.setNeedsRedraw(reason);\n\n    if (dataRange) {\n      const {\n        startRow = 0,\n        endRow = Infinity\n      } = dataRange;\n      this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n    } else {\n      this.state.updateRanges = range.FULL;\n    }\n  }\n\n  clearNeedsUpdate() {\n    this.state.needsUpdate = false;\n    this.state.updateRanges = range.EMPTY;\n  }\n\n  setNeedsRedraw(reason = this.id) {\n    this.state.needsRedraw = this.state.needsRedraw || reason;\n  }\n\n  update(opts) {\n    this.setData(opts);\n  }\n\n  allocate(numInstances) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (settings.update) {\n      super.allocate({\n        numInstances,\n        copy: state.updateRanges !== range.FULL\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  updateBuffer({\n    numInstances,\n    data,\n    props,\n    context\n  }) {\n    if (!this.needsUpdate()) {\n      return false;\n    }\n\n    const {\n      state: {\n        updateRanges\n      },\n      settings: {\n        update,\n        noAlloc\n      }\n    } = this;\n    let updated = true;\n\n    if (update) {\n      for (const [startRow, endRow] of updateRanges) {\n        update.call(context, this, {\n          data,\n          startRow,\n          endRow,\n          props,\n          numInstances\n        });\n      }\n\n      if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n        this.setData({\n          value: this.value,\n          constant: this.constant\n        });\n      } else {\n        for (const [startRow, endRow] of updateRanges) {\n          const startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n          const endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n          super.updateSubBuffer({\n            startOffset,\n            endOffset\n          });\n        }\n      }\n\n      this._checkAttributeArray();\n    } else {\n      updated = false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setNeedsRedraw();\n    return updated;\n  }\n\n  setConstantValue(value) {\n    if (value === undefined || typeof value === 'function') {\n      return false;\n    }\n\n    const hasChanged = this.setData({\n      constant: true,\n      value\n    });\n\n    if (hasChanged) {\n      this.setNeedsRedraw();\n    }\n\n    this.clearNeedsUpdate();\n    return true;\n  }\n\n  setExternalBuffer(buffer) {\n    const {\n      state\n    } = this;\n\n    if (!buffer) {\n      state.lastExternalBuffer = null;\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n\n    if (state.lastExternalBuffer === buffer) {\n      return true;\n    }\n\n    state.lastExternalBuffer = buffer;\n    this.setNeedsRedraw();\n    this.setData(buffer);\n    return true;\n  }\n\n  setBinaryValue(buffer, startIndices = null) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (!buffer) {\n      state.binaryValue = null;\n      state.binaryAccessor = null;\n      return false;\n    }\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (state.binaryValue === buffer) {\n      this.clearNeedsUpdate();\n      return true;\n    }\n\n    state.binaryValue = buffer;\n    this.setNeedsRedraw();\n\n    if (ArrayBuffer.isView(buffer)) {\n      buffer = {\n        value: buffer\n      };\n    }\n\n    const needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n    if (needsUpdate) {\n      assert(ArrayBuffer.isView(buffer.value), \"invalid \".concat(settings.accessor));\n      const needsNormalize = buffer.size && buffer.size !== this.size;\n      state.binaryAccessor = getAccessorFromBuffer(buffer.value, {\n        size: buffer.size || this.size,\n        stride: buffer.stride,\n        offset: buffer.offset,\n        startIndices,\n        nested: needsNormalize\n      });\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setData(buffer);\n    return true;\n  }\n\n  getVertexOffset(row) {\n    const {\n      startIndices\n    } = this;\n    const vertexIndex = startIndices ? startIndices[row] : row;\n    return vertexIndex * this.size;\n  }\n\n  getShaderAttributes() {\n    const shaderAttributeDefs = this.settings.shaderAttributes || {\n      [this.id]: null\n    };\n    const shaderAttributes = {};\n\n    for (const shaderAttributeName in shaderAttributeDefs) {\n      Object.assign(shaderAttributes, super.getShaderAttributes(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n    }\n\n    return shaderAttributes;\n  }\n\n  _autoUpdater(attribute, {\n    data,\n    startRow,\n    endRow,\n    props,\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const {\n      settings,\n      state,\n      value,\n      size,\n      startIndices\n    } = attribute;\n    const {\n      accessor,\n      transform\n    } = settings;\n    const accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n    assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n    let i = attribute.getVertexOffset(startRow);\n    const {\n      iterable,\n      objectInfo\n    } = createIterable(data, startRow, endRow);\n\n    for (const object of iterable) {\n      objectInfo.index++;\n      let objectValue = accessorFunc(object, objectInfo);\n\n      if (transform) {\n        objectValue = transform.call(this, objectValue);\n      }\n\n      if (startIndices) {\n        const numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n        if (objectValue && Array.isArray(objectValue[0])) {\n          let startIndex = i;\n\n          for (const item of objectValue) {\n            attribute._normalizeValue(item, value, startIndex);\n\n            startIndex += size;\n          }\n        } else if (objectValue && objectValue.length > size) {\n          value.set(objectValue, i);\n        } else {\n          attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n          fillArray({\n            target: value,\n            source: objectInfo.target,\n            start: i,\n            count: numVertices\n          });\n        }\n\n        i += numVertices * size;\n      } else {\n        attribute._normalizeValue(objectValue, value, i);\n\n        i += size;\n      }\n    }\n  }\n\n  _validateAttributeUpdaters() {\n    const {\n      settings\n    } = this;\n    const hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n    if (!hasUpdater) {\n      throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n    }\n  }\n\n  _checkAttributeArray() {\n    const {\n      value\n    } = this;\n    const limit = Math.min(4, this.size);\n\n    if (value && value.length >= limit) {\n      let valid = true;\n\n      switch (limit) {\n        case 4:\n          valid = valid && Number.isFinite(value[3]);\n\n        case 3:\n          valid = valid && Number.isFinite(value[2]);\n\n        case 2:\n          valid = valid && Number.isFinite(value[1]);\n\n        case 1:\n          valid = valid && Number.isFinite(value[0]);\n          break;\n\n        default:\n          valid = false;\n      }\n\n      if (!valid) {\n        throw new Error(\"Illegal attribute generated for \".concat(this.id));\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=attribute.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","import { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\nexport default class AttributeTransitionManager {\n  constructor(gl, {\n    id,\n    timeline\n  }) {\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = Transform.isSupported(gl);\n  }\n\n  finalize() {\n    for (const attributeName in this.transitions) {\n      this._removeTransition(attributeName);\n    }\n  }\n\n  update({\n    attributes,\n    transitions,\n    numInstances\n  }) {\n    this.numInstances = numInstances || 1;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const settings = attribute.getTransitionSetting(transitions);\n      if (!settings) continue;\n\n      this._updateAttribute(attributeName, attribute, settings);\n    }\n\n    for (const attributeName in this.transitions) {\n      const attribute = attributes[attributeName];\n\n      if (!attribute || !attribute.getTransitionSetting(transitions)) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }\n\n  hasAttribute(attributeName) {\n    const transition = this.transitions[attributeName];\n    return transition && transition.inProgress;\n  }\n\n  getAttributes() {\n    const animatedAttributes = {};\n\n    for (const attributeName in this.transitions) {\n      const transition = this.transitions[attributeName];\n\n      if (transition.inProgress) {\n        animatedAttributes[attributeName] = transition.attributeInTransition;\n      }\n    }\n\n    return animatedAttributes;\n  }\n\n  run() {\n    if (!this.isSupported || this.numInstances === 0) {\n      return false;\n    }\n\n    for (const attributeName in this.transitions) {\n      const updated = this.transitions[attributeName].update();\n\n      if (updated) {\n        this.needsRedraw = true;\n      }\n    }\n\n    const needsRedraw = this.needsRedraw;\n    this.needsRedraw = false;\n    return needsRedraw;\n  }\n\n  _removeTransition(attributeName) {\n    this.transitions[attributeName].cancel();\n    delete this.transitions[attributeName];\n  }\n\n  _updateAttribute(attributeName, attribute, settings) {\n    const transition = this.transitions[attributeName];\n    let isNew = !transition || transition.type !== settings.type;\n\n    if (isNew) {\n      if (!this.isSupported) {\n        log.warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n        return;\n      }\n\n      if (transition) {\n        this._removeTransition(attributeName);\n      }\n\n      const TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (TransitionType) {\n        this.transitions[attributeName] = new TransitionType({\n          attribute,\n          timeline: this.timeline,\n          gl: this.gl\n        });\n      } else {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        isNew = false;\n      }\n    }\n\n    if (isNew || attribute.needsRedraw()) {\n      this.needsRedraw = true;\n      this.transitions[attributeName].start(settings, this.numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-transition-manager.js.map","import { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\nexport default class GPUInterpolationTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    if (transitionSettings.duration <= 0) {\n      this.transition.cancel();\n      return;\n    }\n\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    cycleBuffers(buffers);\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aFrom: buffers[0],\n        aTo: getSourceBufferAttribute(gl, attribute)\n      },\n      feedbackBuffers: {\n        vCurrent: buffers[1]\n      }\n    });\n  }\n\n  update() {\n    const updated = this.transition.update();\n\n    if (updated) {\n      const {\n        time,\n        settings: {\n          duration,\n          easing\n        }\n      } = this.transition;\n      const t = easing(time / duration);\n      this.transform.run({\n        uniforms: {\n          time: t\n        }\n      });\n    }\n\n    return updated;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n  }\n\n}\nconst vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\nexport default class GPUSpringTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, { ...attribute.settings,\n      normalized: false\n    });\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aTo: getSourceBufferAttribute(gl, attribute)\n      }\n    });\n  }\n\n  update() {\n    const {\n      buffers,\n      transform,\n      framebuffer,\n      transition\n    } = this;\n    const updated = transition.update();\n\n    if (!updated) {\n      return false;\n    }\n\n    transform.update({\n      sourceBuffers: {\n        aPrev: buffers[0],\n        aCur: buffers[1]\n      },\n      feedbackBuffers: {\n        vNext: buffers[2]\n      }\n    });\n    transform.run({\n      framebuffer,\n      discard: false,\n      clearRenderTarget: true,\n      uniforms: {\n        stiffness: transition.settings.stiffness,\n        damping: transition.settings.damping\n      },\n      parameters: {\n        depthTest: false,\n        blend: true,\n        viewport: [0, 0, 1, 1],\n        blendFunc: [1, 1],\n        blendEquation: [32776, 32776]\n      }\n    });\n    cycleBuffers(buffers);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: this.attribute.value\n    });\n    const isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n    if (!isTransitioning) {\n      transition.end();\n    }\n\n    return true;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n\n    this.texture.delete();\n    this.texture = null;\n    this.framebuffer.delete();\n    this.framebuffer = null;\n  }\n\n}\n\nfunction getTransform(gl, attribute, framebuffer) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: {\n      [36064]: texture\n    }\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nconst TRACE_INVALIDATE = 'attributeManager.invalidate';\nconst TRACE_UPDATE_START = 'attributeManager.updateStart';\nconst TRACE_UPDATE_END = 'attributeManager.updateEnd';\nconst TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nconst TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nconst TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\nexport default class AttributeManager {\n  constructor(gl, {\n    id = 'attribute-manager',\n    stats,\n    timeline\n  } = {}) {\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline\n    });\n    Object.seal(this);\n  }\n\n  finalize() {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].delete();\n    }\n\n    this.attributeTransitionManager.finalize();\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this.needsRedraw;\n    this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n    return redraw && this.id;\n  }\n\n  setNeedsRedraw(redraw = true) {\n    this.needsRedraw = true;\n    return this;\n  }\n\n  add(attributes, updaters) {\n    this._add(attributes, updaters);\n  }\n\n  addInstanced(attributes, updaters) {\n    this._add(attributes, updaters, {\n      instanced: 1\n    });\n  }\n\n  remove(attributeNameArray) {\n    for (let i = 0; i < attributeNameArray.length; i++) {\n      const name = attributeNameArray[i];\n\n      if (this.attributes[name] !== undefined) {\n        this.attributes[name].delete();\n        delete this.attributes[name];\n      }\n    }\n  }\n\n  invalidate(triggerName, dataRange) {\n    const invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n    debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n  }\n\n  invalidateAll(dataRange) {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n    }\n\n    debug(TRACE_INVALIDATE, this, 'all');\n  }\n\n  update({\n    data,\n    numInstances,\n    startIndices = null,\n    transitions,\n    props = {},\n    buffers = {},\n    context = {}\n  } = {}) {\n    let updated = false;\n    debug(TRACE_UPDATE_START, this);\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeStart();\n    }\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      const accessorName = attribute.settings.accessor;\n      attribute.startIndices = startIndices;\n\n      if (props[attributeName]) {\n        log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n      }\n\n      if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n        updated = true;\n\n        this._updateAttribute({\n          attribute,\n          numInstances,\n          data,\n          props,\n          context\n        });\n      }\n\n      this.needsRedraw |= attribute.needsRedraw();\n    }\n\n    if (updated) {\n      debug(TRACE_UPDATE_END, this, numInstances);\n    }\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeEnd();\n    }\n\n    this.attributeTransitionManager.update({\n      attributes: this.attributes,\n      numInstances,\n      transitions\n    });\n  }\n\n  updateTransition() {\n    const {\n      attributeTransitionManager\n    } = this;\n    const transitionUpdated = attributeTransitionManager.run();\n    this.needsRedraw = this.needsRedraw || transitionUpdated;\n    return transitionUpdated;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getChangedAttributes(opts = {\n    clearChangedFlags: false\n  }) {\n    const {\n      attributes,\n      attributeTransitionManager\n    } = this;\n    const changedAttributes = { ...attributeTransitionManager.getAttributes()\n    };\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n\n      if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n        changedAttributes[attributeName] = attribute;\n      }\n    }\n\n    return changedAttributes;\n  }\n\n  getShaderAttributes(attributes, excludeAttributes = {}) {\n    if (!attributes) {\n      attributes = this.getAttributes();\n    }\n\n    const shaderAttributes = {};\n\n    for (const attributeName in attributes) {\n      if (!excludeAttributes[attributeName]) {\n        Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n      }\n    }\n\n    return shaderAttributes;\n  }\n\n  getAccessors() {\n    return this.updateTriggers;\n  }\n\n  _add(attributes, updaters, extraProps = {}) {\n    if (updaters) {\n      log.warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n    }\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      this.attributes[attributeName] = this._createAttribute(attributeName, attribute, extraProps);\n    }\n\n    this._mapUpdateTriggersToAttributes();\n  }\n\n  _createAttribute(name, attribute, extraProps) {\n    const props = { ...attribute,\n      id: name,\n      constant: attribute.constant || false,\n      isIndexed: attribute.isIndexed || attribute.elements,\n      size: attribute.elements && 1 || attribute.size,\n      value: attribute.value || null,\n      divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor\n    };\n    return new Attribute(this.gl, props);\n  }\n\n  _mapUpdateTriggersToAttributes() {\n    const triggers = {};\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      attribute.getUpdateTriggers().forEach(triggerName => {\n        if (!triggers[triggerName]) {\n          triggers[triggerName] = [];\n        }\n\n        triggers[triggerName].push(attributeName);\n      });\n    }\n\n    this.updateTriggers = triggers;\n  }\n\n  _invalidateTrigger(triggerName, dataRange) {\n    const {\n      attributes,\n      updateTriggers\n    } = this;\n    const invalidatedAttributes = updateTriggers[triggerName];\n\n    if (invalidatedAttributes) {\n      invalidatedAttributes.forEach(name => {\n        const attribute = attributes[name];\n\n        if (attribute) {\n          attribute.setNeedsUpdate(attribute.id, dataRange);\n        }\n      });\n    }\n\n    return invalidatedAttributes;\n  }\n\n  _updateAttribute(opts) {\n    const {\n      attribute,\n      numInstances\n    } = opts;\n    debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n    if (attribute.allocate(numInstances)) {\n      debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n    }\n\n    const updated = attribute.updateBuffer(opts);\n\n    if (updated) {\n      this.needsRedraw = true;\n      debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-manager.js.map","function padArrayChunk({\n  source,\n  target,\n  start = 0,\n  end,\n  size,\n  getData\n}) {\n  end = end || target.length;\n  const sourceLength = source.length;\n  const targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  let i = sourceLength;\n\n  while (i < targetLength) {\n    const datum = getData(i, source);\n\n    for (let j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nexport function padArray({\n  source,\n  target,\n  size,\n  getData,\n  sourceStartIndices,\n  targetStartIndices\n}) {\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source,\n      target,\n      size,\n      getData\n    });\n    return target;\n  }\n\n  let sourceIndex = 0;\n  let targetIndex = 0;\n\n  const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n\n  const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (let i = 1; i < n; i++) {\n    const nextSourceIndex = sourceStartIndices[i] * size;\n    const nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target,\n      start: targetIndex,\n      size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nconst DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: t => t\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return { ...DEFAULT_TRANSITION_SETTINGS[userSettings.type],\n    ...layerSettings,\n    ...userSettings\n  };\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  const buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  const {\n    doublePrecision,\n    settings,\n    value,\n    size\n  } = attribute;\n  const multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer({\n  buffer,\n  numInstances,\n  attribute,\n  fromLength,\n  fromStartIndices,\n  getData = x => x\n}) {\n  const precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  const size = attribute.size * precisionMultiplier;\n  const byteOffset = attribute.byteOffset;\n  const toStartIndices = attribute.startIndices;\n  const hasStartIndices = fromStartIndices && toStartIndices;\n  const toLength = getAttributeBufferLength(attribute, numInstances);\n  const isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  const toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    const getter = getData;\n\n    getData = (value, chunk) => attribute._normalizeConstant(getter(value, chunk));\n  }\n\n  const getMissingData = isConstant ? (i, chunk) => getData(toData, chunk) : (i, chunk) => getData(toData.subarray(i, i + size), chunk);\n  const source = buffer.getData({\n    length: fromLength\n  });\n  const data = new Float32Array(toLength);\n  padArray({\n    source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import log from '../utils/log';\nexport const COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: () => log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')() || 0\n});\nexport const PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport const EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\n//# sourceMappingURL=constants.js.map","import { lerp } from 'math.gl';\nimport Transition from './transition';\nexport default class CPUInterpolationTransition extends Transition {\n  get value() {\n    return this._value;\n  }\n\n  _onUpdate() {\n    const {\n      time,\n      settings: {\n        fromValue,\n        toValue,\n        duration,\n        easing\n      }\n    } = this;\n    const t = easing(time / duration);\n    this._value = lerp(fromValue, toValue, t);\n  }\n\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import Transition from './transition';\nconst EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  const velocity = cur - prev;\n  const delta = dest - cur;\n  const spring = delta * stiffness;\n  const damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    const next = [];\n\n    for (let i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    let distanceSquare = 0;\n\n    for (let i = 0; i < value1.length; i++) {\n      const d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nexport default class CPUSpringTransition extends Transition {\n  get value() {\n    return this._currValue;\n  }\n\n  _onUpdate() {\n    const {\n      fromValue,\n      toValue,\n      damping,\n      stiffness\n    } = this.settings;\n    const {\n      _prevValue = fromValue,\n      _currValue = fromValue\n    } = this;\n    let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n    const delta = distance(nextValue, toValue);\n    const velocity = distance(nextValue, _currValue);\n\n    if (delta < EPSILON && velocity < EPSILON) {\n      nextValue = toValue;\n      this.end();\n    }\n\n    this._prevValue = _currValue;\n    this._currValue = nextValue;\n  }\n\n}\n//# sourceMappingURL=cpu-spring-transition.js.map","import { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\nexport default class UniformTransitionManager {\n  constructor(timeline) {\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  get active() {\n    return this.transitions.size > 0;\n  }\n\n  add(key, fromValue, toValue, settings) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      const transition = transitions.get(key);\n      const {\n        value = transition.settings.fromValue\n      } = transition;\n      fromValue = value;\n      this.remove(key);\n    }\n\n    settings = normalizeTransitionSettings(settings);\n\n    if (!settings) {\n      return;\n    }\n\n    const TransitionType = TRANSITION_TYPES[settings.type];\n\n    if (!TransitionType) {\n      log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n      return;\n    }\n\n    const transition = new TransitionType(this.timeline);\n    transition.start({ ...settings,\n      fromValue,\n      toValue\n    });\n    transitions.set(key, transition);\n  }\n\n  remove(key) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      transitions.get(key).cancel();\n      transitions.delete(key);\n    }\n  }\n\n  update() {\n    const propsInTransition = {};\n\n    for (const [key, transition] of this.transitions) {\n      transition.update();\n      propsInTransition[key] = transition.value;\n\n      if (!transition.inProgress) {\n        this.remove(key);\n      }\n    }\n\n    return propsInTransition;\n  }\n\n  clear() {\n    for (const key of this.transitions.keys()) {\n      this.remove(key);\n    }\n  }\n\n}\n//# sourceMappingURL=uniform-transition-manager.js.map","import { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n  const p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  const normalizedParams = { ...opts\n  };\n  let {\n    coordinateSystem\n  } = opts;\n  const {\n    viewport,\n    coordinateOrigin,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = opts;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nexport function getWorldPosition(position, {\n  viewport,\n  modelMatrix,\n  coordinateSystem,\n  coordinateOrigin,\n  offsetMode\n}) {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","import { Texture2D } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nexport function createTexture(layer, image) {\n  const gl = layer.context && layer.context.gl;\n\n  if (!gl || !image) {\n    return null;\n  }\n\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  let specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n\n  const texture = new Texture2D(gl, { ...image,\n    parameters: { ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...layer.props.textureParameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map","import { createTexture, destroyTexture } from '../utils/texture';\nconst TYPE_DEFINITIONS = {\n  boolean: {\n    validate(value, propType) {\n      return true;\n    },\n\n    equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n\n  },\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  color: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n\n    equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  accessor: {\n    validate(value, propType) {\n      const valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n\n    equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n\n    equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  function: {\n    validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n\n    equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n\n  },\n  data: {\n    transform: (value, propType, component) => {\n      const {\n        dataTransform\n      } = component ? component.props : {};\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: (value, propType, component) => {\n      return createTexture(component, value);\n    },\n    release: value => {\n      destroyTexture(value);\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  const len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n  const defaultProps = {};\n  const deprecatedProps = {};\n\n  for (const [propName, propDef] of Object.entries(propDefs)) {\n    if (propDef && propDef.deprecatedFor) {\n      deprecatedProps[propName] = Array.isArray(propDef.deprecatedFor) ? propDef.deprecatedFor : [propDef.deprecatedFor];\n    } else {\n      const propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes,\n    defaultProps,\n    deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return {\n      name,\n      type: getTypeOf(propDef.value),\n      ...propDef\n    };\n  }\n\n  return {\n    name,\n    ...TYPE_DEFINITIONS[propDef.type],\n    ...propDef\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT,\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nexport function createProps() {\n  const component = this;\n  const propsPrototype = getPropsPrototype(component.constructor);\n  const propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT] = component;\n  propsInstance[ASYNC_ORIGINAL] = {};\n  propsInstance[ASYNC_RESOLVED] = {};\n\n  for (let i = 0; i < arguments.length; ++i) {\n    const props = arguments[i];\n\n    for (const key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  const defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  const parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  const parentClass = Object.getPrototypeOf(componentClass);\n  const parentDefaultProps = getPropsPrototype(parentClass);\n  const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  const componentPropDefs = parsePropTypes(componentDefaultProps);\n  const defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  const propTypes = { ...parentClass._propTypes,\n    ...componentPropDefs.propTypes\n  };\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  const deprecatedProps = { ...parentClass._deprecatedProps,\n    ...componentPropDefs.deprecatedProps\n  };\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  const defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  const id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  for (const propName in deprecatedProps) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n\n      set(newValue) {\n        const nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        for (const newPropName of deprecatedProps[propName]) {\n          if (!hasOwnProperty(this, newPropName)) {\n            this[newPropName] = newValue;\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n\n    });\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  const defaultValues = {};\n  const descriptors = {};\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      name,\n      value\n    } = propType;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name, value);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n\n    set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED][name] = newValue;\n      }\n    },\n\n    get() {\n      if (this[ASYNC_RESOLVED]) {\n        if (name in this[ASYNC_RESOLVED]) {\n          const value = this[ASYNC_RESOLVED][name];\n          return value || this[ASYNC_DEFAULTS][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL]) {\n          const state = this[COMPONENT] && this[COMPONENT].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS][name];\n    }\n\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  const componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","import { isAsyncIterable } from '../utils/iterable-utils';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nconst EMPTY_PROPS = Object.freeze({});\nexport default class ComponentState {\n  constructor(component = null) {\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = () => {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  finalize() {\n    for (const propName in this.asyncProps) {\n      const asyncProp = this.asyncProps[propName];\n\n      if (asyncProp.type && asyncProp.type.release) {\n        asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n      }\n    }\n  }\n\n  getOldProps() {\n    return this.oldAsyncProps || this.oldProps;\n  }\n\n  resetOldProps() {\n    this.oldAsyncProps = null;\n    this.oldProps = this.component.props;\n  }\n\n  freezeAsyncOldProps() {\n    if (!this.oldAsyncProps) {\n      this.oldProps = this.oldProps || this.component.props;\n      this.oldAsyncProps = Object.create(this.oldProps);\n\n      for (const propName in this.asyncProps) {\n        Object.defineProperty(this.oldAsyncProps, propName, {\n          enumerable: true,\n          value: this.oldProps[propName]\n        });\n      }\n    }\n  }\n\n  hasAsyncProp(propName) {\n    return propName in this.asyncProps;\n  }\n\n  getAsyncProp(propName) {\n    const asyncProp = this.asyncProps[propName];\n    return asyncProp && asyncProp.resolvedValue;\n  }\n\n  isAsyncPropLoading(propName) {\n    if (propName) {\n      const asyncProp = this.asyncProps[propName];\n      return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n    }\n\n    for (const key in this.asyncProps) {\n      if (this.isAsyncPropLoading(key)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  reloadAsyncProp(propName, value) {\n    this._watchPromise(propName, Promise.resolve(value));\n  }\n\n  setAsyncProps(props) {\n    const resolvedValues = props[ASYNC_RESOLVED] || {};\n    const originalValues = props[ASYNC_ORIGINAL] || props;\n    const defaultValues = props[ASYNC_DEFAULTS] || {};\n\n    for (const propName in resolvedValues) {\n      const value = resolvedValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n\n      resolvedValues[propName] = this.getAsyncProp(propName);\n    }\n\n    for (const propName in originalValues) {\n      const value = originalValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n    }\n  }\n\n  _updateAsyncProp(propName, value) {\n    if (!this._didAsyncInputValueChange(propName, value)) {\n      return;\n    }\n\n    if (typeof value === 'string') {\n      var _this$layer;\n\n      const fetch = (_this$layer = this.layer) === null || _this$layer === void 0 ? void 0 : _this$layer.props.fetch;\n      const url = value;\n\n      if (fetch) {\n        value = fetch(url, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }\n\n    if (value instanceof Promise) {\n      this._watchPromise(propName, value);\n\n      return;\n    }\n\n    if (isAsyncIterable(value)) {\n      this._resolveAsyncIterable(propName, value);\n\n      return;\n    }\n\n    this._setPropValue(propName, value);\n  }\n\n  _didAsyncInputValueChange(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n      return false;\n    }\n\n    asyncProp.lastValue = value;\n    return true;\n  }\n\n  _setPropValue(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n    value = this._postProcessValue(asyncProp, value);\n    asyncProp.resolvedValue = value;\n    asyncProp.pendingLoadCount++;\n    asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n  }\n\n  _setAsyncPropValue(propName, value, loadCount) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n      this.freezeAsyncOldProps();\n      asyncProp.resolvedValue = value;\n      asyncProp.resolvedLoadCount = loadCount;\n      this.onAsyncPropUpdated(propName, value);\n    }\n  }\n\n  _watchPromise(propName, promise) {\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    promise.then(data => {\n      var _this$layer2;\n\n      data = this._postProcessValue(asyncProp, data);\n\n      this._setAsyncPropValue(propName, data, loadCount);\n\n      const onDataLoad = (_this$layer2 = this.layer) === null || _this$layer2 === void 0 ? void 0 : _this$layer2.props.onDataLoad;\n\n      if (propName === 'data' && onDataLoad) {\n        onDataLoad(data, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }).catch(error => {\n      var _this$layer3;\n\n      (_this$layer3 = this.layer) === null || _this$layer3 === void 0 ? void 0 : _this$layer3.raiseError(error, \"loading \".concat(propName, \" of \").concat(this.layer));\n    });\n  }\n\n  async _resolveAsyncIterable(propName, iterable) {\n    var _this$layer4;\n\n    if (propName !== 'data') {\n      this._setPropValue(propName, iterable);\n    }\n\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    let data = [];\n    let count = 0;\n\n    for await (const chunk of iterable) {\n      const {\n        dataTransform\n      } = this.component ? this.component.props : {};\n\n      if (dataTransform) {\n        data = dataTransform(chunk, data);\n      } else {\n        data = data.concat(chunk);\n      }\n\n      Object.defineProperty(data, '__diff', {\n        enumerable: false,\n        value: [{\n          startRow: count,\n          endRow: data.length\n        }]\n      });\n      count = data.length;\n\n      this._setAsyncPropValue(propName, data, loadCount);\n    }\n\n    const onDataLoad = (_this$layer4 = this.layer) === null || _this$layer4 === void 0 ? void 0 : _this$layer4.props.onDataLoad;\n\n    if (onDataLoad) {\n      onDataLoad(data, {\n        propName,\n        layer: this.layer\n      });\n    }\n  }\n\n  _postProcessValue(asyncProp, value) {\n    const propType = asyncProp.type;\n\n    if (propType) {\n      if (propType.release) {\n        propType.release(asyncProp.resolvedValue, propType, this.component);\n      }\n\n      if (propType.transform) {\n        return propType.transform(value, propType, this.component);\n      }\n    }\n\n    return value;\n  }\n\n  _createAsyncPropData(propName, defaultValue) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      const propTypes = this.component && this.component.constructor._propTypes;\n      this.asyncProps[propName] = {\n        type: propTypes && propTypes[propName],\n        lastValue: null,\n        resolvedValue: defaultValue,\n        pendingLoadCount: 0,\n        resolvedLoadCount: 0\n      };\n    }\n  }\n\n}\n//# sourceMappingURL=component-state.js.map","import { LIFECYCLE } from '../lifecycle/constants';\nimport { createProps } from './create-props';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nimport ComponentState from './component-state';\nconst defaultProps = {};\nlet counter = 0;\nexport default class Component {\n  constructor() {\n    this.props = createProps.apply(this, arguments);\n    this.id = this.props.id;\n    this.count = counter++;\n    this.lifecycle = LIFECYCLE.NO_STATE;\n    this.parent = null;\n    this.context = null;\n    this.state = null;\n    this.internalState = null;\n    Object.seal(this);\n  }\n\n  clone(newProps) {\n    const {\n      props\n    } = this;\n    const asyncProps = {};\n\n    for (const key in props[ASYNC_DEFAULTS]) {\n      if (key in props[ASYNC_RESOLVED]) {\n        asyncProps[key] = props[ASYNC_RESOLVED][key];\n      } else if (key in props[ASYNC_ORIGINAL]) {\n        asyncProps[key] = props[ASYNC_ORIGINAL][key];\n      }\n    }\n\n    return new this.constructor({ ...props,\n      ...asyncProps,\n      ...newProps\n    });\n  }\n\n  get stats() {\n    return this.internalState.stats;\n  }\n\n  _initState() {\n    this.internalState = new ComponentState({});\n  }\n\n}\nComponent.componentName = 'Component';\nComponent.defaultProps = defaultProps;\n//# sourceMappingURL=component.js.map","import ComponentState from '../lifecycle/component-state';\nexport default class LayerState extends ComponentState {\n  constructor({\n    attributeManager,\n    layer\n  }) {\n    super(layer);\n    this.attributeManager = attributeManager;\n    this.model = null;\n    this.needsRedraw = true;\n    this.subLayers = null;\n    this.usesPickingColorCache = false;\n  }\n\n  get layer() {\n    return this.component;\n  }\n\n  set layer(layer) {\n    this.component = layer;\n  }\n\n}\n//# sourceMappingURL=layer-state.js.map","import { COORDINATE_SYSTEM } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps, validateProps } from '../lifecycle/props';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nconst TRACE_CHANGE_FLAG = 'layer.changeFlag';\nconst TRACE_INITIALIZE = 'layer.initialize';\nconst TRACE_UPDATE = 'layer.update';\nconst TRACE_FINALIZE = 'layer.finalize';\nconst TRACE_MATCHED = 'layer.matched';\nconst MAX_PICKING_COLOR_CACHE_SIZE = 2 ** 24 - 1;\nconst EMPTY_ARRAY = Object.freeze([]);\nconst areViewportsEqual = memoize(({\n  oldViewport,\n  viewport\n}) => {\n  return oldViewport.equals(viewport);\n});\nlet pickingColorCache = new Uint8ClampedArray(0);\nconst defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: null,\n  _dataDiff: {\n    type: 'function',\n    value: data => data && data.__diff,\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onError: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: (url, {\n      propName,\n      layer,\n      loaders,\n      loadOptions,\n      signal\n    }) => {\n      const {\n        resourceManager\n      } = layer.context;\n      loadOptions = loadOptions || layer.getLoadOptions();\n      loaders = loaders || layer.props.loaders;\n\n      if (signal) {\n        var _loadOptions;\n\n        loadOptions = { ...loadOptions,\n          fetch: { ...((_loadOptions = loadOptions) === null || _loadOptions === void 0 ? void 0 : _loadOptions.fetch),\n            signal\n          }\n        };\n      }\n\n      let inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: load(url, loaders),\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: data => layer.internalState.reloadAsyncProp(propName, data),\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loaders, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {},\n  transitions: null,\n  extensions: [],\n  loaders: {\n    type: 'array',\n    value: [],\n    optional: true,\n    compare: true\n  },\n  getPolygonOffset: {\n    type: 'function',\n    value: ({\n      layerIndex\n    }) => [0, -layerIndex * 100],\n    compare: false\n  },\n  highlightedObjectIndex: -1,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\nexport default class Layer extends Component {\n  toString() {\n    const className = this.constructor.layerName || this.constructor.name;\n    return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n  }\n\n  raiseError(error, message) {\n    var _this$props$onError, _this$props;\n\n    if (message) {\n      error.message = \"\".concat(message, \": \").concat(error.message);\n    }\n\n    if (!((_this$props$onError = (_this$props = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props, error))) {\n      var _this$context, _this$context$onError;\n\n      (_this$context = this.context) === null || _this$context === void 0 ? void 0 : (_this$context$onError = _this$context.onError) === null || _this$context$onError === void 0 ? void 0 : _this$context$onError.call(_this$context, error, this);\n    }\n  }\n\n  setState(updateObject) {\n    this.setChangeFlags({\n      stateChanged: true\n    });\n    Object.assign(this.state, updateObject);\n    this.setNeedsRedraw();\n  }\n\n  setNeedsRedraw(redraw = true) {\n    if (this.internalState) {\n      this.internalState.needsRedraw = redraw;\n    }\n  }\n\n  setNeedsUpdate() {\n    this.context.layerManager.setNeedsUpdate(String(this));\n    this.internalState.needsUpdate = true;\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    return this._getNeedsRedraw(opts);\n  }\n\n  needsUpdate() {\n    return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n  }\n\n  hasUniformTransition() {\n    return this.internalState.uniformTransitions.active;\n  }\n\n  get isLoaded() {\n    return this.internalState && !this.internalState.isAsyncPropLoading();\n  }\n\n  get wrapLongitude() {\n    return this.props.wrapLongitude;\n  }\n\n  isPickable() {\n    return this.props.pickable && this.props.visible;\n  }\n\n  getModels() {\n    return this.state && (this.state.models || (this.state.model ? [this.state.model] : []));\n  }\n\n  getAttributeManager() {\n    return this.internalState && this.internalState.attributeManager;\n  }\n\n  getCurrentLayer() {\n    return this.internalState && this.internalState.layer;\n  }\n\n  getLoadOptions() {\n    return this.props.loadOptions;\n  }\n\n  project(xyz) {\n    const {\n      viewport\n    } = this.context;\n    const worldPosition = getWorldPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n    const [x, y, z] = worldToPixels(worldPosition, viewport.pixelProjectionMatrix);\n    return xyz.length === 2 ? [x, y] : [x, y, z];\n  }\n\n  unproject(xy) {\n    const {\n      viewport\n    } = this.context;\n    return viewport.unproject(xy);\n  }\n\n  projectPosition(xyz) {\n    return projectPosition(xyz, {\n      viewport: this.context.viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n  }\n\n  use64bitPositions() {\n    const {\n      coordinateSystem\n    } = this.props;\n    return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  onHover(info, pickingEvent) {\n    if (this.props.onHover) {\n      return this.props.onHover(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  onClick(info, pickingEvent) {\n    if (this.props.onClick) {\n      return this.props.onClick(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  nullPickingColor() {\n    return [0, 0, 0];\n  }\n\n  encodePickingColor(i, target = []) {\n    target[0] = i + 1 & 255;\n    target[1] = i + 1 >> 8 & 255;\n    target[2] = i + 1 >> 8 >> 8 & 255;\n    return target;\n  }\n\n  decodePickingColor(color) {\n    assert(color instanceof Uint8Array);\n    const [i1, i2, i3] = color;\n    const index = i1 + i2 * 256 + i3 * 65536 - 1;\n    return index;\n  }\n\n  initializeState() {\n    throw new Error(\"Layer \".concat(this, \" has not defined initializeState\"));\n  }\n\n  getShaders(shaders) {\n    for (const extension of this.props.extensions) {\n      shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n    }\n\n    return shaders;\n  }\n\n  shouldUpdateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    return changeFlags.propsOrDataChanged;\n  }\n\n  updateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    const attributeManager = this.getAttributeManager();\n\n    if (changeFlags.dataChanged && attributeManager) {\n      const {\n        dataChanged\n      } = changeFlags;\n\n      if (Array.isArray(dataChanged)) {\n        for (const dataRange of dataChanged) {\n          attributeManager.invalidateAll(dataRange);\n        }\n      } else {\n        attributeManager.invalidateAll();\n      }\n    }\n\n    const neededPickingBuffer = oldProps.highlightedObjectIndex >= 0 || oldProps.pickable;\n    const needPickingBuffer = props.highlightedObjectIndex >= 0 || props.pickable;\n\n    if (neededPickingBuffer !== needPickingBuffer && attributeManager) {\n      const {\n        pickingColors,\n        instancePickingColors\n      } = attributeManager.attributes;\n      const pickingColorsAttribute = pickingColors || instancePickingColors;\n\n      if (pickingColorsAttribute) {\n        if (needPickingBuffer && pickingColorsAttribute.constant) {\n          pickingColorsAttribute.constant = false;\n          attributeManager.invalidate(pickingColorsAttribute.id);\n        }\n\n        if (!pickingColorsAttribute.value && !needPickingBuffer) {\n          pickingColorsAttribute.constant = true;\n          pickingColorsAttribute.value = [0, 0, 0];\n        }\n      }\n    }\n  }\n\n  finalizeState() {\n    for (const model of this.getModels()) {\n      model.delete();\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.finalize();\n    }\n\n    this.context.resourceManager.unsubscribe({\n      consumerId: this.id\n    });\n    this.internalState.uniformTransitions.clear();\n    this.internalState.finalize();\n  }\n\n  draw(opts) {\n    for (const model of this.getModels()) {\n      model.draw(opts);\n    }\n  }\n\n  getPickingInfo({\n    info,\n    mode\n  }) {\n    const {\n      index\n    } = info;\n\n    if (index >= 0) {\n      if (Array.isArray(this.props.data)) {\n        info.object = this.props.data[index];\n      }\n    }\n\n    return info;\n  }\n\n  activateViewport(viewport) {\n    const oldViewport = this.internalState.viewport;\n    this.internalState.viewport = viewport;\n\n    if (!oldViewport || !areViewportsEqual({\n      oldViewport,\n      viewport\n    })) {\n      this.setChangeFlags({\n        viewportChanged: true\n      });\n\n      if (this.isComposite) {\n        if (this.needsUpdate()) {\n          this.setNeedsUpdate();\n        }\n      } else {\n        this._update();\n      }\n    }\n  }\n\n  invalidateAttribute(name = 'all', diffReason = '') {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    if (name === 'all') {\n      attributeManager.invalidateAll();\n    } else {\n      attributeManager.invalidate(name);\n    }\n  }\n\n  updateAttributes(changedAttributes) {\n    for (const model of this.getModels()) {\n      this._setModelAttributes(model, changedAttributes);\n    }\n  }\n\n  _updateAttributes(props) {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    const numInstances = this.getNumInstances(props);\n    const startIndices = this.getStartIndices(props);\n    attributeManager.update({\n      data: props.data,\n      numInstances,\n      startIndices,\n      props,\n      transitions: props.transitions,\n      buffers: props.data.attributes,\n      context: this,\n      ignoreUnknownAttributes: true\n    });\n    const changedAttributes = attributeManager.getChangedAttributes({\n      clearChangedFlags: true\n    });\n    this.updateAttributes(changedAttributes);\n  }\n\n  _updateAttributeTransition() {\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.updateTransition();\n    }\n  }\n\n  _updateUniformTransition() {\n    const {\n      uniformTransitions\n    } = this.internalState;\n\n    if (uniformTransitions.active) {\n      const propsInTransition = uniformTransitions.update();\n      const props = Object.create(this.props);\n\n      for (const key in propsInTransition) {\n        Object.defineProperty(props, key, {\n          value: propsInTransition[key]\n        });\n      }\n\n      return props;\n    }\n\n    return this.props;\n  }\n\n  calculateInstancePickingColors(attribute, {\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const cacheSize = Math.floor(pickingColorCache.length / 3);\n    this.internalState.usesPickingColorCache = true;\n\n    if (cacheSize < numInstances) {\n      if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n        log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n      }\n\n      pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n        size: 3,\n        copy: true,\n        maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n      });\n      const newCacheSize = Math.floor(pickingColorCache.length / 3);\n      const pickingColor = [];\n\n      for (let i = cacheSize; i < newCacheSize; i++) {\n        this.encodePickingColor(i, pickingColor);\n        pickingColorCache[i * 3 + 0] = pickingColor[0];\n        pickingColorCache[i * 3 + 1] = pickingColor[1];\n        pickingColorCache[i * 3 + 2] = pickingColor[2];\n      }\n    }\n\n    attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n  }\n\n  _setModelAttributes(model, changedAttributes) {\n    const attributeManager = this.getAttributeManager();\n    const excludeAttributes = model.userData.excludeAttributes || {};\n    const shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n    model.setAttributes(shaderAttributes);\n  }\n\n  disablePickingIndex(objectIndex) {\n    this._disablePickingIndex(objectIndex);\n  }\n\n  _disablePickingIndex(objectIndex) {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n    const start = colors.getVertexOffset(objectIndex);\n    const end = colors.getVertexOffset(objectIndex + 1);\n    colors.buffer.subData({\n      data: new Uint8Array(end - start),\n      offset: start\n    });\n  }\n\n  restorePickingColors() {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (this.internalState.usesPickingColorCache && colors.value.buffer !== pickingColorCache.buffer) {\n      colors.value = pickingColorCache.subarray(0, colors.value.length);\n    }\n\n    colors.updateSubBuffer({\n      startOffset: 0\n    });\n  }\n\n  getNumInstances(props) {\n    props = props || this.props;\n\n    if (props.numInstances !== undefined) {\n      return props.numInstances;\n    }\n\n    if (this.state && this.state.numInstances !== undefined) {\n      return this.state.numInstances;\n    }\n\n    return count(props.data);\n  }\n\n  getStartIndices(props) {\n    props = props || this.props;\n\n    if (props.startIndices !== undefined) {\n      return props.startIndices;\n    }\n\n    if (this.state && this.state.startIndices) {\n      return this.state.startIndices;\n    }\n\n    return null;\n  }\n\n  _initialize() {\n    debug(TRACE_INITIALIZE, this);\n\n    this._initState();\n\n    this.initializeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.initializeState.call(this, this.context, extension);\n    }\n\n    this.setChangeFlags({\n      dataChanged: true,\n      propsChanged: true,\n      viewportChanged: true,\n      extensionsChanged: true\n    });\n\n    this._updateState();\n  }\n\n  _update() {\n    const stateNeedsUpdate = this.needsUpdate();\n    debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n    if (stateNeedsUpdate) {\n      this._updateState();\n    }\n  }\n\n  _updateState() {\n    const currentProps = this.props;\n    const currentViewport = this.context.viewport;\n\n    const propsInTransition = this._updateUniformTransition();\n\n    this.internalState.propsInTransition = propsInTransition;\n    this.context.viewport = this.internalState.viewport || currentViewport;\n    this.props = propsInTransition;\n\n    try {\n      const updateParams = this._getUpdateParams();\n\n      const oldModels = this.getModels();\n\n      if (this.context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      for (const extension of this.props.extensions) {\n        extension.updateState.call(this, updateParams, extension);\n      }\n\n      const modelChanged = this.getModels()[0] !== oldModels[0];\n\n      this._updateModules(updateParams, modelChanged);\n\n      if (this.isComposite) {\n        this._renderLayers(updateParams);\n      } else {\n        this.setNeedsRedraw();\n\n        this._updateAttributes(this.props);\n\n        if (this.state.model) {\n          this.state.model.setInstanceCount(this.getNumInstances());\n        }\n      }\n    } finally {\n      this.context.viewport = currentViewport;\n      this.props = currentProps;\n      this.clearChangeFlags();\n      this.internalState.needsUpdate = false;\n      this.internalState.resetOldProps();\n    }\n  }\n\n  _finalize() {\n    debug(TRACE_FINALIZE, this);\n    this.finalizeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.finalizeState.call(this, extension);\n    }\n  }\n\n  drawLayer({\n    moduleParameters = null,\n    uniforms = {},\n    parameters = {}\n  }) {\n    this._updateAttributeTransition();\n\n    const currentProps = this.props;\n    this.props = this.internalState.propsInTransition || currentProps;\n    const {\n      opacity\n    } = this.props;\n    uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n    try {\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      const {\n        getPolygonOffset\n      } = this.props;\n      const offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(this.context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(this.context.gl, parameters, () => {\n        const opts = {\n          moduleParameters,\n          uniforms,\n          parameters,\n          context: this.context\n        };\n\n        for (const extension of this.props.extensions) {\n          extension.draw.call(this, opts, extension);\n        }\n\n        this.draw(opts);\n      });\n    } finally {\n      this.props = currentProps;\n    }\n  }\n\n  getChangeFlags() {\n    return this.internalState.changeFlags;\n  }\n\n  setChangeFlags(flags) {\n    const {\n      changeFlags\n    } = this.internalState;\n\n    for (const key in flags) {\n      if (flags[key]) {\n        let flagChanged = false;\n\n        switch (key) {\n          case 'dataChanged':\n            if (Array.isArray(changeFlags[key])) {\n              changeFlags[key] = Array.isArray(flags[key]) ? changeFlags[key].concat(flags[key]) : flags[key];\n              flagChanged = true;\n            }\n\n          default:\n            if (!changeFlags[key]) {\n              changeFlags[key] = flags[key];\n              flagChanged = true;\n            }\n\n        }\n\n        if (flagChanged) {\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n    }\n\n    const propsOrDataChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged;\n    changeFlags.propsOrDataChanged = propsOrDataChanged;\n    changeFlags.somethingChanged = propsOrDataChanged || flags.viewportChanged || flags.stateChanged;\n  }\n\n  clearChangeFlags() {\n    this.internalState.changeFlags = {\n      dataChanged: false,\n      propsChanged: false,\n      updateTriggersChanged: false,\n      viewportChanged: false,\n      stateChanged: false,\n      extensionsChanged: false,\n      propsOrDataChanged: false,\n      somethingChanged: false\n    };\n  }\n\n  diffProps(newProps, oldProps) {\n    const changeFlags = diffProps(newProps, oldProps);\n\n    if (changeFlags.updateTriggersChanged) {\n      for (const key in changeFlags.updateTriggersChanged) {\n        if (changeFlags.updateTriggersChanged[key]) {\n          this.invalidateAttribute(key);\n        }\n      }\n    }\n\n    if (changeFlags.transitionsChanged) {\n      for (const key in changeFlags.transitionsChanged) {\n        this.internalState.uniformTransitions.add(key, oldProps[key], newProps[key], newProps.transitions[key]);\n      }\n    }\n\n    return this.setChangeFlags(changeFlags);\n  }\n\n  validateProps() {\n    validateProps(this.props);\n  }\n\n  setModuleParameters(moduleParameters) {\n    for (const model of this.getModels()) {\n      model.updateModuleSettings(moduleParameters);\n    }\n  }\n\n  updateAutoHighlight(info) {\n    if (this.props.autoHighlight) {\n      this._updateAutoHighlight(info);\n    }\n  }\n\n  _updateAutoHighlight(info) {\n    const pickingModuleParameters = {\n      pickingSelectedColor: info.picked ? info.color : null\n    };\n    const {\n      highlightColor\n    } = this.props;\n\n    if (info.picked && typeof highlightColor === 'function') {\n      pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n    }\n\n    this.setModuleParameters(pickingModuleParameters);\n    this.setNeedsRedraw();\n  }\n\n  _updateModules({\n    props,\n    oldProps\n  }, forceUpdate) {\n    const {\n      autoHighlight,\n      highlightedObjectIndex,\n      highlightColor\n    } = props;\n\n    if (forceUpdate || oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n      const parameters = {};\n\n      if (!autoHighlight) {\n        parameters.pickingSelectedColor = null;\n      }\n\n      if (Array.isArray(highlightColor)) {\n        parameters.pickingHighlightColor = highlightColor;\n      }\n\n      if (Number.isInteger(highlightedObjectIndex)) {\n        parameters.pickingSelectedColor = highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n      }\n\n      this.setModuleParameters(parameters);\n    }\n  }\n\n  _getUpdateParams() {\n    return {\n      props: this.props,\n      oldProps: this.internalState.getOldProps(),\n      context: this.context,\n      changeFlags: this.internalState.changeFlags\n    };\n  }\n\n  _getNeedsRedraw(opts) {\n    if (!this.internalState) {\n      return false;\n    }\n\n    let redraw = false;\n    redraw = redraw || this.internalState.needsRedraw && this.id;\n    this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n    const attributeManager = this.getAttributeManager();\n    const attributeManagerNeedsRedraw = attributeManager && attributeManager.getNeedsRedraw(opts);\n    redraw = redraw || attributeManagerNeedsRedraw;\n    return redraw;\n  }\n\n  _getAttributeManager() {\n    return new AttributeManager(this.context.gl, {\n      id: this.props.id,\n      stats: this.context.stats,\n      timeline: this.context.timeline\n    });\n  }\n\n  _initState() {\n    assert(!this.internalState && !this.state);\n    assert(isFinite(this.props.coordinateSystem));\n\n    const attributeManager = this._getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.addInstanced({\n        instancePickingColors: {\n          type: 5121,\n          size: 3,\n          noAlloc: true,\n          update: this.calculateInstancePickingColors\n        }\n      });\n    }\n\n    this.internalState = new LayerState({\n      attributeManager,\n      layer: this\n    });\n    this.clearChangeFlags();\n    this.state = {};\n    Object.defineProperty(this.state, 'attributeManager', {\n      get: () => {\n        log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()');\n        return attributeManager;\n      }\n    });\n    this.internalState.layer = this;\n    this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n    this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n    this.internalState.setAsyncProps(this.props);\n  }\n\n  _transferState(oldLayer) {\n    debug(TRACE_MATCHED, this, this === oldLayer);\n    const {\n      state,\n      internalState\n    } = oldLayer;\n\n    if (this === oldLayer) {\n      return;\n    }\n\n    this.internalState = internalState;\n    this.internalState.layer = this;\n    this.state = state;\n    this.internalState.setAsyncProps(this.props);\n    this.diffProps(this.props, this.internalState.getOldProps());\n  }\n\n  _onAsyncPropUpdated() {\n    this.diffProps(this.props, this.internalState.getOldProps());\n    this.setNeedsUpdate();\n  }\n\n}\nLayer.layerName = 'Layer';\nLayer.defaultProps = defaultProps;\n//# sourceMappingURL=layer.js.map","const ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map","export const LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport const PROP_SYMBOLS = {\n  COMPONENT: Symbol.for('component'),\n  ASYNC_DEFAULTS: Symbol.for('asyncPropDefaults'),\n  ASYNC_ORIGINAL: Symbol.for('asyncPropOriginal'),\n  ASYNC_RESOLVED: Symbol.for('asyncPropResolved')\n};\n//# sourceMappingURL=constants.js.map","import { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT\n} = PROP_SYMBOLS;\nexport function validateProps(props) {\n  const propTypes = getPropTypes(props);\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      validate\n    } = propType;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  const propsChangedReason = compareProps({\n    newProps: props,\n    oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  const dataChangedReason = diffDataProps(props, oldProps);\n  let updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return null;\n  }\n\n  const result = {};\n  const propTypes = getPropTypes(props);\n\n  for (const key in props.transitions) {\n    const propType = propTypes[key];\n    const type = propType && propType.type;\n    const isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n    }\n  }\n\n  return result;\n}\n\nexport function compareProps({\n  newProps,\n  oldProps,\n  ignoreProps = {},\n  propTypes = {},\n  triggerName = 'props'\n} = {}) {\n  if (oldProps === newProps) {\n    return null;\n  }\n\n  if (typeof newProps !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (typeof oldProps !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (const key of Object.keys(newProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (const key of Object.keys(oldProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, key)) {\n        const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n        if (changed) {\n          return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  let equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  let dataChanged = null;\n  const {\n    dataComparator,\n    _dataDiff\n  } = props;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  if ('all' in props.updateTriggers) {\n    const diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  const triggerChanged = {};\n  let reason = false;\n\n  for (const triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (diffReason) {\n        triggerChanged[triggerName] = true;\n        reason = triggerChanged;\n      }\n    }\n  }\n\n  return reason;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  const oldExtensions = oldProps.extensions;\n  const {\n    extensions\n  } = props;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (let i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  let newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  let oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  const diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  const layer = props[COMPONENT];\n  const LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(key => \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\")).join('');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(key => \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\")).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0;\\nconst float GLOBE_RADIUS = 256.0;\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z;\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy;\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter;\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n    dy = clamp(dy, -1., 1.);\\n  }\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  );\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy) * WORLD_SCALE,\\n        project_size(position_world.z),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","import { fp32 } from '@luma.gl/core';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (opts.viewport) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32],\n  vs: projectShader,\n  getUniforms\n};\n//# sourceMappingURL=project.js.map","const fp32shader = \"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 0.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 0.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\";\nexport const fp32 = {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nconst ZERO_VECTOR = [0, 0, 0, 0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n  let shaderCoordinateOrigin = coordinateOrigin;\n  let geospatialOrigin;\n  let offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  const {\n    viewMatrixUncentered,\n    projectionMatrix\n  } = viewport;\n  let {\n    viewMatrix,\n    viewProjectionMatrix\n  } = viewport;\n  let projectionCenter = ZERO_VECTOR;\n  let cameraPosCommon = viewport.cameraPosition;\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - positionCommonSpace[0], cameraPosCommon[1] - positionCommonSpace[1], cameraPosCommon[2] - positionCommonSpace[2]];\n    positionCommonSpace[3] = 1;\n    projectionCenter = vec4.transformMat4([], positionCommonSpace, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix,\n    viewProjectionMatrix,\n    projectionCenter,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport({\n  viewport,\n  devicePixelRatio = 1,\n  modelMatrix = null,\n  coordinateSystem = COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin,\n  autoWrapLongitude = false\n} = {}) {\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  const uniforms = getMemoizedViewportUniforms({\n    viewport,\n    devicePixelRatio,\n    coordinateSystem,\n    coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms({\n  viewport,\n  devicePixelRatio,\n  coordinateSystem,\n  coordinateOrigin\n}) {\n  const {\n    projectionCenter,\n    viewProjectionMatrix,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n  const distanceScales = viewport.getDistanceScales();\n  const viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  const focalDistance = viewport.projectionMatrix.transform([0, 0, -viewport.focalDistance, 1])[3] || 1;\n  const uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCenter: projectionCenter,\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: focalDistance,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","import project from '../project/project';\nconst vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs\n};\n//# sourceMappingURL=project32.js.map","function noop() {}\n\nconst DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\nexport default class Transition {\n  constructor(timeline) {\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  start(props) {\n    this.cancel();\n    this.settings = { ...DEFAULT_SETTINGS,\n      ...props\n    };\n    this._inProgress = true;\n    this.settings.onStart(this);\n  }\n\n  end() {\n    if (this._inProgress) {\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n      this.settings.onEnd(this);\n    }\n  }\n\n  cancel() {\n    if (this._inProgress) {\n      this.settings.onInterrupt(this);\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  update() {\n    if (!this._inProgress) {\n      return false;\n    }\n\n    if (this._handle === null) {\n      const {\n        timeline,\n        settings\n      } = this;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n    }\n\n    this.time = this.timeline.getTime(this._handle);\n\n    this._onUpdate();\n\n    this.settings.onUpdate(this);\n\n    if (this.timeline.isFinished(this._handle)) {\n      this.end();\n    }\n\n    return true;\n  }\n\n  _onUpdate() {}\n\n}\n//# sourceMappingURL=transition.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","export function flatten(array, filter = () => true) {\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  let index = -1;\n\n  while (++index < array.length) {\n    const value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","const EMPTY_ARRAY = [];\nconst placeholderArray = [];\nexport function createIterable(data, startRow = 0, endRow = Infinity) {\n  let iterable = EMPTY_ARRAY;\n  const objectInfo = {\n    index: -1,\n    data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable,\n    objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, {\n  size,\n  stride,\n  offset,\n  startIndices,\n  nested\n}) {\n  const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : size;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return (_, {\n    index,\n    target\n  }) => {\n    if (!startIndices) {\n      const sourceIndex = index * elementStride + elementOffset;\n\n      for (let j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || vertexCount;\n    let result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n        target = new Array(size);\n\n        for (let j = 0; j < size; j++) {\n          target[j] = typedArray[sourceIndex + j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      let targetIndex = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n\n        for (let j = 0; j < size; j++) {\n          result[targetIndex++] = typedArray[sourceIndex + j];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from 'math.gl';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nexport function getFrustumPlanes(viewProjectionMatrix) {\n  const planes = {};\n  planes.left = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]);\n  planes.right = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]);\n  planes.bottom = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]);\n  planes.top = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]);\n  planes.near = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]);\n  planes.far = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14]);\n  return planes;\n}\nconst scratchVector = new Vector3();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  const L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new Vector3(-a / L, -b / L, -c / L)\n  };\n}\n\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nlet scratchArray;\nexport function toDoublePrecisionArray(typedArray, {\n  size = 1,\n  startIndex = 0,\n  endIndex\n}) {\n  if (!Number.isFinite(endIndex)) {\n    endIndex = typedArray.length;\n  }\n\n  const count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  let sourceIndex = startIndex;\n  let targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (let j = 0; j < size; j++) {\n      const value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    const len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","export function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  const result = { ...target,\n    ...source\n  };\n\n  if ('defines' in source) {\n    result.defines = { ...target.defines,\n      ...source.defines\n    };\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(module => module.name === 'project64')) {\n      const index = result.modules.findIndex(module => module.name === 'project32');\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      const mergedInjection = { ...target.inject\n      };\n\n      for (const key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","export class TypedArrayManager {\n  constructor(props) {\n    this._pool = [];\n    this.props = {\n      overAlloc: 2,\n      poolSize: 100\n    };\n    this.setProps(props);\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  allocate(typedArray, count, {\n    size = 1,\n    type,\n    padding = 0,\n    copy = false,\n    initialize = false,\n    maxCount\n  }) {\n    const Type = type || typedArray && typedArray.constructor || Float32Array;\n    const newSize = count * size + padding;\n\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize);\n      }\n    }\n\n    let maxSize;\n\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n\n    return newArray;\n  }\n\n  release(typedArray) {\n    this._release(typedArray);\n  }\n\n  _allocate(Type, size, initialize, maxSize) {\n    let sizeToAllocate = Math.max(Math.ceil(size * this.props.overAlloc), 1);\n\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i >= 0) {\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n      if (initialize) {\n        array.fill(0);\n      }\n\n      return array;\n    }\n\n    return new Type(sizeToAllocate);\n  }\n\n  _release(typedArray) {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n\n    const pool = this._pool;\n    const {\n      buffer\n    } = typedArray;\n    const {\n      byteLength\n    } = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.props.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n\n    if (pool.length > this.props.poolSize) {\n      pool.shift();\n    }\n  }\n\n}\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","import log from '../utils/log';\nimport { createMat4, getCameraPosition, getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals } from 'math.gl';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = createMat4();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_ZOOM = 0;\nconst DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\nexport default class Viewport {\n  constructor(opts = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = 1,\n      height = 1\n    } = opts;\n    this.id = id || this.constructor.displayName || 'viewport';\n    this.x = x;\n    this.y = y;\n    this.width = width || 1;\n    this.height = height || 1;\n    this._frustumPlanes = {};\n\n    this._initViewMatrix(opts);\n\n    this._initProjectionMatrix(opts);\n\n    this._initPixelMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  get metersPerPixel() {\n    return this.distanceScales.metersPerUnit[2] / this.scale;\n  }\n\n  get projectionMode() {\n    if (this.isGeospatial) {\n      return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n    }\n\n    return PROJECTION_MODE.IDENTITY;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof Viewport)) {\n      return false;\n    }\n\n    if (this === viewport) {\n      return true;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && equals(viewport.projectionMatrix, this.projectionMatrix) && equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(xyz) {\n    if (this.isGeospatial) {\n      return lngLatToWorld(xyz);\n    }\n\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    if (this.isGeospatial) {\n      return worldToLngLat(xyz);\n    }\n\n    return xyz;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const topLeft = this.unproject([0, 0], unprojectOption);\n    const topRight = this.unproject([this.width, 0], unprojectOption);\n    const bottomLeft = this.unproject([0, this.height], unprojectOption);\n    const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n    return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n  }\n\n  getDistanceScales(coordinateOrigin = null) {\n    if (coordinateOrigin) {\n      return getDistanceScales({\n        longitude: coordinateOrigin[0],\n        latitude: coordinateOrigin[1],\n        highPrecision: true\n      });\n    }\n\n    return this.distanceScales;\n  }\n\n  containsPixel({\n    x,\n    y,\n    width = 1,\n    height = 1\n  }) {\n    return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n  }\n\n  getFrustumPlanes() {\n    if (this._frustumPlanes.near) {\n      return this._frustumPlanes;\n    }\n\n    Object.assign(this._frustumPlanes, getFrustumPlanes(this.viewProjectionMatrix));\n    return this._frustumPlanes;\n  }\n\n  panByPosition(coords, pixel) {\n    return null;\n  }\n\n  getCameraPosition() {\n    return this.cameraPosition;\n  }\n\n  getCameraDirection() {\n    return this.cameraDirection;\n  }\n\n  getCameraUp() {\n    return this.cameraUp;\n  }\n\n  _createProjectionMatrix({\n    orthographic,\n    fovyRadians,\n    aspect,\n    focalDistance,\n    near,\n    far\n  }) {\n    return orthographic ? new Matrix4().orthographic({\n      fovy: fovyRadians,\n      aspect,\n      focalDistance,\n      near,\n      far\n    }) : new Matrix4().perspective({\n      fovy: fovyRadians,\n      aspect,\n      near,\n      far\n    });\n  }\n\n  _initViewMatrix(opts) {\n    const {\n      viewMatrix = IDENTITY,\n      longitude = null,\n      latitude = null,\n      zoom = null,\n      position = null,\n      modelMatrix = null,\n      focalDistance = 1,\n      distanceScales = null\n    } = opts;\n    this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n    this.zoom = zoom;\n\n    if (!Number.isFinite(this.zoom)) {\n      this.zoom = this.isGeospatial ? getMeterZoom({\n        latitude\n      }) + Math.log2(focalDistance) : DEFAULT_ZOOM;\n    }\n\n    const scale = Math.pow(2, this.zoom);\n    this.scale = scale;\n    this.distanceScales = this.isGeospatial ? getDistanceScales({\n      latitude,\n      longitude\n    }) : distanceScales || DEFAULT_DISTANCE_SCALES;\n    this.focalDistance = focalDistance;\n    this.distanceScales.metersPerUnit = new Vector3(this.distanceScales.metersPerUnit);\n    this.distanceScales.unitsPerMeter = new Vector3(this.distanceScales.unitsPerMeter);\n    this.position = ZERO_VECTOR;\n    this.meterOffset = ZERO_VECTOR;\n\n    if (position) {\n      this.position = position;\n      this.modelMatrix = modelMatrix;\n      this.meterOffset = modelMatrix ? modelMatrix.transformVector(position) : position;\n    }\n\n    if (this.isGeospatial) {\n      this.longitude = longitude;\n      this.latitude = latitude;\n      this.center = this._getCenterInWorld({\n        longitude,\n        latitude\n      });\n    } else {\n      this.center = position ? this.projectPosition(position) : [0, 0, 0];\n    }\n\n    this.viewMatrixUncentered = viewMatrix;\n    this.viewMatrix = new Matrix4().multiplyRight(this.viewMatrixUncentered).translate(new Vector3(this.center || ZERO_VECTOR).negate());\n  }\n\n  _getCenterInWorld({\n    longitude,\n    latitude\n  }) {\n    const {\n      meterOffset,\n      distanceScales\n    } = this;\n    const center = new Vector3(this.projectPosition([longitude, latitude, 0]));\n\n    if (meterOffset) {\n      const commonPosition = new Vector3(meterOffset).scale(distanceScales.unitsPerMeter);\n      center.add(commonPosition);\n    }\n\n    return center;\n  }\n\n  _initProjectionMatrix(opts) {\n    const {\n      projectionMatrix = null,\n      orthographic = false,\n      fovyRadians,\n      fovy = 75,\n      near = 0.1,\n      far = 1000,\n      focalDistance = 1\n    } = opts;\n    this.projectionMatrix = projectionMatrix || this._createProjectionMatrix({\n      orthographic,\n      fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n      aspect: this.width / this.height,\n      focalDistance,\n      near,\n      far\n    });\n  }\n\n  _initPixelMatrices() {\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n    this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n    const viewportMatrix = createMat4();\n    const pixelProjectionMatrix = createMat4();\n    mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n    mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n    this.pixelProjectionMatrix = pixelProjectionMatrix;\n    this.viewportMatrix = viewportMatrix;\n    this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n    if (!this.pixelUnprojectionMatrix) {\n      log.warn('Pixel project matrix not invertible')();\n    }\n  }\n\n}\nViewport.displayName = 'Viewport';\n//# sourceMappingURL=viewport.js.map","import Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat, getProjectionParameters, fitBounds, getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from 'math.gl';\nexport default class WebMercatorViewport extends Viewport {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 11,\n      pitch = 0,\n      bearing = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 1.01,\n      orthographic = false,\n      repeat = false,\n      worldOffset = 0\n    } = opts;\n    let {\n      width,\n      height,\n      altitude = 1.5\n    } = opts;\n    const scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    altitude = Math.max(0.75, altitude);\n    const {\n      fov,\n      aspect,\n      focalDistance,\n      near,\n      far\n    } = getProjectionParameters({\n      width,\n      height,\n      pitch,\n      altitude,\n      nearZMultiplier,\n      farZMultiplier\n    });\n    let viewMatrixUncentered = getViewMatrix({\n      height,\n      pitch,\n      bearing,\n      scale,\n      altitude\n    });\n\n    if (worldOffset) {\n      const viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    super({ ...opts,\n      width,\n      height,\n      viewMatrix: viewMatrixUncentered,\n      longitude,\n      latitude,\n      zoom,\n      orthographic,\n      fovyRadians: fov,\n      aspect,\n      focalDistance,\n      near,\n      far\n    });\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.orthographic = orthographic;\n    this._subViewports = repeat ? [] : null;\n    Object.freeze(this);\n  }\n\n  get subViewports() {\n    if (this._subViewports && !this._subViewports.length) {\n      const bounds = this.getBounds();\n      const minOffset = Math.floor((bounds[0] + 180) / 360);\n      const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n      for (let x = minOffset; x <= maxOffset; x++) {\n        const offsetViewport = x ? new WebMercatorViewport({ ...this,\n          worldOffset: x\n        }) : this;\n\n        this._subViewports.push(offsetViewport);\n      }\n    }\n\n    return this._subViewports;\n  }\n\n  addMetersToLngLat(lngLatZ, xyz) {\n    return addMetersToLngLat(lngLatZ, xyz);\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    const [longitude, latitude] = this.unprojectFlat(newCenter);\n    return {\n      longitude,\n      latitude\n    };\n  }\n\n  getBounds(options = {}) {\n    const corners = getBounds(this, options.z || 0);\n    return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds,\n      ...options\n    });\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n}\nWebMercatorViewport.displayName = 'WebMercatorViewport';\n//# sourceMappingURL=web-mercator-viewport.js.map","let channelHandles = 1;\nlet animationHandles = 1;\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {\n      delay = 0,\n      duration = Number.POSITIVE_INFINITY,\n      rate = 1,\n      repeat = 1\n    } = props;\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n\n    this._setChannelTime(channel, this.time);\n\n    this.channels.set(handle, channel);\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n    const channels = this.channels.values();\n\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n\n    for (const animationData of animations) {\n      const {\n        animation,\n        channel\n      } = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n    animation.setTime(this.getTime(channelHandle));\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n\n}\n//# sourceMappingURL=timeline.js.map","import { load } from '@loaders.gl/core';\nexport default class Resource {\n  constructor(id, data, context) {\n    this.id = id;\n    this.context = context;\n    this._loadCount = 0;\n    this._subscribers = new Set();\n    this.setData(data);\n  }\n\n  subscribe(consumer) {\n    this._subscribers.add(consumer);\n  }\n\n  unsubscribe(consumer) {\n    this._subscribers.delete(consumer);\n  }\n\n  inUse() {\n    return this._subscribers.size > 0;\n  }\n\n  delete() {}\n\n  getData() {\n    return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(() => this.getData());\n  }\n\n  setData(data, forceUpdate) {\n    if (data === this._data && !forceUpdate) {\n      return;\n    }\n\n    this._data = data;\n    const loadCount = ++this._loadCount;\n    let loader = data;\n\n    if (typeof data === 'string') {\n      loader = load(data);\n    }\n\n    if (loader instanceof Promise) {\n      this.isLoaded = false;\n      this._loader = loader.then(result => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = null;\n          this._content = result;\n        }\n      }).catch(error => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = error || true;\n        }\n      });\n    } else {\n      this.isLoaded = true;\n      this._error = null;\n      this._content = data;\n    }\n\n    for (const subscriber of this._subscribers) {\n      subscriber.onChange(this.getData());\n    }\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import Resource from './resource';\nexport default class ResourceManager {\n  constructor({\n    gl,\n    protocol\n  }) {\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId) {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n\n    res.persistent = persistent;\n  }\n\n  remove(resourceId) {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({\n    consumerId\n  }) {\n    const consumer = this._consumers[consumerId];\n\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n\n        if (request.resource) {\n          request.resource.unsubscribe(request);\n        }\n      }\n\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = 'default'\n  }) {\n    const {\n      _resources: resources,\n      protocol\n    } = this;\n\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, '');\n\n      if (!resources[resourceId]) {\n        this.add({\n          resourceId,\n          data: null,\n          persistent: false\n        });\n      }\n    }\n\n    const res = resources[resourceId];\n\n    this._track(consumerId, requestId, res, onChange);\n\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune() {\n    if (!this._pruneRequest) {\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize() {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  _track(consumerId, requestId, resource, onChange) {\n    const consumers = this._consumers;\n    const consumer = consumers[consumerId] = consumers[consumerId] || {};\n    const request = consumer[requestId] || {};\n\n    if (request.resource) {\n      request.resource.unsubscribe(request);\n      request.resource = null;\n      this.prune();\n    }\n\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resource = resource;\n      resource.subscribe(request);\n    }\n  }\n\n  _prune() {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=resource-manager.js.map","import { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport geometry from './misc/geometry';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nconst DEFAULT_MODULES = [geometry, project];\nconst SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  const programManager = ProgramManager.getDefaultProgramManager(gl);\n\n  for (const shaderModule of DEFAULT_MODULES) {\n    programManager.addDefaultModule(shaderModule);\n  }\n\n  for (const shaderHook of SHADER_HOOKS) {\n    programManager.addShaderHook(shaderHook);\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","const vs = \"\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry;\\n\";\nconst fs = \"\\n#define SMOOTH_EDGE_RADIUS 0.5\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\";\nexport default {\n  name: 'geometry',\n  vs,\n  fs\n};\n//# sourceMappingURL=geometry.js.map","import { Timeline } from '@luma.gl/core';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from 'probe.gl';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nconst TRACE_SET_LAYERS = 'layerManager.setLayers';\nconst TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nconst INITIAL_CONTEXT = Object.seal({\n  layerManager: null,\n  resourceManager: null,\n  deck: null,\n  gl: null,\n  stats: null,\n  shaderCache: null,\n  pickingFBO: null,\n  mousePosition: null,\n  userData: {}\n});\nexport default class LayerManager {\n  constructor(gl, {\n    deck,\n    stats,\n    viewport,\n    timeline\n  } = {}) {\n    this.lastRenderedLayers = [];\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl,\n      protocol: 'deck://'\n    });\n    this.context = { ...INITIAL_CONTEXT,\n      layerManager: this,\n      gl,\n      deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager\n    };\n    this._nextLayers = null;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = false;\n    this._debug = false;\n    this.activateViewport = this.activateViewport.bind(this);\n    Object.seal(this);\n  }\n\n  finalize() {\n    this.resourceManager.finalize();\n\n    for (const layer of this.layers) {\n      this._finalizeLayer(layer);\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    for (const layer of this.layers) {\n      const layerNeedsRedraw = layer.getNeedsRedraw(opts);\n      redraw = redraw || layerNeedsRedraw;\n    }\n\n    return redraw;\n  }\n\n  needsUpdate() {\n    if (this._nextLayers && this._nextLayers !== this.lastRenderedLayers) {\n      return 'layers changed';\n    }\n\n    return this._needsUpdate;\n  }\n\n  setNeedsRedraw(reason) {\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n  }\n\n  getLayers({\n    layerIds = null\n  } = {}) {\n    return layerIds ? this.layers.filter(layer => layerIds.find(layerId => layer.id.indexOf(layerId) === 0)) : this.layers;\n  }\n\n  setProps(props) {\n    if ('debug' in props) {\n      this._debug = props.debug;\n    }\n\n    if ('userData' in props) {\n      this.context.userData = props.userData;\n    }\n\n    if ('layers' in props) {\n      this._nextLayers = props.layers;\n    }\n\n    if ('onError' in props) {\n      this.context.onError = props.onError;\n    }\n  }\n\n  setLayers(newLayers, reason) {\n    debug(TRACE_SET_LAYERS, this, reason, newLayers);\n    this.lastRenderedLayers = newLayers;\n    newLayers = flatten(newLayers, Boolean);\n\n    for (const layer of newLayers) {\n      layer.context = this.context;\n    }\n\n    this._updateLayers(this.layers, newLayers);\n\n    return this;\n  }\n\n  updateLayers() {\n    const reason = this.needsUpdate();\n\n    if (reason) {\n      this.setNeedsRedraw(\"updating layers: \".concat(reason));\n      this.setLayers(this._nextLayers || this.lastRenderedLayers, reason);\n    }\n\n    this._nextLayers = null;\n  }\n\n  activateViewport(viewport) {\n    debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n    if (viewport) {\n      this.context.viewport = viewport;\n    }\n\n    return this;\n  }\n\n  _handleError(stage, error, layer) {\n    layer.raiseError(error, \"\".concat(stage, \" of \").concat(layer));\n  }\n\n  _updateLayers(oldLayers, newLayers) {\n    const oldLayerMap = {};\n\n    for (const oldLayer of oldLayers) {\n      if (oldLayerMap[oldLayer.id]) {\n        log.warn(\"Multiple old layers with same id \".concat(oldLayer.id))();\n      } else {\n        oldLayerMap[oldLayer.id] = oldLayer;\n      }\n    }\n\n    const generatedLayers = [];\n\n    this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n    this._finalizeOldLayers(oldLayerMap);\n\n    let needsUpdate = false;\n\n    for (const layer of generatedLayers) {\n      if (layer.hasUniformTransition()) {\n        needsUpdate = true;\n        break;\n      }\n    }\n\n    this._needsUpdate = needsUpdate;\n    this.layers = generatedLayers;\n  }\n\n  _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n    for (const newLayer of newLayers) {\n      newLayer.context = this.context;\n      const oldLayer = oldLayerMap[newLayer.id];\n\n      if (oldLayer === null) {\n        log.warn(\"Multiple new layers with same id \".concat(newLayer.id))();\n      }\n\n      oldLayerMap[newLayer.id] = null;\n      let sublayers = null;\n\n      try {\n        if (this._debug && oldLayer !== newLayer) {\n          newLayer.validateProps();\n        }\n\n        if (!oldLayer) {\n          this._initializeLayer(newLayer);\n        } else {\n          this._transferLayerState(oldLayer, newLayer);\n\n          this._updateLayer(newLayer);\n        }\n\n        generatedLayers.push(newLayer);\n        sublayers = newLayer.isComposite && newLayer.getSubLayers();\n      } catch (err) {\n        this._handleError('matching', err, newLayer);\n      }\n\n      if (sublayers) {\n        this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n      }\n    }\n  }\n\n  _finalizeOldLayers(oldLayerMap) {\n    for (const layerId in oldLayerMap) {\n      const layer = oldLayerMap[layerId];\n\n      if (layer) {\n        this._finalizeLayer(layer);\n      }\n    }\n  }\n\n  _initializeLayer(layer) {\n    try {\n      layer._initialize();\n\n      layer.lifecycle = LIFECYCLE.INITIALIZED;\n    } catch (err) {\n      this._handleError('initialization', err, layer);\n    }\n  }\n\n  _transferLayerState(oldLayer, newLayer) {\n    newLayer._transferState(oldLayer);\n\n    newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n    if (newLayer !== oldLayer) {\n      oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n    }\n  }\n\n  _updateLayer(layer) {\n    try {\n      layer._update();\n    } catch (err) {\n      this._handleError('update', err, layer);\n    }\n  }\n\n  _finalizeLayer(layer) {\n    this._needsRedraw = this._needsRedraw || \"finalized \".concat(layer);\n    layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n    try {\n      layer._finalize();\n\n      layer.lifecycle = LIFECYCLE.FINALIZED;\n    } catch (err) {\n      this._handleError('finalization', err, layer);\n    }\n  }\n\n}\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (const key in a) {\n    const aValue = a[key];\n    const bValue = b[key];\n    const equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\nexport default class ViewManager {\n  constructor(props = {}) {\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  finalize() {\n    for (const key in this.controllers) {\n      if (this.controllers[key]) {\n        this.controllers[key].finalize();\n      }\n    }\n\n    this.controllers = {};\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  updateViewStates() {\n    for (const viewId in this.controllers) {\n      const controller = this.controllers[viewId];\n\n      if (controller) {\n        controller.updateTransition();\n      }\n    }\n  }\n\n  getViewports(rect) {\n    if (rect) {\n      return this._viewports.filter(viewport => viewport.containsPixel(rect));\n    }\n\n    return this._viewports;\n  }\n\n  getViews() {\n    const viewMap = {};\n    this.views.forEach(view => {\n      viewMap[view.id] = view;\n    });\n    return viewMap;\n  }\n\n  getView(viewOrViewId) {\n    return typeof viewOrViewId === 'string' ? this.views.find(view => view.id === viewOrViewId) : viewOrViewId;\n  }\n\n  getViewState(viewId) {\n    const view = this.getView(viewId);\n    const viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n    return view ? view.filterViewState(viewState) : viewState;\n  }\n\n  getViewport(viewId) {\n    return this._viewportMap[viewId];\n  }\n\n  unproject(xyz, opts) {\n    const viewports = this.getViewports();\n    const pixel = {\n      x: xyz[0],\n      y: xyz[1]\n    };\n\n    for (let i = viewports.length - 1; i >= 0; --i) {\n      const viewport = viewports[i];\n\n      if (viewport.containsPixel(pixel)) {\n        const p = xyz.slice();\n        p[0] -= viewport.x;\n        p[1] -= viewport.y;\n        return viewport.unproject(p, opts);\n      }\n    }\n\n    return null;\n  }\n\n  setProps(props) {\n    if ('views' in props) {\n      this._setViews(props.views);\n    }\n\n    if ('viewState' in props) {\n      this._setViewState(props.viewState);\n    }\n\n    if ('width' in props || 'height' in props) {\n      this._setSize(props.width, props.height);\n    }\n\n    if (!this._isUpdating) {\n      this._update();\n    }\n  }\n\n  _update() {\n    this._isUpdating = true;\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    this._isUpdating = false;\n  }\n\n  _setSize(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this.width = width;\n      this.height = height;\n      this.setNeedsUpdate('Size changed');\n    }\n  }\n\n  _setViews(views) {\n    views = flatten(views, Boolean);\n\n    const viewsChanged = this._diffViews(views, this.views);\n\n    if (viewsChanged) {\n      this.setNeedsUpdate('views changed');\n    }\n\n    this.views = views;\n  }\n\n  _setViewState(viewState) {\n    if (viewState) {\n      const viewStateChanged = !deepEqual(viewState, this.viewState);\n\n      if (viewStateChanged) {\n        this.setNeedsUpdate('viewState changed');\n      }\n\n      this.viewState = viewState;\n    } else {\n      log.warn('missing `viewState` or `initialViewState`')();\n    }\n  }\n\n  _onViewStateChange(viewId, event) {\n    event.viewId = viewId;\n\n    if (this._eventCallbacks.onViewStateChange) {\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }\n\n  _createController(view, props) {\n    const Controller = props.type;\n    const controller = new Controller({\n      timeline: this.timeline,\n      eventManager: this._eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this, props.id),\n      onStateChange: this._eventCallbacks.onInteractionStateChange,\n      makeViewport: viewState => view._getViewport(viewState, {\n        width: viewState.width,\n        height: viewState.height\n      }),\n      ...props\n    });\n    return controller;\n  }\n\n  _updateController(view, viewState, viewport, controller) {\n    let controllerProps = view.controller;\n\n    if (controllerProps) {\n      controllerProps = { ...viewState,\n        ...view.props,\n        ...controllerProps,\n        id: view.id,\n        x: viewport.x,\n        y: viewport.y,\n        width: viewport.width,\n        height: viewport.height\n      };\n\n      if (controller) {\n        controller.setProps(controllerProps);\n      } else {\n        controller = this._createController(view, controllerProps);\n      }\n\n      return controller;\n    }\n\n    return null;\n  }\n\n  _rebuildViewports() {\n    const {\n      width,\n      height,\n      views\n    } = this;\n    const oldControllers = this.controllers;\n    this._viewports = [];\n    this.controllers = {};\n    let invalidateControllers = false;\n\n    for (let i = views.length; i--;) {\n      const view = views[i];\n      const viewState = this.getViewState(view);\n      const viewport = view.makeViewport({\n        width,\n        height,\n        viewState\n      });\n      let oldController = oldControllers[view.id];\n\n      if (view.controller && !oldController) {\n        invalidateControllers = true;\n      }\n\n      if ((invalidateControllers || !view.controller) && oldController) {\n        oldController.finalize();\n        oldController = null;\n      }\n\n      this.controllers[view.id] = this._updateController(view, viewState, viewport, oldController);\n\n      this._viewports.unshift(viewport);\n    }\n\n    for (const id in oldControllers) {\n      if (oldControllers[id] && !this.controllers[id]) {\n        oldControllers[id].finalize();\n      }\n    }\n\n    this._buildViewportMap();\n  }\n\n  _buildViewportMap() {\n    this._viewportMap = {};\n\n    this._viewports.forEach(viewport => {\n      if (viewport.id) {\n        this._viewportMap[viewport.id] = this._viewportMap[viewport.id] || viewport;\n      }\n    });\n  }\n\n  _diffViews(newViews, oldViews) {\n    if (newViews.length !== oldViews.length) {\n      return true;\n    }\n\n    return newViews.some((_, i) => !newViews[i].equals(oldViews[i]));\n  }\n\n}\n//# sourceMappingURL=view-manager.js.map","const PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (typeof value) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      const match = value.match(PERCENT_OR_PIXELS_REGEX);\n\n      if (match && match.length >= 3) {\n        const relative = match[2] === '%';\n        const position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","import Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\nexport default class View {\n  constructor(props = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = '100%',\n      height = '100%',\n      projectionMatrix = null,\n      fovy = 50,\n      near = 0.1,\n      far = 1000,\n      modelMatrix = null,\n      viewportInstance = null,\n      type = Viewport\n    } = props;\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.type = type;\n    this.props = { ...props,\n      id: this.id,\n      projectionMatrix,\n      fovy,\n      near,\n      far,\n      modelMatrix\n    };\n\n    this._parseDimensions({\n      x,\n      y,\n      width,\n      height\n    });\n\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  equals(view) {\n    if (this === view) {\n      return true;\n    }\n\n    if (this.viewportInstance) {\n      return view.viewportInstance && this.viewportInstance.equals(view.viewportInstance);\n    }\n\n    const viewChanged = deepEqual(this.props, view.props);\n    return viewChanged;\n  }\n\n  makeViewport({\n    width,\n    height,\n    viewState\n  }) {\n    if (this.viewportInstance) {\n      return this.viewportInstance;\n    }\n\n    viewState = this.filterViewState(viewState);\n    const viewportDimensions = this.getDimensions({\n      width,\n      height\n    });\n    return this._getViewport(viewState, viewportDimensions);\n  }\n\n  getViewStateId() {\n    switch (typeof this.props.viewState) {\n      case 'string':\n        return this.props.viewState;\n\n      case 'object':\n        return this.props.viewState && this.props.viewState.id;\n\n      default:\n        return this.id;\n    }\n  }\n\n  filterViewState(viewState) {\n    if (this.props.viewState && typeof this.props.viewState === 'object') {\n      if (!this.props.viewState.id) {\n        return this.props.viewState;\n      }\n\n      const newViewState = { ...viewState\n      };\n\n      for (const key in this.props.viewState) {\n        if (key !== 'id') {\n          newViewState[key] = this.props.viewState[key];\n        }\n      }\n\n      return newViewState;\n    }\n\n    return viewState;\n  }\n\n  getDimensions({\n    width,\n    height\n  }) {\n    return {\n      x: getPosition(this._x, width),\n      y: getPosition(this._y, height),\n      width: getPosition(this._width, width),\n      height: getPosition(this._height, height)\n    };\n  }\n\n  _getControllerProps(defaultOpts) {\n    let opts = this.props.controller;\n\n    if (!opts) {\n      return null;\n    }\n\n    if (opts === true) {\n      return defaultOpts;\n    }\n\n    if (typeof opts === 'function') {\n      opts = {\n        type: opts\n      };\n    }\n\n    return { ...defaultOpts,\n      ...opts\n    };\n  }\n\n  _getViewport(viewState, viewportDimensions) {\n    const {\n      type: ViewportType\n    } = this;\n    return new ViewportType({ ...viewState,\n      ...this.props,\n      ...viewportDimensions\n    });\n  }\n\n  _parseDimensions({\n    x,\n    y,\n    width,\n    height\n  }) {\n    this._x = parsePosition(x);\n    this._y = parsePosition(y);\n    this._width = parsePosition(width);\n    this._height = parsePosition(height);\n  }\n\n}\n//# sourceMappingURL=view.js.map","import Transition from '../transitions/transition';\n\nconst noop = () => {};\n\nexport const TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nconst DEFAULT_PROPS = {\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\nexport default class TransitionManager {\n  constructor(ControllerState, props = {}) {\n    this.ControllerState = ControllerState;\n    this.props = { ...DEFAULT_PROPS,\n      ...props\n    };\n    this.propsInTransition = null;\n    this.transition = new Transition(props.timeline);\n    this.onViewStateChange = props.onViewStateChange || noop;\n    this.onStateChange = props.onStateChange || noop;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  finalize() {\n    this.transition.cancel();\n  }\n\n  getViewportInTransition() {\n    return this.propsInTransition;\n  }\n\n  processViewStateChange(nextProps) {\n    let transitionTriggered = false;\n    const currentProps = this.props;\n    nextProps = { ...DEFAULT_PROPS,\n      ...nextProps\n    };\n    this.props = nextProps;\n\n    if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n      return transitionTriggered;\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      const {\n        interruption,\n        endProps\n      } = this.transition.settings;\n      const startProps = { ...currentProps,\n        ...(interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps)\n      };\n\n      this._triggerTransition(startProps, nextProps);\n\n      transitionTriggered = true;\n    } else {\n      this.transition.cancel();\n    }\n\n    return transitionTriggered;\n  }\n\n  updateTransition() {\n    this.transition.update();\n  }\n\n  _isTransitionEnabled(props) {\n    const {\n      transitionDuration,\n      transitionInterpolator\n    } = props;\n    return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n  }\n\n  _isUpdateDueToCurrentTransition(props) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n    }\n\n    return false;\n  }\n\n  _shouldIgnoreViewportChange(currentProps, nextProps) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n    } else if (this._isTransitionEnabled(nextProps)) {\n      return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n    }\n\n    return true;\n  }\n\n  _triggerTransition(startProps, endProps) {\n    const startViewstate = new this.ControllerState(startProps);\n    const endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n    const {\n      transitionInterpolator\n    } = endProps;\n    const duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n    if (duration === 0) {\n      return;\n    }\n\n    const initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n    this.propsInTransition = {};\n    this.duration = duration;\n    this.transition.start({\n      duration,\n      easing: endProps.transitionEasing,\n      interpolator: endProps.transitionInterpolator,\n      interruption: endProps.transitionInterruption,\n      startProps: initialProps.start,\n      endProps: initialProps.end,\n      onStart: endProps.onTransitionStart,\n      onUpdate: this._onTransitionUpdate,\n      onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n      onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n    });\n    this.onStateChange({\n      inTransition: true\n    });\n    this.updateTransition();\n  }\n\n  _onTransitionEnd(callback) {\n    return transition => {\n      this.propsInTransition = null;\n      this.onStateChange({\n        inTransition: false,\n        isZooming: false,\n        isPanning: false,\n        isRotating: false\n      });\n      callback(transition);\n    };\n  }\n\n  _onTransitionUpdate(transition) {\n    const {\n      time,\n      settings: {\n        interpolator,\n        startProps,\n        endProps,\n        duration,\n        easing\n      }\n    } = transition;\n    const t = easing(time / duration);\n    const viewport = interpolator.interpolateProps(startProps, endProps, t);\n    this.propsInTransition = new this.ControllerState({ ...this.props,\n      ...viewport\n    }).getViewportProps();\n    this.onViewStateChange({\n      viewState: this.propsInTransition,\n      oldViewState: this.props\n    });\n  }\n\n}\n//# sourceMappingURL=transition-manager.js.map","import TransitionInterpolator from './transition-interpolator';\nimport { lerp } from 'math.gl';\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nexport default class LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    super(transitionProps || {\n      compare: DEFAULT_PROPS,\n      extract: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    });\n    this.opts = opts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, lerp(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  }\n\n}\n//# sourceMappingURL=linear-interpolator.js.map","import { equals } from 'math.gl';\nimport assert from '../utils/assert';\nexport default class TransitionInterpolator {\n  constructor(opts = {}) {\n    if (Array.isArray(opts)) {\n      opts = {\n        compare: opts,\n        extract: opts,\n        required: opts\n      };\n    }\n\n    const {\n      compare,\n      extract,\n      required\n    } = opts;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract;\n    this._requiredProps = required;\n  }\n\n  arePropsEqual(currentProps, nextProps) {\n    for (const key of this._propsToCompare || Object.keys(nextProps)) {\n      if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  initializeProps(startProps, endProps) {\n    let result;\n\n    if (this._propsToExtract) {\n      const startViewStateProps = {};\n      const endViewStateProps = {};\n\n      for (const key of this._propsToExtract) {\n        startViewStateProps[key] = startProps[key];\n        endViewStateProps[key] = endProps[key];\n      }\n\n      result = {\n        start: startViewStateProps,\n        end: endViewStateProps\n      };\n    } else {\n      result = {\n        start: startProps,\n        end: endProps\n      };\n    }\n\n    this._checkRequiredProps(result.start);\n\n    this._checkRequiredProps(result.end);\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    return endProps;\n  }\n\n  getDuration(startProps, endProps) {\n    return endProps.transitionDuration;\n  }\n\n  _checkRequiredProps(props) {\n    if (!this._requiredProps) {\n      return;\n    }\n\n    this._requiredProps.forEach(propName => {\n      const value = props[propName];\n      assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n    });\n  }\n\n}\n//# sourceMappingURL=transition-interpolator.js.map","import TransitionManager, { TRANSITION_EVENTS } from './transition-manager';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nconst LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nconst DEFAULT_INERTIA = 300;\n\nconst INERTIA_EASING = t => 1 - (1 - t) * (1 - t);\n\nconst EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  TRIPLE_PAN: ['tripanstart', 'tripanmove', 'tripanend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\nexport default class Controller {\n  constructor(ControllerState, options = {}) {\n    this.ControllerState = ControllerState;\n    this.controllerState = null;\n    this.controllerStateProps = null;\n    this.eventManager = null;\n    this.transitionManager = new TransitionManager(ControllerState, { ...options,\n      onViewStateChange: this._onTransition.bind(this),\n      onStateChange: this._setInteractionState.bind(this)\n    });\n    const linearTransitionProps = this.linearTransitionProps;\n    this._transition = linearTransitionProps && { ...LINEAR_TRANSITION_PROPS,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: linearTransitionProps\n      })\n    };\n    this._events = null;\n    this._interactionState = {\n      isDragging: false\n    };\n    this._customEvents = [];\n    this.onViewStateChange = null;\n    this.onStateChange = null;\n    this.handleEvent = this.handleEvent.bind(this);\n    this.setProps(options);\n  }\n\n  get linearTransitionProps() {\n    return null;\n  }\n\n  set events(customEvents) {\n    this.toggleEvents(this._customEvents, false);\n    this.toggleEvents(customEvents, true);\n    this._customEvents = customEvents;\n    this.setProps(this.controllerStateProps);\n  }\n\n  finalize() {\n    for (const eventName in this._events) {\n      if (this._events[eventName]) {\n        this.eventManager.off(eventName, this.handleEvent);\n      }\n    }\n\n    this.transitionManager.finalize();\n  }\n\n  handleEvent(event) {\n    const {\n      ControllerState\n    } = this;\n    this.controllerState = new ControllerState({\n      makeViewport: this.makeViewport,\n      ...this.controllerStateProps,\n      ...this._state\n    });\n    const eventStartBlocked = this._eventStartBlocked;\n\n    switch (event.type) {\n      case 'panstart':\n        return eventStartBlocked ? false : this._onPanStart(event);\n\n      case 'panmove':\n        return this._onPan(event);\n\n      case 'panend':\n        return this._onPanEnd(event);\n\n      case 'pinchstart':\n        return eventStartBlocked ? false : this._onPinchStart(event);\n\n      case 'pinchmove':\n        return this._onPinch(event);\n\n      case 'pinchend':\n        return this._onPinchEnd(event);\n\n      case 'tripanstart':\n        return eventStartBlocked ? false : this._onTriplePanStart(event);\n\n      case 'tripanmove':\n        return this._onTriplePan(event);\n\n      case 'tripanend':\n        return this._onTriplePanEnd(event);\n\n      case 'doubletap':\n        return this._onDoubleTap(event);\n\n      case 'wheel':\n        return this._onWheel(event);\n\n      case 'keydown':\n        return this._onKeyDown(event);\n\n      default:\n        return false;\n    }\n  }\n\n  getCenter(event) {\n    const {\n      x,\n      y\n    } = this.controllerStateProps;\n    const {\n      offsetCenter\n    } = event;\n    return [offsetCenter.x - x, offsetCenter.y - y];\n  }\n\n  isPointInBounds(pos, event) {\n    const {\n      width,\n      height\n    } = this.controllerStateProps;\n\n    if (event && event.handled) {\n      return false;\n    }\n\n    const inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n    if (inside && event) {\n      event.stopPropagation();\n    }\n\n    return inside;\n  }\n\n  isFunctionKeyPressed(event) {\n    const {\n      srcEvent\n    } = event;\n    return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n  }\n\n  isDragging() {\n    return this._interactionState.isDragging;\n  }\n\n  blockEvents(timeout) {\n    const timer = setTimeout(() => {\n      if (this._eventStartBlocked === timer) {\n        this._eventStartBlocked = null;\n      }\n    }, timeout);\n    this._eventStartBlocked = timer;\n  }\n\n  setProps(props) {\n    if ('onViewStateChange' in props) {\n      this.onViewStateChange = props.onViewStateChange;\n    }\n\n    if ('onStateChange' in props) {\n      this.onStateChange = props.onStateChange;\n    }\n\n    if ('makeViewport' in props) {\n      this.makeViewport = props.makeViewport;\n    }\n\n    if ('dragMode' in props) {\n      this.dragMode = props.dragMode;\n    }\n\n    this.controllerStateProps = props;\n\n    if ('eventManager' in props && this.eventManager !== props.eventManager) {\n      this.eventManager = props.eventManager;\n      this._events = {};\n      this.toggleEvents(this._customEvents, true);\n    }\n\n    if (!('transitionInterpolator' in props)) {\n      props.transitionInterpolator = this._getTransitionProps().transitionInterpolator;\n    }\n\n    this.transitionManager.processViewStateChange(props);\n    let {\n      inertia\n    } = props;\n\n    if (inertia === true) {\n      inertia = DEFAULT_INERTIA;\n    }\n\n    this.inertia = inertia;\n    const {\n      scrollZoom = true,\n      dragPan = true,\n      dragRotate = true,\n      doubleClickZoom = true,\n      touchZoom = true,\n      touchRotate = false,\n      keyboard = true\n    } = props;\n    const isInteractive = Boolean(this.onViewStateChange);\n    this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n    this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n    this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n    this.toggleEvents(EVENT_TYPES.TRIPLE_PAN, isInteractive && touchRotate);\n    this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n    this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n    this.scrollZoom = scrollZoom;\n    this.dragPan = dragPan;\n    this.dragRotate = dragRotate;\n    this.doubleClickZoom = doubleClickZoom;\n    this.touchZoom = touchZoom;\n    this.touchRotate = touchRotate;\n    this.keyboard = keyboard;\n  }\n\n  updateTransition() {\n    this.transitionManager.updateTransition();\n  }\n\n  toggleEvents(eventNames, enabled) {\n    if (this.eventManager) {\n      eventNames.forEach(eventName => {\n        if (this._events[eventName] !== enabled) {\n          this._events[eventName] = enabled;\n\n          if (enabled) {\n            this.eventManager.on(eventName, this.handleEvent);\n          } else {\n            this.eventManager.off(eventName, this.handleEvent);\n          }\n        }\n      });\n    }\n  }\n\n  updateViewport(newControllerState, extraProps = {}, interactionState = {}) {\n    const viewState = { ...newControllerState.getViewportProps(),\n      ...extraProps\n    };\n    const changed = this.controllerState !== newControllerState;\n    this._state = newControllerState.getState();\n\n    this._setInteractionState(interactionState);\n\n    if (changed) {\n      const oldViewState = this.controllerState ? this.controllerState.getViewportProps() : null;\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState,\n          interactionState: this._interactionState,\n          oldViewState\n        });\n      }\n    }\n  }\n\n  _onTransition(params) {\n    if (this.onViewStateChange) {\n      params.interactionState = this._interactionState;\n      this.onViewStateChange(params);\n    }\n  }\n\n  _setInteractionState(newStates) {\n    Object.assign(this._interactionState, newStates);\n\n    if (this.onStateChange) {\n      this.onStateChange(this._interactionState);\n    }\n  }\n\n  _onPanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    let alternateMode = this.isFunctionKeyPressed(event) || event.rightButton;\n\n    if (this.invertPan || this.dragMode === 'pan') {\n      alternateMode = !alternateMode;\n    }\n\n    const newControllerState = this.controllerState[alternateMode ? 'panStart' : 'rotateStart']({\n      pos\n    });\n    this._panMove = alternateMode;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPan(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMove(event) : this._onPanRotate(event);\n  }\n\n  _onPanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMoveEnd(event) : this._onPanRotateEnd(event);\n  }\n\n  _onPanMove(event) {\n    if (!this.dragPan) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.pan({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onPanMoveEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragPan && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.pan({\n        pos: endPos\n      }).panEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: true\n      });\n    } else {\n      const newControllerState = this.controllerState.panEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPanRotate(event) {\n    if (!this.dragRotate) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onPanRotateEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragRotate && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      }).rotateEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onWheel(event) {\n    if (!this.scrollZoom) {\n      return false;\n    }\n\n    event.preventDefault();\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const {\n      speed = 0.01,\n      smooth = false\n    } = this.scrollZoom;\n    const {\n      delta\n    } = event;\n    let scale = 2 / (1 + Math.exp(-Math.abs(delta * speed)));\n\n    if (delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale\n    });\n    this.updateViewport(newControllerState, { ...this._getTransitionProps({\n        around: pos\n      }),\n      transitionDuration: smooth ? 250 : 1\n    }, {\n      isZooming: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onTriplePanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.rotateStart({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onTriplePan(event) {\n    if (!this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    pos[0] -= event.deltaX;\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onTriplePanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n\n    if (this.touchRotate && inertia && event.velocityY) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0], pos[1] += event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      });\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPinchStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.zoomStart({\n      pos\n    }).rotateStart({\n      pos\n    });\n    this._startPinchRotation = event.rotation;\n    this._lastPinchEvent = event;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPinch(event) {\n    if (!this.touchZoom && !this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    let newControllerState = this.controllerState;\n\n    if (this.touchZoom) {\n      const {\n        scale\n      } = event;\n      const pos = this.getCenter(event);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale\n      });\n    }\n\n    if (this.touchRotate) {\n      const {\n        rotation\n      } = event;\n      newControllerState = newControllerState.rotate({\n        deltaAngleX: this._startPinchRotation - rotation\n      });\n    }\n\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: this.touchZoom,\n      isZooming: this.touchZoom,\n      isRotating: this.touchRotate\n    });\n    this._lastPinchEvent = event;\n    return true;\n  }\n\n  _onPinchEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia,\n      _lastPinchEvent\n    } = this;\n\n    if (this.touchZoom && inertia && _lastPinchEvent && event.scale !== _lastPinchEvent.scale) {\n      const pos = this.getCenter(event);\n      let newControllerState = this.controllerState.rotateEnd();\n      const z = Math.log2(event.scale);\n\n      const velocityZ = (z - Math.log2(_lastPinchEvent.scale)) / (event.deltaTime - _lastPinchEvent.deltaTime);\n\n      const endScale = Math.pow(2, z + velocityZ * inertia / 2);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale: endScale\n      }).zoomEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps({\n          around: pos\n        }),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: false\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n    }\n\n    this._startPinchRotation = null;\n    this._lastPinchEvent = null;\n    return true;\n  }\n\n  _onDoubleTap(event) {\n    if (!this.doubleClickZoom) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const isZoomOut = this.isFunctionKeyPressed(event);\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale: isZoomOut ? 0.5 : 2\n    });\n    this.updateViewport(newControllerState, this._getTransitionProps({\n      around: pos\n    }), {\n      isZooming: true,\n      isPanning: true\n    });\n    this.blockEvents(100);\n    return true;\n  }\n\n  _onKeyDown(event) {\n    if (!this.keyboard) {\n      return false;\n    }\n\n    const funcKey = this.isFunctionKeyPressed(event);\n    const {\n      zoomSpeed,\n      moveSpeed,\n      rotateSpeedX,\n      rotateSpeedY\n    } = this.keyboard;\n    const {\n      controllerState\n    } = this;\n    let newControllerState;\n    const interactionState = {};\n\n    switch (event.srcEvent.code) {\n      case 'Minus':\n        newControllerState = funcKey ? controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed) : controllerState.zoomOut(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'Equal':\n        newControllerState = funcKey ? controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed) : controllerState.zoomIn(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'ArrowLeft':\n        if (funcKey) {\n          newControllerState = controllerState.rotateLeft(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveLeft(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowRight':\n        if (funcKey) {\n          newControllerState = controllerState.rotateRight(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveRight(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowUp':\n        if (funcKey) {\n          newControllerState = controllerState.rotateUp(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveUp(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (funcKey) {\n          newControllerState = controllerState.rotateDown(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveDown(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      default:\n        return false;\n    }\n\n    this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n    return true;\n  }\n\n  _getTransitionProps(opts) {\n    const {\n      _transition\n    } = this;\n\n    if (!_transition) {\n      return NO_TRANSITION_PROPS;\n    }\n\n    return opts ? { ..._transition,\n      transitionInterpolator: new LinearInterpolator({ ...opts,\n        transitionProps: this.linearTransitionProps,\n        makeViewport: this.controllerState.makeViewport\n      })\n    } : _transition;\n  }\n\n}\n//# sourceMappingURL=controller.js.map","import { clamp } from 'math.gl';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nconst PITCH_MOUSE_THRESHOLD = 5;\nconst PITCH_ACCEL = 1.2;\nconst DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5,\n  minZoom: 0,\n  maxZoom: 20,\n  minPitch: 0,\n  maxPitch: 60\n};\nexport class MapState extends ViewState {\n  constructor({\n    makeViewport,\n    width,\n    height,\n    latitude,\n    longitude,\n    zoom,\n    bearing = DEFAULT_STATE.bearing,\n    pitch = DEFAULT_STATE.pitch,\n    altitude = DEFAULT_STATE.altitude,\n    maxZoom = DEFAULT_STATE.maxZoom,\n    minZoom = DEFAULT_STATE.minZoom,\n    maxPitch = DEFAULT_STATE.maxPitch,\n    minPitch = DEFAULT_STATE.minPitch,\n    startPanLngLat,\n    startZoomLngLat,\n    startRotatePos,\n    startBearing,\n    startPitch,\n    startZoom,\n    normalize\n  } = {}) {\n    assert(Number.isFinite(longitude));\n    assert(Number.isFinite(latitude));\n    assert(Number.isFinite(zoom));\n    super({\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing,\n      pitch,\n      altitude,\n      maxZoom,\n      minZoom,\n      maxPitch,\n      minPitch,\n      normalize\n    });\n    this._state = {\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom\n    };\n    this.makeViewport = makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanLngLat: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPos\n  }) {\n    const startPanLngLat = this._state.startPanLngLat || this._unproject(startPos);\n\n    if (!startPanLngLat) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this._viewportProps);\n    const newProps = viewport.panByPosition(startPanLngLat, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanLngLat: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startBearing: this._viewportProps.bearing,\n      startPitch: this._viewportProps.pitch\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startBearing,\n      startPitch\n    } = this._state;\n\n    if (!startRotatePos || !Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      newRotation = this._calculateNewPitchAndBearing({ ...this._getRotationParams(pos, startRotatePos),\n        startBearing,\n        startPitch\n      });\n    } else {\n      newRotation = {\n        bearing: startBearing + deltaAngleX,\n        pitch: startPitch + deltaAngleY\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startBearing: null,\n      startPitch: null\n    });\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomLngLat: this._unproject(pos),\n      startZoom: this._viewportProps.zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomLngLat\n    } = this._state;\n\n    if (!Number.isFinite(startZoom)) {\n      startZoom = this._viewportProps.zoom;\n      startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    const zoom = this._calculateNewZoom({\n      scale,\n      startZoom\n    });\n\n    const zoomedViewport = this.makeViewport({ ...this._viewportProps,\n      zoom\n    });\n    return this._getUpdatedState({\n      zoom,\n      ...zoomedViewport.panByPosition(startZoomLngLat, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomLngLat: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._zoomFromCenter(speed);\n  }\n\n  zoomOut(speed = 2) {\n    return this._zoomFromCenter(1 / speed);\n  }\n\n  moveLeft(speed = 100) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveRight(speed = 100) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveUp(speed = 100) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  moveDown(speed = 100) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch + speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch - speed\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this._viewportProps\n    };\n    const {\n      bearing,\n      longitude\n    } = props;\n\n    if (Math.abs(bearing - fromProps.bearing) > 180) {\n      props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n    }\n\n    if (Math.abs(longitude - fromProps.longitude) > 180) {\n      props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n    }\n\n    return props;\n  }\n\n  _zoomFromCenter(scale) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.zoom({\n      pos: [width / 2, height / 2],\n      scale\n    });\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.pan({\n      startPos: [width / 2, height / 2],\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this._viewportProps,\n      ...this._state,\n      ...newProps\n    });\n  }\n\n  _applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom\n    } = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n    const {\n      maxPitch,\n      minPitch,\n      pitch\n    } = props;\n    props.pitch = clamp(pitch, minPitch, maxPitch);\n    const {\n      normalize = true\n    } = props;\n\n    if (normalize) {\n      Object.assign(props, normalizeViewportProps(props));\n    }\n\n    return props;\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this._viewportProps);\n    return pos && viewport.unproject(pos);\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this._viewportProps;\n    const zoom = startZoom + Math.log2(scale);\n    return clamp(zoom, minZoom, maxZoom);\n  }\n\n  _calculateNewPitchAndBearing({\n    deltaScaleX,\n    deltaScaleY,\n    startBearing,\n    startPitch\n  }) {\n    deltaScaleY = clamp(deltaScaleY, -1, 1);\n    const {\n      minPitch,\n      maxPitch\n    } = this._viewportProps;\n    const bearing = startBearing + 180 * deltaScaleX;\n    let pitch = startPitch;\n\n    if (deltaScaleY > 0) {\n      pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n    } else if (deltaScaleY < 0) {\n      pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n    }\n\n    return {\n      pitch,\n      bearing\n    };\n  }\n\n  _getRotationParams(pos, startPos) {\n    const deltaX = pos[0] - startPos[0];\n    const deltaY = pos[1] - startPos[1];\n    const centerY = pos[1];\n    const startY = startPos[1];\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    const deltaScaleX = deltaX / width;\n    let deltaScaleY = 0;\n\n    if (deltaY > 0) {\n      if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n      }\n    } else if (deltaY < 0) {\n      if (startY > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = 1 - centerY / startY;\n      }\n    }\n\n    deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n    return {\n      deltaScaleX,\n      deltaScaleY\n    };\n  }\n\n}\nexport default class MapController extends Controller {\n  constructor(props) {\n    props.dragMode = props.dragMode || 'pan';\n    super(MapState, props);\n  }\n\n  setProps(props) {\n    const oldProps = this.controllerStateProps;\n    super.setProps(props);\n    const dimensionChanged = !oldProps || oldProps.height !== props.height;\n\n    if (dimensionChanged) {\n      this.updateViewport(new this.ControllerState({\n        makeViewport: this.makeViewport,\n        ...this.controllerStateProps,\n        ...this._state\n      }));\n    }\n  }\n\n  get linearTransitionProps() {\n    return ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\n  }\n\n}\n//# sourceMappingURL=map-controller.js.map","export default class ViewState {\n  constructor(opts) {\n    this._viewportProps = this._applyConstraints(opts);\n  }\n\n  getViewportProps() {\n    return this._viewportProps;\n  }\n\n  getState() {\n    return this._state;\n  }\n\n  shortestPathFrom(viewState) {\n    return this._viewportProps;\n  }\n\n  _applyConstraints(props) {\n    return props;\n  }\n\n}\n//# sourceMappingURL=view-state.js.map","import View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\nexport default class MapView extends View {\n  constructor(props) {\n    super({ ...props,\n      type: WebMercatorViewport\n    });\n  }\n\n  get controller() {\n    return this._getControllerProps({\n      type: MapController\n    });\n  }\n\n}\nMapView.displayName = 'MapView';\n//# sourceMappingURL=map-view.js.map","const DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nlet idCount = 0;\nexport class AmbientLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    this.id = props.id || \"ambient-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'ambient';\n  }\n\n}\n//# sourceMappingURL=ambient-light.js.map","import { Vector3 } from 'math.gl';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nlet idCount = 0;\nexport class DirectionalLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      direction = DEFAULT_LIGHT_DIRECTION\n    } = props;\n    const {\n      _shadow = false\n    } = props;\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  getProjectedLight() {\n    return this;\n  }\n\n}\n//# sourceMappingURL=directional-light.js.map","export default class Effect {\n  constructor(props = {}) {\n    const {\n      id = 'effect'\n    } = props;\n    this.id = id;\n    this.props = { ...props\n    };\n  }\n\n  preRender() {}\n\n  getModuleParameters() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=effect.js.map","import Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class LayersPass extends Pass {\n  render(props) {\n    const gl = this.gl;\n    setParameters(gl, {\n      framebuffer: props.target\n    });\n    return this._drawLayers(props);\n  }\n\n  _drawLayers(props) {\n    const {\n      viewports,\n      views,\n      onViewportActive,\n      clearCanvas = true\n    } = props;\n    props.pass = props.pass || 'unknown';\n    const gl = this.gl;\n\n    if (clearCanvas) {\n      clearGLCanvas(gl);\n    }\n\n    const renderStats = [];\n\n    for (const viewportOrDescriptor of viewports) {\n      const viewport = viewportOrDescriptor.viewport || viewportOrDescriptor;\n      const view = views && views[viewport.id];\n      onViewportActive(viewport);\n\n      const drawLayerParams = this._getDrawLayerParams(viewport, props);\n\n      props.view = view;\n      const subViewports = viewport.subViewports || [viewport];\n\n      for (const subViewport of subViewports) {\n        props.viewport = subViewport;\n\n        const stats = this._drawLayersInViewport(gl, props, drawLayerParams);\n\n        renderStats.push(stats);\n      }\n    }\n\n    return renderStats;\n  }\n\n  _getDrawLayerParams(viewport, {\n    layers,\n    pass,\n    layerFilter,\n    effects,\n    moduleParameters\n  }) {\n    const drawLayerParams = [];\n    const indexResolver = layerIndexResolver();\n    const drawContext = {\n      viewport,\n      isPicking: pass.startsWith('picking'),\n      renderPass: pass\n    };\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n\n      const shouldDrawLayer = this._shouldDrawLayer(layer, drawContext, layerFilter);\n\n      const layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n      const layerParam = {\n        shouldDrawLayer,\n        layerRenderIndex\n      };\n\n      if (shouldDrawLayer) {\n        layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n        layerParam.layerParameters = this.getLayerParameters(layer, layerIndex);\n      }\n\n      drawLayerParams[layerIndex] = layerParam;\n    }\n\n    return drawLayerParams;\n  }\n\n  _drawLayersInViewport(gl, {\n    layers,\n    pass,\n    viewport,\n    view\n  }, drawLayerParams) {\n    const glViewport = getGLViewport(gl, {\n      viewport\n    });\n\n    if (view && view.props.clear) {\n      const clearOpts = view.props.clear === true ? {\n        color: true,\n        depth: true\n      } : view.props.clear;\n      withParameters(gl, {\n        scissorTest: true,\n        scissor: glViewport\n      }, () => clear(gl, clearOpts));\n    }\n\n    const renderStatus = {\n      totalCount: layers.length,\n      visibleCount: 0,\n      compositeCount: 0,\n      pickableCount: 0\n    };\n    setParameters(gl, {\n      viewport: glViewport\n    });\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n      const {\n        shouldDrawLayer,\n        layerRenderIndex,\n        moduleParameters,\n        layerParameters\n      } = drawLayerParams[layerIndex];\n\n      if (shouldDrawLayer && layer.props.pickable) {\n        renderStatus.pickableCount++;\n      }\n\n      if (layer.isComposite) {\n        renderStatus.compositeCount++;\n      } else if (shouldDrawLayer) {\n        renderStatus.visibleCount++;\n        moduleParameters.viewport = viewport;\n\n        try {\n          layer.drawLayer({\n            moduleParameters,\n            uniforms: {\n              layerIndex: layerRenderIndex\n            },\n            parameters: layerParameters\n          });\n        } catch (err) {\n          layer.raiseError(err, \"drawing \".concat(layer, \" to \").concat(pass));\n        }\n      }\n    }\n\n    return renderStatus;\n  }\n\n  shouldDrawLayer(layer) {\n    return true;\n  }\n\n  getModuleParameters(layer, effects) {\n    return null;\n  }\n\n  getLayerParameters(layer, layerIndex) {\n    return layer.props.parameters;\n  }\n\n  _shouldDrawLayer(layer, drawContext, layerFilter) {\n    const shouldDrawLayer = this.shouldDrawLayer(layer) && layer.props.visible;\n\n    if (!shouldDrawLayer) {\n      return false;\n    }\n\n    drawContext.layer = layer;\n\n    if (layerFilter && !layerFilter(drawContext)) {\n      return false;\n    }\n\n    let parent = layer.parent;\n\n    while (parent) {\n      if (!parent.filterSubLayer(drawContext)) {\n        return false;\n      }\n\n      drawContext.layer = parent;\n      parent = parent.parent;\n    }\n\n    layer.activateViewport(drawContext.viewport);\n    return true;\n  }\n\n  _getModuleParameters(layer, effects, pass, overrides) {\n    const moduleParameters = Object.assign(Object.create(layer.props), {\n      autoWrapLongitude: layer.wrapLongitude,\n      viewport: layer.context.viewport,\n      mousePosition: layer.context.mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(this.gl)\n    });\n\n    if (effects) {\n      for (const effect of effects) {\n        Object.assign(moduleParameters, effect.getModuleParameters(layer));\n      }\n    }\n\n    return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n  }\n\n}\nexport function layerIndexResolver(startIndex = 0, layerIndices = {}) {\n  const resolvers = {};\n\n  const resolveLayerIndex = (layer, isDrawn) => {\n    const indexOverride = layer.props._offset;\n    const layerId = layer.id;\n    const parentId = layer.parent && layer.parent.id;\n    let index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      const resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, {\n  viewport\n}) {\n  const height = gl.canvas ? gl.canvas.clientHeight || gl.canvas.height : 100;\n  const dimensions = viewport;\n  const pixelRatio = cssToDeviceRatio(gl);\n  return [dimensions.x * pixelRatio, (height - dimensions.y - dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","export default class Pass {\n  constructor(gl, props = {}) {\n    const {\n      id = 'pass'\n    } = props;\n    this.id = id;\n    this.gl = gl;\n    this.props = { ...props\n    };\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  render() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=pass.js.map","import { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class ShadowPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n    this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: {\n        [36064]: this.shadowMap,\n        [36096]: this.depthBuffer\n      }\n    });\n  }\n\n  render(params) {\n    const target = this.fbo;\n    withParameters(this.gl, {\n      depthRange: [0, 1],\n      depthTest: true,\n      blend: false,\n      clearColor: [1, 1, 1, 1]\n    }, () => {\n      const viewport = params.viewports[0];\n      const pixelRatio = cssToDeviceRatio(this.gl);\n      const width = viewport.width * pixelRatio;\n      const height = viewport.height * pixelRatio;\n\n      if (width !== target.width || height !== target.height) {\n        target.resize({\n          width,\n          height\n        });\n      }\n\n      super.render({ ...params,\n        target,\n        pass: 'shadow'\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.shadowEnabled !== false;\n  }\n\n  getModuleParameters() {\n    return {\n      drawToShadowMap: true\n    };\n  }\n\n  delete() {\n    if (this.fbo) {\n      this.fbo.delete();\n      this.fbo = null;\n    }\n\n    if (this.shadowMap) {\n      this.shadowMap.delete();\n      this.shadowMap = null;\n    }\n\n    if (this.depthBuffer) {\n      this.depthBuffer.delete();\n      this.depthBuffer = null;\n    }\n  }\n\n}\n//# sourceMappingURL=shadow-pass.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nconst vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nconst fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nconst getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  const [x, y, z] = xyz;\n  const coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}) {\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}) {\n  const projectionMatrices = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(pixel => screenToCommonSpace(pixel, pixelUnprojectionMatrix));\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new Matrix4().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms(opts = {}, context = {}) {\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  const projectCenters = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(i, \"]\")] = viewProjectionMatrices[i];\n    uniforms[\"shadow_uProjectCenters[\".concat(i, \"]\")] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.shadowMaps[i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs,\n  fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0) {\n      const {\n        shadowEnabled = true\n      } = opts;\n      return shadowEnabled && opts.shadowMatrices && opts.shadowMatrices.length > 0 ? createShadowUniforms(opts, context) : {\n        shadow_uDrawShadowMap: false,\n        shadow_uUseShadowMap: false\n      };\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport Effect from '../../lib/effect';\nimport { Matrix4, Vector3 } from 'math.gl';\nimport ShadowPass from '../../passes/shadow-pass';\nimport { default as shadow } from '../../shaderlib/shadow/shadow';\nconst DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nconst DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\nexport default class LightingEffect extends Effect {\n  constructor(props) {\n    super(props);\n    this.ambientLight = null;\n    this.directionalLights = [];\n    this.pointLights = [];\n    this.shadowColor = DEFAULT_SHADOW_COLOR;\n    this.shadowPasses = [];\n    this.shadowMaps = [];\n    this.dummyShadowMap = null;\n    this.shadow = false;\n    this.programManager = null;\n\n    for (const key in props) {\n      const lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          this.directionalLights.push(lightSource);\n          break;\n\n        case 'point':\n          this.pointLights.push(lightSource);\n          break;\n\n        default:\n      }\n    }\n\n    this._applyDefaultLights();\n\n    this.shadow = this.directionalLights.some(light => light.shadow);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.shadow) return;\n    this.shadowMatrices = this._createLightMatrix();\n\n    if (this.shadowPasses.length === 0) {\n      this._createShadowPasses(gl);\n    }\n\n    if (!this.programManager) {\n      this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n      if (shadow) {\n        this.programManager.addDefaultModule(shadow);\n      }\n    }\n\n    if (!this.dummyShadowMap) {\n      this.dummyShadowMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    for (let i = 0; i < this.shadowPasses.length; i++) {\n      const shadowPass = this.shadowPasses[i];\n      shadowPass.render({\n        layers,\n        layerFilter,\n        viewports,\n        onViewportActive,\n        views,\n        moduleParameters: {\n          shadowLightId: i,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowMatrices: this.shadowMatrices\n        }\n      });\n    }\n  }\n\n  getModuleParameters(layer) {\n    const parameters = this.shadow ? {\n      shadowMaps: this.shadowMaps,\n      dummyShadowMap: this.dummyShadowMap,\n      shadowColor: this.shadowColor,\n      shadowMatrices: this.shadowMatrices\n    } : {};\n    parameters.lightSources = {\n      ambientLight: this.ambientLight,\n      directionalLights: this.directionalLights.map(directionalLight => directionalLight.getProjectedLight({\n        layer\n      })),\n      pointLights: this.pointLights.map(pointLight => pointLight.getProjectedLight({\n        layer\n      }))\n    };\n    return parameters;\n  }\n\n  cleanup() {\n    for (const shadowPass of this.shadowPasses) {\n      shadowPass.delete();\n    }\n\n    this.shadowPasses.length = 0;\n    this.shadowMaps.length = 0;\n\n    if (this.dummyShadowMap) {\n      this.dummyShadowMap.delete();\n      this.dummyShadowMap = null;\n    }\n\n    if (this.shadow && this.programManager) {\n      this.programManager.removeDefaultModule(shadow);\n      this.programManager = null;\n    }\n  }\n\n  _createLightMatrix() {\n    const lightMatrices = [];\n\n    for (const light of this.directionalLights) {\n      const viewMatrix = new Matrix4().lookAt({\n        eye: new Vector3(light.direction).negate()\n      });\n      lightMatrices.push(viewMatrix);\n    }\n\n    return lightMatrices;\n  }\n\n  _createShadowPasses(gl) {\n    for (let i = 0; i < this.directionalLights.length; i++) {\n      const shadowPass = new ShadowPass(gl);\n      this.shadowPasses[i] = shadowPass;\n      this.shadowMaps[i] = shadowPass.shadowMap;\n    }\n  }\n\n  _applyDefaultLights() {\n    const {\n      ambientLight,\n      pointLights,\n      directionalLights\n    } = this;\n\n    if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n      this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n      this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n    }\n  }\n\n}\n//# sourceMappingURL=lighting-effect.js.map","import { deepEqual } from '../utils/deep-equal';\nimport { default as LightingEffect } from '../effects/lighting/lighting-effect';\nconst DEFAULT_LIGHTING_EFFECT = new LightingEffect();\nexport default class EffectManager {\n  constructor() {\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  setProps(props) {\n    if ('effects' in props) {\n      if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n        this.setEffects(props.effects);\n        this._needsRedraw = 'effects changed';\n      }\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  getEffects() {\n    return this._internalEffects;\n  }\n\n  finalize() {\n    this.cleanup();\n  }\n\n  setEffects(effects = []) {\n    this.cleanup();\n    this.effects = effects;\n\n    this._createInternalEffects();\n  }\n\n  cleanup() {\n    for (const effect of this.effects) {\n      effect.cleanup();\n    }\n\n    for (const effect of this._internalEffects) {\n      effect.cleanup();\n    }\n\n    this.effects.length = 0;\n    this._internalEffects.length = 0;\n  }\n\n  _createInternalEffects() {\n    this._internalEffects = this.effects.slice();\n\n    if (!this.effects.some(effect => effect instanceof LightingEffect)) {\n      this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n    }\n  }\n\n}\n//# sourceMappingURL=effect-manager.js.map","import LayersPass from './layers-pass';\nexport default class DrawLayersPass extends LayersPass {}\n//# sourceMappingURL=draw-layers-pass.js.map","import LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nconst PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\nexport default class PickLayersPass extends LayersPass {\n  render(props) {\n    if (props.pickingFBO) {\n      this.useAlpha = true;\n\n      this._drawPickingBuffer(props);\n    } else {\n      this.useAlpha = false;\n      super.render(props);\n    }\n  }\n\n  _drawPickingBuffer({\n    layers,\n    layerFilter,\n    views,\n    viewports,\n    onViewportActive,\n    pickingFBO,\n    deviceRect: {\n      x,\n      y,\n      width,\n      height\n    },\n    pass = 'picking',\n    redrawReason,\n    pickZ\n  }) {\n    const gl = this.gl;\n    this.pickZ = pickZ;\n    return withParameters(gl, {\n      scissorTest: true,\n      scissor: [x, y, width, height],\n      clearColor: [0, 0, 0, 0],\n      depthMask: true,\n      depthTest: true,\n      depthRange: [0, 1],\n      colorMask: [true, true, true, true],\n      ...PICKING_PARAMETERS,\n      blend: !pickZ\n    }, () => {\n      super.render({\n        target: pickingFBO,\n        layers,\n        layerFilter,\n        views,\n        viewports,\n        onViewportActive,\n        pass,\n        redrawReason\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.pickable;\n  }\n\n  getModuleParameters() {\n    return {\n      pickingActive: 1,\n      pickingAttribute: this.pickZ,\n      lightSources: {}\n    };\n  }\n\n  getLayerParameters(layer, layerIndex) {\n    const pickParameters = this.pickZ ? {\n      blend: false\n    } : { ...PICKING_PARAMETERS,\n      blend: true,\n      blendColor: [0, 0, 0, this.useAlpha ? (layerIndex + 1) / 255 : 1]\n    };\n    return { ...layer.props.parameters,\n      ...pickParameters\n    };\n  }\n\n}\n//# sourceMappingURL=pick-layers-pass.js.map","import debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nconst TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\nexport default class DeckRenderer {\n  constructor(gl) {\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n      this.layerFilter = props.layerFilter;\n      this._needsRedraw = 'layerFilter changed';\n    }\n\n    if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n      this.drawPickingColors = props.drawPickingColors;\n      this._needsRedraw = 'drawPickingColors changed';\n    }\n  }\n\n  renderLayers(opts) {\n    const layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n    opts.layerFilter = this.layerFilter;\n    opts.effects = opts.effects || [];\n    opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n    this._preRender(opts.effects, opts);\n\n    const outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n    const renderStats = layerPass.render({ ...opts,\n      target: outputBuffer\n    });\n\n    this._postRender(opts.effects, opts);\n\n    this.renderCount++;\n    debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  finalize() {\n    const {\n      renderBuffers\n    } = this;\n\n    for (const buffer of renderBuffers) {\n      buffer.delete();\n    }\n\n    renderBuffers.length = 0;\n  }\n\n  _preRender(effects, opts) {\n    let lastPostProcessEffect = null;\n\n    for (const effect of effects) {\n      effect.preRender(this.gl, opts);\n\n      if (effect.postRender) {\n        lastPostProcessEffect = effect;\n      }\n    }\n\n    if (lastPostProcessEffect) {\n      this._resizeRenderBuffers();\n    }\n\n    this.lastPostProcessEffect = lastPostProcessEffect;\n  }\n\n  _resizeRenderBuffers() {\n    const {\n      renderBuffers\n    } = this;\n\n    if (renderBuffers.length === 0) {\n      renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n    }\n\n    for (const buffer of renderBuffers) {\n      buffer.resize();\n    }\n  }\n\n  _postRender(effects, opts) {\n    const {\n      renderBuffers\n    } = this;\n    const params = {\n      inputBuffer: renderBuffers[0],\n      swapBuffer: renderBuffers[1],\n      target: null\n    };\n\n    for (const effect of effects) {\n      if (effect.postRender) {\n        if (effect === this.lastPostProcessEffect) {\n          params.target = opts.target;\n          effect.postRender(this.gl, params);\n          break;\n        }\n\n        const buffer = effect.postRender(this.gl, params);\n        params.inputBuffer = buffer;\n        params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedLayer: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject({\n  pickedColors,\n  layers,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}) {\n  if (pickedColors) {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n    let closestPixelIndex = -1;\n    let i = 0;\n\n    for (let row = 0; row < height; row++) {\n      const dy = row + y - deviceY;\n      const dy2 = dy * dy;\n\n      if (dy2 > minSquareDistanceToCenter) {\n        i += 4 * width;\n      } else {\n        for (let col = 0; col < width; col++) {\n          const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n          if (pickedLayerIndex >= 0) {\n            const dx = col + x - deviceX;\n            const d2 = dx * dx + dy2;\n\n            if (d2 <= minSquareDistanceToCenter) {\n              minSquareDistanceToCenter = d2;\n              closestPixelIndex = i;\n            }\n          }\n\n          i += 4;\n        }\n      }\n    }\n\n    if (closestPixelIndex >= 0) {\n      const pickedLayerIndex = pickedColors[closestPixelIndex + 3] - 1;\n      const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n      const pickedLayer = layers[pickedLayerIndex];\n\n      if (pickedLayer) {\n        const pickedObjectIndex = pickedLayer.decodePickingColor(pickedColor);\n        const dy = Math.floor(closestPixelIndex / 4 / width);\n        const dx = closestPixelIndex / 4 - dy * width;\n        return {\n          pickedColor,\n          pickedLayer,\n          pickedObjectIndex,\n          pickedX: x + dx,\n          pickedY: y + dy\n        };\n      }\n\n      log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n    }\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects({\n  pickedColors,\n  layers\n}) {\n  const uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          const pickedLayer = layers[pickedLayerIndex];\n\n          if (pickedLayer) {\n            uniqueColors.set(colorKey, {\n              pickedColor,\n              pickedLayer,\n              pickedObjectIndex: pickedLayer.decodePickingColor(pickedColor)\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function getEmptyPickingInfo({\n  pickInfo,\n  mode,\n  viewports,\n  layerFilter,\n  pixelRatio,\n  x,\n  y,\n  z\n}) {\n  const layer = pickInfo && pickInfo.pickedLayer;\n\n  const viewportFilter = layerFilter && layer && (v => layerFilter({\n    layer,\n    viewport: v,\n    isPicking: true,\n    renderPass: \"picking:\".concat(mode)\n  }));\n\n  const viewport = getViewportFromCoordinates(viewports, {\n    x,\n    y\n  }, viewportFilter);\n  const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y], {\n    targetZ: z\n  });\n  return {\n    color: null,\n    layer: null,\n    viewport,\n    index: -1,\n    picked: false,\n    x,\n    y,\n    pixel: [x, y],\n    coordinate,\n    devicePixel: pickInfo && [pickInfo.pickedX, pickInfo.pickedY],\n    pixelRatio\n  };\n}\nexport function processPickInfo(opts) {\n  const {\n    pickInfo,\n    lastPickedInfo,\n    mode,\n    layers\n  } = opts;\n  const {\n    pickedColor,\n    pickedLayer,\n    pickedObjectIndex\n  } = pickInfo;\n  const affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    const lastPickedObjectIndex = lastPickedInfo.index;\n    const lastPickedLayerId = lastPickedInfo.layerId;\n    const pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        const lastPickedLayer = layers.find(layer => layer.props.id === lastPickedLayerId);\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  const baseInfo = getEmptyPickingInfo(opts);\n  const infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(layer => {\n    let info = { ...baseInfo\n    };\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer,\n      info,\n      mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    infos.set(info.layer.id, info);\n\n    if (mode === 'hover') {\n      info.layer.updateAutoHighlight(info);\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo({\n  layer,\n  info,\n  mode\n}) {\n  while (layer && info) {\n    const sourceLayer = info.layer || null;\n    info.sourceLayer = sourceLayer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info,\n      mode,\n      sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel, filter) {\n  for (let i = viewports.length - 1; i >= 0; i--) {\n    const viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel) && (!filter || filter(viewport))) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map","import { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport log from '../utils/log';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo, getEmptyPickingInfo } from './picking/pick-info';\nexport default class DeckPicker {\n  constructor(gl) {\n    this.gl = gl;\n    this.pickingFBO = null;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.layerFilter = null;\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props) {\n      this.layerFilter = props.layerFilter;\n    }\n\n    if ('_pickable' in props) {\n      this._pickable = props._pickable;\n    }\n  }\n\n  finalize() {\n    if (this.pickingFBO) {\n      this.pickingFBO.delete();\n    }\n\n    if (this.depthFBO) {\n      this.depthFBO.color.delete();\n      this.depthFBO.delete();\n    }\n  }\n\n  pickObject(opts) {\n    return this._pickClosestObject(opts);\n  }\n\n  pickObjects(opts) {\n    return this._pickVisibleObjects(opts);\n  }\n\n  getLastPickedObject({\n    x,\n    y,\n    layers,\n    viewports\n  }, lastPickedInfo = this.lastPickedInfo.info) {\n    const lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n    const lastPickedViewportId = lastPickedInfo && lastPickedInfo.viewport && lastPickedInfo.viewport.id;\n    const layer = lastPickedLayerId ? layers.find(l => l.id === lastPickedLayerId) : null;\n    const viewport = lastPickedViewportId && viewports.find(v => v.id === lastPickedViewportId) || viewports[0];\n    const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y]);\n    const info = {\n      x,\n      y,\n      viewport,\n      coordinate,\n      layer\n    };\n\n    if (layer) {\n      return { ...lastPickedInfo,\n        ...info\n      };\n    }\n\n    return Object.assign(info, {\n      color: null,\n      object: null,\n      index: -1\n    });\n  }\n\n  _resizeBuffer() {\n    const {\n      gl\n    } = this;\n\n    if (!this.pickingFBO) {\n      this.pickingFBO = new Framebuffer(gl);\n\n      if (Framebuffer.isSupported(gl, {\n        colorBufferFloat: true\n      })) {\n        this.depthFBO = new Framebuffer(gl);\n        this.depthFBO.attach({\n          [36064]: new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })\n        });\n      }\n    }\n\n    this.pickingFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n\n    if (this.depthFBO) {\n      this.depthFBO.resize({\n        width: gl.canvas.width,\n        height: gl.canvas.height\n      });\n    }\n\n    return this.pickingFBO;\n  }\n\n  _getPickable(layers) {\n    if (this._pickable === false) {\n      return null;\n    }\n\n    const pickableLayers = layers.filter(layer => layer.isPickable() && !layer.isComposite);\n\n    if (pickableLayers.length > 255) {\n      log.warn('Too many pickable layers, only picking the first 255')();\n      return pickableLayers.slice(0, 255);\n    }\n\n    return pickableLayers.length ? pickableLayers : null;\n  }\n\n  _pickClosestObject({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    radius = 0,\n    depth = 1,\n    mode = 'query',\n    unproject3D,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return {\n        result: [],\n        emptyInfo: getEmptyPickingInfo({\n          viewports,\n          x,\n          y\n        })\n      };\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n    const devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n    const deviceRadius = Math.round(radius * pixelRatio);\n    const {\n      width,\n      height\n    } = this.pickingFBO;\n\n    const deviceRect = this._getPickingRect({\n      deviceX: devicePixel[0],\n      deviceY: devicePixel[1],\n      deviceRadius,\n      deviceWidth: width,\n      deviceHeight: height\n    });\n\n    let infos;\n    const result = [];\n    const affectedLayers = {};\n\n    for (let i = 0; i < depth; i++) {\n      const pickedColors = deviceRect && this._drawAndSample({\n        layers,\n        views,\n        viewports,\n        onViewportActive,\n        deviceRect,\n        pass: \"picking:\".concat(mode),\n        redrawReason: mode\n      });\n\n      const pickInfo = getClosestObject({\n        pickedColors,\n        layers,\n        deviceX: devicePixel[0],\n        deviceY: devicePixel[1],\n        deviceRadius,\n        deviceRect\n      });\n      let z;\n\n      if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n        const zValues = this._drawAndSample({\n          layers: [pickInfo.pickedLayer],\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect: {\n            x: pickInfo.pickedX,\n            y: pickInfo.pickedY,\n            width: 1,\n            height: 1\n          },\n          pass: \"picking:\".concat(mode),\n          redrawReason: 'pick-z',\n          pickZ: true\n        });\n\n        z = zValues[0] * viewports[0].distanceScales.metersPerUnit[2] + viewports[0].position[2];\n      }\n\n      if (pickInfo.pickedColor && i + 1 < depth) {\n        const layerId = pickInfo.pickedColor[3] - 1;\n        affectedLayers[layerId] = true;\n        layers[layerId].disablePickingIndex(pickInfo.pickedObjectIndex);\n      }\n\n      infos = processPickInfo({\n        pickInfo,\n        lastPickedInfo: this.lastPickedInfo,\n        mode,\n        layers,\n        layerFilter: this.layerFilter,\n        viewports,\n        x,\n        y,\n        z,\n        pixelRatio\n      });\n\n      for (const info of infos.values()) {\n        if (info.layer) {\n          result.push(info);\n        }\n      }\n\n      if (!pickInfo.pickedColor) {\n        break;\n      }\n    }\n\n    for (const layerId in affectedLayers) {\n      layers[layerId].restorePickingColors();\n    }\n\n    return {\n      result,\n      emptyInfo: infos && infos.get(null)\n    };\n  }\n\n  _pickVisibleObjects({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    width = 1,\n    height = 1,\n    mode = 'query',\n    maxObjects = null,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return [];\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const leftTop = cssToDevicePixels(this.gl, [x, y], true);\n    const deviceLeft = leftTop.x;\n    const deviceTop = leftTop.y + leftTop.height;\n    const rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n    const deviceRight = rightBottom.x + rightBottom.width;\n    const deviceBottom = rightBottom.y;\n    const deviceRect = {\n      x: deviceLeft,\n      y: deviceBottom,\n      width: deviceRight - deviceLeft,\n      height: deviceTop - deviceBottom\n    };\n\n    const pickedColors = this._drawAndSample({\n      layers,\n      views,\n      viewports,\n      onViewportActive,\n      deviceRect,\n      pass: \"picking:\".concat(mode),\n      redrawReason: mode\n    });\n\n    const pickInfos = getUniqueObjects({\n      pickedColors,\n      layers\n    });\n    const uniqueInfos = new Map();\n    const isMaxObjects = Number.isFinite(maxObjects);\n\n    for (let i = 0; i < pickInfos.length; i++) {\n      if (isMaxObjects && uniqueInfos.size >= maxObjects) {\n        break;\n      }\n\n      const pickInfo = pickInfos[i];\n      let info = {\n        color: pickInfo.pickedColor,\n        layer: null,\n        index: pickInfo.pickedObjectIndex,\n        picked: true,\n        x,\n        y,\n        width,\n        height,\n        pixelRatio\n      };\n      info = getLayerPickingInfo({\n        layer: pickInfo.pickedLayer,\n        info,\n        mode\n      });\n\n      if (!uniqueInfos.has(info.object)) {\n        uniqueInfos.set(info.object, info);\n      }\n    }\n\n    return Array.from(uniqueInfos.values());\n  }\n\n  _drawAndSample({\n    layers,\n    views,\n    viewports,\n    onViewportActive,\n    deviceRect,\n    pass,\n    redrawReason,\n    pickZ\n  }) {\n    if (layers.length < 1) {\n      return null;\n    }\n\n    const pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n    this.pickLayersPass.render({\n      layers,\n      layerFilter: this.layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pickingFBO,\n      deviceRect,\n      pass,\n      redrawReason,\n      pickZ\n    });\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    const pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n    readPixelsToArray(pickingFBO, {\n      sourceX: x,\n      sourceY: y,\n      sourceWidth: width,\n      sourceHeight: height,\n      target: pickedColors\n    });\n    return pickedColors;\n  }\n\n  _getPickingRect({\n    deviceX,\n    deviceY,\n    deviceRadius,\n    deviceWidth,\n    deviceHeight\n  }) {\n    const x = Math.max(0, deviceX - deviceRadius);\n    const y = Math.max(0, deviceY - deviceRadius);\n    const width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n    const height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n    if (width <= 0 || height <= 0) {\n      return null;\n    }\n\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n\n}\n//# sourceMappingURL=deck-picker.js.map","const defaultStyle = {\n  zIndex: 1,\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: 0,\n  left: 0,\n  display: 'none'\n};\nexport default class Tooltip {\n  constructor(canvas) {\n    const canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n\n    this.isVisible = false;\n  }\n\n  setTooltip(displayInfo, x, y) {\n    const el = this.el;\n\n    if (typeof displayInfo === 'string') {\n      el.innerText = displayInfo;\n    } else if (!displayInfo) {\n      this.isVisible = false;\n      el.style.display = 'none';\n      return;\n    } else {\n      if ('text' in displayInfo) {\n        el.innerText = displayInfo.text;\n      }\n\n      if ('html' in displayInfo) {\n        el.innerHTML = displayInfo.html;\n      }\n\n      if ('className' in displayInfo) {\n        el.className = displayInfo.className;\n      }\n\n      Object.assign(el.style, displayInfo.style);\n    }\n\n    this.isVisible = true;\n    el.style.display = 'block';\n    el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  }\n\n  remove() {\n    if (this.el) {\n      this.el.remove();\n    }\n  }\n\n}\n//# sourceMappingURL=tooltip.js.map","function isJSON(text) {\n  const firstChar = text[0];\n  const lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  name: 'JSON',\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport { global } from 'probe.gl/env';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nconst version = typeof \"8.5.2\" !== 'undefined' ? \"8.5.2\" : global.DECK_VERSION || 'untranspiled source';\nconst existingVersion = global.deck && global.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  log.log(1, \"deck.gl \".concat(version))();\n  global.deck = Object.assign(global.deck || {}, {\n    VERSION: version,\n    version,\n    log,\n    _registerLoggers: register\n  });\n  registerLoaders([jsonLoader, [ImageLoader, {\n    imagebitmap: {\n      premultiplyAlpha: 'none'\n    }\n  }]]);\n}\n\nexport default global.deck;\n//# sourceMappingURL=init.js.map","import Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nconst GL_QUERY_RESULT = 0x8866;\nconst GL_QUERY_RESULT_AVAILABLE = 0x8867;\nconst GL_TIME_ELAPSED_EXT = 0x88bf;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nconst GL_ANY_SAMPLES_PASSED = 0x8c2f;\nconst GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\nexport default class Query extends Resource {\n  static isSupported(gl, opts = []) {\n    const webgl2 = isWebGL2(gl);\n    const hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n    let supported = webgl2 || hasTimerQuery;\n\n    for (const key of opts) {\n      switch (key) {\n        case 'queries':\n          supported = supported && webgl2;\n          break;\n\n        case 'timers':\n          supported = supported && hasTimerQuery;\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n\n    return supported;\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.target = null;\n    this._queryPending = false;\n    this._pollingPromise = null;\n    Object.seal(this);\n  }\n\n  beginTimeElapsedQuery() {\n    return this.begin(GL_TIME_ELAPSED_EXT);\n  }\n\n  beginOcclusionQuery({\n    conservative = false\n  } = {}) {\n    return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n  }\n\n  beginTransformFeedbackQuery() {\n    return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n  }\n\n  begin(target) {\n    if (this._queryPending) {\n      return this;\n    }\n\n    this.target = target;\n    this.gl2.beginQuery(this.target, this.handle);\n    return this;\n  }\n\n  end() {\n    if (this._queryPending) {\n      return this;\n    }\n\n    if (this.target) {\n      this.gl2.endQuery(this.target);\n      this.target = null;\n      this._queryPending = true;\n    }\n\n    return this;\n  }\n\n  isResultAvailable() {\n    if (!this._queryPending) {\n      return false;\n    }\n\n    const resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n    if (resultAvailable) {\n      this._queryPending = false;\n    }\n\n    return resultAvailable;\n  }\n\n  isTimerDisjoint() {\n    return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n\n  getResult() {\n    return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n  }\n\n  getTimerMilliseconds() {\n    return this.getResult() / 1e6;\n  }\n\n  createPoll(limit = Number.POSITIVE_INFINITY) {\n    if (this._pollingPromise) {\n      return this._pollingPromise;\n    }\n\n    let counter = 0;\n    this._pollingPromise = new Promise((resolve, reject) => {\n      const poll = () => {\n        if (this.isResultAvailable()) {\n          resolve(this.getResult());\n          this._pollingPromise = null;\n        } else if (counter++ > limit) {\n          reject('Timed out');\n          this._pollingPromise = null;\n        } else {\n          requestAnimationFrame(poll);\n        }\n      };\n\n      requestAnimationFrame(poll);\n    });\n    return this._pollingPromise;\n  }\n\n  _createHandle() {\n    return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n  }\n\n  _deleteHandle() {\n    this.gl2.deleteQuery(this.handle);\n  }\n\n}\n//# sourceMappingURL=query.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","import { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from 'probe.gl/env';\nconst isPage = isBrowser() && typeof document !== 'undefined';\nlet statIdCounter = 0;\nexport default class AnimationLoop {\n  constructor(props = {}) {\n    const {\n      onCreateContext = opts => createGLContext(opts),\n      onAddHTML = null,\n      onInitialize = () => {},\n      onRender = () => {},\n      onFinalize = () => {},\n      onError,\n      gl = null,\n      glOptions = {},\n      debug = false,\n      createFramebuffer = false,\n      autoResizeViewport = true,\n      autoResizeDrawingBuffer = true,\n      stats = lumaStats.get(\"animation-loop-\".concat(statIdCounter++))\n    } = props;\n    let {\n      useDevicePixels = true\n    } = props;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext,\n      onAddHTML,\n      onInitialize,\n      onRender,\n      onFinalize,\n      onError,\n      gl,\n      glOptions,\n      debug,\n      createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport,\n      autoResizeDrawingBuffer,\n      useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  delete() {\n    this.stop();\n\n    this._setDisplay(null);\n  }\n\n  setNeedsRedraw(reason) {\n    assert(typeof reason === 'string');\n    this.needsRedraw = this.needsRedraw || reason;\n    return this;\n  }\n\n  setProps(props) {\n    if ('autoResizeViewport' in props) {\n      this.autoResizeViewport = props.autoResizeViewport;\n    }\n\n    if ('autoResizeDrawingBuffer' in props) {\n      this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n    }\n\n    if ('useDevicePixels' in props) {\n      this.useDevicePixels = props.useDevicePixels;\n    }\n\n    return this;\n  }\n\n  start(opts = {}) {\n    if (this._running) {\n      return this;\n    }\n\n    this._running = true;\n\n    const startPromise = this._getPageLoadPromise().then(() => {\n      if (!this._running || this._initialized) {\n        return null;\n      }\n\n      this._createWebGLContext(opts);\n\n      this._createFramebuffer();\n\n      this._startEventHandling();\n\n      this._initializeCallbackData();\n\n      this._updateCallbackData();\n\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._gpuTimeQuery = Query.isSupported(this.gl, ['timers']) ? new Query(this.gl) : null;\n      this._initialized = true;\n      return this.onInitialize(this.animationProps);\n    }).then(appContext => {\n      if (this._running) {\n        this._addCallbackData(appContext || {});\n\n        if (appContext !== false) {\n          this._startLoop();\n        }\n      }\n    });\n\n    if (this.props.onError) {\n      startPromise.catch(this.props.onError);\n    }\n\n    return this;\n  }\n\n  redraw() {\n    if (this.isContextLost()) {\n      return this;\n    }\n\n    this._beginTimers();\n\n    this._setupFrame();\n\n    this._updateCallbackData();\n\n    this._renderFrame(this.animationProps);\n\n    this._clearNeedsRedraw();\n\n    if (this.offScreen && this.gl.commit) {\n      this.gl.commit();\n    }\n\n    if (this._resolveNextFrame) {\n      this._resolveNextFrame(this);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n    }\n\n    this._endTimers();\n\n    return this;\n  }\n\n  stop() {\n    if (this._running) {\n      this._finalizeCallbackData();\n\n      cancelAnimationFrame(this._animationFrameId);\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n      this._animationFrameId = null;\n      this._running = false;\n    }\n\n    return this;\n  }\n\n  attachTimeline(timeline) {\n    this.timeline = timeline;\n    return this.timeline;\n  }\n\n  detachTimeline() {\n    this.timeline = null;\n  }\n\n  waitForRender() {\n    this.setNeedsRedraw('waitForRender');\n\n    if (!this._nextFramePromise) {\n      this._nextFramePromise = new Promise(resolve => {\n        this._resolveNextFrame = resolve;\n      });\n    }\n\n    return this._nextFramePromise;\n  }\n\n  async toDataURL() {\n    this.setNeedsRedraw('toDataURL');\n    await this.waitForRender();\n    return this.gl.canvas.toDataURL();\n  }\n\n  isContextLost() {\n    return this.gl.isContextLost();\n  }\n\n  onCreateContext(...args) {\n    return this.props.onCreateContext(...args);\n  }\n\n  onInitialize(...args) {\n    return this.props.onInitialize(...args);\n  }\n\n  onRender(...args) {\n    return this.props.onRender(...args);\n  }\n\n  onFinalize(...args) {\n    return this.props.onFinalize(...args);\n  }\n\n  getHTMLControlValue(id, defaultValue = 1) {\n    const element = document.getElementById(id);\n    return element ? Number(element.value) : defaultValue;\n  }\n\n  setViewParameters() {\n    log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n    return this;\n  }\n\n  _startLoop() {\n    const renderFrame = () => {\n      if (!this._running) {\n        return;\n      }\n\n      this.redraw();\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    };\n\n    cancelAnimationFrame(this._animationFrameId);\n    this._animationFrameId = this._requestAnimationFrame(renderFrame);\n  }\n\n  _getPageLoadPromise() {\n    if (!this._pageLoadPromise) {\n      this._pageLoadPromise = isPage ? new Promise((resolve, reject) => {\n        if (isPage && document.readyState === 'complete') {\n          resolve(document);\n          return;\n        }\n\n        window.addEventListener('load', () => {\n          resolve(document);\n        });\n      }) : Promise.resolve({});\n    }\n\n    return this._pageLoadPromise;\n  }\n\n  _setDisplay(display) {\n    if (this.display) {\n      this.display.delete();\n      this.display.animationLoop = null;\n    }\n\n    if (display) {\n      display.animationLoop = this;\n    }\n\n    this.display = display;\n  }\n\n  _requestAnimationFrame(renderFrameCallback) {\n    if (this.display && this.display.requestAnimationFrame(renderFrameCallback)) {\n      return;\n    }\n\n    requestAnimationFrame(renderFrameCallback);\n  }\n\n  _renderFrame(...args) {\n    if (this.display) {\n      this.display._renderFrame(...args);\n\n      return;\n    }\n\n    this.onRender(...args);\n  }\n\n  _clearNeedsRedraw() {\n    this.needsRedraw = null;\n  }\n\n  _setupFrame() {\n    this._resizeCanvasDrawingBuffer();\n\n    this._resizeViewport();\n\n    this._resizeFramebuffer();\n  }\n\n  _initializeCallbackData() {\n    this.animationProps = {\n      gl: this.gl,\n      stop: this.stop,\n      canvas: this.gl.canvas,\n      framebuffer: this.framebuffer,\n      useDevicePixels: this.useDevicePixels,\n      needsRedraw: null,\n      startTime: Date.now(),\n      engineTime: 0,\n      tick: 0,\n      tock: 0,\n      time: 0,\n      _timeline: this.timeline,\n      _loop: this,\n      _animationLoop: this,\n      _mousePosition: null\n    };\n  }\n\n  _updateCallbackData() {\n    const {\n      width,\n      height,\n      aspect\n    } = this._getSizeAndAspect();\n\n    if (width !== this.animationProps.width || height !== this.animationProps.height) {\n      this.setNeedsRedraw('drawing buffer resized');\n    }\n\n    if (aspect !== this.animationProps.aspect) {\n      this.setNeedsRedraw('drawing buffer aspect changed');\n    }\n\n    this.animationProps.width = width;\n    this.animationProps.height = height;\n    this.animationProps.aspect = aspect;\n    this.animationProps.needsRedraw = this.needsRedraw;\n    this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n    if (this.timeline) {\n      this.timeline.update(this.animationProps.engineTime);\n    }\n\n    this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n    this.animationProps.tock++;\n    this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n    this.animationProps._offScreen = this.offScreen;\n  }\n\n  _finalizeCallbackData() {\n    this.onFinalize(this.animationProps);\n  }\n\n  _addCallbackData(appContext) {\n    if (typeof appContext === 'object' && appContext !== null) {\n      this.animationProps = Object.assign({}, this.animationProps, appContext);\n    }\n  }\n\n  _createWebGLContext(opts) {\n    this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n    opts = Object.assign({}, opts, this.props.glOptions);\n    this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n    if (!isWebGL(this.gl)) {\n      throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n    }\n\n    resetParameters(this.gl);\n\n    this._createInfoDiv();\n  }\n\n  _createInfoDiv() {\n    if (this.gl.canvas && this.props.onAddHTML) {\n      const wrapperDiv = document.createElement('div');\n      document.body.appendChild(wrapperDiv);\n      wrapperDiv.style.position = 'relative';\n      const div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '10px';\n      div.style.bottom = '10px';\n      div.style.width = '300px';\n      div.style.background = 'white';\n      wrapperDiv.appendChild(this.gl.canvas);\n      wrapperDiv.appendChild(div);\n      const html = this.props.onAddHTML(div);\n\n      if (html) {\n        div.innerHTML = html;\n      }\n    }\n  }\n\n  _getSizeAndAspect() {\n    const width = this.gl.drawingBufferWidth;\n    const height = this.gl.drawingBufferHeight;\n    let aspect = 1;\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas && canvas.clientHeight) {\n      aspect = canvas.clientWidth / canvas.clientHeight;\n    } else if (width > 0 && height > 0) {\n      aspect = width / height;\n    }\n\n    return {\n      width,\n      height,\n      aspect\n    };\n  }\n\n  _resizeViewport() {\n    if (this.autoResizeViewport) {\n      this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n    }\n  }\n\n  _resizeCanvasDrawingBuffer() {\n    if (this.autoResizeDrawingBuffer) {\n      resizeGLContext(this.gl, {\n        useDevicePixels: this.useDevicePixels\n      });\n    }\n  }\n\n  _createFramebuffer() {\n    if (this.props.createFramebuffer) {\n      this.framebuffer = new Framebuffer(this.gl);\n    }\n  }\n\n  _resizeFramebuffer() {\n    if (this.framebuffer) {\n      this.framebuffer.resize({\n        width: this.gl.drawingBufferWidth,\n        height: this.gl.drawingBufferHeight\n      });\n    }\n  }\n\n  _beginTimers() {\n    this.frameRate.timeEnd();\n    this.frameRate.timeStart();\n\n    if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n      this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n    }\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.beginTimeElapsedQuery();\n    }\n\n    this.cpuTime.timeStart();\n  }\n\n  _endTimers() {\n    this.cpuTime.timeEnd();\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.end();\n    }\n  }\n\n  _startEventHandling() {\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas) {\n      canvas.addEventListener('mousemove', this._onMousemove);\n      canvas.addEventListener('mouseleave', this._onMouseleave);\n    }\n  }\n\n  _onMousemove(e) {\n    this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n  }\n\n  _onMouseleave(e) {\n    this.animationProps._mousePosition = null;\n  }\n\n}\n//# sourceMappingURL=animation-loop.js.map","import LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport Effect from './effect';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport deckGlobal from './init';\nimport { getBrowser } from 'probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from 'probe.gl';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nconst getCursor = ({\n  isDragging\n}) => isDragging ? 'grabbing' : 'grab';\n\nfunction getPropTypes(PropTypes) {\n  return {\n    id: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    layers: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    layerFilter: PropTypes.func,\n    views: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    viewState: PropTypes.object,\n    effects: PropTypes.arrayOf(PropTypes.instanceOf(Effect)),\n    controller: PropTypes.oneOfType([PropTypes.func, PropTypes.bool, PropTypes.object]),\n    gl: PropTypes.object,\n    glOptions: PropTypes.object,\n    parameters: PropTypes.object,\n    pickingRadius: PropTypes.number,\n    useDevicePixels: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n    touchAction: PropTypes.string,\n    eventRecognizerOptions: PropTypes.object,\n    onWebGLInitialized: PropTypes.func,\n    onResize: PropTypes.func,\n    onViewStateChange: PropTypes.func,\n    onInteractionStateChange: PropTypes.func,\n    onBeforeRender: PropTypes.func,\n    onAfterRender: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    debug: PropTypes.bool,\n    drawPickingColors: PropTypes.bool,\n    _framebuffer: PropTypes.object,\n    _animate: PropTypes.bool,\n    _pickable: PropTypes.bool,\n    _typedArrayManagerProps: PropTypes.object\n  };\n}\n\nconst defaultProps = {\n  id: '',\n  width: '100%',\n  height: '100%',\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  gl: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  eventRecognizerOptions: {},\n  _framebuffer: null,\n  _animate: false,\n  _pickable: true,\n  _typedArrayManagerProps: {},\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onInteractionStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: (error, layer) => log.error(error)(),\n  _onMetrics: null,\n  getCursor,\n  debug: false,\n  drawPickingColors: false\n};\nexport default class Deck {\n  constructor(props) {\n    props = { ...defaultProps,\n      ...props\n    };\n    this.props = {};\n    this.width = 0;\n    this.height = 0;\n    this.viewManager = null;\n    this.layerManager = null;\n    this.effectManager = null;\n    this.deckRenderer = null;\n    this.deckPicker = null;\n    this._needsRedraw = true;\n    this._pickRequest = {};\n    this._lastPointerDownInfo = null;\n    this.viewState = null;\n    this.interactiveState = {\n      isHovering: false,\n      isDragging: false\n    };\n    this._onEvent = this._onEvent.bind(this);\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 support will be deprecated in v8.0')();\n    }\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n\n    if (props._typedArrayManagerProps) {\n      typedArrayManager.setProps(props._typedArrayManagerProps);\n    }\n\n    this.animationLoop.start();\n  }\n\n  finalize() {\n    this.animationLoop.stop();\n    this.animationLoop = null;\n    this._lastPointerDownInfo = null;\n\n    if (this.layerManager) {\n      this.layerManager.finalize();\n      this.layerManager = null;\n      this.viewManager.finalize();\n      this.viewManager = null;\n      this.effectManager.finalize();\n      this.effectManager = null;\n      this.deckRenderer.finalize();\n      this.deckRenderer = null;\n      this.deckPicker.finalize();\n      this.deckPicker = null;\n      this.eventManager.destroy();\n      this.eventManager = null;\n      this.tooltip.remove();\n      this.tooltip = null;\n    }\n\n    if (!this.props.canvas && !this.props.gl && this.canvas) {\n      this.canvas.parentElement.removeChild(this.canvas);\n      this.canvas = null;\n    }\n  }\n\n  setProps(props) {\n    this.stats.get('setProps Time').timeStart();\n\n    if ('onLayerHover' in props) {\n      log.removed('onLayerHover', 'onHover')();\n    }\n\n    if ('onLayerClick' in props) {\n      log.removed('onLayerClick', 'onClick')();\n    }\n\n    if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n      this.viewState = props.initialViewState;\n    }\n\n    Object.assign(this.props, props);\n\n    this._setCanvasSize(this.props);\n\n    const resolvedProps = Object.create(this.props);\n    Object.assign(resolvedProps, {\n      views: this._getViews(),\n      width: this.width,\n      height: this.height,\n      viewState: this._getViewState()\n    });\n    this.animationLoop.setProps(resolvedProps);\n\n    if (this.layerManager) {\n      this.viewManager.setProps(resolvedProps);\n      this.layerManager.activateViewport(this.getViewports()[0]);\n      this.layerManager.setProps(resolvedProps);\n      this.effectManager.setProps(resolvedProps);\n      this.deckRenderer.setProps(resolvedProps);\n      this.deckPicker.setProps(resolvedProps);\n    }\n\n    this.stats.get('setProps Time').timeEnd();\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    if (this.props._animate) {\n      return 'Deck._animate';\n    }\n\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    const viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n    const layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n    const effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n    const deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n    redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n    return redraw;\n  }\n\n  redraw(force) {\n    if (!this.layerManager) {\n      return;\n    }\n\n    const redrawReason = force || this.needsRedraw({\n      clearRedrawFlags: true\n    });\n\n    if (!redrawReason) {\n      return;\n    }\n\n    this.stats.get('Redraw Count').incrementCount();\n\n    if (this.props._customRender) {\n      this.props._customRender(redrawReason);\n    } else {\n      this._drawLayers(redrawReason);\n    }\n  }\n\n  getViews() {\n    return this.viewManager.views;\n  }\n\n  getViewports(rect) {\n    return this.viewManager.getViewports(rect);\n  }\n\n  pickObject(opts) {\n    const infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n    return infos.length ? infos[0] : null;\n  }\n\n  pickMultipleObjects(opts) {\n    opts.depth = opts.depth || 10;\n    return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n  }\n\n  pickObjects(opts) {\n    return this._pick('pickObjects', 'pickObjects Time', opts);\n  }\n\n  _addResources(resources, forceUpdate = false) {\n    for (const id in resources) {\n      this.layerManager.resourceManager.add({\n        resourceId: id,\n        data: resources[id],\n        forceUpdate\n      });\n    }\n  }\n\n  _removeResources(resourceIds) {\n    for (const id of resourceIds) {\n      this.layerManager.resourceManager.remove(id);\n    }\n  }\n\n  _pick(method, statKey, opts) {\n    const {\n      stats\n    } = this;\n    stats.get('Pick Count').incrementCount();\n    stats.get(statKey).timeStart();\n    const infos = this.deckPicker[method]({\n      layers: this.layerManager.getLayers(opts),\n      views: this.viewManager.getViews(),\n      viewports: this.getViewports(opts),\n      onViewportActive: this.layerManager.activateViewport,\n      ...opts\n    });\n    stats.get(statKey).timeEnd();\n    return infos;\n  }\n\n  _createCanvas(props) {\n    let canvas = props.canvas;\n\n    if (typeof canvas === 'string') {\n      canvas = document.getElementById(canvas);\n      assert(canvas);\n    }\n\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.id = props.id || 'deckgl-overlay';\n      const parent = props.parent || document.body;\n      parent.appendChild(canvas);\n    }\n\n    Object.assign(canvas.style, props.style);\n    return canvas;\n  }\n\n  _setCanvasSize(props) {\n    if (!this.canvas) {\n      return;\n    }\n\n    let {\n      width,\n      height\n    } = props;\n\n    if (width || width === 0) {\n      width = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n      this.canvas.style.width = width;\n    }\n\n    if (height || height === 0) {\n      height = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n      this.canvas.style.position = 'absolute';\n      this.canvas.style.height = height;\n    }\n  }\n\n  _updateCanvasSize() {\n    if (this._checkForCanvasSizeChange()) {\n      const {\n        width,\n        height\n      } = this;\n      this.viewManager.setProps({\n        width,\n        height\n      });\n      this.props.onResize({\n        width: this.width,\n        height: this.height\n      });\n    }\n  }\n\n  _checkForCanvasSizeChange() {\n    const {\n      canvas\n    } = this;\n\n    if (!canvas) {\n      return false;\n    }\n\n    const newWidth = canvas.clientWidth || canvas.width;\n    const newHeight = canvas.clientHeight || canvas.height;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      this.width = newWidth;\n      this.height = newHeight;\n      return true;\n    }\n\n    return false;\n  }\n\n  _createAnimationLoop(props) {\n    const {\n      width,\n      height,\n      gl,\n      glOptions,\n      debug,\n      onError,\n      onBeforeRender,\n      onAfterRender,\n      useDevicePixels,\n      autoResizeDrawingBuffer\n    } = props;\n    return new AnimationLoop({\n      width,\n      height,\n      useDevicePixels,\n      autoResizeDrawingBuffer,\n      autoResizeViewport: false,\n      gl,\n      onCreateContext: opts => createGLContext({ ...glOptions,\n        ...opts,\n        canvas: this.canvas,\n        debug,\n        onContextLost: () => this._onContextLost()\n      }),\n      onInitialize: context => this._setGLContext(context.gl),\n      onRender: this._onRenderFrame.bind(this),\n      onBeforeRender,\n      onAfterRender,\n      onError\n    });\n  }\n\n  _getViewState() {\n    return this.props.viewState || this.viewState;\n  }\n\n  _getViews() {\n    let views = this.props.views || [new MapView({\n      id: 'default-view'\n    })];\n    views = Array.isArray(views) ? views : [views];\n\n    if (views.length && this.props.controller) {\n      views[0].props.controller = this.props.controller;\n    }\n\n    return views;\n  }\n\n  _onContextLost() {\n    const {\n      onError\n    } = this.props;\n\n    if (this.animationLoop && onError) {\n      onError(new Error(\"WebGL context is lost\"));\n    }\n  }\n\n  _onPointerMove(event) {\n    const {\n      _pickRequest\n    } = this;\n\n    if (event.type === 'pointerleave') {\n      _pickRequest.x = -1;\n      _pickRequest.y = -1;\n      _pickRequest.radius = 0;\n    } else if (event.leftButton || event.rightButton) {\n      return;\n    } else {\n      const pos = event.offsetCenter;\n\n      if (!pos) {\n        return;\n      }\n\n      _pickRequest.x = pos.x;\n      _pickRequest.y = pos.y;\n      _pickRequest.radius = this.props.pickingRadius;\n    }\n\n    if (this.layerManager) {\n      this.layerManager.context.mousePosition = {\n        x: _pickRequest.x,\n        y: _pickRequest.y\n      };\n    }\n\n    _pickRequest.event = event;\n    _pickRequest.mode = 'hover';\n  }\n\n  _pickAndCallback() {\n    const {\n      _pickRequest\n    } = this;\n\n    if (_pickRequest.event) {\n      const {\n        result,\n        emptyInfo\n      } = this._pick('pickObject', 'pickObject Time', _pickRequest);\n\n      this.interactiveState.isHovering = result.length > 0;\n      let pickedInfo = emptyInfo;\n      let handled = false;\n\n      for (const info of result) {\n        pickedInfo = info;\n        handled = info.layer.onHover(info, _pickRequest.event);\n      }\n\n      if (!handled && this.props.onHover) {\n        this.props.onHover(pickedInfo, _pickRequest.event);\n      }\n\n      if (this.props.getTooltip) {\n        const displayInfo = this.props.getTooltip(pickedInfo);\n        this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n      }\n\n      _pickRequest.event = null;\n    }\n  }\n\n  _updateCursor() {\n    const container = this.props.parent || this.canvas;\n\n    if (container) {\n      container.style.cursor = this.props.getCursor(this.interactiveState);\n    }\n  }\n\n  _setGLContext(gl) {\n    if (this.layerManager) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.canvas = gl.canvas;\n      instrumentGLContext(gl, {\n        enable: true,\n        copyState: true\n      });\n    }\n\n    this.tooltip = new Tooltip(this.canvas);\n    setParameters(gl, {\n      blend: true,\n      blendFunc: [770, 771, 1, 771],\n      polygonOffsetFill: true,\n      depthTest: true,\n      depthFunc: 515\n    });\n    this.props.onWebGLInitialized(gl);\n    const timeline = new Timeline();\n    timeline.play();\n    this.animationLoop.attachTimeline(timeline);\n    this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n      touchAction: this.props.touchAction,\n      recognizerOptions: this.props.eventRecognizerOptions,\n      events: {\n        pointerdown: this._onPointerDown,\n        pointermove: this._onPointerMove,\n        pointerleave: this._onPointerMove\n      }\n    });\n\n    for (const eventType in EVENTS) {\n      this.eventManager.on(eventType, this._onEvent);\n    }\n\n    this.viewManager = new ViewManager({\n      timeline,\n      eventManager: this.eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this),\n      onInteractionStateChange: this._onInteractionStateChange.bind(this),\n      views: this._getViews(),\n      viewState: this._getViewState(),\n      width: this.width,\n      height: this.height\n    });\n    const viewport = this.viewManager.getViewports()[0];\n    this.layerManager = new LayerManager(gl, {\n      deck: this,\n      stats: this.stats,\n      viewport,\n      timeline\n    });\n    this.effectManager = new EffectManager();\n    this.deckRenderer = new DeckRenderer(gl);\n    this.deckPicker = new DeckPicker(gl);\n    this.setProps(this.props);\n\n    this._updateCanvasSize();\n\n    this.props.onLoad();\n  }\n\n  _drawLayers(redrawReason, renderOptions) {\n    const {\n      gl\n    } = this.layerManager.context;\n    setParameters(gl, this.props.parameters);\n    this.props.onBeforeRender({\n      gl\n    });\n    this.deckRenderer.renderLayers({\n      target: this.props._framebuffer,\n      layers: this.layerManager.getLayers(),\n      viewports: this.viewManager.getViewports(),\n      onViewportActive: this.layerManager.activateViewport,\n      views: this.viewManager.getViews(),\n      pass: 'screen',\n      redrawReason,\n      effects: this.effectManager.getEffects(),\n      ...renderOptions\n    });\n    this.props.onAfterRender({\n      gl\n    });\n  }\n\n  _onRenderFrame(animationProps) {\n    this._getFrameStats();\n\n    if (this._metricsCounter++ % 60 === 0) {\n      this._getMetrics();\n\n      this.stats.reset();\n      log.table(4, this.metrics)();\n\n      if (this.props._onMetrics) {\n        this.props._onMetrics(this.metrics);\n      }\n    }\n\n    this._updateCanvasSize();\n\n    this._updateCursor();\n\n    if (this.tooltip.isVisible && this.viewManager.needsRedraw()) {\n      this.tooltip.setTooltip(null);\n    }\n\n    this.layerManager.updateLayers();\n\n    this._pickAndCallback();\n\n    this.redraw(false);\n\n    if (this.viewManager) {\n      this.viewManager.updateViewStates();\n    }\n  }\n\n  _onViewStateChange(params) {\n    const viewState = this.props.onViewStateChange(params) || params.viewState;\n\n    if (this.viewState) {\n      this.viewState = { ...this.viewState,\n        [params.viewId]: viewState\n      };\n\n      if (!this.props.viewState) {\n        if (this.viewManager) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }\n\n  _onInteractionStateChange(interactionState) {\n    this.interactiveState.isDragging = interactionState.isDragging;\n    this.props.onInteractionStateChange(interactionState);\n  }\n\n  _onEvent(event) {\n    const eventOptions = EVENTS[event.type];\n    const pos = event.offsetCenter;\n\n    if (!eventOptions || !pos) {\n      return;\n    }\n\n    const layers = this.layerManager.getLayers();\n    const info = this.deckPicker.getLastPickedObject({\n      x: pos.x,\n      y: pos.y,\n      layers,\n      viewports: this.getViewports(pos)\n    }, this._lastPointerDownInfo);\n    const {\n      layer\n    } = info;\n    const layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n    const rootHandler = this.props[eventOptions.handler];\n    let handled = false;\n\n    if (layerHandler) {\n      handled = layerHandler.call(layer, info, event);\n    }\n\n    if (!handled && rootHandler) {\n      rootHandler(info, event);\n    }\n  }\n\n  _onPointerDown(event) {\n    const pos = event.offsetCenter;\n    this._lastPointerDownInfo = this.pickObject({\n      x: pos.x,\n      y: pos.y,\n      radius: this.props.pickingRadius\n    });\n  }\n\n  _getFrameStats() {\n    const {\n      stats\n    } = this;\n    stats.get('frameRate').timeEnd();\n    stats.get('frameRate').timeStart();\n    const animationLoopStats = this.animationLoop.stats;\n    stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n    stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n  }\n\n  _getMetrics() {\n    const {\n      metrics,\n      stats\n    } = this;\n    metrics.fps = stats.get('frameRate').getHz();\n    metrics.setPropsTime = stats.get('setProps Time').time;\n    metrics.updateAttributesTime = stats.get('Update Attributes').time;\n    metrics.framesRedrawn = stats.get('Redraw Count').count;\n    metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n    metrics.pickCount = stats.get('Pick Count').count;\n    metrics.gpuTime = stats.get('GPU Time').time;\n    metrics.cpuTime = stats.get('CPU Time').time;\n    metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n    metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n    const memoryStats = lumaStats.get('Memory Usage');\n    metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n    metrics.textureMemory = memoryStats.get('Texture Memory').count;\n    metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n    metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n  }\n\n}\nDeck.getPropTypes = getPropTypes;\nDeck.defaultProps = defaultProps;\nDeck.VERSION = deckGlobal.VERSION;\n//# sourceMappingURL=deck.js.map","import { useEffect, useLayoutEffect } from 'react';\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n//# sourceMappingURL=use-isomorphic-layout-effect.js.map","export function inheritsFrom(Type, ParentType) {\n  while (Type) {\n    if (Type === ParentType) {\n      return true;\n    }\n\n    Type = Object.getPrototypeOf(Type);\n  }\n\n  return false;\n}\n//# sourceMappingURL=inherits-from.js.map","import React, { createElement } from 'react';\nimport { inheritsFrom } from './inherits-from';\nimport { Layer, View } from '@deck.gl/core';\n\nfunction wrapInView(node) {\n  if (!node) {\n    return node;\n  }\n\n  if (typeof node === 'function') {\n    return createElement(View, {}, node);\n  }\n\n  if (Array.isArray(node)) {\n    return node.map(wrapInView);\n  }\n\n  if (node.type === React.Fragment) {\n    return wrapInView(node.props.children);\n  }\n\n  if (inheritsFrom(node.type, View)) {\n    return node;\n  }\n\n  return node;\n}\n\nexport default function extractJSXLayers({\n  children,\n  layers,\n  views\n}) {\n  const reactChildren = [];\n  const jsxLayers = [];\n  const jsxViews = {};\n  React.Children.forEach(wrapInView(children), reactElement => {\n    if (reactElement) {\n      const ElementType = reactElement.type;\n\n      if (inheritsFrom(ElementType, Layer)) {\n        const layer = createLayer(ElementType, reactElement.props);\n        jsxLayers.push(layer);\n      } else {\n        reactChildren.push(reactElement);\n      }\n\n      if (ElementType !== View && inheritsFrom(ElementType, View) && reactElement.props.id) {\n        const view = new ElementType(reactElement.props);\n        jsxViews[view.id] = view;\n      }\n    }\n  });\n\n  if (Object.keys(jsxViews).length > 0) {\n    if (Array.isArray(views)) {\n      views.forEach(view => {\n        jsxViews[view.id] = view;\n      });\n    } else if (views) {\n      jsxViews[views.id] = views;\n    }\n\n    views = Object.values(jsxViews);\n  }\n\n  layers = jsxLayers.length > 0 ? [...jsxLayers, ...layers] : layers;\n  return {\n    layers,\n    children: reactChildren,\n    views\n  };\n}\n\nfunction createLayer(LayerType, reactProps) {\n  const props = {};\n  const defaultProps = LayerType.defaultProps || {};\n\n  for (const key in reactProps) {\n    if (defaultProps[key] !== reactProps[key]) {\n      props[key] = reactProps[key];\n    }\n  }\n\n  return new LayerType(props);\n}\n//# sourceMappingURL=extract-jsx-layers.js.map","import { cloneElement } from 'react';\nconst MAP_STYLE = {\n  position: 'absolute',\n  zIndex: -1\n};\nexport default function evaluateChildren(children, childProps) {\n  if (!children) {\n    return children;\n  }\n\n  if (typeof children === 'function') {\n    return children(childProps);\n  }\n\n  if (Array.isArray(children)) {\n    return children.map(child => evaluateChildren(child, childProps));\n  }\n\n  if (isReactMap(children)) {\n    childProps.style = MAP_STYLE;\n    return cloneElement(children, childProps);\n  }\n\n  if (needsDeckGLViewProps(children)) {\n    return cloneElement(children, childProps);\n  }\n\n  return children;\n}\n\nfunction isReactMap(child) {\n  const componentClass = child && child.type;\n  const componentProps = componentClass && componentClass.defaultProps;\n  return componentProps && componentProps.mapStyle;\n}\n\nfunction needsDeckGLViewProps(child) {\n  const componentClass = child && child.type;\n  return componentClass && componentClass.deckGLViewProps;\n}\n//# sourceMappingURL=evaluate-children.js.map","const CANVAS_ONLY_STYLES = {\n  mixBlendMode: null\n};\nexport default function extractStyles({\n  width,\n  height,\n  style\n}) {\n  const containerStyle = {\n    position: 'absolute',\n    zIndex: 0,\n    left: 0,\n    top: 0,\n    width,\n    height\n  };\n  const canvasStyle = {\n    left: 0,\n    top: 0\n  };\n\n  if (style) {\n    for (const key in style) {\n      if (key in CANVAS_ONLY_STYLES) {\n        canvasStyle[key] = style[key];\n      } else {\n        containerStyle[key] = style[key];\n      }\n    }\n  }\n\n  return {\n    containerStyle,\n    canvasStyle\n  };\n}\n//# sourceMappingURL=extract-styles.js.map","import { createElement, useRef, useState, useMemo, useEffect, useImperativeHandle, forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Deck } from '@deck.gl/core';\nimport useIsomorphicLayoutEffect from './utils/use-isomorphic-layout-effect';\nimport extractJSXLayers from './utils/extract-jsx-layers';\nimport positionChildrenUnderViews from './utils/position-children-under-views';\nimport extractStyles from './utils/extract-styles';\n\nfunction getRefHandles(thisRef) {\n  const handles = {\n    pickObject: opts => thisRef.deck.pickObject(opts),\n    pickMultipleObjects: opts => thisRef.deck.pickMultipleObjects(opts),\n    pickObjects: opts => thisRef.deck.pickObjects(opts)\n  };\n  Object.defineProperty(handles, 'deck', {\n    get: () => thisRef.deck\n  });\n  return handles;\n}\n\nfunction redrawDeck(thisRef) {\n  if (thisRef.redrawReason) {\n    thisRef.deck._drawLayers(thisRef.redrawReason);\n\n    thisRef.redrawReason = null;\n  }\n}\n\nfunction createDeckInstance(thisRef, props) {\n  const DeckClass = props.Deck || Deck;\n  const deck = new DeckClass({ ...props,\n    style: null,\n    width: '100%',\n    height: '100%',\n    _customRender: redrawReason => {\n      thisRef.redrawReason = redrawReason;\n      const viewports = deck.viewManager.getViewports();\n\n      if (thisRef.lastRenderedViewports !== viewports) {\n        thisRef.forceUpdate(v => v + 1);\n      } else {\n        redrawDeck(thisRef);\n      }\n    }\n  });\n  return deck;\n}\n\nconst DeckGL = forwardRef((props, ref) => {\n  const _thisRef = useRef({});\n\n  const thisRef = _thisRef.current;\n  const [version, setVersion] = useState(0);\n  thisRef.forceUpdate = setVersion;\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n  const jsxProps = useMemo(() => extractJSXLayers(props), [props.layers, props.views, props.children]);\n  let inRender = true;\n\n  const handleViewStateChange = params => {\n    if (inRender && props.viewState) {\n      thisRef.viewStateUpdateRequested = params;\n      return null;\n    }\n\n    thisRef.viewStateUpdateRequested = null;\n    return props.onViewStateChange(params);\n  };\n\n  const handleInteractionStateChange = params => {\n    if (inRender) {\n      thisRef.interactionStateUpdateRequested = params;\n    } else {\n      thisRef.interactionStateUpdateRequested = null;\n      props.onInteractionStateChange(params);\n    }\n  };\n\n  const deckProps = useMemo(() => {\n    const forwardProps = { ...props,\n      style: null,\n      width: '100%',\n      height: '100%',\n      layers: jsxProps.layers,\n      views: jsxProps.views,\n      onViewStateChange: handleViewStateChange,\n      onInteractionStateChange: handleInteractionStateChange\n    };\n\n    if (thisRef.deck) {\n      thisRef.deck.setProps(forwardProps);\n    }\n\n    return forwardProps;\n  }, [props]);\n  useEffect(() => {\n    thisRef.deck = createDeckInstance(thisRef, { ...deckProps,\n      parent: containerRef.current,\n      canvas: canvasRef.current\n    });\n    return () => thisRef.deck.finalize();\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    redrawDeck(thisRef);\n    const {\n      viewStateUpdateRequested,\n      interactionStateUpdateRequested\n    } = thisRef;\n\n    if (viewStateUpdateRequested) {\n      handleViewStateChange(viewStateUpdateRequested);\n    }\n\n    if (interactionStateUpdateRequested) {\n      handleInteractionStateChange(interactionStateUpdateRequested);\n    }\n  });\n  useImperativeHandle(ref, () => getRefHandles(thisRef), []);\n  const {\n    viewManager\n  } = thisRef.deck || {};\n  const currentViewports = viewManager && viewManager.getViewports();\n  const {\n    ContextProvider,\n    width,\n    height,\n    id,\n    style\n  } = props;\n  const {\n    containerStyle,\n    canvasStyle\n  } = useMemo(() => extractStyles({\n    width,\n    height,\n    style\n  }), [width, height, style]);\n\n  if (!thisRef.viewStateUpdateRequested && thisRef.lastRenderedViewports === currentViewports || thisRef.version !== version) {\n      thisRef.lastRenderedViewports = currentViewports;\n      thisRef.version = version;\n      const childrenUnderViews = positionChildrenUnderViews({\n        children: jsxProps.children,\n        deck: thisRef.deck,\n        ContextProvider\n      });\n      const canvas = createElement('canvas', {\n        key: 'canvas',\n        id: id || 'deckgl-overlay',\n        ref: canvasRef,\n        style: canvasStyle\n      });\n      thisRef.control = createElement('div', {\n        id: \"\".concat(id || 'deckgl', \"-wrapper\"),\n        ref: containerRef,\n        style: containerStyle\n      }, [canvas, childrenUnderViews]);\n    }\n\n  inRender = false;\n  return thisRef.control;\n});\nDeckGL.propTypes = Deck.getPropTypes(PropTypes);\nDeckGL.defaultProps = Deck.defaultProps;\nexport default DeckGL;\n//# sourceMappingURL=deckgl.js.map","import { createElement } from 'react';\nimport { View } from '@deck.gl/core';\nimport { inheritsFrom } from './inherits-from';\nimport evaluateChildren from './evaluate-children';\nexport default function positionChildrenUnderViews({\n  children,\n  deck,\n  ContextProvider\n}) {\n  const {\n    viewManager\n  } = deck || {};\n\n  if (!viewManager || !viewManager.views.length) {\n    return [];\n  }\n\n  const views = {};\n  const defaultViewId = viewManager.views[0].id;\n\n  for (const child of children) {\n    let viewId = defaultViewId;\n    let viewChildren = child;\n\n    if (inheritsFrom(child.type, View)) {\n      viewId = child.props.id || defaultViewId;\n      viewChildren = child.props.children;\n    }\n\n    const viewport = viewManager.getViewport(viewId);\n    const viewState = viewManager.getViewState(viewId);\n\n    if (viewport) {\n      const {\n        x,\n        y,\n        width,\n        height\n      } = viewport;\n      viewChildren = evaluateChildren(viewChildren, {\n        x,\n        y,\n        width,\n        height,\n        viewport,\n        viewState\n      });\n\n      if (!views[viewId]) {\n        views[viewId] = {\n          viewport,\n          children: []\n        };\n      }\n\n      views[viewId].children.push(viewChildren);\n    }\n  }\n\n  return Object.keys(views).map(viewId => {\n    const {\n      viewport,\n      children: viewChildren\n    } = views[viewId];\n    const {\n      x,\n      y,\n      width,\n      height\n    } = viewport;\n    const style = {\n      position: 'absolute',\n      left: x,\n      top: y,\n      width,\n      height\n    };\n    const key = \"view-\".concat(viewId);\n    const viewElement = createElement('div', {\n      key,\n      id: key,\n      style\n    }, ...viewChildren);\n\n    if (ContextProvider) {\n      const contextValue = {\n        viewport,\n        container: deck.canvas.offsetParent,\n        eventManager: deck.eventManager,\n        onViewStateChange: params => {\n          params.viewId = viewId;\n\n          deck._onViewStateChange(params);\n        }\n      };\n      return createElement(ContextProvider, {\n        key,\n        value: contextValue\n      }, viewElement);\n    }\n\n    return viewElement;\n  });\n}\n//# sourceMappingURL=position-children-under-views.js.map","const isBoolean = x => typeof x === 'boolean';\n\nconst isFunction = x => typeof x === 'function';\n\nexport const isObject = x => x !== null && typeof x === 'object';\nexport const isPureObject = x => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = x => isObject(x) && isFunction(x.then);\nexport const isIterable = x => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = x => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = x => x && isFunction(x.next);\nexport const isResponse = x => typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\nexport const isFile = x => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = x => typeof Blob !== 'undefined' && x instanceof Blob;\nexport const isWritableDOMStream = x => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = x => typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\nexport const isBuffer = x => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableNodeStream = x => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = x => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = x => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = x => isWritableDOMStream(x) || isWritableNodeStream(x);\n//# sourceMappingURL=is-type.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { assert } from '../env-utils/assert';\nconst workerURLCache = new Map();\nexport function getLoadableWorkerURL(props) {\n  assert(props.source && !props.url || !props.source && props.url);\n  let workerURL = workerURLCache.get(props.source || props.url);\n\n  if (!workerURL) {\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\nfunction getLoadableWorkerURLFromURL(url) {\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\nfunction getLoadableWorkerURLFromSource(workerSource) {\n  const blob = new Blob([workerSource], {\n    type: 'application/javascript'\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction buildScriptSource(workerUrl) {\n  return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`;\n}\n//# sourceMappingURL=get-loadable-worker-url.js.map","export function getTransferList(object, recursive = true, transfers) {\n  const transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nimport { getLoadableWorkerURL } from '../worker-utils/get-loadable-worker-url';\nimport { getTransferList } from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport default class WorkerThread {\n  static isSupported() {\n    return typeof Worker !== 'undefined';\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"terminated\", false);\n\n    _defineProperty(this, \"worker\", void 0);\n\n    _defineProperty(this, \"onMessage\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadableURL\", '');\n\n    const {\n      name,\n      source,\n      url\n    } = props;\n    assert(source || url);\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n\n    this.onError = error => console.log(error);\n\n    this.worker = this._createBrowserWorker();\n  }\n\n  destroy() {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  postMessage(data, transferList) {\n    transferList = transferList || getTransferList(data);\n    this.worker.postMessage(data, transferList);\n  }\n\n  _getErrorFromErrorEvent(event) {\n    let message = 'Failed to load ';\n    message += `worker ${this.name}. `;\n\n    if (event.message) {\n      message += `${event.message} in `;\n    }\n\n    if (event.lineno) {\n      message += `:${event.lineno}:${event.colno}`;\n    }\n\n    return new Error(message);\n  }\n\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({\n      source: this.source,\n      url: this.url\n    });\n    const worker = new Worker(this._loadableURL, {\n      name: this.name\n    });\n\n    worker.onmessage = event => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n\n    worker.onerror = error => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n\n    worker.onmessageerror = event => console.error(event);\n\n    return worker;\n  }\n\n}\n//# sourceMappingURL=worker-thread.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nexport default class WorkerJob {\n  constructor(jobName, workerThread) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"workerThread\", void 0);\n\n    _defineProperty(this, \"isRunning\", void 0);\n\n    _defineProperty(this, \"result\", void 0);\n\n    _defineProperty(this, \"_resolve\", void 0);\n\n    _defineProperty(this, \"_reject\", void 0);\n\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.isRunning = true;\n\n    this._resolve = () => {};\n\n    this._reject = () => {};\n\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  postMessage(type, payload) {\n    this.workerThread.postMessage({\n      source: 'loaders.gl',\n      type,\n      payload\n    });\n  }\n\n  done(value) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._resolve(value);\n  }\n\n  error(error) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._reject(error);\n  }\n\n}\n//# sourceMappingURL=worker-job.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isMobile } from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\nexport default class WorkerPool {\n  constructor(props) {\n    _defineProperty(this, \"name\", 'unnamed');\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"maxConcurrency\", 1);\n\n    _defineProperty(this, \"maxMobileConcurrency\", 1);\n\n    _defineProperty(this, \"onDebug\", () => {});\n\n    _defineProperty(this, \"reuseWorkers\", true);\n\n    _defineProperty(this, \"props\", {});\n\n    _defineProperty(this, \"jobQueue\", []);\n\n    _defineProperty(this, \"idleQueue\", []);\n\n    _defineProperty(this, \"count\", 0);\n\n    _defineProperty(this, \"isDestroyed\", false);\n\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  destroy() {\n    this.idleQueue.forEach(worker => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n    const startPromise = new Promise(onStart => {\n      this.jobQueue.push({\n        name,\n        onMessage,\n        onError,\n        onStart\n      });\n      return this;\n    });\n\n    this._startQueuedJob();\n\n    return await startPromise;\n  }\n\n  async _startQueuedJob() {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n\n    if (!workerThread) {\n      return;\n    }\n\n    const queuedJob = this.jobQueue.shift();\n\n    if (queuedJob) {\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      workerThread.onMessage = data => queuedJob.onMessage(job, data.type, data.payload);\n\n      workerThread.onError = error => queuedJob.onError(job, error);\n\n      queuedJob.onStart(job);\n\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  returnWorkerToQueue(worker) {\n    const shouldDestroyWorker = this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob();\n    }\n  }\n\n  _getAvailableWorker() {\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = `${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;\n      return new WorkerThread({\n        name,\n        source: this.source,\n        url: this.url\n      });\n    }\n\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n\n}\n//# sourceMappingURL=worker-pool.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\nconst DEFAULT_PROPS = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  onDebug: () => {},\n  reuseWorkers: true\n};\nexport default class WorkerFarm {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  static getWorkerFarm(props = {}) {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n\n    WorkerFarm._workerFarm.setProps(props);\n\n    return WorkerFarm._workerFarm;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"workerPools\", new Map());\n\n    this.props = { ...DEFAULT_PROPS\n    };\n    this.setProps(props);\n    this.workerPools = new Map();\n  }\n\n  destroy() {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  getWorkerPool(options) {\n    const {\n      name,\n      source,\n      url\n    } = options;\n    let workerPool = this.workerPools.get(name);\n\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n\n}\n\n_defineProperty(WorkerFarm, \"_workerFarm\", void 0);\n//# sourceMappingURL=worker-farm.js.map","import { WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\nexport function canParseWithWorker(loader, options) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  return loader.worker && (options === null || options === void 0 ? void 0 : options.worker);\n}\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n  const name = loader.id;\n  const url = getWorkerURL(loader, options);\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({\n    name,\n    url\n  });\n  options = JSON.parse(JSON.stringify(options));\n  const job = await workerPool.startJob('process-on-worker', onMessage.bind(null, parseOnMainThread));\n  job.postMessage('process', {\n    input: data,\n    options\n  });\n  const result = await job.result;\n  return await result.result;\n}\n\nasync function onMessage(parseOnMainThread, job, type, payload) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(payload.error);\n      break;\n\n    case 'process':\n      const {\n        id,\n        input,\n        options\n      } = payload;\n\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {\n          id,\n          result\n        });\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {\n          id,\n          error: message\n        });\n      }\n\n      break;\n\n    default:\n      console.warn(`parse-with-worker unknown message ${type}`);\n  }\n}\n//# sourceMappingURL=parse-with-worker.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst NPM_TAG = 'latest';\nconst VERSION = typeof \"3.0.8\" !== 'undefined' ? \"3.0.8\" : NPM_TAG;\nexport function getWorkerName(worker) {\n  const warning = worker.version !== VERSION ? ` (worker-utils@${VERSION})` : '';\n  return `${worker.name}@${worker.version}${warning}`;\n}\nexport function getWorkerURL(worker, options = {}) {\n  const workerOptions = options[worker.id] || {};\n  const workerFile = `${worker.id}-worker.js`;\n  let url = workerOptions.workerUrl;\n\n  if (options._workerType === 'test') {\n    url = `modules/${worker.module}/dist/${workerFile}`;\n  }\n\n  if (!url) {\n    let version = worker.version;\n\n    if (version === 'latest') {\n      version = NPM_TAG;\n    }\n\n    const versionTag = version ? `@${version}` : '';\n    url = `https://unpkg.com/@loaders.gl/${worker.module}${versionTag}/dist/${workerFile}`;\n  }\n\n  assert(url);\n  return url;\n}\n//# sourceMappingURL=get-worker-url.js.map","import * as node from '../node/buffer-utils.node';\nexport function toArrayBuffer(data) {\n  if (node.toArrayBuffer) {\n    data = node.toArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers(...sources) {\n  const sourceArrays = sources.map(source2 => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n  const result = new Uint8Array(byteLength);\n  let offset = 0;\n\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  return result.buffer;\n}\nexport function concatenateTypedArrays(...typedArrays) {\n  const arrays = typedArrays;\n  const TypedArrayConstructor = arrays && arrays.length > 1 && arrays[0].constructor || null;\n\n  if (!TypedArrayConstructor) {\n    throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n\n  return result;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  const subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n  const {\n    chunkSize = DEFAULT_CHUNK_SIZE\n  } = options;\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-array-buffer-iterator.js.map","import { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream, options) {\n  return isBrowser ? makeBrowserStreamIterator(stream, options) : makeNodeStreamIterator(stream, options);\n}\n\nasync function* makeBrowserStreamIterator(stream, options) {\n  const reader = stream.getReader();\n  let nextBatchPromise;\n\n  try {\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n\n      if (options !== null && options !== void 0 && options._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n\n      const {\n        done,\n        value\n      } = await currentBatchPromise;\n\n      if (done) {\n        return;\n      }\n\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    reader.releaseLock();\n  }\n}\n\nasync function* makeNodeStreamIterator(stream, options) {\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk);\n  }\n}\n//# sourceMappingURL=make-stream-iterator.js.map","import { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterators/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nconst ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n    const byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data, loader, options);\n  }\n\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    data = makeIterator(data, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    return concatenateArrayBuffersAsync(data);\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    const body = await response.body;\n    return makeIterator(body, options);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data, options);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n  if (isReadableStream(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    return data.body;\n  }\n\n  const response = await makeResponse(data);\n  return response.body;\n}\n\nfunction getIterableFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return function* oneChunk() {\n      yield data.buffer;\n    }();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return function* oneChunk() {\n      yield data;\n    }();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import { makeStringIterator } from './make-string-iterator';\nimport { makeArrayBufferIterator } from './make-array-buffer-iterator';\nimport { makeBlobIterator } from './make-blob-iterator';\nimport { makeStreamIterator } from './make-stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data, options) {\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data, options);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    return makeStreamIterator(response.body, options);\n  }\n\n  throw new Error('makeIterator');\n}\n//# sourceMappingURL=make-iterator.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeStringIterator(string, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n\n  while (offset < string.length) {\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n    yield textEncoder.encode(chunk);\n  }\n}\n//# sourceMappingURL=make-string-iterator.js.map","const DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport async function* makeBlobIterator(blob, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n    offset = end;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-blob-iterator.js.map","import { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nexport async function forEach(iterator, visitor) {\n  while (true) {\n    const {\n      done,\n      value\n    } = await iterator.next();\n\n    if (done) {\n      iterator.return();\n      return;\n    }\n\n    const cancel = visitor(value);\n\n    if (cancel) {\n      return;\n    }\n  }\n}\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n  const arrayBuffers = [];\n\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n\n  return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n  const strings = [];\n\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n\n  return strings.join('');\n}\n//# sourceMappingURL=async-iteration.js.map","import { compareArrayBuffers } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { isBlob } from '../../javascript-utils/is-type';\nconst EXT_PATTERN = /\\.([^.]+)$/;\nexport async function selectLoader(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  let loader = selectLoaderSync(data, loaders, { ...options,\n    nothrow: true\n  }, context);\n\n  if (loader) {\n    return loader;\n  }\n\n  if (isBlob(data)) {\n    data = await data.slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\nexport function selectLoaderSync(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  let candidateLoaders = [];\n\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n\n  if (!(options !== null && options !== void 0 && options.ignoreRegisteredLoaders)) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  normalizeLoaders(candidateLoaders);\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction selectLoaderInternal(data, loaders, options, context) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  const testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  let loader = null;\n\n  if (options !== null && options !== void 0 && options.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.mimeType);\n  }\n\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  loader = loader || findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.fallbackMimeType);\n  return loader;\n}\n\nfunction validHTTPResponse(data) {\n  if (data instanceof Response) {\n    if (data.status === 204) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  let message = 'No valid loader found';\n\n  if (data) {\n    message += ` data: \"${getFirstCharacters(data)}\", contentType: \"${type}\"`;\n  }\n\n  if (url) {\n    message += ` url: ${url}`;\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    if (mimeType === `application/x.${loader.id}`) {\n      return loader;\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","import { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { parseWithWorker, canParseWithWorker } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaderContext, getLoadersFromContext } from '../loader-utils/loader-context';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport async function parse(data, loaders, options, context) {\n  assert(!context || typeof context === 'object');\n\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  data = await data;\n  options = options || {};\n  const {\n    url\n  } = getResourceUrlAndType(data);\n  const typedLoaders = loaders;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  const loader = await selectLoader(data, candidateLoaders, options);\n\n  if (!loader) {\n    return null;\n  }\n\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n  context = getLoaderContext({\n    url,\n    parse,\n    loaders: candidateLoaders\n  }, options, context);\n  return await parseWithLoader(loader, data, options, context);\n}\n\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  assert(!loader.parseSync);\n  throw new Error(`${loader.id} loader - no parser found and worker is disabled`);\n}\n//# sourceMappingURL=parse.js.map","import { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options, previousContext = null) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\nexport function getLoadersFromContext(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  let candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=loader-context.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION } from '../env-utils/version';\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n  assert(worker, 'no worker provided');\n  const workerVersion = worker.version;\n\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-worker-version.js.map","const DEFAULT_VERSION = 'beta';\nexport const VERSION = typeof \"3.0.8\" !== 'undefined' ? \"3.0.8\" : DEFAULT_VERSION;\n\nif (typeof \"3.0.8\" === 'undefined') {\n  console.error('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n}\n//# sourceMappingURL=version.js.map","import { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport async function load(url, loaders, options, context) {\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  const fetch = getFetchFunction(options);\n  let data = url;\n\n  if (typeof url === 'string') {\n    data = await fetch(url);\n  }\n\n  if (isBlob(url)) {\n    data = await fetch(url);\n  }\n\n  return await parse(data, loaders, options);\n}\n//# sourceMappingURL=load.js.map","import { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n\n    if (!loaderRegistry.find(registeredLoader => normalizedLoader === registeredLoader)) {\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  var _loader;\n\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.extensions);\n  return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n  var _loader2, _loader3;\n\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  let options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = { ...loader,\n      options: { ...loader.options,\n        ...options\n      }\n    };\n  }\n\n  if ((_loader2 = loader) !== null && _loader2 !== void 0 && _loader2.parseTextSync || (_loader3 = loader) !== null && _loader3 !== void 0 && _loader3.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","let pathPrefix = '';\nconst fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = `${pathPrefix}${filename}`;\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","import { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nexport async function fetchFile(url, options) {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n    let fetchOptions = options;\n\n    if (options !== null && options !== void 0 && options.fetch && typeof (options === null || options === void 0 ? void 0 : options.fetch) !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n//# sourceMappingURL=fetch-file.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Log } from 'probe.gl';\nexport const probeLog = new Log({\n  id: 'loaders.gl'\n});\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n\n  info() {\n    return () => {};\n  }\n\n  warn() {\n    return () => {};\n  }\n\n  error() {\n    return () => {};\n  }\n\n}\nexport class ConsoleLog {\n  constructor() {\n    _defineProperty(this, \"console\", void 0);\n\n    this.console = console;\n  }\n\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n\n}\n//# sourceMappingURL=loggers.js.map","import { ConsoleLog } from './loggers';\nexport const DEFAULT_LOADER_OPTIONS = {\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(),\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: true,\n  _workerType: '',\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false,\n  transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n//# sourceMappingURL=option-defaults.js.map","import { global } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { probeLog, NullLog } from './loggers';\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from './option-defaults';\nexport function getGlobalLoaderState() {\n  global.loaders = global.loaders || {};\n  const {\n    loaders\n  } = global;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\nconst getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS\n  };\n  return state.globalOptions;\n};\n\nexport function setGlobalOptions(options) {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  const globalOptions = getGlobalLoaderOptions();\n  const fetchOptions = options || globalOptions;\n\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  if (isObject(fetchOptions.fetch)) {\n    return url => fetchFile(url, fetchOptions);\n  }\n\n  if (context !== null && context !== void 0 && context.fetch) {\n    return context === null || context === void 0 ? void 0 : context.fetch;\n  }\n\n  return fetchFile;\n}\n\nfunction validateOptions(options, loaders) {\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n\n  for (const loader of loaders) {\n    const idOptions = options && options[loader.id] || {};\n    const loaderOptions = loader.options && loader.options[loader.id] || {};\n    const deprecatedOptions = loader.deprecatedOptions && loader.deprecatedOptions[loader.id] || {};\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? `${id}.` : '';\n\n  for (const key in options) {\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      if (key in deprecatedOptions) {\n        probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`)();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`)();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n    }\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  const loaderDefaultOptions = loader.options || {};\n  const mergedOptions = { ...loaderDefaultOptions\n  };\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    if (key in options) {\n      const value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = { ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","const DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(url) {\n  const matches = DATA_URL_PATTERN.exec(url);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport async function makeResponse(resource) {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  const headers = {};\n  const contentLength = getResourceContentLength(resource);\n\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(resource);\n\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  const initialDataUrl = await getInitialDataUrl(resource);\n\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  if (typeof resource === 'string') {\n    resource = new TextEncoder().encode(resource);\n  }\n\n  const response = new Response(resource, {\n    headers\n  });\n  Object.defineProperty(response, 'url', {\n    value: url\n  });\n  return response;\n}\nexport async function checkResponse(response) {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    let message = `${response.status} ${response.statusText}`;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n    throw new Error(message);\n  }\n}\n\nasync function getResponseError(response) {\n  let message = `Failed to fetch resource ${response.url} (${response.status}): `;\n\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n\n    if (contentType.includes('application/json')) {\n      text += ` ${await response.text()}`;\n    }\n\n    message += text;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n  } catch (error) {}\n\n  return message;\n}\n\nasync function getInitialDataUrl(resource) {\n  const INITIAL_DATA_LENGTH = 5;\n\n  if (typeof resource === 'string') {\n    return `data:,${resource.slice(0, INITIAL_DATA_LENGTH)}`;\n  }\n\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise(resolve => {\n      const reader = new FileReader();\n\n      reader.onload = event => {\n        var _event$target;\n\n        return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n      };\n\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return `data:base64,${base64}`;\n  }\n\n  return null;\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { global, isBrowser } from '../utils/globals';\nconst {\n  _parseImageNode\n} = global;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined';\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(`@loaders.gl/images: image ${type} not supported in this environment`);\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n//# sourceMappingURL=image-type.js.map","export function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  const format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  return getImageData(image);\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      if (!context) {\n        throw new Error('getImageData');\n      }\n\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","const SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    const textDecoder = new TextDecoder();\n    const xmlText = textDecoder.decode(arrayBuffer);\n    const src = `data:image/svg+xml;base64,${btoa(xmlText)}`;\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import { getBlobOrSVGDataUrl } from './svg-utils';\nexport default async function parseToImage(arrayBuffer, options, url) {\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n\n      image.onerror = err => reject(new Error(`Could not load image ${url}: ${err}`));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=parse-to-image.js.map","import { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  if (isSVG(url)) {\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error);\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","const BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {\n    tableMarkers,\n    sofMarkers\n  } = getJpegMarkers();\n  let i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  const sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers,\n    sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { VERSION } from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [arrayBuffer => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport const _typecheckImageLoader = ImageLoader;\n//# sourceMappingURL=image-loader.js.map","export const VERSION = typeof \"3.0.8\" !== 'undefined' ? \"3.0.8\" : 'latest';\n//# sourceMappingURL=version.js.map","import { assert } from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n  const imageType = imageOptions.type || 'auto';\n  const {\n    url\n  } = context || {};\n  const loadType = getLoadableImageType(imageType);\n  let image;\n\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n\n    case 'data':\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n\n    default:\n      assert(false);\n  }\n\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import { global } from '../utils/globals';\nimport { assert } from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  const {\n    mimeType\n  } = getBinaryImageMetadata(arrayBuffer) || {};\n  const {\n    _parseImageNode\n  } = global;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { uid, assert } from '@luma.gl/webgl';\nexport const DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor(props = {}) {\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getAttributes() {\n    return this.indices ? {\n      indices: this.indices,\n      ...this.attributes\n    } : this.attributes;\n  }\n\n  _print(attributeName) {\n    return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n  }\n\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {\n        value: indices,\n        size: 1\n      } : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n      attribute = ArrayBuffer.isView(attribute) ? {\n        value: attribute\n      } : attribute;\n      assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n\n    let vertexCount = Infinity;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {\n        value,\n        size,\n        constant\n      } = attribute;\n\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n\n}\n//# sourceMappingURL=geometry.js.map","let arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  const scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils';\nimport { getBrowser } from 'probe.gl';\nconst ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\nexport default class VertexArrayObject extends Resource {\n  static isSupported(gl, options = {}) {\n    if (options.constantAttributeZero) {\n      return isWebGL2(gl) || getBrowser() === 'Chrome';\n    }\n\n    return true;\n  }\n\n  static getDefaultArray(gl) {\n    gl.luma = gl.luma || {};\n\n    if (!gl.luma.defaultVertexArray) {\n      gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n        handle: null,\n        isDefaultArray: true\n      });\n    }\n\n    return gl.luma.defaultVertexArray;\n  }\n\n  static getMaxAttributes(gl) {\n    VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n    return VertexArrayObject.MAX_ATTRIBUTES;\n  }\n\n  static setConstant(gl, location, array) {\n    switch (array.constructor) {\n      case Float32Array:\n        VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n        break;\n\n      case Int32Array:\n        VertexArrayObject._setConstantIntArray(gl, location, array);\n\n        break;\n\n      case Uint32Array:\n        VertexArrayObject._setConstantUintArray(gl, location, array);\n\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    super(gl, Object.assign({}, opts, {\n      id\n    }));\n    this.buffer = null;\n    this.bufferValue = null;\n    this.isDefaultArray = opts.isDefaultArray || false;\n    this.gl2 = gl;\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    super.delete();\n\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    return this;\n  }\n\n  get MAX_ATTRIBUTES() {\n    return VertexArrayObject.getMaxAttributes(this.gl);\n  }\n\n  initialize(props = {}) {\n    return this.setProps(props);\n  }\n\n  setProps(props) {\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, opts = {}) {\n    assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n    this.bind(() => {\n      this.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n    });\n    return this;\n  }\n\n  setBuffer(location, buffer, accessor) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, accessor);\n    }\n\n    const {\n      size,\n      type,\n      stride,\n      offset,\n      normalized,\n      integer,\n      divisor\n    } = accessor;\n    const {\n      gl,\n      gl2\n    } = this;\n    location = Number(location);\n    this.bind(() => {\n      gl.bindBuffer(34962, buffer.handle);\n\n      if (integer) {\n        assert(isWebGL2(gl));\n        gl2.vertexAttribIPointer(location, size, type, stride, offset);\n      } else {\n        gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n      }\n\n      gl.enableVertexAttribArray(location);\n      gl2.vertexAttribDivisor(location, divisor || 0);\n    });\n    return this;\n  }\n\n  enable(location, enable = true) {\n    const disablingAttributeZero = !enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    });\n\n    if (!disablingAttributeZero) {\n      location = Number(location);\n      this.bind(() => enable ? this.gl.enableVertexAttribArray(location) : this.gl.disableVertexAttribArray(location));\n    }\n\n    return this;\n  }\n\n  getConstantBuffer(elementCount, value) {\n    const constantValue = this._normalizeConstantArrayValue(value);\n\n    const byteLength = constantValue.byteLength * elementCount;\n    const length = constantValue.length * elementCount;\n    let updateNeeded = !this.buffer;\n    this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n    updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n    updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n    if (updateNeeded) {\n      const typedArray = getScratchArray(value.constructor, length);\n      fillArray({\n        target: typedArray,\n        source: constantValue,\n        start: 0,\n        count: length\n      });\n      this.buffer.subData(typedArray);\n      this.bufferValue = value;\n    }\n\n    return this.buffer;\n  }\n\n  _normalizeConstantArrayValue(arrayValue) {\n    if (Array.isArray(arrayValue)) {\n      return new Float32Array(arrayValue);\n    }\n\n    return arrayValue;\n  }\n\n  _compareConstantArrayValues(v1, v2) {\n    if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; ++i) {\n      if (v1[i] !== v2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static _setConstantFloatArray(gl, location, array) {\n    switch (array.length) {\n      case 1:\n        gl.vertexAttrib1fv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttrib2fv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttrib3fv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttrib4fv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantIntArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1iv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2iv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3iv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4iv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantUintArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1uiv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2uiv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3uiv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4uiv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  _createHandle() {\n    const gl2 = this.gl;\n    return gl2.createVertexArray();\n  }\n\n  _deleteHandle(handle) {\n    this.gl2.deleteVertexArray(handle);\n    return [this.elements];\n  }\n\n  _bindHandle(handle) {\n    this.gl2.bindVertexArray(handle);\n  }\n\n  _getParameter(pname, {\n    location\n  }) {\n    assert(Number.isFinite(location));\n    return this.bind(() => {\n      switch (pname) {\n        case 34373:\n          return this.gl.getVertexAttribOffset(location, pname);\n\n        default:\n          return this.gl.getVertexAttrib(location, pname);\n      }\n    });\n  }\n\n}\n//# sourceMappingURL=vertex-array-object.js.map","import { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  const navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  const userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert, stubRemovedMethods } from '../utils';\nconst ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nconst MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nconst DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\nexport default class VertexArray {\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    this.vertexArrayObject.delete();\n  }\n\n  initialize(props = {}) {\n    this.reset();\n    this.configuration = null;\n    this.bindOnUse = false;\n    return this.setProps(props);\n  }\n\n  reset() {\n    this.elements = null;\n    this.elementsAccessor = null;\n    const {\n      MAX_ATTRIBUTES\n    } = this.vertexArrayObject;\n    this.values = new Array(MAX_ATTRIBUTES).fill(null);\n    this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n    this.unused = {};\n    this.drawParams = null;\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('elements' in props) {\n      this.setElementBuffer(props.elements);\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    return this;\n  }\n\n  clearDrawParams() {\n    this.drawParams = null;\n  }\n\n  getDrawParams() {\n    this.drawParams = this.drawParams || this._updateDrawParams();\n    return this.drawParams;\n  }\n\n  setAttributes(attributes) {\n    Object.assign(this.attributes, attributes);\n    this.vertexArrayObject.bind(() => {\n      for (const locationOrName in attributes) {\n        const value = attributes[locationOrName];\n\n        this._setAttribute(locationOrName, value);\n      }\n\n      this.gl.bindBuffer(34962, null);\n    });\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, accessor = {}) {\n    this.elements = elementBuffer;\n    this.elementsAccessor = accessor;\n    this.clearDrawParams();\n    this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n    return this;\n  }\n\n  setBuffer(locationOrName, buffer, appAccessor = {}) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, appAccessor);\n    }\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor);\n\n    if (location >= 0) {\n      this.values[location] = buffer;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setBuffer(location, buffer, accessor);\n    }\n\n    return this;\n  }\n\n  setConstant(locationOrName, arrayValue, appAccessor = {}) {\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n      size: arrayValue.length\n    }, appAccessor));\n\n    if (location >= 0) {\n      arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue);\n      this.values[location] = arrayValue;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.enable(location, false);\n    }\n\n    return this;\n  }\n\n  unbindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.vertexArrayObject.setElementBuffer(null);\n      }\n\n      this.buffer = this.buffer || new Buffer(this.gl, {\n        accessor: {\n          size: 4\n        }\n      });\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        if (this.values[location] instanceof Buffer) {\n          this.gl.disableVertexAttribArray(location);\n          this.gl.bindBuffer(34962, this.buffer.handle);\n          this.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.setElementBuffer(this.elements);\n      }\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        const buffer = this.values[location];\n\n        if (buffer instanceof Buffer) {\n          this.setBuffer(location, buffer);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindForDraw(vertexCount, instanceCount, func) {\n    let value;\n    this.vertexArrayObject.bind(() => {\n      this._setConstantAttributes(vertexCount, instanceCount);\n\n      value = func();\n    });\n    return value;\n  }\n\n  _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n    const INVALID_RESULT = {\n      location: -1,\n      accessor: null\n    };\n\n    const {\n      location,\n      name\n    } = this._getAttributeIndex(locationOrName);\n\n    if (!Number.isFinite(location) || location < 0) {\n      this.unused[locationOrName] = value;\n      log.once(3, () => \"unused value \".concat(locationOrName, \" in \").concat(this.id))();\n      return INVALID_RESULT;\n    }\n\n    const accessInfo = this._getAttributeInfo(name || location);\n\n    if (!accessInfo) {\n      return INVALID_RESULT;\n    }\n\n    const currentAccessor = this.accessors[location] || {};\n    const accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n    const {\n      size,\n      type\n    } = accessor;\n    assert(Number.isFinite(size) && Number.isFinite(type));\n    return {\n      location,\n      accessor\n    };\n  }\n\n  _getAttributeInfo(attributeName) {\n    return this.configuration && this.configuration.getAttributeInfo(attributeName);\n  }\n\n  _getAttributeIndex(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return {\n        location\n      };\n    }\n\n    const multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n    const name = multiLocation ? multiLocation[1] : locationOrName;\n    const locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n    if (this.configuration) {\n      return {\n        location: this.configuration.getAttributeLocation(name) + locationOffset,\n        name\n      };\n    }\n\n    return {\n      location: -1\n    };\n  }\n\n  _setAttribute(locationOrName, value) {\n    if (value instanceof Buffer) {\n      this.setBuffer(locationOrName, value);\n    } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n      const buffer = value[0];\n      const accessor = value[1];\n      this.setBuffer(locationOrName, buffer, accessor);\n    } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n      const constant = value;\n      this.setConstant(locationOrName, constant);\n    } else if (value.buffer instanceof Buffer) {\n      const accessor = value;\n      this.setBuffer(locationOrName, accessor.buffer, accessor);\n    } else {\n      throw new Error(ERR_ATTRIBUTE_TYPE);\n    }\n  }\n\n  _setConstantAttributes(vertexCount, instanceCount) {\n    const elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n    let constant = this.values[0];\n\n    if (ArrayBuffer.isView(constant)) {\n      this._setConstantAttributeZero(constant, elementCount);\n    }\n\n    for (let location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      constant = this.values[location];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttribute(location, constant);\n      }\n    }\n  }\n\n  _setConstantAttributeZero(constant, elementCount) {\n    if (VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    })) {\n      this._setConstantAttribute(0, constant);\n\n      return;\n    }\n\n    const buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n    this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n  }\n\n  _setConstantAttribute(location, constant) {\n    VertexArrayObject.setConstant(this.gl, location, constant);\n  }\n\n  _updateDrawParams() {\n    const drawParams = {\n      isIndexed: false,\n      isInstanced: false,\n      indexCount: Infinity,\n      vertexCount: Infinity,\n      instanceCount: Infinity\n    };\n\n    for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      this._updateDrawParamsForLocation(drawParams, location);\n    }\n\n    if (this.elements) {\n      drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n      drawParams.isIndexed = true;\n      drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n      drawParams.indexOffset = this.elementsAccessor.offset || 0;\n    }\n\n    if (drawParams.indexCount === Infinity) {\n      drawParams.indexCount = 0;\n    }\n\n    if (drawParams.vertexCount === Infinity) {\n      drawParams.vertexCount = 0;\n    }\n\n    if (drawParams.instanceCount === Infinity) {\n      drawParams.instanceCount = 0;\n    }\n\n    return drawParams;\n  }\n\n  _updateDrawParamsForLocation(drawParams, location) {\n    const value = this.values[location];\n    const accessor = this.accessors[location];\n\n    if (!value) {\n      return;\n    }\n\n    const {\n      divisor\n    } = accessor;\n    const isInstanced = divisor > 0;\n    drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n    if (value instanceof Buffer) {\n      const buffer = value;\n\n      if (isInstanced) {\n        const instanceCount = buffer.getVertexCount(accessor);\n        drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n      } else {\n        const vertexCount = buffer.getVertexCount(accessor);\n        drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n      }\n    }\n  }\n\n  setElements(elementBuffer = null, accessor = {}) {\n    log.deprecated('setElements', 'setElementBuffer')();\n    return this.setElementBuffer(elementBuffer, accessor);\n  }\n\n}\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils';\nexport function getDebugTableForVertexArray({\n  vertexArray,\n  header = 'Attributes'\n}) {\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  const table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  const attributes = vertexArray.values;\n\n  for (const attributeLocation in attributes) {\n    const info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      let rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      const accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  const {\n    gl\n  } = vertexArray;\n\n  if (!attribute) {\n    return {\n      [header]: 'null',\n      'Format ': 'N/A'\n    };\n  }\n\n  let type = 'NOT PROVIDED';\n  let size = 1;\n  let verts = 0;\n  let bytes = 0;\n  let isInteger;\n  let marker;\n  let value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    const buffer = attribute;\n    const {\n      data,\n      changed\n    } = buffer.getDebugData();\n    marker = changed ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    let format;\n\n    if (accessor) {\n      const instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(getKey(gl, type), \")\");\n    } else {\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return {\n      [header]: \"\".concat(marker).concat(formatValue(value, {\n        size,\n        isInteger\n      })),\n      'Format ': format\n    };\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return {\n    [header]: \"\".concat(formatValue(value, {\n      size,\n      isInteger\n    }), \" (constant)\"),\n    'Format ': \"\".concat(size, \"x\").concat(type, \" (constant)\")\n  };\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  const {\n    type,\n    size\n  } = accessor;\n  const typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? \"\".concat(name, \" (\").concat(typeAndName.name, \")\") : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import { formatValue, assert } from '../utils';\nexport function getDebugTableForUniforms({\n  header = 'Uniforms',\n  program,\n  uniforms,\n  undefinedOnly = false\n}) {\n  assert(program);\n  const SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  const PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  const uniformLocations = program._uniformSetters;\n  const table = {};\n  const uniformNames = Object.keys(uniformLocations).sort();\n  let count = 0;\n\n  for (const uniformName of uniformNames) {\n    if (!uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (!table[uniformName]) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  let unusedCount = 0;\n  const unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = {\n          Type: \"NOT USED: \".concat(uniform),\n          [header]: formatValue(uniform)\n        };\n      }\n    }\n  }\n\n  return {\n    table,\n    count,\n    unusedTable,\n    unusedCount\n  };\n}\n\nfunction addUniformToTable({\n  table,\n  header,\n  uniforms,\n  uniformName,\n  undefinedOnly\n}) {\n  const value = uniforms[uniformName];\n  const isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    table[uniformName] = {\n      [header]: isDefined ? formatValue(value) : 'N/A',\n      'Uniform Type': isDefined ? value : 'NOT PROVIDED'\n    };\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  const table = {};\n  const header = \"Accessors for \".concat(config.id);\n\n  for (const attributeInfo of config.attributeInfos) {\n    if (attributeInfo) {\n      const glslDeclaration = getGLSLDeclaration(attributeInfo);\n      table[\"in \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(attributeInfo.accessor)\n      };\n    }\n  }\n\n  for (const varyingInfo of config.varyingInfos) {\n    if (varyingInfo) {\n      const glslDeclaration = getGLSLDeclaration(varyingInfo);\n      table[\"out \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(varyingInfo.accessor)\n      };\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  const {\n    type,\n    size\n  } = attributeInfo.accessor;\n  const typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import { Buffer, assert } from '@luma.gl/webgl';\nconst GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  const buffers = {};\n  let indices = geometry.indices;\n\n  for (const name in geometry.attributes) {\n    const attribute = geometry.attributes[name];\n    const remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      const typedArray = attribute.value;\n      const accessor = { ...attribute\n      };\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    const data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    const accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data,\n      target: 34963\n    }), accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  const {\n    attributeMap = GLTF_TO_LUMA_ATTRIBUTE_MAP\n  } = options || {};\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  let category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), \"attribute \".concat(attributeName, \" needs size\"));\n}\n//# sourceMappingURL=model-utils.js.map","import { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nconst LOG_DRAW_PRIORITY = 2;\nconst LOG_DRAW_TIMEOUT = 10000;\nconst ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nconst NOOP = () => {};\n\nconst DRAW_PARAMS = {};\nexport default class Model {\n  constructor(gl, props = {}) {\n    const {\n      id = uid('model')\n    } = props;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  initialize(props) {\n    this.props = {};\n    this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n    this._programManagerState = -1;\n    this._managedProgram = false;\n    const {\n      program = null,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this.program = null;\n    this.vertexArray = null;\n    this._programDirty = true;\n    this.userData = {};\n    this.needsRedraw = true;\n    this._attributes = {};\n    this.attributes = {};\n    this.uniforms = {};\n    this.pickable = true;\n\n    this._checkProgram();\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n    this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n    this.vertexCount = props.vertexCount || 0;\n    this.geometryBuffers = {};\n    this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n    this._setModelProps(props);\n\n    this.geometry = {};\n    assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n  }\n\n  setProps(props) {\n    this._setModelProps(props);\n  }\n\n  delete() {\n    for (const key in this._attributes) {\n      if (this._attributes[key] !== this.attributes[key]) {\n        this._attributes[key].delete();\n      }\n    }\n\n    if (this._managedProgram) {\n      this.programManager.release(this.program);\n      this._managedProgram = false;\n    }\n\n    this.vertexArray.delete();\n\n    this._deleteGeometryBuffers();\n  }\n\n  getDrawMode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getInstanceCount() {\n    return this.instanceCount;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  setProgram(props) {\n    const {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this._programDirty = true;\n  }\n\n  getUniforms() {\n    return this.uniforms;\n  }\n\n  setDrawMode(drawMode) {\n    this.drawMode = drawMode;\n    return this;\n  }\n\n  setVertexCount(vertexCount) {\n    assert(Number.isFinite(vertexCount));\n    this.vertexCount = vertexCount;\n    return this;\n  }\n\n  setInstanceCount(instanceCount) {\n    assert(Number.isFinite(instanceCount));\n    this.instanceCount = instanceCount;\n    return this;\n  }\n\n  setGeometry(geometry) {\n    this.drawMode = geometry.drawMode;\n    this.vertexCount = geometry.getVertexCount();\n\n    this._deleteGeometryBuffers();\n\n    this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n    this.vertexArray.setAttributes(this.geometryBuffers);\n    return this;\n  }\n\n  setAttributes(attributes = {}) {\n    if (isObjectEmpty(attributes)) {\n      return this;\n    }\n\n    const normalizedAttributes = {};\n\n    for (const name in attributes) {\n      const attribute = attributes[name];\n      normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n    }\n\n    this.vertexArray.setAttributes(normalizedAttributes);\n    return this;\n  }\n\n  setUniforms(uniforms = {}) {\n    Object.assign(this.uniforms, uniforms);\n    return this;\n  }\n\n  getModuleUniforms(opts) {\n    this._checkProgram();\n\n    const getUniforms = this.programManager.getUniforms(this.program);\n\n    if (getUniforms) {\n      return getUniforms(opts);\n    }\n\n    return {};\n  }\n\n  updateModuleSettings(opts) {\n    const uniforms = this.getModuleUniforms(opts || {});\n    return this.setUniforms(uniforms);\n  }\n\n  clear(opts) {\n    clear(this.program.gl, opts);\n    return this;\n  }\n\n  draw(opts = {}) {\n    this._checkProgram();\n\n    const {\n      moduleSettings = null,\n      framebuffer,\n      uniforms = {},\n      attributes = {},\n      transformFeedback = this.transformFeedback,\n      parameters = {},\n      vertexArray = this.vertexArray\n    } = opts;\n    this.setAttributes(attributes);\n    this.updateModuleSettings(moduleSettings);\n    this.setUniforms(uniforms);\n    let logPriority;\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n    }\n\n    const drawParams = this.vertexArray.getDrawParams();\n    const {\n      isIndexed = drawParams.isIndexed,\n      indexType = drawParams.indexType,\n      indexOffset = drawParams.indexOffset,\n      vertexArrayInstanced = drawParams.isInstanced\n    } = this.props;\n\n    if (vertexArrayInstanced && !this.isInstanced) {\n      log.warn('Found instanced attributes on non-instanced model', this.id)();\n    }\n\n    const {\n      isInstanced,\n      instanceCount\n    } = this;\n    const {\n      onBeforeRender = NOOP,\n      onAfterRender = NOOP\n    } = this.props;\n    onBeforeRender();\n    this.program.setUniforms(this.uniforms);\n    const didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n      logPriority,\n      uniforms: null,\n      framebuffer,\n      parameters,\n      drawMode: this.getDrawMode(),\n      vertexCount: this.getVertexCount(),\n      vertexArray,\n      transformFeedback,\n      isIndexed,\n      indexType,\n      isInstanced,\n      instanceCount,\n      offset: isIndexed ? indexOffset : 0\n    }));\n    onAfterRender();\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n    }\n\n    return didDraw;\n  }\n\n  transform(opts = {}) {\n    const {\n      discard = true,\n      feedbackBuffers,\n      unbindModels = []\n    } = opts;\n    let {\n      parameters\n    } = opts;\n\n    if (feedbackBuffers) {\n      this._setFeedbackBuffers(feedbackBuffers);\n    }\n\n    if (discard) {\n      parameters = Object.assign({}, parameters, {\n        [35977]: discard\n      });\n    }\n\n    unbindModels.forEach(model => model.vertexArray.unbindBuffers());\n\n    try {\n      this.draw(Object.assign({}, opts, {\n        parameters\n      }));\n    } finally {\n      unbindModels.forEach(model => model.vertexArray.bindBuffers());\n    }\n\n    return this;\n  }\n\n  render(uniforms = {}) {\n    log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n    return this.setUniforms(uniforms).draw();\n  }\n\n  _setModelProps(props) {\n    Object.assign(this.props, props);\n\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    if ('pickable' in props) {\n      this.pickable = props.pickable;\n    }\n\n    if ('instanceCount' in props) {\n      this.instanceCount = props.instanceCount;\n    }\n\n    if ('geometry' in props) {\n      this.setGeometry(props.geometry);\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('_feedbackBuffers' in props) {\n      this._setFeedbackBuffers(props._feedbackBuffers);\n    }\n  }\n\n  _checkProgram() {\n    const needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n    if (!needsUpdate) {\n      return;\n    }\n\n    let {\n      program\n    } = this.programProps;\n\n    if (program) {\n      this._managedProgram = false;\n    } else {\n      const {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      } = this.programProps;\n      program = this.programManager.get({\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      });\n\n      if (this.program && this._managedProgram) {\n        this.programManager.release(this.program);\n      }\n\n      this._programManagerState = this.programManager.stateHash;\n      this._managedProgram = true;\n    }\n\n    assert(program instanceof Program, 'Model needs a program');\n    this._programDirty = false;\n\n    if (program === this.program) {\n      return;\n    }\n\n    this.program = program;\n\n    if (this.vertexArray) {\n      this.vertexArray.setProps({\n        program: this.program,\n        attributes: this.vertexArray.attributes\n      });\n    } else {\n      this.vertexArray = new VertexArray(this.gl, {\n        program: this.program\n      });\n    }\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n  }\n\n  _deleteGeometryBuffers() {\n    for (const name in this.geometryBuffers) {\n      const buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n      if (buffer instanceof Buffer) {\n        buffer.delete();\n      }\n    }\n  }\n\n  _setAnimationProps(animationProps) {\n    if (this.animated) {\n      assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n    }\n  }\n\n  _setFeedbackBuffers(feedbackBuffers = {}) {\n    if (isObjectEmpty(feedbackBuffers)) {\n      return this;\n    }\n\n    const {\n      gl\n    } = this.program;\n    this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n      program: this.program\n    });\n    this.transformFeedback.setBuffers(feedbackBuffers);\n    return this;\n  }\n\n  _logDrawCallStart(logLevel) {\n    const logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n    if (Date.now() - this.lastLogTime < logDrawTimeout) {\n      return undefined;\n    }\n\n    this.lastLogTime = Date.now();\n    log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n      collapsed: log.level <= 2\n    })();\n    return logLevel;\n  }\n\n  _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n    if (logLevel === undefined) {\n      return;\n    }\n\n    const attributeTable = getDebugTableForVertexArray({\n      vertexArray,\n      header: \"\".concat(this.id, \" attributes\"),\n      attributes: this._attributes\n    });\n    const {\n      table: uniformTable,\n      unusedTable,\n      unusedCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms)\n    });\n    const {\n      table: missingTable,\n      count: missingCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms),\n      undefinedOnly: true\n    });\n\n    if (missingCount > 0) {\n      log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n    }\n\n    if (unusedCount > 0) {\n      log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n    }\n\n    const configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n    log.table(logLevel, attributeTable)();\n    log.table(logLevel, uniformTable)();\n    log.table(logLevel + 1, configTable)();\n\n    if (framebuffer) {\n      framebuffer.log({\n        logLevel: LOG_DRAW_PRIORITY,\n        message: \"Rendered to \".concat(framebuffer.id)\n      });\n    }\n\n    log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n  }\n\n}\n//# sourceMappingURL=model.js.map","const TYPE_DEFINITIONS = {\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n\n  }\n};\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n\n  for (const propName in propDefs) {\n    const propDef = propDefs[propName];\n    const propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  let type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nconst VERTEX_SHADER = 'vs';\nconst FRAGMENT_SHADER = 'fs';\nexport default class ShaderModule {\n  constructor({\n    name,\n    vs,\n    fs,\n    dependencies = [],\n    uniforms,\n    getUniforms,\n    deprecations = [],\n    defines = {},\n    inject = {},\n    vertexShader,\n    fragmentShader\n  }) {\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  getModuleSource(type) {\n    let moduleSource;\n\n    switch (type) {\n      case VERTEX_SHADER:\n        moduleSource = this.vs || '';\n        break;\n\n      case FRAGMENT_SHADER:\n        moduleSource = this.fs || '';\n        break;\n\n      default:\n        assert(false);\n    }\n\n    return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n  }\n\n  getUniforms(opts, uniforms) {\n    if (this.getModuleUniforms) {\n      return this.getModuleUniforms(opts, uniforms);\n    }\n\n    if (this.uniforms) {\n      return this._defaultGetUniforms(opts);\n    }\n\n    return {};\n  }\n\n  getDefines() {\n    return this.defines;\n  }\n\n  checkDeprecations(shaderSource, log) {\n    this.deprecations.forEach(def => {\n      if (def.regex.test(shaderSource)) {\n        if (def.deprecated) {\n          log.deprecated(def.old, def.new)();\n        } else {\n          log.removed(def.old, def.new)();\n        }\n      }\n    });\n  }\n\n  _parseDeprecationDefinitions(deprecations) {\n    deprecations.forEach(def => {\n      switch (def.type) {\n        case 'function':\n          def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n          break;\n\n        default:\n          def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n      }\n    });\n    return deprecations;\n  }\n\n  _defaultGetUniforms(opts = {}) {\n    const uniforms = {};\n    const propTypes = this.uniforms;\n\n    for (const key in propTypes) {\n      const propDef = propTypes[key];\n\n      if (key in opts && !propDef.private) {\n        if (propDef.validate) {\n          assert(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n        }\n\n        uniforms[key] = opts[key];\n      } else {\n        uniforms[key] = propDef.value;\n      }\n    }\n\n    return uniforms;\n  }\n\n}\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      const shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (const hook in injections) {\n    let injection = injections[hook];\n    const stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","import ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  const moduleMap = {};\n  const moduleDepth = {};\n  getDependencyGraph({\n    modules,\n    level: 0,\n    moduleMap,\n    moduleDepth\n  });\n  return Object.keys(moduleDepth).sort((a, b) => moduleDepth[b] - moduleDepth[a]).map(name => moduleMap[name]);\n}\n\nfunction getDependencyGraph({\n  modules,\n  level,\n  moduleMap,\n  moduleDepth\n}) {\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  for (const module of modules) {\n    moduleMap[module.name] = module;\n\n    if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n      moduleDepth[module.name] = level;\n    }\n  }\n\n  for (const module of modules) {\n    if (module.dependencies) {\n      getDependencyGraph({\n        modules: module.dependencies,\n        level: level + 1,\n        moduleMap,\n        moduleDepth\n      });\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(module => {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', \"Shader module use by name is deprecated. Import shader module '\".concat(module, \"' and use it directly.\"));\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport const TEST_EXPORTS = {\n  getShaderDependencies,\n  getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nconst GL_VENDOR = 0x1f00;\nconst GL_RENDERER = 0x1f01;\nconst GL_VERSION = 0x1f02;\nconst GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nconst WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nconst FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(key => {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  const info = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  const renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  const gpuVendor = identifyGPUVendor(vendor, renderer);\n  const gpuInfo = {\n    gpuVendor,\n    vendor,\n    renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nconst compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap, opts = {}) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  const extensionName = feature[0];\n  const behavior = opts.behavior || 'enable';\n  const source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  const shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  const extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  const value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => getFeature(gl, feature));\n}\n//# sourceMappingURL=webgl-info.js.map","export default function isOldIE(opts = {}) {\n  const navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  const userAgent = opts.userAgent || navigator.userAgent || '';\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","function testVariable(qualifier) {\n  return new RegExp(\"\\\\b\".concat(qualifier, \"[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)\"), 'g');\n}\n\nconst ES300_REPLACEMENTS = [[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'], [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('], [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']];\nconst ES300_VERTEX_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('attribute'), 'in $1'], [testVariable('varying'), 'out $1']];\nconst ES300_FRAGMENT_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('varying'), 'in $1']];\nconst ES100_REPLACEMENTS = [[/^#version[ \\t]+300[ \\t]+es/, '#version 100'], [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('], [/\\btexture\\(/g, 'texture2D('], [/\\btextureLod\\(/g, 'texture2DLodEXT(']];\nconst ES100_VERTEX_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'attribute $1'], [testVariable('out'), 'varying $1']];\nconst ES100_FRAGMENT_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'varying $1']];\nconst ES100_FRAGMENT_OUTPUT_NAME = 'gl_FragColor';\nconst ES300_FRAGMENT_OUTPUT_REGEX = /\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/;\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertShader(source, ES300_VERTEX_REPLACEMENTS) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertShader(source, ES100_VERTEX_REPLACEMENTS) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\n\nfunction convertShader(source, replacements) {\n  for (const [pattern, replacement] of replacements) {\n    source = source.replace(pattern, replacement);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo300(source) {\n  source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  } else {\n    const outputName = 'fragmentColor';\n    source = source.replace(REGEX_START_OF_MAIN, match => \"out vec4 \".concat(outputName, \";\\n\").concat(match)).replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(ES300_FRAGMENT_OUTPUT_REGEX, '').replace(new RegExp(\"\\\\b\".concat(outputName, \"\\\\b\"), 'g'), ES100_FRAGMENT_OUTPUT_NAME);\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nconst INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(DECLARATION_INJECT_MARKER, \"\\n\\n\");\nconst SHADER_TYPE = {\n  [VERTEX_SHADER]: 'vertex',\n  [FRAGMENT_SHADER]: 'fragment'\n};\nconst FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\nexport function assembleShaders(gl, opts) {\n  const {\n    vs,\n    fs\n  } = opts;\n  const modules = resolveModules(opts.modules || []);\n  return {\n    gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, {\n  id,\n  source,\n  type,\n  modules,\n  defines = {},\n  hookFunctions = [],\n  inject = {},\n  transpileToGLSL100 = false,\n  prologue = true,\n  log\n}) {\n  assert(typeof source === 'string', 'shader source must be a string');\n  const isVertex = type === VERTEX_SHADER;\n  const sourceLines = source.split('\\n');\n  let glslVersion = 100;\n  let versionLine = '';\n  let coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  const allDefines = {};\n  modules.forEach(module => {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  let assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id,\n    source,\n    type\n  }), \"\\n\").concat(getShaderType({\n    type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  const hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  const hookInjections = {};\n  const declInjections = {};\n  const mainInjections = {};\n\n  for (const key in inject) {\n    const injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    const match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      const hash = match[2];\n      const name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  for (const module of modules) {\n    if (log) {\n      module.checkDeprecations(coreSource, log);\n    }\n\n    const moduleSource = module.getModuleSource(type, glslVersion);\n    assembledSource += moduleSource;\n    const injections = module.injections[type];\n\n    for (const key in injections) {\n      const match = key.match(/^(v|f)s:#([\\w-]+)$/);\n\n      if (match) {\n        const name = match[2];\n        const injectionType = name === 'decl' ? declInjections : mainInjections;\n        injectionType[key] = injectionType[key] || [];\n        injectionType[key].push(injections[key]);\n      } else {\n        hookInjections[key] = hookInjections[key] || [];\n        hookInjections[key].push(injections[key]);\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    const uniforms = {};\n\n    for (const module of modules) {\n      const moduleUniforms = module.getUniforms(opts, uniforms);\n      Object.assign(uniforms, moduleUniforms);\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType({\n  type\n}) {\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName({\n  id,\n  source,\n  type\n}) {\n  const injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines(defines = {}) {\n  let count = 0;\n  let sourceText = '';\n\n  for (const define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    const value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  let result = '';\n\n  for (const hookName in hookFunctions) {\n    const hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      const injections = hookInjections[hookName];\n      injections.sort((a, b) => a.order - b.order);\n\n      for (const injection of injections) {\n        result += \"  \".concat(injection.injection, \"\\n\");\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(hook => {\n    let opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n    const [stage, signature] = hook.split(':');\n    const name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  const debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  let versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FEATURE_GLSL_DERIVATIVES\\n# define FEATURE_GLSL_DRAW_BUFFERS\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FEATURE_GLSL_TEXTURE_LOD\\n\\n// DEPRECATED FLAGS, remove in v9\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"\\n// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"\\n// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define FEATURE_GLSL_DERIVATIVES\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"\\n// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define FEATURE_GLSL_DRAW_BUFFERS\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n\\n# define FEATURE_GLSL_TEXTURE_LOD\\n# define TEXTURE_LOD\\n\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","import { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\nexport default class ProgramManager {\n  static getDefaultProgramManager(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n    return gl.luma.defaultProgramManager;\n  }\n\n  constructor(gl) {\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  addDefaultModule(module) {\n    if (!this._defaultModules.find(m => m.name === module.name)) {\n      this._defaultModules.push(module);\n    }\n\n    this.stateHash++;\n  }\n\n  removeDefaultModule(module) {\n    const moduleName = typeof module === 'string' ? module : module.name;\n    this._defaultModules = this._defaultModules.filter(m => m.name !== moduleName);\n    this.stateHash++;\n  }\n\n  addShaderHook(hook, opts) {\n    if (opts) {\n      hook = Object.assign(opts, {\n        hook\n      });\n    }\n\n    this._hookFunctions.push(hook);\n\n    this.stateHash++;\n  }\n\n  get(props = {}) {\n    const {\n      vs = '',\n      fs = '',\n      defines = {},\n      inject = {},\n      varyings = [],\n      bufferMode = 0x8c8d,\n      transpileToGLSL100 = false\n    } = props;\n\n    const modules = this._getModuleList(props.modules);\n\n    const vsHash = this._getHash(vs);\n\n    const fsHash = this._getHash(fs);\n\n    const moduleHashes = modules.map(m => this._getHash(m.name)).sort();\n    const varyingHashes = varyings.map(v => this._getHash(v));\n    const defineKeys = Object.keys(defines).sort();\n    const injectKeys = Object.keys(inject).sort();\n    const defineHashes = [];\n    const injectHashes = [];\n\n    for (const key of defineKeys) {\n      defineHashes.push(this._getHash(key));\n      defineHashes.push(this._getHash(defines[key]));\n    }\n\n    for (const key of injectKeys) {\n      injectHashes.push(this._getHash(key));\n      injectHashes.push(this._getHash(inject[key]));\n    }\n\n    const hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n    if (!this._programCache[hash]) {\n      const assembled = assembleShaders(this.gl, {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        hookFunctions: this._hookFunctions,\n        transpileToGLSL100\n      });\n      this._programCache[hash] = new Program(this.gl, {\n        hash,\n        vs: assembled.vs,\n        fs: assembled.fs,\n        varyings,\n        bufferMode\n      });\n\n      this._getUniforms[hash] = assembled.getUniforms || (x => {});\n\n      this._useCounts[hash] = 0;\n    }\n\n    this._useCounts[hash]++;\n    return this._programCache[hash];\n  }\n\n  getUniforms(program) {\n    return this._getUniforms[program.hash] || null;\n  }\n\n  release(program) {\n    const hash = program.hash;\n    this._useCounts[hash]--;\n\n    if (this._useCounts[hash] === 0) {\n      this._programCache[hash].delete();\n\n      delete this._programCache[hash];\n      delete this._getUniforms[hash];\n      delete this._useCounts[hash];\n    }\n  }\n\n  _getHash(key) {\n    if (this._hashes[key] === undefined) {\n      this._hashes[key] = this._hashCounter++;\n    }\n\n    return this._hashes[key];\n  }\n\n  _getModuleList(appModules = []) {\n    const modules = new Array(this._defaultModules.length + appModules.length);\n    const seen = {};\n    let count = 0;\n\n    for (let i = 0, len = this._defaultModules.length; i < len; ++i) {\n      const module = this._defaultModules[i];\n      const name = module.name;\n      modules[count++] = module;\n      seen[name] = true;\n    }\n\n    for (let i = 0, len = appModules.length; i < len; ++i) {\n      const module = appModules[i];\n      const name = module.name;\n\n      if (!seen[name]) {\n        modules[count++] = module;\n        seen[name] = true;\n      }\n    }\n\n    modules.length = count;\n    return modules;\n  }\n\n}\n//# sourceMappingURL=program-manager.js.map","import { assert } from '../utils';\nconst FS100 = \"void main() {gl_FragColor = vec4(0);}\";\nconst FS_GLES = \"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\";\nconst FS300 = \"#version 300 es\\n\".concat(FS_GLES);\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  const words = line.replace(/^\\s+/, '').split(/\\s+/);\n  const [qualifier, type, definition] = words;\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  const name = definition.split(';')[0];\n  return {\n    qualifier,\n    type,\n    name\n  };\n}\nexport function getPassthroughFS(options = {}) {\n  const {\n    version = 100,\n    input,\n    inputType,\n    output\n  } = options;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return \"#version \".concat(version, \"\\n\").concat(FS_GLES);\n    }\n\n    return FS100;\n  }\n\n  const outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return \"#version \".concat(version, \" \").concat(version === 300 ? 'es' : '', \"\\nin \").concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  }\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\nexport default class BufferTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  setupResources(opts) {\n    for (const binding of this.bindings) {\n      this._setupTransformFeedback(binding, opts);\n    }\n  }\n\n  updateModelProps(props = {}) {\n    const {\n      varyings\n    } = this;\n\n    if (varyings.length > 0) {\n      props = Object.assign({}, props, {\n        varyings\n      });\n    }\n\n    return props;\n  }\n\n  getDrawOptions(opts = {}) {\n    const binding = this.bindings[this.currentIndex];\n    const {\n      sourceBuffers,\n      transformFeedback\n    } = binding;\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    return {\n      attributes,\n      transformFeedback\n    };\n  }\n\n  swap() {\n    if (this.feedbackMap) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupBuffers(opts);\n  }\n\n  getBuffer(varyingName) {\n    const {\n      feedbackBuffers\n    } = this.bindings[this.currentIndex];\n    const bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n    if (!bufferOrParams) {\n      return null;\n    }\n\n    return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n  }\n\n  getData(options = {}) {\n    const {\n      varyingName\n    } = options;\n    const buffer = this.getBuffer(varyingName);\n\n    if (buffer) {\n      return buffer.getData();\n    }\n\n    return null;\n  }\n\n  delete() {\n    for (const name in this.resources) {\n      this.resources[name].delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    this._setupBuffers(props);\n\n    this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n    if (this.varyings.length > 0) {\n      assert(isWebGL2(this.gl));\n    }\n  }\n\n  _getFeedbackBuffers(props) {\n    const {\n      sourceBuffers = {}\n    } = props;\n    const feedbackBuffers = {};\n\n    if (this.bindings[this.currentIndex]) {\n      Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n    }\n\n    if (this.feedbackMap) {\n      for (const sourceName in this.feedbackMap) {\n        const feedbackName = this.feedbackMap[sourceName];\n\n        if (sourceName in sourceBuffers) {\n          feedbackBuffers[feedbackName] = sourceName;\n        }\n      }\n    }\n\n    Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n    for (const bufferName in feedbackBuffers) {\n      const bufferOrRef = feedbackBuffers[bufferName];\n\n      if (typeof bufferOrRef === 'string') {\n        const sourceBuffer = sourceBuffers[bufferOrRef];\n        const {\n          byteLength,\n          usage,\n          accessor\n        } = sourceBuffer;\n        feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n          byteLength,\n          usage,\n          accessor\n        });\n      }\n    }\n\n    return feedbackBuffers;\n  }\n\n  _setupBuffers(props = {}) {\n    const {\n      sourceBuffers = null\n    } = props;\n    Object.assign(this.feedbackMap, props.feedbackMap);\n\n    const feedbackBuffers = this._getFeedbackBuffers(props);\n\n    this._updateBindings({\n      sourceBuffers,\n      feedbackBuffers\n    });\n  }\n\n  _setupTransformFeedback(binding, {\n    model\n  }) {\n    const {\n      program\n    } = model;\n    binding.transformFeedback = new TransformFeedback(this.gl, {\n      program,\n      buffers: binding.feedbackBuffers\n    });\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this.feedbackMap) {\n      const {\n        sourceBuffers,\n        feedbackBuffers\n      } = this._swapBuffers(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceBuffers,\n        feedbackBuffers\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    if (!binding) {\n      return {\n        sourceBuffers: Object.assign({}, opts.sourceBuffers),\n        feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n      };\n    }\n\n    Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n    Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n    if (binding.transformFeedback) {\n      binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n    }\n\n    return binding;\n  }\n\n  _swapBuffers(opts) {\n    if (!this.feedbackMap) {\n      return null;\n    }\n\n    const sourceBuffers = Object.assign({}, opts.sourceBuffers);\n    const feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n    for (const srcName in this.feedbackMap) {\n      const dstName = this.feedbackMap[srcName];\n      sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n      feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n      assert(feedbackBuffers[dstName] instanceof Buffer);\n    }\n\n    return {\n      sourceBuffers,\n      feedbackBuffers\n    };\n  }\n\n  _createNewBuffer(name, opts) {\n    const buffer = new Buffer(this.gl, opts);\n\n    if (this.resources[name]) {\n      this.resources[name].delete();\n    }\n\n    this.resources[name] = buffer;\n    return buffer;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n}\n//# sourceMappingURL=buffer-transform.js.map","export default function getShaderVersion(source) {\n  let version = 100;\n  const words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    const v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","const vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport const transform = {\n  name: 'transform',\n  vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nconst SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nconst SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nconst VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures({\n  vs,\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const texAttributeNames = Object.keys(sourceTextureMap);\n  let sourceCount = texAttributeNames.length;\n  let targetTextureType = null;\n  const samplerTextureMap = {};\n  let updatedVs = vs;\n  let finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    const vsLines = updatedVs.split('\\n');\n    const updateVsLines = vsLines.slice();\n    vsLines.forEach((line, index, lines) => {\n      if (sourceCount > 0) {\n        const updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          const {\n            updatedLine,\n            inject\n          } = updated;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      const uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      const posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      const inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType,\n    inject: finalInject,\n    samplerTextureMap\n  };\n}\nexport function getSizeUniforms({\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const uniforms = {};\n  let width;\n  let height;\n\n  if (targetTextureVarying) {\n    ({\n      width,\n      height\n    } = targetTexture);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (const textureName in sourceTextureMap) {\n    ({\n      width,\n      height\n    } = sourceTextureMap[textureName]);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  const samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  const uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName,\n    sizeName,\n    uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  const qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  const samplerTextureMap = {};\n  const attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  const {\n    type,\n    name\n  } = attributeData;\n\n  if (name && textureMap[name]) {\n    const updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n    const {\n      samplerName,\n      sizeName,\n      uniformDeclerations\n    } = getSamplerDeclerations(name);\n    const channels = typeToChannelSuffix(type);\n    const sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    const inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine,\n      inject,\n      samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nconst SRC_TEX_PARAMETER_OVERRIDES = {\n  [10241]: 9728,\n  [10240]: 9728,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst FS_OUTPUT_VARIABLE = 'transform_output';\nexport default class TextureTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  updateModelProps(props = {}) {\n    const updatedModelProps = this._processVertexShader(props);\n\n    return Object.assign({}, props, updatedModelProps);\n  }\n\n  getDrawOptions(opts = {}) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      framebuffer,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    const uniforms = Object.assign({}, opts.uniforms);\n    const parameters = Object.assign({}, opts.parameters);\n    let discard = opts.discard;\n\n    if (this.hasSourceTextures || this.hasTargetTexture) {\n      attributes.transform_elementID = this.elementIDBuffer;\n\n      for (const sampler in this.samplerTextureMap) {\n        const textureName = this.samplerTextureMap[sampler];\n        uniforms[sampler] = sourceTextures[textureName];\n      }\n\n      this._setSourceTextureParameters();\n\n      const sizeUniforms = getSizeUniforms({\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture\n      });\n      Object.assign(uniforms, sizeUniforms);\n    }\n\n    if (this.hasTargetTexture) {\n      discard = false;\n      parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n    }\n\n    return {\n      attributes,\n      framebuffer,\n      uniforms,\n      discard,\n      parameters\n    };\n  }\n\n  swap() {\n    if (this._swapTexture) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupTextures(opts);\n  }\n\n  getTargetTexture() {\n    const {\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    return targetTexture;\n  }\n\n  getData({\n    packed = false\n  } = {}) {\n    const {\n      framebuffer\n    } = this.bindings[this.currentIndex];\n    const pixels = readPixelsToArray(framebuffer);\n\n    if (!packed) {\n      return pixels;\n    }\n\n    const ArrayType = pixels.constructor;\n    const channelCount = typeToChannelCount(this.targetTextureType);\n    const packedPixels = new ArrayType(pixels.length * channelCount / 4);\n    let packCount = 0;\n\n    for (let i = 0; i < pixels.length; i += 4) {\n      for (let j = 0; j < channelCount; j++) {\n        packedPixels[packCount++] = pixels[i + j];\n      }\n    }\n\n    return packedPixels;\n  }\n\n  getFramebuffer() {\n    const currentResources = this.bindings[this.currentIndex];\n    return currentResources.framebuffer;\n  }\n\n  delete() {\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    if (this.elementIDBuffer) {\n      this.elementIDBuffer.delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      _targetTextureVarying,\n      _swapTexture\n    } = props;\n    this._swapTexture = _swapTexture;\n    this.targetTextureVarying = _targetTextureVarying;\n    this.hasTargetTexture = _targetTextureVarying;\n\n    this._setupTextures(props);\n  }\n\n  _createTargetTexture(props) {\n    const {\n      sourceTextures,\n      textureOrReference\n    } = props;\n\n    if (textureOrReference instanceof Texture2D) {\n      return textureOrReference;\n    }\n\n    const refTexture = sourceTextures[textureOrReference];\n\n    if (!refTexture) {\n      return null;\n    }\n\n    this._targetRefTexName = textureOrReference;\n    return this._createNewTexture(refTexture);\n  }\n\n  _setupTextures(props = {}) {\n    const {\n      sourceBuffers,\n      _sourceTextures = {},\n      _targetTexture\n    } = props;\n\n    const targetTexture = this._createTargetTexture({\n      sourceTextures: _sourceTextures,\n      textureOrReference: _targetTexture\n    });\n\n    this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n    this._updateBindings({\n      sourceBuffers,\n      sourceTextures: _sourceTextures,\n      targetTexture\n    });\n\n    if ('elementCount' in props) {\n      this._updateElementIDBuffer(props.elementCount);\n    }\n  }\n\n  _updateElementIDBuffer(elementCount) {\n    if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n      return;\n    }\n\n    const elementIds = new Float32Array(elementCount);\n    elementIds.forEach((_, index, array) => {\n      array[index] = index;\n    });\n\n    if (!this.elementIDBuffer) {\n      this.elementIDBuffer = new Buffer(this.gl, {\n        data: elementIds,\n        accessor: {\n          size: 1\n        }\n      });\n    } else {\n      this.elementIDBuffer.setData({\n        data: elementIds\n      });\n    }\n\n    this.elementCount = elementCount;\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this._swapTexture) {\n      const {\n        sourceTextures,\n        targetTexture\n      } = this._swapTextures(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceTextures,\n        targetTexture\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      targetTexture\n    } = opts;\n\n    if (!binding) {\n      binding = {\n        sourceBuffers: {},\n        sourceTextures: {},\n        targetTexture: null\n      };\n    }\n\n    Object.assign(binding.sourceTextures, sourceTextures);\n    Object.assign(binding.sourceBuffers, sourceBuffers);\n\n    if (targetTexture) {\n      binding.targetTexture = targetTexture;\n      const {\n        width,\n        height\n      } = targetTexture;\n      const {\n        framebuffer\n      } = binding;\n\n      if (framebuffer) {\n        framebuffer.update({\n          attachments: {\n            [36064]: targetTexture\n          },\n          resizeAttachments: false\n        });\n        framebuffer.resize({\n          width,\n          height\n        });\n      } else {\n        binding.framebuffer = new Framebuffer(this.gl, {\n          id: \"transform-framebuffer\",\n          width,\n          height,\n          attachments: {\n            [36064]: targetTexture\n          }\n        });\n      }\n    }\n\n    return binding;\n  }\n\n  _setSourceTextureParameters() {\n    const index = this.currentIndex;\n    const {\n      sourceTextures\n    } = this.bindings[index];\n\n    for (const name in sourceTextures) {\n      sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n    }\n  }\n\n  _swapTextures(opts) {\n    if (!this._swapTexture) {\n      return null;\n    }\n\n    const sourceTextures = Object.assign({}, opts.sourceTextures);\n    sourceTextures[this._swapTexture] = opts.targetTexture;\n    const targetTexture = opts.sourceTextures[this._swapTexture];\n    return {\n      sourceTextures,\n      targetTexture\n    };\n  }\n\n  _createNewTexture(refTexture) {\n    const texture = cloneTextureFrom(refTexture, {\n      parameters: {\n        [10241]: 9728,\n        [10240]: 9728,\n        [10242]: 33071,\n        [10243]: 33071\n      },\n      pixelStore: {\n        [37440]: false\n      }\n    });\n\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    this.ownTexture = texture;\n    return texture;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n  _processVertexShader(props = {}) {\n    const {\n      sourceTextures,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const {\n      vs,\n      uniforms,\n      targetTextureType,\n      inject,\n      samplerTextureMap\n    } = updateForTextures({\n      vs: props.vs,\n      sourceTextureMap: sourceTextures,\n      targetTextureVarying: this.targetTextureVarying,\n      targetTexture\n    });\n    const combinedInject = combineInjects([props.inject || {}, inject]);\n    this.targetTextureType = targetTextureType;\n    this.samplerTextureMap = samplerTextureMap;\n    const fs = props._fs || getPassthroughFS({\n      version: getShaderVersion(vs),\n      input: this.targetTextureVarying,\n      inputType: targetTextureType,\n      output: FS_OUTPUT_VARIABLE\n    });\n    const modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n    return {\n      vs,\n      fs,\n      modules,\n      uniforms,\n      inject: combinedInject\n    };\n  }\n\n}\n//# sourceMappingURL=texture-transform.js.map","import { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\nexport default class Transform {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  delete() {\n    const {\n      model,\n      bufferTransform,\n      textureTransform\n    } = this;\n\n    if (model) {\n      model.delete();\n    }\n\n    if (bufferTransform) {\n      bufferTransform.delete();\n    }\n\n    if (textureTransform) {\n      textureTransform.delete();\n    }\n  }\n\n  run(opts = {}) {\n    const {\n      clearRenderTarget = true\n    } = opts;\n\n    const updatedOpts = this._updateDrawOptions(opts);\n\n    if (clearRenderTarget && updatedOpts.framebuffer) {\n      updatedOpts.framebuffer.clear({\n        color: true\n      });\n    }\n\n    this.model.transform(updatedOpts);\n  }\n\n  swap() {\n    let swapped = false;\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      swapped = swapped || resourceTransform.swap();\n    }\n\n    assert(swapped, 'Nothing to swap');\n  }\n\n  getBuffer(varyingName = null) {\n    return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n  }\n\n  getData(opts = {}) {\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      const data = resourceTransform.getData(opts);\n\n      if (data) {\n        return data;\n      }\n    }\n\n    return null;\n  }\n\n  getFramebuffer() {\n    return this.textureTransform && this.textureTransform.getFramebuffer();\n  }\n\n  update(opts = {}) {\n    if ('elementCount' in opts) {\n      this.model.setVertexCount(opts.elementCount);\n    }\n\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      resourceTransform.update(opts);\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      gl\n    } = this;\n\n    this._buildResourceTransforms(gl, props);\n\n    props = this._updateModelProps(props);\n    this.model = new Model(gl, Object.assign({}, props, {\n      fs: props.fs || getPassthroughFS({\n        version: getShaderVersion(props.vs)\n      }),\n      id: props.id || 'transform-model',\n      drawMode: props.drawMode || 0,\n      vertexCount: props.elementCount\n    }));\n    this.bufferTransform && this.bufferTransform.setupResources({\n      model: this.model\n    });\n  }\n\n  _updateModelProps(props) {\n    let updatedProps = Object.assign({}, props);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedProps = resourceTransform.updateModelProps(updatedProps);\n    }\n\n    return updatedProps;\n  }\n\n  _buildResourceTransforms(gl, props) {\n    if (canCreateBufferTransform(props)) {\n      this.bufferTransform = new BufferTransform(gl, props);\n    }\n\n    if (canCreateTextureTransform(props)) {\n      this.textureTransform = new TextureTransform(gl, props);\n    }\n\n    assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n  }\n\n  _updateDrawOptions(opts) {\n    let updatedOpts = Object.assign({}, opts);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n    }\n\n    return updatedOpts;\n  }\n\n}\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","import { Log } from 'probe.gl';\nexport const log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=log.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from './assert';\nconst ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport const ERR_WEBGL = ERR_CONTEXT;\nexport const ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  if (typeof WebGLRenderingContext !== 'undefined' && gl instanceof WebGLRenderingContext) {\n    return true;\n  }\n\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\nexport function getWebGL2Context(gl) {\n  return isWebGL2(gl) ? gl : null;\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n  return gl;\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n  return gl;\n}\n//# sourceMappingURL=webgl-checks.js.map","import { global } from 'probe.gl/env';\nconst glErrorShadow = {};\n\nfunction error(msg) {\n  if (global.console && global.console.error) {\n    global.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (global.console && global.console.log) {\n    global.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  const f = gl.getError;\n\n  gl.getError = function getError() {\n    let err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nconst WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  const gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (let n = 0; n < this.attribs.length; n++) {\n    const attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nconst OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  const self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  const original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    const vao = self.currentVertexArrayObject;\n    const attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    const attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', () => {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  const contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (let ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  const gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  const arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  const gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  const original = this.original;\n  const oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  const newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  let currentBinding = this.currentArrayBuffer;\n  const maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (let n = 0; n <= maxAttrib; n++) {\n    const attrib = newVAO.attribs[n];\n    const oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      let bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  const original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    const list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  const original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    const ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nconst OES_element_index = 'OES_element_index';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nconst GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nconst GL_DONT_CARE = 0x1100;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nconst GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nconst GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nconst getWebGL2ValueOrZero = gl => !isWebGL2(gl) ? 0 : undefined;\n\nconst WEBGL_PARAMETERS = {\n  [3074]: gl => !isWebGL2(gl) ? 36064 : undefined,\n  [GL_FRAGMENT_SHADER_DERIVATIVE_HINT]: gl => !isWebGL2(gl) ? GL_DONT_CARE : undefined,\n  [35977]: getWebGL2ValueOrZero,\n  [32937]: getWebGL2ValueOrZero,\n  [GL_GPU_DISJOINT_EXT]: (gl, getParameter) => {\n    const ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n    return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n  },\n  [GL_UNMASKED_VENDOR_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n  },\n  [GL_UNMASKED_RENDERER_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n  },\n  [GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT]: (gl, getParameter) => {\n    const ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n    return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n  },\n  [32883]: getWebGL2ValueOrZero,\n  [35071]: getWebGL2ValueOrZero,\n  [37447]: getWebGL2ValueOrZero,\n  [36063]: (gl, getParameter) => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n    }\n\n    return undefined;\n  },\n  [35379]: getWebGL2ValueOrZero,\n  [35374]: getWebGL2ValueOrZero,\n  [35377]: getWebGL2ValueOrZero,\n  [34852]: gl => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n    }\n\n    return undefined;\n  },\n  [36203]: gl => gl.getExtension(OES_element_index) ? 2147483647 : 65535,\n  [33001]: gl => gl.getExtension(OES_element_index) ? 16777216 : 65535,\n  [33000]: gl => 16777216,\n  [37157]: getWebGL2ValueOrZero,\n  [35373]: getWebGL2ValueOrZero,\n  [35657]: getWebGL2ValueOrZero,\n  [36183]: getWebGL2ValueOrZero,\n  [37137]: getWebGL2ValueOrZero,\n  [34045]: getWebGL2ValueOrZero,\n  [35978]: getWebGL2ValueOrZero,\n  [35979]: getWebGL2ValueOrZero,\n  [35968]: getWebGL2ValueOrZero,\n  [35376]: getWebGL2ValueOrZero,\n  [35375]: getWebGL2ValueOrZero,\n  [35659]: getWebGL2ValueOrZero,\n  [37154]: getWebGL2ValueOrZero,\n  [35371]: getWebGL2ValueOrZero,\n  [35658]: getWebGL2ValueOrZero,\n  [35076]: getWebGL2ValueOrZero,\n  [35077]: getWebGL2ValueOrZero,\n  [35380]: getWebGL2ValueOrZero\n};\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  const limit = WEBGL_PARAMETERS[pname];\n  const value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  const result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import { assert } from '../utils/assert';\nimport { isWebGL2 } from '../utils/webgl-checks';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nconst OES_vertex_array_object = 'OES_vertex_array_object';\nconst ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport const WEBGL2_CONTEXT_POLYFILLS = {\n  [OES_vertex_array_object]: {\n    meta: {\n      suffix: 'OES'\n    },\n    createVertexArray: () => {\n      assert(false, ERR_VAO_NOT_SUPPORTED);\n    },\n    deleteVertexArray: () => {},\n    bindVertexArray: () => {},\n    isVertexArray: () => false\n  },\n  [ANGLE_instanced_arrays]: {\n    meta: {\n      suffix: 'ANGLE'\n    },\n\n    vertexAttribDivisor(location, divisor) {\n      assert(divisor === 0, 'WebGL instanced rendering not supported');\n    },\n\n    drawElementsInstanced: () => {},\n    drawArraysInstanced: () => {}\n  },\n  [WEBGL_draw_buffers]: {\n    meta: {\n      suffix: 'WEBGL'\n    },\n    drawBuffers: () => {\n      assert(false);\n    }\n  },\n  [EXT_disjoint_timer_query]: {\n    meta: {\n      suffix: 'EXT'\n    },\n    createQuery: () => {\n      assert(false);\n    },\n    deleteQuery: () => {\n      assert(false);\n    },\n    beginQuery: () => {\n      assert(false);\n    },\n    endQuery: () => {},\n\n    getQuery(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryParameter(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryObject: () => {}\n  }\n};\nexport const WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: (gl, originalFunc, attachment) => {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: (gl, originalFunc, location, pname) => {\n    const {\n      webgl2,\n      ext\n    } = getExtensionData(gl, ANGLE_instanced_arrays);\n    let result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: (gl, originalFunc, program, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: (gl, originalFunc, target, format, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n\n  getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        const {\n          extensions\n        } = gl.luma;\n        const ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n\n  getParameter: getParameterPolyfill,\n\n  hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n\n};\n//# sourceMappingURL=polyfill-table.js.map","import { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n  const {\n    luma\n  } = gl;\n\n  if (!luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: luma,\n      target2: gl\n    });\n    luma.polyfilled = true;\n  }\n\n  return gl;\n}\nconst global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  const EXTENSIONS = gl.getSupportedExtensions() || [];\n\n  for (const extension of EXTENSIONS) {\n    gl.luma[extension] = gl.getExtension(extension);\n  }\n}\n\nfunction installOverrides(gl, {\n  target,\n  target2\n}) {\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(key => {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      const originalFunc = gl[key] ? gl[key].bind(gl) : () => {};\n      const polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  for (const extension of Object.getOwnPropertyNames(polyfills)) {\n    if (extension !== 'overrides') {\n      polyfillExtension(gl, {\n        extension,\n        target: gl.luma,\n        target2: gl\n      });\n    }\n  }\n}\n\nfunction polyfillExtension(gl, {\n  extension,\n  target,\n  target2\n}) {\n  const defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  const {\n    meta = {}\n  } = defaults;\n  const {\n    suffix = ''\n  } = meta;\n  const ext = gl.getExtension(extension);\n\n  for (const key of Object.keys(defaults)) {\n    const extKey = \"\".concat(key).concat(suffix);\n    let polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = (...args) => ext[extKey](...args);\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nexport const GL_PARAMETER_DEFAULTS = {\n  [3042]: false,\n  [32773]: new Float32Array([0, 0, 0, 0]),\n  [32777]: 32774,\n  [34877]: 32774,\n  [32969]: 1,\n  [32968]: 0,\n  [32971]: 1,\n  [32970]: 0,\n  [3106]: new Float32Array([0, 0, 0, 0]),\n  [3107]: [true, true, true, true],\n  [2884]: false,\n  [2885]: 1029,\n  [2929]: false,\n  [2931]: 1,\n  [2932]: 513,\n  [2928]: new Float32Array([0, 1]),\n  [2930]: true,\n  [3024]: true,\n  [36006]: null,\n  [2886]: 2305,\n  [33170]: 4352,\n  [2849]: 1,\n  [32823]: false,\n  [32824]: 0,\n  [10752]: 0,\n  [32938]: 1.0,\n  [32939]: false,\n  [3089]: false,\n  [3088]: new Int32Array([0, 0, 1024, 1024]),\n  [2960]: false,\n  [2961]: 0,\n  [2968]: 0xffffffff,\n  [36005]: 0xffffffff,\n  [2962]: 519,\n  [2967]: 0,\n  [2963]: 0xffffffff,\n  [34816]: 519,\n  [36003]: 0,\n  [36004]: 0xffffffff,\n  [2964]: 7680,\n  [2965]: 7680,\n  [2966]: 7680,\n  [34817]: 7680,\n  [34818]: 7680,\n  [34819]: 7680,\n  [2978]: [0, 0, 1024, 1024],\n  [3333]: 4,\n  [3317]: 4,\n  [37440]: false,\n  [37441]: false,\n  [37443]: 37444,\n  [35723]: 4352,\n  [36010]: null,\n  [35977]: false,\n  [3330]: 0,\n  [3332]: 0,\n  [3331]: 0,\n  [3314]: 0,\n  [32878]: 0,\n  [3316]: 0,\n  [3315]: 0,\n  [32877]: 0\n};\n\nconst enable = (gl, value, key) => value ? gl.enable(key) : gl.disable(key);\n\nconst hint = (gl, value, key) => gl.hint(key, value);\n\nconst pixelStorei = (gl, value, key) => gl.pixelStorei(key, value);\n\nconst drawFramebuffer = (gl, value) => {\n  const target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nconst readFramebuffer = (gl, value) => {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport const GL_PARAMETER_SETTERS = {\n  [3042]: enable,\n  [32773]: (gl, value) => gl.blendColor(...value),\n  [32777]: 'blendEquation',\n  [34877]: 'blendEquation',\n  [32969]: 'blendFunc',\n  [32968]: 'blendFunc',\n  [32971]: 'blendFunc',\n  [32970]: 'blendFunc',\n  [3106]: (gl, value) => gl.clearColor(...value),\n  [3107]: (gl, value) => gl.colorMask(...value),\n  [2884]: enable,\n  [2885]: (gl, value) => gl.cullFace(value),\n  [2929]: enable,\n  [2931]: (gl, value) => gl.clearDepth(value),\n  [2932]: (gl, value) => gl.depthFunc(value),\n  [2928]: (gl, value) => gl.depthRange(...value),\n  [2930]: (gl, value) => gl.depthMask(value),\n  [3024]: enable,\n  [35723]: hint,\n  [36006]: drawFramebuffer,\n  [2886]: (gl, value) => gl.frontFace(value),\n  [33170]: hint,\n  [2849]: (gl, value) => gl.lineWidth(value),\n  [32823]: enable,\n  [32824]: 'polygonOffset',\n  [10752]: 'polygonOffset',\n  [35977]: enable,\n  [32938]: 'sampleCoverage',\n  [32939]: 'sampleCoverage',\n  [3089]: enable,\n  [3088]: (gl, value) => gl.scissor(...value),\n  [2960]: enable,\n  [2961]: (gl, value) => gl.clearStencil(value),\n  [2968]: (gl, value) => gl.stencilMaskSeparate(1028, value),\n  [36005]: (gl, value) => gl.stencilMaskSeparate(1029, value),\n  [2962]: 'stencilFuncFront',\n  [2967]: 'stencilFuncFront',\n  [2963]: 'stencilFuncFront',\n  [34816]: 'stencilFuncBack',\n  [36003]: 'stencilFuncBack',\n  [36004]: 'stencilFuncBack',\n  [2964]: 'stencilOpFront',\n  [2965]: 'stencilOpFront',\n  [2966]: 'stencilOpFront',\n  [34817]: 'stencilOpBack',\n  [34818]: 'stencilOpBack',\n  [34819]: 'stencilOpBack',\n  [2978]: (gl, value) => gl.viewport(...value),\n  [3333]: pixelStorei,\n  [3317]: pixelStorei,\n  [37440]: pixelStorei,\n  [37441]: pixelStorei,\n  [37443]: pixelStorei,\n  [3330]: pixelStorei,\n  [3332]: pixelStorei,\n  [3331]: pixelStorei,\n  [36010]: readFramebuffer,\n  [3314]: pixelStorei,\n  [32878]: pixelStorei,\n  [3316]: pixelStorei,\n  [3315]: pixelStorei,\n  [32877]: pixelStorei,\n  framebuffer: (gl, framebuffer) => {\n    const handle = framebuffer && 'handle' in framebuffer ? framebuffer.handle : framebuffer;\n    return gl.bindFramebuffer(36160, handle);\n  },\n  blend: (gl, value) => value ? gl.enable(3042) : gl.disable(3042),\n  blendColor: (gl, value) => gl.blendColor(...value),\n  blendEquation: (gl, args) => {\n    args = isArray(args) ? args : [args, args];\n    gl.blendEquationSeparate(...args);\n  },\n  blendFunc: (gl, args) => {\n    args = isArray(args) && args.length === 2 ? [...args, ...args] : args;\n    gl.blendFuncSeparate(...args);\n  },\n  clearColor: (gl, value) => gl.clearColor(...value),\n  clearDepth: (gl, value) => gl.clearDepth(value),\n  clearStencil: (gl, value) => gl.clearStencil(value),\n  colorMask: (gl, value) => gl.colorMask(...value),\n  cull: (gl, value) => value ? gl.enable(2884) : gl.disable(2884),\n  cullFace: (gl, value) => gl.cullFace(value),\n  depthTest: (gl, value) => value ? gl.enable(2929) : gl.disable(2929),\n  depthFunc: (gl, value) => gl.depthFunc(value),\n  depthMask: (gl, value) => gl.depthMask(value),\n  depthRange: (gl, value) => gl.depthRange(...value),\n  dither: (gl, value) => value ? gl.enable(3024) : gl.disable(3024),\n  derivativeHint: (gl, value) => {\n    gl.hint(35723, value);\n  },\n  frontFace: (gl, value) => gl.frontFace(value),\n  mipmapHint: (gl, value) => gl.hint(33170, value),\n  lineWidth: (gl, value) => gl.lineWidth(value),\n  polygonOffsetFill: (gl, value) => value ? gl.enable(32823) : gl.disable(32823),\n  polygonOffset: (gl, value) => gl.polygonOffset(...value),\n  sampleCoverage: (gl, value) => gl.sampleCoverage(...value),\n  scissorTest: (gl, value) => value ? gl.enable(3089) : gl.disable(3089),\n  scissor: (gl, value) => gl.scissor(...value),\n  stencilTest: (gl, value) => value ? gl.enable(2960) : gl.disable(2960),\n  stencilMask: (gl, value) => {\n    value = isArray(value) ? value : [value, value];\n    const [mask, backMask] = value;\n    gl.stencilMaskSeparate(1028, mask);\n    gl.stencilMaskSeparate(1029, backMask);\n  },\n  stencilFunc: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [func, ref, mask, backFunc, backRef, backMask] = args;\n    gl.stencilFuncSeparate(1028, func, ref, mask);\n    gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n  },\n  stencilOp: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [sfail, dpfail, dppass, backSfail, backDpfail, backDppass] = args;\n    gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n    gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n  },\n  viewport: (gl, value) => gl.viewport(...value)\n};\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport const GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: (gl, values, cache) => gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache)),\n  blendFunc: (gl, values, cache) => gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache)),\n  polygonOffset: (gl, values, cache) => gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache)),\n  sampleCoverage: (gl, values, cache) => gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache)),\n  stencilFuncFront: (gl, values, cache) => gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache)),\n  stencilFuncBack: (gl, values, cache) => gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache)),\n  stencilOpFront: (gl, values, cache) => gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache)),\n  stencilOpBack: (gl, values, cache) => gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache))\n};\nexport const GL_HOOKED_SETTERS = {\n  enable: (update, capability) => update({\n    [capability]: true\n  }),\n  disable: (update, capability) => update({\n    [capability]: false\n  }),\n  pixelStorei: (update, pname, value) => update({\n    [pname]: value\n  }),\n  hint: (update, pname, hint) => update({\n    [pname]: hint\n  }),\n  bindFramebuffer: (update, target, framebuffer) => {\n    switch (target) {\n      case 36160:\n        return update({\n          [36006]: framebuffer,\n          [36010]: framebuffer\n        });\n\n      case 36009:\n        return update({\n          [36006]: framebuffer\n        });\n\n      case 36008:\n        return update({\n          [36010]: framebuffer\n        });\n\n      default:\n        return null;\n    }\n  },\n  blendColor: (update, r, g, b, a) => update({\n    [32773]: new Float32Array([r, g, b, a])\n  }),\n  blendEquation: (update, mode) => update({\n    [32777]: mode,\n    [34877]: mode\n  }),\n  blendEquationSeparate: (update, modeRGB, modeAlpha) => update({\n    [32777]: modeRGB,\n    [34877]: modeAlpha\n  }),\n  blendFunc: (update, src, dst) => update({\n    [32969]: src,\n    [32968]: dst,\n    [32971]: src,\n    [32970]: dst\n  }),\n  blendFuncSeparate: (update, srcRGB, dstRGB, srcAlpha, dstAlpha) => update({\n    [32969]: srcRGB,\n    [32968]: dstRGB,\n    [32971]: srcAlpha,\n    [32970]: dstAlpha\n  }),\n  clearColor: (update, r, g, b, a) => update({\n    [3106]: new Float32Array([r, g, b, a])\n  }),\n  clearDepth: (update, depth) => update({\n    [2931]: depth\n  }),\n  clearStencil: (update, s) => update({\n    [2961]: s\n  }),\n  colorMask: (update, r, g, b, a) => update({\n    [3107]: [r, g, b, a]\n  }),\n  cullFace: (update, mode) => update({\n    [2885]: mode\n  }),\n  depthFunc: (update, func) => update({\n    [2932]: func\n  }),\n  depthRange: (update, zNear, zFar) => update({\n    [2928]: new Float32Array([zNear, zFar])\n  }),\n  depthMask: (update, mask) => update({\n    [2930]: mask\n  }),\n  frontFace: (update, face) => update({\n    [2886]: face\n  }),\n  lineWidth: (update, width) => update({\n    [2849]: width\n  }),\n  polygonOffset: (update, factor, units) => update({\n    [32824]: factor,\n    [10752]: units\n  }),\n  sampleCoverage: (update, value, invert) => update({\n    [32938]: value,\n    [32939]: invert\n  }),\n  scissor: (update, x, y, width, height) => update({\n    [3088]: new Int32Array([x, y, width, height])\n  }),\n  stencilMask: (update, mask) => update({\n    [2968]: mask,\n    [36005]: mask\n  }),\n  stencilMaskSeparate: (update, face, mask) => update({\n    [face === 1028 ? 2968 : 36005]: mask\n  }),\n  stencilFunc: (update, func, ref, mask) => update({\n    [2962]: func,\n    [2967]: ref,\n    [2963]: mask,\n    [34816]: func,\n    [36003]: ref,\n    [36004]: mask\n  }),\n  stencilFuncSeparate: (update, face, func, ref, mask) => update({\n    [face === 1028 ? 2962 : 34816]: func,\n    [face === 1028 ? 2967 : 36003]: ref,\n    [face === 1028 ? 2963 : 36004]: mask\n  }),\n  stencilOp: (update, fail, zfail, zpass) => update({\n    [2964]: fail,\n    [2965]: zfail,\n    [2966]: zpass,\n    [34817]: fail,\n    [34818]: zfail,\n    [34819]: zpass\n  }),\n  stencilOpSeparate: (update, face, fail, zfail, zpass) => update({\n    [face === 1028 ? 2964 : 34817]: fail,\n    [face === 1028 ? 2965 : 34818]: zfail,\n    [face === 1028 ? 2966 : 34819]: zpass\n  }),\n  viewport: (update, x, y, width, height) => update({\n    [2978]: [x, y, width, height]\n  })\n};\n\nconst isEnabled = (gl, key) => gl.isEnabled(key);\n\nexport const GL_PARAMETER_GETTERS = {\n  [3042]: isEnabled,\n  [2884]: isEnabled,\n  [2929]: isEnabled,\n  [3024]: isEnabled,\n  [32823]: isEnabled,\n  [32926]: isEnabled,\n  [32928]: isEnabled,\n  [3089]: isEnabled,\n  [2960]: isEnabled,\n  [35977]: isEnabled\n};\n//# sourceMappingURL=webgl-parameter-tables.js.map","export function isObjectEmpty(object) {\n  for (const key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  const isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  const isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (let i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","import { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert } from '../utils/assert';\nimport { deepArrayEqual } from '../utils/utils';\n\nfunction installGetterOverride(gl, functionName) {\n  const originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get(...params) {\n    const pname = params[0];\n\n    if (!(pname in gl.state.cache)) {\n      gl.state.cache[pname] = originalGetterFunc(...params);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc(...params);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  const originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set(...params) {\n    const {\n      valueChanged,\n      oldValue\n    } = setter(gl.state._updateCache, ...params);\n\n    if (valueChanged) {\n      originalSetterFunc(...params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  const originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nclass GLState {\n  constructor(gl, {\n    copyState = false,\n    log = () => {}\n  } = {}) {\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  push(values = {}) {\n    this.stateStack.push({});\n  }\n\n  pop() {\n    assert(this.stateStack.length > 0);\n    const oldValues = this.stateStack[this.stateStack.length - 1];\n    setParameters(this.gl, oldValues);\n    this.stateStack.pop();\n  }\n\n  _updateCache(values) {\n    let valueChanged = false;\n    let oldValue;\n    const oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n    for (const key in values) {\n      assert(key !== undefined);\n      const value = values[key];\n      const cached = this.cache[key];\n\n      if (!deepArrayEqual(value, cached)) {\n        valueChanged = true;\n        oldValue = cached;\n\n        if (oldValues && !(key in oldValues)) {\n          oldValues[key] = cached;\n        }\n\n        this.cache[key] = value;\n      }\n    }\n\n    return {\n      valueChanged,\n      oldValue\n    };\n  }\n\n}\n\nexport function trackContextState(gl, options = {}) {\n  const {\n    enable = true,\n    copyState\n  } = options;\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    const global_ = typeof global !== 'undefined' ? global : window;\n    const {\n      polyfillContext\n    } = global_;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState\n    });\n    installProgramSpy(gl);\n\n    for (const key in GL_HOOKED_SETTERS) {\n      const setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","import { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { assert } from '../utils/assert';\nimport { isWebGL } from '../utils/webgl-checks';\nimport { isObjectEmpty } from '../utils/utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  const compositeSetters = {};\n\n  for (const key in values) {\n    const glConstant = Number(key);\n    const setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  const cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (const key in compositeSetters) {\n      const compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    const key = parameters;\n    const getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  const parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  const state = {};\n\n  for (const key of parameterKeys) {\n    const getter = GL_PARAMETER_GETTERS[key];\n    state[key] = getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  const {\n    nocatch = true\n  } = parameters;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  let value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","export function cssToDeviceRatio(gl) {\n  const {\n    luma\n  } = gl;\n\n  if (gl.canvas && luma) {\n    const {\n      clientWidth\n    } = luma.canvasSizeInfo;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel, yInvert = true) {\n  const ratio = cssToDeviceRatio(gl);\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  const windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  const x = scaleX(pixel[0], ratio, width);\n  let y = scaleY(pixel[1], ratio, height, yInvert);\n  let t = scaleX(pixel[0] + 1, ratio, width);\n  const xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  let yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x,\n    y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  const r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { global, isBrowser as getIsBrowser } from 'probe.gl/env';\nimport { trackContextState } from '../state-tracker/track-context-state';\nimport { log } from '../utils/log';\nimport { assert } from '../utils/assert';\nimport { getDevicePixelRatio } from '../utils/device-pixels';\nimport { isWebGL2 } from '../utils/webgl-checks';\nconst isBrowser = getIsBrowser();\nconst isPage = isBrowser && typeof document !== 'undefined';\nconst CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext(options = {}) {\n  assert(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    width,\n    height\n  } = options;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  let gl;\n  const {\n    canvas\n  } = options;\n  const targetCanvas = getCanvas({\n    canvas,\n    width,\n    height,\n    onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl, options = {}) {\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    manageState,\n    debug\n  } = options;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: (...args) => log.log(1, ...args)()\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!global.makeDebugContext) {\n      log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = global.makeDebugContext(gl, options);\n      log.level = Math.max(log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  const vendorMasked = gl.getParameter(7936);\n  const rendererMasked = gl.getParameter(7937);\n  const ext = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  const rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked,\n    rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl, options = {}) {\n  if (gl.canvas) {\n    const devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  const ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  const {\n    onError\n  } = options;\n  let errorMessage = null;\n\n  const onCreateError = error => errorMessage = error.statusMessage || errorMessage;\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  const {\n    webgl1 = true,\n    webgl2 = true\n  } = options;\n  let gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context: \").concat(errorMessage || 'Unknown error'));\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas({\n  canvas,\n  width = 800,\n  height = 600,\n  onError\n}) {\n  let targetCanvas;\n\n  if (typeof canvas === 'string') {\n    const isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  const webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  const info = getContextDebugInfo(gl);\n  const driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  const debug = gl.debug ? ' debug' : '';\n  log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  let clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  let clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  const cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    let clampedPixelRatio = devicePixelRatio;\n    const canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    const canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      log.warn(\"Device pixel ratio clamped\")();\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth,\n      clientHeight,\n      devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","export const VERTEX_SHADER = 'vs';\nexport const FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","import { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nconst MODULE_INJECTORS = {\n  [VERTEX_SHADER]: MODULE_INJECTORS_VS,\n  [FRAGMENT_SHADER]: MODULE_INJECTORS_FS\n};\nexport const DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nconst REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nconst fragments = [];\nexport default function injectShader(source, type, inject, injectStandardStubs = false) {\n  const isVertex = type === VERTEX_SHADER;\n\n  for (const key in inject) {\n    const fragmentData = inject[key];\n    fragmentData.sort((a, b) => a.order - b.order);\n    fragments.length = fragmentData.length;\n\n    for (let i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    const fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, match => match + fragmentString);\n    }\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, match => match + MODULE_INJECTORS[type]);\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  const result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(inject => {\n    for (const key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","export const MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport const MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";\n//# sourceMappingURL=module-injectors.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { getTypedArrayFromGLType } from '../webgl-utils';\nimport { checkProps, assert } from '../utils';\nconst DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nconst PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\nexport default class Accessor {\n  static getBytesPerElement(accessor) {\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT;\n  }\n\n  static getBytesPerVertex(accessor) {\n    assert(accessor.size);\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n  }\n\n  static resolve(...accessors) {\n    return new Accessor(...[DEFAULT_ACCESSOR_VALUES, ...accessors]);\n  }\n\n  constructor(...accessors) {\n    accessors.forEach(accessor => this._assign(accessor));\n    Object.freeze(this);\n  }\n\n  toString() {\n    return JSON.stringify(this);\n  }\n\n  get BYTES_PER_ELEMENT() {\n    return Accessor.getBytesPerElement(this);\n  }\n\n  get BYTES_PER_VERTEX() {\n    return Accessor.getBytesPerVertex(this);\n  }\n\n  _assign(props = {}) {\n    props = checkProps('Accessor', props, PROP_CHECKS);\n\n    if (props.type !== undefined) {\n      this.type = props.type;\n\n      if (props.type === 5124 || props.type === 5125) {\n        this.integer = true;\n      }\n    }\n\n    if (props.size !== undefined) {\n      this.size = props.size;\n    }\n\n    if (props.offset !== undefined) {\n      this.offset = props.offset;\n    }\n\n    if (props.stride !== undefined) {\n      this.stride = props.stride;\n    }\n\n    if (props.normalized !== undefined) {\n      this.normalized = props.normalized;\n    }\n\n    if (props.integer !== undefined) {\n      this.integer = props.integer;\n    }\n\n    if (props.divisor !== undefined) {\n      this.divisor = props.divisor;\n    }\n\n    if (props.buffer !== undefined) {\n      this.buffer = props.buffer;\n    }\n\n    if (props.index !== undefined) {\n      if (typeof props.index === 'boolean') {\n        this.index = props.index ? 1 : 0;\n      } else {\n        this.index = props.index;\n      }\n    }\n\n    if (props.instanced !== undefined) {\n      this.divisor = props.instanced ? 1 : 0;\n    }\n\n    if (props.isInstanced !== undefined) {\n      this.divisor = props.isInstanced ? 1 : 0;\n    }\n\n    return this;\n  }\n\n}\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","import Resource from './resource';\nimport Accessor from './accessor';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils';\nimport { assertWebGL2Context, log } from '@luma.gl/gltools';\nimport { assert, checkProps } from '../utils';\nconst DEBUG_DATA_LENGTH = 10;\nconst DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nconst PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nconst PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\nexport default class Buffer extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n    this.target = props.target || (this.gl.webgl2 ? 36662 : 34962);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  getElementCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n  }\n\n  getVertexCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n  }\n\n  initialize(props = {}) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    if (Number.isFinite(props)) {\n      props = {\n        byteLength: props\n      };\n    }\n\n    props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n    this.usage = props.usage || 35044;\n    this.debugData = null;\n    this.setAccessor(Object.assign({}, props, props.accessor));\n\n    if (props.data) {\n      this._setData(props.data, props.offset, props.byteLength);\n    } else {\n      this._setByteLength(props.byteLength || 0);\n    }\n\n    return this;\n  }\n\n  setProps(props) {\n    props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n    if ('accessor' in props) {\n      this.setAccessor(props.accessor);\n    }\n\n    return this;\n  }\n\n  setAccessor(accessor) {\n    accessor = Object.assign({}, accessor);\n    delete accessor.buffer;\n    this.accessor = new Accessor(accessor);\n    return this;\n  }\n\n  reallocate(byteLength) {\n    if (byteLength > this.byteLength) {\n      this._setByteLength(byteLength);\n\n      return true;\n    }\n\n    this.bytesUsed = byteLength;\n    return false;\n  }\n\n  setData(props) {\n    return this.initialize(props);\n  }\n\n  subData(props) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    const {\n      data,\n      offset = 0,\n      srcOffset = 0\n    } = props;\n    const byteLength = props.byteLength || props.length;\n    assert(data);\n    const target = this.gl.webgl2 ? 36663 : this.target;\n    this.gl.bindBuffer(target, this.handle);\n\n    if (srcOffset !== 0 || byteLength !== undefined) {\n      assertWebGL2Context(this.gl);\n      this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n    } else {\n      this.gl.bufferSubData(target, offset, data);\n    }\n\n    this.gl.bindBuffer(target, null);\n    this.debugData = null;\n\n    this._inferType(data);\n\n    return this;\n  }\n\n  copyData({\n    sourceBuffer,\n    readOffset = 0,\n    writeOffset = 0,\n    size\n  }) {\n    const {\n      gl\n    } = this;\n    assertWebGL2Context(gl);\n    gl.bindBuffer(36662, sourceBuffer.handle);\n    gl.bindBuffer(36663, this.handle);\n    gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n    gl.bindBuffer(36662, null);\n    gl.bindBuffer(36663, null);\n    this.debugData = null;\n    return this;\n  }\n\n  getData({\n    dstData = null,\n    srcByteOffset = 0,\n    dstOffset = 0,\n    length = 0\n  } = {}) {\n    assertWebGL2Context(this.gl);\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n\n    const sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n    const dstElementOffset = dstOffset;\n    let dstAvailableElementCount;\n    let dstElementCount;\n\n    if (dstData) {\n      dstElementCount = dstData.length;\n      dstAvailableElementCount = dstElementCount - dstElementOffset;\n    } else {\n      dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n      dstElementCount = dstElementOffset + dstAvailableElementCount;\n    }\n\n    const copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n    length = length || copyElementCount;\n    assert(length <= copyElementCount);\n    dstData = dstData || new ArrayType(dstElementCount);\n    this.gl.bindBuffer(36662, this.handle);\n    this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n    this.gl.bindBuffer(36662, null);\n    return dstData;\n  }\n\n  bind({\n    target = this.target,\n    index = this.accessor && this.accessor.index,\n    offset = 0,\n    size\n  } = {}) {\n    if (target === 35345 || target === 35982) {\n      if (size !== undefined) {\n        this.gl.bindBufferRange(target, index, this.handle, offset, size);\n      } else {\n        assert(offset === 0);\n        this.gl.bindBufferBase(target, index, this.handle);\n      }\n    } else {\n      this.gl.bindBuffer(target, this.handle);\n    }\n\n    return this;\n  }\n\n  unbind({\n    target = this.target,\n    index = this.accessor && this.accessor.index\n  } = {}) {\n    const isIndexedBuffer = target === 35345 || target === 35982;\n\n    if (isIndexedBuffer) {\n      this.gl.bindBufferBase(target, index, null);\n    } else {\n      this.gl.bindBuffer(target, null);\n    }\n\n    return this;\n  }\n\n  getDebugData() {\n    if (!this.debugData) {\n      this.debugData = this.getData({\n        length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n      });\n      return {\n        data: this.debugData,\n        changed: true\n      };\n    }\n\n    return {\n      data: this.debugData,\n      changed: false\n    };\n  }\n\n  invalidateDebugData() {\n    this.debugData = null;\n  }\n\n  _setData(data, offset = 0, byteLength = data.byteLength + offset) {\n    assert(ArrayBuffer.isView(data));\n\n    this._trackDeallocatedMemory();\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, byteLength, this.usage);\n    this.gl.bufferSubData(target, offset, data);\n    this.gl.bindBuffer(target, null);\n    this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    const type = getGLTypeFromTypedArray(data);\n    assert(type);\n    this.setAccessor(new Accessor(this.accessor, {\n      type\n    }));\n    return this;\n  }\n\n  _setByteLength(byteLength, usage = this.usage) {\n    assert(byteLength >= 0);\n\n    this._trackDeallocatedMemory();\n\n    let data = byteLength;\n\n    if (byteLength === 0) {\n      data = new Float32Array(0);\n    }\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, data, usage);\n    this.gl.bindBuffer(target, null);\n    this.usage = usage;\n    this.debugData = null;\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    return this;\n  }\n\n  _getTarget() {\n    return this.gl.webgl2 ? 36663 : this.target;\n  }\n\n  _getAvailableElementCount(srcByteOffset) {\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n    const sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n    return this.getElementCount() - sourceElementOffset;\n  }\n\n  _inferType(data) {\n    if (!this.accessor.type) {\n      this.setAccessor(new Accessor(this.accessor, {\n        type: getGLTypeFromTypedArray(data)\n      }));\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createBuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteBuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _getParameter(pname) {\n    this.gl.bindBuffer(this.target, this.handle);\n    const value = this.gl.getBufferParameter(this.target, pname);\n    this.gl.bindBuffer(this.target, null);\n    return value;\n  }\n\n  get type() {\n    log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n    return this.accessor.type;\n  }\n\n  get bytes() {\n    log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n    return this.byteLength;\n  }\n\n  setByteLength(byteLength) {\n    log.deprecated('setByteLength', 'reallocate')();\n    return this.reallocate(byteLength);\n  }\n\n  updateAccessor(opts) {\n    log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n    this.accessor = new Accessor(this.accessor, opts);\n    return this;\n  }\n\n}\n//# sourceMappingURL=buffer.js.map","import { assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nconst GL_DEPTH_BUFFER_BIT = 0x00000100;\nconst GL_STENCIL_BUFFER_BIT = 0x00000400;\nconst GL_COLOR_BUFFER_BIT = 0x00004000;\nconst GL_COLOR = 0x1800;\nconst GL_DEPTH = 0x1801;\nconst GL_STENCIL = 0x1802;\nconst GL_DEPTH_STENCIL = 0x84f9;\nconst ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl, {\n  framebuffer = null,\n  color = null,\n  depth = null,\n  stencil = null\n} = {}) {\n  const parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  let clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, () => {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl, {\n  framebuffer = null,\n  buffer = GL_COLOR,\n  drawBuffer = 0,\n  value = [0, 0, 0, 0]\n} = {}) {\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer\n  }, () => {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        const [depth, stencil] = value;\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import { assert } from '../utils';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { flipRows, scalePixels } from '../webgl-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils';\nexport function readPixelsToArray(source, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408\n  } = options;\n  let {\n    sourceAttachment = 36064,\n    target = null,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle,\n    attachments\n  } = framebuffer;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, {\n  sourceX = 0,\n  sourceY = 0,\n  sourceFormat = 6408,\n  target = null,\n  targetByteOffset = 0,\n  sourceWidth,\n  sourceHeight,\n  sourceType\n}) {\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  const gl2 = assertWebGL2Context(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    const components = glFormatToComponents(sourceFormat);\n    const byteCount = glTypeToBytes(sourceType);\n    const byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl2, {\n      byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl2, {\n    framebuffer\n  }, () => {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source, {\n  sourceAttachment = 36064,\n  targetMaxHeight = Number.MAX_SAFE_INTEGER\n} = {}) {\n  let data = readPixelsToArray(source, {\n    sourceAttachment\n  });\n  let {\n    width,\n    height\n  } = source;\n\n  while (height > targetMaxHeight) {\n    ({\n      data,\n      width,\n      height\n    } = scalePixels({\n      data,\n      width,\n      height\n    }));\n  }\n\n  flipRows({\n    data,\n    width,\n    height\n  });\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext('2d');\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source, {\n  sourceAttachment = 36064,\n  targetImage = null\n} = {}) {\n  const dataUrl = copyToDataUrl(source, {\n    sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    targetMipmaplevel = 0,\n    targetInternalFormat = 6408\n  } = options;\n  let {\n    targetX,\n    targetY,\n    targetZ,\n    width,\n    height\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle\n  } = framebuffer;\n  const isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  let texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return texture;\n}\nexport function blit(source, target, options = {}) {\n  const {\n    sourceX0 = 0,\n    sourceY0 = 0,\n    targetX0 = 0,\n    targetY0 = 0,\n    color = true,\n    depth = false,\n    stencil = false,\n    filter = 9728\n  } = options;\n  let {\n    sourceX1,\n    sourceY1,\n    targetX1,\n    targetY1,\n    sourceAttachment = 36064,\n    mask = 0\n  } = options;\n  const {\n    framebuffer: srcFramebuffer,\n    deleteFramebuffer: deleteSrcFramebuffer\n  } = getFramebuffer(source);\n  const {\n    framebuffer: dstFramebuffer,\n    deleteFramebuffer: deleteDstFramebuffer\n  } = getFramebuffer(target);\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  const {\n    gl,\n    handle,\n    width,\n    height,\n    readBuffer\n  } = dstFramebuffer;\n  const gl2 = assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  const prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  const prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer.delete();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer.delete();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  const ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  const components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","import { getWebGL2Context, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { getKey } from '../webgl-utils';\nimport { assert } from '../utils';\nconst ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\nexport default class Framebuffer extends Resource {\n  static isSupported(gl, options = {}) {\n    const {\n      colorBufferFloat,\n      colorBufferHalfFloat\n    } = options;\n    let supported = true;\n\n    if (colorBufferFloat) {\n      supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n    }\n\n    if (colorBufferHalfFloat) {\n      supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n    }\n\n    return supported;\n  }\n\n  static getDefaultFramebuffer(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n      id: 'default-framebuffer',\n      handle: null,\n      attachments: {}\n    });\n    return gl.luma.defaultFramebuffer;\n  }\n\n  get MAX_COLOR_ATTACHMENTS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n  }\n\n  get MAX_DRAW_BUFFERS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.width = null;\n    this.height = null;\n    this.attachments = {};\n    this.readBuffer = 36064;\n    this.drawBuffers = [36064];\n    this.ownResources = [];\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  get color() {\n    return this.attachments[36064] || null;\n  }\n\n  get texture() {\n    return this.attachments[36064] || null;\n  }\n\n  get depth() {\n    return this.attachments[36096] || this.attachments[33306] || null;\n  }\n\n  get stencil() {\n    return this.attachments[36128] || this.attachments[33306] || null;\n  }\n\n  initialize({\n    width = 1,\n    height = 1,\n    attachments = null,\n    color = true,\n    depth = true,\n    stencil = false,\n    check = true,\n    readBuffer = undefined,\n    drawBuffers = undefined\n  }) {\n    assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n    this.width = width;\n    this.height = height;\n\n    if (attachments) {\n      for (const attachment in attachments) {\n        const target = attachments[attachment];\n        const object = Array.isArray(target) ? target[0] : target;\n        object.resize({\n          width,\n          height\n        });\n      }\n    } else {\n      attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n    }\n\n    this.update({\n      clearAttachments: true,\n      attachments,\n      readBuffer,\n      drawBuffers\n    });\n\n    if (attachments && check) {\n      this.checkStatus();\n    }\n  }\n\n  delete() {\n    for (const resource of this.ownResources) {\n      resource.delete();\n    }\n\n    super.delete();\n    return this;\n  }\n\n  update({\n    attachments = {},\n    readBuffer,\n    drawBuffers,\n    clearAttachments = false,\n    resizeAttachments = true\n  }) {\n    this.attach(attachments, {\n      clearAttachments,\n      resizeAttachments\n    });\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n    if (readBuffer) {\n      this._setReadBuffer(readBuffer);\n    }\n\n    if (drawBuffers) {\n      this._setDrawBuffers(drawBuffers);\n    }\n\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  resize(options = {}) {\n    let {\n      width,\n      height\n    } = options;\n\n    if (this.handle === null) {\n      assert(width === undefined && height === undefined);\n      this.width = this.gl.drawingBufferWidth;\n      this.height = this.gl.drawingBufferHeight;\n      return this;\n    }\n\n    if (width === undefined) {\n      width = this.gl.drawingBufferWidth;\n    }\n\n    if (height === undefined) {\n      height = this.gl.drawingBufferHeight;\n    }\n\n    if (width !== this.width && height !== this.height) {\n      log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n    }\n\n    for (const attachmentPoint in this.attachments) {\n      this.attachments[attachmentPoint].resize({\n        width,\n        height\n      });\n    }\n\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  attach(attachments, {\n    clearAttachments = false,\n    resizeAttachments = true\n  } = {}) {\n    const newAttachments = {};\n\n    if (clearAttachments) {\n      Object.keys(this.attachments).forEach(key => {\n        newAttachments[key] = null;\n      });\n    }\n\n    Object.assign(newAttachments, attachments);\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    for (const key in newAttachments) {\n      assert(key !== undefined, 'Misspelled framebuffer binding point?');\n      const attachment = Number(key);\n      const descriptor = newAttachments[attachment];\n      let object = descriptor;\n\n      if (!object) {\n        this._unattach(attachment);\n      } else if (object instanceof Renderbuffer) {\n        this._attachRenderbuffer({\n          attachment,\n          renderbuffer: object\n        });\n      } else if (Array.isArray(descriptor)) {\n        const [texture, layer = 0, level = 0] = descriptor;\n        object = texture;\n\n        this._attachTexture({\n          attachment,\n          texture,\n          layer,\n          level\n        });\n      } else {\n        this._attachTexture({\n          attachment,\n          texture: object,\n          layer: 0,\n          level: 0\n        });\n      }\n\n      if (resizeAttachments && object) {\n        object.resize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    Object.assign(this.attachments, attachments);\n    Object.keys(this.attachments).filter(key => !this.attachments[key]).forEach(key => {\n      delete this.attachments[key];\n    });\n  }\n\n  checkStatus() {\n    const {\n      gl\n    } = this;\n    const status = this.getStatus();\n\n    if (status !== 36053) {\n      throw new Error(_getFrameBufferStatus(status));\n    }\n\n    return this;\n  }\n\n  getStatus() {\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n    const status = gl.checkFramebufferStatus(36160);\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return status;\n  }\n\n  clear(options = {}) {\n    const {\n      color,\n      depth,\n      stencil,\n      drawBuffers = []\n    } = options;\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    if (color || depth || stencil) {\n      clear(this.gl, {\n        color,\n        depth,\n        stencil\n      });\n    }\n\n    drawBuffers.forEach((value, drawBuffer) => {\n      clearBuffer(this.gl, {\n        drawBuffer,\n        value\n      });\n    });\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  readPixels(opts = {}) {\n    log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n    return null;\n  }\n\n  readPixelsToBuffer(opts = {}) {\n    log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n    return null;\n  }\n\n  copyToDataUrl(opts = {}) {\n    log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n    return null;\n  }\n\n  copyToImage(opts = {}) {\n    log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n    return null;\n  }\n\n  copyToTexture(opts = {}) {\n    log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  blit(opts = {}) {\n    log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n    return null;\n  }\n\n  invalidate({\n    attachments = [],\n    x = 0,\n    y = 0,\n    width,\n    height\n  }) {\n    const gl2 = assertWebGL2Context(this.gl);\n    const prevHandle = gl2.bindFramebuffer(36008, this.handle);\n    const invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n    if (invalidateAll) {\n      gl2.invalidateFramebuffer(36008, attachments);\n    } else {\n      gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n    }\n\n    gl2.bindFramebuffer(36008, prevHandle);\n    return this;\n  }\n\n  getAttachmentParameter(attachment, pname, keys) {\n    let value = this._getAttachmentParameterFallback(pname);\n\n    if (value === null) {\n      this.gl.bindFramebuffer(36160, this.handle);\n      value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n      this.gl.bindFramebuffer(36160, null);\n    }\n\n    if (keys && value > 1000) {\n      value = getKey(this.gl, value);\n    }\n\n    return value;\n  }\n\n  getAttachmentParameters(attachment = 36064, keys, parameters = this.constructor.ATTACHMENT_PARAMETERS || []) {\n    const values = {};\n\n    for (const pname of parameters) {\n      const key = keys ? getKey(this.gl, pname) : pname;\n      values[key] = this.getAttachmentParameter(attachment, pname, keys);\n    }\n\n    return values;\n  }\n\n  getParameters(keys = true) {\n    const attachments = Object.keys(this.attachments);\n    const parameters = {};\n\n    for (const attachmentName of attachments) {\n      const attachment = Number(attachmentName);\n      const key = keys ? getKey(this.gl, attachment) : attachment;\n      parameters[key] = this.getAttachmentParameters(attachment, keys);\n    }\n\n    return parameters;\n  }\n\n  show() {\n    if (typeof window !== 'undefined') {\n      window.open(copyToDataUrl(this), 'luma-debug-texture');\n    }\n\n    return this;\n  }\n\n  log(logLevel = 0, message = '') {\n    if (logLevel > log.level || typeof window === 'undefined') {\n      return this;\n    }\n\n    message = message || \"Framebuffer \".concat(this.id);\n    const image = copyToDataUrl(this, {\n      targetMaxHeight: 100\n    });\n    log.image({\n      logLevel,\n      message,\n      image\n    }, message)();\n    return this;\n  }\n\n  bind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, this.handle);\n    return this;\n  }\n\n  unbind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, null);\n    return this;\n  }\n\n  _createDefaultAttachments(color, depth, stencil, width, height) {\n    let defaultAttachments = null;\n\n    if (color) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36064] = new Texture2D(this.gl, {\n        id: \"\".concat(this.id, \"-color0\"),\n        pixels: null,\n        format: 6408,\n        type: 5121,\n        width,\n        height,\n        mipmaps: false,\n        parameters: {\n          [10241]: 9729,\n          [10240]: 9729,\n          [10242]: 33071,\n          [10243]: 33071\n        }\n      });\n      this.ownResources.push(defaultAttachments[36064]);\n    }\n\n    if (depth && stencil) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[33306] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth-stencil\"),\n        format: 35056,\n        width,\n        height: 111\n      });\n      this.ownResources.push(defaultAttachments[33306]);\n    } else if (depth) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36096] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth\"),\n        format: 33189,\n        width,\n        height\n      });\n      this.ownResources.push(defaultAttachments[36096]);\n    } else if (stencil) {\n      assert(false);\n    }\n\n    return defaultAttachments;\n  }\n\n  _unattach(attachment) {\n    const oldAttachment = this.attachments[attachment];\n\n    if (!oldAttachment) {\n      return;\n    }\n\n    if (oldAttachment instanceof Renderbuffer) {\n      this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n    } else {\n      this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n    }\n\n    delete this.attachments[attachment];\n  }\n\n  _attachRenderbuffer({\n    attachment = 36064,\n    renderbuffer\n  }) {\n    const {\n      gl\n    } = this;\n    gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n    this.attachments[attachment] = renderbuffer;\n  }\n\n  _attachTexture({\n    attachment = 36064,\n    texture,\n    layer,\n    level\n  }) {\n    const {\n      gl\n    } = this;\n    gl.bindTexture(texture.target, texture.handle);\n\n    switch (texture.target) {\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n        break;\n\n      case 34067:\n        const face = mapIndexToCubeMapFace(layer);\n        gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n        break;\n\n      case 3553:\n        gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n        break;\n\n      default:\n        assert(false, 'Illegal texture type');\n    }\n\n    gl.bindTexture(texture.target, null);\n    this.attachments[attachment] = texture;\n  }\n\n  _setReadBuffer(readBuffer) {\n    const gl2 = getWebGL2Context(this.gl);\n\n    if (gl2) {\n      gl2.readBuffer(readBuffer);\n    } else {\n      assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n    }\n\n    this.readBuffer = readBuffer;\n  }\n\n  _setDrawBuffers(drawBuffers) {\n    const {\n      gl\n    } = this;\n    const gl2 = assertWebGL2Context(gl);\n\n    if (gl2) {\n      gl2.drawBuffers(drawBuffers);\n    } else {\n      const ext = gl.getExtension('WEBGL_draw_buffers');\n\n      if (ext) {\n        ext.drawBuffersWEBGL(drawBuffers);\n      } else {\n        assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n      }\n    }\n\n    this.drawBuffers = drawBuffers;\n  }\n\n  _getAttachmentParameterFallback(pname) {\n    const caps = getFeatures(this.gl);\n\n    switch (pname) {\n      case 36052:\n        return !caps.WEBGL2 ? 0 : null;\n\n      case 33298:\n      case 33299:\n      case 33300:\n      case 33301:\n      case 33302:\n      case 33303:\n        return !caps.WEBGL2 ? 8 : null;\n\n      case 33297:\n        return !caps.WEBGL2 ? 5125 : null;\n\n      case 33296:\n        return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n      default:\n        return null;\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createFramebuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteFramebuffer(this.handle);\n  }\n\n  _bindHandle(handle) {\n    return this.gl.bindFramebuffer(36160, handle);\n  }\n\n}\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  const STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport const FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","import { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils';\nconst UNIFORM_SETTERS = {\n  [5126]: getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform),\n  [35664]: getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform),\n  [35665]: getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform),\n  [35666]: getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform),\n  [5124]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35667]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35668]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35669]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35670]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35671]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35672]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35673]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35674]: getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform),\n  [35675]: getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform),\n  [35676]: getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [5125]: getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform),\n  [36294]: getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform),\n  [36295]: getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform),\n  [36296]: getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform),\n  [35685]: getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform),\n  [35686]: getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform),\n  [35687]: getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform),\n  [35688]: getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform),\n  [35689]: getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform),\n  [35690]: getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [35679]: getSamplerSetter,\n  [35682]: getSamplerSetter,\n  [36289]: getSamplerSetter,\n  [36292]: getSamplerSetter,\n  [36293]: getSamplerSetter,\n  [36298]: getSamplerSetter,\n  [36299]: getSamplerSetter,\n  [36300]: getSamplerSetter,\n  [36303]: getSamplerSetter,\n  [36306]: getSamplerSetter,\n  [36307]: getSamplerSetter,\n  [36308]: getSamplerSetter,\n  [36311]: getSamplerSetter\n};\nconst FLOAT_ARRAY = {};\nconst INT_ARRAY = {};\nconst UINT_ARRAY = {};\nconst array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  const length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  let result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (let i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  const UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    const shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? \"\".concat(source, \" \") : '';\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value);\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      const dest = uniforms[key];\n\n      for (let i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  const checkLength = Math.min(value.length, 16);\n\n  for (let i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getSamplerSetter() {\n  let cache = null;\n  return (gl, location, value) => {\n    const update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  let cache = null;\n  let cacheLength = null;\n  return (gl, location, value) => {\n    const arrayValue = toArray(value, size);\n    const length = arrayValue.length;\n    let update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (let i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","export default function getShaderName(shader, defaultName = 'unnamed') {\n  const SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  const match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  const {\n    shaderName,\n    errors,\n    warnings\n  } = parseGLSLCompilerError(errLog, src, shaderType);\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  const errorStrings = errLog.split(/\\r?\\n/);\n  const errors = {};\n  const warnings = {};\n  const name = shaderName || getShaderName(src) || '(unnamed)';\n  const shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name);\n\n  for (let i = 0; i < errorStrings.length; i++) {\n    const errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    const segments = errorString.split(':');\n    const type = segments[0];\n    const line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  const lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  let message = '';\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      const error = errors[i + 1];\n      const segments = error.split(':', 3);\n      const type = segments[0];\n      const column = parseInt(segments[1], 10) || 0;\n      const err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string, start = 1, delim = ': ') {\n  const lines = string.split(/\\r?\\n/);\n  const maxDigits = String(lines.length + start - 1).length;\n  return lines.map((line, i) => {\n    const lineNumber = String(i + start);\n    const digits = lineNumber.length;\n    const prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  let result = '';\n\n  for (let i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}\n//# sourceMappingURL=format-glsl-error.js.map","import { assertWebGLContext, log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { uid, assert } from '../utils';\nimport Resource from './resource';\nconst ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport class Shader extends Resource {\n  static getTypeName(shaderType) {\n    switch (shaderType) {\n      case 35633:\n        return 'vertex-shader';\n\n      case 35632:\n        return 'fragment-shader';\n\n      default:\n        assert(false);\n        return 'unknown';\n    }\n  }\n\n  constructor(gl, props) {\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    const id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    super(gl, {\n      id\n    });\n    this.shaderType = props.shaderType;\n    this.source = props.source;\n    this.initialize(props);\n  }\n\n  initialize({\n    source\n  }) {\n    const shaderName = getShaderName(source, null);\n\n    if (shaderName) {\n      this.id = uid(shaderName);\n    }\n\n    this._compile(source);\n  }\n\n  getParameter(pname) {\n    return this.gl.getShaderParameter(this.handle, pname);\n  }\n\n  toString() {\n    return \"\".concat(Shader.getTypeName(this.shaderType), \":\").concat(this.id);\n  }\n\n  getName() {\n    return getShaderName(this.source) || 'unnamed-shader';\n  }\n\n  getSource() {\n    return this.gl.getShaderSource(this.handle);\n  }\n\n  getTranslatedSource() {\n    const extension = this.gl.getExtension('WEBGL_debug_shaders');\n    return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n  }\n\n  _compile(source = this.source) {\n    if (!source.startsWith('#version ')) {\n      source = \"#version 100\\n\".concat(source);\n    }\n\n    this.source = source;\n    this.gl.shaderSource(this.handle, this.source);\n    this.gl.compileShader(this.handle);\n    const compileStatus = this.getParameter(35713);\n\n    if (!compileStatus) {\n      const infoLog = this.gl.getShaderInfoLog(this.handle);\n      const {\n        shaderName,\n        errors,\n        warnings\n      } = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id);\n      log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n      log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n      throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n    }\n  }\n\n  _deleteHandle() {\n    this.gl.deleteShader(this.handle);\n  }\n\n  _getOptsFromHandle() {\n    return {\n      type: this.getParameter(35663),\n      source: this.getSource()\n    };\n  }\n\n}\nexport class VertexShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35633\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35633);\n  }\n\n}\nexport class FragmentShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35632\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35632);\n  }\n\n}\n//# sourceMappingURL=shader.js.map","const GL_FRAGMENT_SHADER = 0x8b30;\nconst GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","import Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\nexport default class ProgramConfiguration {\n  constructor(program) {\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  getAttributeInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.attributeInfosByLocation[location];\n    }\n\n    return this.attributeInfosByName[locationOrName] || null;\n  }\n\n  getAttributeLocation(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.location : -1;\n  }\n\n  getAttributeAccessor(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.accessor : null;\n  }\n\n  getVaryingInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.varyingInfos[location];\n    }\n\n    return this.varyingInfosByName[locationOrName] || null;\n  }\n\n  getVaryingIndex(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.location : -1;\n  }\n\n  getVaryingAccessor(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.accessor : null;\n  }\n\n  _readAttributesFromProgram(program) {\n    const {\n      gl\n    } = program;\n    const count = gl.getProgramParameter(program.handle, 35721);\n\n    for (let index = 0; index < count; index++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getActiveAttrib(program.handle, index);\n      const location = gl.getAttribLocation(program.handle, name);\n\n      if (location >= 0) {\n        this._addAttribute(location, name, type, size);\n      }\n    }\n\n    this.attributeInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _readVaryingsFromProgram(program) {\n    const {\n      gl\n    } = program;\n\n    if (!isWebGL2(gl)) {\n      return;\n    }\n\n    const count = gl.getProgramParameter(program.handle, 35971);\n\n    for (let location = 0; location < count; location++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getTransformFeedbackVarying(program.handle, location);\n\n      this._addVarying(location, name, type, size);\n    }\n\n    this.varyingInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _addAttribute(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = {\n      type,\n      size: size * components\n    };\n\n    this._inferProperties(location, name, accessor);\n\n    const attributeInfo = {\n      location,\n      name,\n      accessor: new Accessor(accessor)\n    };\n    this.attributeInfos.push(attributeInfo);\n    this.attributeInfosByLocation[location] = attributeInfo;\n    this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n  }\n\n  _inferProperties(location, name, accessor) {\n    if (/instance/i.test(name)) {\n      accessor.divisor = 1;\n    }\n  }\n\n  _addVarying(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = new Accessor({\n      type,\n      size: size * components\n    });\n    const varying = {\n      location,\n      name,\n      accessor\n    };\n    this.varyingInfos.push(varying);\n    this.varyingInfosByName[varying.name] = varying;\n  }\n\n}\n//# sourceMappingURL=program-configuration.js.map","import Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { getKey } from '../webgl-utils';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { uid, assert } from '../utils';\nconst LOG_PROGRAM_PERF_PRIORITY = 4;\nconst GL_SEPARATE_ATTRIBS = 0x8c8d;\nconst V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\nexport default class Program extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n    this._isCached = false;\n    this.initialize(props);\n    Object.seal(this);\n\n    this._setId(props.id);\n  }\n\n  initialize(props = {}) {\n    const {\n      hash,\n      vs,\n      fs,\n      varyings,\n      bufferMode = GL_SEPARATE_ATTRIBS\n    } = props;\n    this.hash = hash || '';\n    this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n      id: \"\".concat(props.id, \"-vs\"),\n      source: vs\n    }) : vs;\n    this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n      id: \"\".concat(props.id, \"-fs\"),\n      source: fs\n    }) : fs;\n    assert(this.vs instanceof VertexShader);\n    assert(this.fs instanceof FragmentShader);\n    this.uniforms = {};\n    this._textureUniforms = {};\n\n    if (varyings && varyings.length > 0) {\n      assertWebGL2Context(this.gl);\n      this.varyings = varyings;\n      this.gl2.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n    }\n\n    this._compileAndLink();\n\n    this._readUniformLocationsFromLinkedProgram();\n\n    this.configuration = new ProgramConfiguration(this);\n    return this.setProps(props);\n  }\n\n  delete(options = {}) {\n    if (this._isCached) {\n      return this;\n    }\n\n    return super.delete(options);\n  }\n\n  setProps(props) {\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    return this;\n  }\n\n  draw({\n    logPriority,\n    drawMode = 4,\n    vertexCount,\n    offset = 0,\n    start,\n    end,\n    isIndexed = false,\n    indexType = 5123,\n    instanceCount = 0,\n    isInstanced = instanceCount > 0,\n    vertexArray = null,\n    transformFeedback,\n    framebuffer,\n    parameters = {},\n    uniforms,\n    samplers\n  }) {\n    if (uniforms || samplers) {\n      log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n      this.setUniforms(uniforms || {});\n    }\n\n    if (log.priority >= logPriority) {\n      const fb = framebuffer ? framebuffer.id : 'default';\n      const message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n      log.log(logPriority, message)();\n    }\n\n    assert(vertexArray);\n    this.gl.useProgram(this.handle);\n\n    if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n      return false;\n    }\n\n    vertexArray.bindForDraw(vertexCount, instanceCount, () => {\n      if (framebuffer !== undefined) {\n        parameters = Object.assign({}, parameters, {\n          framebuffer\n        });\n      }\n\n      if (transformFeedback) {\n        const primitiveMode = getPrimitiveDrawMode(drawMode);\n        transformFeedback.begin(primitiveMode);\n      }\n\n      this._bindTextures();\n\n      withParameters(this.gl, parameters, () => {\n        if (isIndexed && isInstanced) {\n          this.gl2.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n        } else if (isIndexed && isWebGL2(this.gl) && !isNaN(start) && !isNaN(end)) {\n          this.gl2.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n        } else if (isIndexed) {\n          this.gl.drawElements(drawMode, vertexCount, indexType, offset);\n        } else if (isInstanced) {\n          this.gl2.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n        } else {\n          this.gl.drawArrays(drawMode, offset, vertexCount);\n        }\n      });\n\n      if (transformFeedback) {\n        transformFeedback.end();\n      }\n    });\n    return true;\n  }\n\n  setUniforms(uniforms = {}) {\n    if (log.priority >= 2) {\n      checkUniformValues(uniforms, this.id, this._uniformSetters);\n    }\n\n    this.gl.useProgram(this.handle);\n\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n      const uniformSetter = this._uniformSetters[uniformName];\n\n      if (uniformSetter) {\n        let value = uniform;\n        let textureUpdate = false;\n\n        if (value instanceof Framebuffer) {\n          value = value.texture;\n        }\n\n        if (value instanceof Texture) {\n          textureUpdate = this.uniforms[uniformName] !== uniform;\n\n          if (textureUpdate) {\n            if (uniformSetter.textureIndex === undefined) {\n              uniformSetter.textureIndex = this._textureIndexCounter++;\n            }\n\n            const texture = value;\n            const {\n              textureIndex\n            } = uniformSetter;\n            texture.bind(textureIndex);\n            value = textureIndex;\n            this._textureUniforms[uniformName] = texture;\n          } else {\n            value = uniformSetter.textureIndex;\n          }\n        } else if (this._textureUniforms[uniformName]) {\n          delete this._textureUniforms[uniformName];\n        }\n\n        if (uniformSetter(value) || textureUpdate) {\n          copyUniform(this.uniforms, uniformName, uniform);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  _areTexturesRenderable() {\n    let texturesRenderable = true;\n\n    for (const uniformName in this._textureUniforms) {\n      const texture = this._textureUniforms[uniformName];\n      texture.update();\n      texturesRenderable = texturesRenderable && texture.loaded;\n    }\n\n    return texturesRenderable;\n  }\n\n  _bindTextures() {\n    for (const uniformName in this._textureUniforms) {\n      const textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n      this._textureUniforms[uniformName].bind(textureIndex);\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createProgram();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteProgram(this.handle);\n  }\n\n  _getOptionsFromHandle(handle) {\n    const shaderHandles = this.gl.getAttachedShaders(handle);\n    const opts = {};\n\n    for (const shaderHandle of shaderHandles) {\n      const type = this.gl.getShaderParameter(this.handle, 35663);\n\n      switch (type) {\n        case 35633:\n          opts.vs = new VertexShader({\n            handle: shaderHandle\n          });\n          break;\n\n        case 35632:\n          opts.fs = new FragmentShader({\n            handle: shaderHandle\n          });\n          break;\n\n        default:\n      }\n    }\n\n    return opts;\n  }\n\n  _getParameter(pname) {\n    return this.gl.getProgramParameter(this.handle, pname);\n  }\n\n  _setId(id) {\n    if (!id) {\n      const programName = this._getName();\n\n      this.id = uid(programName);\n    }\n  }\n\n  _getName() {\n    let programName = this.vs.getName() || this.fs.getName();\n    programName = programName.replace(/shader/i, '');\n    programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n    return programName;\n  }\n\n  _compileAndLink() {\n    const {\n      gl\n    } = this;\n    gl.attachShader(this.handle, this.vs.handle);\n    gl.attachShader(this.handle, this.fs.handle);\n    log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n    gl.linkProgram(this.handle);\n    log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n\n    if (gl.debug || log.level > 0) {\n      const linked = gl.getProgramParameter(this.handle, 35714);\n\n      if (!linked) {\n        throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n\n      gl.validateProgram(this.handle);\n      const validated = gl.getProgramParameter(this.handle, 35715);\n\n      if (!validated) {\n        throw new Error(\"Error validating: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n    }\n  }\n\n  _readUniformLocationsFromLinkedProgram() {\n    const {\n      gl\n    } = this;\n    this._uniformSetters = {};\n    this._uniformCount = this._getParameter(35718);\n\n    for (let i = 0; i < this._uniformCount; i++) {\n      const info = this.gl.getActiveUniform(this.handle, i);\n      const {\n        name\n      } = parseUniformName(info.name);\n      let location = gl.getUniformLocation(this.handle, name);\n      this._uniformSetters[name] = getUniformSetter(gl, location, info);\n\n      if (info.size > 1) {\n        for (let l = 0; l < info.size; l++) {\n          location = gl.getUniformLocation(this.handle, \"\".concat(name, \"[\").concat(l, \"]\"));\n          this._uniformSetters[\"\".concat(name, \"[\").concat(l, \"]\")] = getUniformSetter(gl, location, info);\n        }\n      }\n    }\n\n    this._textureIndexCounter = 0;\n  }\n\n  getActiveUniforms(uniformIndices, pname) {\n    return this.gl2.getActiveUniforms(this.handle, uniformIndices, pname);\n  }\n\n  getUniformBlockIndex(blockName) {\n    return this.gl2.getUniformBlockIndex(this.handle, blockName);\n  }\n\n  getActiveUniformBlockParameter(blockIndex, pname) {\n    return this.gl2.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n  }\n\n  uniformBlockBinding(blockIndex, blockBinding) {\n    this.gl2.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n  }\n\n}\n//# sourceMappingURL=program.js.map","const EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default {\n  [33189]: {\n    bpp: 2\n  },\n  [33190]: {\n    gl2: true,\n    bpp: 3\n  },\n  [36012]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36168]: {\n    bpp: 1\n  },\n  [34041]: {\n    bpp: 4\n  },\n  [35056]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36013]: {\n    gl2: true,\n    bpp: 5\n  },\n  [32854]: {\n    bpp: 2\n  },\n  [36194]: {\n    bpp: 2\n  },\n  [32855]: {\n    bpp: 2\n  },\n  [33321]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33330]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33329]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33332]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33331]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33334]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33333]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33323]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33336]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33335]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33338]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33337]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33340]: {\n    gl2: true,\n    bpp: 8\n  },\n  [33339]: {\n    gl2: true,\n    bpp: 8\n  },\n  [32849]: {\n    gl2: true,\n    bpp: 3\n  },\n  [32856]: {\n    gl2: true,\n    bpp: 4\n  },\n  [32857]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36220]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36238]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36975]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36214]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36232]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36226]: {\n    gl2: true,\n    bpp: 16\n  },\n  [36208]: {\n    gl2: true,\n    bpp: 16\n  },\n  [33325]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 2\n  },\n  [33327]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [34842]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [33326]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [33328]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [34836]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 16\n  },\n  [35898]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  }\n};\n//# sourceMappingURL=renderbuffer-formats.js.map","import Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\n\nfunction isFormatSupported(gl, format, formats) {\n  const info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nexport default class Renderbuffer extends Resource {\n  static isSupported(gl, {\n    format\n  } = {\n    format: null\n  }) {\n    return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n  }\n\n  static getSamplesForFormat(gl, {\n    format\n  }) {\n    return gl.getInternalformatParameter(36161, format, 32937);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  initialize({\n    format,\n    width = 1,\n    height = 1,\n    samples = 0\n  }) {\n    assert(format, 'Needs format');\n\n    this._trackDeallocatedMemory();\n\n    this.gl.bindRenderbuffer(36161, this.handle);\n\n    if (samples !== 0 && isWebGL2(this.gl)) {\n      this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n    } else {\n      this.gl.renderbufferStorage(36161, format, width, height);\n    }\n\n    this.format = format;\n    this.width = width;\n    this.height = height;\n    this.samples = samples;\n\n    this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n    return this;\n  }\n\n  resize({\n    width,\n    height\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        samples: this.samples\n      });\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createRenderbuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteRenderbuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindRenderbuffer(36161, handle);\n  }\n\n  _syncHandle(handle) {\n    this.format = this.getParameter(36164);\n    this.width = this.getParameter(36162);\n    this.height = this.getParameter(36163);\n    this.samples = this.getParameter(36011);\n  }\n\n  _getParameter(pname) {\n    this.gl.bindRenderbuffer(36161, this.handle);\n    const value = this.gl.getRenderbufferParameter(36161, pname);\n    return value;\n  }\n\n}\n//# sourceMappingURL=renderbuffer.js.map","import { isWebGL2, assertWebGLContext } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { getKey, getKeyValue } from '../webgl-utils';\nimport { uid, assert, stubRemovedMethods } from '../utils';\nconst ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\nexport default class Resource {\n  constructor(gl, opts = {}) {\n    assertWebGLContext(gl);\n    const {\n      id,\n      userData = {}\n    } = opts;\n    this.gl = gl;\n    this.gl2 = gl;\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  toString() {\n    return \"\".concat(this.constructor.name, \"(\").concat(this.id, \")\");\n  }\n\n  get handle() {\n    return this._handle;\n  }\n\n  delete({\n    deleteChildren = false\n  } = {}) {\n    const children = this._handle && this._deleteHandle(this._handle);\n\n    if (this._handle) {\n      this._removeStats();\n    }\n\n    this._handle = null;\n\n    if (children && deleteChildren) {\n      children.filter(Boolean).forEach(child => child.delete());\n    }\n\n    return this;\n  }\n\n  bind(funcOrHandle = this.handle) {\n    if (typeof funcOrHandle !== 'function') {\n      this._bindHandle(funcOrHandle);\n\n      return this;\n    }\n\n    let value;\n\n    if (!this._bound) {\n      this._bindHandle(this.handle);\n\n      this._bound = true;\n      value = funcOrHandle();\n      this._bound = false;\n\n      this._bindHandle(null);\n    } else {\n      value = funcOrHandle();\n    }\n\n    return value;\n  }\n\n  unbind() {\n    this.bind(null);\n  }\n\n  getParameter(pname, opts = {}) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        const webgl1Default = parameter.webgl1;\n        const webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n        const defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n        return defaultValue;\n      }\n    }\n\n    return this._getParameter(pname, opts);\n  }\n\n  getParameters(options = {}) {\n    const {\n      parameters,\n      keys\n    } = options;\n    const PARAMETERS = this.constructor.PARAMETERS || {};\n    const isWebgl2 = isWebGL2(this.gl);\n    const values = {};\n    const parameterKeys = parameters || Object.keys(PARAMETERS);\n\n    for (const pname of parameterKeys) {\n      const parameter = PARAMETERS[pname];\n      const parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (parameterAvailable) {\n        const key = keys ? getKey(this.gl, pname) : pname;\n        values[key] = this.getParameter(pname, options);\n\n        if (keys && parameter.type === 'GLenum') {\n          values[key] = getKey(this.gl, values[key]);\n        }\n      }\n    }\n\n    return values;\n  }\n\n  setParameter(pname, value) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        throw new Error('Parameter not available on this platform');\n      }\n\n      if (parameter.type === 'GLenum') {\n        value = getKeyValue(value);\n      }\n    }\n\n    this._setParameter(pname, value);\n\n    return this;\n  }\n\n  setParameters(parameters) {\n    for (const pname in parameters) {\n      this.setParameter(pname, parameters[pname]);\n    }\n\n    return this;\n  }\n\n  stubRemovedMethods(className, version, methodNames) {\n    return stubRemovedMethods(this, className, version, methodNames);\n  }\n\n  initialize(opts) {}\n\n  _createHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _deleteHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _bindHandle(handle) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getOptsFromHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getParameter(pname, opts) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _setParameter(pname, value) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _context() {\n    this.gl.luma = this.gl.luma || {};\n    return this.gl.luma;\n  }\n\n  _addStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get('Resources Created').incrementCount();\n    stats.get(\"\".concat(name, \"s Created\")).incrementCount();\n    stats.get(\"\".concat(name, \"s Active\")).incrementCount();\n  }\n\n  _removeStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get(\"\".concat(name, \"s Active\")).decrementCount();\n  }\n\n  _trackAllocatedMemory(bytes, name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').addCount(bytes);\n    stats.get(\"\".concat(name, \" Memory\")).addCount(bytes);\n    this.byteLength = bytes;\n  }\n\n  _trackDeallocatedMemory(name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').subtractCount(this.byteLength);\n    stats.get(\"\".concat(name, \" Memory\")).subtractCount(this.byteLength);\n    this.byteLength = 0;\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import { assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { loadImage } from '../utils/load-file';\nexport default class Texture2D extends Texture {\n  static isSupported(gl, opts) {\n    return Texture.isSupported(gl, opts);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    super(gl, Object.assign({}, props, {\n      target: 3553\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n}\n//# sourceMappingURL=texture-2d.js.map","import { assert } from '../utils';\nlet pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url, options = {}) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  const dataType = options.dataType || 'text';\n  return fetch(url, options).then(res => res[dataType]());\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise((resolve, reject) => {\n    try {\n      const image = new Image();\n\n      image.onload = () => resolve(image);\n\n      image.onerror = () => reject(new Error(\"Could not load image \".concat(url, \".\")));\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nexport const TEXTURE_FORMATS = {\n  [6407]: {\n    dataFormat: 6407,\n    types: [5121, 33635]\n  },\n  [6408]: {\n    dataFormat: 6408,\n    types: [5121, 32819, 32820]\n  },\n  [6406]: {\n    dataFormat: 6406,\n    types: [5121]\n  },\n  [6409]: {\n    dataFormat: 6409,\n    types: [5121]\n  },\n  [6410]: {\n    dataFormat: 6410,\n    types: [5121]\n  },\n  [33326]: {\n    dataFormat: 6403,\n    types: [5126],\n    gl2: true\n  },\n  [33328]: {\n    dataFormat: 33319,\n    types: [5126],\n    gl2: true\n  },\n  [34837]: {\n    dataFormat: 6407,\n    types: [5126],\n    gl2: true\n  },\n  [34836]: {\n    dataFormat: 6408,\n    types: [5126],\n    gl2: true\n  }\n};\nexport const DATA_FORMAT_CHANNELS = {\n  [6403]: 1,\n  [36244]: 1,\n  [33319]: 2,\n  [33320]: 2,\n  [6407]: 3,\n  [36248]: 3,\n  [6408]: 4,\n  [36249]: 4,\n  [6402]: 1,\n  [34041]: 1,\n  [6406]: 1,\n  [6409]: 1,\n  [6410]: 2\n};\nexport const TYPE_SIZES = {\n  [5126]: 4,\n  [5125]: 4,\n  [5124]: 4,\n  [5123]: 2,\n  [5122]: 2,\n  [5131]: 2,\n  [5120]: 1,\n  [5121]: 1\n};\nexport function isFormatSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","import { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { global } from 'probe.gl/env';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { uid, isPowerOfTwo, assert } from '../utils';\nconst NPOT_MIN_FILTERS = [9729, 9728];\n\nconst WebGLBuffer = global.WebGLBuffer || function WebGLBuffer() {};\n\nexport default class Texture extends Resource {\n  static isSupported(gl, opts = {}) {\n    const {\n      format,\n      linearFiltering\n    } = opts;\n    let supported = true;\n\n    if (format) {\n      supported = supported && isFormatSupported(gl, format);\n      supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n    }\n\n    return supported;\n  }\n\n  constructor(gl, props) {\n    const {\n      id = uid('texture'),\n      handle,\n      target\n    } = props;\n    super(gl, {\n      id,\n      handle\n    });\n    this.target = target;\n    this.textureUnit = undefined;\n    this.loaded = false;\n    this.width = undefined;\n    this.height = undefined;\n    this.depth = undefined;\n    this.format = undefined;\n    this.type = undefined;\n    this.dataFormat = undefined;\n    this.border = undefined;\n    this.textureUnit = undefined;\n    this.mipmaps = undefined;\n  }\n\n  toString() {\n    return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n  }\n\n  initialize(props = {}) {\n    let data = props.data;\n\n    if (data instanceof Promise) {\n      data.then(resolvedImageData => this.initialize(Object.assign({}, props, {\n        pixels: resolvedImageData,\n        data: resolvedImageData\n      })));\n      return this;\n    }\n\n    const isVideo = typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement;\n\n    if (isVideo && data.readyState < HTMLVideoElement.HAVE_METADATA) {\n      this._video = null;\n      data.addEventListener('loadeddata', () => this.initialize(props));\n      return this;\n    }\n\n    const {\n      pixels = null,\n      format = 6408,\n      border = 0,\n      recreate = false,\n      parameters = {},\n      pixelStore = {},\n      textureUnit = undefined\n    } = props;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed = false,\n      mipmaps = true\n    } = props;\n    const {\n      depth = 0\n    } = props;\n    ({\n      width,\n      height,\n      compressed,\n      dataFormat,\n      type\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n    this.format = format;\n    this.type = type;\n    this.dataFormat = dataFormat;\n    this.border = border;\n    this.textureUnit = textureUnit;\n\n    if (Number.isFinite(this.textureUnit)) {\n      this.gl.activeTexture(33984 + this.textureUnit);\n      this.gl.bindTexture(this.target, this.handle);\n    }\n\n    if (mipmaps && this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      mipmaps = false;\n\n      this._updateForNPOT(parameters);\n    }\n\n    this.mipmaps = mipmaps;\n    this.setImageData({\n      data,\n      width,\n      height,\n      depth,\n      format,\n      type,\n      dataFormat,\n      border,\n      mipmaps,\n      parameters: pixelStore,\n      compressed\n    });\n\n    if (mipmaps) {\n      this.generateMipmap();\n    }\n\n    this.setParameters(parameters);\n\n    if (recreate) {\n      this.data = data;\n    }\n\n    if (isVideo) {\n      this._video = {\n        video: data,\n        parameters,\n        lastTime: data.readyState >= HTMLVideoElement.HAVE_CURRENT_DATA ? data.currentTime : -1\n      };\n    }\n\n    return this;\n  }\n\n  update() {\n    if (this._video) {\n      const {\n        video,\n        parameters,\n        lastTime\n      } = this._video;\n\n      if (lastTime === video.currentTime || video.readyState < HTMLVideoElement.HAVE_CURRENT_DATA) {\n        return;\n      }\n\n      this.setSubImageData({\n        data: video,\n        parameters\n      });\n\n      if (this.mipmaps) {\n        this.generateMipmap();\n      }\n\n      this._video.lastTime = video.currentTime;\n    }\n  }\n\n  resize({\n    height,\n    width,\n    mipmaps = false\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        type: this.type,\n        dataFormat: this.dataFormat,\n        border: this.border,\n        mipmaps\n      });\n    }\n\n    return this;\n  }\n\n  generateMipmap(params = {}) {\n    if (this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      return this;\n    }\n\n    this.mipmaps = true;\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, params, () => {\n      this.gl.generateMipmap(this.target);\n    });\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  setImageData(options) {\n    this._trackDeallocatedMemory('Texture');\n\n    const {\n      target = this.target,\n      pixels = null,\n      level = 0,\n      format = this.format,\n      border = this.border,\n      offset = 0,\n      parameters = {}\n    } = options;\n    let {\n      data = null,\n      type = this.type,\n      width = this.width,\n      height = this.height,\n      dataFormat = this.dataFormat,\n      compressed = false\n    } = options;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    const {\n      gl\n    } = this;\n    gl.bindTexture(this.target, this.handle);\n    let dataType = null;\n    ({\n      data,\n      dataType\n    } = this._getDataType({\n      data,\n      compressed\n    }));\n    let gl2;\n    withParameters(this.gl, parameters, () => {\n      switch (dataType) {\n        case 'null':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          break;\n\n        case 'typed-array':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n          break;\n\n        case 'buffer':\n          gl2 = assertWebGL2Context(gl);\n          gl2.bindBuffer(35052, data.handle || data);\n          gl2.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n          gl2.bindBuffer(35052, null);\n          break;\n\n        case 'browser-object':\n          if (isWebGL2(gl)) {\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          } else {\n            gl.texImage2D(target, level, format, dataFormat, type, data);\n          }\n\n          break;\n\n        case 'compressed':\n          for (const [levelIndex, levelData] of data.entries()) {\n            gl.compressedTexImage2D(target, levelIndex, levelData.format, levelData.width, levelData.height, border, levelData.data);\n          }\n\n          break;\n\n        default:\n          assert(false, 'Unknown image data type');\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n  setSubImageData({\n    target = this.target,\n    pixels = null,\n    data = null,\n    x = 0,\n    y = 0,\n    width = this.width,\n    height = this.height,\n    level = 0,\n    format = this.format,\n    type = this.type,\n    dataFormat = this.dataFormat,\n    compressed = false,\n    offset = 0,\n    border = this.border,\n    parameters = {}\n  }) {\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n    if (!data) {\n      data = pixels;\n    }\n\n    if (data && data.data) {\n      const ndarray = data;\n      data = ndarray.data;\n      width = ndarray.shape[0];\n      height = ndarray.shape[1];\n    }\n\n    if (data instanceof Buffer) {\n      data = data.handle;\n    }\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (compressed) {\n        this.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n      } else if (data === null) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n      } else if (ArrayBuffer.isView(data)) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n      } else if (data instanceof WebGLBuffer) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.bindBuffer(35052, data);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n        gl2.bindBuffer(35052, null);\n      } else if (isWebGL2(this.gl)) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n      } else {\n        this.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n      }\n    });\n    this.gl.bindTexture(this.target, null);\n  }\n\n  copyFramebuffer(opts = {}) {\n    log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  getActiveUnit() {\n    return this.gl.getParameter(34016) - 33984;\n  }\n\n  bind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, this.handle);\n    return textureUnit;\n  }\n\n  unbind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, null);\n    return textureUnit;\n  }\n\n  _getDataType({\n    data,\n    compressed = false\n  }) {\n    if (compressed) {\n      return {\n        data,\n        dataType: 'compressed'\n      };\n    }\n\n    if (data === null) {\n      return {\n        data,\n        dataType: 'null'\n      };\n    }\n\n    if (ArrayBuffer.isView(data)) {\n      return {\n        data,\n        dataType: 'typed-array'\n      };\n    }\n\n    if (data instanceof Buffer) {\n      return {\n        data: data.handle,\n        dataType: 'buffer'\n      };\n    }\n\n    if (data instanceof WebGLBuffer) {\n      return {\n        data,\n        dataType: 'buffer'\n      };\n    }\n\n    return {\n      data,\n      dataType: 'browser-object'\n    };\n  }\n\n  _deduceParameters(opts) {\n    const {\n      format,\n      data\n    } = opts;\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed\n    } = opts;\n    const textureFormat = TEXTURE_FORMATS[format];\n    dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n    type = type || textureFormat && textureFormat.types[0];\n    compressed = compressed || textureFormat && textureFormat.compressed;\n    ({\n      width,\n      height\n    } = this._deduceImageSize(data, width, height));\n    return {\n      dataFormat,\n      type,\n      compressed,\n      width,\n      height,\n      format,\n      data\n    };\n  }\n\n  _deduceImageSize(data, width, height) {\n    let size;\n\n    if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n      size = {\n        width: data.naturalWidth,\n        height: data.naturalHeight\n      };\n    } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n      size = {\n        width: data.videoWidth,\n        height: data.videoHeight\n      };\n    } else if (!data) {\n      size = {\n        width: width >= 0 ? width : 1,\n        height: height >= 0 ? height : 1\n      };\n    } else {\n      size = {\n        width,\n        height\n      };\n    }\n\n    assert(size, 'Could not deduced texture size');\n    assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n    assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n    return size;\n  }\n\n  _createHandle() {\n    return this.gl.createTexture();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTexture(this.handle);\n\n    this._trackDeallocatedMemory('Texture');\n  }\n\n  _getParameter(pname) {\n    switch (pname) {\n      case 4096:\n        return this.width;\n\n      case 4097:\n        return this.height;\n\n      default:\n        this.gl.bindTexture(this.target, this.handle);\n        const value = this.gl.getTexParameter(this.target, pname);\n        this.gl.bindTexture(this.target, null);\n        return value;\n    }\n  }\n\n  _setParameter(pname, param) {\n    this.gl.bindTexture(this.target, this.handle);\n    param = this._getNPOTParam(pname, param);\n\n    switch (pname) {\n      case 33082:\n      case 33083:\n        this.gl.texParameterf(this.handle, pname, param);\n        break;\n\n      case 4096:\n      case 4097:\n        assert(false);\n        break;\n\n      default:\n        this.gl.texParameteri(this.target, pname, param);\n        break;\n    }\n\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  _isNPOT() {\n    if (isWebGL2(this.gl)) {\n      return false;\n    }\n\n    if (!this.width || !this.height) {\n      return false;\n    }\n\n    return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n  }\n\n  _updateForNPOT(parameters) {\n    if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n      parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n    }\n  }\n\n  _getNPOTParam(pname, param) {\n    if (this._isNPOT()) {\n      switch (pname) {\n        case 10241:\n          if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n            param = 9729;\n          }\n\n          break;\n\n        case 10242:\n        case 10243:\n          if (param !== 33071) {\n            param = 33071;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return param;\n  }\n\n}\n//# sourceMappingURL=texture.js.map","import { isWebGL2, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isObjectEmpty } from '../utils';\nexport default class TransformFeedback extends Resource {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    super(gl, props);\n    this.initialize(props);\n    this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    this.buffers = {};\n    this.unused = {};\n    this.configuration = null;\n    this.bindOnUse = true;\n\n    if (!isObjectEmpty(this.buffers)) {\n      this.bind(() => this._unbindBuffers());\n    }\n\n    this.setProps(props);\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    if ('buffers' in props) {\n      this.setBuffers(props.buffers);\n    }\n  }\n\n  setBuffers(buffers = {}) {\n    this.bind(() => {\n      for (const bufferName in buffers) {\n        this.setBuffer(bufferName, buffers[bufferName]);\n      }\n    });\n    return this;\n  }\n\n  setBuffer(locationOrName, bufferOrParams) {\n    const location = this._getVaryingIndex(locationOrName);\n\n    const {\n      buffer,\n      byteSize,\n      byteOffset\n    } = this._getBufferParams(bufferOrParams);\n\n    if (location < 0) {\n      this.unused[locationOrName] = buffer;\n      log.warn(() => \"\".concat(this.id, \" unused varying buffer \").concat(locationOrName))();\n      return this;\n    }\n\n    this.buffers[location] = bufferOrParams;\n\n    if (!this.bindOnUse) {\n      this._bindBuffer(location, buffer, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  begin(primitiveMode = 0) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n\n    this._bindBuffers();\n\n    this.gl.beginTransformFeedback(primitiveMode);\n    return this;\n  }\n\n  end() {\n    this.gl.endTransformFeedback();\n\n    this._unbindBuffers();\n\n    this.gl.bindTransformFeedback(36386, null);\n    return this;\n  }\n\n  _getBufferParams(bufferOrParams) {\n    let byteOffset;\n    let byteSize;\n    let buffer;\n\n    if (bufferOrParams instanceof Buffer === false) {\n      buffer = bufferOrParams.buffer;\n      byteSize = bufferOrParams.byteSize;\n      byteOffset = bufferOrParams.byteOffset;\n    } else {\n      buffer = bufferOrParams;\n    }\n\n    if (byteOffset !== undefined || byteSize !== undefined) {\n      byteOffset = byteOffset || 0;\n      byteSize = byteSize || buffer.byteLength - byteOffset;\n    }\n\n    return {\n      buffer,\n      byteOffset,\n      byteSize\n    };\n  }\n\n  _getVaryingInfo(locationOrName) {\n    return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n  }\n\n  _getVaryingIndex(locationOrName) {\n    if (this.configuration) {\n      return this.configuration.getVaryingInfo(locationOrName).location;\n    }\n\n    const location = Number(locationOrName);\n    return Number.isFinite(location) ? location : -1;\n  }\n\n  _bindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        const {\n          buffer,\n          byteSize,\n          byteOffset\n        } = this._getBufferParams(this.buffers[bufferIndex]);\n\n        this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n      }\n    }\n  }\n\n  _unbindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        this._bindBuffer(bufferIndex, null);\n      }\n    }\n  }\n\n  _bindBuffer(index, buffer, byteOffset = 0, byteSize) {\n    const handle = buffer && buffer.handle;\n\n    if (!handle || byteSize === undefined) {\n      this.gl.bindBufferBase(35982, index, handle);\n    } else {\n      this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createTransformFeedback();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTransformFeedback(this.handle);\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n  }\n\n}\n//# sourceMappingURL=transform-feedback.js.map","import WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nconst LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (const cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, \"Feature: \".concat(cap, \" not supported\"))();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  let isSupported;\n  const featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n\n    for (const extension of featureDefinition) {\n      isSupported = isSupported && Boolean(gl.getExtension(extension));\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","import Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport const FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  const testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  const testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: {\n      [36064]: testTexture\n    }\n  });\n  const status = testFb.getStatus();\n  testTexture.delete();\n  testFb.delete();\n  return status === 36053;\n}\n\nexport default {\n  [FEATURES.WEBGL2]: [false, true],\n  [FEATURES.VERTEX_ARRAY_OBJECT]: ['OES_vertex_array_object', true],\n  [FEATURES.TIMER_QUERY]: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  [FEATURES.INSTANCED_RENDERING]: ['ANGLE_instanced_arrays', true],\n  [FEATURES.MULTIPLE_RENDER_TARGETS]: ['WEBGL_draw_buffers', true],\n  [FEATURES.ELEMENT_INDEX_UINT32]: ['OES_element_index_uint', true],\n  [FEATURES.BLEND_EQUATION_MINMAX]: ['EXT_blend_minmax', true],\n  [FEATURES.FLOAT_BLEND]: ['EXT_float_blend'],\n  [FEATURES.COLOR_ENCODING_SRGB]: ['EXT_sRGB', true],\n  [FEATURES.TEXTURE_DEPTH]: ['WEBGL_depth_texture', true],\n  [FEATURES.TEXTURE_FLOAT]: ['OES_texture_float', true],\n  [FEATURES.TEXTURE_HALF_FLOAT]: ['OES_texture_half_float', true],\n  [FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]: ['OES_texture_float_linear'],\n  [FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]: ['OES_texture_half_float_linear'],\n  [FEATURES.TEXTURE_FILTER_ANISOTROPIC]: ['EXT_texture_filter_anisotropic'],\n  [FEATURES.COLOR_ATTACHMENT_RGBA32F]: [checkFloat32ColorAttachment, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_FLOAT]: [false, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]: ['EXT_color_buffer_half_float'],\n  [FEATURES.GLSL_FRAG_DATA]: ['WEBGL_draw_buffers', true],\n  [FEATURES.GLSL_FRAG_DEPTH]: ['EXT_frag_depth', true],\n  [FEATURES.GLSL_DERIVATIVES]: ['OES_standard_derivatives', true],\n  [FEATURES.GLSL_TEXTURE_LOD]: ['EXT_shader_texture_lod', true]\n};\n//# sourceMappingURL=webgl-features-table.js.map","import { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nconst VERSION = typeof \"8.5.4\" !== 'undefined' ? \"8.5.4\" : 'untranspiled source';\nconst STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nclass StatsManager {\n  constructor() {\n    this.stats = new Map();\n  }\n\n  get(name) {\n    if (!this.stats.has(name)) {\n      this.stats.set(name, new Stats({\n        id: name\n      }));\n    }\n\n    return this.stats.get(name);\n  }\n\n}\n\nconst lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(global.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  global.luma = global.luma || {\n    VERSION,\n    version: VERSION,\n    log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;\n//# sourceMappingURL=init.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  const {\n    removedProps = {},\n    deprecatedProps = {},\n    replacedProps = {}\n  } = propChecks;\n\n  for (const propName in removedProps) {\n    if (propName in props) {\n      const replacementProp = removedProps[propName];\n      const replacement = replacementProp ? \"\".concat(className, \".\").concat(removedProps[propName]) : 'N/A';\n      log.removed(\"\".concat(className, \".\").concat(propName), replacement)();\n    }\n  }\n\n  for (const propName in deprecatedProps) {\n    if (propName in props) {\n      const replacementProp = deprecatedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n    }\n  }\n\n  let newProps = null;\n\n  for (const propName in replacedProps) {\n    if (propName in props) {\n      const replacementProp = replacedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n      newProps = newProps || Object.assign({}, props);\n      newProps[replacementProp] = props[propName];\n      delete newProps[propName];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  const upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at https://luma.gl/docs/upgrade-guide\");\n  const prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(methodName => {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = () => {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","import assert from './assert';\nconst uidCounters = {};\nexport function uid(id = 'id') {\n  uidCounters[id] = uidCounters[id] || 1;\n  const count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { assert } from '../utils';\nconst GL_BYTE = 0x1400;\nconst GL_UNSIGNED_BYTE = 0x1401;\nconst GL_SHORT = 0x1402;\nconst GL_UNSIGNED_SHORT = 0x1403;\nconst GL_POINTS = 0x0;\nconst GL_LINES = 0x1;\nconst GL_LINE_LOOP = 0x2;\nconst GL_LINE_STRIP = 0x3;\nconst GL_TRIANGLES = 0x4;\nconst GL_TRIANGLE_STRIP = 0x5;\nconst GL_TRIANGLE_FAN = 0x6;\nconst GL_FLOAT = 0x1406;\nconst GL_FLOAT_VEC2 = 0x8b50;\nconst GL_FLOAT_VEC3 = 0x8b51;\nconst GL_FLOAT_VEC4 = 0x8b52;\nconst GL_INT = 0x1404;\nconst GL_INT_VEC2 = 0x8b53;\nconst GL_INT_VEC3 = 0x8b54;\nconst GL_INT_VEC4 = 0x8b55;\nconst GL_UNSIGNED_INT = 0x1405;\nconst GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nconst GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nconst GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nconst GL_BOOL = 0x8b56;\nconst GL_BOOL_VEC2 = 0x8b57;\nconst GL_BOOL_VEC3 = 0x8b58;\nconst GL_BOOL_VEC4 = 0x8b59;\nconst GL_FLOAT_MAT2 = 0x8b5a;\nconst GL_FLOAT_MAT3 = 0x8b5b;\nconst GL_FLOAT_MAT4 = 0x8b5c;\nconst GL_FLOAT_MAT2x3 = 0x8b65;\nconst GL_FLOAT_MAT2x4 = 0x8b66;\nconst GL_FLOAT_MAT3x2 = 0x8b67;\nconst GL_FLOAT_MAT3x4 = 0x8b68;\nconst GL_FLOAT_MAT4x2 = 0x8b69;\nconst GL_FLOAT_MAT4x3 = 0x8b6a;\nconst COMPOSITE_GL_TYPES = {\n  [GL_FLOAT]: [GL_FLOAT, 1, 'float'],\n  [GL_FLOAT_VEC2]: [GL_FLOAT, 2, 'vec2'],\n  [GL_FLOAT_VEC3]: [GL_FLOAT, 3, 'vec3'],\n  [GL_FLOAT_VEC4]: [GL_FLOAT, 4, 'vec4'],\n  [GL_INT]: [GL_INT, 1, 'int'],\n  [GL_INT_VEC2]: [GL_INT, 2, 'ivec2'],\n  [GL_INT_VEC3]: [GL_INT, 3, 'ivec3'],\n  [GL_INT_VEC4]: [GL_INT, 4, 'ivec4'],\n  [GL_UNSIGNED_INT]: [GL_UNSIGNED_INT, 1, 'uint'],\n  [GL_UNSIGNED_INT_VEC2]: [GL_UNSIGNED_INT, 2, 'uvec2'],\n  [GL_UNSIGNED_INT_VEC3]: [GL_UNSIGNED_INT, 3, 'uvec3'],\n  [GL_UNSIGNED_INT_VEC4]: [GL_UNSIGNED_INT, 4, 'uvec4'],\n  [GL_BOOL]: [GL_FLOAT, 1, 'bool'],\n  [GL_BOOL_VEC2]: [GL_FLOAT, 2, 'bvec2'],\n  [GL_BOOL_VEC3]: [GL_FLOAT, 3, 'bvec3'],\n  [GL_BOOL_VEC4]: [GL_FLOAT, 4, 'bvec4'],\n  [GL_FLOAT_MAT2]: [GL_FLOAT, 8, 'mat2'],\n  [GL_FLOAT_MAT2x3]: [GL_FLOAT, 8, 'mat2x3'],\n  [GL_FLOAT_MAT2x4]: [GL_FLOAT, 8, 'mat2x4'],\n  [GL_FLOAT_MAT3]: [GL_FLOAT, 12, 'mat3'],\n  [GL_FLOAT_MAT3x2]: [GL_FLOAT, 12, 'mat3x2'],\n  [GL_FLOAT_MAT3x4]: [GL_FLOAT, 12, 'mat3x4'],\n  [GL_FLOAT_MAT4]: [GL_FLOAT, 16, 'mat4'],\n  [GL_FLOAT_MAT4x2]: [GL_FLOAT, 16, 'mat4x2'],\n  [GL_FLOAT_MAT4x3]: [GL_FLOAT, 16, 'mat4x3']\n};\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount({\n  drawMode,\n  vertexCount\n}) {\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount({\n  drawMode,\n  vertexCount\n}) {\n  const primitiveCount = getPrimitiveCount({\n    drawMode,\n    vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  const typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  const [type, components] = typeAndSize;\n  return {\n    type,\n    components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (const glType in COMPOSITE_GL_TYPES) {\n    const [compType, compComponents, name] = COMPOSITE_GL_TYPES[glType];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType,\n        name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","import { assert } from '../utils';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  const number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  const value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import { log, assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nconst FACES = [34069, 34070, 34071, 34072, 34073, 34074];\nexport default class TextureCube extends Texture {\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n    super(gl, Object.assign({}, props, {\n      target: 34067\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    const {\n      mipmaps = true,\n      parameters = {}\n    } = props;\n    this.opts = props;\n    this.setCubeMapImageData(props).then(() => {\n      this.loaded = true;\n\n      if (mipmaps) {\n        this.generateMipmap(props);\n      }\n\n      this.setParameters(parameters);\n    });\n    return this;\n  }\n\n  subImage({\n    face,\n    data,\n    x = 0,\n    y = 0,\n    mipmapLevel = 0\n  }) {\n    return this._subImage({\n      target: face,\n      data,\n      x,\n      y,\n      mipmapLevel\n    });\n  }\n\n  async setCubeMapImageData({\n    width,\n    height,\n    pixels,\n    data,\n    border = 0,\n    format = 6408,\n    type = 5121\n  }) {\n    const {\n      gl\n    } = this;\n    const imageDataMap = pixels || data;\n    const resolvedFaces = await Promise.all(FACES.map(face => {\n      const facePixels = imageDataMap[face];\n      return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n    }));\n    this.bind();\n    FACES.forEach((face, index) => {\n      if (resolvedFaces[index].length > 1 && this.opts.mipmaps !== false) {\n        log.warn(\"\".concat(this.id, \" has mipmap and multiple LODs.\"))();\n      }\n\n      resolvedFaces[index].forEach((image, lodLevel) => {\n        if (width && height) {\n          gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n        } else {\n          gl.texImage2D(face, lodLevel, format, format, type, image);\n        }\n      });\n    });\n    this.unbind();\n  }\n\n  setImageDataForFace(options) {\n    const {\n      face,\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = options;\n    const {\n      gl\n    } = this;\n    const imageData = pixels || data;\n    this.bind();\n\n    if (imageData instanceof Promise) {\n      imageData.then(resolvedImageData => this.setImageDataForFace(Object.assign({}, options, {\n        face,\n        data: resolvedImageData,\n        pixels: resolvedImageData\n      })));\n    } else if (this.width || this.height) {\n      gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n    } else {\n      gl.texImage2D(face, 0, format, format, type, imageData);\n    }\n\n    return this;\n  }\n\n}\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import { isWebGL2, assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\nexport default class Texture3D extends Texture {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    super(gl, props);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  setImageData({\n    level = 0,\n    dataFormat = 6408,\n    width,\n    height,\n    depth = 1,\n    border = 0,\n    format,\n    type = 5121,\n    offset = 0,\n    data,\n    parameters = {}\n  }) {\n    this._trackDeallocatedMemory('Texture');\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (ArrayBuffer.isView(data)) {\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, data);\n      }\n\n      if (data instanceof Buffer) {\n        this.gl.bindBuffer(35052, data.handle);\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, offset);\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n}\n//# sourceMappingURL=texture-3d.js.map","import Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  const TextureType = refTexture.constructor;\n  const {\n    gl,\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  } = refTexture;\n  const textureOptions = Object.assign({\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  const {\n    gl,\n    width,\n    height,\n    id\n  } = texture;\n  const framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: \"framebuffer-for-\".concat(id),\n    width,\n    height,\n    attachments: {\n      [36064]: texture\n    }\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","const ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  const type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType, {\n  clamped = true\n} = {}) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows({\n  data,\n  width,\n  height,\n  bytesPerPixel = 4,\n  temp\n}) {\n  const bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (let y = 0; y < height / 2; ++y) {\n    const topOffset = y * bytesPerRow;\n    const bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels({\n  data,\n  width,\n  height\n}) {\n  const newWidth = Math.round(width / 2);\n  const newHeight = Math.round(height / 2);\n  const newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (let y = 0; y < newHeight; y++) {\n    for (let x = 0; x < newWidth; x++) {\n      for (let c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","function _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nimport { config, formatValue, equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class MathArray extends _extendableBuiltin(Array) {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n\n    return this.check();\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n\n    return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  scale(scale) {\n    if (Array.isArray(scale)) {\n      return this.multiply(scale);\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scale;\n    }\n\n    return this.check();\n  }\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n\n    return this.check();\n  }\n\n  multiplyByScalar(scalar) {\n    return this.scale(scalar);\n  }\n\n  get elements() {\n    return this;\n  }\n\n  check() {\n    if (config.debug && !this.validate()) {\n      throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n    }\n\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n\n    return valid;\n  }\n\n}\n//# sourceMappingURL=math-array.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class Matrix extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  get RANK() {\n    assert(false);\n    return 0;\n  }\n\n  toString() {\n    let string = '[';\n\n    if (config.printRowMajor) {\n      string += 'row-major:';\n\n      for (let row = 0; row < this.RANK; ++row) {\n        for (let col = 0; col < this.RANK; ++col) {\n          string += \" \".concat(this[col * this.RANK + row]);\n        }\n      }\n    } else {\n      string += 'column-major:';\n\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        string += \" \".concat(this[i]);\n      }\n    }\n\n    string += ']';\n    return string;\n  }\n\n  getElementIndex(row, col) {\n    return col * this.RANK + row;\n  }\n\n  getElement(row, col) {\n    return this[col * this.RANK + row];\n  }\n\n  setElement(row, col, value) {\n    this[col * this.RANK + row] = checkNumber(value);\n    return this;\n  }\n\n  getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      result[i] = this[firstIndex + i];\n    }\n\n    return result;\n  }\n\n  setColumn(columnIndex, columnVector) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      this[firstIndex + i] = columnVector[i];\n    }\n\n    return this;\n  }\n\n}\n//# sourceMappingURL=matrix.js.map","import { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nconst IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nconst ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nconst INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nconst constants = {};\nexport default class Matrix4 extends Matrix {\n  static get IDENTITY() {\n    constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n    return constants.IDENTITY;\n  }\n\n  static get ZERO() {\n    constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n    return constants.ZERO;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  get RANK() {\n    return 4;\n  }\n\n  constructor(array) {\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    this[9] = array[9];\n    this[10] = array[10];\n    this[11] = array[11];\n    this[12] = array[12];\n    this[13] = array[13];\n    this[14] = array[14];\n    this[15] = array[15];\n    return this.check();\n  }\n\n  set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  toRowMajor(result) {\n    result[0] = this[0];\n    result[1] = this[4];\n    result[2] = this[8];\n    result[3] = this[12];\n    result[4] = this[1];\n    result[5] = this[5];\n    result[6] = this[9];\n    result[7] = this[13];\n    result[8] = this[2];\n    result[9] = this[6];\n    result[10] = this[10];\n    result[11] = this[14];\n    result[12] = this[3];\n    result[13] = this[7];\n    result[14] = this[11];\n    result[15] = this[15];\n    return result;\n  }\n\n  identity() {\n    return this.copy(IDENTITY);\n  }\n\n  fromQuaternion(q) {\n    mat4.fromQuat(this, q);\n    return this.check();\n  }\n\n  frustum({\n    left,\n    right,\n    bottom,\n    top,\n    near,\n    far\n  }) {\n    if (far === Infinity) {\n      Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n    } else {\n      mat4.frustum(this, left, right, bottom, top, near, far);\n    }\n\n    return this.check();\n  }\n\n  static _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n    const column0Row0 = 2.0 * near / (right - left);\n    const column1Row1 = 2.0 * near / (top - bottom);\n    const column2Row0 = (right + left) / (right - left);\n    const column2Row1 = (top + bottom) / (top - bottom);\n    const column2Row2 = -1.0;\n    const column2Row3 = -1.0;\n    const column3Row2 = -2.0 * near;\n    result[0] = column0Row0;\n    result[1] = 0.0;\n    result[2] = 0.0;\n    result[3] = 0.0;\n    result[4] = 0.0;\n    result[5] = column1Row1;\n    result[6] = 0.0;\n    result[7] = 0.0;\n    result[8] = column2Row0;\n    result[9] = column2Row1;\n    result[10] = column2Row2;\n    result[11] = column2Row3;\n    result[12] = 0.0;\n    result[13] = 0.0;\n    result[14] = column3Row2;\n    result[15] = 0.0;\n    return result;\n  }\n\n  lookAt(eye, center, up) {\n    if (arguments.length === 1) {\n      ({\n        eye,\n        center,\n        up\n      } = eye);\n    }\n\n    center = center || [0, 0, 0];\n    up = up || [0, 1, 0];\n    mat4.lookAt(this, eye, center, up);\n    return this.check();\n  }\n\n  ortho({\n    left,\n    right,\n    bottom,\n    top,\n    near = 0.1,\n    far = 500\n  }) {\n    mat4.ortho(this, left, right, bottom, top, near, far);\n    return this.check();\n  }\n\n  orthographic({\n    fovy = 45 * Math.PI / 180,\n    aspect = 1,\n    focalDistance = 1,\n    near = 0.1,\n    far = 500\n  }) {\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    const halfY = fovy / 2;\n    const top = focalDistance * Math.tan(halfY);\n    const right = top * aspect;\n    return new Matrix4().ortho({\n      left: -right,\n      right,\n      bottom: -top,\n      top,\n      near,\n      far\n    });\n  }\n\n  perspective({\n    fovy = undefined,\n    fov = 45 * Math.PI / 180,\n    aspect = 1,\n    near = 0.1,\n    far = 500\n  } = {}) {\n    fovy = fovy || fov;\n\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    mat4.perspective(this, fovy, aspect, near, far);\n    return this.check();\n  }\n\n  determinant() {\n    return mat4.determinant(this);\n  }\n\n  getScale(result = [-0, -0, -0]) {\n    result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n    result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n    return result;\n  }\n\n  getTranslation(result = [-0, -0, -0]) {\n    result[0] = this[12];\n    result[1] = this[13];\n    result[2] = this[14];\n    return result;\n  }\n\n  getRotation(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = 0;\n    result[4] = this[4] * inverseScale0;\n    result[5] = this[5] * inverseScale1;\n    result[6] = this[6] * inverseScale2;\n    result[7] = 0;\n    result[8] = this[8] * inverseScale0;\n    result[9] = this[9] * inverseScale1;\n    result[10] = this[10] * inverseScale2;\n    result[11] = 0;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = 0;\n    result[15] = 1;\n    return result;\n  }\n\n  getRotationMatrix3(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = this[4] * inverseScale0;\n    result[4] = this[5] * inverseScale1;\n    result[5] = this[6] * inverseScale2;\n    result[6] = this[8] * inverseScale0;\n    result[7] = this[9] * inverseScale1;\n    result[8] = this[10] * inverseScale2;\n    return result;\n  }\n\n  transpose() {\n    mat4.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat4.invert(this, this);\n    return this.check();\n  }\n\n  multiplyLeft(a) {\n    mat4.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat4.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotateX(radians) {\n    mat4.rotateX(this, this, radians);\n    return this.check();\n  }\n\n  rotateY(radians) {\n    mat4.rotateY(this, this, radians);\n    return this.check();\n  }\n\n  rotateZ(radians) {\n    mat4.rotateZ(this, this, radians);\n    return this.check();\n  }\n\n  rotateXYZ([rx, ry, rz]) {\n    return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4.rotate(this, this, radians, axis);\n    return this.check();\n  }\n\n  scale(factor) {\n    if (Array.isArray(factor)) {\n      mat4.scale(this, this, factor);\n    } else {\n      mat4.scale(this, this, [factor, factor, factor]);\n    }\n\n    return this.check();\n  }\n\n  translate(vec) {\n    mat4.translate(this, this, vec);\n    return this.check();\n  }\n\n  transform(vector, result) {\n    if (vector.length === 4) {\n      result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n      checkVector(result, 4);\n      return result;\n    }\n\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformAsPoint(vector, result) {\n    const {\n      length\n    } = vector;\n\n    switch (length) {\n      case 2:\n        result = vec2.transformMat4(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  transformAsVector(vector, result) {\n    switch (vector.length) {\n      case 2:\n        result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  makeRotationX(radians) {\n    return this.identity().rotateX(radians);\n  }\n\n  makeTranslation(x, y, z) {\n    return this.identity().translate([x, y, z]);\n  }\n\n  transformPoint(vector, result) {\n    deprecated('Matrix4.transformPoint', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformVector(vector, result) {\n    deprecated('Matrix4.transformVector', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformDirection(vector, result) {\n    deprecated('Matrix4.transformDirection', '3.0');\n    return this.transformAsVector(vector, result);\n  }\n\n}\n//# sourceMappingURL=matrix4.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  copy(vector) {\n    assert(false);\n    return this;\n  }\n\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}\n//# sourceMappingURL=vector.js.map","import Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nconst ORIGIN = [0, 0, 0];\nconst constants = {};\nexport default class Vector3 extends Vector {\n  static get ZERO() {\n    return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n  }\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(-0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n    }\n  }\n\n  set(x, y, z) {\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n    return this.check();\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    return this.check();\n  }\n\n  fromObject(object) {\n    if (config.debug) {\n      checkNumber(object.x);\n      checkNumber(object.y);\n      checkNumber(object.z);\n    }\n\n    this[0] = object.x;\n    this[1] = object.y;\n    this[2] = object.z;\n    return this.check();\n  }\n\n  toObject(object) {\n    object.x = this[0];\n    object.y = this[1];\n    object.z = this[2];\n    return object;\n  }\n\n  get ELEMENTS() {\n    return 3;\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    this[2] = checkNumber(value);\n  }\n\n  angle(vector) {\n    return vec3.angle(this, vector);\n  }\n\n  cross(vector) {\n    vec3.cross(this, this, vector);\n    return this.check();\n  }\n\n  rotateX({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateX(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateY({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateY(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateZ({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateZ(this, this, origin, radians);\n    return this.check();\n  }\n\n  transform(matrix4) {\n    return this.transformAsPoint(matrix4);\n  }\n\n  transformAsPoint(matrix4) {\n    vec3.transformMat4(this, this, matrix4);\n    return this.check();\n  }\n\n  transformAsVector(matrix4) {\n    vec3_transformMat4AsVector(this, this, matrix4);\n    return this.check();\n  }\n\n  transformByMatrix3(matrix3) {\n    vec3.transformMat3(this, this, matrix3);\n    return this.check();\n  }\n\n  transformByMatrix2(matrix2) {\n    vec3_transformMat2(this, this, matrix2);\n    return this.check();\n  }\n\n  transformByQuaternion(quaternion) {\n    vec3.transformQuat(this, this, quaternion);\n    return this.check();\n  }\n\n}\n//# sourceMappingURL=vector3.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import assert from './assert';\nconst RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nconst DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nconst config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure(options = {}) {\n  for (const key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value, {\n  precision = config.precision || 4\n} = {}) {\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : new Array(...array);\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (let i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, degrees => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, radians => radians * RADIANS_TO_DEGREES, result);\n}\nexport function sin(radians) {\n  return map(radians, angle => Math.sin(angle));\n}\nexport function cos(radians) {\n  return map(radians, angle => Math.cos(angle));\n}\nexport function tan(radians) {\n  return map(radians, angle => Math.tan(angle));\n}\nexport function asin(radians) {\n  return map(radians, angle => Math.asin(angle));\n}\nexport function acos(radians) {\n  return map(radians, angle => Math.acos(angle));\n}\nexport function atan(radians) {\n  return map(radians, angle => Math.atan(angle));\n}\nexport function clamp(value, min, max) {\n  return map(value, value => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map((ai, i) => lerp(ai, b[i], t));\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  const oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (let i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && typeof a === 'object' && b && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  const oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  let value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","export function vec2_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (let i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName = '') {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map","export default function getHiResTimestamp() {\n  let timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import getHiResTimestamp from '../utils/hi-res-timestamp';\nexport default class Stat {\n  constructor(name, type) {\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  setSampleSize(samples) {\n    this.sampleSize = samples;\n    return this;\n  }\n\n  incrementCount() {\n    this.addCount(1);\n    return this;\n  }\n\n  decrementCount() {\n    this.subtractCount(1);\n    return this;\n  }\n\n  addCount(value) {\n    this._count += value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  subtractCount(value) {\n    this._count -= value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  addTime(time) {\n    this._time += time;\n    this.lastTiming = time;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  timeStart() {\n    this._startTime = getHiResTimestamp();\n    this._timerPending = true;\n    return this;\n  }\n\n  timeEnd() {\n    if (!this._timerPending) {\n      return this;\n    }\n\n    this.addTime(getHiResTimestamp() - this._startTime);\n    this._timerPending = false;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  getSampleAverageCount() {\n    return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n  }\n\n  getSampleAverageTime() {\n    return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n  }\n\n  getSampleHz() {\n    return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n  }\n\n  getAverageCount() {\n    return this.samples > 0 ? this.count / this.samples : 0;\n  }\n\n  getAverageTime() {\n    return this.samples > 0 ? this.time / this.samples : 0;\n  }\n\n  getHz() {\n    return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n  }\n\n  reset() {\n    this.time = 0;\n    this.count = 0;\n    this.samples = 0;\n    this.lastTiming = 0;\n    this.lastSampleTime = 0;\n    this.lastSampleCount = 0;\n    this._count = 0;\n    this._time = 0;\n    this._samples = 0;\n    this._startTime = 0;\n    this._timerPending = false;\n    return this;\n  }\n\n  _checkSampling() {\n    if (this._samples === this.sampleSize) {\n      this.lastSampleTime = this._time;\n      this.lastSampleCount = this._count;\n      this.count += this._count;\n      this.time += this._time;\n      this.samples += this._samples;\n      this._time = 0;\n      this._count = 0;\n      this._samples = 0;\n    }\n  }\n\n}\n//# sourceMappingURL=stat.js.map","import Stat from './stat';\nexport default class Stats {\n  constructor({\n    id,\n    stats\n  }) {\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  get(name, type = 'count') {\n    return this._getOrCreate({\n      name,\n      type\n    });\n  }\n\n  get size() {\n    return Object.keys(this.stats).length;\n  }\n\n  reset() {\n    for (const key in this.stats) {\n      this.stats[key].reset();\n    }\n\n    return this;\n  }\n\n  forEach(fn) {\n    for (const key in this.stats) {\n      fn(this.stats[key]);\n    }\n  }\n\n  getTable() {\n    const table = {};\n    this.forEach(stat => {\n      table[stat.name] = {\n        time: stat.time || 0,\n        count: stat.count || 0,\n        average: stat.getAverageTime() || 0,\n        hz: stat.getHz() || 0\n      };\n    });\n    return table;\n  }\n\n  _initializeStats(stats = []) {\n    stats.forEach(stat => this._getOrCreate(stat));\n  }\n\n  _getOrCreate(stat) {\n    if (!stat || !stat.name) {\n      return null;\n    }\n\n    const {\n      name,\n      type\n    } = stat;\n\n    if (!this.stats[name]) {\n      if (stat instanceof Stat) {\n        this.stats[name] = stat;\n      } else {\n        this.stats[name] = new Stat(name, type);\n      }\n    }\n\n    return this.stats[name];\n  }\n\n}\n//# sourceMappingURL=stats.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMobile = isMobile;\nexports.default = getBrowser;\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireDefault(require(\"./is-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isMobile() {\n  return typeof _globals.window.orientation !== 'undefined';\n}\n\nfunction getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !(0, _isBrowser.default)()) {\n    return 'Node';\n  }\n\n  if ((0, _isElectron.default)(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (_globals.window.chrome) {\n    return 'Chrome';\n  }\n\n  if (_globals.window.safari) {\n    return 'Safari';\n  }\n\n  if (_globals.window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.console = exports.process = exports.document = exports.global = exports.window = exports.self = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nexports.self = self_;\nvar window_ = globals.window || globals.self || globals.global;\nexports.window = window_;\nvar global_ = globals.global || globals.self || globals.window;\nexports.global = global_;\nvar document_ = globals.document || {};\nexports.document = document_;\nvar process_ = globals.process || {};\nexports.process = process_;\nvar console_ = console;\nexports.console = console_;\n//# sourceMappingURL=globals.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"self\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.self;\n  }\n});\nObject.defineProperty(exports, \"window\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.window;\n  }\n});\nObject.defineProperty(exports, \"global\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.global;\n  }\n});\nObject.defineProperty(exports, \"document\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.document;\n  }\n});\nObject.defineProperty(exports, \"process\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.process;\n  }\n});\nObject.defineProperty(exports, \"console\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.console;\n  }\n});\nObject.defineProperty(exports, \"isBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isBrowserMainThread\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.isBrowserMainThread;\n  }\n});\nObject.defineProperty(exports, \"getBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isMobile\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.isMobile;\n  }\n});\nObject.defineProperty(exports, \"isElectron\", {\n  enumerable: true,\n  get: function get() {\n    return _isElectron.default;\n  }\n});\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireWildcard(require(\"./is-browser\"));\n\nvar _getBrowser = _interopRequireWildcard(require(\"./get-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isBrowser;\nexports.isBrowserMainThread = isBrowserMainThread;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || (0, _isElectron.default)();\n}\n\nfunction isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isElectron;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && (0, _typeof2.default)(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && (0, _typeof2.default)(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","import isElectron from './is-electron';\nexport default function isBrowser() {\n  const isNode = typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","export default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && typeof process.versions === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  const realUserAgent = typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport const isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","function getStorage(type) {\n  try {\n    const storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default class LocalStorage {\n  constructor(id, defaultSettings, type = 'sessionStorage') {\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n\n    return this;\n  }\n\n  _loadConfiguration() {\n    let configuration = {};\n\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n\n    Object.assign(this.config, configuration);\n    return this;\n  }\n\n}\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  let formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale, maxWidth = 600) {\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from './globals';\nexport const COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  let timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nconst DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\nconst ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nexport default class Log {\n  constructor({\n    id\n  } = {\n    id: ''\n  }) {\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel) {\n    this.setLevel(newLevel);\n  }\n\n  get level() {\n    return this.getLevel();\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getLevel() {\n    return this._storage.config.level;\n  }\n\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  get priority() {\n    return this.level;\n  }\n\n  getPriority() {\n    return this.level;\n  }\n\n  enable(enabled = true) {\n    this._storage.updateConfiguration({\n      enabled\n    });\n\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({\n      level\n    });\n\n    return this;\n  }\n\n  assert(condition, message) {\n    assert(condition, message);\n  }\n\n  warn(message) {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  error(message) {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  probe(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  log(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  info(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  once(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n  }\n\n  table(logLevel, table, columns) {\n    if (table) {\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n\n    return noop;\n  }\n\n  image({\n    logLevel,\n    priority,\n    image,\n    message = '',\n    scale = 1\n  }) {\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n\n    return isBrowser ? logImageInBrowser({\n      image,\n      message,\n      scale\n    }) : logImageInNode({\n      image,\n      message,\n      scale\n    });\n  }\n\n  settings() {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  get(setting) {\n    return this._storage.config[setting];\n  }\n\n  set(setting, value) {\n    this._storage.updateConfiguration({\n      [setting]: value\n    });\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n  }\n\n  timeStamp(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message, opts = {\n    collapsed: false\n  }) {\n    opts = normalizeArguments({\n      logLevel,\n      message,\n      opts\n    });\n    const {\n      collapsed\n    } = opts;\n    opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n    return this._getLogFunction(opts);\n  }\n\n  groupCollapsed(logLevel, message, opts = {}) {\n    return this.group(logLevel, message, Object.assign({}, opts, {\n      collapsed: true\n    }));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  withGroup(logLevel, message, func) {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  _shouldLog(logLevel) {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(logLevel, message, method, args = [], opts) {\n    if (this._shouldLog(logLevel)) {\n      opts = normalizeArguments({\n        logLevel,\n        message,\n        args,\n        opts\n      });\n      method = method || opts.method;\n      assert(method);\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      this._deltaTs = getHiResTimestamp();\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      message = decorateMessage(this.id, opts.message, opts);\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n}\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  const {\n    logLevel,\n    message\n  } = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  const args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  const messageType = typeof opts.message;\n  assert(messageType === 'string' || messageType === 'object');\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode({\n  image,\n  message = '',\n  scale = 1\n}) {\n  let asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return () => asciify(image, {\n      fit: 'box',\n      width: \"\".concat(Math.round(80 * scale), \"%\")\n    }).then(data => console.log(data));\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser({\n  image,\n  message = '',\n  scale = 1\n}) {\n  if (typeof image === 'string') {\n    const img = new Image();\n\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  const element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n\n    img.onload = () => console.log(...formatImage(img, message, scale));\n\n    img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n//# sourceMappingURL=log.js.map","export function autobind(obj, predefined = ['constructor']) {\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n//# sourceMappingURL=autobind.js.map","var indexOf = function (xs, item) {\n    if (xs.indexOf) return xs.indexOf(item);\n    else for (var i = 0; i < xs.length; i++) {\n        if (xs[i] === item) return i;\n    }\n    return -1;\n};\nvar Object_keys = function (obj) {\n    if (Object.keys) return Object.keys(obj)\n    else {\n        var res = [];\n        for (var key in obj) res.push(key)\n        return res;\n    }\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nvar defineProp = (function() {\n    try {\n        Object.defineProperty({}, '_', {});\n        return function(obj, name, value) {\n            Object.defineProperty(obj, name, {\n                writable: true,\n                enumerable: false,\n                configurable: true,\n                value: value\n            })\n        };\n    } catch(e) {\n        return function(obj, name, value) {\n            obj[name] = value;\n        };\n    }\n}());\n\nvar globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',\n'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',\n'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',\n'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',\n'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];\n\nfunction Context() {}\nContext.prototype = {};\n\nvar Script = exports.Script = function NodeScript (code) {\n    if (!(this instanceof Script)) return new Script(code);\n    this.code = code;\n};\n\nScript.prototype.runInContext = function (context) {\n    if (!(context instanceof Context)) {\n        throw new TypeError(\"needs a 'context' argument.\");\n    }\n    \n    var iframe = document.createElement('iframe');\n    if (!iframe.style) iframe.style = {};\n    iframe.style.display = 'none';\n    \n    document.body.appendChild(iframe);\n    \n    var win = iframe.contentWindow;\n    var wEval = win.eval, wExecScript = win.execScript;\n\n    if (!wEval && wExecScript) {\n        // win.eval() magically appears when this is called in IE:\n        wExecScript.call(win, 'null');\n        wEval = win.eval;\n    }\n    \n    forEach(Object_keys(context), function (key) {\n        win[key] = context[key];\n    });\n    forEach(globals, function (key) {\n        if (context[key]) {\n            win[key] = context[key];\n        }\n    });\n    \n    var winKeys = Object_keys(win);\n\n    var res = wEval.call(win, this.code);\n    \n    forEach(Object_keys(win), function (key) {\n        // Avoid copying circular objects like `top` and `window` by only\n        // updating existing context properties or new properties in the `win`\n        // that was only introduced after the eval.\n        if (key in context || indexOf(winKeys, key) === -1) {\n            context[key] = win[key];\n        }\n    });\n\n    forEach(globals, function (key) {\n        if (!(key in context)) {\n            defineProp(context, key, win[key]);\n        }\n    });\n    \n    document.body.removeChild(iframe);\n    \n    return res;\n};\n\nScript.prototype.runInThisContext = function () {\n    return eval(this.code); // maybe...\n};\n\nScript.prototype.runInNewContext = function (context) {\n    var ctx = Script.createContext(context);\n    var res = this.runInContext(ctx);\n\n    if (context) {\n        forEach(Object_keys(ctx), function (key) {\n            context[key] = ctx[key];\n        });\n    }\n\n    return res;\n};\n\nforEach(Object_keys(Script.prototype), function (name) {\n    exports[name] = Script[name] = function (code) {\n        var s = Script(code);\n        return s[name].apply(s, [].slice.call(arguments, 1));\n    };\n});\n\nexports.isContext = function (context) {\n    return context instanceof Context;\n};\n\nexports.createScript = function (code) {\n    return exports.Script(code);\n};\n\nexports.createContext = Script.createContext = function (context) {\n    var copy = new Context();\n    if(typeof context === 'object') {\n        forEach(Object_keys(context), function (key) {\n            copy[key] = context[key];\n        });\n    }\n    return copy;\n};\n","// Current version.\nexport var VERSION = '1.13.6';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the function’s\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6’s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that object’s\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because we’re not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result — either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n"],"names":["loggers","register","handlers","debug","eventType","call","arguments","ShaderAttribute","constructor","dataColumn","opts","this","source","value","getValue","buffer","getBuffer","accessor","getAccessor","size","constantValue","length","Float32Array","index","elementOffset","i","getStride","stride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","offset","log","vertexOffset","EMPTY","FULL","Infinity","Attribute","gl","id","logicalType","type","doublePrecision","defaultValue","Number","isFinite","Array","fill","bufferType","isIndexed","defaultType","glType","Float64Array","Uint16Array","Uint32Array","Uint8ClampedArray","Int8Array","Int16Array","Int32Array","Error","glArrayFromType","shaderAttributes","fp64","BYTES_PER_ELEMENT","settings","state","externalBuffer","bufferAccessor","allocatedValue","constant","_buffer","setData","target","byteOffset","delete","getShaderAttributes","options","isBuffer64Bit","doubleShaderAttributeDefs","resolvedOptions","high","low","resolveDoublePrecisionShaderAttributes","concat","shaderAttributeDef","ArrayBuffer","isView","_normalizeValue","normalized","_normalizeConstant","_areValuesEqual","_checkExternalBuffer","requiredBufferSize","byteLength","reallocate","setAccessor","subData","data","updateSubBuffer","startOffset","endOffset","startIndex","endIndex","subarray","allocate","numInstances","copy","oldValue","ArrayType","illegalArrayType","name","map","x","out","start","value1","value2","super","transition","noAlloc","update","transform","startIndices","Object","assign","_autoUpdater","lastExternalBuffer","binaryValue","binaryAccessor","needsUpdate","needsRedraw","updateRanges","seal","_validateAttributeUpdaters","layout","clearChangedFlags","getUpdateTriggers","supportsTransition","Boolean","getTransitionSetting","layerSettings","userSettings","isArray","find","a","setNeedsUpdate","reason","dataRange","setNeedsRedraw","startRow","endRow","rangeList","range","newRangeList","len","insertPosition","range0","push","Math","min","max","splice","clearNeedsUpdate","updateBuffer","props","context","updated","getVertexOffset","_checkAttributeArray","setConstantValue","undefined","setExternalBuffer","setBinaryValue","assert","needsNormalize","nested","row","shaderAttributeDefs","shaderAttributeName","attribute","accessorFunc","iterable","objectInfo","object","objectValue","numVertices","item","set","count","limit","valid","TRANSITION_TYPES","interpolation","timeline","attributeInTransition","currentStartIndices","currentLength","attributeType","vs","defines","ATTRIBUTE_TYPE","varyings","getTransform","bufferOpts","usage","buffers","inProgress","transitionSettings","duration","cancel","padBufferOpts","fromLength","fromStartIndices","getData","enter","elementCount","floor","sourceBuffers","aFrom","aTo","feedbackBuffers","vCurrent","time","easing","t","run","uniforms","pop","spring","texture","Uint8Array","format","border","mipmaps","dataFormat","width","height","getTexture","framebuffer","attachments","getFramebuffer","fs","aPrev","aCur","vNext","discard","clearRenderTarget","stiffness","damping","parameters","depthTest","blend","viewport","blendFunc","blendEquation","end","AttributeTransitionManager","transitions","isSupported","finalize","attributeName","_removeTransition","attributes","_updateAttribute","hasAttribute","getAttributes","animatedAttributes","isNew","TransitionType","TRACE_INVALIDATE","AttributeManager","stats","updateTriggers","accessors","userData","attributeTransitionManager","getNeedsRedraw","clearRedrawFlags","redraw","add","updaters","_add","addInstanced","instanced","remove","attributeNameArray","invalidate","triggerName","invalidatedAttributes","_invalidateTrigger","invalidateAll","get","timeStart","accessorName","timeEnd","updateTransition","transitionUpdated","getChangedAttributes","changedAttributes","excludeAttributes","getAccessors","extraProps","_createAttribute","_mapUpdateTriggersToAttributes","elements","divisor","triggers","forEach","padArrayChunk","sourceLength","targetLength","datum","j","DEFAULT_TRANSITION_SETTINGS","normalizeTransitionSettings","getSourceBufferAttribute","getAttributeTypeFromSize","cycleBuffers","shift","getAttributeBufferLength","multiplier","padBuffer","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","srcByteOffset","getter","chunk","getMissingData","sourceStartIndices","targetStartIndices","sourceIndex","targetIndex","getChunkData","n","nextSourceIndex","nextTargetIndex","padArray","COORDINATE_SYSTEM","DEFAULT","LNGLAT","METER_OFFSETS","LNGLAT_OFFSETS","CARTESIAN","defineProperty","PROJECTION_MODE","WEB_MERCATOR","GLOBE","WEB_MERCATOR_AUTO_OFFSET","IDENTITY","EVENTS","click","handler","panstart","panmove","panend","CPUInterpolationTransition","_value","_onUpdate","fromValue","toValue","EPSILON","updateSpringElement","prev","cur","dest","velocity","distance","distanceSquare","d","sqrt","abs","CPUSpringTransition","_currValue","_prevValue","nextValue","next","updateSpring","delta","UniformTransitionManager","Map","active","key","has","propsInTransition","clear","keys","lngLatZToWorldPosition","lngLatZ","offsetMode","p","projectPosition","longitude","latitude","z","distanceScales","getDistanceScales","unitsPerMeter","getWorldPosition","position","modelMatrix","coordinateSystem","coordinateOrigin","y","vec4","isGeospatial","DEFAULT_TEXTURE_PARAMETERS","internalTextures","TYPE_DEFINITIONS","boolean","validate","propType","equal","number","color","optional","arrayEqual","valueType","getTypeOf","array","compare","function","component","dataTransform","image","layer","specialTextureParameters","compressed","textureParameters","createTexture","release","array1","array2","parsePropType","propDef","normalizePropDefinition","COMPONENT","ASYNC_ORIGINAL","ASYNC_RESOLVED","ASYNC_DEFAULTS","createProps","propsPrototype","getPropsPrototype","propsInstance","create","freeze","componentClass","getOwnProperty","prototype","parentClass","getPrototypeOf","parentDefaultProps","componentPropDefs","propDefs","propTypes","defaultProps","deprecatedProps","propName","entries","deprecatedFor","parsePropTypes","parentProps","componentName","getComponentName","defineProperties","writable","createPropsPrototype","_propTypes","defaultValues","descriptors","async","getDescriptorForAsyncProp","addAsyncPropsToPropPrototype","_deprecatedProps","enumerable","newValue","nameStr","newPropName","join","addDeprecatedPropsToPropPrototype","_mergedDefaultProps","createPropsPrototypeAndTypes","Promise","internalState","hasAsyncProp","getAsyncProp","prop","hasOwnProperty","EMPTY_PROPS","ComponentState","asyncProps","onAsyncPropUpdated","oldProps","oldAsyncProps","asyncProp","resolvedValue","getOldProps","resetOldProps","freezeAsyncOldProps","isAsyncPropLoading","pendingLoadCount","resolvedLoadCount","reloadAsyncProp","_watchPromise","resolve","setAsyncProps","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_didAsyncInputValueChange","_this$layer","fetch","url","_resolveAsyncIterable","_setPropValue","lastValue","_postProcessValue","_setAsyncPropValue","loadCount","promise","then","_this$layer2","onDataLoad","catch","error","_this$layer3","raiseError","_this$layer4","counter","Component","apply","lifecycle","parent","clone","newProps","_initState","LayerState","attributeManager","model","subLayers","usesPickingColorCache","MAX_PICKING_COLOR_CACHE_SIZE","EMPTY_ARRAY","areViewportsEqual","memoize","oldViewport","equals","pickingColorCache","dataComparator","_dataDiff","__diff","onError","loaders","loadOptions","signal","resourceManager","_loadOptions","getLoadOptions","inResourceManager","contains","resourceId","load","persistent","subscribe","onChange","consumerId","requestId","visible","pickable","opacity","onHover","onClick","onDragStart","onDrag","onDragEnd","wrapLongitude","positionFormat","colorFormat","extensions","getPolygonOffset","layerIndex","highlightedObjectIndex","autoHighlight","highlightColor","Layer","toString","className","layerName","message","_this$props$onError","_this$props","_this$context","_this$context$onError","setState","updateObject","setChangeFlags","stateChanged","layerManager","String","_getNeedsRedraw","hasUniformTransition","shouldUpdateState","_getUpdateParams","uniformTransitions","isLoaded","isPickable","getModels","models","getAttributeManager","getCurrentLayer","project","xyz","worldPosition","pixelProjectionMatrix","unproject","xy","params","fromCoordinateSystem","fromCoordinateOrigin","normalizedParams","normalizeParameters","geospatialOrigin","shaderCoordinateOrigin","positionCommonSpace","vec3","use64bitPositions","info","pickingEvent","nullPickingColor","encodePickingColor","decodePickingColor","i1","i2","i3","initializeState","getShaders","shaders","extension","changeFlags","propsOrDataChanged","updateState","dataChanged","neededPickingBuffer","needPickingBuffer","pickingColors","instancePickingColors","pickingColorsAttribute","finalizeState","unsubscribe","draw","getPickingInfo","mode","activateViewport","viewportChanged","isComposite","_update","invalidateAttribute","diffReason","updateAttributes","_setModelAttributes","_updateAttributes","getNumInstances","getStartIndices","ignoreUnknownAttributes","_updateAttributeTransition","_updateUniformTransition","calculateInstancePickingColors","cacheSize","maxCount","newCacheSize","pickingColor","setAttributes","disablePickingIndex","objectIndex","_disablePickingIndex","colors","restorePickingColors","container","isPlainObject","_initialize","propsChanged","extensionsChanged","_updateState","stateNeedsUpdate","currentProps","currentViewport","updateParams","oldModels","modelChanged","_updateModules","_renderLayers","setInstanceCount","clearChangeFlags","_finalize","drawLayer","moduleParameters","pow","setModuleParameters","offsets","polygonOffset","getChangeFlags","flags","flagChanged","updateTriggersChanged","somethingChanged","diffProps","transitionsChanged","validateProps","updateModuleSettings","updateAutoHighlight","_updateAutoHighlight","pickingModuleParameters","pickingSelectedColor","picked","pickingHighlightColor","forceUpdate","isInteger","attributeManagerNeedsRedraw","_getAttributeManager","_onAsyncPropUpdated","bind","_transferState","oldLayer","LIFECYCLE","NO_STATE","MATCHED","INITIALIZED","AWAITING_GC","AWAITING_FINALIZATION","FINALIZED","PROP_SYMBOLS","Symbol","for","getPropTypes","propsChangedReason","compareProps","ignoreProps","dataChangedReason","diffDataProps","updateTriggersChangedReason","diffUpdateTrigger","all","triggerChanged","diffUpdateTriggers","diffExtensions","diffTransitions","result","comparePropValues","changed","newProp","oldProp","oldExtensions","newTriggers","oldTriggers","LayerType","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","INITIAL_MODULE_OPTIONS","dependencies","getUniforms","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","IDENTITY_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","devicePixelRatio","projectionCenter","viewProjectionMatrix","cameraPosCommon","viewMatrixUncentered","projectionMatrix","viewMatrix","cameraPosition","getOffsetOrigin","calculateMatrixAndOffset","viewportSize","focalDistance","project_uCoordinateSystem","project_uProjectionMode","projectionMode","project_uCoordinateOrigin","project_uCenter","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","scale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","unitsPerMeter2","unitsPerDegree","unitsPerDegree2","fround","center","unprojectPosition","getUniformsFromViewport","autoWrapLongitude","project_uWrapLongitude","project_uModelMatrix","noop","DEFAULT_SETTINGS","onStart","onUpdate","onInterrupt","onEnd","Transition","_inProgress","_handle","removeChannel","addChannel","delay","getTime","isFinished","condition","flatten","filter","flattenArray","fillArray","total","copied","copyWithin","placeholderArray","createIterable","iterator","from","slice","isAsyncIterable","asyncIterator","getAccessorFromBuffer","typedArray","elementStride","vertexCount","_","createMat4","getCameraPosition","viewMatrixInverse","getFrustumPlanes","planes","left","getFrustumPlane","right","bottom","top","near","far","scratchVector","b","c","L","normal","fp64LowPart","scratchArray","toDoublePrecisionArray","isEqual","compute","cachedResult","cachedArgs","args","mergeShaders","modules","some","module","findIndex","inject","mergedInjection","_pool","overAlloc","poolSize","setProps","padding","initialize","Type","newSize","maxSize","newArray","_allocate","_release","sizeToAllocate","ceil","pool","DEGREES_TO_RADIANS","PI","DEFAULT_DISTANCE_SCALES","metersPerUnit","Viewport","displayName","_frustumPlanes","_initViewMatrix","_initProjectionMatrix","_initPixelMatrices","projectFlat","unprojectFlat","metersPerPixel","zoom","topLeft","coord","y2","targetZ","targetZWorld","pixelUnprojectionMatrix","X","Y","Z","getBounds","unprojectOption","topRight","bottomLeft","bottomRight","highPrecision","containsPixel","panByPosition","coords","pixel","getCameraDirection","cameraDirection","getCameraUp","cameraUp","_createProjectionMatrix","orthographic","fovyRadians","aspect","fovy","perspective","log2","meterOffset","transformVector","_getCenterInWorld","multiplyRight","translate","negate","commonPosition","vpm","viewportMatrix","WebMercatorViewport","pitch","bearing","nearZMultiplier","farZMultiplier","repeat","worldOffset","altitude","fov","multiplyLeft","_subViewports","subViewports","bounds","minOffset","maxOffset","offsetViewport","addMetersToLngLat","fromLocation","toLocation","newCenter","corners","fitBounds","channelHandles","animationHandles","Timeline","channels","animations","playing","lastEngineTime","POSITIVE_INFINITY","rate","handle","channel","_setChannelTime","animationHandle","animation","detachAnimation","setTime","values","animationData","play","pause","reset","attachAnimation","channelHandle","engineTime","offsetTime","Resource","_loadCount","_subscribers","Set","consumer","inUse","_error","reject","_content","_loader","_data","loader","subscriber","ResourceManager","protocol","_context","_resources","_consumers","_pruneRequest","startsWith","res","request","resource","prune","resources","replace","_track","setTimeout","_prune","consumers","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","programManager","shaderModule","addDefaultModule","shaderHook","addShaderHook","INITIAL_CONTEXT","deck","shaderCache","pickingFBO","mousePosition","LayerManager","lastRenderedLayers","layers","_nextLayers","_needsRedraw","_needsUpdate","_debug","_finalizeLayer","layerNeedsRedraw","getLayers","layerIds","layerId","indexOf","setLayers","newLayers","_updateLayers","updateLayers","_handleError","stage","oldLayers","oldLayerMap","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","newLayer","sublayers","_transferLayerState","_updateLayer","_initializeLayer","getSubLayers","err","deepEqual","aValue","bValue","ViewManager","views","viewState","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractionStateChange","updateViewStates","viewId","controller","getViewports","rect","getViews","viewMap","view","getView","viewOrViewId","getViewState","getViewStateId","filterViewState","getViewport","viewports","_setViews","_setViewState","_setSize","_rebuildViewports","_diffViews","_onViewStateChange","event","_createController","Controller","onStateChange","makeViewport","_getViewport","_updateController","controllerProps","oldControllers","invalidateControllers","oldController","unshift","_buildViewportMap","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","match","parseFloat","getPosition","extent","round","View","viewportInstance","_parseDimensions","viewportDimensions","getDimensions","newViewState","_x","_y","_width","_height","_getControllerProps","defaultOpts","ViewportType","DEFAULT_PROPS","transitionEasing","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","TransitionManager","ControllerState","_onTransitionUpdate","getViewportInTransition","processViewStateChange","nextProps","transitionTriggered","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","endProps","startProps","_triggerTransition","transitionDuration","transitionInterpolator","_isUpdateDueToCurrentTransition","interpolator","arePropsEqual","startViewstate","endViewStateProps","shortestPathFrom","getDuration","initialProps","initializeProps","_onTransitionEnd","inTransition","callback","isZooming","isPanning","isRotating","interpolateProps","getViewportProps","oldViewState","DEFAULT_REQUIRED_PROPS","LinearInterpolator","extract","required","_propsToCompare","_propsToExtract","_requiredProps","startViewStateProps","_checkRequiredProps","transitionProps","around","startViewport","endViewport","aroundPosition","NO_TRANSITION_PROPS","LINEAR_TRANSITION_PROPS","INERTIA_EASING","EVENT_TYPES","MapState","_viewportProps","_applyConstraints","getState","_state","maxZoom","minZoom","maxPitch","minPitch","startPanLngLat","startZoomLngLat","startRotatePos","startBearing","startPitch","startZoom","normalize","panStart","pos","_getUpdatedState","_unproject","pan","startPos","panEnd","rotateStart","rotate","deltaAngleX","deltaAngleY","newRotation","_calculateNewPitchAndBearing","_getRotationParams","rotateEnd","zoomStart","_calculateNewZoom","zoomedViewport","zoomEnd","zoomIn","speed","_zoomFromCenter","zoomOut","moveLeft","_panFromCenter","moveRight","moveUp","moveDown","rotateLeft","rotateRight","rotateUp","rotateDown","fromProps","deltaScaleX","deltaScaleY","deltaX","deltaY","centerY","startY","MapController","controllerState","controllerStateProps","transitionManager","_onTransition","_setInteractionState","linearTransitionProps","_transition","_events","_interactionState","isDragging","_customEvents","handleEvent","events","customEvents","toggleEvents","eventName","off","eventStartBlocked","_eventStartBlocked","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onTriplePanStart","_onTriplePan","_onTriplePanEnd","_onDoubleTap","_onWheel","_onKeyDown","getCenter","offsetCenter","isPointInBounds","handled","inside","stopPropagation","isFunctionKeyPressed","srcEvent","metaKey","altKey","ctrlKey","shiftKey","blockEvents","timeout","timer","dragMode","_getTransitionProps","inertia","scrollZoom","dragPan","dragRotate","doubleClickZoom","touchZoom","touchRotate","keyboard","isInteractive","eventNames","enabled","on","updateViewport","newControllerState","interactionState","newStates","alternateMode","rightButton","invertPan","_panMove","_onPanMove","_onPanRotate","_onPanMoveEnd","_onPanRotateEnd","endPos","velocityX","velocityY","preventDefault","smooth","exp","_startPinchRotation","rotation","_lastPinchEvent","velocityZ","deltaTime","endScale","isZoomOut","funcKey","zoomSpeed","moveSpeed","rotateSpeedX","rotateSpeedY","code","MapView","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","idCount","AmbientLight","intensity","DEFAULT_LIGHT_DIRECTION","DirectionalLight","direction","_shadow","toArray","shadow","getProjectedLight","Effect","preRender","getModuleParameters","cleanup","LayersPass","render","_drawLayers","onViewportActive","clearCanvas","pass","drawingBufferWidth","drawingBufferHeight","clearGLCanvas","renderStats","viewportOrDescriptor","drawLayerParams","_getDrawLayerParams","subViewport","_drawLayersInViewport","layerFilter","effects","indexResolver","layerIndexResolver","drawContext","isPicking","renderPass","shouldDrawLayer","_shouldDrawLayer","layerParam","layerRenderIndex","_getModuleParameters","layerParameters","getLayerParameters","glViewport","canvas","clientHeight","dimensions","pixelRatio","getGLViewport","clearOpts","depth","scissorTest","scissor","renderStatus","totalCount","visibleCount","compositeCount","pickableCount","filterSubLayer","overrides","pickingActive","effect","layerIndices","resolvers","resolveLayerIndex","isDrawn","indexOverride","_offset","parentId","resolver","ShadowPass","shadowMap","depthBuffer","fbo","depthRange","clearColor","resize","shadowEnabled","drawToShadowMap","getMemoizedViewportCenterPosition","invert","getMemoizedViewProjectionMatrices","shadowMatrices","projectionMatrices","farZ","screenToCommonSpace","shadowMatrix","positions","corner","ortho","DEFAULT_SHADOW_COLOR","shadowMaps","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","dummyShadowMap","createShadowUniforms","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","LightingEffect","ambientLight","directionalLights","pointLights","shadowPasses","lightSource","_applyDefaultLights","light","_createLightMatrix","_createShadowPasses","lightSources","directionalLight","pointLight","shadowPass","removeDefaultModule","lightMatrices","lookAt","eye","DEFAULT_LIGHTING_EFFECT","EffectManager","_internalEffects","setEffects","getEffects","_createInternalEffects","DrawLayersPass","PICKING_PARAMETERS","PickLayersPass","useAlpha","_drawPickingBuffer","deviceRect","redrawReason","pickZ","depthMask","colorMask","pickingAttribute","pickParameters","blendColor","DeckRenderer","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","renderLayers","layerPass","_preRender","outputBuffer","_postRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","pickedColor","pickedLayer","pickedObjectIndex","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy","dy2","col","dx","d2","pickedLayerIndex","pickedX","pickedY","getEmptyPickingInfo","pickInfo","getViewportFromCoordinates","v","coordinate","devicePixel","processPickInfo","lastPickedInfo","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","baseInfo","infos","getLayerPickingInfo","sourceLayer","DeckPicker","_pickable","depthFBO","pickObject","_pickClosestObject","pickObjects","_pickVisibleObjects","getLastPickedObject","lastPickedViewportId","l","_resizeBuffer","colorBufferFloat","attach","_getPickable","pickableLayers","radius","unproject3D","emptyInfo","devicePixelRange","_getPickingRect","deviceWidth","deviceHeight","_drawAndSample","maxObjects","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueColors","colorKey","getUniqueObjects","uniqueInfos","isMaxObjects","sourceX","sourceY","sourceWidth","sourceHeight","defaultStyle","zIndex","pointerEvents","backgroundColor","display","Tooltip","canvasParent","parentElement","el","document","createElement","style","appendChild","isVisible","setTooltip","displayInfo","innerText","text","innerHTML","html","mimeTypes","testText","firstChar","lastChar","parseTextSync","JSON","parse","version","existingVersion","VERSION","_registerLoggers","imagebitmap","premultiplyAlpha","Query","static","webgl2","hasTimerQuery","supported","_queryPending","_pollingPromise","beginTimeElapsedQuery","begin","beginOcclusionQuery","conservative","beginTransformFeedbackQuery","gl2","beginQuery","endQuery","isResultAvailable","resultAvailable","getQueryParameter","isTimerDisjoint","getParameter","getResult","getTimerMilliseconds","createPoll","poll","requestAnimationFrame","_createHandle","createQuery","_deleteHandle","deleteQuery","cancelAnimationFrame","timerId","window","clearTimeout","isPage","statIdCounter","AnimationLoop","onCreateContext","onAddHTML","onInitialize","onRender","onFinalize","glOptions","createFramebuffer","autoResizeViewport","autoResizeDrawingBuffer","useDevicePixels","useDevicePixelRatio","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","stop","_pageLoadPromise","_onMousemove","_onMouseleave","_setDisplay","startPromise","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","animationProps","appContext","_addCallbackData","_startLoop","isContextLost","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","attachTimeline","detachTimeline","waitForRender","toDataURL","getHTMLControlValue","element","getElementById","setViewParameters","renderFrame","_requestAnimationFrame","readyState","addEventListener","animationLoop","renderFrameCallback","_resizeFramebuffer","startTime","Date","now","tick","tock","_timeline","_loop","_animationLoop","_mousePosition","_getSizeAndAspect","_offScreen","OffscreenCanvas","_createInfoDiv","wrapperDiv","body","div","background","clientWidth","addTime","e","offsetX","offsetY","pickingRadius","touchAction","eventRecognizerOptions","_framebuffer","_animate","_typedArrayManagerProps","onWebGLInitialized","onResize","onBeforeRender","onAfterRender","onLoad","_onMetrics","getCursor","Deck","viewManager","effectManager","deckRenderer","deckPicker","_pickRequest","_lastPointerDownInfo","interactiveState","isHovering","_onEvent","_onPointerDown","_onPointerMove","initialViewState","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","destroy","tooltip","removeChild","_setCanvasSize","resolvedProps","_getViews","_getViewState","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","force","incrementCount","_customRender","_pick","pickMultipleObjects","_addResources","_removeResources","resourceIds","method","statKey","_updateCanvasSize","_checkForCanvasSizeChange","newWidth","newHeight","onContextLost","_onContextLost","_setGLContext","_onRenderFrame","leftButton","_pickAndCallback","pickedInfo","getTooltip","_updateCursor","cursor","enable","copyState","polygonOffsetFill","depthFunc","recognizerOptions","pointerdown","pointermove","pointerleave","_onInteractionStateChange","renderOptions","_getFrameStats","_getMetrics","eventOptions","layerHandler","rootHandler","animationLoopStats","lastTiming","getHz","getAverageTime","memoryStats","PropTypes","string","oneOfType","func","arrayOf","instanceOf","bool","useLayoutEffect","useEffect","inheritsFrom","ParentType","wrapInView","node","children","MAP_STYLE","evaluateChildren","childProps","child","componentProps","mapStyle","isReactMap","cloneElement","deckGLViewProps","needsDeckGLViewProps","CANVAS_ONLY_STYLES","mixBlendMode","redrawDeck","thisRef","DeckGL","forwardRef","ref","useRef","current","setVersion","useState","containerRef","canvasRef","jsxProps","useMemo","reactChildren","jsxLayers","jsxViews","reactElement","ElementType","reactProps","createLayer","extractJSXLayers","inRender","handleViewStateChange","viewStateUpdateRequested","handleInteractionStateChange","interactionStateUpdateRequested","deckProps","forwardProps","lastRenderedViewports","createDeckInstance","useImperativeHandle","handles","getRefHandles","currentViewports","ContextProvider","containerStyle","canvasStyle","extractStyles","childrenUnderViews","defaultViewId","viewChildren","viewElement","contextValue","offsetParent","positionChildrenUnderViews","control","isFunction","isObject","isPureObject","isIterable","isResponse","Response","arrayBuffer","json","isBlob","Blob","isBuffer","isReadableStream","ReadableStream","tee","getReader","isReadableDOMStream","read","pipe","isBoolean","readable","isReadableNodeStream","self","g","process","browser","isMobile","orientation","matches","exec","workerURLCache","getLoadableWorkerURLFromSource","workerSource","blob","URL","createObjectURL","getTransferList","recursive","transfers","transfersSet","isTransferable","MessagePort","ImageBitmap","NOOP","WorkerThread","Worker","onMessage","console","worker","_createBrowserWorker","terminate","terminated","isRunning","postMessage","transferList","_getErrorFromErrorEvent","lineno","colno","_loadableURL","workerURL","getLoadableWorkerURL","onmessage","onerror","onmessageerror","WorkerJob","jobName","workerThread","_resolve","_reject","payload","done","WorkerPool","idleQueue","isDestroyed","maxConcurrency","maxMobileConcurrency","reuseWorkers","onDebug","job","jobQueue","_startQueuedJob","_getAvailableWorker","queuedJob","backlog","returnWorkerToQueue","_getMaxConcurrency","toLowerCase","WorkerFarm","_workerFarm","workerPools","workerPool","_getWorkerPoolProps","getWorkerPool","parseWithWorker","parseOnMainThread","workerOptions","workerFile","workerUrl","_workerType","versionTag","getWorkerURL","getWorkerFarm","stringify","startJob","input","warn","toArrayBuffer","TextEncoder","encode","_toArrayBuffer","makeStreamIterator","stream","reader","nextBatchPromise","currentBatchPromise","_streamReadAhead","releaseLock","makeBrowserStreamIterator","makeNodeStreamIterator","ERR_DATA","getArrayBufferOrStringFromData","isArrayBuffer","binary","TextDecoder","decode","getArrayBufferOrStringFromDataSync","response","chunkSize","textEncoder","chunkLength","makeStringIterator","chunkByteLength","sourceArray","makeArrayBufferIterator","makeBlobIterator","arrayBuffers","sources","sourceArrays","source2","reduce","concatenateArrayBuffers","concatenateArrayBuffersAsync","EXT_PATTERN","selectLoaderSync","validHTTPResponse","candidateLoaders","ignoreRegisteredLoaders","normalizeLoaders","testUrl","mimeType","findLoaderByMIMEType","loaderExtension","findLoaderByExtension","findLoaderByUrl","testDataAgainstText","testDataAgainstBinary","findLoaderByInitialBytes","fallbackMimeType","selectLoaderInternal","nothrow","getNoValidLoaderMessage","status","getMagicString","getFirstCharacters","includes","tests","test","arrayBuffer1","arrayBuffer2","compareArrayBuffers","testBinary","dataView","DataView","magic","fromCharCode","getUint8","contextLoaders","getLoadersFromContext","selectLoader","previousContext","resolvedContext","getLoaderContext","coreVersion","validateWorkerVersion","dataType","canParseWithWorker","parseText","parseSync","parseWithLoader","getGlobalLoaderRegistry","loaderRegistry","registerLoaders","normalizedLoader","registeredLoader","getRegisteredLoaders","isLoaderObject","normalizeLoader","_loader2","_loader3","fileAliases","fetchFile","filename","alias","replacement","resolvePath","fetchOptions","probeLog","NullLog","DEFAULT_LOADER_OPTIONS","CDN","_limitMB","batchSize","batchDebounceMs","metadata","transforms","REMOVED_LOADER_OPTIONS","throws","uri","headers","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","getGlobalLoaderState","getGlobalLoaderOptions","globalOptions","normalizeOptions","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","validateOptions","mergedOptions","baseUri","addUrlOptions","mergeNestedFields","normalizeOptionsInternal","getFetchFunction","defaultOptions","loaderName","prefix","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","parseMIMETypeFromURL","QUERY_STRING_PATTERN","getResourceUrlAndType","stripQueryString","getResourceContentLength","makeResponse","contentLength","initialDataUrl","blobSlice","FileReader","onload","_event$target","readAsDataURL","bytes","btoa","arrayBufferToBase64","getInitialDataUrl","checkResponse","ok","contentType","statusText","getResponseError","globals","global","global_","isBrowser","_parseImageNode","IMAGE_SUPPORTED","Image","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","getImageTypeOrNull","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlob","parseToImage","blobOrDataUrl","xmlText","getBlobOrSVGDataUrl","webkitURL","objectUrl","src","loadToImage","revokeObjectURL","EMPTY_OBJECT","imagebitmapOptionsSupported","BIG_ENDIAN","LITTLE_ENDIAN","getBinaryImageMetadata","binaryData","toDataView","getUint32","getPngMetadata","getUint16","tableMarkers","sofMarkers","getJpegMarkers","marker","getJpegMetadata","getGifMetadata","getBmpMetadata","ImageLoader","imageType","getDefaultImageType","isImageTypeSupported","getLoadableImageType","imagebitmapOptions","isEmptyObject","createImageBitmap","safeCreateImageBitmap","parseToImageBitmap","parseToNodeImage","getContext","drawImage","getImageData","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","drawMode","indices","_setAttributes","_calculateVertexCount","getVertexCount","_print","VertexArrayObject","constantAttributeZero","mockUserAgent","userAgent","navigator","isMSIE","isTrident","getBrowser","luma","defaultVertexArray","isDefaultArray","MAX_ATTRIBUTES","location","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","program","bufferValue","getMaxAttributes","setElementBuffer","elementBuffer","bindBuffer","setBuffer","integer","vertexAttribIPointer","vertexAttribPointer","enableVertexAttribArray","vertexAttribDivisor","disableVertexAttribArray","getConstantBuffer","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","getScratchArray","arrayValue","v1","v2","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","createVertexArray","deleteVertexArray","_bindHandle","bindVertexArray","_getParameter","pname","getVertexAttribOffset","getVertexAttrib","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","VertexArray","configuration","elementsAccessor","unused","drawParams","vertexArrayObject","bindOnUse","clearDrawParams","getDrawParams","_updateDrawParams","locationOrName","_setAttribute","appAccessor","_resolveLocationAndAccessor","setConstant","unbindBuffers","bindBuffers","bindForDraw","instanceCount","_setConstantAttributes","valueAccessor","INVALID_RESULT","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","getAttributeInfo","multiLocation","locationOffset","getAttributeLocation","_setConstantAttributeZero","_setConstantAttribute","isInstanced","indexCount","_updateDrawParamsForLocation","getElementCount","indexType","indexOffset","setElements","formatValue","maxElts","terminator","formatArrayValue","toFixed","toPrecision","getDebugTableRow","vertexArray","header","verts","getDebugData","getGLSLDeclaration","typeAndName","getDebugTableForUniforms","undefinedOnly","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","_uniformSetters","table","uniformNames","sort","uniformName","addUniformToTable","unusedCount","unusedTable","uniform","isDefined","isUniformDefined","attributeInfo","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","mapAttributeName","attributeMap","inferAttributeAccessor","category","DRAW_PARAMS","Model","lastLogTime","animated","_programManagerState","_managedProgram","bufferMode","transpileToGLSL100","programProps","_programDirty","_attributes","_checkProgram","setUniforms","getModuleUniforms","moduleSettings","geometryBuffers","_setModelProps","geometry","_deleteGeometryBuffers","getDrawMode","getInstanceCount","getProgram","setProgram","setDrawMode","setVertexCount","setGeometry","remappedName","getBuffersFromGeometry","normalizedAttributes","transformFeedback","logPriority","_logDrawCallStart","vertexArrayInstanced","didDraw","_logDrawCallEnd","unbindModels","_setFeedbackBuffers","_feedbackBuffers","stateHash","_setAnimationProps","setBuffers","logLevel","logDrawTimeout","collapsed","attributeTable","ELEMENT_ARRAY_BUFFER","attributeLocation","rowHeader","getDebugTableForVertexArray","uniformTable","missingTable","missingCount","configTable","config","attributeInfos","glslDeclaration","varyingInfo","varyingInfos","getDebugTableForProgramConfiguration","ShaderModule","deprecations","vertexShader","fragmentShader","_parseDeprecationDefinitions","injections","hook","injection","order","normalizeInjections","getModuleSource","moduleSource","toUpperCase","_defaultGetUniforms","getDefines","checkDeprecations","shaderSource","def","regex","deprecated","old","new","removed","RegExp","private","resolveModules","moduleMap","moduleDepth","getDependencyGraph","level","getShaderDependencies","instantiateModules","seen","WEBGL_FEATURES","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","FEATURES","compiledGlslExtensions","canCompileGLGSExtension","cap","feature","isOldIE","extensionName","behavior","shader","createShader","compileShader","canCompile","getShaderParameter","deleteShader","hasFeatures","features","every","WebGL2RenderingContext","_version","isWebGL2","getExtension","getFeature","testVariable","qualifier","ES300_REPLACEMENTS","ES300_VERTEX_REPLACEMENTS","ES300_FRAGMENT_REPLACEMENTS","ES100_REPLACEMENTS","ES100_VERTEX_REPLACEMENTS","ES100_FRAGMENT_REPLACEMENTS","ES100_FRAGMENT_OUTPUT_NAME","ES300_FRAGMENT_OUTPUT_REGEX","REGEX_START_OF_MAIN","convertShader","replacements","pattern","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","assembleShader","hookFunctions","prologue","isVertex","sourceLines","split","glslVersion","versionLine","coreSource","allDefines","assembledSource","getShaderName","getShaderType","debugInfo","vendor","UNMASKED_VENDOR_WEBGL","renderer","UNMASKED_RENDERER_WEBGL","gpuVendor","identifyGPUVendor","shadingLanguageVersion","getContextInfo","getPlatformShaderDefines","isFragment","versionDefines","getVersionDefines","sourceText","define","getApplicationDefines","hookFunctionMap","trim","signature","normalizeHookFunctions","hookInjections","declInjections","mainInjections","hash","injectionType","hookName","hookFunction","footer","getHookFunctions","targetGLSLVersion","outputMatch","outputName","convertFragmentShaderTo300","convertFragmentShaderTo100","transpileShader","assembleGetUniforms","moduleUniforms","ProgramManager","defaultProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","_useCounts","m","moduleName","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","assembleShaders","appModules","FS_GLES","FS300","getQualifierDetails","line","qualifiers","words","definition","getPassthroughFS","inputType","output","outputValue","variable","convertToVec4","BufferTransform","currentIndex","feedbackMap","bindings","setupResources","binding","_setupTransformFeedback","updateModelProps","getDrawOptions","swap","_getNextIndex","_setupBuffers","varyingName","bufferOrParams","_getFeedbackBuffers","sourceName","feedbackName","bufferName","bufferOrRef","sourceBuffer","_createNewBuffer","_updateBindings","_updateBinding","_swapBuffers","nextIndex","srcName","dstName","getShaderVersion","parseInt","SIZE_UNIFORM_PREFIX","VS_POS_VARIABLE","SRC_TEX_PARAMETER_OVERRIDES","TextureTransform","_swapTexture","targetTextureVarying","targetTextureType","samplerTextureMap","updatedModelProps","_processVertexShader","sourceTextures","targetTexture","hasSourceTextures","hasTargetTexture","transform_elementID","elementIDBuffer","sampler","textureName","_setSourceTextureParameters","sizeUniforms","sourceTextureMap","getSizeUniforms","_setupTextures","getTargetTexture","packed","pixels","channelCount","typeToChannelCount","packedPixels","packCount","ownTexture","_targetTextureVarying","_createTargetTexture","textureOrReference","refTexture","_targetRefTexName","_createNewTexture","_sourceTextures","_targetTexture","_updateElementIDBuffer","elementIds","_swapTextures","resizeAttachments","setParameters","pixelStore","sourceCount","updatedVs","finalInject","vsLines","updateVsLines","lines","textureMap","attributeData","getAttributeDefinition","updatedLine","samplerName","sizeName","uniformDeclerations","getSamplerDeclerations","typeToChannelSuffix","sampleInstruction","processAttributeDefinition","varying","qualaiferDetails","getVaryingType","updateForTextures","combinedInject","_fs","Transform","bufferTransform","textureTransform","updatedOpts","_updateDrawOptions","swapped","resourceTransforms","resourceTransform","_buildResourceTransforms","_updateModelProps","updatedProps","canCreateBufferTransform","canCreateTextureTransform","isWebGL","WebGLRenderingContext","getWebGL2Context","assertWebGLContext","assertWebGL2Context","glErrorShadow","WebGLVertexArrayObjectOES","ext","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","cached","recache","OESVertexArrayObject","f","getError","wrapGLError","original","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","vao","currentArrayBuffer","indx","instrumentExtension","reset_","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","isVertexArrayOES","opt_msg","msg","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","OES_element_index","WEBGL_draw_buffers","WEBGL_debug_renderer_info","getWebGL2ValueOrZero","WEBGL_PARAMETERS","GPU_DISJOINT_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","ANGLE_instanced_arrays","WEBGL2_CONTEXT_POLYFILLS","meta","suffix","isVertexArray","drawElementsInstanced","drawArraysInstanced","drawBuffers","getQuery","getQueryObject","WEBGL2_CONTEXT_OVERRIDES","readBuffer","originalFunc","attachment","getExtensionData","getProgramParameter","getInternalformatParameter","getTexParameter","TEXTURE_MAX_ANISOTROPY_EXT","originalGetParameter","hint","polyfillExtension","target2","defaults","extKey","polyfill","polyfillContext","polyfilled","original_getSupportedExtensions","getSupportedExtensions","list","original_getExtension","__OESVertexArrayObject","polyfillVertexArrayObject","EXTENSIONS","initializeExtensions","polyfills","getOwnPropertyNames","installPolyfills","installOverrides","GL_PARAMETER_DEFAULTS","disable","pixelStorei","GL_PARAMETER_SETTERS","cullFace","clearDepth","bindFramebuffer","frontFace","lineWidth","clearStencil","stencilMaskSeparate","blendEquationSeparate","blendFuncSeparate","cull","dither","derivativeHint","mipmapHint","sampleCoverage","stencilTest","stencilMask","mask","backMask","stencilFunc","backFunc","backRef","stencilFuncSeparate","stencilOp","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","glEnum","GL_COMPOSITE_PARAMETER_SETTERS","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","capability","r","modeRGB","modeAlpha","dst","srcRGB","dstRGB","srcAlpha","dstAlpha","s","zNear","zFar","face","factor","units","fail","zfail","zpass","isEnabled","GL_PARAMETER_GETTERS","isObjectEmpty","deepArrayEqual","isArrayX","isArrayY","installGetterOverride","functionName","originalGetterFunc","configurable","installSetterSpy","setter","originalSetterFunc","valueChanged","_updateCache","GLState","stateStack","getParameters","oldValues","trackContextState","originalUseProgram","useProgram","installProgramSpy","popContextState","compositeSetters","glConstant","compositeSetter","parameterKeys","resetParameters","withParameters","nocatch","pushContextState","cssToDeviceRatio","canvasSizeInfo","cssToDevicePixels","cssPixel","yInvert","ratio","scaleX","scaleY","xHigh","yHigh","scalePixels","CONTEXT_DEFAULTS","webgl1","throwOnError","manageState","createGLContext","targetCanvas","insertBefore","firstChild","getCanvas","errorMessage","onCreateError","statusMessage","removeEventListener","onContextRestored","createBrowserContext","instrumentGLContext","webGL","vendorMasked","rendererMasked","getContextDebugInfo","driver","logInfo","_instrumented","getVersion","resizeGLContext","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","setDevicePixelRatio","windowRatio","getDevicePixelRatio","VERTEX_SHADER","FRAGMENT_SHADER","MODULE_INJECTORS","DECLARATION_INJECT_MARKER","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","fragmentData","fragmentString","combineInjects","injects","DEFAULT_ACCESSOR_VALUES","PROP_CHECKS","Accessor","_assign","getBytesPerElement","BYTES_PER_VERTEX","getBytesPerVertex","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","removedProps","replacedProps","PROP_CHECKS_SET_PROPS","Buffer","stubRemovedMethods","debugData","_setData","_setByteLength","bytesUsed","srcOffset","bufferSubData","_inferType","copyData","readOffset","writeOffset","copyBufferSubData","dstData","dstOffset","clamped","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","dstAvailableElementCount","dstElementCount","copyElementCount","getBufferSubData","bindBufferRange","bindBufferBase","unbind","invalidateDebugData","_trackDeallocatedMemory","_getTarget","bufferData","_trackAllocatedMemory","sourceElementOffset","createBuffer","deleteBuffer","getBufferParameter","setByteLength","updateAccessor","ERR_ARGUMENTS","stencil","clearFlags","clearBuffer","drawBuffer","clearBufferiv","clearBufferuiv","clearBufferfv","clearBufferfi","glFormatToComponents","readPixelsToArray","sourceFormat","sourceAttachment","sourceType","deleteFramebuffer","pixelArray","getPixelArray","prevHandle","readPixels","readPixelsToBuffer","targetByteOffset","components","byteCount","glTypeToBytes","copyToDataUrl","targetMaxHeight","MAX_SAFE_INTEGER","imageData","createImageData","putImageData","copyToTexture","targetMipmaplevel","targetInternalFormat","targetX","targetY","isSubCopy","copyTexSubImage2D","copyTexSubImage3D","copyTexImage2D","ERR_MULTIPLE_RENDERTARGETS","Framebuffer","colorBufferHalfFloat","defaultFramebuffer","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","ownResources","check","_createDefaultAttachments","clearAttachments","checkStatus","_setReadBuffer","_setDrawBuffers","attachmentPoint","newAttachments","descriptor","_attachRenderbuffer","renderbuffer","_attachTexture","_unattach","getStatus","STATUS","_getFrameBufferStatus","checkFramebufferStatus","copyToImage","blit","invalidateFramebuffer","getAttachmentParameter","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","getAttachmentParameters","ATTACHMENT_PARAMETERS","attachmentName","show","open","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","bindTexture","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","caps","WEBGL2","EXT_sRGB","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","toTypedArray","uniformLength","getUniformSetter","parseUniformName","checkUniformValue","checkLength","checkUniformArray","copyUniform","uniform1i","uniformSetter","cacheLength","defaultName","formatErrors","errors","segments","column","substring","padLeft","digits","Shader","shaderType","getTypeName","shaderName","_compile","getName","getSource","getShaderSource","getTranslatedSource","getTranslatedShaderSource","infoLog","getShaderInfoLog","warnings","errLog","errorStrings","shaderDescription","getShaderTypeName","errorString","isNaN","delim","maxDigits","lineNumber","addLineNumbers","parseGLSLCompilerError","_getOptsFromHandle","VertexShader","FragmentShader","ProgramConfiguration","attributeInfosByName","attributeInfosByLocation","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","getAttributeAccessor","getVaryingInfo","getVaryingIndex","getVaryingAccessor","getActiveAttrib","getAttribLocation","_addAttribute","getTransformFeedbackVarying","_addVarying","compositeType","_inferProperties","GL_SEPARATE_ATTRIBS","V6_DEPRECATED_METHODS","Program","_isCached","_setId","_textureUniforms","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","samplers","fb","_areTexturesRenderable","primitiveMode","_bindTextures","drawRangeElements","drawElements","drawArrays","uniformMap","checkUniformValues","textureUpdate","textureIndex","_textureIndexCounter","texturesRenderable","loaded","createProgram","deleteProgram","_getOptionsFromHandle","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","attachShader","linkProgram","getProgramInfoLog","validateProgram","_uniformCount","getActiveUniform","getUniformLocation","getActiveUniforms","uniformIndices","getUniformBlockIndex","blockName","getActiveUniformBlockParameter","blockIndex","uniformBlockBinding","blockBinding","EXT_FLOAT_WEBGL2","bpp","Renderbuffer","formats","gl1","isFormatSupported","samples","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","_syncHandle","getRenderbufferParameter","ERR_RESOURCE_METHOD_UNDEFINED","_bound","_addStats","deleteChildren","_removeStats","funcOrHandle","parameter","PARAMETERS","isWebgl2","webgl1Default","webgl2Default","setParameter","_setParameter","methodNames","decrementCount","addCount","subtractCount","Texture2D","crossOrigin","TEXTURE_FORMATS","types","DATA_FORMAT_CHANNELS","TYPE_SIZES","isLinearFilteringSupported","NPOT_MIN_FILTERS","WebGLBuffer","Texture","linearFiltering","textureUnit","resolvedImageData","isVideo","HTMLVideoElement","HAVE_METADATA","_video","recreate","_deduceParameters","activeTexture","_isNPOT","_updateForNPOT","setImageData","generateMipmap","video","lastTime","HAVE_CURRENT_DATA","currentTime","setSubImageData","_getDataType","texImage2D","levelIndex","levelData","compressedTexImage2D","channelSize","ndarray","shape","compressedTexSubImage2D","texSubImage2D","copyFramebuffer","getActiveUnit","textureFormat","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","videoWidth","videoHeight","deleteTexture","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TransformFeedback","_unbindBuffers","_getVaryingIndex","byteSize","_getBufferParams","_bindBuffer","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","_getVaryingInfo","bufferIndex","createTransformFeedback","deleteTransformFeedback","hasFeature","isFeatureSupported","getFeatures","featureDefinition","queryFeature","VERTEX_ARRAY_OBJECT","TIMER_QUERY","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","ELEMENT_INDEX_UINT32","BLEND_EQUATION_MINMAX","FLOAT_BLEND","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","testTexture","testFb","lumaStats","nodeIO","checkProps","propChecks","replacementProp","instance","upgradeMessage","methodName","uidCounters","uid","isPowerOfTwo","obj","isEmpty","GL_FLOAT","GL_INT","GL_UNSIGNED_INT","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","getCompositeGLType","compType","compComponents","getKeyValue","getKey","FACES","TextureCube","setCubeMapImageData","subImage","mipmapLevel","_subImage","imageDataMap","resolvedFaces","facePixels","lodLevel","setImageDataForFace","Texture3D","unpackFlipY","texImage3D","cloneTextureFrom","TextureType","toFramebuffer","getGLTypeFromTypedArray","arrayOrType","getTypedArrayFromGLType","flipRows","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","newData","MathArray","cls","ExtendableBuiltin","Reflect","construct","setPrototypeOf","__proto__","_extendableBuiltin","ELEMENTS","arrayOrObject","fromObject","fromArray","to","toObject","toTarget","toFloat32Array","formatString","printTypes","exactEquals","lerp","ai","vector","clamp","minVector","maxVector","vectors","subtract","multiply","sub","setScalar","addScalar","subScalar","multiplyScalar","scalar","divideScalar","clampScalar","multiplyByScalar","Matrix","RANK","getElementIndex","getElement","setElement","getColumn","columnIndex","firstIndex","setColumn","columnVector","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","Matrix4","identity","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","setRowMajor","toRowMajor","fromQuaternion","q","mat4","frustum","_computeInfinitePerspectiveOffCenter","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","up","halfY","tan","determinant","getScale","getTranslation","getRotation","scaleResult","inverseScale0","inverseScale1","inverseScale2","getRotationMatrix3","transpose","rotateX","radians","rotateY","rotateZ","rotateXYZ","rx","ry","rz","rotateAxis","axis","vec","transformAsPoint","vec2","transformAsVector","makeRotationX","makeTranslation","transformPoint","transformDirection","Vector","lengthSquared","magnitude","magnitudeSquared","mathArray","distanceSquared","dist","dot","product","divide","lengthSq","distanceTo","distanceToSquared","getComponent","setComponent","addVectors","subVectors","multiplyVectors","addScaledVector","ORIGIN","Vector3","angle","cross","origin","matrix4","transformByMatrix3","matrix3","transformByMatrix2","matrix2","transformByQuaternion","quaternion","precision","epsilon","oldEpsilon","printDegrees","printRowMajor","vec2_transformMat4AsVector","w","vec3_transformMat4AsVector","vec3_transformMat2","checkNumber","checkVector","callerName","validateVector","getHiResTimestamp","timestamp","performance","hrtime","timeParts","Stat","sampleSize","setSampleSize","_count","_samples","_checkSampling","_time","_startTime","_timerPending","getSampleAverageCount","lastSampleCount","getSampleAverageTime","lastSampleTime","getSampleHz","getAverageCount","Stats","_initializeStats","_getOrCreate","fn","getTable","stat","average","hz","_interopRequireDefault","exports","_globals","_isBrowser","default","_isElectron","navigator_","chrome","safari","mozInnerScreenX","_typeof2","self_","window_","document_","process_","console_","_typeof","_getBrowser","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","__esModule","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","isBrowserMainThread","versions","electron","realUserAgent","isElectron","__VERSION__","LocalStorage","defaultSettings","storage","setItem","removeItem","getStorage","_loadConfiguration","getConfiguration","setConfiguration","updateConfiguration","serialized","serializedConfiguration","getItem","formatImage","maxWidth","imageUrl","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","originalConsole","ONCE","once","getTableHeader","title","Log","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","timeStamp","predefined","proto","propNames","autobind","newLevel","setLevel","getLevel","getTotal","getDelta","priority","newPriority","getPriority","_getLogFunction","oldUsage","newUsage","probe","columns","tag","_shouldLog","img","nodeName","logImageInBrowser","asciify","fit","logImageInNode","setting","group","normalizeArguments","groupCollapsed","groupEnd","withGroup","trace","normalizeLogLevel","padLength","leftPad","ms","formatted","formatTime","decorateMessage","resolvedLevel","messageType","xs","Object_keys","defineProp","Context","Script","runInContext","TypeError","iframe","win","contentWindow","wEval","eval","wExecScript","execScript","winKeys","runInThisContext","runInNewContext","ctx","createContext","isContext","createScript","root","Function","ArrayProto","ObjProto","SymbolProto","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeKeys","nativeCreate","nativeIsView","_isNaN","_isFinite","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","rest","isNull","isUndefined","isElement","nodeType","tagTester","nodelist","childNodes","hasStringTagBug","isIE11","isDataView","getInt8","isArguments","isSymbol","isNumber","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","typedArrayPattern","collectNonEnumProps","emulatedSet","nonEnumIdx","isString","isMatch","attrs","_keys","_wrapped","toBufferView","bufferSource","valueOf","toJSON","tagDataView","eq","aStack","bStack","deepEq","areArrays","aCtor","bCtor","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","commonInit","mapTail","mapMethods","setMethods","pairs","functions","names","createAssigner","keysFunc","baseCreate","Ctor","extendOwn","extend","tap","interceptor","toPath","path","deepGet","matcher","property","optimizeCb","argCount","accumulator","baseIteratee","iteratee","cb","mapObject","results","currentKey","propertyOf","times","accum","random","createEscaper","escaper","testRegexp","replaceRegexp","templateSettings","evaluate","interpolate","escape","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","template","oldSettings","argument","fallback","idCounter","uniqueId","chain","_chain","executeBound","sourceFunc","boundFunc","callingContext","partial","boundArgs","placeholder","bound","callArgs","strict","idx","hasher","address","wait","throttle","previous","later","leading","throttled","_now","remaining","trailing","debounce","immediate","passed","debounced","_args","wrap","wrapper","predicate","compose","after","before","memo","findKey","createPredicateIndexFinder","dir","sortedIndex","mid","createIndexFinder","predicateFind","findLastIndex","findWhere","each","createReduce","reducer","initial","fromIndex","guard","contextPath","pluck","where","computed","lastComputed","reStrSymbol","sample","last","rand","shuffle","sortBy","criteria","partition","keyInObj","pick","first","compact","otherArrays","difference","uniq","isSorted","arrays","intersection","argsLength","unzip","step","chainResult","mixin"],"sourceRoot":""}