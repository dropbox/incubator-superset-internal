{"version":3,"file":"5198.3d7d71733b5d48356d2a.entry.js","mappings":"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","sources":["webpack://superset/./packages/superset-ui-core/src/models/TypedRegistry.ts","webpack://superset/./packages/superset-ui-core/src/ui-overrides/ExtensionsRegistry.ts","webpack://superset/./src/components/GenericLink/GenericLink.tsx","webpack://superset/./src/components/ImportModal/styles.ts","webpack://superset/./src/components/ImportModal/ErrorAlert.tsx","webpack://superset/./src/components/IndeterminateCheckbox/index.tsx","webpack://superset/./src/components/UiConfigContext/index.tsx","webpack://superset/./node_modules/react-lines-ellipsis/lib/index.modern.js","webpack://superset/./src/components/IconButton/index.tsx","webpack://superset/./src/features/databases/types.ts","webpack://superset/./src/features/databases/DatabaseModal/styles.ts","webpack://superset/./src/features/databases/DatabaseModal/ExtraOptions.tsx","webpack://superset/./src/features/databases/DatabaseModal/SqlAlchemyForm.tsx","webpack://superset/./src/features/databases/DatabaseModal/DatabaseConnectionForm/CommonParameters.tsx","webpack://superset/./src/features/databases/DatabaseModal/DatabaseConnectionForm/ValidatedInputField.tsx","webpack://superset/./src/features/databases/DatabaseModal/DatabaseConnectionForm/EncryptedField.tsx","webpack://superset/./src/features/databases/DatabaseModal/DatabaseConnectionForm/index.tsx","webpack://superset/./src/features/databases/DatabaseModal/DatabaseConnectionForm/TableCatalog.tsx","webpack://superset/./src/features/databases/DatabaseModal/ModalHeader.tsx","webpack://superset/./src/features/databases/DatabaseModal/SSHTunnelForm.tsx","webpack://superset/./src/features/databases/DatabaseModal/SSHTunnelSwitch.tsx","webpack://superset/./src/features/databases/DatabaseModal/index.tsx","webpack://superset/./src/features/databases/state.ts","webpack://superset/./src/features/home/LanguagePicker.tsx","webpack://superset/./src/features/home/RightMenu.tsx","webpack://superset/./src/features/home/Menu.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * A Registry which serves as a typed key:value store for Superset and for Plugins.\n *\n * Differences from the older Registry class:\n *\n * 1. The keys and values stored in this class are individually typed by TYPEMAP parameter.\n *    In the old Registry, all values are of the same type and keys are not enumerated.\n *    Though you can also use indexed or mapped types in a TYPEMAP.\n *\n * 2. This class does not have a separate async get and set methods or use loaders.\n *    Instead, TYPEMAP should specify async values and loaders explicitly when needed.\n *    The value can be anything! A string, a class, a function, an async function... anything!\n *\n * 3. This class does not implement Policies, that is a separate concern to be handled elsewhere.\n *\n *\n * Removing or altering types in a type map could be a potential breaking change, be careful!\n *\n * Listener methods have not been added because there isn't a use case yet.\n */\nclass TypedRegistry<TYPEMAP extends {}> {\n  name = 'TypedRegistry';\n\n  private records: TYPEMAP;\n\n  constructor(initialRecords: TYPEMAP) {\n    this.records = initialRecords;\n  }\n\n  get<K extends keyof TYPEMAP>(key: K): TYPEMAP[K] {\n    // The type construction above means that when you call this function,\n    // you get a really specific type back.\n    return this.records[key];\n  }\n\n  set<K extends keyof TYPEMAP>(key: K, value: TYPEMAP[K]) {\n    this.records[key] = value;\n  }\n}\n\nexport default TypedRegistry;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { TypedRegistry } from '../models';\nimport { makeSingleton } from '../utils';\n\n/**\n * A function which returns text (or marked-up text)\n * If what you want is a react component, don't use this. Use React.ComponentType instead.\n */\ntype ReturningDisplayable<P = void> = (props: P) => string | React.ReactElement;\n\n/**\n * This type defines all available extensions of Superset's default UI.\n * Namespace the keys here to follow the form of 'some_domain.functionality.item'.\n * Take care to name your keys well, as the name describes what this extension point's role is in Superset.\n *\n * When defining a new option here, take care to keep any parameters to functions (or components) minimal.\n * Any removal or alteration to a parameter will be considered a breaking change.\n */\n\n// from src/views/components/Menu, not imported since this is a separate package\ninterface MenuObjectChildProps {\n  label: string;\n  name?: string;\n  icon?: string;\n  index?: number;\n  url?: string;\n  isFrontendRoute?: boolean;\n  perm?: string | boolean;\n  view?: string;\n  disable?: boolean;\n}\n\nexport interface SwitchProps {\n  isEditMode: boolean;\n  dbFetched: any;\n  disableSSHTunnelingForEngine?: boolean;\n  useSSHTunneling: boolean;\n  setUseSSHTunneling: React.Dispatch<React.SetStateAction<boolean>>;\n  setDB: React.Dispatch<any>;\n  isSSHTunneling: boolean;\n}\n\ntype ConfigDetailsProps = {\n  embeddedId: string;\n};\ntype RightMenuItemIconProps = {\n  menuChild: MenuObjectChildProps;\n};\ntype DatabaseDeleteRelatedExtensionProps = {\n  database: object;\n};\ntype DatasetDeleteRelatedExtensionProps = {\n  dataset: object;\n};\n\n/**\n * Interface for extensions to database connections\n */\nexport interface DatabaseConnectionExtension {\n  /**\n   * Display title text for the extension show when creating a database connection\n   */\n  title: string;\n  /**\n   * url or dataURI (recommended) of a logo to use in place of a title.  title is fallback display if no logo is provided\n   */\n  logo?: React.ComponentType<any>;\n  /**\n   * Descriptive text displayed under the logo or title to provide user with more context about the configuration section\n   */\n  description: React.ComponentType<any>;\n  /**\n   * React component to render for display in the database connection configuration\n   */\n  component: React.ComponentType<any>;\n  /**\n   * Is the database extension enabled?\n   */\n  enabled: () => boolean;\n\n  /**\n   * Callbacks\n   */\n  // TODO: we need to move the db types to superset-ui/core in order to import them correctly\n  onSave: (componentState: any, db: any) => any;\n  onEdit?: (componentState: any) => void;\n  onDelete?: (db: any) => void;\n}\n\nexport type Extensions = Partial<{\n  'alertsreports.header.icon': React.ComponentType;\n  'embedded.documentation.configuration_details': React.ComponentType<ConfigDetailsProps>;\n  'embedded.documentation.description': ReturningDisplayable;\n  'embedded.documentation.url': string;\n  'dashboard.nav.right': React.ComponentType;\n  'navbar.right-menu.item.icon': React.ComponentType<RightMenuItemIconProps>;\n  'navbar.right': React.ComponentType;\n  'report-modal.dropdown.item.icon': React.ComponentType;\n  'root.context.provider': React.ComponentType;\n  'welcome.message': React.ComponentType;\n  'welcome.banner': React.ComponentType;\n  'welcome.main.replacement': React.ComponentType;\n  'ssh_tunnel.form.switch': React.ComponentType<SwitchProps>;\n  'databaseconnection.extraOption': DatabaseConnectionExtension;\n  /* Custom components to show in the database and dataset delete modals */\n  'database.delete.related': React.ComponentType<DatabaseDeleteRelatedExtensionProps>;\n  'dataset.delete.related': React.ComponentType<DatasetDeleteRelatedExtensionProps>;\n}>;\n\n/**\n * A registry containing extensions which can alter Superset's UI at specific points defined by Superset.\n * See SIP-87: https://github.com/apache/superset/issues/20615\n */\nclass ExtensionsRegistry extends TypedRegistry<Extensions> {\n  name = 'ExtensionsRegistry';\n}\n\nexport const getExtensionsRegistry = makeSingleton(ExtensionsRegistry, {});\n\n// Exporting this under the old name for backwards compatibility.\n// After downstream folks have migrated to `getExtensionsRegistry`, we should remove this.\nexport const getUiOverrideRegistry = getExtensionsRegistry;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { Link, LinkProps } from 'react-router-dom';\nimport { isUrlExternal, parseUrl } from 'src/utils/urlUtils';\n\nexport const GenericLink = <S,>({\n  to,\n  component,\n  replace,\n  innerRef,\n  children,\n  ...rest\n}: React.PropsWithoutRef<LinkProps<S>> &\n  React.RefAttributes<HTMLAnchorElement>) => {\n  if (typeof to === 'string' && isUrlExternal(to)) {\n    return (\n      <a data-test=\"external-link\" href={parseUrl(to)} {...rest}>\n        {children}\n      </a>\n    );\n  }\n  return (\n    <Link\n      data-test=\"internal-link\"\n      to={to}\n      component={component}\n      replace={replace}\n      innerRef={innerRef}\n      {...rest}\n    >\n      {children}\n    </Link>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { css, SupersetTheme } from '@superset-ui/core';\n\nexport const antdWarningAlertStyles = (theme: SupersetTheme) => css`\n  border: 1px solid ${theme.colors.warning.light1};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 4}px 0;\n  color: ${theme.colors.warning.dark2};\n\n  .ant-alert-message {\n    margin: 0;\n  }\n\n  .ant-alert-description {\n    font-size: ${theme.typography.sizes.s + 1}px;\n    line-height: ${theme.gridUnit * 4}px;\n\n    .ant-alert-icon {\n      margin-right: ${theme.gridUnit * 2.5}px;\n      font-size: ${theme.typography.sizes.l + 1}px;\n      position: relative;\n      top: ${theme.gridUnit / 4}px;\n    }\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { FunctionComponent } from 'react';\nimport { t, SupersetTheme } from '@superset-ui/core';\n\nimport { getDatabaseDocumentationLinks } from 'src/views/CRUD/hooks';\nimport Alert from 'src/components/Alert';\nimport { antdWarningAlertStyles } from './styles';\n\nconst supersetTextDocs = getDatabaseDocumentationLinks();\nexport const DOCUMENTATION_LINK = supersetTextDocs\n  ? supersetTextDocs.support\n  : 'https://superset.apache.org/docs/databases/installing-database-drivers';\n\nexport interface IProps {\n  errorMessage: string;\n  showDbInstallInstructions: boolean;\n}\n\nconst ErrorAlert: FunctionComponent<IProps> = ({\n  errorMessage,\n  showDbInstallInstructions,\n}) => (\n  <Alert\n    closable={false}\n    css={(theme: SupersetTheme) => antdWarningAlertStyles(theme)}\n    type=\"error\"\n    showIcon\n    message={errorMessage}\n    description={\n      showDbInstallInstructions ? (\n        <>\n          <br />\n          {t(\n            'Database driver for importing maybe not installed. Visit the Superset documentation page for installation instructions: ',\n          )}\n          <a\n            href={DOCUMENTATION_LINK}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"additional-fields-alert-description\"\n          >\n            {t('here')}\n          </a>\n          .\n        </>\n      ) : (\n        ''\n      )\n    }\n  />\n);\n\nexport default ErrorAlert;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { forwardRef, useRef, useEffect } from 'react';\nimport { styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nexport interface IndeterminateCheckboxProps {\n  indeterminate: boolean;\n  id: string;\n  checked: boolean;\n  onChange: React.EventHandler<React.SyntheticEvent<HTMLInputElement>>;\n  title?: string;\n  labelText?: string;\n}\n\nconst CheckboxLabel = styled.label`\n  cursor: pointer;\n  display: inline-block;\n  margin-bottom: 0;\n`;\n\nconst CheckboxHalf = styled(Icons.CheckboxHalf)`\n  color: ${({ theme }) => theme.colors.primary.base};\n  cursor: pointer;\n`;\n\nconst CheckboxOff = styled(Icons.CheckboxOff)`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  cursor: pointer;\n`;\n\nconst CheckboxOn = styled(Icons.CheckboxOn)`\n  color: ${({ theme }) => theme.colors.primary.base};\n  cursor: pointer;\n`;\n\nconst HiddenInput = styled.input`\n  &[type='checkbox'] {\n    cursor: pointer;\n    opacity: 0;\n    position: absolute;\n    left: 3px;\n    margin: 0;\n    top: 4px;\n  }\n`;\n\nconst InputContainer = styled.div`\n  cursor: pointer;\n  display: inline-block;\n  position: relative;\n`;\n\nconst IndeterminateCheckbox = forwardRef(\n  (\n    {\n      indeterminate,\n      id,\n      checked,\n      onChange,\n      title = '',\n      labelText = '',\n    }: IndeterminateCheckboxProps,\n    ref: React.MutableRefObject<any>,\n  ) => {\n    const defaultRef = useRef<HTMLInputElement>();\n    const resolvedRef = ref || defaultRef;\n\n    useEffect(() => {\n      resolvedRef.current.indeterminate = indeterminate;\n    }, [resolvedRef, indeterminate]);\n\n    return (\n      <>\n        <InputContainer>\n          {indeterminate && <CheckboxHalf />}\n          {!indeterminate && checked && <CheckboxOn />}\n          {!indeterminate && !checked && <CheckboxOff />}\n          <HiddenInput\n            name={id}\n            id={id}\n            type=\"checkbox\"\n            ref={resolvedRef}\n            checked={checked}\n            onChange={onChange}\n          />\n        </InputContainer>\n        <CheckboxLabel title={title} htmlFor={id}>\n          {labelText}\n        </CheckboxLabel>\n      </>\n    );\n  },\n);\n\nexport default IndeterminateCheckbox;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { createContext, useContext, useState } from 'react';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\n\ninterface UiConfigType {\n  hideTitle: boolean;\n  hideTab: boolean;\n  hideNav: boolean;\n  hideChartControls: boolean;\n}\ninterface EmbeddedUiConfigProviderProps {\n  children: JSX.Element;\n}\n\nexport const UiConfigContext = createContext<UiConfigType>({\n  hideTitle: false,\n  hideTab: false,\n  hideNav: false,\n  hideChartControls: false,\n});\n\nexport const useUiConfig = () => useContext(UiConfigContext);\n\nexport const EmbeddedUiConfigProvider: React.FC<EmbeddedUiConfigProviderProps> =\n  ({ children }) => {\n    const config = getUrlParam(URL_PARAMS.uiConfig) || 0;\n    const [embeddedConfig] = useState({\n      hideTitle: (config & 1) !== 0,\n      hideTab: (config & 2) !== 0,\n      hideNav: (config & 4) !== 0,\n      hideChartControls: (config & 8) !== 0,\n    });\n\n    return (\n      <UiConfigContext.Provider value={embeddedConfig}>\n        {children}\n      </UiConfigContext.Provider>\n    );\n  };\n","import React from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst canvasStyle = {\n  position: 'absolute',\n  bottom: 0,\n  left: 0,\n  height: 0,\n  overflow: 'hidden',\n  'padding-top': 0,\n  'padding-bottom': 0,\n  border: 'none'\n};\nconst mirrorProps = ['box-sizing', 'width', 'font-size', 'font-weight', 'font-family', 'font-style', 'letter-spacing', 'text-indent', 'white-space', 'word-break', 'overflow-wrap', 'padding-left', 'padding-right'];\n\nfunction omit(obj, omittedKeys) {\n  if (!obj || typeof obj !== 'object') {\n    return obj;\n  }\n\n  const ret = {};\n  Object.keys(obj).forEach(key => {\n    if (omittedKeys.indexOf(key) > -1) {\n      return;\n    }\n\n    ret[key] = obj[key];\n  });\n  return ret;\n}\n\nfunction prevSibling(node, count) {\n  while (node && count--) {\n    node = node.previousElementSibling;\n  }\n\n  return node;\n}\n\nconst defaultProps = {\n  basedOn: undefined,\n  className: '',\n  component: 'div',\n  ellipsis: '',\n  // &hellip;\n  maxLine: 1,\n\n  onReflow() {},\n\n  text: '',\n  trimRight: true,\n  winWidth: undefined // for the HOC\n\n};\nconst usedProps = Object.keys(defaultProps);\n/**\n * props.text {String} the text you want to clamp\n * props.maxLine {Number|String} max lines allowed\n * props.ellipsis {String} the ellipsis indicator\n * props.trimRight {Boolean} should we trimRight the clamped text?\n * props.basedOn {String} letters|words\n * props.className {String}\n */\n\nclass LinesEllipsis extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: props.text,\n      clamped: false\n    };\n    this.units = [];\n    this.maxLine = 0;\n    this.canvas = null;\n  }\n\n  componentDidMount() {\n    this.initCanvas();\n    this.reflow(this.props);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.winWidth !== this.props.winWidth) {\n      this.copyStyleToCanvas();\n    }\n\n    if (this.props !== prevProps) {\n      this.reflow(this.props);\n    }\n  }\n\n  componentWillUnmount() {\n    this.canvas.parentNode.removeChild(this.canvas);\n  }\n\n  setState(state, callback) {\n    if (typeof state.clamped !== 'undefined') {\n      this.clamped = state.clamped;\n    }\n\n    return super.setState(state, callback);\n  }\n\n  initCanvas() {\n    if (this.canvas) return;\n    const canvas = this.canvas = document.createElement('div');\n    canvas.className = `LinesEllipsis-canvas ${this.props.className}`;\n    canvas.setAttribute('aria-hidden', 'true');\n    this.copyStyleToCanvas();\n    Object.keys(canvasStyle).forEach(key => {\n      canvas.style[key] = canvasStyle[key];\n    });\n    document.body.appendChild(canvas);\n  }\n\n  copyStyleToCanvas() {\n    const targetStyle = window.getComputedStyle(this.target);\n    mirrorProps.forEach(key => {\n      this.canvas.style[key] = targetStyle[key];\n    });\n  }\n\n  reflow(props) {\n    /* eslint-disable no-control-regex */\n    const basedOn = props.basedOn || (/^[\\x00-\\x7F]+$/.test(props.text) ? 'words' : 'letters');\n\n    switch (basedOn) {\n      case 'words':\n        this.units = props.text.split(/\\b|(?=\\W)/);\n        break;\n\n      case 'letters':\n        this.units = Array.from(props.text);\n        break;\n\n      default:\n        throw new Error(`Unsupported options basedOn: ${basedOn}`);\n    }\n\n    this.maxLine = +props.maxLine || 1;\n    this.canvas.innerHTML = this.units.map(c => {\n      return `<span class='LinesEllipsis-unit'>${c}</span>`;\n    }).join('');\n    const ellipsisIndex = this.putEllipsis(this.calcIndexes());\n    const clamped = ellipsisIndex > -1;\n    const newState = {\n      clamped,\n      text: clamped ? this.units.slice(0, ellipsisIndex).join('') : props.text\n    };\n    this.setState(newState, props.onReflow.bind(this, newState));\n  }\n\n  calcIndexes() {\n    const indexes = [0];\n    let elt = this.canvas.firstElementChild;\n    if (!elt) return indexes;\n    let index = 0;\n    let line = 1;\n    let offsetTop = elt.offsetTop;\n\n    while (elt = elt.nextElementSibling) {\n      if (elt.offsetTop > offsetTop) {\n        line++;\n        indexes.push(index);\n        offsetTop = elt.offsetTop;\n      }\n\n      index++;\n\n      if (line > this.maxLine) {\n        break;\n      }\n    }\n\n    return indexes;\n  }\n\n  putEllipsis(indexes) {\n    if (indexes.length <= this.maxLine) return -1;\n    const lastIndex = indexes[this.maxLine];\n    const units = this.units.slice(0, lastIndex);\n    const maxOffsetTop = this.canvas.children[lastIndex].offsetTop;\n    this.canvas.innerHTML = units.map((c, i) => {\n      return `<span class='LinesEllipsis-unit'>${c}</span>`;\n    }).join('') + `<wbr><span class='LinesEllipsis-ellipsis'>${this.props.ellipsis}</span>`;\n    const ndEllipsis = this.canvas.lastElementChild;\n    let ndPrevUnit = prevSibling(ndEllipsis, 2);\n\n    while (ndPrevUnit && (ndEllipsis.offsetTop > maxOffsetTop || // IE & Edge: doesn't support <wbr>\n    ndEllipsis.offsetHeight > ndPrevUnit.offsetHeight || ndEllipsis.offsetTop > ndPrevUnit.offsetTop)) {\n      this.canvas.removeChild(ndPrevUnit);\n      ndPrevUnit = prevSibling(ndEllipsis, 2);\n      units.pop();\n    }\n\n    return units.length;\n  } // expose\n\n\n  isClamped() {\n    return this.clamped; // do not use state.clamped. #27\n  }\n\n  render() {\n    const {\n      text,\n      clamped\n    } = this.state;\n\n    const _this$props = this.props,\n          {\n      component: Component,\n      ellipsis,\n      trimRight,\n      className\n    } = _this$props,\n          rest = _objectWithoutPropertiesLoose(_this$props, [\"component\", \"ellipsis\", \"trimRight\", \"className\"]);\n\n    return /*#__PURE__*/React.createElement(Component, _extends({\n      className: `LinesEllipsis ${clamped ? 'LinesEllipsis--clamped' : ''} ${className}`,\n      ref: node => this.target = node\n    }, omit(rest, usedProps)), clamped && trimRight ? text.replace(/[\\s\\uFEFF\\xA0]+$/, '') : text, /*#__PURE__*/React.createElement(\"wbr\", null), clamped && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"LinesEllipsis-ellipsis\"\n    }, ellipsis));\n  }\n\n}\n\nLinesEllipsis.defaultProps = defaultProps;\n\nexport default LinesEllipsis;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport { ButtonProps as AntdButtonProps } from 'antd/lib/button';\nimport Icons from 'src/components/Icons';\nimport LinesEllipsis from 'react-lines-ellipsis';\n\nexport interface IconButtonProps extends AntdButtonProps {\n  buttonText: string;\n  icon: string;\n  altText?: string;\n}\n\nconst StyledButton = styled(Button)`\n  height: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n`;\n\nconst StyledImage = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px;\n  height: ${({ theme }) => theme.gridUnit * 18}px;\n  margin: ${({ theme }) => theme.gridUnit * 3}px 0;\n\n  .default-db-icon {\n    font-size: 36px;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    margin-right: 0;\n    span:first-of-type {\n      margin-right: 0;\n    }\n  }\n\n  &:first-of-type {\n    margin-right: 0;\n  }\n\n  img {\n    width: ${({ theme }) => theme.gridUnit * 10}px;\n    height: ${({ theme }) => theme.gridUnit * 10}px;\n    margin: 0;\n    &:first-of-type {\n      margin-right: 0;\n    }\n  }\n  svg {\n    &:first-of-type {\n      margin-right: 0;\n    }\n  }\n`;\n\nconst StyledInner = styled.div`\n  max-height: calc(1.5em * 2);\n  white-space: break-spaces;\n\n  &:first-of-type {\n    margin-right: 0;\n  }\n\n  .LinesEllipsis {\n    &:first-of-type {\n      margin-right: 0;\n    }\n  }\n`;\n\nconst StyledBottom = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px 0;\n  border-radius: 0 0 ${({ theme }) => theme.borderRadius}px\n    ${({ theme }) => theme.borderRadius}px;\n  background-color: ${({ theme }) => theme.colors.grayscale.light4};\n  width: 100%;\n  line-height: 1.5em;\n  overflow: hidden;\n  white-space: no-wrap;\n  text-overflow: ellipsis;\n\n  &:first-of-type {\n    margin-right: 0;\n  }\n`;\n\nconst IconButton = styled(\n  ({ icon, altText, buttonText, ...props }: IconButtonProps) => (\n    <StyledButton {...props}>\n      <StyledImage>\n        {icon && <img src={icon} alt={altText} />}\n        {!icon && (\n          <Icons.DatabaseOutlined\n            className=\"default-db-icon\"\n            aria-label=\"default-icon\"\n          />\n        )}\n      </StyledImage>\n\n      <StyledBottom>\n        <StyledInner>\n          <LinesEllipsis\n            text={buttonText}\n            maxLine=\"2\"\n            basedOn=\"words\"\n            trimRight\n          />\n        </StyledInner>\n      </StyledBottom>\n    </StyledButton>\n  ),\n)`\n  text-transform: none;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n  font-weight: ${({ theme }) => theme.typography.weights.normal};\n  color: ${({ theme }) => theme.colors.grayscale.dark2};\n  border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  margin: 0;\n  width: 100%;\n\n  &:hover,\n  &:focus {\n    background-color: ${({ theme }) => theme.colors.grayscale.light5};\n    color: ${({ theme }) => theme.colors.grayscale.dark2};\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    box-shadow: 4px 4px 20px ${({ theme }) => theme.colors.grayscale.light2};\n  }\n`;\n\nexport default IconButton;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\ntype DatabaseUser = {\n  first_name: string;\n  last_name: string;\n};\n\nexport type CatalogObject = {\n  name: string;\n  value: string;\n};\n\nexport type SSHTunnelObject = {\n  id?: number;\n  server_address?: string;\n  server_port?: number;\n  username?: string;\n  password?: string;\n  private_key?: string;\n  private_key_password?: string;\n};\n\nexport type DatabaseObject = {\n  // Connection + general\n  backend?: string;\n  changed_on?: string;\n  changed_on_delta_humanized?: string;\n  configuration_method: CONFIGURATION_METHOD;\n  created_by?: null | DatabaseUser;\n  database_name: string;\n  driver: string;\n  engine?: string;\n  extra?: string;\n  id?: number;\n  uuid?: null | string;\n  name: string; // synonym to database_name\n  paramProperties?: Record<string, any>;\n  sqlalchemy_uri?: string;\n  parameters?: {\n    access_token?: string;\n    database_name?: string;\n    host?: string;\n    port?: number;\n    database?: string;\n    username?: string;\n    password?: string;\n    encryption?: boolean;\n    credentials_info?: string;\n    service_account_info?: string;\n    query?: Record<string, string>;\n    catalog?: Record<string, string | undefined>;\n    properties?: Record<string, any>;\n    warehouse?: string;\n    role?: string;\n    account?: string;\n  };\n\n  // Performance\n  cache_timeout?: string;\n  allow_run_async?: boolean;\n\n  // SQL Lab\n  allow_ctas?: boolean;\n  allow_cvas?: boolean;\n  allow_dml?: boolean;\n  expose_in_sqllab?: boolean;\n  force_ctas_schema?: string;\n\n  // Security\n  allow_file_upload?: boolean;\n  impersonate_user?: boolean;\n  masked_encrypted_extra?: string;\n  parameters_schema?: Record<string, any>;\n  server_cert?: string;\n\n  // External management\n  is_managed_externally: boolean;\n\n  // Temporary storage\n  catalog?: Array<CatalogObject>;\n  query_input?: string;\n\n  // DB Engine Spec information\n  engine_information?: {\n    supports_file_upload?: boolean;\n    disable_ssh_tunneling?: boolean;\n  };\n\n  // SSH Tunnel information\n  ssh_tunnel?: SSHTunnelObject;\n};\n\nexport type DatabaseForm = {\n  default_driver: string;\n  engine: string;\n  name: string;\n  parameters: {\n    properties: {\n      database: {\n        description: string;\n        type: string;\n      };\n      host: {\n        description: string;\n        type: string;\n      };\n      password: {\n        description: string;\n        nullable: boolean;\n        type: string;\n      };\n      port: {\n        description: string;\n        format: string;\n        type: string;\n      };\n      query: {\n        additionalProperties: {};\n        description: string;\n        type: string;\n      };\n      username: {\n        description: string;\n        nullable: boolean;\n        type: string;\n      };\n      credentials_info: {\n        description: string;\n        nullable: boolean;\n        type: string;\n      };\n      service_account_info: {\n        description: string;\n        nullable: boolean;\n        type: string;\n      };\n    };\n    required: string[];\n    type: string;\n  };\n  ssh_tunnel: {\n    properties: {\n      ssh_address: {\n        description: string;\n        type: string;\n      };\n      ssh_port: {\n        description: string;\n        format: string;\n        type: string;\n      };\n      username: {\n        description: string;\n        type: string;\n      };\n      password: {\n        description: string;\n        nullable: boolean;\n        type: string;\n      };\n      private_key: {\n        description: string;\n        nullable: boolean;\n        type: string;\n      };\n      private_key_password: {\n        description: string;\n        nullable: boolean;\n        type: string;\n      };\n    };\n    required: string[];\n    type: string;\n  };\n  preferred: boolean;\n  sqlalchemy_uri_placeholder: string;\n};\n\n// the values should align with the database\n// model enum in superset/superset/models/core.py\nexport enum CONFIGURATION_METHOD {\n  SQLALCHEMY_URI = 'sqlalchemy_form',\n  DYNAMIC_FORM = 'dynamic_form',\n}\n\nexport enum Engines {\n  GSheet = 'gsheets',\n  Snowflake = 'snowflake',\n}\n\nexport interface ExtraJson {\n  allows_virtual_table_explore?: boolean; // in SQL Lab\n  cancel_query_on_windows_unload?: boolean; // in Performance\n  cost_estimate_enabled?: boolean; // in SQL Lab\n  disable_data_preview?: boolean; // in SQL Lab\n  engine_params?: {\n    catalog?: Record<string, string>;\n    connect_args?: {\n      http_path?: string;\n    };\n  };\n  metadata_params?: {};\n  metadata_cache_timeout?: {\n    schema_cache_timeout?: number; // in Performance\n    table_cache_timeout?: number; // in Performance\n  }; // No field, holds schema and table timeout\n  schemas_allowed_for_file_upload?: string[]; // in Security\n  version?: string;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { css, styled, SupersetTheme } from '@superset-ui/core';\nimport { JsonEditor } from 'src/components/AsyncAceEditor';\nimport Button from 'src/components/Button';\n\nconst CTAS_CVAS_SCHEMA_FORM_HEIGHT = 108;\nconst EXPOSE_IN_SQLLAB_FORM_HEIGHT = CTAS_CVAS_SCHEMA_FORM_HEIGHT + 153;\nconst EXPOSE_ALL_FORM_HEIGHT = EXPOSE_IN_SQLLAB_FORM_HEIGHT + 102;\nconst MODAL_BODY_HEIGHT = 180.5;\n\nconst anticonHeight = 12;\n\nexport const no_margin_bottom = css`\n  margin-bottom: 0;\n`;\n\nexport const labelMarginBottom = (theme: SupersetTheme) => css`\n  margin-bottom: ${theme.gridUnit * 2}px;\n`;\n\nexport const marginBottom = (theme: SupersetTheme) => css`\n  margin-bottom: ${theme.gridUnit * 4}px;\n`;\n\nexport const StyledFormHeader = styled.header`\n  padding: ${({ theme }) => theme.gridUnit * 2}px\n    ${({ theme }) => theme.gridUnit * 4}px;\n  line-height: ${({ theme }) => theme.gridUnit * 6}px;\n\n  .helper-top {\n    padding-bottom: 0;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    margin: 0;\n  }\n\n  .subheader-text {\n    line-height: ${({ theme }) => theme.gridUnit * 4.25}px;\n  }\n\n  .helper-bottom {\n    padding-top: 0;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    margin: 0;\n  }\n\n  h4 {\n    color: ${({ theme }) => theme.colors.grayscale.dark2};\n    font-size: ${({ theme }) => theme.typography.sizes.l}px;\n    margin: 0;\n    padding: 0;\n    line-height: ${({ theme }) => theme.gridUnit * 8}px;\n  }\n\n  .select-db {\n    padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n    .helper {\n      margin: 0;\n    }\n\n    h4 {\n      margin: 0 0 ${({ theme }) => theme.gridUnit * 4}px;\n    }\n  }\n`;\n\nexport const antdCollapseStyles = (theme: SupersetTheme) => css`\n  .ant-collapse-header {\n    padding-top: ${theme.gridUnit * 3.5}px;\n    padding-bottom: ${theme.gridUnit * 2.5}px;\n\n    .anticon.ant-collapse-arrow {\n      top: calc(50% - ${anticonHeight / 2}px);\n    }\n    .helper {\n      color: ${theme.colors.grayscale.base};\n    }\n  }\n  h4 {\n    font-size: 16px;\n    margin-top: 0;\n    margin-bottom: ${theme.gridUnit}px;\n  }\n  p.helper {\n    margin-bottom: 0;\n    padding: 0;\n  }\n`;\n\nexport const antDTabsStyles = css`\n  .ant-tabs-top {\n    margin-top: 0;\n  }\n  .ant-tabs-top > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n  .ant-tabs-tab {\n    margin-right: 0;\n  }\n`;\n\nexport const antDModalNoPaddingStyles = css`\n  .ant-modal-body {\n    padding-left: 0;\n    padding-right: 0;\n    padding-top: 0;\n  }\n`;\n\nexport const infoTooltip = (theme: SupersetTheme) => css`\n  margin-bottom: ${theme.gridUnit * 5}px;\n  svg {\n    margin-bottom: ${theme.gridUnit * 0.25}px;\n  }\n`;\n\nexport const toggleStyle = (theme: SupersetTheme) => css`\n  padding-left: ${theme.gridUnit * 2}px;\n`;\n\nexport const formScrollableStyles = (theme: SupersetTheme) => css`\n  padding: ${theme.gridUnit * 4}px ${theme.gridUnit * 4}px 0;\n`;\n\nexport const antDModalStyles = (theme: SupersetTheme) => css`\n  .ant-select-dropdown {\n    height: ${theme.gridUnit * 40}px;\n  }\n\n  .ant-modal-header {\n    padding: ${theme.gridUnit * 4.5}px ${theme.gridUnit * 4}px\n      ${theme.gridUnit * 4}px;\n  }\n\n  .ant-modal-close-x .close {\n    color: ${theme.colors.grayscale.dark1};\n    opacity: 1;\n  }\n\n  .ant-modal-body {\n    height: ${theme.gridUnit * MODAL_BODY_HEIGHT}px;\n  }\n\n  .ant-modal-footer {\n    height: ${theme.gridUnit * 16.25}px;\n  }\n`;\n\nexport const antDAlertStyles = (theme: SupersetTheme) => css`\n  border: 1px solid ${theme.colors.info.base};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 4}px 0;\n\n  .ant-alert-message {\n    color: ${theme.colors.info.dark2};\n    font-size: ${theme.typography.sizes.m}px;\n    font-weight: ${theme.typography.weights.bold};\n  }\n\n  .ant-alert-description {\n    color: ${theme.colors.info.dark2};\n    font-size: ${theme.typography.sizes.m}px;\n    line-height: ${theme.gridUnit * 5}px;\n\n    a {\n      text-decoration: underline;\n    }\n\n    .ant-alert-icon {\n      margin-right: ${theme.gridUnit * 2.5}px;\n      font-size: ${theme.typography.sizes.l}px;\n      position: relative;\n      top: ${theme.gridUnit / 4}px;\n    }\n  }\n`;\n\nexport const StyledAlertMargin = styled.div`\n  ${({ theme }) => css`\n    margin: 0 ${theme.gridUnit * 4}px -${theme.gridUnit * 4}px;\n  `}\n`;\n\nexport const antDErrorAlertStyles = (theme: SupersetTheme) => css`\n  border: ${theme.colors.error.base} 1px solid;\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 8}px ${theme.gridUnit * 4}px;\n  color: ${theme.colors.error.dark2};\n  .ant-alert-message {\n    font-size: ${theme.typography.sizes.m}px;\n    font-weight: ${theme.typography.weights.bold};\n  }\n  .ant-alert-description {\n    font-size: ${theme.typography.sizes.m}px;\n    line-height: ${theme.gridUnit * 5}px;\n    .ant-alert-icon {\n      margin-right: ${theme.gridUnit * 2.5}px;\n      font-size: ${theme.typography.sizes.l}px;\n      position: relative;\n      top: ${theme.gridUnit / 4}px;\n    }\n  }\n`;\n\nexport const antdWarningAlertStyles = (theme: SupersetTheme) => css`\n  border: 1px solid ${theme.colors.warning.light1};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 4}px 0;\n  color: ${theme.colors.warning.dark2};\n\n  .ant-alert-message {\n    margin: 0;\n  }\n\n  .ant-alert-description {\n    font-size: ${theme.typography.sizes.s + 1}px;\n    line-height: ${theme.gridUnit * 4}px;\n\n    .ant-alert-icon {\n      margin-right: ${theme.gridUnit * 2.5}px;\n      font-size: ${theme.typography.sizes.l + 1}px;\n      position: relative;\n      top: ${theme.gridUnit / 4}px;\n    }\n  }\n`;\n\nexport const formHelperStyles = (theme: SupersetTheme) => css`\n  .required {\n    margin-left: ${theme.gridUnit / 2}px;\n    color: ${theme.colors.error.base};\n  }\n\n  .helper {\n    display: block;\n    padding: ${theme.gridUnit}px 0;\n    color: ${theme.colors.grayscale.light1};\n    font-size: ${theme.typography.sizes.s}px;\n    text-align: left;\n  }\n`;\n\nexport const wideButton = (theme: SupersetTheme) => css`\n  width: 100%;\n  border: 1px solid ${theme.colors.primary.dark2};\n  color: ${theme.colors.primary.dark2};\n  &:hover,\n  &:focus {\n    border: 1px solid ${theme.colors.primary.dark1};\n    color: ${theme.colors.primary.dark1};\n  }\n`;\n\nexport const formStyles = (theme: SupersetTheme) => css`\n  .form-group {\n    margin-bottom: ${theme.gridUnit * 4}px;\n    &-w-50 {\n      display: inline-block;\n      width: ${`calc(50% - ${theme.gridUnit * 4}px)`};\n      & + .form-group-w-50 {\n        margin-left: ${theme.gridUnit * 8}px;\n      }\n    }\n  }\n  .control-label {\n    color: ${theme.colors.grayscale.dark1};\n    font-size: ${theme.typography.sizes.s}px;\n  }\n  .helper {\n    color: ${theme.colors.grayscale.light1};\n    font-size: ${theme.typography.sizes.s}px;\n    margin-top: ${theme.gridUnit * 1.5}px;\n  }\n  .ant-tabs-content-holder {\n    overflow: auto;\n    max-height: 480px;\n  }\n`;\n\nexport const validatedFormStyles = (theme: SupersetTheme) => css`\n  label {\n    color: ${theme.colors.grayscale.dark1};\n    font-size: ${theme.typography.sizes.s}px;\n    margin-bottom: 0;\n  }\n`;\n\nexport const StyledInputContainer = styled.div`\n  ${({ theme }) => css`\n    margin-bottom: ${theme.gridUnit * 6}px;\n    &.mb-0 {\n      margin-bottom: 0;\n    }\n    &.mb-8 {\n      margin-bottom: ${theme.gridUnit * 2}px;\n    }\n\n    .control-label {\n      color: ${theme.colors.grayscale.dark1};\n      font-size: ${theme.typography.sizes.s}px;\n      margin-bottom: ${theme.gridUnit * 2}px;\n    }\n\n    &.extra-container {\n      padding-top: ${theme.gridUnit * 2}px;\n    }\n\n    .input-container {\n      display: flex;\n      align-items: top;\n\n      label {\n        display: flex;\n        margin-left: ${theme.gridUnit * 2}px;\n        margin-top: ${theme.gridUnit * 0.75}px;\n        font-family: ${theme.typography.families.sansSerif};\n        font-size: ${theme.typography.sizes.m}px;\n      }\n\n      i {\n        margin: 0 ${theme.gridUnit}px;\n      }\n    }\n\n    input,\n    textarea {\n      flex: 1 1 auto;\n    }\n\n    textarea {\n      height: 160px;\n      resize: none;\n    }\n\n    input::placeholder,\n    textarea::placeholder {\n      color: ${theme.colors.grayscale.light1};\n    }\n\n    textarea,\n    input[type='text'],\n    input[type='number'] {\n      padding: ${theme.gridUnit * 1.5}px ${theme.gridUnit * 2}px;\n      border-style: none;\n      border: 1px solid ${theme.colors.grayscale.light2};\n      border-radius: ${theme.gridUnit}px;\n\n      &[name='name'] {\n        flex: 0 1 auto;\n        width: 40%;\n      }\n    }\n    &.expandable {\n      height: 0;\n      overflow: hidden;\n      transition: height 0.25s;\n      margin-left: ${theme.gridUnit * 8}px;\n      margin-bottom: 0;\n      padding: 0;\n      .control-label {\n        margin-bottom: 0;\n      }\n      &.open {\n        height: ${CTAS_CVAS_SCHEMA_FORM_HEIGHT}px;\n        padding-right: ${theme.gridUnit * 5}px;\n      }\n    }\n  `}\n`;\n\nexport const StyledJsonEditor = styled(JsonEditor)`\n  flex: 1 1 auto;\n  border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  border-radius: ${({ theme }) => theme.gridUnit}px;\n`;\n\nexport const StyledExpandableForm = styled.div`\n  padding-top: ${({ theme }) => theme.gridUnit}px;\n  .input-container {\n    padding-top: ${({ theme }) => theme.gridUnit}px;\n    padding-bottom: ${({ theme }) => theme.gridUnit}px;\n  }\n  &.expandable {\n    height: 0;\n    overflow: hidden;\n    transition: height 0.25s;\n    margin-left: ${({ theme }) => theme.gridUnit * 7}px;\n    &.open {\n      height: ${EXPOSE_IN_SQLLAB_FORM_HEIGHT}px;\n      &.ctas-open {\n        height: ${EXPOSE_ALL_FORM_HEIGHT}px;\n      }\n    }\n  }\n`;\n\nexport const StyledAlignment = styled.div`\n  padding: 0 ${({ theme }) => theme.gridUnit * 4}px;\n  margin-top: ${({ theme }) => theme.gridUnit * 6}px;\n`;\n\nexport const buttonLinkStyles = (theme: SupersetTheme) => css`\n  font-weight: ${theme.typography.weights.normal};\n  text-transform: initial;\n  padding-right: ${theme.gridUnit * 2}px;\n`;\n\nexport const importDbButtonLinkStyles = (theme: SupersetTheme) => css`\n  font-size: ${theme.gridUnit * 3.5}px;\n  font-weight: ${theme.typography.weights.normal};\n  text-transform: initial;\n  padding-right: ${theme.gridUnit * 2}px;\n`;\n\nexport const alchemyButtonLinkStyles = (theme: SupersetTheme) => css`\n  font-weight: ${theme.typography.weights.normal};\n  text-transform: initial;\n  padding: ${theme.gridUnit * 8}px 0 0;\n  margin-left: 0px;\n`;\n\nexport const TabHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 0px;\n\n  .helper {\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    margin: 0px;\n  }\n`;\n\nexport const CreateHeaderTitle = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.dark2};\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n  font-size: ${({ theme }) => theme.typography.sizes.m}px;\n`;\n\nexport const CreateHeaderSubtitle = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n`;\n\nexport const EditHeaderTitle = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.light1};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  text-transform: uppercase;\n`;\n\nexport const EditHeaderSubtitle = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\n  font-size: ${({ theme }) => theme.typography.sizes.l}px;\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n`;\n\nexport const CredentialInfoForm = styled.div`\n  .catalog-type-select {\n    margin: 0 0 20px;\n  }\n\n  .label-select {\n    text-transform: uppercase;\n    color: ${({ theme }) => theme.colors.grayscale.dark1};\n    font-size: 11px;\n    margin: 0 5px ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  .label-paste {\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n    font-size: 11px;\n    line-height: 16px;\n  }\n\n  .input-container {\n    margin: ${({ theme }) => theme.gridUnit * 7}px 0;\n    display: flex;\n    flex-direction: column;\n}\n  }\n  .input-form {\n    height: 100px;\n    width: 100%;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n    resize: vertical;\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 2}px;\n    &::placeholder {\n      color: ${({ theme }) => theme.colors.grayscale.light1};\n    }\n  }\n\n  .input-container {\n    .input-upload {\n      display: none !important;\n    }\n    .input-upload-current {\n      display: flex;\n      justify-content: space-between;\n    }\n    .input-upload-btn {\n      width: ${({ theme }) => theme.gridUnit * 32}px\n    }\n  }`;\n\nexport const SelectDatabaseStyles = styled.div`\n  .preferred {\n    .superset-button {\n      margin-left: 0;\n    }\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    margin: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n\n  .preferred-item {\n    width: 32%;\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2.5}px;\n  }\n\n  .available {\n    margin: ${({ theme }) => theme.gridUnit * 4}px;\n    .available-label {\n      font-size: ${({ theme }) => theme.typography.sizes.l}px;\n      font-weight: ${({ theme }) => theme.typography.weights.bold};\n      margin: ${({ theme }) => theme.gridUnit * 6}px 0;\n    }\n    .available-select {\n      width: 100%;\n    }\n  }\n\n  .label-available-select {\n    text-transform: uppercase;\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  }\n\n  .control-label {\n    color: ${({ theme }) => theme.colors.grayscale.dark1};\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n`;\n\nexport const StyledFooterButton = styled(Button)`\n  width: ${({ theme }) => theme.gridUnit * 40}px;\n`;\n\nexport const StyledStickyHeader = styled.div`\n  position: sticky;\n  top: 0;\n  z-index: ${({ theme }) => theme.zIndex.max};\n  background: ${({ theme }) => theme.colors.grayscale.light5};\n  height: auto;\n`;\n\nexport const StyledCatalogTable = styled.div`\n  margin-bottom: 16px;\n\n  .catalog-type-select {\n    margin: 0 0 20px;\n  }\n\n  .gsheet-title {\n    font-size: ${({ theme }) => theme.typography.sizes.l}px;\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n    margin: ${({ theme }) => theme.gridUnit * 10}px 0 16px;\n  }\n\n  .catalog-label {\n    margin: 0 0 7px;\n  }\n\n  .catalog-name {\n    display: flex;\n    .catalog-name-input {\n      width: 95%;\n      margin-bottom: 0px;\n    }\n  }\n\n  .catalog-name-url {\n    margin: 4px 0;\n    width: 95%;\n  }\n\n  .catalog-add-btn {\n    width: 95%;\n  }\n`;\n\nexport const StyledUploadWrapper = styled.div`\n  .ant-progress-inner {\n    display: none;\n  }\n\n  .ant-upload-list-item-card-actions {\n    display: none;\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ChangeEvent, EventHandler } from 'react';\nimport cx from 'classnames';\nimport {\n  t,\n  SupersetTheme,\n  DatabaseConnectionExtension,\n} from '@superset-ui/core';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport IndeterminateCheckbox from 'src/components/IndeterminateCheckbox';\nimport Collapse from 'src/components/Collapse';\nimport {\n  StyledInputContainer,\n  StyledJsonEditor,\n  StyledExpandableForm,\n  antdCollapseStyles,\n  no_margin_bottom,\n} from './styles';\nimport { DatabaseObject, ExtraJson } from '../types';\n\nconst ExtraOptions = ({\n  db,\n  onInputChange,\n  onTextChange,\n  onEditorChange,\n  onExtraInputChange,\n  onExtraEditorChange,\n  extraExtension,\n}: {\n  db: DatabaseObject | null;\n  onInputChange: EventHandler<ChangeEvent<HTMLInputElement>>;\n  onTextChange: EventHandler<ChangeEvent<HTMLTextAreaElement>>;\n  onEditorChange: Function;\n  onExtraInputChange: EventHandler<ChangeEvent<HTMLInputElement>>;\n  onExtraEditorChange: Function;\n  extraExtension: DatabaseConnectionExtension | undefined;\n}) => {\n  const expandableModalIsOpen = !!db?.expose_in_sqllab;\n  const createAsOpen = !!(db?.allow_ctas || db?.allow_cvas);\n  const isFileUploadSupportedByEngine =\n    db?.engine_information?.supports_file_upload;\n\n  // JSON.parse will deep parse engine_params\n  // if it's an object, and we want to keep it a string\n  const extraJson: ExtraJson = JSON.parse(db?.extra || '{}', (key, value) => {\n    if (key === 'engine_params' && typeof value === 'object') {\n      // keep this as a string\n      return JSON.stringify(value);\n    }\n    return value;\n  });\n\n  const ExtraExtensionComponent = extraExtension?.component;\n  const ExtraExtensionLogo = extraExtension?.logo;\n  const ExtensionDescription = extraExtension?.description;\n\n  return (\n    <Collapse\n      expandIconPosition=\"right\"\n      accordion\n      css={(theme: SupersetTheme) => antdCollapseStyles(theme)}\n    >\n      <Collapse.Panel\n        header={\n          <div>\n            <h4>{t('SQL Lab')}</h4>\n            <p className=\"helper\">\n              {t('Adjust how this database will interact with SQL Lab.')}\n            </p>\n          </div>\n        }\n        key=\"1\"\n      >\n        <StyledInputContainer css={no_margin_bottom}>\n          <div className=\"input-container\">\n            <IndeterminateCheckbox\n              id=\"expose_in_sqllab\"\n              indeterminate={false}\n              checked={!!db?.expose_in_sqllab}\n              onChange={onInputChange}\n              labelText={t('Expose database in SQL Lab')}\n            />\n            <InfoTooltip\n              tooltip={t('Allow this database to be queried in SQL Lab')}\n            />\n          </div>\n          <StyledExpandableForm\n            className={cx('expandable', {\n              open: expandableModalIsOpen,\n              'ctas-open': createAsOpen,\n            })}\n          >\n            <StyledInputContainer css={no_margin_bottom}>\n              <div className=\"input-container\">\n                <IndeterminateCheckbox\n                  id=\"allow_ctas\"\n                  indeterminate={false}\n                  checked={!!db?.allow_ctas}\n                  onChange={onInputChange}\n                  labelText={t('Allow CREATE TABLE AS')}\n                />\n                <InfoTooltip\n                  tooltip={t('Allow creation of new tables based on queries')}\n                />\n              </div>\n            </StyledInputContainer>\n            <StyledInputContainer css={no_margin_bottom}>\n              <div className=\"input-container\">\n                <IndeterminateCheckbox\n                  id=\"allow_cvas\"\n                  indeterminate={false}\n                  checked={!!db?.allow_cvas}\n                  onChange={onInputChange}\n                  labelText={t('Allow CREATE VIEW AS')}\n                />\n                <InfoTooltip\n                  tooltip={t('Allow creation of new views based on queries')}\n                />\n              </div>\n              <StyledInputContainer\n                className={cx('expandable', { open: createAsOpen })}\n              >\n                <div className=\"control-label\">{t('CTAS & CVAS SCHEMA')}</div>\n                <div className=\"input-container\">\n                  <input\n                    type=\"text\"\n                    name=\"force_ctas_schema\"\n                    placeholder={t('Create or select schema...')}\n                    onChange={onInputChange}\n                    value={db?.force_ctas_schema || ''}\n                  />\n                </div>\n                <div className=\"helper\">\n                  {t(\n                    'Force all tables and views to be created in this schema when clicking CTAS or CVAS in SQL Lab.',\n                  )}\n                </div>\n              </StyledInputContainer>\n            </StyledInputContainer>\n            <StyledInputContainer css={no_margin_bottom}>\n              <div className=\"input-container\">\n                <IndeterminateCheckbox\n                  id=\"allow_dml\"\n                  indeterminate={false}\n                  checked={!!db?.allow_dml}\n                  onChange={onInputChange}\n                  labelText={t('Allow DML')}\n                />\n                <InfoTooltip\n                  tooltip={t(\n                    'Allow manipulation of the database using non-SELECT statements such as UPDATE, DELETE, CREATE, etc.',\n                  )}\n                />\n              </div>\n            </StyledInputContainer>\n            <StyledInputContainer css={no_margin_bottom}>\n              <div className=\"input-container\">\n                <IndeterminateCheckbox\n                  id=\"cost_estimate_enabled\"\n                  indeterminate={false}\n                  checked={!!extraJson?.cost_estimate_enabled}\n                  onChange={onExtraInputChange}\n                  labelText={t('Enable query cost estimation')}\n                />\n                <InfoTooltip\n                  tooltip={t(\n                    'For Bigquery, Presto and Postgres, shows a button to compute cost before running a query.',\n                  )}\n                />\n              </div>\n            </StyledInputContainer>\n            <StyledInputContainer css={no_margin_bottom}>\n              <div className=\"input-container\">\n                <IndeterminateCheckbox\n                  id=\"allows_virtual_table_explore\"\n                  indeterminate={false}\n                  checked={!!extraJson?.allows_virtual_table_explore}\n                  onChange={onExtraInputChange}\n                  labelText={t('Allow this database to be explored')}\n                />\n                <InfoTooltip\n                  tooltip={t(\n                    'When enabled, users are able to visualize SQL Lab results in Explore.',\n                  )}\n                />\n              </div>\n            </StyledInputContainer>\n            <StyledInputContainer>\n              <div className=\"input-container\">\n                <IndeterminateCheckbox\n                  id=\"disable_data_preview\"\n                  indeterminate={false}\n                  checked={!!extraJson?.disable_data_preview}\n                  onChange={onExtraInputChange}\n                  labelText={t('Disable SQL Lab data preview queries')}\n                />\n                <InfoTooltip\n                  tooltip={t(\n                    'Disable data preview when fetching table metadata in SQL Lab. ' +\n                      ' Useful to avoid browser performance issues when using ' +\n                      ' databases with very wide tables.',\n                  )}\n                />\n              </div>\n            </StyledInputContainer>\n          </StyledExpandableForm>\n        </StyledInputContainer>\n      </Collapse.Panel>\n      <Collapse.Panel\n        header={\n          <div>\n            <h4>{t('Performance')}</h4>\n            <p className=\"helper\">\n              {t('Adjust performance settings of this database.')}\n            </p>\n          </div>\n        }\n        key=\"2\"\n      >\n        <StyledInputContainer className=\"mb-8\">\n          <div className=\"control-label\">{t('Chart cache timeout')}</div>\n          <div className=\"input-container\">\n            <input\n              type=\"number\"\n              name=\"cache_timeout\"\n              value={db?.cache_timeout || ''}\n              placeholder={t('Enter duration in seconds')}\n              onChange={onInputChange}\n            />\n          </div>\n          <div className=\"helper\">\n            {t(\n              'Duration (in seconds) of the caching timeout for charts of this database.' +\n                ' A timeout of 0 indicates that the cache never expires, and -1 bypasses the cache.' +\n                ' Note this defaults to the global timeout if undefined.',\n            )}\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer>\n          <div className=\"control-label\">{t('Schema cache timeout')}</div>\n          <div className=\"input-container\">\n            <input\n              type=\"number\"\n              name=\"schema_cache_timeout\"\n              value={\n                extraJson?.metadata_cache_timeout?.schema_cache_timeout || ''\n              }\n              placeholder={t('Enter duration in seconds')}\n              onChange={onExtraInputChange}\n              data-test=\"schema-cache-timeout-test\"\n            />\n          </div>\n          <div className=\"helper\">\n            {t(\n              'Duration (in seconds) of the metadata caching timeout for schemas of ' +\n                'this database. If left unset, the cache never expires.',\n            )}\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer>\n          <div className=\"control-label\">{t('Table cache timeout')}</div>\n          <div className=\"input-container\">\n            <input\n              type=\"number\"\n              name=\"table_cache_timeout\"\n              value={\n                extraJson?.metadata_cache_timeout?.table_cache_timeout || ''\n              }\n              placeholder={t('Enter duration in seconds')}\n              onChange={onExtraInputChange}\n              data-test=\"table-cache-timeout-test\"\n            />\n          </div>\n          <div className=\"helper\">\n            {t(\n              'Duration (in seconds) of the metadata caching timeout for tables of ' +\n                'this database. If left unset, the cache never expires. ',\n            )}\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer css={{ no_margin_bottom }}>\n          <div className=\"input-container\">\n            <IndeterminateCheckbox\n              id=\"allow_run_async\"\n              indeterminate={false}\n              checked={!!db?.allow_run_async}\n              onChange={onInputChange}\n              labelText={t('Asynchronous query execution')}\n            />\n            <InfoTooltip\n              tooltip={t(\n                'Operate the database in asynchronous mode, meaning that the queries ' +\n                  'are executed on remote workers as opposed to on the web server itself. ' +\n                  'This assumes that you have a Celery worker setup as well as a results ' +\n                  'backend. Refer to the installation docs for more information.',\n              )}\n            />\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer css={{ no_margin_bottom }}>\n          <div className=\"input-container\">\n            <IndeterminateCheckbox\n              id=\"cancel_query_on_windows_unload\"\n              indeterminate={false}\n              checked={!!extraJson?.cancel_query_on_windows_unload}\n              onChange={onExtraInputChange}\n              labelText={t('Cancel query on window unload event')}\n            />\n            <InfoTooltip\n              tooltip={t(\n                'Terminate running queries when browser window closed or navigated ' +\n                  'to another page. Available for Presto, Hive, MySQL, Postgres and ' +\n                  'Snowflake databases.',\n              )}\n            />\n          </div>\n        </StyledInputContainer>\n      </Collapse.Panel>\n      <Collapse.Panel\n        header={\n          <div>\n            <h4>{t('Security')}</h4>\n            <p className=\"helper\">{t('Add extra connection information.')}</p>\n          </div>\n        }\n        key=\"3\"\n      >\n        <StyledInputContainer>\n          <div className=\"control-label\">{t('Secure extra')}</div>\n          <div className=\"input-container\">\n            <StyledJsonEditor\n              name=\"masked_encrypted_extra\"\n              value={db?.masked_encrypted_extra || ''}\n              placeholder={t('Secure extra')}\n              onChange={(json: string) =>\n                onEditorChange({ json, name: 'masked_encrypted_extra' })\n              }\n              width=\"100%\"\n              height=\"160px\"\n            />\n          </div>\n          <div className=\"helper\">\n            <div>\n              {t(\n                'JSON string containing additional connection configuration. ' +\n                  'This is used to provide connection information for systems ' +\n                  'like Hive, Presto and BigQuery which do not conform to the ' +\n                  'username:password syntax normally used by SQLAlchemy.',\n              )}\n            </div>\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer>\n          <div className=\"control-label\">{t('Root certificate')}</div>\n          <div className=\"input-container\">\n            <textarea\n              name=\"server_cert\"\n              value={db?.server_cert || ''}\n              placeholder={t('Enter CA_BUNDLE')}\n              onChange={onTextChange}\n            />\n          </div>\n          <div className=\"helper\">\n            {t(\n              'Optional CA_BUNDLE contents to validate HTTPS requests. Only ' +\n                'available on certain database engines.',\n            )}\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer\n          css={!isFileUploadSupportedByEngine ? no_margin_bottom : {}}\n        >\n          <div className=\"input-container\">\n            <IndeterminateCheckbox\n              id=\"impersonate_user\"\n              indeterminate={false}\n              checked={!!db?.impersonate_user}\n              onChange={onInputChange}\n              labelText={t(\n                'Impersonate logged in user (Presto, Trino, Drill, Hive, and GSheets)',\n              )}\n            />\n            <InfoTooltip\n              tooltip={t(\n                'If Presto or Trino, all the queries in SQL Lab are going to be executed as the ' +\n                  'currently logged on user who must have permission to run them. If Hive ' +\n                  'and hive.server2.enable.doAs is enabled, will run the queries as ' +\n                  'service account, but impersonate the currently logged on user via ' +\n                  'hive.server2.proxy.user property.',\n              )}\n            />\n          </div>\n        </StyledInputContainer>\n        {isFileUploadSupportedByEngine && (\n          <StyledInputContainer\n            css={!db?.allow_file_upload ? no_margin_bottom : {}}\n          >\n            <div className=\"input-container\">\n              <IndeterminateCheckbox\n                id=\"allow_file_upload\"\n                indeterminate={false}\n                checked={!!db?.allow_file_upload}\n                onChange={onInputChange}\n                labelText={t('Allow file uploads to database')}\n              />\n            </div>\n          </StyledInputContainer>\n        )}\n        {isFileUploadSupportedByEngine && !!db?.allow_file_upload && (\n          <StyledInputContainer css={no_margin_bottom}>\n            <div className=\"control-label\">\n              {t('Schemas allowed for File upload')}\n            </div>\n            <div className=\"input-container\">\n              <input\n                type=\"text\"\n                name=\"schemas_allowed_for_file_upload\"\n                value={(extraJson?.schemas_allowed_for_file_upload || []).join(\n                  ',',\n                )}\n                placeholder=\"schema1,schema2\"\n                onChange={onExtraInputChange}\n              />\n            </div>\n            <div className=\"helper\">\n              {t(\n                'A comma-separated list of schemas that files are allowed to upload to.',\n              )}\n            </div>\n          </StyledInputContainer>\n        )}\n      </Collapse.Panel>\n      {extraExtension && ExtraExtensionComponent && ExtensionDescription && (\n        <Collapse.Panel\n          header={\n            <div>\n              {ExtraExtensionLogo && <ExtraExtensionLogo />}\n              <span\n                css={(theme: SupersetTheme) => ({\n                  fontSize: theme.typography.sizes.l,\n                  fontWeight: theme.typography.weights.bold,\n                })}\n              >\n                {extraExtension?.title}\n              </span>\n              <p className=\"helper\">\n                <ExtensionDescription />\n              </p>\n            </div>\n          }\n          key={extraExtension?.title}\n          collapsible={extraExtension.enabled?.() ? 'header' : 'disabled'}\n        >\n          <StyledInputContainer css={no_margin_bottom}>\n            <ExtraExtensionComponent db={db} onEdit={extraExtension.onEdit} />\n          </StyledInputContainer>\n        </Collapse.Panel>\n      )}\n      <Collapse.Panel\n        header={\n          <div>\n            <h4>{t('Other')}</h4>\n            <p className=\"helper\">{t('Additional settings.')}</p>\n          </div>\n        }\n        key=\"4\"\n      >\n        <StyledInputContainer>\n          <div className=\"control-label\">{t('Metadata Parameters')}</div>\n          <div className=\"input-container\">\n            <StyledJsonEditor\n              name=\"metadata_params\"\n              placeholder={t('Metadata Parameters')}\n              onChange={(json: string) =>\n                onExtraEditorChange({ json, name: 'metadata_params' })\n              }\n              width=\"100%\"\n              height=\"160px\"\n              value={\n                !Object.keys(extraJson?.metadata_params || {}).length\n                  ? ''\n                  : extraJson?.metadata_params\n              }\n            />\n          </div>\n          <div className=\"helper\">\n            <div>\n              {t(\n                'The metadata_params object gets unpacked into the sqlalchemy.MetaData call.',\n              )}\n            </div>\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer>\n          <div className=\"control-label\">{t('Engine Parameters')}</div>\n          <div className=\"input-container\">\n            <StyledJsonEditor\n              name=\"engine_params\"\n              placeholder={t('Engine Parameters')}\n              onChange={(json: string) =>\n                onExtraEditorChange({ json, name: 'engine_params' })\n              }\n              width=\"100%\"\n              height=\"160px\"\n              value={\n                !Object.keys(extraJson?.engine_params || {}).length\n                  ? ''\n                  : extraJson?.engine_params\n              }\n            />\n          </div>\n          <div className=\"helper\">\n            <div>\n              {t(\n                'The engine_params object gets unpacked into the sqlalchemy.create_engine call.',\n              )}\n            </div>\n          </div>\n        </StyledInputContainer>\n        <StyledInputContainer>\n          <div className=\"control-label\" data-test=\"version-label-test\">\n            {t('Version')}\n          </div>\n          <div className=\"input-container\" data-test=\"version-spinbutton-test\">\n            <input\n              type=\"number\"\n              name=\"version\"\n              placeholder={t('Version number')}\n              onChange={onExtraInputChange}\n              value={extraJson?.version || ''}\n            />\n          </div>\n          <div className=\"helper\">\n            {t(\n              'Specify the database version. This should be used with ' +\n                'Presto in order to enable query cost estimation.',\n            )}\n          </div>\n        </StyledInputContainer>\n      </Collapse.Panel>\n    </Collapse>\n  );\n};\n\nexport default ExtraOptions;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { EventHandler, ChangeEvent, MouseEvent, ReactNode } from 'react';\nimport { t, SupersetTheme } from '@superset-ui/core';\nimport SupersetText from 'src/utils/textUtils';\nimport Button from 'src/components/Button';\nimport { StyledInputContainer, wideButton } from './styles';\nimport { DatabaseObject } from '../types';\n\nconst SqlAlchemyTab = ({\n  db,\n  onInputChange,\n  testConnection,\n  conf,\n  testInProgress = false,\n  children,\n}: {\n  db: DatabaseObject | null;\n  onInputChange: EventHandler<ChangeEvent<HTMLInputElement>>;\n  testConnection: EventHandler<MouseEvent<HTMLElement>>;\n  conf: { SQLALCHEMY_DOCS_URL: string; SQLALCHEMY_DISPLAY_TEXT: string };\n  testInProgress?: boolean;\n  children?: ReactNode;\n}) => {\n  let fallbackDocsUrl;\n  let fallbackDisplayText;\n  if (SupersetText) {\n    fallbackDocsUrl =\n      SupersetText.DB_MODAL_SQLALCHEMY_FORM?.SQLALCHEMY_DOCS_URL;\n    fallbackDisplayText =\n      SupersetText.DB_MODAL_SQLALCHEMY_FORM?.SQLALCHEMY_DISPLAY_TEXT;\n  } else {\n    fallbackDocsUrl = 'https://docs.sqlalchemy.org/en/13/core/engines.html';\n    fallbackDisplayText = 'SQLAlchemy docs';\n  }\n  return (\n    <>\n      <StyledInputContainer>\n        <div className=\"control-label\">\n          {t('Display Name')}\n          <span className=\"required\">*</span>\n        </div>\n        <div className=\"input-container\">\n          <input\n            type=\"text\"\n            name=\"database_name\"\n            data-test=\"database-name-input\"\n            value={db?.database_name || ''}\n            placeholder={t('Name your database')}\n            onChange={onInputChange}\n          />\n        </div>\n        <div className=\"helper\">\n          {t('Pick a name to help you identify this database.')}\n        </div>\n      </StyledInputContainer>\n      <StyledInputContainer>\n        <div className=\"control-label\">\n          {t('SQLAlchemy URI')}\n          <span className=\"required\">*</span>\n        </div>\n        <div className=\"input-container\">\n          <input\n            type=\"text\"\n            name=\"sqlalchemy_uri\"\n            data-test=\"sqlalchemy-uri-input\"\n            value={db?.sqlalchemy_uri || ''}\n            autoComplete=\"off\"\n            placeholder={t(\n              'dialect+driver://username:password@host:port/database',\n            )}\n            onChange={onInputChange}\n          />\n        </div>\n        <div className=\"helper\">\n          {t('Refer to the')}{' '}\n          <a\n            href={fallbackDocsUrl || conf?.SQLALCHEMY_DOCS_URL || ''}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {fallbackDisplayText || conf?.SQLALCHEMY_DISPLAY_TEXT || ''}\n          </a>{' '}\n          {t('for more information on how to structure your URI.')}\n        </div>\n      </StyledInputContainer>\n      {children}\n      <Button\n        onClick={testConnection}\n        loading={testInProgress}\n        cta\n        buttonStyle=\"link\"\n        css={(theme: SupersetTheme) => wideButton(theme)}\n      >\n        {t('Test connection')}\n      </Button>\n    </>\n  );\n};\nexport default SqlAlchemyTab;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { SupersetTheme, t } from '@superset-ui/core';\nimport { AntdSwitch } from 'src/components';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport ValidatedInput from 'src/components/Form/LabeledErrorBoundInput';\nimport { FieldPropTypes } from '.';\nimport { toggleStyle, infoTooltip } from '../styles';\n\nexport const hostField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n}: FieldPropTypes) => (\n  <ValidatedInput\n    id=\"host\"\n    name=\"host\"\n    value={db?.parameters?.host}\n    required={required}\n    hasTooltip\n    tooltipText={t(\n      'This can be either an IP address (e.g. 127.0.0.1) or a domain name (e.g. mydatabase.com).',\n    )}\n    validationMethods={{ onBlur: getValidation }}\n    errorMessage={validationErrors?.host}\n    placeholder={t('e.g. 127.0.0.1')}\n    className=\"form-group-w-50\"\n    label={t('Host')}\n    onChange={changeMethods.onParametersChange}\n  />\n);\nexport const portField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n}: FieldPropTypes) => (\n  <>\n    <ValidatedInput\n      id=\"port\"\n      name=\"port\"\n      type=\"number\"\n      required={required}\n      value={db?.parameters?.port as number}\n      validationMethods={{ onBlur: getValidation }}\n      errorMessage={validationErrors?.port}\n      placeholder={t('e.g. 5432')}\n      className=\"form-group-w-50\"\n      label={t('Port')}\n      onChange={changeMethods.onParametersChange}\n    />\n  </>\n);\nexport const httpPath = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n}: FieldPropTypes) => {\n  const extraJson = JSON.parse(db?.extra || '{}');\n  return (\n    <ValidatedInput\n      id=\"http_path\"\n      name=\"http_path\"\n      required={required}\n      value={extraJson.engine_params?.connect_args?.http_path}\n      validationMethods={{ onBlur: getValidation }}\n      errorMessage={validationErrors?.http_path}\n      placeholder={t('e.g. sql/protocolv1/o/12345')}\n      label=\"HTTP Path\"\n      onChange={changeMethods.onExtraInputChange}\n      helpText={t('Copy the name of the HTTP Path of your cluster.')}\n    />\n  );\n};\nexport const databaseField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  placeholder,\n  db,\n}: FieldPropTypes) => (\n  <ValidatedInput\n    id=\"database\"\n    name=\"database\"\n    required={required}\n    value={db?.parameters?.database}\n    validationMethods={{ onBlur: getValidation }}\n    errorMessage={validationErrors?.database}\n    placeholder={placeholder ?? t('e.g. world_population')}\n    label={t('Database name')}\n    onChange={changeMethods.onParametersChange}\n    helpText={t('Copy the name of the database you are trying to connect to.')}\n  />\n);\nexport const usernameField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n}: FieldPropTypes) => (\n  <ValidatedInput\n    id=\"username\"\n    name=\"username\"\n    required={required}\n    value={db?.parameters?.username}\n    validationMethods={{ onBlur: getValidation }}\n    errorMessage={validationErrors?.username}\n    placeholder={t('e.g. Analytics')}\n    label={t('Username')}\n    onChange={changeMethods.onParametersChange}\n  />\n);\nexport const passwordField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n  isEditMode,\n}: FieldPropTypes) => (\n  <ValidatedInput\n    id=\"password\"\n    name=\"password\"\n    required={required}\n    visibilityToggle={!isEditMode}\n    value={db?.parameters?.password}\n    validationMethods={{ onBlur: getValidation }}\n    errorMessage={validationErrors?.password}\n    placeholder={t('e.g. ********')}\n    label={t('Password')}\n    onChange={changeMethods.onParametersChange}\n  />\n);\nexport const accessTokenField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n  isEditMode,\n}: FieldPropTypes) => (\n  <ValidatedInput\n    id=\"access_token\"\n    name=\"access_token\"\n    required={required}\n    visibilityToggle={!isEditMode}\n    value={db?.parameters?.access_token}\n    validationMethods={{ onBlur: getValidation }}\n    errorMessage={validationErrors?.access_token}\n    placeholder={t('e.g. ********')}\n    label={t('Access token')}\n    onChange={changeMethods.onParametersChange}\n  />\n);\nexport const displayField = ({\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n}: FieldPropTypes) => (\n  <>\n    <ValidatedInput\n      id=\"database_name\"\n      name=\"database_name\"\n      required\n      value={db?.database_name}\n      validationMethods={{ onBlur: getValidation }}\n      errorMessage={validationErrors?.database_name}\n      placeholder=\"\"\n      label={t('Display Name')}\n      onChange={changeMethods.onChange}\n      helpText={t(\n        'Pick a nickname for how the database will display in Superset.',\n      )}\n    />\n  </>\n);\n\nexport const queryField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n}: FieldPropTypes) => (\n  <ValidatedInput\n    id=\"query_input\"\n    name=\"query_input\"\n    required={required}\n    value={db?.query_input || ''}\n    validationMethods={{ onBlur: getValidation }}\n    errorMessage={validationErrors?.query}\n    placeholder={t('e.g. param1=value1&param2=value2')}\n    label={t('Additional Parameters')}\n    onChange={changeMethods.onQueryChange}\n    helpText={t('Add additional custom parameters')}\n  />\n);\n\nexport const forceSSLField = ({\n  isEditMode,\n  changeMethods,\n  db,\n  sslForced,\n}: FieldPropTypes) => (\n  <div css={(theme: SupersetTheme) => infoTooltip(theme)}>\n    <AntdSwitch\n      disabled={sslForced && !isEditMode}\n      checked={db?.parameters?.encryption || sslForced}\n      onChange={changed => {\n        changeMethods.onParametersChange({\n          target: {\n            type: 'toggle',\n            name: 'encryption',\n            checked: true,\n            value: changed,\n          },\n        });\n      }}\n    />\n    <span css={toggleStyle}>SSL</span>\n    <InfoTooltip\n      tooltip={t('SSL Mode \"require\" will be used.')}\n      placement=\"right\"\n      viewBox=\"0 -5 24 24\"\n    />\n  </div>\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport ValidatedInput from 'src/components/Form/LabeledErrorBoundInput';\nimport { FieldPropTypes } from '.';\n\nconst FIELD_TEXT_MAP = {\n  account: {\n    helpText: t(\n      'Copy the account name of that database you are trying to connect to.',\n    ),\n    placeholder: t('e.g. world_population'),\n  },\n  warehouse: {\n    placeholder: t('e.g. compute_wh'),\n    className: 'form-group-w-50',\n  },\n  role: {\n    placeholder: t('e.g. AccountAdmin'),\n    className: 'form-group-w-50',\n  },\n};\n\nexport const validatedInputField = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n  field,\n}: FieldPropTypes) => (\n  <ValidatedInput\n    id={field}\n    name={field}\n    required={required}\n    value={db?.parameters?.[field]}\n    validationMethods={{ onBlur: getValidation }}\n    errorMessage={validationErrors?.[field]}\n    placeholder={FIELD_TEXT_MAP[field].placeholder}\n    helpText={FIELD_TEXT_MAP[field].helpText}\n    label={field}\n    onChange={changeMethods.onParametersChange}\n    className={FIELD_TEXT_MAP[field].className || field}\n  />\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { SupersetTheme, t } from '@superset-ui/core';\nimport { AntdButton, AntdSelect } from 'src/components';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport FormLabel from 'src/components/Form/FormLabel';\nimport Icons from 'src/components/Icons';\nimport { FieldPropTypes } from '.';\nimport { infoTooltip, labelMarginBottom, CredentialInfoForm } from '../styles';\n\nenum CredentialInfoOptions {\n  jsonUpload,\n  copyPaste,\n}\n\n// These are the columns that are going to be added to encrypted extra, they differ in name based\n// on the engine, however we want to use the same component for each of them. Make sure to add the\n// the engine specific name here.\nexport const encryptedCredentialsMap = {\n  gsheets: 'service_account_info',\n  bigquery: 'credentials_info',\n};\n\nconst castStringToBoolean = (optionValue: string) => optionValue === 'true';\n\nexport const EncryptedField = ({\n  changeMethods,\n  isEditMode,\n  db,\n  editNewDb,\n}: FieldPropTypes) => {\n  const [uploadOption, setUploadOption] = useState<number>(\n    CredentialInfoOptions.jsonUpload.valueOf(),\n  );\n  const [fileToUpload, setFileToUpload] = useState<string | null | undefined>(\n    null,\n  );\n  const [isPublic, setIsPublic] = useState<boolean>(true);\n  const showCredentialsInfo =\n    db?.engine === 'gsheets' ? !isEditMode && !isPublic : !isEditMode;\n  const isEncrypted = isEditMode && db?.masked_encrypted_extra !== '{}';\n  const encryptedField = db?.engine && encryptedCredentialsMap[db.engine];\n  const encryptedValue =\n    typeof db?.parameters?.[encryptedField] === 'object'\n      ? JSON.stringify(db?.parameters?.[encryptedField])\n      : db?.parameters?.[encryptedField];\n  return (\n    <CredentialInfoForm>\n      {db?.engine === 'gsheets' && (\n        <div className=\"catalog-type-select\">\n          <FormLabel\n            css={(theme: SupersetTheme) => labelMarginBottom(theme)}\n            required\n          >\n            {t('Type of Google Sheets allowed')}\n          </FormLabel>\n          <AntdSelect\n            style={{ width: '100%' }}\n            defaultValue={isEncrypted ? 'false' : 'true'}\n            onChange={(value: string) =>\n              setIsPublic(castStringToBoolean(value))\n            }\n          >\n            <AntdSelect.Option value=\"true\" key={1}>\n              {t('Publicly shared sheets only')}\n            </AntdSelect.Option>\n            <AntdSelect.Option value=\"false\" key={2}>\n              {t('Public and privately shared sheets')}\n            </AntdSelect.Option>\n          </AntdSelect>\n        </div>\n      )}\n      {showCredentialsInfo && (\n        <>\n          <FormLabel required>\n            {t('How do you want to enter service account credentials?')}\n          </FormLabel>\n          <AntdSelect\n            defaultValue={uploadOption}\n            style={{ width: '100%' }}\n            onChange={option => setUploadOption(option)}\n          >\n            <AntdSelect.Option value={CredentialInfoOptions.jsonUpload}>\n              {t('Upload JSON file')}\n            </AntdSelect.Option>\n\n            <AntdSelect.Option value={CredentialInfoOptions.copyPaste}>\n              {t('Copy and Paste JSON credentials')}\n            </AntdSelect.Option>\n          </AntdSelect>\n        </>\n      )}\n      {uploadOption === CredentialInfoOptions.copyPaste ||\n      isEditMode ||\n      editNewDb ? (\n        <div className=\"input-container\">\n          <FormLabel required>{t('Service Account')}</FormLabel>\n          <textarea\n            className=\"input-form\"\n            name={encryptedField}\n            value={encryptedValue}\n            onChange={changeMethods.onParametersChange}\n            placeholder={t(\n              'Paste content of service credentials JSON file here',\n            )}\n          />\n          <span className=\"label-paste\">\n            {t('Copy and paste the entire service account .json file here')}\n          </span>\n        </div>\n      ) : (\n        showCredentialsInfo && (\n          <div\n            className=\"input-container\"\n            css={(theme: SupersetTheme) => infoTooltip(theme)}\n          >\n            <div css={{ display: 'flex', alignItems: 'center' }}>\n              <FormLabel required>{t('Upload Credentials')}</FormLabel>\n              <InfoTooltip\n                tooltip={t(\n                  'Use the JSON file you automatically downloaded when creating your service account.',\n                )}\n                viewBox=\"0 0 24 24\"\n              />\n            </div>\n\n            {!fileToUpload && (\n              <AntdButton\n                className=\"input-upload-btn\"\n                onClick={() =>\n                  document?.getElementById('selectedFile')?.click()\n                }\n              >\n                {t('Choose File')}\n              </AntdButton>\n            )}\n            {fileToUpload && (\n              <div className=\"input-upload-current\">\n                {fileToUpload}\n                <Icons.DeleteFilled\n                  iconSize=\"m\"\n                  onClick={() => {\n                    setFileToUpload(null);\n                    changeMethods.onParametersChange({\n                      target: {\n                        name: encryptedField,\n                        value: '',\n                      },\n                    });\n                  }}\n                />\n              </div>\n            )}\n\n            <input\n              id=\"selectedFile\"\n              accept=\".json\"\n              className=\"input-upload\"\n              type=\"file\"\n              onChange={async event => {\n                let file;\n                if (event.target.files) {\n                  file = event.target.files[0];\n                }\n                setFileToUpload(file?.name);\n                changeMethods.onParametersChange({\n                  target: {\n                    type: null,\n                    name: encryptedField,\n                    value: await file?.text(),\n                    checked: false,\n                  },\n                });\n                (\n                  document.getElementById('selectedFile') as HTMLInputElement\n                ).value = null as any;\n              }}\n            />\n          </div>\n        )\n      )}\n    </CredentialInfoForm>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FormEvent } from 'react';\nimport { SupersetTheme, JsonObject } from '@superset-ui/core';\nimport { InputProps } from 'antd/lib/input';\nimport { Form } from 'src/components/Form';\nimport {\n  accessTokenField,\n  databaseField,\n  displayField,\n  forceSSLField,\n  hostField,\n  httpPath,\n  passwordField,\n  portField,\n  queryField,\n  usernameField,\n} from './CommonParameters';\nimport { validatedInputField } from './ValidatedInputField';\nimport { EncryptedField } from './EncryptedField';\nimport { TableCatalog } from './TableCatalog';\nimport { formScrollableStyles, validatedFormStyles } from '../styles';\nimport { DatabaseForm, DatabaseObject } from '../../types';\n\nexport const FormFieldOrder = [\n  'host',\n  'port',\n  'database',\n  'username',\n  'password',\n  'access_token',\n  'http_path',\n  'database_name',\n  'credentials_info',\n  'service_account_info',\n  'catalog',\n  'query',\n  'encryption',\n  'account',\n  'warehouse',\n  'role',\n];\n\nexport interface FieldPropTypes {\n  required: boolean;\n  hasTooltip?: boolean;\n  tooltipText?: (value: any) => string;\n  placeholder?: string;\n  onParametersChange: (value: any) => string;\n  onParametersUploadFileChange: (value: any) => string;\n  changeMethods: { onParametersChange: (value: any) => string } & {\n    onChange: (value: any) => string;\n  } & {\n    onQueryChange: (value: any) => string;\n  } & { onParametersUploadFileChange: (value: any) => string } & {\n    onAddTableCatalog: () => void;\n    onRemoveTableCatalog: (idx: number) => void;\n  } & {\n    onExtraInputChange: (value: any) => void;\n    onSSHTunnelParametersChange: (value: any) => string;\n  };\n  validationErrors: JsonObject | null;\n  getValidation: () => void;\n  db?: DatabaseObject;\n  field: string;\n  isEditMode?: boolean;\n  sslForced?: boolean;\n  defaultDBName?: string;\n  editNewDb?: boolean;\n}\n\nconst FORM_FIELD_MAP = {\n  host: hostField,\n  http_path: httpPath,\n  port: portField,\n  database: databaseField,\n  username: usernameField,\n  password: passwordField,\n  access_token: accessTokenField,\n  database_name: displayField,\n  query: queryField,\n  encryption: forceSSLField,\n  credentials_info: EncryptedField,\n  service_account_info: EncryptedField,\n  catalog: TableCatalog,\n  warehouse: validatedInputField,\n  role: validatedInputField,\n  account: validatedInputField,\n};\n\ninterface DatabaseConnectionFormProps {\n  isEditMode?: boolean;\n  sslForced: boolean;\n  editNewDb?: boolean;\n  dbModel: DatabaseForm;\n  db: Partial<DatabaseObject> | null;\n  onParametersChange: (\n    event: FormEvent<InputProps> | { target: HTMLInputElement },\n  ) => void;\n  onChange: (\n    event: FormEvent<InputProps> | { target: HTMLInputElement },\n  ) => void;\n  onQueryChange: (\n    event: FormEvent<InputProps> | { target: HTMLInputElement },\n  ) => void;\n  onParametersUploadFileChange?: (\n    event: FormEvent<InputProps> | { target: HTMLInputElement },\n  ) => void;\n  onExtraInputChange: (\n    event: FormEvent<InputProps> | { target: HTMLInputElement },\n  ) => void;\n  onAddTableCatalog: () => void;\n  onRemoveTableCatalog: (idx: number) => void;\n  validationErrors: JsonObject | null;\n  getValidation: () => void;\n  getPlaceholder?: (field: string) => string | undefined;\n}\n\nconst DatabaseConnectionForm = ({\n  dbModel: { parameters },\n  db,\n  editNewDb,\n  getPlaceholder,\n  getValidation,\n  isEditMode = false,\n  onAddTableCatalog,\n  onChange,\n  onExtraInputChange,\n  onParametersChange,\n  onParametersUploadFileChange,\n  onQueryChange,\n  onRemoveTableCatalog,\n  sslForced,\n  validationErrors,\n}: DatabaseConnectionFormProps) => (\n  <Form>\n    <div\n      // @ts-ignore\n      css={(theme: SupersetTheme) => [\n        formScrollableStyles,\n        validatedFormStyles(theme),\n      ]}\n    >\n      {parameters &&\n        FormFieldOrder.filter(\n          (key: string) =>\n            Object.keys(parameters.properties).includes(key) ||\n            key === 'database_name',\n        ).map(field =>\n          FORM_FIELD_MAP[field]({\n            required: parameters.required?.includes(field),\n            changeMethods: {\n              onParametersChange,\n              onChange,\n              onQueryChange,\n              onParametersUploadFileChange,\n              onAddTableCatalog,\n              onRemoveTableCatalog,\n              onExtraInputChange,\n            },\n            validationErrors,\n            getValidation,\n            db,\n            key: field,\n            field,\n            isEditMode,\n            sslForced,\n            editNewDb,\n            placeholder: getPlaceholder ? getPlaceholder(field) : undefined,\n          }),\n        )}\n    </div>\n  </Form>\n);\nexport const FormFieldMap = FORM_FIELD_MAP;\n\nexport default DatabaseConnectionForm;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { css, SupersetTheme, t } from '@superset-ui/core';\nimport ValidatedInput from 'src/components/Form/LabeledErrorBoundInput';\nimport FormLabel from 'src/components/Form/FormLabel';\nimport Icons from 'src/components/Icons';\nimport { FieldPropTypes } from '.';\nimport { StyledFooterButton, StyledCatalogTable } from '../styles';\nimport { CatalogObject } from '../../types';\n\nexport const TableCatalog = ({\n  required,\n  changeMethods,\n  getValidation,\n  validationErrors,\n  db,\n}: FieldPropTypes) => {\n  const tableCatalog = db?.catalog || [];\n  const catalogError = validationErrors || {};\n  return (\n    <StyledCatalogTable>\n      <h4 className=\"gsheet-title\">\n        {t('Connect Google Sheets as tables to this database')}\n      </h4>\n      <div>\n        {tableCatalog?.map((sheet: CatalogObject, idx: number) => (\n          <>\n            <FormLabel className=\"catalog-label\" required>\n              {t('Google Sheet Name and URL')}\n            </FormLabel>\n            <div className=\"catalog-name\">\n              <ValidatedInput\n                className=\"catalog-name-input\"\n                required={required}\n                validationMethods={{ onBlur: getValidation }}\n                errorMessage={catalogError[idx]?.name}\n                placeholder={t('Enter a name for this sheet')}\n                onChange={(e: { target: { value: any } }) => {\n                  changeMethods.onParametersChange({\n                    target: {\n                      type: `catalog-${idx}`,\n                      name: 'name',\n                      value: e.target.value,\n                    },\n                  });\n                }}\n                value={sheet.name}\n              />\n              {tableCatalog?.length > 1 && (\n                <Icons.CloseOutlined\n                  css={(theme: SupersetTheme) => css`\n                    align-self: center;\n                    background: ${theme.colors.grayscale.light4};\n                    margin: 5px 5px 8px 5px;\n\n                    &.anticon > * {\n                      line-height: 0;\n                    }\n                  `}\n                  iconSize=\"m\"\n                  onClick={() => changeMethods.onRemoveTableCatalog(idx)}\n                />\n              )}\n            </div>\n            <ValidatedInput\n              className=\"catalog-name-url\"\n              required={required}\n              validationMethods={{ onBlur: getValidation }}\n              errorMessage={catalogError[idx]?.url}\n              placeholder={t('Paste the shareable Google Sheet URL here')}\n              onChange={(e: { target: { value: any } }) =>\n                changeMethods.onParametersChange({\n                  target: {\n                    type: `catalog-${idx}`,\n                    name: 'value',\n                    value: e.target.value,\n                  },\n                })\n              }\n              value={sheet.value}\n            />\n          </>\n        ))}\n        <StyledFooterButton\n          className=\"catalog-add-btn\"\n          onClick={() => {\n            changeMethods.onAddTableCatalog();\n          }}\n        >\n          + {t('Add sheet')}\n        </StyledFooterButton>\n      </div>\n    </StyledCatalogTable>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { getDatabaseDocumentationLinks } from 'src/views/CRUD/hooks';\nimport { UploadFile } from 'antd/lib/upload/interface';\nimport { t } from '@superset-ui/core';\nimport {\n  EditHeaderTitle,\n  EditHeaderSubtitle,\n  StyledFormHeader,\n  StyledStickyHeader,\n} from './styles';\nimport { DatabaseForm, DatabaseObject } from '../types';\n\nconst supersetTextDocs = getDatabaseDocumentationLinks();\n\nexport const DOCUMENTATION_LINK = supersetTextDocs\n  ? supersetTextDocs.support\n  : 'https://superset.apache.org/docs/databases/installing-database-drivers';\n\nconst irregularDocumentationLinks = {\n  postgresql: 'https://superset.apache.org/docs/databases/postgres',\n  mssql: 'https://superset.apache.org/docs/databases/sql-server',\n  gsheets: 'https://superset.apache.org/docs/databases/google-sheets',\n};\n\nconst documentationLink = (engine: string | undefined) => {\n  if (!engine) return null;\n\n  if (supersetTextDocs) {\n    // override doc link for superset_txt yml\n    return supersetTextDocs[engine] || supersetTextDocs.default;\n  }\n\n  if (!irregularDocumentationLinks[engine]) {\n    return `https://superset.apache.org/docs/databases/${engine}`;\n  }\n  return irregularDocumentationLinks[engine];\n};\n\nconst ModalHeader = ({\n  isLoading,\n  isEditMode,\n  useSqlAlchemyForm,\n  hasConnectedDb,\n  db,\n  dbName,\n  dbModel,\n  editNewDb,\n  fileList,\n}: {\n  isLoading: boolean;\n  isEditMode: boolean;\n  useSqlAlchemyForm: boolean;\n  hasConnectedDb: boolean;\n  db: Partial<DatabaseObject> | null;\n  dbName: string;\n  dbModel: DatabaseForm;\n  editNewDb?: boolean;\n  fileList?: UploadFile[];\n  passwordFields?: string[];\n  needsOverwriteConfirm?: boolean;\n}) => {\n  const fileCheck = fileList && fileList?.length > 0;\n\n  const isEditHeader = (\n    <StyledFormHeader>\n      <EditHeaderTitle>{db?.backend}</EditHeaderTitle>\n      <EditHeaderSubtitle>{dbName}</EditHeaderSubtitle>\n    </StyledFormHeader>\n  );\n\n  const useSqlAlchemyFormHeader = (\n    <StyledFormHeader>\n      <p className=\"helper-top\">\n        {t('STEP %(stepCurr)s OF %(stepLast)s', {\n          stepCurr: 2,\n          stepLast: 2,\n        })}\n      </p>\n      <h4>{t('Enter Primary Credentials')}</h4>\n      <p className=\"helper-bottom\">\n        {t('Need help? Learn how to connect your database')}{' '}\n        <a\n          href={supersetTextDocs?.default || DOCUMENTATION_LINK}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {t('here')}\n        </a>\n        .\n      </p>\n    </StyledFormHeader>\n  );\n\n  const hasConnectedDbHeader = (\n    <StyledStickyHeader>\n      <StyledFormHeader>\n        <p className=\"helper-top\">\n          {t('STEP %(stepCurr)s OF %(stepLast)s', {\n            stepCurr: 3,\n            stepLast: 3,\n          })}\n        </p>\n        <h4 className=\"step-3-text\">{t('Database connected')}</h4>\n        <p className=\"subheader-text\">\n          {t(`Create a dataset to begin visualizing your data as a chart or go to\n          SQL Lab to query your data.`)}\n        </p>\n      </StyledFormHeader>\n    </StyledStickyHeader>\n  );\n\n  const hasDbHeader = (\n    <StyledStickyHeader>\n      <StyledFormHeader>\n        <p className=\"helper-top\">\n          {t('STEP %(stepCurr)s OF %(stepLast)s', {\n            stepCurr: 2,\n            stepLast: 3,\n          })}\n        </p>\n        <h4>\n          {t('Enter the required %(dbModelName)s credentials', {\n            dbModelName: dbModel.name,\n          })}\n        </h4>\n        <p className=\"helper-bottom\">\n          {t('Need help? Learn more about')}{' '}\n          <a\n            href={documentationLink(db?.engine)}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {t('connecting to %(dbModelName)s.', { dbModelName: dbModel.name })}\n            .\n          </a>\n        </p>\n      </StyledFormHeader>\n    </StyledStickyHeader>\n  );\n\n  const noDbHeader = (\n    <StyledFormHeader>\n      <div className=\"select-db\">\n        <p className=\"helper-top\">\n          {t('STEP %(stepCurr)s OF %(stepLast)s', {\n            stepCurr: 1,\n            stepLast: 3,\n          })}\n        </p>\n        <h4>{t('Select a database to connect')}</h4>\n      </div>\n    </StyledFormHeader>\n  );\n\n  const importDbHeader = (\n    <StyledStickyHeader>\n      <StyledFormHeader>\n        <p className=\"helper-top\">\n          {t('STEP %(stepCurr)s OF %(stepLast)s', {\n            stepCurr: 2,\n            stepLast: 2,\n          })}\n        </p>\n        <h4>\n          {t('Enter the required %(dbModelName)s credentials', {\n            dbModelName: dbModel.name,\n          })}\n        </h4>\n        <p className=\"helper-bottom\">{fileCheck ? fileList[0].name : ''}</p>\n      </StyledFormHeader>\n    </StyledStickyHeader>\n  );\n\n  if (fileCheck) return importDbHeader;\n  if (isLoading) return <></>;\n  if (isEditMode) return isEditHeader;\n  if (useSqlAlchemyForm) return useSqlAlchemyFormHeader;\n  if (hasConnectedDb && !editNewDb) return hasConnectedDbHeader;\n  if (db || editNewDb) return hasDbHeader;\n\n  return noDbHeader;\n};\n\nexport default ModalHeader;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { EventHandler, ChangeEvent, useState } from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { AntdForm, Col, Row } from 'src/components';\nimport { Form, FormLabel } from 'src/components/Form';\nimport { Radio } from 'src/components/Radio';\nimport { Input, TextArea } from 'src/components/Input';\nimport { Input as AntdInput, Tooltip } from 'antd';\nimport { EyeInvisibleOutlined, EyeOutlined } from '@ant-design/icons';\nimport { DatabaseObject } from '../types';\nimport { AuthType } from '.';\n\nconst StyledDiv = styled.div`\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\n  label {\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    text-transform: uppercase;\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n`;\n\nconst StyledRow = styled(Row)`\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0 !important;\n`;\n\nconst StyledInputPassword = styled(AntdInput.Password)`\n  margin: ${({ theme }) => `${theme.gridUnit}px 0 ${theme.gridUnit * 2}px`};\n`;\n\nconst SSHTunnelForm = ({\n  db,\n  onSSHTunnelParametersChange,\n  setSSHTunnelLoginMethod,\n}: {\n  db: DatabaseObject | null;\n  onSSHTunnelParametersChange: EventHandler<\n    ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  >;\n  setSSHTunnelLoginMethod: (method: AuthType) => void;\n}) => {\n  const [usePassword, setUsePassword] = useState<AuthType>(AuthType.password);\n\n  return (\n    <Form>\n      <StyledRow gutter={16}>\n        <Col xs={24} md={12}>\n          <StyledDiv>\n            <FormLabel htmlFor=\"server_address\" required>\n              {t('SSH Host')}\n            </FormLabel>\n            <Input\n              name=\"server_address\"\n              type=\"text\"\n              placeholder={t('e.g. 127.0.0.1')}\n              value={db?.ssh_tunnel?.server_address || ''}\n              onChange={onSSHTunnelParametersChange}\n              data-test=\"ssh-tunnel-server_address-input\"\n            />\n          </StyledDiv>\n        </Col>\n        <Col xs={24} md={12}>\n          <StyledDiv>\n            <FormLabel htmlFor=\"server_port\" required>\n              {t('SSH Port')}\n            </FormLabel>\n            <Input\n              name=\"server_port\"\n              type=\"text\"\n              placeholder={t('22')}\n              value={db?.ssh_tunnel?.server_port || ''}\n              onChange={onSSHTunnelParametersChange}\n              data-test=\"ssh-tunnel-server_port-input\"\n            />\n          </StyledDiv>\n        </Col>\n      </StyledRow>\n      <StyledRow gutter={16}>\n        <Col xs={24}>\n          <StyledDiv>\n            <FormLabel htmlFor=\"username\" required>\n              {t('Username')}\n            </FormLabel>\n            <Input\n              name=\"username\"\n              type=\"text\"\n              placeholder={t('e.g. Analytics')}\n              value={db?.ssh_tunnel?.username || ''}\n              onChange={onSSHTunnelParametersChange}\n              data-test=\"ssh-tunnel-username-input\"\n            />\n          </StyledDiv>\n        </Col>\n      </StyledRow>\n      <StyledRow gutter={16}>\n        <Col xs={24}>\n          <StyledDiv>\n            <FormLabel htmlFor=\"use_password\" required>\n              {t('Login with')}\n            </FormLabel>\n            <StyledFormItem name=\"use_password\" initialValue={usePassword}>\n              <Radio.Group\n                onChange={({ target: { value } }) => {\n                  setUsePassword(value);\n                  setSSHTunnelLoginMethod(value);\n                }}\n              >\n                <Radio\n                  value={AuthType.password}\n                  data-test=\"ssh-tunnel-use_password-radio\"\n                >\n                  {t('Password')}\n                </Radio>\n                <Radio\n                  value={AuthType.privateKey}\n                  data-test=\"ssh-tunnel-use_private_key-radio\"\n                >\n                  {t('Private Key & Password')}\n                </Radio>\n              </Radio.Group>\n            </StyledFormItem>\n          </StyledDiv>\n        </Col>\n      </StyledRow>\n      {usePassword === AuthType.password && (\n        <StyledRow gutter={16}>\n          <Col xs={24}>\n            <StyledDiv>\n              <FormLabel htmlFor=\"password\" required>\n                {t('SSH Password')}\n              </FormLabel>\n              <StyledInputPassword\n                name=\"password\"\n                placeholder={t('e.g. ********')}\n                value={db?.ssh_tunnel?.password || ''}\n                onChange={onSSHTunnelParametersChange}\n                data-test=\"ssh-tunnel-password-input\"\n                iconRender={visible =>\n                  visible ? (\n                    <Tooltip title=\"Hide password.\">\n                      <EyeInvisibleOutlined />\n                    </Tooltip>\n                  ) : (\n                    <Tooltip title=\"Show password.\">\n                      <EyeOutlined />\n                    </Tooltip>\n                  )\n                }\n                role=\"textbox\"\n              />\n            </StyledDiv>\n          </Col>\n        </StyledRow>\n      )}\n      {usePassword === AuthType.privateKey && (\n        <>\n          <StyledRow gutter={16}>\n            <Col xs={24}>\n              <StyledDiv>\n                <FormLabel htmlFor=\"private_key\" required>\n                  {t('Private Key')}\n                </FormLabel>\n                <TextArea\n                  name=\"private_key\"\n                  placeholder={t('Paste Private Key here')}\n                  value={db?.ssh_tunnel?.private_key || ''}\n                  onChange={onSSHTunnelParametersChange}\n                  data-test=\"ssh-tunnel-private_key-input\"\n                  rows={4}\n                />\n              </StyledDiv>\n            </Col>\n          </StyledRow>\n          <StyledRow gutter={16}>\n            <Col xs={24}>\n              <StyledDiv>\n                <FormLabel htmlFor=\"private_key_password\" required>\n                  {t('Private Key Password')}\n                </FormLabel>\n                <StyledInputPassword\n                  name=\"private_key_password\"\n                  placeholder={t('e.g. ********')}\n                  value={db?.ssh_tunnel?.private_key_password || ''}\n                  onChange={onSSHTunnelParametersChange}\n                  data-test=\"ssh-tunnel-private_key_password-input\"\n                  iconRender={visible =>\n                    visible ? (\n                      <Tooltip title=\"Hide password.\">\n                        <EyeInvisibleOutlined />\n                      </Tooltip>\n                    ) : (\n                      <Tooltip title=\"Show password.\">\n                        <EyeOutlined />\n                      </Tooltip>\n                    )\n                  }\n                  role=\"textbox\"\n                />\n              </StyledDiv>\n            </Col>\n          </StyledRow>\n        </>\n      )}\n    </Form>\n  );\n};\nexport default SSHTunnelForm;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, SupersetTheme, SwitchProps } from '@superset-ui/core';\nimport { AntdSwitch } from 'src/components';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport { isEmpty } from 'lodash';\nimport { ActionType } from '.';\nimport { infoTooltip, toggleStyle } from './styles';\n\nconst SSHTunnelSwitch = ({\n  isEditMode,\n  dbFetched,\n  useSSHTunneling,\n  setUseSSHTunneling,\n  setDB,\n  isSSHTunneling,\n}: SwitchProps) =>\n  isSSHTunneling ? (\n    <div css={(theme: SupersetTheme) => infoTooltip(theme)}>\n      <AntdSwitch\n        disabled={isEditMode && !isEmpty(dbFetched?.ssh_tunnel)}\n        checked={useSSHTunneling}\n        onChange={changed => {\n          setUseSSHTunneling(changed);\n          if (!changed) {\n            setDB({\n              type: ActionType.removeSSHTunnelConfig,\n            });\n          }\n        }}\n        data-test=\"ssh-tunnel-switch\"\n      />\n      <span css={toggleStyle}>{t('SSH Tunnel')}</span>\n      <InfoTooltip\n        tooltip={t('SSH Tunnel configuration parameters')}\n        placement=\"right\"\n        viewBox=\"0 -5 24 24\"\n      />\n    </div>\n  ) : null;\nexport default SSHTunnelSwitch;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  t,\n  styled,\n  SupersetTheme,\n  FeatureFlag,\n  isFeatureEnabled,\n  getExtensionsRegistry,\n} from '@superset-ui/core';\nimport React, {\n  FunctionComponent,\n  useEffect,\n  useRef,\n  useState,\n  useReducer,\n  Reducer,\n} from 'react';\nimport { setItem, LocalStorageKeys } from 'src/utils/localStorageHelpers';\nimport { UploadChangeParam, UploadFile } from 'antd/lib/upload/interface';\nimport Tabs from 'src/components/Tabs';\nimport { AntdSelect, Upload } from 'src/components';\nimport Alert from 'src/components/Alert';\nimport Modal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport IconButton from 'src/components/IconButton';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport ValidatedInput from 'src/components/Form/LabeledErrorBoundInput';\nimport ErrorMessageWithStackTrace from 'src/components/ErrorMessage/ErrorMessageWithStackTrace';\nimport ErrorAlert from 'src/components/ImportModal/ErrorAlert';\nimport {\n  testDatabaseConnection,\n  useSingleViewResource,\n  useAvailableDatabases,\n  useDatabaseValidation,\n  getDatabaseImages,\n  getConnectionAlert,\n  useImportResource,\n} from 'src/views/CRUD/hooks';\nimport { useCommonConf } from 'src/features/databases/state';\nimport Loading from 'src/components/Loading';\nimport { isEmpty, pick } from 'lodash';\nimport {\n  DatabaseObject,\n  DatabaseForm,\n  CONFIGURATION_METHOD,\n  CatalogObject,\n  Engines,\n  ExtraJson,\n} from '../types';\nimport ExtraOptions from './ExtraOptions';\nimport SqlAlchemyForm from './SqlAlchemyForm';\nimport DatabaseConnectionForm from './DatabaseConnectionForm';\nimport {\n  antDAlertStyles,\n  antdWarningAlertStyles,\n  StyledAlertMargin,\n  antDModalNoPaddingStyles,\n  antDModalStyles,\n  antDTabsStyles,\n  buttonLinkStyles,\n  importDbButtonLinkStyles,\n  alchemyButtonLinkStyles,\n  TabHeader,\n  formHelperStyles,\n  formStyles,\n  StyledAlignment,\n  SelectDatabaseStyles,\n  infoTooltip,\n  StyledFooterButton,\n  StyledStickyHeader,\n  formScrollableStyles,\n  StyledUploadWrapper,\n} from './styles';\nimport ModalHeader, { DOCUMENTATION_LINK } from './ModalHeader';\nimport SSHTunnelForm from './SSHTunnelForm';\nimport SSHTunnelSwitch from './SSHTunnelSwitch';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst DEFAULT_EXTRA = JSON.stringify({ allows_virtual_table_explore: true });\n\nconst engineSpecificAlertMapping = {\n  [Engines.GSheet]: {\n    message: 'Why do I need to create a database?',\n    description:\n      'To begin using your Google Sheets, you need to create a database first. ' +\n      'Databases are used as a way to identify ' +\n      'your data so that it can be queried and visualized. This ' +\n      'database will hold all of your individual Google Sheets ' +\n      'you choose to connect here.',\n  },\n};\n\nconst TabsStyled = styled(Tabs)`\n  .ant-tabs-content {\n    display: flex;\n    width: 100%;\n    overflow: inherit;\n\n    & > .ant-tabs-tabpane {\n      position: relative;\n    }\n  }\n`;\n\nconst ErrorAlertContainer = styled.div`\n  ${({ theme }) => `\n    margin: ${theme.gridUnit * 8}px ${theme.gridUnit * 4}px;\n  `};\n`;\n\nconst SSHTunnelContainer = styled.div`\n  ${({ theme }) => `\n    padding: 0px ${theme.gridUnit * 4}px;\n  `};\n`;\n\ninterface DatabaseModalProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  onDatabaseAdd?: (database?: DatabaseObject) => void;\n  onHide: () => void;\n  show: boolean;\n  databaseId: number | undefined; // If included, will go into edit mode\n  dbEngine: string | undefined; // if included goto step 2 with engine already set\n  history?: any;\n}\n\nexport enum ActionType {\n  addTableCatalogSheet,\n  configMethodChange,\n  dbSelected,\n  editorChange,\n  extraEditorChange,\n  extraInputChange,\n  fetched,\n  inputChange,\n  parametersChange,\n  queryChange,\n  removeTableCatalogSheet,\n  reset,\n  textChange,\n  parametersSSHTunnelChange,\n  setSSHTunnelLoginMethod,\n  removeSSHTunnelConfig,\n}\n\nexport enum AuthType {\n  password,\n  privateKey,\n}\n\ninterface DBReducerPayloadType {\n  target?: string;\n  name: string;\n  json?: string;\n  type?: string;\n  checked?: boolean;\n  value?: string;\n}\n\nexport type DBReducerActionType =\n  | {\n      type:\n        | ActionType.extraEditorChange\n        | ActionType.extraInputChange\n        | ActionType.textChange\n        | ActionType.queryChange\n        | ActionType.inputChange\n        | ActionType.editorChange\n        | ActionType.parametersChange\n        | ActionType.parametersSSHTunnelChange;\n      payload: DBReducerPayloadType;\n    }\n  | {\n      type: ActionType.fetched;\n      payload: Partial<DatabaseObject>;\n    }\n  | {\n      type: ActionType.dbSelected;\n      payload: {\n        database_name?: string;\n        engine?: string;\n        configuration_method: CONFIGURATION_METHOD;\n        engine_information?: {};\n        driver?: string;\n      };\n    }\n  | {\n      type:\n        | ActionType.reset\n        | ActionType.addTableCatalogSheet\n        | ActionType.removeSSHTunnelConfig;\n    }\n  | {\n      type: ActionType.removeTableCatalogSheet;\n      payload: {\n        indexToDelete: number;\n      };\n    }\n  | {\n      type: ActionType.configMethodChange;\n      payload: {\n        database_name?: string;\n        engine?: string;\n        configuration_method: CONFIGURATION_METHOD;\n      };\n    }\n  | {\n      type: ActionType.setSSHTunnelLoginMethod;\n      payload: {\n        login_method: AuthType;\n      };\n    };\n\nconst StyledBtns = styled.div`\n  margin-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  margin-left: ${({ theme }) => theme.gridUnit * 3}px;\n`;\n\nexport function dbReducer(\n  state: Partial<DatabaseObject> | null,\n  action: DBReducerActionType,\n): Partial<DatabaseObject> | null {\n  const trimmedState = {\n    ...(state || {}),\n  };\n  let query = {};\n  let query_input = '';\n  let parametersCatalog;\n  let actionPayloadJson;\n  const extraJson: ExtraJson = JSON.parse(trimmedState.extra || '{}');\n\n  switch (action.type) {\n    case ActionType.extraEditorChange:\n      // \"extra\" payload in state is a string\n      try {\n        // we don't want to stringify encoded strings twice\n        actionPayloadJson = JSON.parse(action.payload.json || '{}');\n      } catch (e) {\n        actionPayloadJson = action.payload.json;\n      }\n      return {\n        ...trimmedState,\n        extra: JSON.stringify({\n          ...extraJson,\n          [action.payload.name]: actionPayloadJson,\n        }),\n      };\n    case ActionType.extraInputChange:\n      // \"extra\" payload in state is a string\n\n      if (\n        action.payload.name === 'schema_cache_timeout' ||\n        action.payload.name === 'table_cache_timeout'\n      ) {\n        return {\n          ...trimmedState,\n          extra: JSON.stringify({\n            ...extraJson,\n            metadata_cache_timeout: {\n              ...extraJson?.metadata_cache_timeout,\n              [action.payload.name]: action.payload.value,\n            },\n          }),\n        };\n      }\n      if (action.payload.name === 'schemas_allowed_for_file_upload') {\n        return {\n          ...trimmedState,\n          extra: JSON.stringify({\n            ...extraJson,\n            schemas_allowed_for_file_upload: (action.payload.value || '')\n              .split(',')\n              .filter(schema => schema !== ''),\n          }),\n        };\n      }\n      if (action.payload.name === 'http_path') {\n        return {\n          ...trimmedState,\n          extra: JSON.stringify({\n            ...extraJson,\n            engine_params: {\n              connect_args: {\n                [action.payload.name]: action.payload.value?.trim(),\n              },\n            },\n          }),\n        };\n      }\n      return {\n        ...trimmedState,\n        extra: JSON.stringify({\n          ...extraJson,\n          [action.payload.name]:\n            action.payload.type === 'checkbox'\n              ? action.payload.checked\n              : action.payload.value,\n        }),\n      };\n    case ActionType.inputChange:\n      if (action.payload.type === 'checkbox') {\n        return {\n          ...trimmedState,\n          [action.payload.name]: action.payload.checked,\n        };\n      }\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    case ActionType.parametersChange:\n      // catalog params will always have a catalog state for\n      // dbs that use a catalog, i.e., gsheets, even if the\n      // fields are empty strings\n      if (\n        action.payload.type?.startsWith('catalog') &&\n        trimmedState.catalog !== undefined\n      ) {\n        // Formatting wrapping google sheets table catalog\n        const catalogCopy: CatalogObject[] = [...trimmedState.catalog];\n        const idx = action.payload.type?.split('-')[1];\n        const catalogToUpdate: CatalogObject = catalogCopy[idx] || {};\n        catalogToUpdate[action.payload.name] = action.payload.value;\n\n        // insert updated catalog to existing state\n        catalogCopy.splice(parseInt(idx, 10), 1, catalogToUpdate);\n\n        // format catalog for state\n        // eslint-disable-next-line array-callback-return\n        parametersCatalog = catalogCopy.reduce((obj, item: any) => {\n          const catalog = { ...obj };\n          catalog[item.name] = item.value;\n          return catalog;\n        }, {});\n\n        return {\n          ...trimmedState,\n          catalog: catalogCopy,\n          parameters: {\n            ...trimmedState.parameters,\n            catalog: parametersCatalog,\n          },\n        };\n      }\n      return {\n        ...trimmedState,\n        parameters: {\n          ...trimmedState.parameters,\n          [action.payload.name]: action.payload.value,\n        },\n      };\n\n    case ActionType.parametersSSHTunnelChange:\n      return {\n        ...trimmedState,\n        ssh_tunnel: {\n          ...trimmedState.ssh_tunnel,\n          [action.payload.name]: action.payload.value,\n        },\n      };\n    case ActionType.setSSHTunnelLoginMethod: {\n      let ssh_tunnel = {};\n      if (trimmedState?.ssh_tunnel) {\n        // remove any attributes that are considered sensitive\n        ssh_tunnel = pick(trimmedState.ssh_tunnel, [\n          'id',\n          'server_address',\n          'server_port',\n          'username',\n        ]);\n      }\n      if (action.payload.login_method === AuthType.privateKey) {\n        return {\n          ...trimmedState,\n          ssh_tunnel: {\n            private_key: trimmedState?.ssh_tunnel?.private_key,\n            private_key_password:\n              trimmedState?.ssh_tunnel?.private_key_password,\n            ...ssh_tunnel,\n          },\n        };\n      }\n      if (action.payload.login_method === AuthType.password) {\n        return {\n          ...trimmedState,\n          ssh_tunnel: {\n            password: trimmedState?.ssh_tunnel?.password,\n            ...ssh_tunnel,\n          },\n        };\n      }\n      return {\n        ...trimmedState,\n      };\n    }\n    case ActionType.removeSSHTunnelConfig:\n      return {\n        ...trimmedState,\n        ssh_tunnel: undefined,\n      };\n    case ActionType.addTableCatalogSheet:\n      if (trimmedState.catalog !== undefined) {\n        return {\n          ...trimmedState,\n          catalog: [...trimmedState.catalog, { name: '', value: '' }],\n        };\n      }\n      return {\n        ...trimmedState,\n        catalog: [{ name: '', value: '' }],\n      };\n    case ActionType.removeTableCatalogSheet:\n      trimmedState.catalog?.splice(action.payload.indexToDelete, 1);\n      return {\n        ...trimmedState,\n      };\n    case ActionType.editorChange:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.json,\n      };\n    case ActionType.queryChange:\n      return {\n        ...trimmedState,\n        parameters: {\n          ...trimmedState.parameters,\n          query: Object.fromEntries(new URLSearchParams(action.payload.value)),\n        },\n        query_input: action.payload.value,\n      };\n    case ActionType.textChange:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    case ActionType.fetched:\n      // convert query to a string and store in query_input\n      query = action.payload?.parameters?.query || {};\n      query_input = Object.entries(query)\n        .map(([key, value]) => `${key}=${value}`)\n        .join('&');\n\n      if (\n        action.payload.masked_encrypted_extra &&\n        action.payload.configuration_method ===\n          CONFIGURATION_METHOD.DYNAMIC_FORM\n      ) {\n        // \"extra\" payload from the api is a string\n        const extraJsonPayload: ExtraJson = {\n          ...JSON.parse((action.payload.extra as string) || '{}'),\n        };\n\n        const payloadCatalog = extraJsonPayload.engine_params?.catalog;\n\n        const engineRootCatalog = Object.entries(payloadCatalog || {}).map(\n          ([name, value]: string[]) => ({ name, value }),\n        );\n\n        return {\n          ...action.payload,\n          engine: action.payload.backend || trimmedState.engine,\n          configuration_method: action.payload.configuration_method,\n          catalog: engineRootCatalog,\n          parameters: {\n            ...(action.payload.parameters || trimmedState.parameters),\n            catalog: payloadCatalog,\n          },\n          query_input,\n        };\n      }\n      return {\n        ...action.payload,\n        masked_encrypted_extra: action.payload.masked_encrypted_extra || '',\n        engine: action.payload.backend || trimmedState.engine,\n        configuration_method: action.payload.configuration_method,\n        parameters: action.payload.parameters || trimmedState.parameters,\n        ssh_tunnel: action.payload.ssh_tunnel || trimmedState.ssh_tunnel,\n        query_input,\n      };\n\n    case ActionType.dbSelected:\n      // set initial state for blank form\n      return {\n        ...action.payload,\n        extra: DEFAULT_EXTRA,\n        expose_in_sqllab: true,\n      };\n    case ActionType.configMethodChange:\n      return {\n        ...action.payload,\n      };\n\n    case ActionType.reset:\n    default:\n      return null;\n  }\n}\n\nconst DEFAULT_TAB_KEY = '1';\n\nconst DatabaseModal: FunctionComponent<DatabaseModalProps> = ({\n  addDangerToast,\n  addSuccessToast,\n  onDatabaseAdd,\n  onHide,\n  show,\n  databaseId,\n  dbEngine,\n  history,\n}) => {\n  const [db, setDB] = useReducer<\n    Reducer<Partial<DatabaseObject> | null, DBReducerActionType>\n  >(dbReducer, null);\n  // Database fetch logic\n  const {\n    state: { loading: dbLoading, resource: dbFetched, error: dbErrors },\n    fetchResource,\n    createResource,\n    updateResource,\n    clearError,\n  } = useSingleViewResource<DatabaseObject>(\n    'database',\n    t('database'),\n    addDangerToast,\n    'connection',\n  );\n\n  const [tabKey, setTabKey] = useState<string>(DEFAULT_TAB_KEY);\n  const [availableDbs, getAvailableDbs] = useAvailableDatabases();\n  const [validationErrors, getValidation, setValidationErrors] =\n    useDatabaseValidation();\n  const [hasConnectedDb, setHasConnectedDb] = useState<boolean>(false);\n  const [showCTAbtns, setShowCTAbtns] = useState(false);\n  const [dbName, setDbName] = useState('');\n  const [editNewDb, setEditNewDb] = useState<boolean>(false);\n  const [isLoading, setLoading] = useState<boolean>(false);\n  const [testInProgress, setTestInProgress] = useState<boolean>(false);\n  const [passwords, setPasswords] = useState<Record<string, string>>({});\n  const [sshTunnelPasswords, setSSHTunnelPasswords] = useState<\n    Record<string, string>\n  >({});\n  const [sshTunnelPrivateKeys, setSSHTunnelPrivateKeys] = useState<\n    Record<string, string>\n  >({});\n  const [sshTunnelPrivateKeyPasswords, setSSHTunnelPrivateKeyPasswords] =\n    useState<Record<string, string>>({});\n  const [confirmedOverwrite, setConfirmedOverwrite] = useState<boolean>(false);\n  const [fileList, setFileList] = useState<UploadFile[]>([]);\n  const [importingModal, setImportingModal] = useState<boolean>(false);\n  const [importingErrorMessage, setImportingErrorMessage] = useState<string>();\n  const [passwordFields, setPasswordFields] = useState<string[]>([]);\n  const [sshTunnelPasswordFields, setSSHTunnelPasswordFields] = useState<\n    string[]\n  >([]);\n  const [sshTunnelPrivateKeyFields, setSSHTunnelPrivateKeyFields] = useState<\n    string[]\n  >([]);\n  const [\n    sshTunnelPrivateKeyPasswordFields,\n    setSSHTunnelPrivateKeyPasswordFields,\n  ] = useState<string[]>([]);\n  const [extraExtensionComponentState, setExtraExtensionComponentState] =\n    useState<object>({});\n\n  const SSHTunnelSwitchComponent =\n    extensionsRegistry.get('ssh_tunnel.form.switch') ?? SSHTunnelSwitch;\n\n  const [useSSHTunneling, setUseSSHTunneling] = useState<boolean>(false);\n\n  let dbConfigExtraExtension = extensionsRegistry.get(\n    'databaseconnection.extraOption',\n  );\n\n  if (dbConfigExtraExtension) {\n    // add method for db modal to store data\n    dbConfigExtraExtension = {\n      ...dbConfigExtraExtension,\n      onEdit: componentState => {\n        setExtraExtensionComponentState({\n          ...extraExtensionComponentState,\n          ...componentState,\n        });\n      },\n    };\n  }\n\n  const conf = useCommonConf();\n  const dbImages = getDatabaseImages();\n  const connectionAlert = getConnectionAlert();\n  const isEditMode = !!databaseId;\n  const disableSSHTunnelingForEngine = (\n    availableDbs?.databases?.find(\n      (DB: DatabaseObject) =>\n        DB.backend === db?.engine || DB.engine === db?.engine,\n    ) as DatabaseObject\n  )?.engine_information?.disable_ssh_tunneling;\n  const isSSHTunneling =\n    isFeatureEnabled(FeatureFlag.SSH_TUNNELING) &&\n    !disableSSHTunnelingForEngine;\n  const hasAlert =\n    connectionAlert || !!(db?.engine && engineSpecificAlertMapping[db.engine]);\n  const useSqlAlchemyForm =\n    db?.configuration_method === CONFIGURATION_METHOD.SQLALCHEMY_URI;\n  const useTabLayout = isEditMode || useSqlAlchemyForm;\n  const isDynamic = (engine: string | undefined) =>\n    availableDbs?.databases?.find(\n      (DB: DatabaseObject) => DB.backend === engine || DB.engine === engine,\n    )?.parameters !== undefined;\n  const showDBError = validationErrors || dbErrors;\n\n  const dbModel: DatabaseForm =\n    availableDbs?.databases?.find(\n      (available: { engine: string | undefined }) =>\n        // TODO: we need a centralized engine in one place\n        available.engine === (isEditMode ? db?.backend : db?.engine),\n    ) || {};\n\n  // Test Connection logic\n  const testConnection = () => {\n    if (!db?.sqlalchemy_uri) {\n      addDangerToast(t('Please enter a SQLAlchemy URI to test'));\n      return;\n    }\n\n    const connection = {\n      sqlalchemy_uri: db?.sqlalchemy_uri || '',\n      database_name: db?.database_name?.trim() || undefined,\n      impersonate_user: db?.impersonate_user || undefined,\n      extra: db?.extra,\n      masked_encrypted_extra: db?.masked_encrypted_extra || '',\n      server_cert: db?.server_cert || undefined,\n      ssh_tunnel: db?.ssh_tunnel || undefined,\n    };\n    setTestInProgress(true);\n    testDatabaseConnection(\n      connection,\n      (errorMsg: string) => {\n        setTestInProgress(false);\n        addDangerToast(errorMsg);\n      },\n      (errorMsg: string) => {\n        setTestInProgress(false);\n        addSuccessToast(errorMsg);\n      },\n    );\n  };\n\n  const getPlaceholder = (field: string) => {\n    if (field === 'database') {\n      switch (db?.engine) {\n        case Engines.Snowflake:\n          return t('e.g. xy12345.us-east-2.aws');\n        default:\n          return t('e.g. world_population');\n      }\n    }\n    return undefined;\n  };\n\n  const removeFile = (removedFile: UploadFile) => {\n    setFileList(fileList.filter(file => file.uid !== removedFile.uid));\n    return false;\n  };\n\n  const onClose = () => {\n    setDB({ type: ActionType.reset });\n    setHasConnectedDb(false);\n    setValidationErrors(null); // reset validation errors on close\n    clearError();\n    setEditNewDb(false);\n    setFileList([]);\n    setImportingModal(false);\n    setImportingErrorMessage('');\n    setPasswordFields([]);\n    setSSHTunnelPasswordFields([]);\n    setSSHTunnelPrivateKeyFields([]);\n    setSSHTunnelPrivateKeyPasswordFields([]);\n    setPasswords({});\n    setSSHTunnelPasswords({});\n    setSSHTunnelPrivateKeys({});\n    setSSHTunnelPrivateKeyPasswords({});\n    setConfirmedOverwrite(false);\n    setUseSSHTunneling(false);\n    onHide();\n  };\n\n  const redirectURL = (url: string) => {\n    /* TODO (lyndsiWilliams): This check and passing history\n      as a prop can be removed once SQL Lab is in the SPA */\n    if (!isEmpty(history)) {\n      history?.push(url);\n    } else {\n      window.location.href = url;\n    }\n  };\n\n  // Database import logic\n  const {\n    state: {\n      alreadyExists,\n      passwordsNeeded,\n      sshPasswordNeeded,\n      sshPrivateKeyNeeded,\n      sshPrivateKeyPasswordNeeded,\n      loading: importLoading,\n      failed: importErrored,\n    },\n    importResource,\n  } = useImportResource('database', t('database'), msg => {\n    setImportingErrorMessage(msg);\n  });\n\n  const onChange = (type: any, payload: any) => {\n    setDB({ type, payload } as DBReducerActionType);\n  };\n\n  const onSave = async () => {\n    let dbConfigExtraExtensionOnSaveError;\n    dbConfigExtraExtension\n      ?.onSave(extraExtensionComponentState, db)\n      .then(({ error }: { error: any }) => {\n        if (error) {\n          dbConfigExtraExtensionOnSaveError = error;\n          addDangerToast(error);\n        }\n      });\n    if (dbConfigExtraExtensionOnSaveError) {\n      setLoading(false);\n      return;\n    }\n    // Clone DB object\n    const dbToUpdate = { ...(db || {}) };\n\n    if (dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM) {\n      // Validate DB before saving\n      if (dbToUpdate?.parameters?.catalog) {\n        // need to stringify gsheets catalog to allow it to be serialized\n        dbToUpdate.extra = JSON.stringify({\n          ...JSON.parse(dbToUpdate.extra || '{}'),\n          engine_params: {\n            catalog: dbToUpdate.parameters.catalog,\n          },\n        });\n      }\n\n      // make sure that button spinner animates\n      setLoading(true);\n      const errors = await getValidation(dbToUpdate, true);\n      if ((validationErrors && !isEmpty(validationErrors)) || errors) {\n        setLoading(false);\n        return;\n      }\n      setLoading(false);\n      // end spinner animation\n\n      const parameters_schema = isEditMode\n        ? dbToUpdate.parameters_schema?.properties\n        : dbModel?.parameters.properties;\n      const additionalEncryptedExtra = JSON.parse(\n        dbToUpdate.masked_encrypted_extra || '{}',\n      );\n      const paramConfigArray = Object.keys(parameters_schema || {});\n\n      paramConfigArray.forEach(paramConfig => {\n        /*\n         * Parameters that are annotated with the `x-encrypted-extra` properties should be\n         * moved to `masked_encrypted_extra`, so that they are stored encrypted in the\n         * backend when the database is created or edited.\n         */\n        if (\n          parameters_schema[paramConfig]['x-encrypted-extra'] &&\n          dbToUpdate.parameters?.[paramConfig]\n        ) {\n          if (typeof dbToUpdate.parameters?.[paramConfig] === 'object') {\n            // add new encrypted extra to masked_encrypted_extra object\n            additionalEncryptedExtra[paramConfig] =\n              dbToUpdate.parameters?.[paramConfig];\n            // The backend expects `masked_encrypted_extra` as a string for historical\n            // reasons.\n            dbToUpdate.parameters[paramConfig] = JSON.stringify(\n              dbToUpdate.parameters[paramConfig],\n            );\n          } else {\n            additionalEncryptedExtra[paramConfig] = JSON.parse(\n              dbToUpdate.parameters?.[paramConfig] || '{}',\n            );\n          }\n        }\n      });\n      // cast the new encrypted extra object into a string\n      dbToUpdate.masked_encrypted_extra = JSON.stringify(\n        additionalEncryptedExtra,\n      );\n      // this needs to be added by default to gsheets\n      if (dbToUpdate.engine === Engines.GSheet) {\n        dbToUpdate.impersonate_user = true;\n      }\n    }\n\n    if (dbToUpdate?.parameters?.catalog) {\n      // need to stringify gsheets catalog to allow it to be serialized\n      dbToUpdate.extra = JSON.stringify({\n        ...JSON.parse(dbToUpdate.extra || '{}'),\n        engine_params: {\n          catalog: dbToUpdate.parameters.catalog,\n        },\n      });\n    }\n\n    setLoading(true);\n    if (db?.id) {\n      const result = await updateResource(\n        db.id as number,\n        dbToUpdate as DatabaseObject,\n        dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM, // onShow toast on SQLA Forms\n      );\n      if (result) {\n        if (onDatabaseAdd) onDatabaseAdd();\n        dbConfigExtraExtension\n          ?.onSave(extraExtensionComponentState, db)\n          .then(({ error }: { error: any }) => {\n            if (error) {\n              dbConfigExtraExtensionOnSaveError = error;\n              addDangerToast(error);\n            }\n          });\n        if (dbConfigExtraExtensionOnSaveError) {\n          setLoading(false);\n          return;\n        }\n        if (!editNewDb) {\n          onClose();\n          addSuccessToast(t('Database settings updated'));\n        }\n      }\n    } else if (db) {\n      // Create\n      const dbId = await createResource(\n        dbToUpdate as DatabaseObject,\n        dbToUpdate.configuration_method === CONFIGURATION_METHOD.DYNAMIC_FORM, // onShow toast on SQLA Forms\n      );\n      if (dbId) {\n        setHasConnectedDb(true);\n        if (onDatabaseAdd) onDatabaseAdd();\n        dbConfigExtraExtension\n          ?.onSave(extraExtensionComponentState, db)\n          .then(({ error }: { error: any }) => {\n            if (error) {\n              dbConfigExtraExtensionOnSaveError = error;\n              addDangerToast(error);\n            }\n          });\n        if (dbConfigExtraExtensionOnSaveError) {\n          setLoading(false);\n          return;\n        }\n\n        if (useTabLayout) {\n          // tab layout only has one step\n          // so it should close immediately on save\n          onClose();\n          addSuccessToast(t('Database connected'));\n        }\n      }\n    } else {\n      // Import - doesn't use db state\n      setImportingModal(true);\n\n      if (!(fileList[0].originFileObj instanceof File)) {\n        return;\n      }\n\n      const dbId = await importResource(\n        fileList[0].originFileObj,\n        passwords,\n        sshTunnelPasswords,\n        sshTunnelPrivateKeys,\n        sshTunnelPrivateKeyPasswords,\n        confirmedOverwrite,\n      );\n      if (dbId) {\n        if (onDatabaseAdd) onDatabaseAdd();\n        onClose();\n        addSuccessToast(t('Database connected'));\n      }\n    }\n\n    setShowCTAbtns(true);\n    setEditNewDb(false);\n    setLoading(false);\n  };\n\n  // Initialize\n  const fetchDB = () => {\n    if (isEditMode && databaseId) {\n      if (!dbLoading) {\n        fetchResource(databaseId).catch(e =>\n          addDangerToast(\n            t(\n              'Sorry there was an error fetching database information: %s',\n              e.message,\n            ),\n          ),\n        );\n      }\n    }\n  };\n\n  const setDatabaseModel = (database_name: string) => {\n    if (database_name === 'Other') {\n      // Allow users to connect to DB via legacy SQLA form\n      setDB({\n        type: ActionType.dbSelected,\n        payload: {\n          database_name,\n          configuration_method: CONFIGURATION_METHOD.SQLALCHEMY_URI,\n          engine: undefined,\n          engine_information: {\n            supports_file_upload: true,\n          },\n        },\n      });\n    } else {\n      const selectedDbModel = availableDbs?.databases.filter(\n        (db: DatabaseObject) => db.name === database_name,\n      )[0];\n      const { engine, parameters, engine_information, default_driver } =\n        selectedDbModel;\n      const isDynamic = parameters !== undefined;\n      setDB({\n        type: ActionType.dbSelected,\n        payload: {\n          database_name,\n          engine,\n          configuration_method: isDynamic\n            ? CONFIGURATION_METHOD.DYNAMIC_FORM\n            : CONFIGURATION_METHOD.SQLALCHEMY_URI,\n          engine_information,\n          driver: default_driver,\n        },\n      });\n\n      if (engine === Engines.GSheet) {\n        // only create a catalog if the DB is Google Sheets\n        setDB({ type: ActionType.addTableCatalogSheet });\n      }\n    }\n  };\n\n  const renderAvailableSelector = () => (\n    <div className=\"available\">\n      <h4 className=\"available-label\">\n        {t('Or choose from a list of other databases we support:')}\n      </h4>\n      <div className=\"control-label\">{t('Supported databases')}</div>\n      <AntdSelect\n        className=\"available-select\"\n        onChange={setDatabaseModel}\n        placeholder={t('Choose a database...')}\n        showSearch\n      >\n        {[...(availableDbs?.databases || [])]\n          ?.sort((a: DatabaseForm, b: DatabaseForm) =>\n            a.name.localeCompare(b.name),\n          )\n          .map((database: DatabaseForm, index: number) => (\n            <AntdSelect.Option value={database.name} key={`database-${index}`}>\n              {database.name}\n            </AntdSelect.Option>\n          ))}\n        {/* Allow users to connect to DB via legacy SQLA form */}\n        <AntdSelect.Option value=\"Other\" key=\"Other\">\n          {t('Other')}\n        </AntdSelect.Option>\n      </AntdSelect>\n      <Alert\n        showIcon\n        closable={false}\n        css={(theme: SupersetTheme) => antDAlertStyles(theme)}\n        type=\"info\"\n        message={\n          connectionAlert?.ADD_DATABASE?.message ||\n          t('Want to add a new database?')\n        }\n        description={\n          connectionAlert?.ADD_DATABASE ? (\n            <>\n              {t(\n                'Any databases that allow connections via SQL Alchemy URIs can be added. ',\n              )}\n              <a\n                href={connectionAlert?.ADD_DATABASE.contact_link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {connectionAlert?.ADD_DATABASE.contact_description_link}\n              </a>{' '}\n              {connectionAlert?.ADD_DATABASE.description}\n            </>\n          ) : (\n            <>\n              {t(\n                'Any databases that allow connections via SQL Alchemy URIs can be added. Learn about how to connect a database driver ',\n              )}\n              <a\n                href={DOCUMENTATION_LINK}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {t('here')}\n              </a>\n              .\n            </>\n          )\n        }\n      />\n    </div>\n  );\n\n  const renderPreferredSelector = () => (\n    <div className=\"preferred\">\n      {availableDbs?.databases\n        ?.filter((db: DatabaseForm) => db.preferred)\n        .map((database: DatabaseForm) => (\n          <IconButton\n            className=\"preferred-item\"\n            onClick={() => setDatabaseModel(database.name)}\n            buttonText={database.name}\n            icon={dbImages?.[database.engine]}\n            key={`${database.name}`}\n          />\n        ))}\n    </div>\n  );\n\n  const handleBackButtonOnFinish = () => {\n    if (dbFetched) {\n      fetchResource(dbFetched.id as number);\n    }\n    setShowCTAbtns(false);\n    setEditNewDb(true);\n  };\n\n  const handleBackButtonOnConnect = () => {\n    if (editNewDb) setHasConnectedDb(false);\n    if (importingModal) setImportingModal(false);\n    if (importErrored) {\n      setImportingModal(false);\n      setImportingErrorMessage('');\n      setPasswordFields([]);\n      setSSHTunnelPasswordFields([]);\n      setSSHTunnelPrivateKeyFields([]);\n      setSSHTunnelPrivateKeyPasswordFields([]);\n      setPasswords({});\n      setSSHTunnelPasswords({});\n      setSSHTunnelPrivateKeys({});\n      setSSHTunnelPrivateKeyPasswords({});\n    }\n    setDB({ type: ActionType.reset });\n    setFileList([]);\n  };\n\n  const handleDisableOnImport = () => {\n    if (\n      importLoading ||\n      (alreadyExists.length && !confirmedOverwrite) ||\n      (passwordsNeeded.length && JSON.stringify(passwords) === '{}') ||\n      (sshPasswordNeeded.length &&\n        JSON.stringify(sshTunnelPasswords) === '{}') ||\n      (sshPrivateKeyNeeded.length &&\n        JSON.stringify(sshTunnelPrivateKeys) === '{}') ||\n      (sshPrivateKeyPasswordNeeded.length &&\n        JSON.stringify(sshTunnelPrivateKeyPasswords) === '{}')\n    )\n      return true;\n    return false;\n  };\n\n  const renderModalFooter = () => {\n    if (db) {\n      // if db show back + connect\n      if (!hasConnectedDb || editNewDb) {\n        return (\n          <>\n            <StyledFooterButton key=\"back\" onClick={handleBackButtonOnConnect}>\n              {t('Back')}\n            </StyledFooterButton>\n            <StyledFooterButton\n              key=\"submit\"\n              buttonStyle=\"primary\"\n              onClick={onSave}\n              loading={isLoading}\n            >\n              {t('Connect')}\n            </StyledFooterButton>\n          </>\n        );\n      }\n\n      return (\n        <>\n          <StyledFooterButton key=\"back\" onClick={handleBackButtonOnFinish}>\n            {t('Back')}\n          </StyledFooterButton>\n          <StyledFooterButton\n            key=\"submit\"\n            buttonStyle=\"primary\"\n            onClick={onSave}\n            data-test=\"modal-confirm-button\"\n            loading={isLoading}\n          >\n            {t('Finish')}\n          </StyledFooterButton>\n        </>\n      );\n    }\n\n    // Import doesn't use db state, so footer will not render in the if statement above\n    if (importingModal) {\n      return (\n        <>\n          <StyledFooterButton key=\"back\" onClick={handleBackButtonOnConnect}>\n            {t('Back')}\n          </StyledFooterButton>\n          <StyledFooterButton\n            key=\"submit\"\n            buttonStyle=\"primary\"\n            onClick={onSave}\n            disabled={handleDisableOnImport()}\n            loading={isLoading}\n          >\n            {t('Connect')}\n          </StyledFooterButton>\n        </>\n      );\n    }\n\n    return <></>;\n  };\n\n  const renderEditModalFooter = (db: Partial<DatabaseObject> | null) => (\n    <>\n      <StyledFooterButton key=\"close\" onClick={onClose}>\n        {t('Close')}\n      </StyledFooterButton>\n      <StyledFooterButton\n        key=\"submit\"\n        buttonStyle=\"primary\"\n        onClick={onSave}\n        disabled={db?.is_managed_externally}\n        loading={isLoading}\n        tooltip={\n          db?.is_managed_externally\n            ? t(\n                \"This database is managed externally, and can't be edited in Superset\",\n              )\n            : ''\n        }\n      >\n        {t('Finish')}\n      </StyledFooterButton>\n    </>\n  );\n\n  const firstUpdate = useRef(true); // Captures first render\n  // Only runs when importing files don't need user input\n  useEffect(() => {\n    // Will not run on first render\n    if (firstUpdate.current) {\n      firstUpdate.current = false;\n      return;\n    }\n\n    if (\n      !importLoading &&\n      !alreadyExists.length &&\n      !passwordsNeeded.length &&\n      !sshPasswordNeeded.length &&\n      !sshPrivateKeyNeeded.length &&\n      !sshPrivateKeyPasswordNeeded.length &&\n      !isLoading && // This prevents a double toast for non-related imports\n      !importErrored // This prevents a success toast on error\n    ) {\n      onClose();\n      addSuccessToast(t('Database connected'));\n    }\n  }, [\n    alreadyExists,\n    passwordsNeeded,\n    importLoading,\n    importErrored,\n    sshPasswordNeeded,\n    sshPrivateKeyNeeded,\n    sshPrivateKeyPasswordNeeded,\n  ]);\n\n  useEffect(() => {\n    if (show) {\n      setTabKey(DEFAULT_TAB_KEY);\n      setLoading(true);\n      getAvailableDbs();\n    }\n    if (databaseId && show) {\n      fetchDB();\n    }\n  }, [show, databaseId]);\n\n  useEffect(() => {\n    if (dbFetched) {\n      setDB({\n        type: ActionType.fetched,\n        payload: dbFetched,\n      });\n      // keep a copy of the name separate for display purposes\n      // because it shouldn't change when the form is updated\n      setDbName(dbFetched.database_name);\n    }\n  }, [dbFetched]);\n\n  useEffect(() => {\n    if (isLoading) {\n      setLoading(false);\n    }\n\n    if (availableDbs && dbEngine) {\n      // set model if passed into props\n      setDatabaseModel(dbEngine);\n    }\n  }, [availableDbs]);\n\n  // This forces the modal to scroll until the importing filename is in view\n  useEffect(() => {\n    if (importingModal) {\n      document\n        .getElementsByClassName('ant-upload-list-item-name')[0]\n        .scrollIntoView();\n    }\n  }, [importingModal]);\n\n  useEffect(() => {\n    setPasswordFields([...passwordsNeeded]);\n  }, [passwordsNeeded]);\n\n  useEffect(() => {\n    setSSHTunnelPasswordFields([...sshPasswordNeeded]);\n  }, [sshPasswordNeeded]);\n\n  useEffect(() => {\n    setSSHTunnelPrivateKeyFields([...sshPrivateKeyNeeded]);\n  }, [sshPrivateKeyNeeded]);\n\n  useEffect(() => {\n    setSSHTunnelPrivateKeyPasswordFields([...sshPrivateKeyPasswordNeeded]);\n  }, [sshPrivateKeyPasswordNeeded]);\n\n  useEffect(() => {\n    if (db && isSSHTunneling) {\n      setUseSSHTunneling(!isEmpty(db?.ssh_tunnel));\n    }\n  }, [db, isSSHTunneling]);\n\n  const onDbImport = async (info: UploadChangeParam) => {\n    setImportingErrorMessage('');\n    setPasswordFields([]);\n    setSSHTunnelPasswordFields([]);\n    setSSHTunnelPrivateKeyFields([]);\n    setSSHTunnelPrivateKeyPasswordFields([]);\n    setPasswords({});\n    setSSHTunnelPasswords({});\n    setSSHTunnelPrivateKeys({});\n    setSSHTunnelPrivateKeyPasswords({});\n    setImportingModal(true);\n    setFileList([\n      {\n        ...info.file,\n        status: 'done',\n      },\n    ]);\n\n    if (!(info.file.originFileObj instanceof File)) return;\n    const dbId = await importResource(\n      info.file.originFileObj,\n      passwords,\n      sshTunnelPasswords,\n      sshTunnelPrivateKeys,\n      sshTunnelPrivateKeyPasswords,\n      confirmedOverwrite,\n    );\n    if (dbId) onDatabaseAdd?.();\n  };\n\n  const passwordNeededField = () => {\n    if (\n      !passwordFields.length &&\n      !sshTunnelPasswordFields.length &&\n      !sshTunnelPrivateKeyFields.length &&\n      !sshTunnelPrivateKeyPasswordFields.length\n    )\n      return null;\n\n    const files = [\n      ...new Set([\n        ...passwordFields,\n        ...sshTunnelPasswordFields,\n        ...sshTunnelPrivateKeyFields,\n        ...sshTunnelPrivateKeyPasswordFields,\n      ]),\n    ];\n\n    return files.map(database => (\n      <>\n        <StyledAlertMargin>\n          <Alert\n            closable={false}\n            css={(theme: SupersetTheme) => antDAlertStyles(theme)}\n            type=\"info\"\n            showIcon\n            message=\"Database passwords\"\n            description={t(\n              `The passwords for the databases below are needed in order to import them. Please note that the \"Secure Extra\" and \"Certificate\" sections of the database configuration are not present in explore files and should be added manually after the import if they are needed.`,\n            )}\n          />\n        </StyledAlertMargin>\n        {passwordFields?.indexOf(database) >= 0 && (\n          <ValidatedInput\n            id=\"password_needed\"\n            name=\"password_needed\"\n            required\n            value={passwords[database]}\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n              setPasswords({ ...passwords, [database]: event.target.value })\n            }\n            validationMethods={{ onBlur: () => {} }}\n            errorMessage={validationErrors?.password_needed}\n            label={t('%s PASSWORD', database.slice(10))}\n            css={formScrollableStyles}\n          />\n        )}\n        {sshTunnelPasswordFields?.indexOf(database) >= 0 && (\n          <ValidatedInput\n            id=\"ssh_tunnel_password_needed\"\n            name=\"ssh_tunnel_password_needed\"\n            required\n            value={sshTunnelPasswords[database]}\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n              setSSHTunnelPasswords({\n                ...sshTunnelPasswords,\n                [database]: event.target.value,\n              })\n            }\n            validationMethods={{ onBlur: () => {} }}\n            errorMessage={validationErrors?.ssh_tunnel_password_needed}\n            label={t('%s SSH TUNNEL PASSWORD', database.slice(10))}\n            css={formScrollableStyles}\n          />\n        )}\n        {sshTunnelPrivateKeyFields?.indexOf(database) >= 0 && (\n          <ValidatedInput\n            id=\"ssh_tunnel_private_key_needed\"\n            name=\"ssh_tunnel_private_key_needed\"\n            required\n            value={sshTunnelPrivateKeys[database]}\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n              setSSHTunnelPrivateKeys({\n                ...sshTunnelPrivateKeys,\n                [database]: event.target.value,\n              })\n            }\n            validationMethods={{ onBlur: () => {} }}\n            errorMessage={validationErrors?.ssh_tunnel_private_key_needed}\n            label={t('%s SSH TUNNEL PRIVATE KEY', database.slice(10))}\n            css={formScrollableStyles}\n          />\n        )}\n        {sshTunnelPrivateKeyPasswordFields?.indexOf(database) >= 0 && (\n          <ValidatedInput\n            id=\"ssh_tunnel_private_key_password_needed\"\n            name=\"ssh_tunnel_private_key_password_needed\"\n            required\n            value={sshTunnelPrivateKeyPasswords[database]}\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n              setSSHTunnelPrivateKeyPasswords({\n                ...sshTunnelPrivateKeyPasswords,\n                [database]: event.target.value,\n              })\n            }\n            validationMethods={{ onBlur: () => {} }}\n            errorMessage={\n              validationErrors?.ssh_tunnel_private_key_password_needed\n            }\n            label={t('%s SSH TUNNEL PRIVATE KEY PASSWORD', database.slice(10))}\n            css={formScrollableStyles}\n          />\n        )}\n      </>\n    ));\n  };\n\n  const importingErrorAlert = () => {\n    if (!importingErrorMessage) return null;\n\n    return (\n      <StyledAlertMargin>\n        <ErrorAlert\n          errorMessage={importingErrorMessage}\n          showDbInstallInstructions={passwordFields.length > 0}\n        />\n      </StyledAlertMargin>\n    );\n  };\n\n  const confirmOverwrite = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const targetValue = (event.currentTarget?.value as string) ?? '';\n    setConfirmedOverwrite(targetValue.toUpperCase() === t('OVERWRITE'));\n  };\n\n  const confirmOverwriteField = () => {\n    if (!alreadyExists.length) return null;\n\n    return (\n      <>\n        <StyledAlertMargin>\n          <Alert\n            closable={false}\n            css={(theme: SupersetTheme) => antdWarningAlertStyles(theme)}\n            type=\"warning\"\n            showIcon\n            message=\"\"\n            description={t(\n              'You are importing one or more databases that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?',\n            )}\n          />\n        </StyledAlertMargin>\n        <ValidatedInput\n          id=\"confirm_overwrite\"\n          name=\"confirm_overwrite\"\n          required\n          validationMethods={{ onBlur: () => {} }}\n          errorMessage={validationErrors?.confirm_overwrite}\n          label={t('Type \"%s\" to confirm', t('OVERWRITE'))}\n          onChange={confirmOverwrite}\n          css={formScrollableStyles}\n        />\n      </>\n    );\n  };\n\n  const tabChange = (key: string) => setTabKey(key);\n\n  const renderStepTwoAlert = () => {\n    const { hostname } = window.location;\n    let ipAlert = connectionAlert?.REGIONAL_IPS?.default || '';\n    const regionalIPs = connectionAlert?.REGIONAL_IPS || {};\n    Object.entries(regionalIPs).forEach(([ipRegion, ipRange]) => {\n      const regex = new RegExp(ipRegion);\n      if (hostname.match(regex)) ipAlert = ipRange;\n    });\n    return (\n      db?.engine && (\n        <StyledAlertMargin>\n          <Alert\n            closable={false}\n            css={(theme: SupersetTheme) => antDAlertStyles(theme)}\n            type=\"info\"\n            showIcon\n            message={\n              engineSpecificAlertMapping[db.engine]?.message ||\n              connectionAlert?.DEFAULT?.message\n            }\n            description={\n              engineSpecificAlertMapping[db.engine]?.description ||\n              connectionAlert?.DEFAULT?.description + ipAlert\n            }\n          />\n        </StyledAlertMargin>\n      )\n    );\n  };\n\n  // eslint-disable-next-line consistent-return\n  const errorAlert = () => {\n    let alertErrors: string[] = [];\n    if (!isEmpty(dbErrors)) {\n      alertErrors =\n        typeof dbErrors === 'object'\n          ? Object.values(dbErrors)\n          : typeof dbErrors === 'string'\n          ? [dbErrors]\n          : [];\n    } else if (\n      !isEmpty(validationErrors) &&\n      validationErrors?.error_type === 'GENERIC_DB_ENGINE_ERROR'\n    ) {\n      alertErrors = [\n        validationErrors?.description || validationErrors?.message,\n      ];\n    }\n    if (alertErrors.length) {\n      return (\n        <ErrorAlertContainer>\n          <ErrorMessageWithStackTrace\n            title={t('Database Creation Error')}\n            description={t(\n              'We are unable to connect to your database. Click \"See more\" for database-provided information that may help troubleshoot the issue.',\n            )}\n            subtitle={alertErrors?.[0] || validationErrors?.description}\n            copyText={validationErrors?.description}\n          />\n        </ErrorAlertContainer>\n      );\n    }\n    return <></>;\n  };\n\n  const fetchAndSetDB = () => {\n    setLoading(true);\n    fetchResource(dbFetched?.id as number).then(r => {\n      setItem(LocalStorageKeys.db, r);\n    });\n  };\n\n  const renderSSHTunnelForm = () => (\n    <SSHTunnelForm\n      db={db as DatabaseObject}\n      onSSHTunnelParametersChange={({\n        target,\n      }: {\n        target: HTMLInputElement | HTMLTextAreaElement;\n      }) =>\n        onChange(ActionType.parametersSSHTunnelChange, {\n          type: target.type,\n          name: target.name,\n          value: target.value,\n        })\n      }\n      setSSHTunnelLoginMethod={(method: AuthType) =>\n        setDB({\n          type: ActionType.setSSHTunnelLoginMethod,\n          payload: { login_method: method },\n        })\n      }\n    />\n  );\n\n  const renderCTABtns = () => (\n    <StyledBtns>\n      <Button\n        buttonStyle=\"secondary\"\n        onClick={() => {\n          setLoading(true);\n          fetchAndSetDB();\n          redirectURL('/dataset/add/');\n        }}\n      >\n        {t('CREATE DATASET')}\n      </Button>\n      <Button\n        buttonStyle=\"secondary\"\n        onClick={() => {\n          setLoading(true);\n          fetchAndSetDB();\n          redirectURL(`/superset/sqllab/?db=true`);\n        }}\n      >\n        {t('QUERY DATA IN SQL LAB')}\n      </Button>\n    </StyledBtns>\n  );\n\n  const renderDatabaseConnectionForm = () => (\n    <>\n      <DatabaseConnectionForm\n        isEditMode={isEditMode}\n        db={db as DatabaseObject}\n        sslForced={false}\n        dbModel={dbModel}\n        onAddTableCatalog={() => {\n          setDB({ type: ActionType.addTableCatalogSheet });\n        }}\n        onQueryChange={({ target }: { target: HTMLInputElement }) =>\n          onChange(ActionType.queryChange, {\n            name: target.name,\n            value: target.value,\n          })\n        }\n        onExtraInputChange={({ target }: { target: HTMLInputElement }) =>\n          onChange(ActionType.extraInputChange, {\n            name: target.name,\n            value: target.value,\n          })\n        }\n        onRemoveTableCatalog={(idx: number) => {\n          setDB({\n            type: ActionType.removeTableCatalogSheet,\n            payload: { indexToDelete: idx },\n          });\n        }}\n        onParametersChange={({ target }: { target: HTMLInputElement }) =>\n          onChange(ActionType.parametersChange, {\n            type: target.type,\n            name: target.name,\n            checked: target.checked,\n            value: target.value,\n          })\n        }\n        onChange={({ target }: { target: HTMLInputElement }) =>\n          onChange(ActionType.textChange, {\n            name: target.name,\n            value: target.value,\n          })\n        }\n        getValidation={() => getValidation(db)}\n        validationErrors={validationErrors}\n        getPlaceholder={getPlaceholder}\n      />\n      <SSHTunnelContainer>\n        <SSHTunnelSwitchComponent\n          isEditMode={isEditMode}\n          dbFetched={dbFetched}\n          disableSSHTunnelingForEngine={disableSSHTunnelingForEngine}\n          useSSHTunneling={useSSHTunneling}\n          setUseSSHTunneling={setUseSSHTunneling}\n          setDB={setDB}\n          isSSHTunneling={isSSHTunneling}\n        />\n      </SSHTunnelContainer>\n      {useSSHTunneling && (\n        <SSHTunnelContainer>{renderSSHTunnelForm()}</SSHTunnelContainer>\n      )}\n    </>\n  );\n\n  const renderFinishState = () => {\n    if (!editNewDb) {\n      return (\n        <ExtraOptions\n          extraExtension={dbConfigExtraExtension}\n          db={db as DatabaseObject}\n          onInputChange={({ target }: { target: HTMLInputElement }) =>\n            onChange(ActionType.inputChange, {\n              type: target.type,\n              name: target.name,\n              checked: target.checked,\n              value: target.value,\n            })\n          }\n          onTextChange={({ target }: { target: HTMLTextAreaElement }) =>\n            onChange(ActionType.textChange, {\n              name: target.name,\n              value: target.value,\n            })\n          }\n          onEditorChange={(payload: { name: string; json: any }) =>\n            onChange(ActionType.editorChange, payload)\n          }\n          onExtraInputChange={({ target }: { target: HTMLInputElement }) => {\n            onChange(ActionType.extraInputChange, {\n              type: target.type,\n              name: target.name,\n              checked: target.checked,\n              value: target.value,\n            });\n          }}\n          onExtraEditorChange={(payload: { name: string; json: any }) =>\n            onChange(ActionType.extraEditorChange, payload)\n          }\n        />\n      );\n    }\n    return renderDatabaseConnectionForm();\n  };\n\n  if (\n    fileList.length > 0 &&\n    (alreadyExists.length ||\n      passwordFields.length ||\n      sshTunnelPasswordFields.length ||\n      sshTunnelPrivateKeyFields.length ||\n      sshTunnelPrivateKeyPasswordFields.length)\n  ) {\n    return (\n      <Modal\n        css={(theme: SupersetTheme) => [\n          antDModalNoPaddingStyles,\n          antDModalStyles(theme),\n          formHelperStyles(theme),\n          formStyles(theme),\n        ]}\n        name=\"database\"\n        onHandledPrimaryAction={onSave}\n        onHide={onClose}\n        primaryButtonName={t('Connect')}\n        width=\"500px\"\n        centered\n        show={show}\n        title={<h4>{t('Connect a database')}</h4>}\n        footer={renderModalFooter()}\n      >\n        <ModalHeader\n          isLoading={isLoading}\n          isEditMode={isEditMode}\n          useSqlAlchemyForm={useSqlAlchemyForm}\n          hasConnectedDb={hasConnectedDb}\n          db={db}\n          dbName={dbName}\n          dbModel={dbModel}\n          fileList={fileList}\n        />\n        {passwordNeededField()}\n        {confirmOverwriteField()}\n        {importingErrorAlert()}\n      </Modal>\n    );\n  }\n  const modalFooter = isEditMode\n    ? renderEditModalFooter(db)\n    : renderModalFooter();\n  return useTabLayout ? (\n    <Modal\n      css={(theme: SupersetTheme) => [\n        antDTabsStyles,\n        antDModalNoPaddingStyles,\n        antDModalStyles(theme),\n        formHelperStyles(theme),\n        formStyles(theme),\n      ]}\n      name=\"database\"\n      data-test=\"database-modal\"\n      onHandledPrimaryAction={onSave}\n      onHide={onClose}\n      primaryButtonName={isEditMode ? t('Save') : t('Connect')}\n      width=\"500px\"\n      centered\n      show={show}\n      title={\n        <h4>{isEditMode ? t('Edit database') : t('Connect a database')}</h4>\n      }\n      footer={modalFooter}\n    >\n      <StyledStickyHeader>\n        <TabHeader>\n          <ModalHeader\n            isLoading={isLoading}\n            isEditMode={isEditMode}\n            useSqlAlchemyForm={useSqlAlchemyForm}\n            hasConnectedDb={hasConnectedDb}\n            db={db}\n            dbName={dbName}\n            dbModel={dbModel}\n          />\n        </TabHeader>\n      </StyledStickyHeader>\n      <TabsStyled\n        defaultActiveKey={DEFAULT_TAB_KEY}\n        activeKey={tabKey}\n        onTabClick={tabChange}\n        animated={{ inkBar: true, tabPane: true }}\n      >\n        <Tabs.TabPane tab={<span>{t('Basic')}</span>} key=\"1\">\n          {useSqlAlchemyForm ? (\n            <StyledAlignment>\n              <SqlAlchemyForm\n                db={db as DatabaseObject}\n                onInputChange={({ target }: { target: HTMLInputElement }) =>\n                  onChange(ActionType.inputChange, {\n                    type: target.type,\n                    name: target.name,\n                    checked: target.checked,\n                    value: target.value,\n                  })\n                }\n                conf={conf}\n                testConnection={testConnection}\n                testInProgress={testInProgress}\n              >\n                <SSHTunnelSwitchComponent\n                  isEditMode={isEditMode}\n                  dbFetched={dbFetched}\n                  disableSSHTunnelingForEngine={disableSSHTunnelingForEngine}\n                  useSSHTunneling={useSSHTunneling}\n                  setUseSSHTunneling={setUseSSHTunneling}\n                  setDB={setDB}\n                  isSSHTunneling={isSSHTunneling}\n                />\n                {useSSHTunneling && renderSSHTunnelForm()}\n              </SqlAlchemyForm>\n              {isDynamic(db?.backend || db?.engine) && !isEditMode && (\n                <div css={(theme: SupersetTheme) => infoTooltip(theme)}>\n                  <Button\n                    buttonStyle=\"link\"\n                    onClick={() =>\n                      setDB({\n                        type: ActionType.configMethodChange,\n                        payload: {\n                          database_name: db?.database_name,\n                          configuration_method:\n                            CONFIGURATION_METHOD.DYNAMIC_FORM,\n                          engine: db?.engine,\n                        },\n                      })\n                    }\n                    css={theme => alchemyButtonLinkStyles(theme)}\n                  >\n                    {t('Connect this database using the dynamic form instead')}\n                  </Button>\n                  <InfoTooltip\n                    tooltip={t(\n                      'Click this link to switch to an alternate form that exposes only the required fields needed to connect this database.',\n                    )}\n                    viewBox=\"0 -6 24 24\"\n                  />\n                </div>\n              )}\n            </StyledAlignment>\n          ) : (\n            renderDatabaseConnectionForm()\n          )}\n          {!isEditMode && (\n            <StyledAlertMargin>\n              <Alert\n                closable={false}\n                css={(theme: SupersetTheme) => antDAlertStyles(theme)}\n                message={t('Additional fields may be required')}\n                showIcon\n                description={\n                  <>\n                    {t(\n                      'Select databases require additional fields to be completed in the Advanced tab to successfully connect the database. Learn what requirements your databases has ',\n                    )}\n                    <a\n                      href={DOCUMENTATION_LINK}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"additional-fields-alert-description\"\n                    >\n                      {t('here')}\n                    </a>\n                    .\n                  </>\n                }\n                type=\"info\"\n              />\n            </StyledAlertMargin>\n          )}\n          {showDBError && errorAlert()}\n        </Tabs.TabPane>\n        <Tabs.TabPane tab={<span>{t('Advanced')}</span>} key=\"2\">\n          <ExtraOptions\n            extraExtension={dbConfigExtraExtension}\n            db={db as DatabaseObject}\n            onInputChange={({ target }: { target: HTMLInputElement }) =>\n              onChange(ActionType.inputChange, {\n                type: target.type,\n                name: target.name,\n                checked: target.checked,\n                value: target.value,\n              })\n            }\n            onTextChange={({ target }: { target: HTMLTextAreaElement }) =>\n              onChange(ActionType.textChange, {\n                name: target.name,\n                value: target.value,\n              })\n            }\n            onEditorChange={(payload: { name: string; json: any }) =>\n              onChange(ActionType.editorChange, payload)\n            }\n            onExtraInputChange={({ target }: { target: HTMLInputElement }) => {\n              onChange(ActionType.extraInputChange, {\n                type: target.type,\n                name: target.name,\n                checked: target.checked,\n                value: target.value,\n              });\n            }}\n            onExtraEditorChange={(payload: { name: string; json: any }) => {\n              onChange(ActionType.extraEditorChange, payload);\n            }}\n          />\n        </Tabs.TabPane>\n      </TabsStyled>\n    </Modal>\n  ) : (\n    <Modal\n      css={(theme: SupersetTheme) => [\n        antDModalNoPaddingStyles,\n        antDModalStyles(theme),\n        formHelperStyles(theme),\n        formStyles(theme),\n      ]}\n      name=\"database\"\n      onHandledPrimaryAction={onSave}\n      onHide={onClose}\n      primaryButtonName={hasConnectedDb ? t('Finish') : t('Connect')}\n      width=\"500px\"\n      centered\n      show={show}\n      title={<h4>{t('Connect a database')}</h4>}\n      footer={renderModalFooter()}\n    >\n      {!isLoading && hasConnectedDb ? (\n        <>\n          <ModalHeader\n            isLoading={isLoading}\n            isEditMode={isEditMode}\n            useSqlAlchemyForm={useSqlAlchemyForm}\n            hasConnectedDb={hasConnectedDb}\n            db={db}\n            dbName={dbName}\n            dbModel={dbModel}\n            editNewDb={editNewDb}\n          />\n          {showCTAbtns && renderCTABtns()}\n          {renderFinishState()}\n        </>\n      ) : (\n        <>\n          {/* Dynamic Form Step 1 */}\n          {!isLoading &&\n            (!db ? (\n              <SelectDatabaseStyles>\n                <ModalHeader\n                  isLoading={isLoading}\n                  isEditMode={isEditMode}\n                  useSqlAlchemyForm={useSqlAlchemyForm}\n                  hasConnectedDb={hasConnectedDb}\n                  db={db}\n                  dbName={dbName}\n                  dbModel={dbModel}\n                />\n                {renderPreferredSelector()}\n                {renderAvailableSelector()}\n                <StyledUploadWrapper>\n                  <Upload\n                    name=\"databaseFile\"\n                    id=\"databaseFile\"\n                    data-test=\"database-file-input\"\n                    accept=\".yaml,.json,.yml,.zip\"\n                    customRequest={() => {}}\n                    onChange={onDbImport}\n                    onRemove={removeFile}\n                  >\n                    <Button\n                      data-test=\"import-database-btn\"\n                      buttonStyle=\"link\"\n                      type=\"link\"\n                      css={importDbButtonLinkStyles}\n                    >\n                      {t('Import database from file')}\n                    </Button>\n                  </Upload>\n                </StyledUploadWrapper>\n                {importingErrorAlert()}\n              </SelectDatabaseStyles>\n            ) : (\n              <>\n                <ModalHeader\n                  isLoading={isLoading}\n                  isEditMode={isEditMode}\n                  useSqlAlchemyForm={useSqlAlchemyForm}\n                  hasConnectedDb={hasConnectedDb}\n                  db={db}\n                  dbName={dbName}\n                  dbModel={dbModel}\n                />\n                {hasAlert && renderStepTwoAlert()}\n                {renderDatabaseConnectionForm()}\n                <div css={(theme: SupersetTheme) => infoTooltip(theme)}>\n                  {dbModel.engine !== Engines.GSheet && (\n                    <>\n                      <Button\n                        data-test=\"sqla-connect-btn\"\n                        buttonStyle=\"link\"\n                        onClick={() =>\n                          setDB({\n                            type: ActionType.configMethodChange,\n                            payload: {\n                              engine: db.engine,\n                              configuration_method:\n                                CONFIGURATION_METHOD.SQLALCHEMY_URI,\n                              database_name: db.database_name,\n                            },\n                          })\n                        }\n                        css={buttonLinkStyles}\n                      >\n                        {t(\n                          'Connect this database with a SQLAlchemy URI string instead',\n                        )}\n                      </Button>\n                      <InfoTooltip\n                        tooltip={t(\n                          'Click this link to switch to an alternate form that allows you to input the SQLAlchemy URL for this database manually.',\n                        )}\n                        viewBox=\"0 -6 24 24\"\n                      />\n                    </>\n                  )}\n                </div>\n                {/* Step 2 */}\n                {showDBError && errorAlert()}\n              </>\n            ))}\n        </>\n      )}\n      {isLoading && <Loading />}\n    </Modal>\n  );\n};\n\nexport default withToasts(DatabaseModal);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useSelector } from 'react-redux';\nimport { ViewState } from 'src/views/types';\n\nexport function useCommonConf() {\n  return useSelector((state: ViewState) => state?.common?.conf);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { MainNav as Menu } from 'src/components/Menu';\nimport { styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nconst { SubMenu } = Menu;\n\nexport interface Languages {\n  [key: string]: {\n    flag: string;\n    url: string;\n    name: string;\n  };\n}\n\ninterface LanguagePickerProps {\n  locale: string;\n  languages: Languages;\n}\n\nconst StyledLabel = styled.div`\n  display: flex;\n  align-items: center;\n\n  & i {\n    margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  & a {\n    display: block;\n    width: 150px;\n    word-wrap: break-word;\n    text-decoration: none;\n  }\n`;\n\nconst StyledFlag = styled.i`\n  margin-top: 2px;\n`;\n\nexport default function LanguagePicker(props: LanguagePickerProps) {\n  const { locale, languages, ...rest } = props;\n  return (\n    <SubMenu\n      aria-label=\"Languages\"\n      title={\n        <div className=\"f16\">\n          <StyledFlag className={`flag ${languages[locale].flag}`} />\n        </div>\n      }\n      icon={<Icons.TriangleDown />}\n      {...rest}\n    >\n      {Object.keys(languages).map(langKey => (\n        <Menu.Item\n          key={langKey}\n          style={{ whiteSpace: 'normal', height: 'auto' }}\n        >\n          <StyledLabel className=\"f16\">\n            <i className={`flag ${languages[langKey].flag}`} />\n            <a href={languages[langKey].url}>{languages[langKey].name}</a>\n          </StyledLabel>\n        </Menu.Item>\n      ))}\n    </SubMenu>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Fragment, useState, useEffect } from 'react';\nimport rison from 'rison';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useQueryParams, BooleanParam } from 'use-query-params';\nimport { isEmpty } from 'lodash';\n\nimport {\n  t,\n  styled,\n  css,\n  SupersetTheme,\n  SupersetClient,\n  getExtensionsRegistry,\n  useTheme,\n} from '@superset-ui/core';\nimport { MainNav as Menu } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport Label from 'src/components/Label';\nimport { findPermission } from 'src/utils/findPermission';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport {\n  MenuObjectProps,\n  UserWithPermissionsAndRoles,\n  MenuObjectChildProps,\n} from 'src/types/bootstrapTypes';\nimport { RootState } from 'src/dashboard/types';\nimport DatabaseModal from 'src/features/databases/DatabaseModal';\nimport { uploadUserPerms } from 'src/views/CRUD/utils';\nimport LanguagePicker from './LanguagePicker';\nimport {\n  ExtensionConfigs,\n  GlobalMenuDataOptions,\n  RightMenuProps,\n} from './types';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst versionInfoStyles = (theme: SupersetTheme) => css`\n  padding: ${theme.gridUnit * 1.5}px ${theme.gridUnit * 4}px\n    ${theme.gridUnit * 4}px ${theme.gridUnit * 7}px;\n  color: ${theme.colors.grayscale.base};\n  font-size: ${theme.typography.sizes.xs}px;\n  white-space: nowrap;\n`;\nconst StyledI = styled.div`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n`;\n\nconst styledDisabled = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light1};\n  .ant-menu-item-active {\n    color: ${theme.colors.grayscale.light1};\n    cursor: default;\n  }\n`;\n\nconst StyledDiv = styled.div<{ align: string }>`\n  display: flex;\n  flex-direction: row;\n  justify-content: ${({ align }) => align};\n  align-items: center;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n  .ant-menu-submenu-title > svg {\n    top: ${({ theme }) => theme.gridUnit * 5.25}px;\n  }\n`;\n\nconst StyledMenuItemWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst StyledAnchor = styled.a`\n  padding-right: ${({ theme }) => theme.gridUnit}px;\n  padding-left: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst tagStyles = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light5};\n`;\n\nconst styledChildMenu = (theme: SupersetTheme) => css`\n  &:hover {\n    color: ${theme.colors.primary.base} !important;\n    cursor: pointer !important;\n  }\n`;\n\nconst { SubMenu } = Menu;\n\nconst RightMenu = ({\n  align,\n  settings,\n  navbarRight,\n  isFrontendRoute,\n  environmentTag,\n  setQuery,\n}: RightMenuProps & {\n  setQuery: ({\n    databaseAdded,\n    datasetAdded,\n  }: {\n    databaseAdded?: boolean;\n    datasetAdded?: boolean;\n  }) => void;\n}) => {\n  const user = useSelector<any, UserWithPermissionsAndRoles>(\n    state => state.user,\n  );\n  const dashboardId = useSelector<RootState, number | undefined>(\n    state => state.dashboardInfo?.id,\n  );\n  const userValues = user || {};\n  const { roles } = userValues;\n  const {\n    CSV_EXTENSIONS,\n    COLUMNAR_EXTENSIONS,\n    EXCEL_EXTENSIONS,\n    ALLOWED_EXTENSIONS,\n    HAS_GSHEETS_INSTALLED,\n  } = useSelector<any, ExtensionConfigs>(state => state.common.conf);\n  const [showDatabaseModal, setShowDatabaseModal] = useState<boolean>(false);\n  const [engine, setEngine] = useState<string>('');\n  const canSql = findPermission('can_sqllab', 'Superset', roles);\n  const canDashboard = findPermission('can_write', 'Dashboard', roles);\n  const canChart = findPermission('can_write', 'Chart', roles);\n  const canDatabase = findPermission('can_write', 'Database', roles);\n  const canDataset = findPermission('can_write', 'Dataset', roles);\n\n  const { canUploadData, canUploadCSV, canUploadColumnar, canUploadExcel } =\n    uploadUserPerms(\n      roles,\n      CSV_EXTENSIONS,\n      COLUMNAR_EXTENSIONS,\n      EXCEL_EXTENSIONS,\n      ALLOWED_EXTENSIONS,\n    );\n\n  const showActionDropdown = canSql || canChart || canDashboard;\n  const [allowUploads, setAllowUploads] = useState<boolean>(false);\n  const [nonExamplesDBConnected, setNonExamplesDBConnected] =\n    useState<boolean>(false);\n  const isAdmin = isUserAdmin(user);\n  const showUploads = allowUploads || isAdmin;\n  const dropdownItems: MenuObjectProps[] = [\n    {\n      label: t('Data'),\n      icon: 'fa-database',\n      childs: [\n        {\n          label: t('Connect database'),\n          name: GlobalMenuDataOptions.DB_CONNECTION,\n          perm: canDatabase && !nonExamplesDBConnected,\n        },\n        {\n          label: t('Create dataset'),\n          name: GlobalMenuDataOptions.DATASET_CREATION,\n          url: '/dataset/add/',\n          perm: canDataset && nonExamplesDBConnected,\n        },\n        {\n          label: t('Connect Google Sheet'),\n          name: GlobalMenuDataOptions.GOOGLE_SHEETS,\n          perm: canDatabase && HAS_GSHEETS_INSTALLED,\n        },\n        {\n          label: t('Upload CSV to database'),\n          name: 'Upload a CSV',\n          url: '/csvtodatabaseview/form',\n          perm: canUploadCSV && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n        {\n          label: t('Upload columnar file to database'),\n          name: 'Upload a Columnar file',\n          url: '/columnartodatabaseview/form',\n          perm: canUploadColumnar && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n        {\n          label: t('Upload Excel file to database'),\n          name: 'Upload Excel',\n          url: '/exceltodatabaseview/form',\n          perm: canUploadExcel && showUploads,\n          disable: isAdmin && !allowUploads,\n        },\n      ],\n    },\n    {\n      label: t('SQL query'),\n      url: '/superset/sqllab?new=true',\n      icon: 'fa-fw fa-search',\n      perm: 'can_sqllab',\n      view: 'Superset',\n    },\n    {\n      label: t('Chart'),\n      url: Number.isInteger(dashboardId)\n        ? `/chart/add?dashboard_id=${dashboardId}`\n        : '/chart/add',\n      icon: 'fa-fw fa-bar-chart',\n      perm: 'can_write',\n      view: 'Chart',\n    },\n    {\n      label: t('Dashboard'),\n      url: '/dashboard/new',\n      icon: 'fa-fw fa-dashboard',\n      perm: 'can_write',\n      view: 'Dashboard',\n    },\n  ];\n\n  const checkAllowUploads = () => {\n    const payload = {\n      filters: [\n        { col: 'allow_file_upload', opr: 'upload_is_enabled', value: true },\n      ],\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`,\n    }).then(({ json }: Record<string, any>) => {\n      // There might be some existings Gsheets and Clickhouse DBs\n      // with allow_file_upload set as True which is not possible from now on\n      const allowedDatabasesWithFileUpload =\n        json?.result?.filter(\n          (database: any) => database?.engine_information?.supports_file_upload,\n        ) || [];\n      setAllowUploads(allowedDatabasesWithFileUpload?.length >= 1);\n    });\n  };\n\n  const existsNonExamplesDatabases = () => {\n    const payload = {\n      filters: [{ col: 'database_name', opr: 'neq', value: 'examples' }],\n    };\n    SupersetClient.get({\n      endpoint: `/api/v1/database/?q=${rison.encode(payload)}`,\n    }).then(({ json }: Record<string, any>) => {\n      setNonExamplesDBConnected(json.count >= 1);\n    });\n  };\n\n  useEffect(() => {\n    if (canUploadData) {\n      checkAllowUploads();\n    }\n  }, [canUploadData]);\n\n  useEffect(() => {\n    if (canDatabase || canDataset) {\n      existsNonExamplesDatabases();\n    }\n  }, [canDatabase, canDataset]);\n\n  const menuIconAndLabel = (menu: MenuObjectProps) => (\n    <>\n      <i data-test={`menu-item-${menu.label}`} className={`fa ${menu.icon}`} />\n      {menu.label}\n    </>\n  );\n\n  const handleMenuSelection = (itemChose: any) => {\n    if (itemChose.key === GlobalMenuDataOptions.DB_CONNECTION) {\n      setShowDatabaseModal(true);\n    } else if (itemChose.key === GlobalMenuDataOptions.GOOGLE_SHEETS) {\n      setShowDatabaseModal(true);\n      setEngine('Google Sheets');\n    }\n  };\n\n  const handleOnHideModal = () => {\n    setEngine('');\n    setShowDatabaseModal(false);\n  };\n\n  const tooltipText = t(\n    \"Enable 'Allow file uploads to database' in any database's settings\",\n  );\n\n  const buildMenuItem = (item: MenuObjectChildProps) =>\n    item.disable ? (\n      <Menu.Item key={item.name} css={styledDisabled}>\n        <Tooltip placement=\"top\" title={tooltipText}>\n          {item.label}\n        </Tooltip>\n      </Menu.Item>\n    ) : (\n      <Menu.Item key={item.name} css={styledChildMenu}>\n        {item.url ? <a href={item.url}> {item.label} </a> : item.label}\n      </Menu.Item>\n    );\n\n  const onMenuOpen = (openKeys: string[]) => {\n    // We should query the API only if opening Data submenus\n    // because the rest don't need this information. Not using\n    // \"Data\" directly since we might change the label later on?\n    if (\n      openKeys.length > 1 &&\n      !isEmpty(\n        openKeys?.filter((key: string) =>\n          key.includes(`sub2_${dropdownItems?.[0]?.label}`),\n        ),\n      )\n    ) {\n      if (canUploadData) checkAllowUploads();\n      if (canDatabase || canDataset) existsNonExamplesDatabases();\n    }\n    return null;\n  };\n  const RightMenuExtension = extensionsRegistry.get('navbar.right');\n  const RightMenuItemIconExtension = extensionsRegistry.get(\n    'navbar.right-menu.item.icon',\n  );\n\n  const handleDatabaseAdd = () => setQuery({ databaseAdded: true });\n\n  const theme = useTheme();\n\n  return (\n    <StyledDiv align={align}>\n      {canDatabase && (\n        <DatabaseModal\n          onHide={handleOnHideModal}\n          show={showDatabaseModal}\n          dbEngine={engine}\n          onDatabaseAdd={handleDatabaseAdd}\n        />\n      )}\n      {environmentTag?.text && (\n        <Label\n          css={{ borderRadius: `${theme.gridUnit * 125}px` }}\n          color={\n            /^#(?:[0-9a-f]{3}){1,2}$/i.test(environmentTag.color)\n              ? environmentTag.color\n              : environmentTag.color\n                  .split('.')\n                  .reduce((o, i) => o[i], theme.colors)\n          }\n        >\n          <span css={tagStyles}>{environmentTag.text}</span>\n        </Label>\n      )}\n      <Menu\n        selectable={false}\n        mode=\"horizontal\"\n        onClick={handleMenuSelection}\n        onOpenChange={onMenuOpen}\n      >\n        {RightMenuExtension && <RightMenuExtension />}\n        {!navbarRight.user_is_anonymous && showActionDropdown && (\n          <SubMenu\n            data-test=\"new-dropdown\"\n            title={\n              <StyledI data-test=\"new-dropdown-icon\" className=\"fa fa-plus\" />\n            }\n            icon={<Icons.TriangleDown />}\n          >\n            {dropdownItems?.map?.(menu => {\n              const canShowChild = menu.childs?.some(\n                item => typeof item === 'object' && !!item.perm,\n              );\n              if (menu.childs) {\n                if (canShowChild) {\n                  return (\n                    <SubMenu\n                      key={`sub2_${menu.label}`}\n                      className=\"data-menu\"\n                      title={menuIconAndLabel(menu)}\n                    >\n                      {menu?.childs?.map?.((item, idx) =>\n                        typeof item !== 'string' && item.name && item.perm ? (\n                          <Fragment key={item.name}>\n                            {idx === 3 && <Menu.Divider />}\n                            {buildMenuItem(item)}\n                          </Fragment>\n                        ) : null,\n                      )}\n                    </SubMenu>\n                  );\n                }\n                if (!menu.url) {\n                  return null;\n                }\n              }\n              return (\n                findPermission(\n                  menu.perm as string,\n                  menu.view as string,\n                  roles,\n                ) && (\n                  <Menu.Item key={menu.label}>\n                    {isFrontendRoute(menu.url) ? (\n                      <Link to={menu.url || ''}>\n                        <i\n                          data-test={`menu-item-${menu.label}`}\n                          className={`fa ${menu.icon}`}\n                        />{' '}\n                        {menu.label}\n                      </Link>\n                    ) : (\n                      <a href={menu.url}>\n                        <i\n                          data-test={`menu-item-${menu.label}`}\n                          className={`fa ${menu.icon}`}\n                        />{' '}\n                        {menu.label}\n                      </a>\n                    )}\n                  </Menu.Item>\n                )\n              );\n            })}\n          </SubMenu>\n        )}\n        <SubMenu\n          title={t('Settings')}\n          icon={<Icons.TriangleDown iconSize=\"xl\" />}\n        >\n          {settings?.map?.((section, index) => [\n            <Menu.ItemGroup key={`${section.label}`} title={section.label}>\n              {section?.childs?.map?.(child => {\n                if (typeof child !== 'string') {\n                  const menuItemDisplay = RightMenuItemIconExtension ? (\n                    <StyledMenuItemWithIcon>\n                      {child.label}\n                      <RightMenuItemIconExtension menuChild={child} />\n                    </StyledMenuItemWithIcon>\n                  ) : (\n                    child.label\n                  );\n                  return (\n                    <Menu.Item key={`${child.label}`}>\n                      {isFrontendRoute(child.url) ? (\n                        <Link to={child.url || ''}>{menuItemDisplay}</Link>\n                      ) : (\n                        <a href={child.url}>{menuItemDisplay}</a>\n                      )}\n                    </Menu.Item>\n                  );\n                }\n                return null;\n              })}\n            </Menu.ItemGroup>,\n            index < settings.length - 1 && (\n              <Menu.Divider key={`divider_${index}`} />\n            ),\n          ])}\n\n          {!navbarRight.user_is_anonymous && [\n            <Menu.Divider key=\"user-divider\" />,\n            <Menu.ItemGroup key=\"user-section\" title={t('User')}>\n              {navbarRight.user_profile_url && (\n                <Menu.Item key=\"profile\">\n                  <a href={navbarRight.user_profile_url}>{t('Profile')}</a>\n                </Menu.Item>\n              )}\n              {navbarRight.user_info_url && (\n                <Menu.Item key=\"info\">\n                  <a href={navbarRight.user_info_url}>{t('Info')}</a>\n                </Menu.Item>\n              )}\n              <Menu.Item key=\"logout\">\n                <a href={navbarRight.user_logout_url}>{t('Logout')}</a>\n              </Menu.Item>\n            </Menu.ItemGroup>,\n          ]}\n          {(navbarRight.version_string || navbarRight.version_sha) && [\n            <Menu.Divider key=\"version-info-divider\" />,\n            <Menu.ItemGroup key=\"about-section\" title={t('About')}>\n              <div className=\"about-section\">\n                {navbarRight.show_watermark && (\n                  <div css={versionInfoStyles}>\n                    {t('Powered by Apache Superset')}\n                  </div>\n                )}\n                {navbarRight.version_string && (\n                  <div css={versionInfoStyles}>\n                    {t('Version')}: {navbarRight.version_string}\n                  </div>\n                )}\n                {navbarRight.version_sha && (\n                  <div css={versionInfoStyles}>\n                    {t('SHA')}: {navbarRight.version_sha}\n                  </div>\n                )}\n                {navbarRight.build_number && (\n                  <div css={versionInfoStyles}>\n                    {t('Build')}: {navbarRight.build_number}\n                  </div>\n                )}\n              </div>\n            </Menu.ItemGroup>,\n          ]}\n        </SubMenu>\n        {navbarRight.show_language_picker && (\n          <LanguagePicker\n            locale={navbarRight.locale}\n            languages={navbarRight.languages}\n          />\n        )}\n      </Menu>\n      {navbarRight.documentation_url && (\n        <>\n          <StyledAnchor\n            href={navbarRight.documentation_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            title={navbarRight.documentation_text || t('Documentation')}\n          >\n            {navbarRight.documentation_icon ? (\n              <i className={navbarRight.documentation_icon} />\n            ) : (\n              <i className=\"fa fa-question\" />\n            )}\n          </StyledAnchor>\n          <span>&nbsp;</span>\n        </>\n      )}\n      {navbarRight.bug_report_url && (\n        <>\n          <StyledAnchor\n            href={navbarRight.bug_report_url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            title={navbarRight.bug_report_text || t('Report a bug')}\n          >\n            {navbarRight.bug_report_icon ? (\n              <i className={navbarRight.bug_report_icon} />\n            ) : (\n              <i className=\"fa fa-bug\" />\n            )}\n          </StyledAnchor>\n          <span>&nbsp;</span>\n        </>\n      )}\n      {navbarRight.user_is_anonymous && (\n        <StyledAnchor href={navbarRight.user_login_url}>\n          <i className=\"fa fa-fw fa-sign-in\" />\n          {t('Login')}\n        </StyledAnchor>\n      )}\n    </StyledDiv>\n  );\n};\n\nconst RightMenuWithQueryWrapper: React.FC<RightMenuProps> = props => {\n  const [, setQuery] = useQueryParams({\n    databaseAdded: BooleanParam,\n    datasetAdded: BooleanParam,\n  });\n\n  return <RightMenu setQuery={setQuery} {...props} />;\n};\n\n// Query param manipulation requires that, during the setup, the\n// QueryParamProvider is present and configured.\n// Superset still has multiple entry points, and not all of them have\n// the same setup, and critically, not all of them have the QueryParamProvider.\n// This wrapper ensures the RightMenu renders regardless of the provider being present.\nclass RightMenuErrorWrapper extends React.PureComponent<RightMenuProps> {\n  state = {\n    hasError: false,\n  };\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  noop = () => {};\n\n  render() {\n    if (this.state.hasError) {\n      return <RightMenu setQuery={this.noop} {...this.props} />;\n    }\n\n    return this.props.children;\n  }\n}\n\nconst RightMenuWrapper: React.FC<RightMenuProps> = props => (\n  <RightMenuErrorWrapper {...props}>\n    <RightMenuWithQueryWrapper {...props} />\n  </RightMenuErrorWrapper>\n);\n\nexport default RightMenuWrapper;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect } from 'react';\nimport { styled, css, useTheme, SupersetTheme } from '@superset-ui/core';\nimport { debounce } from 'lodash';\nimport { Global } from '@emotion/react';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { Row, Col, Grid } from 'src/components';\nimport { MainNav as DropdownMenu, MenuMode } from 'src/components/Menu';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { Link } from 'react-router-dom';\nimport { GenericLink } from 'src/components/GenericLink/GenericLink';\nimport Icons from 'src/components/Icons';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport { URL_PARAMS } from 'src/constants';\nimport {\n  MenuObjectChildProps,\n  MenuObjectProps,\n  MenuData,\n} from 'src/types/bootstrapTypes';\nimport RightMenu from './RightMenu';\n\ninterface MenuProps {\n  data: MenuData;\n  isFrontendRoute?: (path?: string) => boolean;\n}\n\nconst StyledHeader = styled.header`\n  ${({ theme }) => `\n      background-color: ${theme.colors.grayscale.light5};\n      margin-bottom: 2px;\n      z-index: 10;\n\n      &:nth-last-of-type(2) nav {\n        margin-bottom: 2px;\n      }\n      .caret {\n        display: none;\n      }\n      .navbar-brand {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        /* must be exactly the height of the Antd navbar */\n        min-height: 50px;\n        padding: ${theme.gridUnit}px\n          ${theme.gridUnit * 2}px\n          ${theme.gridUnit}px\n          ${theme.gridUnit * 4}px;\n        max-width: ${theme.gridUnit * theme.brandIconMaxWidth}px;\n        img {\n          height: 100%;\n          object-fit: contain;\n        }\n      }\n      .navbar-brand-text {\n        border-left: 1px solid ${theme.colors.grayscale.light2};\n        border-right: 1px solid ${theme.colors.grayscale.light2};\n        height: 100%;\n        color: ${theme.colors.grayscale.dark1};\n        padding-left: ${theme.gridUnit * 4}px;\n        padding-right: ${theme.gridUnit * 4}px;\n        margin-right: ${theme.gridUnit * 6}px;\n        font-size: ${theme.gridUnit * 4}px;\n        float: left;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n\n        span {\n          max-width: ${theme.gridUnit * 58}px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        @media (max-width: 1127px) {\n          display: none;\n        }\n      }\n      .main-nav .ant-menu-submenu-title > svg {\n        top: ${theme.gridUnit * 5.25}px;\n      }\n      @media (max-width: 767px) {\n        .navbar-brand {\n          float: none;\n        }\n      }\n      .ant-menu-horizontal .ant-menu-item {\n        height: 100%;\n        line-height: inherit;\n      }\n      .ant-menu > .ant-menu-item > a {\n        padding: ${theme.gridUnit * 4}px;\n      }\n      @media (max-width: 767px) {\n        .ant-menu-item {\n          padding: 0 ${theme.gridUnit * 6}px 0\n            ${theme.gridUnit * 3}px !important;\n        }\n        .ant-menu > .ant-menu-item > a {\n          padding: 0px;\n        }\n        .main-nav .ant-menu-submenu-title > svg:nth-of-type(1) {\n          display: none;\n        }\n        .ant-menu-item-active > a {\n          &:hover {\n            color: ${theme.colors.primary.base} !important;\n            background-color: transparent !important;\n          }\n        }\n      }\n      .ant-menu-item a {\n        &:hover {\n          color: ${theme.colors.grayscale.dark1};\n          background-color: ${theme.colors.primary.light5};\n          border-bottom: none;\n          margin: 0;\n          &:after {\n            opacity: 1;\n            width: 100%;\n          }\n        }\n      }\n  `}\n`;\nconst globalStyles = (theme: SupersetTheme) => css`\n  .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light.ant-menu-submenu-placement-bottomLeft {\n    border-radius: 0px;\n  }\n  .ant-menu-submenu.ant-menu-submenu-popup.ant-menu.ant-menu-light {\n    border-radius: 0px;\n  }\n  .ant-menu-vertical > .ant-menu-submenu.data-menu > .ant-menu-submenu-title {\n    height: 28px;\n    i {\n      padding-right: ${theme.gridUnit * 2}px;\n      margin-left: ${theme.gridUnit * 1.75}px;\n    }\n  }\n`;\nconst { SubMenu } = DropdownMenu;\n\nconst { useBreakpoint } = Grid;\n\nexport function Menu({\n  data: {\n    menu,\n    brand,\n    navbar_right: navbarRight,\n    settings,\n    environment_tag: environmentTag,\n  },\n  isFrontendRoute = () => false,\n}: MenuProps) {\n  const [showMenu, setMenu] = useState<MenuMode>('horizontal');\n  const screens = useBreakpoint();\n  const uiConfig = useUiConfig();\n  const theme = useTheme();\n\n  useEffect(() => {\n    function handleResize() {\n      if (window.innerWidth <= 767) {\n        setMenu('inline');\n      } else setMenu('horizontal');\n    }\n    handleResize();\n    const windowResize = debounce(() => handleResize(), 10);\n    window.addEventListener('resize', windowResize);\n    return () => window.removeEventListener('resize', windowResize);\n  }, []);\n\n  const standalone = getUrlParam(URL_PARAMS.standalone);\n  if (standalone || uiConfig.hideNav) return <></>;\n\n  const renderSubMenu = ({\n    label,\n    childs,\n    url,\n    index,\n    isFrontendRoute,\n  }: MenuObjectProps) => {\n    if (url && isFrontendRoute) {\n      return (\n        <DropdownMenu.Item key={label} role=\"presentation\">\n          <Link role=\"button\" to={url}>\n            {label}\n          </Link>\n        </DropdownMenu.Item>\n      );\n    }\n    if (url) {\n      return (\n        <DropdownMenu.Item key={label}>\n          <a href={url}>{label}</a>\n        </DropdownMenu.Item>\n      );\n    }\n    return (\n      <SubMenu\n        key={index}\n        title={label}\n        icon={showMenu === 'inline' ? <></> : <Icons.TriangleDown />}\n      >\n        {childs?.map((child: MenuObjectChildProps | string, index1: number) => {\n          if (typeof child === 'string' && child === '-' && label !== 'Data') {\n            return <DropdownMenu.Divider key={`$${index1}`} />;\n          }\n          if (typeof child !== 'string') {\n            return (\n              <DropdownMenu.Item key={`${child.label}`}>\n                {child.isFrontendRoute ? (\n                  <Link to={child.url || ''}>{child.label}</Link>\n                ) : (\n                  <a href={child.url}>{child.label}</a>\n                )}\n              </DropdownMenu.Item>\n            );\n          }\n          return null;\n        })}\n      </SubMenu>\n    );\n  };\n  return (\n    <StyledHeader className=\"top\" id=\"main-menu\" role=\"navigation\">\n      <Global styles={globalStyles(theme)} />\n      <Row>\n        <Col md={16} xs={24}>\n          <Tooltip\n            id=\"brand-tooltip\"\n            placement=\"bottomLeft\"\n            title={brand.tooltip}\n            arrowPointAtCenter\n          >\n            {isFrontendRoute(window.location.pathname) ? (\n              <GenericLink className=\"navbar-brand\" to={brand.path}>\n                <img src={brand.icon} alt={brand.alt} />\n              </GenericLink>\n            ) : (\n              <a className=\"navbar-brand\" href={brand.path}>\n                <img src={brand.icon} alt={brand.alt} />\n              </a>\n            )}\n          </Tooltip>\n          {brand.text && (\n            <div className=\"navbar-brand-text\">\n              <span>{brand.text}</span>\n            </div>\n          )}\n          <DropdownMenu\n            mode={showMenu}\n            data-test=\"navbar-top\"\n            className=\"main-nav\"\n          >\n            {menu.map((item, index) => {\n              const props = {\n                index,\n                ...item,\n                isFrontendRoute: isFrontendRoute(item.url),\n                childs: item.childs?.map(c => {\n                  if (typeof c === 'string') {\n                    return c;\n                  }\n\n                  return {\n                    ...c,\n                    isFrontendRoute: isFrontendRoute(c.url),\n                  };\n                }),\n              };\n\n              return renderSubMenu(props);\n            })}\n          </DropdownMenu>\n        </Col>\n        <Col md={8} xs={24}>\n          <RightMenu\n            align={screens.md ? 'flex-end' : 'flex-start'}\n            settings={settings}\n            navbarRight={navbarRight}\n            isFrontendRoute={isFrontendRoute}\n            environmentTag={environmentTag}\n          />\n        </Col>\n      </Row>\n    </StyledHeader>\n  );\n}\n\n// transform the menu data to reorganize components\nexport default function MenuWrapper({ data, ...rest }: MenuProps) {\n  const newMenuData = {\n    ...data,\n  };\n  // Menu items that should go into settings dropdown\n  const settingsMenus = {\n    Data: true,\n    Security: true,\n    Manage: true,\n  };\n\n  // Cycle through menu.menu to build out cleanedMenu and settings\n  const cleanedMenu: MenuObjectProps[] = [];\n  const settings: MenuObjectProps[] = [];\n  newMenuData.menu.forEach((item: any) => {\n    if (!item) {\n      return;\n    }\n\n    const children: (MenuObjectProps | string)[] = [];\n    const newItem = {\n      ...item,\n    };\n\n    // Filter childs\n    if (item.childs) {\n      item.childs.forEach((child: MenuObjectChildProps | string) => {\n        if (typeof child === 'string') {\n          children.push(child);\n        } else if ((child as MenuObjectChildProps).label) {\n          children.push(child);\n        }\n      });\n\n      newItem.childs = children;\n    }\n\n    if (!settingsMenus.hasOwnProperty(item.name)) {\n      cleanedMenu.push(newItem);\n    } else {\n      settings.push(newItem);\n    }\n  });\n\n  newMenuData.menu = cleanedMenu;\n  newMenuData.settings = settings;\n\n  return <Menu data={newMenuData} {...rest} />;\n}\n"],"names":["constructor","initialRecords","name","records","this","get","key","set","value","ExtensionsRegistry","TypedRegistry","getExtensionsRegistry","makeSingleton","getUiOverrideRegistry","GenericLink","to","component","replace","innerRef","children","rest","isUrlExternal","href","parseUrl","supersetTextDocs","getDatabaseDocumentationLinks","DOCUMENTATION_LINK","support","errorMessage","showDbInstallInstructions","Alert","closable","css","theme","colors","warning","light1","gridUnit","dark2","typography","sizes","s","l","antdWarningAlertStyles","type","showIcon","message","description","t","target","rel","className","CheckboxLabel","styled","CheckboxHalf","Icons","primary","base","CheckboxOff","grayscale","CheckboxOn","HiddenInput","InputContainer","forwardRef","ref","indeterminate","id","checked","onChange","title","labelText","defaultRef","useRef","resolvedRef","useEffect","current","htmlFor","UiConfigContext","createContext","hideTitle","hideTab","hideNav","hideChartControls","useUiConfig","useContext","EmbeddedUiConfigProvider","config","getUrlParam","URL_PARAMS","embeddedConfig","useState","Provider","_extends","Object","assign","i","arguments","length","source","prototype","hasOwnProperty","call","apply","canvasStyle","position","bottom","left","height","overflow","border","mirrorProps","prevSibling","node","count","previousElementSibling","defaultProps","basedOn","undefined","ellipsis","maxLine","onReflow","text","trimRight","winWidth","usedProps","keys","LinesEllipsis","props","super","state","clamped","units","canvas","componentDidMount","initCanvas","reflow","componentDidUpdate","prevProps","copyStyleToCanvas","componentWillUnmount","parentNode","removeChild","setState","callback","document","createElement","setAttribute","forEach","style","body","appendChild","targetStyle","window","getComputedStyle","test","split","Array","from","Error","innerHTML","map","c","join","ellipsisIndex","putEllipsis","calcIndexes","newState","slice","bind","indexes","elt","firstElementChild","index","line","offsetTop","nextElementSibling","push","lastIndex","maxOffsetTop","ndEllipsis","lastElementChild","ndPrevUnit","offsetHeight","pop","isClamped","render","_this$props","Component","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","obj","omittedKeys","ret","omit","StyledButton","Button","StyledImage","StyledInner","StyledBottom","borderRadius","light4","icon","altText","buttonText","src","alt","light5","weights","normal","light2","CONFIGURATION_METHOD","Engines","no_margin_bottom","StyledFormHeader","antDTabsStyles","antDModalNoPaddingStyles","infoTooltip","toggleStyle","formScrollableStyles","antDModalStyles","dark1","antDAlertStyles","info","m","bold","StyledAlertMargin","formHelperStyles","error","formStyles","validatedFormStyles","StyledInputContainer","families","sansSerif","StyledJsonEditor","JsonEditor","StyledExpandableForm","CTAS_CVAS_SCHEMA_FORM_HEIGHT","EXPOSE_IN_SQLLAB_FORM_HEIGHT","StyledAlignment","buttonLinkStyles","importDbButtonLinkStyles","TabHeader","EditHeaderTitle","EditHeaderSubtitle","CredentialInfoForm","SelectDatabaseStyles","StyledFooterButton","StyledStickyHeader","zIndex","max","StyledCatalogTable","StyledUploadWrapper","db","onInputChange","onTextChange","onEditorChange","onExtraInputChange","onExtraEditorChange","extraExtension","expandableModalIsOpen","expose_in_sqllab","createAsOpen","allow_ctas","allow_cvas","isFileUploadSupportedByEngine","engine_information","supports_file_upload","extraJson","JSON","parse","extra","stringify","ExtraExtensionComponent","ExtraExtensionLogo","logo","ExtensionDescription","Collapse","expandIconPosition","accordion","anticonHeight","antdCollapseStyles","header","IndeterminateCheckbox","InfoTooltip","tooltip","cx","open","placeholder","force_ctas_schema","allow_dml","cost_estimate_enabled","allows_virtual_table_explore","disable_data_preview","cache_timeout","metadata_cache_timeout","schema_cache_timeout","table_cache_timeout","allow_run_async","cancel_query_on_windows_unload","masked_encrypted_extra","json","width","server_cert","impersonate_user","allow_file_upload","schemas_allowed_for_file_upload","fontSize","fontWeight","collapsible","enabled","onEdit","metadata_params","engine_params","version","fallbackDocsUrl","fallbackDisplayText","testConnection","conf","testInProgress","SupersetText","SQLALCHEMY_DOCS_URL","SQLALCHEMY_DISPLAY_TEXT","database_name","sqlalchemy_uri","autoComplete","onClick","loading","cta","buttonStyle","wideButton","FIELD_TEXT_MAP","account","helpText","warehouse","role","validatedInputField","required","changeMethods","getValidation","validationErrors","field","parameters","validationMethods","onBlur","label","onParametersChange","CredentialInfoOptions","encryptedCredentialsMap","gsheets","bigquery","EncryptedField","isEditMode","editNewDb","uploadOption","setUploadOption","jsonUpload","valueOf","fileToUpload","setFileToUpload","isPublic","setIsPublic","showCredentialsInfo","engine","isEncrypted","encryptedField","encryptedValue","FormLabel","labelMarginBottom","defaultValue","option","copyPaste","viewBox","getElementById","click","iconSize","accept","async","event","file","files","FormFieldOrder","FORM_FIELD_MAP","host","hasTooltip","tooltipText","http_path","connect_args","port","database","username","password","visibilityToggle","access_token","query","query_input","onQueryChange","encryption","sslForced","disabled","changed","placement","credentials_info","service_account_info","catalog","tableCatalog","catalogError","sheet","idx","e","onRemoveTableCatalog","url","onAddTableCatalog","dbModel","getPlaceholder","onParametersUploadFileChange","Form","filter","properties","irregularDocumentationLinks","postgresql","mssql","isLoading","useSqlAlchemyForm","hasConnectedDb","dbName","fileList","fileCheck","isEditHeader","backend","useSqlAlchemyFormHeader","stepCurr","stepLast","default","hasConnectedDbHeader","hasDbHeader","dbModelName","noDbHeader","importDbHeader","StyledDiv","StyledRow","Row","StyledFormItem","AntdForm","StyledInputPassword","AntdInput","onSSHTunnelParametersChange","setSSHTunnelLoginMethod","usePassword","setUsePassword","AuthType","gutter","xs","md","Input","ssh_tunnel","server_address","server_port","initialValue","Radio","privateKey","iconRender","visible","EyeInvisibleOutlined","EyeOutlined","private_key","rows","private_key_password","dbFetched","useSSHTunneling","setUseSSHTunneling","setDB","isSSHTunneling","ActionType","removeSSHTunnelConfig","extensionsRegistry","DEFAULT_EXTRA","engineSpecificAlertMapping","GSheet","TabsStyled","Tabs","ErrorAlertContainer","SSHTunnelContainer","StyledBtns","dbReducer","action","trimmedState","parametersCatalog","actionPayloadJson","extraEditorChange","payload","extraInputChange","schema","trim","inputChange","parametersChange","startsWith","catalogCopy","catalogToUpdate","splice","parseInt","reduce","item","parametersSSHTunnelChange","login_method","addTableCatalogSheet","removeTableCatalogSheet","indexToDelete","editorChange","queryChange","fromEntries","URLSearchParams","textChange","fetched","entries","configuration_method","DYNAMIC_FORM","payloadCatalog","engineRootCatalog","dbSelected","configMethodChange","reset","withToasts","addDangerToast","addSuccessToast","onDatabaseAdd","onHide","show","databaseId","dbEngine","history","useReducer","dbLoading","resource","dbErrors","fetchResource","createResource","updateResource","clearError","useSingleViewResource","tabKey","setTabKey","availableDbs","getAvailableDbs","useAvailableDatabases","setValidationErrors","useDatabaseValidation","setHasConnectedDb","showCTAbtns","setShowCTAbtns","setDbName","setEditNewDb","setLoading","setTestInProgress","passwords","setPasswords","sshTunnelPasswords","setSSHTunnelPasswords","sshTunnelPrivateKeys","setSSHTunnelPrivateKeys","sshTunnelPrivateKeyPasswords","setSSHTunnelPrivateKeyPasswords","confirmedOverwrite","setConfirmedOverwrite","setFileList","importingModal","setImportingModal","importingErrorMessage","setImportingErrorMessage","passwordFields","setPasswordFields","sshTunnelPasswordFields","setSSHTunnelPasswordFields","sshTunnelPrivateKeyFields","setSSHTunnelPrivateKeyFields","sshTunnelPrivateKeyPasswordFields","setSSHTunnelPrivateKeyPasswordFields","extraExtensionComponentState","setExtraExtensionComponentState","SSHTunnelSwitchComponent","SSHTunnelSwitch","dbConfigExtraExtension","componentState","useCommonConf","dbImages","getDatabaseImages","connectionAlert","getConnectionAlert","disableSSHTunnelingForEngine","databases","find","DB","disable_ssh_tunneling","isFeatureEnabled","FeatureFlag","hasAlert","SQLALCHEMY_URI","useTabLayout","showDBError","available","Snowflake","onClose","redirectURL","location","alreadyExists","passwordsNeeded","sshPasswordNeeded","sshPrivateKeyNeeded","sshPrivateKeyPasswordNeeded","importLoading","failed","importErrored","importResource","useImportResource","msg","onSave","dbConfigExtraExtensionOnSaveError","then","dbToUpdate","errors","parameters_schema","additionalEncryptedExtra","paramConfig","originFileObj","File","setDatabaseModel","selectedDbModel","default_driver","isDynamic","driver","handleBackButtonOnFinish","handleBackButtonOnConnect","renderModalFooter","firstUpdate","catch","getElementsByClassName","scrollIntoView","importingErrorAlert","ErrorAlert","confirmOverwrite","targetValue","currentTarget","toUpperCase","errorAlert","alertErrors","error_type","values","ErrorMessageWithStackTrace","subtitle","copyText","fetchAndSetDB","r","setItem","LocalStorageKeys","renderSSHTunnelForm","method","renderDatabaseConnectionForm","Modal","onHandledPrimaryAction","primaryButtonName","centered","footer","Set","password_needed","ssh_tunnel_password_needed","ssh_tunnel_private_key_needed","ssh_tunnel_private_key_password_needed","confirm_overwrite","modalFooter","is_managed_externally","renderEditModalFooter","defaultActiveKey","activeKey","onTabClick","animated","inkBar","tabPane","tab","SqlAlchemyForm","connection","testDatabaseConnection","errorMsg","alchemyButtonLinkStyles","hostname","ipAlert","REGIONAL_IPS","regionalIPs","ipRegion","ipRange","regex","RegExp","match","DEFAULT","renderStepTwoAlert","preferred","showSearch","sort","a","b","localeCompare","ADD_DATABASE","contact_link","contact_description_link","customRequest","status","onRemove","removedFile","uid","Loading","useSelector","common","SubMenu","Menu","StyledLabel","StyledFlag","LanguagePicker","locale","languages","flag","langKey","whiteSpace","versionInfoStyles","StyledI","styledDisabled","align","StyledMenuItemWithIcon","StyledAnchor","tagStyles","styledChildMenu","RightMenu","settings","navbarRight","isFrontendRoute","environmentTag","setQuery","user","dashboardId","dashboardInfo","userValues","roles","CSV_EXTENSIONS","COLUMNAR_EXTENSIONS","EXCEL_EXTENSIONS","ALLOWED_EXTENSIONS","HAS_GSHEETS_INSTALLED","showDatabaseModal","setShowDatabaseModal","setEngine","canSql","findPermission","canDashboard","canChart","canDatabase","canDataset","canUploadData","canUploadCSV","canUploadColumnar","canUploadExcel","uploadUserPerms","showActionDropdown","allowUploads","setAllowUploads","nonExamplesDBConnected","setNonExamplesDBConnected","isAdmin","isUserAdmin","showUploads","dropdownItems","childs","GlobalMenuDataOptions","perm","disable","view","Number","isInteger","checkAllowUploads","SupersetClient","endpoint","rison","filters","col","opr","allowedDatabasesWithFileUpload","result","existsNonExamplesDatabases","menuIconAndLabel","menu","RightMenuExtension","RightMenuItemIconExtension","useTheme","DatabaseModal","databaseAdded","Label","color","o","selectable","mode","itemChose","onOpenChange","openKeys","user_is_anonymous","canShowChild","some","Fragment","Tooltip","buildMenuItem","section","child","menuItemDisplay","menuChild","user_profile_url","user_info_url","user_logout_url","version_string","version_sha","show_watermark","build_number","show_language_picker","documentation_url","documentation_text","documentation_icon","bug_report_url","bug_report_text","bug_report_icon","user_login_url","RightMenuWithQueryWrapper","useQueryParams","BooleanParam","datasetAdded","RightMenuErrorWrapper","React","hasError","noop","StyledHeader","brandIconMaxWidth","globalStyles","DropdownMenu","useBreakpoint","Grid","data","brand","navbar_right","environment_tag","showMenu","setMenu","screens","uiConfig","handleResize","innerWidth","windowResize","addEventListener","removeEventListener","styles","arrowPointAtCenter","pathname","path","index1","renderSubMenu","MenuWrapper","newMenuData","settingsMenus","Data","Security","Manage","cleanedMenu","newItem"],"sourceRoot":""}