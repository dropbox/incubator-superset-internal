{"version":3,"file":"8274.83609c2078ddfdb2c272.entry.js","mappings":"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","sources":["webpack://superset/./packages/superset-ui-core/src/chart/components/SuperChartCore.tsx","webpack://superset/./packages/superset-ui-core/src/chart/components/NoResultsComponent.tsx","webpack://superset/./packages/superset-ui-core/src/chart/components/SuperChart.tsx","webpack://superset/./packages/superset-ui-core/src/chart/components/FallbackComponent.tsx","webpack://superset/./packages/superset-ui-core/src/chart/components/createLoadableRenderer.ts","webpack://superset/./packages/superset-ui-core/src/chart/models/ChartProps.ts","webpack://superset/./packages/superset-ui-core/src/dimension/parseLength.ts","webpack://superset/./packages/superset-ui-core/src/utils/convertKeysToCamelCase.ts"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable react/jsx-sort-default-props */\nimport * as React from 'react';\nimport { createSelector } from 'reselect';\nimport getChartComponentRegistry from '../registries/ChartComponentRegistrySingleton';\nimport getChartTransformPropsRegistry from '../registries/ChartTransformPropsRegistrySingleton';\nimport ChartProps from '../models/ChartProps';\nimport createLoadableRenderer from './createLoadableRenderer';\nimport { ChartType } from '../models/ChartPlugin';\nimport {\n  PreTransformProps,\n  TransformProps,\n  PostTransformProps,\n} from '../types/TransformFunction';\nimport { HandlerFunction } from '../types/Base';\n\nfunction IDENTITY<T>(x: T) {\n  return x;\n}\n\nconst EMPTY = () => null;\n\nconst defaultProps = {\n  id: '',\n  className: '',\n  preTransformProps: IDENTITY,\n  overrideTransformProps: undefined,\n  postTransformProps: IDENTITY,\n  onRenderSuccess() {},\n  onRenderFailure() {},\n};\n\ninterface LoadingProps {\n  error: { toString(): string };\n}\n\ninterface LoadedModules {\n  Chart: ChartType;\n  transformProps: TransformProps;\n}\n\ninterface RenderProps {\n  chartProps: ChartProps;\n  preTransformProps?: PreTransformProps;\n  postTransformProps?: PostTransformProps;\n}\n\nconst BLANK_CHART_PROPS = new ChartProps();\n\nexport type Props = {\n  id?: string;\n  className?: string;\n  chartProps?: ChartProps | null;\n  chartType: string;\n  preTransformProps?: PreTransformProps;\n  overrideTransformProps?: TransformProps;\n  postTransformProps?: PostTransformProps;\n  onRenderSuccess?: HandlerFunction;\n  onRenderFailure?: HandlerFunction;\n};\n\nexport default class SuperChartCore extends React.PureComponent<Props, {}> {\n  /**\n   * The HTML element that wraps all chart content\n   */\n  container?: HTMLElement | null;\n\n  /**\n   * memoized function so it will not recompute\n   * and return previous value\n   * unless one of\n   * - preTransformProps\n   * - transformProps\n   * - postTransformProps\n   * - chartProps\n   * is changed.\n   */\n  processChartProps = createSelector(\n    (input: {\n      chartProps: ChartProps;\n      preTransformProps?: PreTransformProps;\n      transformProps?: TransformProps;\n      postTransformProps?: PostTransformProps;\n    }) => input.chartProps,\n    input => input.preTransformProps,\n    input => input.transformProps,\n    input => input.postTransformProps,\n    (chartProps, pre = IDENTITY, transform = IDENTITY, post = IDENTITY) =>\n      post(transform(pre(chartProps))),\n  );\n\n  /**\n   * memoized function so it will not recompute\n   * and return previous value\n   * unless one of\n   * - chartType\n   * - overrideTransformProps\n   * is changed.\n   */\n  private createLoadableRenderer = createSelector(\n    (input: { chartType: string; overrideTransformProps?: TransformProps }) =>\n      input.chartType,\n    input => input.overrideTransformProps,\n    (chartType, overrideTransformProps) => {\n      if (chartType) {\n        const Renderer = createLoadableRenderer({\n          loader: {\n            Chart: () => getChartComponentRegistry().getAsPromise(chartType),\n            transformProps: overrideTransformProps\n              ? () => Promise.resolve(overrideTransformProps)\n              : () => getChartTransformPropsRegistry().getAsPromise(chartType),\n          },\n          loading: (loadingProps: LoadingProps) =>\n            this.renderLoading(loadingProps, chartType),\n          render: this.renderChart,\n        });\n\n        // Trigger preloading.\n        Renderer.preload();\n\n        return Renderer;\n      }\n\n      return EMPTY;\n    },\n  );\n\n  static defaultProps = defaultProps;\n\n  private renderChart = (loaded: LoadedModules, props: RenderProps) => {\n    const { Chart, transformProps } = loaded;\n    const { chartProps, preTransformProps, postTransformProps } = props;\n\n    return (\n      <Chart\n        {...this.processChartProps({\n          chartProps,\n          preTransformProps,\n          transformProps,\n          postTransformProps,\n        })}\n      />\n    );\n  };\n\n  private renderLoading = (loadingProps: LoadingProps, chartType: string) => {\n    const { error } = loadingProps;\n\n    if (error) {\n      return (\n        <div className=\"alert alert-warning\" role=\"alert\">\n          <strong>ERROR</strong>&nbsp;\n          <code>chartType=&quot;{chartType}&quot;</code> &mdash;\n          {error.toString()}\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  private setRef = (container: HTMLElement | null) => {\n    this.container = container;\n  };\n\n  render() {\n    const {\n      id,\n      className,\n      preTransformProps,\n      postTransformProps,\n      chartProps = BLANK_CHART_PROPS,\n      onRenderSuccess,\n      onRenderFailure,\n    } = this.props;\n\n    // Create LoadableRenderer and start preloading\n    // the lazy-loaded Chart components\n    const Renderer = this.createLoadableRenderer(this.props);\n\n    // Do not render if chartProps is set to null.\n    // but the pre-loading has been started in this.createLoadableRenderer\n    // to prepare for rendering once chartProps becomes available.\n    if (chartProps === null) {\n      return null;\n    }\n\n    const containerProps: {\n      id?: string;\n      className?: string;\n    } = {};\n    if (id) {\n      containerProps.id = id;\n    }\n    if (className) {\n      containerProps.className = className;\n    }\n\n    return (\n      <div {...containerProps} ref={this.setRef}>\n        <Renderer\n          preTransformProps={preTransformProps}\n          postTransformProps={postTransformProps}\n          chartProps={chartProps}\n          onRenderSuccess={onRenderSuccess}\n          onRenderFailure={onRenderFailure}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { CSSProperties } from 'react';\nimport { css, styled } from '../../style';\nimport { t } from '../../translation';\n\nconst MESSAGE_STYLES: CSSProperties = { maxWidth: 800 };\nconst MIN_WIDTH_FOR_BODY = 250;\n\nconst Container = styled.div<{\n  width: number | string;\n  height: number | string;\n}>`\n  ${({ theme, width, height }) => css`\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    text-align: center;\n    height: ${height}px;\n    width: ${width}px;\n    padding: ${theme.gridUnit * 4}px;\n\n    & .no-results-title {\n      font-size: ${theme.typography.sizes.l}px;\n      font-weight: ${theme.typography.weights.bold};\n      padding-bottom: ${theme.gridUnit * 2};\n    }\n\n    & .no-results-body {\n      font-size: ${theme.typography.sizes.m}px;\n    }\n  `}\n`;\n\ntype Props = {\n  className?: string;\n  height: number | string;\n  id?: string;\n  width: number | string;\n};\n\nconst NoResultsComponent = ({ className, height, id, width }: Props) => {\n  // render the body if the width is auto/100% or greater than 250 pixels\n  const shouldRenderBody =\n    typeof width === 'string' || width > MIN_WIDTH_FOR_BODY;\n\n  const BODY_STRING = t(\n    'No results were returned for this query. If you expected results to be returned, ensure any filters are configured properly and the datasource contains data for the selected time range.',\n  );\n\n  return (\n    <Container\n      height={height}\n      width={width}\n      className={className}\n      id={id}\n      title={shouldRenderBody ? undefined : BODY_STRING}\n    >\n      <div style={MESSAGE_STYLES}>\n        <div className=\"no-results-title\">{t('No Results')}</div>\n        {shouldRenderBody && (\n          <div className=\"no-results-body\">{BODY_STRING}</div>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default NoResultsComponent;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode, RefObject } from 'react';\nimport ErrorBoundary, {\n  ErrorBoundaryProps,\n  FallbackProps,\n} from 'react-error-boundary';\nimport { ParentSize } from '@vx/responsive';\nimport { createSelector } from 'reselect';\nimport { withTheme } from '@emotion/react';\nimport { parseLength, Dimension } from '../../dimension';\nimport SuperChartCore, { Props as SuperChartCoreProps } from './SuperChartCore';\nimport DefaultFallbackComponent from './FallbackComponent';\nimport ChartProps, { ChartPropsConfig } from '../models/ChartProps';\nimport NoResultsComponent from './NoResultsComponent';\n\nconst defaultProps = {\n  FallbackComponent: DefaultFallbackComponent,\n  height: 400 as string | number,\n  width: '100%' as string | number,\n  enableNoResults: true,\n};\n\nexport type FallbackPropsWithDimension = FallbackProps & Partial<Dimension>;\n\nexport type WrapperProps = Dimension & {\n  children: ReactNode;\n};\n\nexport type Props = Omit<SuperChartCoreProps, 'chartProps'> &\n  Omit<ChartPropsConfig, 'width' | 'height'> & {\n    /**\n     * Set this to true to disable error boundary built-in in SuperChart\n     * and let the error propagate to upper level\n     * and handle by yourself\n     */\n    disableErrorBoundary?: boolean;\n    /** debounceTime to check for container resize */\n    debounceTime?: number;\n    /** enable \"No Results\" message if empty result set */\n    enableNoResults?: boolean;\n    /** Component to render when there are unexpected errors */\n    FallbackComponent?: React.ComponentType<FallbackPropsWithDimension>;\n    /** Event listener for unexpected errors from chart */\n    onErrorBoundary?: ErrorBoundaryProps['onError'];\n    /** Prop for form plugins uisng superchart */\n    showOverflow?: boolean;\n    /** Prop for popovercontainer ref */\n    parentRef?: RefObject<any>;\n    /** Prop for chart ref */\n    inputRef?: RefObject<any>;\n    /** Chart width */\n    height?: number | string;\n    /** Chart height */\n    width?: number | string;\n    /**\n     * Component to wrap the actual chart\n     * after the dynamic width and height are determined.\n     * This can be useful for handling tooltip z-index, etc.\n     * e.g. <div style={{ position: 'fixed' }} />\n     * You cannot just wrap this same component outside of SuperChart\n     * when using dynamic width or height\n     * because it will clash with auto-sizing.\n     */\n    Wrapper?: React.ComponentType<WrapperProps>;\n    /**\n     * Component to display when query returns no results.\n     * If not defined, NoResultsComponent is used\n     */\n    noResults?: ReactNode;\n  };\n\ntype PropsWithDefault = Props & Readonly<typeof defaultProps>;\n\nclass SuperChart extends React.PureComponent<Props, {}> {\n  /**\n   * SuperChart's core\n   */\n  core?: SuperChartCore | null;\n\n  private createChartProps = ChartProps.createSelector();\n\n  private parseDimension = createSelector(\n    ({ width }: { width: string | number; height: string | number }) => width,\n    ({ height }) => height,\n    (width, height) => {\n      // Parse them in case they are % or 'auto'\n      const widthInfo = parseLength(width);\n      const heightInfo = parseLength(height);\n\n      const boxHeight = heightInfo.isDynamic\n        ? `${heightInfo.multiplier * 100}%`\n        : heightInfo.value;\n      const boxWidth = widthInfo.isDynamic\n        ? `${widthInfo.multiplier * 100}%`\n        : widthInfo.value;\n      const style = {\n        height: boxHeight,\n        width: boxWidth,\n      };\n\n      // bounding box will ensure that when one dimension is not dynamic\n      // e.g. height = 300\n      // the auto size will be bound to that value instead of being 100% by default\n      // e.g. height: 300 instead of height: '100%'\n      const BoundingBox =\n        widthInfo.isDynamic &&\n        heightInfo.isDynamic &&\n        widthInfo.multiplier === 1 &&\n        heightInfo.multiplier === 1\n          ? React.Fragment\n          : ({ children }: { children: ReactNode }) => (\n              <div style={style}>{children}</div>\n            );\n\n      return { BoundingBox, heightInfo, widthInfo };\n    },\n  );\n\n  static defaultProps = defaultProps;\n\n  private setRef = (core: SuperChartCore | null) => {\n    this.core = core;\n  };\n\n  renderChart(width: number, height: number) {\n    const {\n      id,\n      className,\n      chartType,\n      preTransformProps,\n      overrideTransformProps,\n      postTransformProps,\n      onRenderSuccess,\n      onRenderFailure,\n      disableErrorBoundary,\n      FallbackComponent,\n      onErrorBoundary,\n      Wrapper,\n      queriesData,\n      enableNoResults,\n      noResults,\n      theme,\n      ...rest\n    } = this.props as PropsWithDefault;\n\n    const chartProps = this.createChartProps({\n      ...rest,\n      queriesData,\n      height,\n      width,\n      theme,\n    });\n\n    let chart;\n    // Render the no results component if the query data is null or empty\n    const noResultQueries =\n      enableNoResults &&\n      (!queriesData ||\n        queriesData.every(\n          ({ data }) => !data || (Array.isArray(data) && data.length === 0),\n        ));\n    if (noResultQueries) {\n      chart = noResults || (\n        <NoResultsComponent\n          id={id}\n          className={className}\n          height={height}\n          width={width}\n        />\n      );\n    } else {\n      const chartWithoutWrapper = (\n        <SuperChartCore\n          ref={this.setRef}\n          id={id}\n          className={className}\n          chartType={chartType}\n          chartProps={chartProps}\n          preTransformProps={preTransformProps}\n          overrideTransformProps={overrideTransformProps}\n          postTransformProps={postTransformProps}\n          onRenderSuccess={onRenderSuccess}\n          onRenderFailure={onRenderFailure}\n        />\n      );\n      chart = Wrapper ? (\n        <Wrapper width={width} height={height}>\n          {chartWithoutWrapper}\n        </Wrapper>\n      ) : (\n        chartWithoutWrapper\n      );\n    }\n    // Include the error boundary by default unless it is specifically disabled.\n    return disableErrorBoundary === true ? (\n      chart\n    ) : (\n      <ErrorBoundary\n        FallbackComponent={(props: FallbackProps) => (\n          <FallbackComponent width={width} height={height} {...props} />\n        )}\n        onError={onErrorBoundary}\n      >\n        {chart}\n      </ErrorBoundary>\n    );\n  }\n\n  render() {\n    const { heightInfo, widthInfo, BoundingBox } = this.parseDimension(\n      this.props as PropsWithDefault,\n    );\n\n    // If any of the dimension is dynamic, get parent's dimension\n    if (widthInfo.isDynamic || heightInfo.isDynamic) {\n      const { debounceTime } = this.props;\n\n      return (\n        <BoundingBox>\n          <ParentSize debounceTime={debounceTime}>\n            {({ width, height }) =>\n              this.renderChart(\n                widthInfo.isDynamic ? Math.floor(width) : widthInfo.value,\n                heightInfo.isDynamic ? Math.floor(height) : heightInfo.value,\n              )\n            }\n          </ParentSize>\n        </BoundingBox>\n      );\n    }\n\n    return this.renderChart(widthInfo.value, heightInfo.value);\n  }\n}\n\nexport default withTheme(SuperChart);\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { SupersetTheme } from '../../style';\nimport { FallbackPropsWithDimension } from './SuperChart';\n\nexport type Props = FallbackPropsWithDimension;\n\nexport default function FallbackComponent({\n  componentStack,\n  error,\n  height,\n  width,\n}: Props) {\n  return (\n    <div\n      css={(theme: SupersetTheme) => ({\n        backgroundColor: theme.colors.grayscale.dark2,\n        color: theme.colors.grayscale.light5,\n        overflow: 'auto',\n        padding: 32,\n      })}\n      style={{ height, width }}\n    >\n      <div>\n        <div>\n          <b>Oops! An error occurred!</b>\n        </div>\n        <code>{error ? error.toString() : 'Unknown Error'}</code>\n      </div>\n      {componentStack && (\n        <div>\n          <b>Stack Trace:</b>\n          <code>\n            {componentStack.split('\\n').map((row: string) => (\n              <div key={row}>{row}</div>\n            ))}\n          </code>\n        </div>\n      )}\n    </div>\n  );\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Loadable from 'react-loadable';\n\nexport type LoadableRendererProps = {\n  onRenderFailure?: Function;\n  onRenderSuccess?: Function;\n};\n\nconst defaultProps = {\n  onRenderFailure() {},\n  onRenderSuccess() {},\n};\n\nexport interface LoadableRenderer<Props>\n  extends React.ComponentClass<Props & LoadableRendererProps>,\n    Loadable.LoadableComponent {}\n\nexport default function createLoadableRenderer<Props, Exports>(\n  options: Loadable.OptionsWithMap<Props, Exports>,\n): LoadableRenderer<Props> {\n  const LoadableRenderer = Loadable.Map(options) as LoadableRenderer<Props>;\n\n  // Extends the behavior of LoadableComponent to provide post-render listeners\n  class CustomLoadableRenderer extends LoadableRenderer {\n    static defaultProps: object;\n\n    componentDidMount() {\n      this.afterRender();\n    }\n\n    componentDidUpdate() {\n      this.afterRender();\n    }\n\n    afterRender() {\n      const { loaded, loading, error } = this.state;\n      const { onRenderFailure, onRenderSuccess } = this.props;\n      if (!loading) {\n        if (error) {\n          (onRenderFailure as Function)(error);\n        } else if (loaded && Object.keys(loaded).length > 0) {\n          (onRenderSuccess as Function)();\n        }\n      }\n    }\n  }\n\n  CustomLoadableRenderer.defaultProps = defaultProps;\n  CustomLoadableRenderer.preload = LoadableRenderer.preload;\n\n  return CustomLoadableRenderer;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/** Type checking is disabled for this file due to reselect only supporting\n * TS declarations for selectors with up to 12 arguments. */\n// @ts-nocheck\nimport { RefObject } from 'react';\nimport { createSelector } from 'reselect';\nimport {\n  AppSection,\n  Behavior,\n  convertKeysToCamelCase,\n  Datasource,\n  FilterState,\n  JsonObject,\n} from '../..';\nimport { HandlerFunction, PlainObject, SetDataMaskHook } from '../types/Base';\nimport { QueryData, DataRecordFilters } from '..';\nimport { SupersetTheme } from '../../style';\n\n// TODO: more specific typing for these fields of ChartProps\ntype AnnotationData = PlainObject;\ntype SnakeCaseDatasource = PlainObject;\ntype CamelCaseFormData = PlainObject;\ntype SnakeCaseFormData = PlainObject;\ntype RawFormData = CamelCaseFormData | SnakeCaseFormData;\n\ntype ChartPropsSelector = (c: ChartPropsConfig) => ChartProps;\n\n/** Optional field for event handlers, renderers */\ntype Hooks = {\n  /**\n   * sync active filters between chart and dashboard, \"add\" actually\n   * also handles \"change\" and \"remove\".\n   */\n  onAddFilter?: (newFilters: DataRecordFilters, merge?: boolean) => void;\n  /** handle errors */\n  onError?: HandlerFunction;\n  /** use the vis as control to update state */\n  setControlValue?: HandlerFunction;\n  /** handle external filters */\n  setDataMask?: SetDataMaskHook;\n  /** handle tooltip */\n  setTooltip?: HandlerFunction;\n} & PlainObject;\n\n/**\n * Preferred format for ChartProps config\n */\nexport interface ChartPropsConfig {\n  annotationData?: AnnotationData;\n  /** Datasource metadata */\n  datasource?: SnakeCaseDatasource;\n  /**\n   * Formerly called \"filters\", which was misleading because it is actually\n   * initial values of the filter_box and table vis\n   */\n  initialValues?: DataRecordFilters;\n  /** Main configuration of the chart */\n  formData?: RawFormData;\n  /** Chart height */\n  height?: number;\n  /** Programmatic overrides such as event handlers, renderers */\n  hooks?: Hooks;\n  /** The data returned for all queries objects in the request */\n  queriesData?: QueryData[];\n  /** Chart width */\n  width?: number;\n  /** Own chart state that saved in dashboard */\n  ownState?: JsonObject;\n  /** Filter state that saved in dashboard */\n  filterState?: FilterState;\n  /** Set of actual behaviors that this instance of chart should use */\n  behaviors?: Behavior[];\n  /** Application section of the chart on the screen (in what components/screen it placed) */\n  appSection?: AppSection;\n  /** is the chart refreshing its contents */\n  isRefreshing?: boolean;\n  /** chart ref */\n  inputRef?: RefObject<any>;\n  /** Theme object */\n  theme: SupersetTheme;\n}\n\nconst DEFAULT_WIDTH = 800;\nconst DEFAULT_HEIGHT = 600;\n\nexport default class ChartProps<FormData extends RawFormData = RawFormData> {\n  static createSelector: () => ChartPropsSelector;\n\n  annotationData: AnnotationData;\n\n  datasource: Datasource;\n\n  rawDatasource: SnakeCaseDatasource;\n\n  initialValues: DataRecordFilters;\n\n  formData: CamelCaseFormData;\n\n  rawFormData: FormData;\n\n  height: number;\n\n  hooks: Hooks;\n\n  ownState: JsonObject;\n\n  filterState: FilterState;\n\n  queriesData: QueryData[];\n\n  width: number;\n\n  behaviors: Behavior[];\n\n  appSection?: AppSection;\n\n  isRefreshing?: boolean;\n\n  inputRef?: RefObject<any>;\n\n  theme: SupersetTheme;\n\n  constructor(config: ChartPropsConfig & { formData?: FormData } = {}) {\n    const {\n      annotationData = {},\n      datasource = {},\n      formData = {} as FormData,\n      hooks = {},\n      ownState = {},\n      filterState = {},\n      initialValues = {},\n      queriesData = [],\n      behaviors = [],\n      width = DEFAULT_WIDTH,\n      height = DEFAULT_HEIGHT,\n      appSection,\n      isRefreshing,\n      inputRef,\n      theme,\n    } = config;\n    this.width = width;\n    this.height = height;\n    this.annotationData = annotationData;\n    this.datasource = convertKeysToCamelCase(datasource) as Datasource;\n    this.rawDatasource = datasource;\n    this.formData = convertKeysToCamelCase(formData);\n    this.rawFormData = formData;\n    this.hooks = hooks;\n    this.initialValues = initialValues;\n    this.queriesData = queriesData;\n    this.ownState = ownState;\n    this.filterState = filterState;\n    this.behaviors = behaviors;\n    this.appSection = appSection;\n    this.isRefreshing = isRefreshing;\n    this.inputRef = inputRef;\n    this.theme = theme;\n  }\n}\n\n// eslint-disable-next-line func-name-matching\nChartProps.createSelector = function create(): ChartPropsSelector {\n  return createSelector(\n    (input: ChartPropsConfig) => input.annotationData,\n    input => input.datasource,\n    input => input.formData,\n    input => input.height,\n    input => input.hooks,\n    input => input.initialValues,\n    input => input.queriesData,\n    input => input.width,\n    input => input.ownState,\n    input => input.filterState,\n    input => input.behaviors,\n    input => input.appSection,\n    input => input.isRefreshing,\n    input => input.inputRef,\n    input => input.theme,\n    (\n      annotationData,\n      datasource,\n      formData,\n      height,\n      hooks,\n      initialValues,\n      queriesData,\n      width,\n      ownState,\n      filterState,\n      behaviors,\n      appSection,\n      isRefreshing,\n      inputRef,\n      theme,\n    ) =>\n      new ChartProps({\n        annotationData,\n        datasource,\n        formData,\n        height,\n        hooks,\n        initialValues,\n        queriesData,\n        ownState,\n        filterState,\n        width,\n        behaviors,\n        appSection,\n        isRefreshing,\n        inputRef,\n        theme,\n      }),\n  );\n};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nconst HUNDRED_PERCENT = { isDynamic: true, multiplier: 1 } as const;\n\nexport default function parseLength(\n  input: string | number,\n):\n  | { isDynamic: true; multiplier: number }\n  | { isDynamic: false; value: number } {\n  if (input === 'auto' || input === '100%') {\n    return HUNDRED_PERCENT;\n  }\n\n  if (\n    typeof input === 'string' &&\n    input.length > 0 &&\n    input[input.length - 1] === '%'\n  ) {\n    return { isDynamic: true, multiplier: parseFloat(input) / 100 };\n  }\n  const value = typeof input === 'number' ? input : parseFloat(input);\n\n  return { isDynamic: false, value };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport camelCase from 'lodash/camelCase';\nimport isPlainObject from 'lodash/isPlainObject';\nimport mapKeys from 'lodash/mapKeys';\n\nexport default function convertKeysToCamelCase<T>(object: T) {\n  if (object === null || object === undefined) {\n    return object;\n  }\n  if (isPlainObject(object)) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return mapKeys(object as { [key: string]: any }, (_, k) =>\n      camelCase(k),\n    ) as T;\n  }\n  throw new Error(`Cannot convert input that is not a plain object: ${object}`);\n}\n"],"names":["IDENTITY","x","EMPTY","defaultProps","id","className","preTransformProps","overrideTransformProps","undefined","postTransformProps","onRenderSuccess","onRenderFailure","BLANK_CHART_PROPS","ChartProps","SuperChartCore","container","processChartProps","input","chartProps","transformProps","pre","transform","post","createLoadableRenderer","chartType","Renderer","loader","Chart","getAsPromise","Promise","resolve","loading","loadingProps","this","renderLoading","render","renderChart","preload","loaded","props","error","role","toString","setRef","containerProps","ref","MESSAGE_STYLES","maxWidth","Container","style","theme","width","height","gridUnit","typography","sizes","l","weights","bold","m","shouldRenderBody","BODY_STRING","t","title","FallbackComponent","componentStack","css","backgroundColor","colors","grayscale","dark2","color","light5","overflow","padding","split","map","row","key","enableNoResults","SuperChart","core","createChartProps","parseDimension","widthInfo","parseLength","heightInfo","isDynamic","multiplier","value","BoundingBox","children","disableErrorBoundary","onErrorBoundary","Wrapper","queriesData","noResults","rest","chart","every","data","Array","isArray","length","chartWithoutWrapper","onError","debounceTime","ParentSize","Math","floor","options","LoadableRenderer","CustomLoadableRenderer","componentDidMount","afterRender","componentDidUpdate","state","Object","keys","DEFAULT_WIDTH","DEFAULT_HEIGHT","constructor","config","annotationData","datasource","rawDatasource","initialValues","formData","rawFormData","hooks","ownState","filterState","behaviors","appSection","isRefreshing","inputRef","createSelector","HUNDRED_PERCENT","parseFloat","convertKeysToCamelCase","object","_","k","Error"],"sourceRoot":""}