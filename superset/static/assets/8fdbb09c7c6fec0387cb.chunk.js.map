{"version":3,"file":"8fdbb09c7c6fec0387cb.chunk.js","mappings":"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","sources":["webpack://superset/./packages/superset-ui-core/src/hooks/useTruncation/useChildElementTruncation.ts","webpack://superset/./src/components/DynamicEditableTitle/index.tsx","webpack://superset/./src/components/PageHeaderWithActions/index.tsx","webpack://superset/./src/features/datasets/AddDataset/types.tsx","webpack://superset/./src/features/datasets/styles.ts","webpack://superset/./src/features/datasets/AddDataset/Header/index.tsx","webpack://superset/./src/assets/images/chart.svg","webpack://superset/./src/components/TruncatedList/index.tsx","webpack://superset/./src/features/datasets/AddDataset/EditDataset/UsageTab/index.tsx","webpack://superset/./src/features/datasets/AddDataset/EditDataset/index.tsx","webpack://superset/./src/features/datasets/hooks/useGetDatasetRelatedCounts.ts","webpack://superset/./src/components/Table/sorters.ts","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/MessageContent.tsx","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/index.tsx","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/types.ts","webpack://superset/./src/features/datasets/AddDataset/LeftPanel/index.tsx","webpack://superset/./src/features/datasets/AddDataset/Footer/index.tsx","webpack://superset/./src/features/datasets/DatasetLayout/index.tsx","webpack://superset/./src/pages/DatasetCreation/index.tsx","webpack://superset/./src/features/datasets/hooks/useDatasetLists.ts","webpack://superset/./node_modules/use-event-callback/lib/index.js"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { RefObject, useLayoutEffect, useState, useRef } from 'react';\n\n/**\n * This hook encapsulates logic to support truncation of child HTML\n * elements contained in a fixed-width parent HTML element.  Given\n * a ref to the parent element and optionally a ref to the \"+x\"\n * component that shows the number of truncated items, this hook\n * will return the number of elements that are not fully visible\n * (including those completely hidden) and whether any elements\n * are completely hidden.\n */\nconst useChildElementTruncation = (\n  elementRef: RefObject<HTMLElement>,\n  plusRef?: RefObject<HTMLElement>,\n) => {\n  const [elementsTruncated, setElementsTruncated] = useState(0);\n  const [hasHiddenElements, setHasHiddenElements] = useState(false);\n\n  const previousEffectInfoRef = useRef({\n    scrollWidth: 0,\n    parentElementWidth: 0,\n    plusRefWidth: 0,\n  });\n\n  useLayoutEffect(() => {\n    const currentElement = elementRef.current;\n    const plusRefElement = plusRef?.current;\n\n    if (!currentElement) {\n      return;\n    }\n\n    const { scrollWidth, clientWidth, childNodes } = currentElement;\n\n    // By using the result of this effect to truncate content\n    // we're effectively changing it's size.\n    // That will trigger another pass at this effect.\n    // Depending on the content elements width, that second rerender could\n    // yield a different truncate count, thus potentially leading to a\n    // rendering loop.\n    // There's only a need to recompute if the parent width or the width of\n    // the child nodes changes.\n    const previousEffectInfo = previousEffectInfoRef.current;\n    const parentElementWidth = currentElement.parentElement?.clientWidth || 0;\n    const plusRefWidth = plusRefElement?.offsetWidth || 0;\n    previousEffectInfoRef.current = {\n      scrollWidth,\n      parentElementWidth,\n      plusRefWidth,\n    };\n\n    if (\n      previousEffectInfo.parentElementWidth === parentElementWidth &&\n      previousEffectInfo.scrollWidth === scrollWidth &&\n      previousEffectInfo.plusRefWidth === plusRefWidth\n    ) {\n      return;\n    }\n\n    if (scrollWidth > clientWidth) {\n      // \"...\" is around 6px wide\n      const truncationWidth = 6;\n      const plusSize = plusRefElement?.offsetWidth || 0;\n      const maxWidth = clientWidth - truncationWidth;\n      const elementsCount = childNodes.length;\n\n      let width = 0;\n      let hiddenElements = 0;\n      for (let i = 0; i < elementsCount; i += 1) {\n        const itemWidth = (childNodes[i] as HTMLElement).offsetWidth;\n        const remainingWidth = maxWidth - truncationWidth - width - plusSize;\n\n        // assures it shows +{number} only when the item is not visible\n        if (remainingWidth <= 0) {\n          hiddenElements += 1;\n        }\n        width += itemWidth;\n      }\n\n      if (elementsCount > 1 && hiddenElements) {\n        setHasHiddenElements(true);\n        setElementsTruncated(hiddenElements);\n      } else {\n        setHasHiddenElements(false);\n        setElementsTruncated(1);\n      }\n    } else {\n      setHasHiddenElements(false);\n      setElementsTruncated(0);\n    }\n  }, [\n    elementRef.current?.offsetWidth,\n    elementRef.current?.clientWidth,\n    elementRef,\n  ]);\n\n  return [elementsTruncated, hasHiddenElements];\n};\n\nexport default useChildElementTruncation;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  KeyboardEvent,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { css, SupersetTheme, t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useResizeDetector } from 'react-resize-detector';\n\nexport type DynamicEditableTitleProps = {\n  title: string;\n  placeholder: string;\n  onSave: (title: string) => void;\n  canEdit: boolean;\n  label: string | undefined;\n};\n\nconst titleStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  font-size: ${theme.typography.sizes.xl}px;\n  font-weight: ${theme.typography.weights.bold};\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  & .dynamic-title,\n  & .dynamic-title-input {\n    display: inline-block;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  & .dynamic-title {\n    cursor: default;\n  }\n  & .dynamic-title-input {\n    border: none;\n    padding: 0;\n    outline: none;\n\n    &::placeholder {\n      color: ${theme.colors.grayscale.light1};\n    }\n  }\n\n  & .input-sizer {\n    position: absolute;\n    left: -9999px;\n    display: inline-block;\n  }\n`;\n\nexport const DynamicEditableTitle = ({\n  title,\n  placeholder,\n  onSave,\n  canEdit,\n  label,\n}: DynamicEditableTitleProps) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [currentTitle, setCurrentTitle] = useState(title || '');\n  const contentRef = useRef<HTMLInputElement>(null);\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const { width: inputWidth, ref: sizerRef } = useResizeDetector();\n  const { width: containerWidth, ref: containerRef } = useResizeDetector({\n    refreshMode: 'debounce',\n  });\n\n  useEffect(() => {\n    setCurrentTitle(title);\n  }, [title]);\n\n  useEffect(() => {\n    if (isEditing && contentRef?.current) {\n      contentRef.current.focus();\n      // move cursor and scroll to the end\n      if (contentRef.current.setSelectionRange) {\n        const { length } = contentRef.current.value;\n        contentRef.current.setSelectionRange(length, length);\n        contentRef.current.scrollLeft = contentRef.current.scrollWidth;\n      }\n    }\n  }, [isEditing]);\n\n  // a trick to make the input grow when user types text\n  // we make additional span component, place it somewhere out of view and copy input\n  // then we can measure the width of that span to resize the input element\n  useLayoutEffect(() => {\n    if (sizerRef?.current) {\n      sizerRef.current.innerHTML = (currentTitle || placeholder).replace(\n        /\\s/g,\n        '&nbsp;',\n      );\n    }\n  }, [currentTitle, placeholder, sizerRef]);\n\n  useEffect(() => {\n    if (\n      contentRef.current &&\n      contentRef.current.scrollWidth > contentRef.current.clientWidth\n    ) {\n      setShowTooltip(true);\n    } else {\n      setShowTooltip(false);\n    }\n  }, [inputWidth, containerWidth]);\n\n  const handleClick = useCallback(() => {\n    if (!canEdit || isEditing) {\n      return;\n    }\n    setIsEditing(true);\n  }, [canEdit, isEditing]);\n\n  const handleBlur = useCallback(() => {\n    if (!canEdit) {\n      return;\n    }\n    const formattedTitle = currentTitle.trim();\n    setCurrentTitle(formattedTitle);\n    if (title !== formattedTitle) {\n      onSave(formattedTitle);\n    }\n    setIsEditing(false);\n  }, [canEdit, currentTitle, onSave, title]);\n\n  const handleChange = useCallback(\n    (ev: ChangeEvent<HTMLInputElement>) => {\n      if (!canEdit || !isEditing) {\n        return;\n      }\n      setCurrentTitle(ev.target.value);\n    },\n    [canEdit, isEditing],\n  );\n\n  const handleKeyPress = useCallback(\n    (ev: KeyboardEvent<HTMLInputElement>) => {\n      if (!canEdit) {\n        return;\n      }\n      if (ev.key === 'Enter') {\n        ev.preventDefault();\n        contentRef.current?.blur();\n      }\n    },\n    [canEdit],\n  );\n\n  return (\n    <div css={titleStyles} ref={containerRef}>\n      <Tooltip\n        id=\"title-tooltip\"\n        title={showTooltip && currentTitle && !isEditing ? currentTitle : null}\n      >\n        {canEdit ? (\n          <input\n            data-test=\"editable-title-input\"\n            className=\"dynamic-title-input\"\n            aria-label={label ?? t('Title')}\n            ref={contentRef}\n            onChange={handleChange}\n            onBlur={handleBlur}\n            onClick={handleClick}\n            onKeyPress={handleKeyPress}\n            placeholder={placeholder}\n            value={currentTitle}\n            css={css`\n              cursor: ${isEditing ? 'text' : 'pointer'};\n\n              ${inputWidth &&\n              inputWidth > 0 &&\n              css`\n                width: ${inputWidth + 1}px;\n              `}\n            `}\n          />\n        ) : (\n          <span\n            className=\"dynamic-title\"\n            aria-label={label ?? t('Title')}\n            ref={contentRef}\n            data-test=\"editable-title\"\n          >\n            {currentTitle}\n          </span>\n        )}\n      </Tooltip>\n      <span ref={sizerRef} className=\"input-sizer\" aria-hidden tabIndex={-1} />\n    </div>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode, ReactElement } from 'react';\nimport { css, SupersetTheme, t, useTheme } from '@superset-ui/core';\nimport { AntdDropdown, AntdDropdownProps } from 'src/components';\nimport { TooltipPlacement } from 'src/components/Tooltip';\nimport {\n  DynamicEditableTitle,\n  DynamicEditableTitleProps,\n} from '../DynamicEditableTitle';\nimport CertifiedBadge, { CertifiedBadgeProps } from '../CertifiedBadge';\nimport FaveStar, { FaveStarProps } from '../FaveStar';\nimport Icons from '../Icons';\nimport Button from '../Button';\n\nexport const menuTriggerStyles = (theme: SupersetTheme) => css`\n  width: ${theme.gridUnit * 8}px;\n  height: ${theme.gridUnit * 8}px;\n  padding: 0;\n  border: 1px solid ${theme.colors.primary.dark2};\n\n  &.ant-btn > span.anticon {\n    line-height: 0;\n    transition: inherit;\n  }\n\n  &:hover:not(:focus) > span.anticon {\n    color: ${theme.colors.primary.light1};\n  }\n`;\n\nconst headerStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  background-color: ${theme.colors.grayscale.light5};\n  height: ${theme.gridUnit * 16}px;\n  padding: 0 ${theme.gridUnit * 4}px;\n\n  .editable-title {\n    overflow: hidden;\n\n    & > input[type='button'],\n    & > span {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      max-width: 100%;\n      white-space: nowrap;\n    }\n  }\n\n  span[role='button'] {\n    display: flex;\n    height: 100%;\n  }\n\n  .title-panel {\n    display: flex;\n    align-items: center;\n    min-width: 0;\n    margin-right: ${theme.gridUnit * 12}px;\n  }\n\n  .right-button-panel {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nconst buttonsStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  align-items: center;\n  padding-left: ${theme.gridUnit * 2}px;\n\n  & .fave-unfave-icon {\n    padding: 0 ${theme.gridUnit}px;\n\n    &:first-of-type {\n      padding-left: 0;\n    }\n  }\n`;\n\nconst additionalActionsContainerStyles = (theme: SupersetTheme) => css`\n  margin-left: ${theme.gridUnit * 2}px;\n`;\n\nexport type PageHeaderWithActionsProps = {\n  editableTitleProps: DynamicEditableTitleProps;\n  showTitlePanelItems: boolean;\n  certificatiedBadgeProps?: CertifiedBadgeProps;\n  showFaveStar: boolean;\n  faveStarProps: FaveStarProps;\n  titlePanelAdditionalItems: ReactNode;\n  rightPanelAdditionalItems: ReactNode;\n  additionalActionsMenu: ReactElement;\n  menuDropdownProps: Omit<AntdDropdownProps, 'overlay'>;\n  tooltipProps?: {\n    text?: string;\n    placement?: TooltipPlacement;\n  };\n};\n\nexport const PageHeaderWithActions = ({\n  editableTitleProps,\n  showTitlePanelItems,\n  certificatiedBadgeProps,\n  showFaveStar,\n  faveStarProps,\n  titlePanelAdditionalItems,\n  rightPanelAdditionalItems,\n  additionalActionsMenu,\n  menuDropdownProps,\n  tooltipProps,\n}: PageHeaderWithActionsProps) => {\n  const theme = useTheme();\n  return (\n    <div css={headerStyles} className=\"header-with-actions\">\n      <div className=\"title-panel\">\n        <DynamicEditableTitle {...editableTitleProps} />\n        {showTitlePanelItems && (\n          <div css={buttonsStyles}>\n            {certificatiedBadgeProps?.certifiedBy && (\n              <CertifiedBadge {...certificatiedBadgeProps} />\n            )}\n            {showFaveStar && <FaveStar {...faveStarProps} />}\n            {titlePanelAdditionalItems}\n          </div>\n        )}\n      </div>\n      <div className=\"right-button-panel\">\n        {rightPanelAdditionalItems}\n        <div css={additionalActionsContainerStyles}>\n          <AntdDropdown\n            trigger={['click']}\n            overlay={additionalActionsMenu}\n            {...menuDropdownProps}\n          >\n            <Button\n              css={menuTriggerStyles}\n              buttonStyle=\"tertiary\"\n              aria-label={t('Menu actions trigger')}\n              tooltip={tooltipProps?.text}\n              placement={tooltipProps?.placement}\n              data-test=\"actions-trigger\"\n            >\n              <Icons.MoreHoriz\n                iconColor={theme.colors.primary.dark2}\n                iconSize=\"l\"\n              />\n            </Button>\n          </AntdDropdown>\n        </div>\n      </div>\n    </div>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { DatabaseObject } from 'src/components/DatabaseSelector';\n\nexport enum DatasetActionType {\n  selectDatabase,\n  selectSchema,\n  selectTable,\n  changeDataset,\n}\n\nexport interface DatasetObject {\n  db: DatabaseObject & { owners: [number] };\n  schema?: string | null;\n  dataset_name: string;\n  table_name?: string | null;\n  explore_url?: string;\n}\n\nexport interface DatasetReducerPayloadType {\n  name: string;\n  value?: string;\n}\n\nexport type Schema = {\n  schema?: string | null | undefined;\n};\n\nexport type DSReducerActionType =\n  | {\n      type: DatasetActionType.selectDatabase;\n      payload: Partial<DatasetObject>;\n    }\n  | {\n      type:\n        | DatasetActionType.changeDataset\n        | DatasetActionType.selectSchema\n        | DatasetActionType.selectTable;\n      payload: DatasetReducerPayloadType;\n    };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\n\nexport const StyledLayoutWrapper = styled.div`\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n`;\n\nconst Column = styled.div`\n  width: 100%;\n  height: 100%;\n  flex-direction: column;\n`;\n\nexport const LeftColumn = styled(Column)`\n  width: ${({ theme }) => theme.gridUnit * 80}px;\n  height: auto;\n`;\n\nexport const RightColumn = styled(Column)`\n  height: auto;\n  display: flex;\n  flex: 1 0 auto;\n  width: calc(100% - ${({ theme }) => theme.gridUnit * 80}px);\n`;\n\nconst Row = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n`;\n\nexport const OuterRow = styled(Row)`\n  flex: 1 0 auto;\n`;\n\nexport const PanelRow = styled(Row)`\n  flex: 1 0 auto;\n  height: auto;\n`;\n\nexport const FooterRow = styled(Row)`\n  flex: 0 0 auto;\n  height: ${({ theme }) => theme.gridUnit * 16}px;\n  z-index: 0;\n`;\n\nexport const StyledLayoutHeader = styled.div`\n  ${({ theme }) => `\n  flex: 0 0 auto;\n  height: ${theme.gridUnit * 16}px;\n  border-bottom: 2px solid ${theme.colors.grayscale.light2};\n\n  .header-with-actions {\n    height: ${theme.gridUnit * 15.5}px;\n  }\n  `}\n`;\n\nexport const StyledCreateDatasetTitle = styled.div`\n  ${({ theme }) => `\n  margin: ${theme.gridUnit * 4}px;\n  font-size: ${theme.typography.sizes.xl}px;\n  font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nexport const StyledLayoutLeftPanel = styled.div`\n  ${({ theme }) => `\n  width: ${theme.gridUnit * 80}px;\n  height: 100%;\n  border-right: 1px solid ${theme.colors.grayscale.light2};\n  `}\n`;\n\nexport const StyledLayoutDatasetPanel = styled.div`\n  width: 100%;\n  position: relative;\n`;\n\nexport const StyledLayoutRightPanel = styled.div`\n  ${({ theme }) => `\n  border-left: 1px solid ${theme.colors.grayscale.light2};\n  color: ${theme.colors.success.base};\n  `}\n`;\n\nexport const StyledLayoutFooter = styled.div`\n  ${({ theme }) => `\n  height: ${theme.gridUnit * 16}px;\n  width: 100%;\n  border-top: 1px solid ${theme.colors.grayscale.light2};\n  border-bottom: 1px solid ${theme.colors.grayscale.light2};\n  color: ${theme.colors.info.base};\n  border-top: ${theme.gridUnit / 4}px solid\n    ${theme.colors.grayscale.light2};\n  padding: ${theme.gridUnit * 4}px;\n  display: flex;\n  justify-content: flex-end;\n  background-color: ${theme.colors.grayscale.light5};\n  z-index: ${theme.zIndex.max}\n  `}\n`;\n\nexport const HeaderComponentStyles = styled.div`\n  .ant-btn {\n    span {\n      margin-right: 0;\n    }\n\n    &:disabled {\n      svg {\n        color: ${({ theme }) => theme.colors.grayscale.light1};\n      }\n    }\n  }\n`;\n\nexport const disabledSaveBtnStyles = (theme: SupersetTheme) => css`\n  width: ${theme.gridUnit * 21.5}px;\n\n  &:disabled {\n    background-color: ${theme.colors.grayscale.light3};\n    color: ${theme.colors.grayscale.light1};\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { PageHeaderWithActions } from 'src/components/PageHeaderWithActions';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport { Menu } from 'src/components/Menu';\nimport { TooltipPlacement } from 'src/components/Tooltip';\nimport {\n  DatasetActionType,\n  DSReducerActionType,\n} from 'src/features/datasets/AddDataset/types';\nimport {\n  HeaderComponentStyles,\n  disabledSaveBtnStyles,\n  StyledCreateDatasetTitle,\n} from '../../styles';\n\nexport const DEFAULT_TITLE = t('New dataset');\n\nconst tooltipProps: { text: string; placement: TooltipPlacement } = {\n  text: t('Select a database table and create dataset'),\n  placement: 'bottomRight',\n};\n\nconst renderDisabledSaveButton = () => (\n  <Button\n    buttonStyle=\"primary\"\n    tooltip={tooltipProps?.text}\n    placement={tooltipProps?.placement}\n    disabled\n    css={disabledSaveBtnStyles}\n  >\n    <Icons.Save iconSize=\"m\" />\n    {t('Save')}\n  </Button>\n);\n\nconst renderOverlay = () => (\n  <Menu>\n    <Menu.Item>{t('Settings')}</Menu.Item>\n    <Menu.Item>{t('Delete')}</Menu.Item>\n  </Menu>\n);\n\nexport default function Header({\n  setDataset,\n  title = DEFAULT_TITLE,\n  editing = false,\n}: {\n  setDataset: React.Dispatch<DSReducerActionType>;\n  title?: string | null | undefined;\n  schema?: string | null | undefined;\n  editing?: boolean;\n}) {\n  const editableTitleProps = {\n    title: title ?? DEFAULT_TITLE,\n    placeholder: DEFAULT_TITLE,\n    onSave: (newDatasetName: string) => {\n      setDataset({\n        type: DatasetActionType.changeDataset,\n        payload: { name: 'dataset_name', value: newDatasetName },\n      });\n    },\n    canEdit: false,\n    label: t('dataset name'),\n  };\n\n  return (\n    <HeaderComponentStyles>\n      {editing ? (\n        <PageHeaderWithActions\n          editableTitleProps={editableTitleProps}\n          showTitlePanelItems={false}\n          showFaveStar={false}\n          faveStarProps={{ itemId: 1, saveFaveStar: () => {} }}\n          titlePanelAdditionalItems={<></>}\n          rightPanelAdditionalItems={renderDisabledSaveButton()}\n          additionalActionsMenu={renderOverlay()}\n          menuDropdownProps={{\n            disabled: true,\n          }}\n          tooltipProps={tooltipProps}\n        />\n      ) : (\n        <StyledCreateDatasetTitle>\n          {title || DEFAULT_TITLE}\n        </StyledCreateDatasetTitle>\n      )}\n    </HeaderComponentStyles>\n  );\n}\n","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgChart(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 160,\n    height: 166,\n    viewBox: \"0 0 160 166\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M123.638 8a.5.5 0 00-.5.5V158h28.758V8.5a.5.5 0 00-.5-.5h-27.758zM84.793 40.643a.5.5 0 01.5-.5h27.759a.5.5 0 01.5.5V158H84.793V40.643zM46.95 72.285a.5.5 0 00-.5.5V158h28.758V72.785a.5.5 0 00-.5-.5H46.95zM8.604 93.715a.5.5 0 00-.5.5V158h28.758V94.215a.5.5 0 00-.5-.5H8.604z\",\n    fill: \"#FAFAFA\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M123.138 158h-.5v.5h.5v-.5zm28.758 0v.5h.5v-.5h-.5zm-38.344 0v.5h.5v-.5h-.5zm-28.759 0h-.5v.5h.5v-.5zm-38.344-.001h-.5v.5h.5v-.5zm28.758 0v.5h.5v-.5h-.5zM8.104 158h-.5v.5h.5v-.5zm28.758 0v.5h.5v-.5h-.5zM123.638 8.5v-1a1 1 0 00-1 1h1zm0 149.5V8.5h-1V158h1zm28.258-.5h-28.758v1h28.758v-1zm-.5-149V158h1V8.5h-1zm0 0h1a1 1 0 00-1-1v1zm-27.758 0h27.758v-1h-27.758v1zM85.293 39.643a1 1 0 00-1 1h1v-1zm27.759 0H85.293v1h27.759v-1zm1 1a1 1 0 00-1-1v1h1zm0 117.357V40.643h-1V158h1zm-29.259.5h28.759v-1H84.793v1zm-.5-117.857V158h1V40.643h-1zM46.95 72.785v-1a1 1 0 00-1 1h1zm0 85.214V72.785h-1V158h1zm28.258-.5H46.45v1h28.758v-1zm-.5-84.714V158h1V72.785h-1zm0 0h1a1 1 0 00-1-1v1zm-27.758 0h27.758v-1H46.95v1zM8.604 94.215v-1a1 1 0 00-1 1h1zm0 63.785V94.215h-1V158h1zm28.258-.5H8.104v1h28.758v-1zm-.5-63.285V158h1V94.215h-1zm0 0h1a1 1 0 00-1-1v1zm-27.758 0h27.758v-1H8.604v1z\",\n    fill: \"#D9D9D9\"\n  })));\n}\n\nexport default SvgChart;","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode, useMemo, useRef } from 'react';\nimport { styled, t, useTruncation } from '@superset-ui/core';\nimport { Tooltip } from '../Tooltip';\n\nexport type TruncatedListProps<ListItemType> = {\n  /**\n   * Array of input items of type `ListItemType`.\n   */\n  items: ListItemType[];\n\n  /**\n   * Renderer for items not overflowed into the tooltip.\n   * Required if `ListItemType` is not renderable by React.\n   */\n  renderVisibleItem?: (item: ListItemType) => ReactNode;\n\n  /**\n   * Renderer for items that are overflowed into the tooltip.\n   * Required if `ListItemType` is not renderable by React.\n   */\n  renderTooltipItem?: (item: ListItemType) => ReactNode;\n\n  /**\n   * Returns the React key for an item.\n   */\n  getKey?: (item: ListItemType) => React.Key;\n\n  /**\n   * The max number of links that should appear in the tooltip.\n   */\n  maxLinks?: number;\n};\n\nconst StyledTruncatedList = styled.div`\n  & > span {\n    width: 100%;\n    display: flex;\n\n    .ant-tooltip-open {\n      display: inline;\n    }\n  }\n`;\n\nconst StyledVisibleItems = styled.span`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  display: inline-block;\n  width: 100%;\n  vertical-align: bottom;\n`;\n\nconst StyledVisibleItem = styled.span`\n  &:not(:last-child)::after {\n    content: ', ';\n  }\n`;\n\nconst StyledTooltipItem = styled.div`\n  .link {\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    display: block;\n    text-decoration: underline;\n  }\n`;\n\nconst StyledPlus = styled.span`\n  ${({ theme }) => `\n  cursor: pointer;\n  color: ${theme.colors.primary.dark1};\n  font-weight: ${theme.typography.weights.normal};\n  `}\n`;\n\nexport default function TruncatedList<ListItemType>({\n  items,\n  renderVisibleItem = item => item,\n  renderTooltipItem = item => item,\n  getKey = item => item as unknown as React.Key,\n  maxLinks = 20,\n}: TruncatedListProps<ListItemType>) {\n  const itemsNotInTooltipRef = useRef<HTMLDivElement>(null);\n  const plusRef = useRef<HTMLDivElement>(null);\n  const [elementsTruncated, hasHiddenElements] = useTruncation(\n    itemsNotInTooltipRef,\n    plusRef,\n  ) as [number, boolean];\n\n  const nMoreItems = useMemo(\n    () => (items.length > maxLinks ? items.length - maxLinks : undefined),\n    [items, maxLinks],\n  );\n\n  const itemsNotInTooltip = useMemo(\n    () => (\n      <StyledVisibleItems ref={itemsNotInTooltipRef} data-test=\"crosslinks\">\n        {items.map(item => (\n          <StyledVisibleItem key={getKey(item)}>\n            {renderVisibleItem(item)}\n          </StyledVisibleItem>\n        ))}\n      </StyledVisibleItems>\n    ),\n    [getKey, items, renderVisibleItem],\n  );\n\n  const itemsInTooltip = useMemo(\n    () =>\n      items\n        .slice(0, maxLinks)\n        .map(item => (\n          <StyledTooltipItem key={getKey(item)}>\n            {renderTooltipItem(item)}\n          </StyledTooltipItem>\n        )),\n    [getKey, items, maxLinks, renderTooltipItem],\n  );\n\n  return (\n    <StyledTruncatedList>\n      <Tooltip\n        placement=\"top\"\n        title={\n          elementsTruncated ? (\n            <>\n              {itemsInTooltip}\n              {nMoreItems && <span>{t('+ %s more', nMoreItems)}</span>}\n            </>\n          ) : null\n        }\n      >\n        {itemsNotInTooltip}\n        {hasHiddenElements && (\n          <StyledPlus ref={plusRef}>+{elementsTruncated}</StyledPlus>\n        )}\n      </Tooltip>\n    </StyledTruncatedList>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  css,\n  ensureIsArray,\n  styled,\n  SupersetTheme,\n  t,\n} from '@superset-ui/core';\nimport Chart, { ChartLinkedDashboard } from 'src/types/Chart';\nimport Table, {\n  ColumnsType,\n  TableSize,\n  OnChangeFunction,\n} from 'src/components/Table';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport ChartImage from 'src/assets/images/chart.svg';\nimport Icons from 'src/components/Icons';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { useListViewResource } from 'src/views/CRUD/hooks';\nimport { FilterOperator } from 'src/components/ListView';\nimport moment from 'moment';\nimport TruncatedList from 'src/components/TruncatedList';\n\ninterface DatasetUsageProps {\n  datasetId: string;\n}\n\nconst DEFAULT_PAGE_SIZE = 25;\n\nconst getLinkProps = (dashboard: ChartLinkedDashboard) => ({\n  key: dashboard.id,\n  to: `/superset/dashboard/${dashboard.id}`,\n  target: '_blank',\n  rel: 'noreferer noopener',\n  children: dashboard.dashboard_title,\n});\n\nconst tooltipItemCSS = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light5};\n  text-decoration: underline;\n  &:hover {\n    color: inherit;\n  }\n`;\n\nconst columns: ColumnsType<Chart> = [\n  {\n    key: 'slice_name',\n    title: t('Chart'),\n    width: '320px',\n    sorter: true,\n    render: (value, record) => <Link to={record.url}>{record.slice_name}</Link>,\n  },\n  {\n    key: 'owners',\n    title: t('Chart owners'),\n    width: '242px',\n    render: (value, record) => (\n      <TruncatedList\n        items={\n          record.owners?.map(\n            owner => `${owner.first_name} ${owner.last_name}`,\n          ) ?? []\n        }\n      />\n    ),\n  },\n  {\n    key: 'last_saved_at',\n    title: t('Chart last modified'),\n    width: '209px',\n    sorter: true,\n    defaultSortOrder: 'descend',\n    render: (value, record) =>\n      record.last_saved_at ? moment.utc(record.last_saved_at).fromNow() : null,\n  },\n  {\n    key: 'last_saved_by.first_name',\n    title: t('Chart last modified by'),\n    width: '216px',\n    sorter: true,\n    render: (value, record) =>\n      record.last_saved_by\n        ? `${record.last_saved_by.first_name} ${record.last_saved_by.last_name}`\n        : null,\n  },\n  {\n    key: 'dashboards',\n    title: t('Dashboard usage'),\n    width: '420px',\n    render: (value, record) => (\n      <TruncatedList<ChartLinkedDashboard>\n        items={record.dashboards}\n        renderVisibleItem={dashboard => <Link {...getLinkProps(dashboard)} />}\n        renderTooltipItem={dashboard => (\n          <Link {...getLinkProps(dashboard)} css={tooltipItemCSS} />\n        )}\n        getKey={dashboard => dashboard.id}\n      />\n    ),\n  },\n];\n\nconst emptyStateTableCSS = (theme: SupersetTheme) => css`\n  && th.ant-table-cell {\n    color: ${theme.colors.grayscale.light1};\n  }\n\n  .ant-table-placeholder {\n    display: none;\n  }\n`;\n\nconst emptyStateButtonText = (\n  <>\n    <Icons.PlusOutlined\n      iconSize=\"m\"\n      css={css`\n        & > .anticon {\n          line-height: 0;\n        }\n      `}\n    />\n    {t('Create chart with dataset')}\n  </>\n);\n\nconst StyledEmptyStateBig = styled(EmptyStateBig)`\n  margin: ${({ theme }) => 13 * theme.gridUnit}px 0;\n`;\n\n/**\n * Hook that uses the useListViewResource hook to retrieve records\n * based on pagination state.\n */\nconst useDatasetChartRecords = (datasetId: string) => {\n  const { addDangerToast } = useToasts();\n\n  // Always filters charts by dataset\n  const baseFilters = useMemo(\n    () => [\n      {\n        id: 'datasource_id',\n        operator: FilterOperator.equals,\n        value: datasetId,\n      },\n    ],\n    [datasetId],\n  );\n\n  // Returns request status/results and function for re-fetching\n  const {\n    state: { loading, resourceCount, resourceCollection },\n    fetchData,\n  } = useListViewResource<Chart>(\n    'chart',\n    t('chart'),\n    addDangerToast,\n    true,\n    [],\n    baseFilters,\n  );\n\n  // Adds `key` field\n  const resourceCollectionWithKey = useMemo(\n    () => resourceCollection.map(o => ({ ...o, key: o.id })),\n    [resourceCollection],\n  );\n\n  // Called by table with updated table state to fetch new data\n  // @ts-ignore\n  const onChange: OnChangeFunction = useCallback(\n    // @ts-ignore\n    (tablePagination, tableFilters, tableSorter) => {\n      const pageIndex = (tablePagination.current ?? 1) - 1;\n      const pageSize = tablePagination.pageSize ?? 0;\n      const sortBy = ensureIsArray(tableSorter)\n        .filter(({ columnKey }) => typeof columnKey === 'string')\n        .map(({ columnKey, order }) => ({\n          id: columnKey as string,\n          desc: order === 'descend',\n        }));\n      fetchData({ pageIndex, pageSize, sortBy, filters: [] });\n    },\n    [fetchData],\n  );\n\n  // Initial data request\n  useEffect(() => {\n    fetchData({\n      pageIndex: 0,\n      pageSize: DEFAULT_PAGE_SIZE,\n      sortBy: [{ id: 'last_saved_at', desc: true }],\n      filters: [],\n    });\n  }, [fetchData]);\n\n  return {\n    loading,\n    recordCount: resourceCount,\n    data: resourceCollectionWithKey,\n    onChange,\n  };\n};\n\nconst DatasetUsage = ({ datasetId }: DatasetUsageProps) => {\n  const { loading, recordCount, data, onChange } =\n    useDatasetChartRecords(datasetId);\n\n  const emptyStateButtonAction = useCallback(\n    () =>\n      window.open(\n        `/explore/?dataset_type=table&dataset_id=${datasetId}`,\n        '_blank',\n      ),\n    [datasetId],\n  );\n\n  return (\n    <div css={!data.length ? emptyStateTableCSS : null}>\n      <Table\n        columns={columns}\n        data={data}\n        size={TableSize.MIDDLE}\n        defaultPageSize={DEFAULT_PAGE_SIZE}\n        recordCount={recordCount}\n        loading={loading}\n        onChange={onChange}\n      />\n      {!data.length && !loading ? (\n        <StyledEmptyStateBig\n          image={<ChartImage />}\n          title={t('No charts')}\n          description={t('This dataset is not used to power any charts.')}\n          buttonText={emptyStateButtonText}\n          buttonAction={emptyStateButtonAction}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nexport default DatasetUsage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, t } from '@superset-ui/core';\nimport React from 'react';\nimport useGetDatasetRelatedCounts from 'src/features/datasets/hooks/useGetDatasetRelatedCounts';\nimport Badge from 'src/components/Badge';\nimport Tabs from 'src/components/Tabs';\nimport UsageTab from './UsageTab';\n\nconst StyledTabs = styled(Tabs)`\n  ${({ theme }) => `\n  margin-top: ${theme.gridUnit * 8.5}px;\n  padding-left: ${theme.gridUnit * 4}px;\n  padding-right: ${theme.gridUnit * 4}px;\n\n  .ant-tabs-top > .ant-tabs-nav::before {\n    width: ${theme.gridUnit * 50}px;\n  }\n  `}\n`;\n\nconst TabStyles = styled.div`\n  ${({ theme }) => `\n  .ant-badge {\n    width: ${theme.gridUnit * 8}px;\n    margin-left: ${theme.gridUnit * 2.5}px;\n  }\n  `}\n`;\n\ninterface EditPageProps {\n  id: string;\n}\n\nconst TRANSLATIONS = {\n  USAGE_TEXT: t('Usage'),\n  COLUMNS_TEXT: t('Columns'),\n  METRICS_TEXT: t('Metrics'),\n};\n\nconst EditPage = ({ id }: EditPageProps) => {\n  const { usageCount } = useGetDatasetRelatedCounts(id);\n\n  const usageTab = (\n    <TabStyles>\n      <span>{TRANSLATIONS.USAGE_TEXT}</span>\n      {usageCount > 0 && <Badge count={usageCount} />}\n    </TabStyles>\n  );\n\n  return (\n    <StyledTabs moreIcon={null} fullWidth={false}>\n      <Tabs.TabPane tab={TRANSLATIONS.COLUMNS_TEXT} key=\"1\" />\n      <Tabs.TabPane tab={TRANSLATIONS.METRICS_TEXT} key=\"2\" />\n      <Tabs.TabPane tab={usageTab} key=\"3\">\n        <UsageTab datasetId={id} />\n      </Tabs.TabPane>\n    </StyledTabs>\n  );\n};\n\nexport default EditPage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect, useCallback } from 'react';\nimport { SupersetClient, logging, t } from '@superset-ui/core';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\n\nconst useGetDatasetRelatedCounts = (id: string) => {\n  const [usageCount, setUsageCount] = useState(0);\n\n  const getDatasetRelatedObjects = useCallback(\n    () =>\n      SupersetClient.get({\n        endpoint: `/api/v1/dataset/${id}/related_objects`,\n      })\n        .then(({ json }) => {\n          setUsageCount(json?.charts.count);\n        })\n        .catch(error => {\n          addDangerToast(\n            t(`There was an error fetching dataset's related objects`),\n          );\n          logging.error(error);\n        }),\n    [id],\n  );\n\n  useEffect(() => {\n    // Todo: this useEffect should be used to call all count methods conncurently\n    // when we populate data for the new tabs. For right separating out this\n    // api call for building the usage page.\n    if (id) {\n      getDatasetRelatedObjects();\n    }\n  }, [id, getDatasetRelatedObjects]);\n\n  return { usageCount };\n};\n\nexport default useGetDatasetRelatedCounts;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * @param key The name of the row's attribute used to compare values for alphabetical sorting\n * @param a First row object to compare\n * @param b Second row object to compare\n * @returns number\n */\nexport const alphabeticalSort = (key: string, a: object, b: object): number =>\n  a?.[key]?.localeCompare?.(b?.[key]);\n\n/**\n * @param key The name of the row's attribute used to compare values for numerical sorting\n * @param a First row object to compare\n * @param b Second row object to compare\n * @returns number\n */\nexport const numericalSort = (key: string, a: object, b: object): number =>\n  a?.[key] - b?.[key];\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { EmptyStateBig } from 'src/components/EmptyState';\n\nconst StyledContainer = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 8}px\n    ${({ theme }) => theme.gridUnit * 6}px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nconst StyledEmptyStateBig = styled(EmptyStateBig)`\n  max-width: 50%;\n\n  p {\n    width: ${({ theme }) => theme.gridUnit * 115}px;\n  }\n`;\n\nexport const SELECT_MESSAGE = t(\n  'Datasets can be created from database tables or SQL queries. Select a database table to the left or ',\n);\nexport const CREATE_MESSAGE = t('create dataset from SQL query');\nexport const VIEW_DATASET_MESSAGE = t(\n  ' to open SQL Lab. From there you can save the query as a dataset.',\n);\n\nconst renderEmptyDescription = () => (\n  <>\n    {SELECT_MESSAGE}\n    <span\n      role=\"button\"\n      onClick={() => {\n        window.location.href = `/superset/sqllab`;\n      }}\n      tabIndex={0}\n    >\n      {CREATE_MESSAGE}\n    </span>\n    {VIEW_DATASET_MESSAGE}\n  </>\n);\n\nexport const SELECT_TABLE_TITLE = t('Select dataset source');\nexport const NO_COLUMNS_TITLE = t('No table columns');\nexport const NO_COLUMNS_DESCRIPTION = t(\n  'This database table does not contain any data. Please select a different table.',\n);\nexport const ERROR_TITLE = t('An Error Occurred');\nexport const ERROR_DESCRIPTION = t(\n  'Unable to load columns for the selected table. Please select a different table.',\n);\n\ninterface MessageContentProps {\n  hasError: boolean;\n  tableName?: string | null;\n  hasColumns: boolean;\n}\n\nexport const MessageContent = (props: MessageContentProps) => {\n  const { hasError, tableName, hasColumns } = props;\n  let currentImage: string | undefined = 'empty-dataset.svg';\n  let currentTitle = SELECT_TABLE_TITLE;\n  let currentDescription = renderEmptyDescription();\n  if (hasError) {\n    currentTitle = ERROR_TITLE;\n    currentDescription = <>{ERROR_DESCRIPTION}</>;\n    currentImage = undefined;\n  } else if (tableName && !hasColumns) {\n    currentImage = 'no-columns.svg';\n    currentTitle = NO_COLUMNS_TITLE;\n    currentDescription = <>{NO_COLUMNS_DESCRIPTION}</>;\n  }\n  return (\n    <StyledContainer>\n      <StyledEmptyStateBig\n        image={currentImage}\n        title={currentTitle}\n        description={currentDescription}\n      />\n    </StyledContainer>\n  );\n};\n\nexport default MessageContent;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, styled, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport Alert from 'src/components/Alert';\nimport Table, { ColumnsType, TableSize } from 'src/components/Table';\nimport { alphabeticalSort } from 'src/components/Table/sorters';\n// @ts-ignore\nimport LOADING_GIF from 'src/assets/images/loading.gif';\nimport { DatasetObject } from 'src/features/datasets/AddDataset/types';\nimport { ITableColumn } from './types';\nimport MessageContent from './MessageContent';\n\n/**\n * Enum defining CSS position options\n */\nenum EPosition {\n  ABSOLUTE = 'absolute',\n  RELATIVE = 'relative',\n}\n\n/**\n * Interface for StyledHeader\n */\ninterface StyledHeaderProps {\n  /**\n   * Determine the CSS positioning type\n   * Vertical centering of loader, No columns screen, and select table screen\n   * gets offset when the header position is relative and needs to be absolute, but table\n   * needs this positioned relative to render correctly\n   */\n  position: EPosition;\n}\n\nconst LOADER_WIDTH = 200;\nconst SPINNER_WIDTH = 120;\nconst HALF = 0.5;\nconst MARGIN_MULTIPLIER = 3;\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n  ${({ theme, position }) => `\n  position: ${position};\n  margin: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  font-size: ${theme.gridUnit * 6}px;\n  font-weight: ${theme.typography.weights.medium};\n  padding-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  .anticon:first-of-type {\n    margin-right: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  }\n\n  .anticon:nth-of-type(2) {\n    margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  `}\n`;\n\nconst StyledTitle = styled.div`\n  ${({ theme }) => `\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  margin-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nconst LoaderContainer = styled.div`\n  ${({ theme }) => `\n  padding: ${theme.gridUnit * 8}px\n    ${theme.gridUnit * 6}px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  `}\n`;\n\nconst StyledLoader = styled.div`\n  ${({ theme }) => `\n  max-width: 50%;\n  width: ${LOADER_WIDTH}px;\n\n  img {\n    width: ${SPINNER_WIDTH}px;\n    margin-left: ${(LOADER_WIDTH - SPINNER_WIDTH) * HALF}px;\n  }\n\n  div {\n    width: 100%;\n    margin-top: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n    text-align: center;\n    font-weight: ${theme.typography.weights.normal};\n    font-size: ${theme.typography.sizes.l}px;\n    color: ${theme.colors.grayscale.light1};\n  }\n  `}\n`;\n\nconst TableContainerWithBanner = styled.div`\n  ${({ theme }) => `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 60}px);\n  overflow: auto;\n  `}\n`;\n\nconst TableContainerWithoutBanner = styled.div`\n  ${({ theme }) => `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 30}px);\n  overflow: auto;\n  `}\n`;\n\nconst TableScrollContainer = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst StyledAlert = styled(Alert)`\n  ${({ theme }) => `\n  border: 1px solid ${theme.colors.info.base};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 6}px ${theme.gridUnit * 6}px\n    ${theme.gridUnit * 8}px;\n  .view-dataset-button {\n    position: absolute;\n    top: ${theme.gridUnit * 4}px;\n    right: ${theme.gridUnit * 4}px;\n    font-weight: ${theme.typography.weights.normal};\n\n    &:hover {\n      color: ${theme.colors.secondary.dark3};\n      text-decoration: underline;\n    }\n  }\n  `}\n`;\n\nexport const REFRESHING = t('Refreshing columns');\nexport const COLUMN_TITLE = t('Table columns');\nexport const ALT_LOADING = t('Loading');\n\nconst pageSizeOptions = ['5', '10', '15', '25'];\nconst DEFAULT_PAGE_SIZE = 25;\n\n// Define the columns for Table instance\nexport const tableColumnDefinition: ColumnsType<ITableColumn> = [\n  {\n    title: 'Column Name',\n    dataIndex: 'name',\n    key: 'name',\n    sorter: (a: ITableColumn, b: ITableColumn) =>\n      alphabeticalSort('name', a, b),\n  },\n  {\n    title: 'Datatype',\n    dataIndex: 'type',\n    key: 'type',\n    width: '100px',\n    sorter: (a: ITableColumn, b: ITableColumn) =>\n      alphabeticalSort('type', a, b),\n  },\n];\n\n/**\n * Props interface for DatasetPanel\n */\nexport interface IDatasetPanelProps {\n  /**\n   * Name of the database table\n   */\n  tableName?: string | null;\n  /**\n   * Array of ITableColumn instances with name and type attributes\n   */\n  columnList: ITableColumn[];\n  /**\n   * Boolean indicating if there is an error state\n   */\n  hasError: boolean;\n  /**\n   * Boolean indicating if the component is in a loading state\n   */\n  loading: boolean;\n  datasets?: DatasetObject[] | undefined;\n}\n\nconst EXISTING_DATASET_DESCRIPTION = t(\n  'This table already has a dataset associated with it. You can only associate one dataset with a table.\\n',\n);\nconst VIEW_DATASET = t('View Dataset');\n\nconst renderExistingDatasetAlert = (dataset?: DatasetObject) => (\n  <StyledAlert\n    closable={false}\n    type=\"info\"\n    showIcon\n    message={t('This table already has a dataset')}\n    description={\n      <>\n        {EXISTING_DATASET_DESCRIPTION}\n        <span\n          role=\"button\"\n          onClick={() => {\n            window.open(\n              dataset?.explore_url,\n              '_blank',\n              'noreferrer noopener popup=false',\n            );\n          }}\n          tabIndex={0}\n          className=\"view-dataset-button\"\n        >\n          {VIEW_DATASET}\n        </span>\n      </>\n    }\n  />\n);\n\nconst DatasetPanel = ({\n  tableName,\n  columnList,\n  loading,\n  hasError,\n  datasets,\n}: IDatasetPanelProps) => {\n  const theme = useTheme();\n  const hasColumns = columnList?.length > 0 ?? false;\n  const datasetNames = datasets?.map(dataset => dataset.table_name);\n  const tableWithDataset = datasets?.find(\n    dataset => dataset.table_name === tableName,\n  );\n\n  let component;\n  let loader;\n  if (loading) {\n    loader = (\n      <LoaderContainer>\n        <StyledLoader>\n          <img alt={ALT_LOADING} src={LOADING_GIF} />\n          <div>{REFRESHING}</div>\n        </StyledLoader>\n      </LoaderContainer>\n    );\n  }\n  if (!loading) {\n    if (!loading && tableName && hasColumns && !hasError) {\n      component = (\n        <>\n          <StyledTitle>{COLUMN_TITLE}</StyledTitle>\n          {tableWithDataset ? (\n            <TableContainerWithBanner>\n              <TableScrollContainer>\n                <Table\n                  loading={loading}\n                  size={TableSize.SMALL}\n                  columns={tableColumnDefinition}\n                  data={columnList}\n                  pageSizeOptions={pageSizeOptions}\n                  defaultPageSize={DEFAULT_PAGE_SIZE}\n                />\n              </TableScrollContainer>\n            </TableContainerWithBanner>\n          ) : (\n            <TableContainerWithoutBanner>\n              <TableScrollContainer>\n                <Table\n                  loading={loading}\n                  size={TableSize.SMALL}\n                  columns={tableColumnDefinition}\n                  data={columnList}\n                  pageSizeOptions={pageSizeOptions}\n                  defaultPageSize={DEFAULT_PAGE_SIZE}\n                />\n              </TableScrollContainer>\n            </TableContainerWithoutBanner>\n          )}\n        </>\n      );\n    } else {\n      component = (\n        <MessageContent\n          hasColumns={hasColumns}\n          hasError={hasError}\n          tableName={tableName}\n        />\n      );\n    }\n  }\n\n  return (\n    <>\n      {tableName && (\n        <>\n          {datasetNames?.includes(tableName) &&\n            renderExistingDatasetAlert(tableWithDataset)}\n          <StyledHeader\n            position={\n              !loading && hasColumns ? EPosition.RELATIVE : EPosition.ABSOLUTE\n            }\n            title={tableName || ''}\n          >\n            {tableName && (\n              <Icons.Table iconColor={theme.colors.grayscale.base} />\n            )}\n            {tableName}\n          </StyledHeader>\n        </>\n      )}\n      {component}\n      {loader}\n    </>\n  );\n};\n\nexport default DatasetPanel;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { SupersetClient, logging, t } from '@superset-ui/core';\nimport { DatasetObject } from 'src/features/datasets/AddDataset/types';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport DatasetPanel from './DatasetPanel';\nimport { ITableColumn, IDatabaseTable, isIDatabaseTable } from './types';\n\n/**\n * Interface for the getTableMetadata API call\n */\ninterface IColumnProps {\n  /**\n   * Unique id of the database\n   */\n  dbId: number;\n  /**\n   * Name of the table\n   */\n  tableName: string;\n  /**\n   * Name of the schema\n   */\n  schema: string;\n}\n\nexport interface IDatasetPanelWrapperProps {\n  /**\n   * Name of the database table\n   */\n  tableName?: string | null;\n  /**\n   * Database ID\n   */\n  dbId?: number;\n  /**\n   * The selected schema for the database\n   */\n  schema?: string | null;\n  setHasColumns?: Function;\n  datasets?: DatasetObject[] | undefined;\n}\n\nconst DatasetPanelWrapper = ({\n  tableName,\n  dbId,\n  schema,\n  setHasColumns,\n  datasets,\n}: IDatasetPanelWrapperProps) => {\n  const [columnList, setColumnList] = useState<ITableColumn[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const tableNameRef = useRef(tableName);\n\n  const getTableMetadata = async (props: IColumnProps) => {\n    const { dbId, tableName, schema } = props;\n    setLoading(true);\n    setHasColumns?.(false);\n    const path = `/api/v1/database/${dbId}/table/${tableName}/${schema}/`;\n    try {\n      const response = await SupersetClient.get({\n        endpoint: path,\n      });\n\n      if (isIDatabaseTable(response?.json)) {\n        const table: IDatabaseTable = response.json as IDatabaseTable;\n        /**\n         *  The user is able to click other table columns while the http call for last selected table column is made\n         *  This check ensures we process the response that matches the last selected table name and ignore the others\n         */\n        if (table.name === tableNameRef.current) {\n          setColumnList(table.columns);\n          setHasColumns?.(table.columns.length > 0);\n          setHasError(false);\n        }\n      } else {\n        setColumnList([]);\n        setHasColumns?.(false);\n        setHasError(true);\n        addDangerToast(\n          t(\n            'The API response from %s does not match the IDatabaseTable interface.',\n            path,\n          ),\n        );\n        logging.error(\n          t(\n            'The API response from %s does not match the IDatabaseTable interface.',\n            path,\n          ),\n        );\n      }\n    } catch (error) {\n      setColumnList([]);\n      setHasColumns?.(false);\n      setHasError(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    tableNameRef.current = tableName;\n    if (tableName && schema && dbId) {\n      getTableMetadata({ tableName, dbId, schema });\n    }\n    // getTableMetadata is a const and should not be in dependency array\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableName, dbId, schema]);\n\n  return (\n    <DatasetPanel\n      columnList={columnList}\n      hasError={hasError}\n      loading={loading}\n      tableName={tableName}\n      datasets={datasets}\n    />\n  );\n};\n\nexport default DatasetPanelWrapper;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Interface for table columns dataset\n */\nexport interface ITableColumn {\n  /**\n   * Name of the column\n   */\n  name: string;\n  /**\n   * Datatype of the column\n   */\n  type: string;\n}\n\n/**\n * Checks if a given item matches the ITableColumn interface\n * @param item Object to check if it matches the ITableColumn interface\n * @returns boolean true if matches interface\n */\nexport const isITableColumn = (item: any): boolean => {\n  let match = true;\n  const BASE_ERROR =\n    'The object provided to isITableColumn does match the interface.';\n  if (typeof item?.name !== 'string') {\n    match = false;\n    // eslint-disable-next-line no-console\n    console.error(\n      `${BASE_ERROR} The property 'name' is required and must be a string`,\n    );\n  }\n  if (match && typeof item?.type !== 'string') {\n    match = false;\n    // eslint-disable-next-line no-console\n    console.error(\n      `${BASE_ERROR} The property 'type' is required and must be a string`,\n    );\n  }\n  return match;\n};\n\nexport interface IDatabaseTable {\n  name: string;\n  columns: ITableColumn[];\n}\n\n/**\n * Checks if a given item matches the isIDatabsetTable interface\n * @param item Object to check if it matches the isIDatabsetTable interface\n * @returns boolean true if matches interface\n */\nexport const isIDatabaseTable = (item: any): boolean => {\n  let match = true;\n  if (typeof item?.name !== 'string') {\n    match = false;\n  }\n  if (match && !Array.isArray(item.columns)) {\n    match = false;\n  }\n  if (match && item.columns.length > 0) {\n    const invalid = item.columns.some((column: any, index: number) => {\n      const valid = isITableColumn(column);\n      if (!valid) {\n        // eslint-disable-next-line no-console\n        console.error(\n          `The provided object does not match the IDatabaseTable interface. columns[${index}] is invalid and does not match the ITableColumn interface`,\n        );\n      }\n      return !valid;\n    });\n    match = !invalid;\n  }\n  return match;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useEffect,\n  useState,\n  SetStateAction,\n  Dispatch,\n  useCallback,\n} from 'react';\nimport rison from 'rison';\nimport {\n  SupersetClient,\n  t,\n  styled,\n  css,\n  useTheme,\n  logging,\n} from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport { Form } from 'src/components/Form';\nimport Icons from 'src/components/Icons';\nimport { TableOption } from 'src/components/TableSelector';\nimport RefreshLabel from 'src/components/RefreshLabel';\nimport { Table } from 'src/hooks/apiResources';\nimport Loading from 'src/components/Loading';\nimport DatabaseSelector, {\n  DatabaseObject,\n} from 'src/components/DatabaseSelector';\nimport {\n  EmptyStateMedium,\n  emptyStateComponent,\n} from 'src/components/EmptyState';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { LocalStorageKeys, getItem } from 'src/utils/localStorageHelpers';\nimport {\n  DatasetActionType,\n  DatasetObject,\n} from 'src/features/datasets/AddDataset/types';\n\ninterface LeftPanelProps {\n  setDataset: Dispatch<SetStateAction<object>>;\n  dataset?: Partial<DatasetObject> | null;\n  datasetNames?: (string | null | undefined)[] | undefined;\n}\n\nconst SearchIcon = styled(Icons.Search)`\n  color: ${({ theme }) => theme.colors.grayscale.light1};\n`;\n\nconst LeftPanelStyle = styled.div`\n  ${({ theme }) => `\n    max-width: ${theme.gridUnit * 87.5}px;\n    padding: ${theme.gridUnit * 4}px;\n    height: 100%;\n    background-color: ${theme.colors.grayscale.light5};\n    position: relative;\n    .emptystate {\n      height: auto;\n      margin-top: ${theme.gridUnit * 17.5}px;\n    }\n    .refresh {\n      position: absolute;\n      top: ${theme.gridUnit * 38.75}px;\n      left: ${theme.gridUnit * 16.75}px;\n      span[role=\"button\"]{\n        font-size: ${theme.gridUnit * 4.25}px;\n      }\n    }\n    .section-title {\n      margin-top: ${theme.gridUnit * 5.5}px;\n      margin-bottom: ${theme.gridUnit * 11}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .table-title {\n      margin-top: ${theme.gridUnit * 11}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .options-list {\n      overflow: auto;\n      position: absolute;\n      bottom: 0;\n      top: ${theme.gridUnit * 92.25}px;\n      left: ${theme.gridUnit * 3.25}px;\n      right: 0;\n\n      .no-scrollbar {\n        margin-right: ${theme.gridUnit * 4}px;\n      }\n\n      .options {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        :hover {\n          background-color: ${theme.colors.grayscale.light4}\n        }\n      }\n\n      .options-highlighted {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        background-color: ${theme.colors.primary.dark1};\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .options, .options-highlighted {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n    }\n    form > span[aria-label=\"refresh\"] {\n      position: absolute;\n      top: ${theme.gridUnit * 69}px;\n      left: ${theme.gridUnit * 42.75}px;\n      font-size: ${theme.gridUnit * 4.25}px;\n    }\n    .table-form {\n      margin-bottom: ${theme.gridUnit * 8}px;\n    }\n    .loading-container {\n      position: absolute;\n      top: ${theme.gridUnit * 89.75}px;\n      left: 0;\n      right: 0;\n      text-align: center;\n      img {\n        width: ${theme.gridUnit * 20}px;\n        margin-bottom: ${theme.gridUnit * 2.5}px;\n      }\n      p {\n        color: ${theme.colors.grayscale.light1};\n      }\n    }\n`}\n`;\n\nexport default function LeftPanel({\n  setDataset,\n  dataset,\n  datasetNames,\n}: LeftPanelProps) {\n  const theme = useTheme();\n\n  const [tableOptions, setTableOptions] = useState<Array<TableOption>>([]);\n  const [resetTables, setResetTables] = useState(false);\n  const [loadTables, setLoadTables] = useState(false);\n  const [searchVal, setSearchVal] = useState('');\n  const [refresh, setRefresh] = useState(false);\n  const [selectedTable, setSelectedTable] = useState<number | null>(null);\n\n  const { addDangerToast } = useToasts();\n\n  const setDatabase = useCallback(\n    (db: Partial<DatabaseObject>) => {\n      setDataset({ type: DatasetActionType.selectDatabase, payload: { db } });\n      setSelectedTable(null);\n      setResetTables(true);\n    },\n    [setDataset],\n  );\n\n  const setTable = (tableName: string, index: number) => {\n    setSelectedTable(index);\n    setDataset({\n      type: DatasetActionType.selectTable,\n      payload: { name: 'table_name', value: tableName },\n    });\n  };\n\n  const getTablesList = useCallback(\n    (url: string) => {\n      SupersetClient.get({ url })\n        .then(({ json }) => {\n          const options: TableOption[] = json.result.map((table: Table) => {\n            const option: TableOption = {\n              value: table.value,\n              label: <TableOption table={table} />,\n              text: table.label,\n            };\n\n            return option;\n          });\n\n          setTableOptions(options);\n          setLoadTables(false);\n          setResetTables(false);\n          setRefresh(false);\n        })\n        .catch(error => {\n          addDangerToast(t('There was an error fetching tables'));\n          logging.error(t('There was an error fetching tables'), error);\n        });\n    },\n    [addDangerToast],\n  );\n\n  const setSchema = (schema: string) => {\n    if (schema) {\n      setDataset({\n        type: DatasetActionType.selectSchema,\n        payload: { name: 'schema', value: schema },\n      });\n      setLoadTables(true);\n    }\n    setSelectedTable(null);\n    setResetTables(true);\n  };\n\n  const encodedSchema = dataset?.schema\n    ? encodeURIComponent(dataset?.schema)\n    : undefined;\n\n  useEffect(() => {\n    const currentUserSelectedDb = getItem(\n      LocalStorageKeys.db,\n      null,\n    ) as DatabaseObject;\n    if (currentUserSelectedDb) {\n      setDatabase(currentUserSelectedDb);\n    }\n  }, [setDatabase]);\n\n  useEffect(() => {\n    if (loadTables) {\n      const params = rison.encode({\n        force: refresh,\n        schema_name: encodedSchema,\n      });\n\n      const endpoint = `/api/v1/database/${dataset?.db?.id}/tables/?q=${params}`;\n      getTablesList(endpoint);\n    }\n  }, [loadTables, dataset?.db?.id, encodedSchema, getTablesList, refresh]);\n\n  useEffect(() => {\n    if (resetTables) {\n      setTableOptions([]);\n      setResetTables(false);\n    }\n  }, [resetTables]);\n\n  const filteredOptions = tableOptions.filter(option =>\n    option?.value?.toLowerCase().includes(searchVal.toLowerCase()),\n  );\n\n  const Loader = (inline: string) => (\n    <div className=\"loading-container\">\n      <Loading position=\"inline\" />\n      <p>{inline}</p>\n    </div>\n  );\n\n  const SELECT_DATABASE_AND_SCHEMA_TEXT = t('Select database & schema');\n  const TABLE_LOADING_TEXT = t('Table loading');\n  const NO_TABLES_FOUND_TITLE = t('No database tables found');\n  const NO_TABLES_FOUND_DESCRIPTION = t('Try selecting a different schema');\n  const SELECT_DATABASE_TABLE_TEXT = t('Select database table');\n  const REFRESH_TABLE_LIST_TOOLTIP = t('Refresh table list');\n  const REFRESH_TABLES_TEXT = t('Refresh tables');\n  const SEARCH_TABLES_PLACEHOLDER_TEXT = t('Search tables');\n\n  const optionsList = document.getElementsByClassName('options-list');\n  const scrollableOptionsList =\n    optionsList[0]?.scrollHeight > optionsList[0]?.clientHeight;\n  const [emptyResultsWithSearch, setEmptyResultsWithSearch] = useState(false);\n\n  const onEmptyResults = (searchText?: string) => {\n    setEmptyResultsWithSearch(!!searchText);\n  };\n\n  return (\n    <LeftPanelStyle>\n      <p className=\"section-title db-schema\">\n        {SELECT_DATABASE_AND_SCHEMA_TEXT}\n      </p>\n      <DatabaseSelector\n        db={dataset?.db}\n        handleError={addDangerToast}\n        onDbChange={setDatabase}\n        onSchemaChange={setSchema}\n        emptyState={emptyStateComponent(emptyResultsWithSearch)}\n        onEmptyResults={onEmptyResults}\n      />\n      {loadTables && !refresh && Loader(TABLE_LOADING_TEXT)}\n      {dataset?.schema && !loadTables && !tableOptions.length && !searchVal && (\n        <div className=\"emptystate\">\n          <EmptyStateMedium\n            image=\"empty-table.svg\"\n            title={NO_TABLES_FOUND_TITLE}\n            description={NO_TABLES_FOUND_DESCRIPTION}\n          />\n        </div>\n      )}\n\n      {dataset?.schema && (tableOptions.length > 0 || searchVal.length > 0) && (\n        <>\n          <Form>\n            <p className=\"table-title\">{SELECT_DATABASE_TABLE_TEXT}</p>\n            <RefreshLabel\n              onClick={() => {\n                setLoadTables(true);\n                setRefresh(true);\n              }}\n              tooltipContent={REFRESH_TABLE_LIST_TOOLTIP}\n            />\n            {refresh && Loader(REFRESH_TABLES_TEXT)}\n            {!refresh && (\n              <Input\n                value={searchVal}\n                prefix={<SearchIcon iconSize=\"l\" />}\n                onChange={evt => {\n                  setSearchVal(evt.target.value);\n                }}\n                className=\"table-form\"\n                placeholder={SEARCH_TABLES_PLACEHOLDER_TEXT}\n                allowClear\n              />\n            )}\n          </Form>\n          <div className=\"options-list\" data-test=\"options-list\">\n            {!refresh &&\n              filteredOptions.map((option, i) => (\n                <div\n                  className={\n                    selectedTable === i\n                      ? scrollableOptionsList\n                        ? 'options-highlighted'\n                        : 'options-highlighted no-scrollbar'\n                      : scrollableOptionsList\n                      ? 'options'\n                      : 'options no-scrollbar'\n                  }\n                  key={i}\n                  role=\"button\"\n                  tabIndex={0}\n                  onClick={() => setTable(option.value, i)}\n                >\n                  {option.label}\n                  {datasetNames?.includes(option.value) && (\n                    <Icons.Warning\n                      iconColor={\n                        selectedTable === i\n                          ? theme.colors.grayscale.light5\n                          : theme.colors.info.base\n                      }\n                      iconSize=\"m\"\n                      css={css`\n                        margin-right: ${theme.gridUnit * 2}px;\n                      `}\n                    />\n                  )}\n                </div>\n              ))}\n          </div>\n        </>\n      )}\n    </LeftPanelStyle>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Button from 'src/components/Button';\nimport { t } from '@superset-ui/core';\nimport { useSingleViewResource } from 'src/views/CRUD/hooks';\nimport { logEvent } from 'src/logger/actions';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport {\n  LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SUCCESS,\n} from 'src/logger/LogUtils';\nimport { DatasetObject } from '../types';\n\ninterface FooterProps {\n  url: string;\n  addDangerToast: () => void;\n  datasetObject?: Partial<DatasetObject> | null;\n  onDatasetAdd?: (dataset: DatasetObject) => void;\n  hasColumns?: boolean;\n  datasets?: (string | null | undefined)[] | undefined;\n}\n\nconst INPUT_FIELDS = ['db', 'schema', 'table_name'];\nconst LOG_ACTIONS = [\n  LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION,\n];\n\nfunction Footer({\n  datasetObject,\n  addDangerToast,\n  hasColumns = false,\n  datasets,\n}: FooterProps) {\n  const history = useHistory();\n  const { createResource } = useSingleViewResource<Partial<DatasetObject>>(\n    'dataset',\n    t('dataset'),\n    addDangerToast,\n  );\n\n  const createLogAction = (dataset: Partial<DatasetObject>) => {\n    let totalCount = 0;\n    const value = Object.keys(dataset).reduce((total, key) => {\n      if (INPUT_FIELDS.includes(key) && dataset[key]) {\n        totalCount += 1;\n      }\n      return totalCount;\n    }, 0);\n\n    return LOG_ACTIONS[value];\n  };\n\n  const cancelButtonOnClick = () => {\n    if (!datasetObject) {\n      logEvent(LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION, {});\n    } else {\n      const logAction = createLogAction(datasetObject);\n      logEvent(logAction, datasetObject);\n    }\n    history.goBack();\n  };\n\n  const tooltipText = t('Select a database table.');\n\n  const onSave = () => {\n    if (datasetObject) {\n      const data = {\n        database: datasetObject.db?.id,\n        schema: datasetObject.schema,\n        table_name: datasetObject.table_name,\n      };\n      createResource(data).then(response => {\n        if (!response) {\n          return;\n        }\n        if (typeof response === 'number') {\n          logEvent(LOG_ACTIONS_DATASET_CREATION_SUCCESS, datasetObject);\n          // When a dataset is created the response we get is its ID number\n          history.push(`/chart/add/?dataset=${datasetObject.table_name}`);\n        }\n      });\n    }\n  };\n\n  const CREATE_DATASET_TEXT = t('Create dataset and create chart');\n  const disabledCheck =\n    !datasetObject?.table_name ||\n    !hasColumns ||\n    datasets?.includes(datasetObject?.table_name);\n\n  return (\n    <>\n      <Button onClick={cancelButtonOnClick}>{t('Cancel')}</Button>\n      <Button\n        buttonStyle=\"primary\"\n        disabled={disabledCheck}\n        tooltip={!datasetObject?.table_name ? tooltipText : undefined}\n        onClick={onSave}\n      >\n        {CREATE_DATASET_TEXT}\n      </Button>\n    </>\n  );\n}\n\nexport default withToasts(Footer);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactElement, JSXElementConstructor } from 'react';\nimport {\n  StyledLayoutWrapper,\n  LeftColumn,\n  RightColumn,\n  OuterRow,\n  PanelRow,\n  FooterRow,\n  StyledLayoutHeader,\n  StyledLayoutLeftPanel,\n  StyledLayoutDatasetPanel,\n  StyledLayoutRightPanel,\n  StyledLayoutFooter,\n} from '../styles';\n\ninterface DatasetLayoutProps {\n  header?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  leftPanel?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  datasetPanel?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  rightPanel?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  footer?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n}\n\nexport default function DatasetLayout({\n  header,\n  leftPanel,\n  datasetPanel,\n  rightPanel,\n  footer,\n}: DatasetLayoutProps) {\n  return (\n    <StyledLayoutWrapper data-test=\"dataset-layout-wrapper\">\n      {header && <StyledLayoutHeader>{header}</StyledLayoutHeader>}\n      <OuterRow>\n        {leftPanel && (\n          <LeftColumn>\n            <StyledLayoutLeftPanel>{leftPanel}</StyledLayoutLeftPanel>\n          </LeftColumn>\n        )}\n        <RightColumn>\n          <PanelRow>\n            {datasetPanel && (\n              <StyledLayoutDatasetPanel>\n                {datasetPanel}\n              </StyledLayoutDatasetPanel>\n            )}\n            {rightPanel && (\n              <StyledLayoutRightPanel>{rightPanel}</StyledLayoutRightPanel>\n            )}\n          </PanelRow>\n\n          <FooterRow>\n            {footer && <StyledLayoutFooter>{footer}</StyledLayoutFooter>}\n          </FooterRow>\n        </RightColumn>\n      </OuterRow>\n    </StyledLayoutWrapper>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useReducer, Reducer, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useDatasetsList from 'src/features/datasets/hooks/useDatasetLists';\nimport Header from 'src/features/datasets/AddDataset/Header';\nimport EditPage from 'src/features/datasets/AddDataset/EditDataset';\nimport DatasetPanel from 'src/features/datasets/AddDataset/DatasetPanel';\nimport LeftPanel from 'src/features/datasets/AddDataset/LeftPanel';\nimport Footer from 'src/features/datasets/AddDataset/Footer';\nimport {\n  DatasetActionType,\n  DatasetObject,\n  DSReducerActionType,\n} from 'src/features/datasets/AddDataset/types';\nimport DatasetLayout from 'src/features/datasets/DatasetLayout';\n\ntype Schema = {\n  schema: string;\n};\n\nexport function datasetReducer(\n  state: DatasetObject | null,\n  action: DSReducerActionType,\n): Partial<DatasetObject> | Schema | null {\n  const trimmedState = {\n    ...(state || {}),\n  };\n\n  switch (action.type) {\n    case DatasetActionType.selectDatabase:\n      return {\n        ...trimmedState,\n        ...action.payload,\n        schema: null,\n        table_name: null,\n      };\n    case DatasetActionType.selectSchema:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n        table_name: null,\n      };\n    case DatasetActionType.selectTable:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    case DatasetActionType.changeDataset:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    default:\n      return null;\n  }\n}\n\nconst prevUrl =\n  '/tablemodelview/list/?pageIndex=0&sortColumn=changed_on_delta_humanized&sortOrder=desc';\n\nexport default function AddDataset() {\n  const [dataset, setDataset] = useReducer<\n    Reducer<Partial<DatasetObject> | null, DSReducerActionType>\n  >(datasetReducer, null);\n  const [hasColumns, setHasColumns] = useState(false);\n  const [editPageIsVisible, setEditPageIsVisible] = useState(false);\n\n  const { datasets, datasetNames } = useDatasetsList(\n    dataset?.db,\n    dataset?.schema,\n  );\n\n  const { datasetId: id } = useParams<{ datasetId: string }>();\n  useEffect(() => {\n    if (!Number.isNaN(parseInt(id, 10))) {\n      setEditPageIsVisible(true);\n    }\n  }, [id]);\n\n  const HeaderComponent = () => (\n    <Header setDataset={setDataset} title={dataset?.table_name} />\n  );\n\n  const LeftPanelComponent = () => (\n    <LeftPanel\n      setDataset={setDataset}\n      dataset={dataset}\n      datasetNames={datasetNames}\n    />\n  );\n\n  const EditPageComponent = () => <EditPage id={id} />;\n\n  const DatasetPanelComponent = () => (\n    <DatasetPanel\n      tableName={dataset?.table_name}\n      dbId={dataset?.db?.id}\n      schema={dataset?.schema}\n      setHasColumns={setHasColumns}\n      datasets={datasets}\n    />\n  );\n\n  const FooterComponent = () => (\n    <Footer\n      url={prevUrl}\n      datasetObject={dataset}\n      hasColumns={hasColumns}\n      datasets={datasetNames}\n    />\n  );\n\n  return (\n    <DatasetLayout\n      header={HeaderComponent()}\n      leftPanel={editPageIsVisible ? null : LeftPanelComponent()}\n      datasetPanel={\n        editPageIsVisible ? EditPageComponent() : DatasetPanelComponent()\n      }\n      footer={FooterComponent()}\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect, useCallback } from 'react';\nimport { SupersetClient, logging, t } from '@superset-ui/core';\nimport rison from 'rison';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { DatasetObject } from 'src/features/datasets/AddDataset/types';\nimport { DatabaseObject } from 'src/components/DatabaseSelector';\n\n/**\n * Retrieves all pages of dataset results\n */\nconst useDatasetsList = (\n  db:\n    | (DatabaseObject & {\n        owners: [number];\n      })\n    | undefined,\n  schema: string | null | undefined,\n) => {\n  const [datasets, setDatasets] = useState<DatasetObject[]>([]);\n  const encodedSchema = schema ? encodeURIComponent(schema) : undefined;\n\n  const getDatasetsList = useCallback(async (filters: object[]) => {\n    let results: DatasetObject[] = [];\n    let page = 0;\n    let count;\n\n    // If count is undefined or less than results, we need to\n    // asynchronously retrieve a page of dataset results\n    while (count === undefined || results.length < count) {\n      const queryParams = rison.encode_uri({ filters, page });\n      try {\n        // eslint-disable-next-line no-await-in-loop\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/dataset/?q=${queryParams}`,\n        });\n\n        // Reassign local count to response's count\n        ({ count } = response.json);\n\n        const {\n          json: { result },\n        } = response;\n\n        results = [...results, ...result];\n\n        page += 1;\n      } catch (error) {\n        addDangerToast(t('There was an error fetching dataset'));\n        logging.error(t('There was an error fetching dataset'), error);\n      }\n    }\n\n    setDatasets(results);\n  }, []);\n\n  useEffect(() => {\n    const filters = [\n      { col: 'database', opr: 'rel_o_m', value: db?.id },\n      { col: 'schema', opr: 'eq', value: encodedSchema },\n      { col: 'sql', opr: 'dataset_is_null_or_empty', value: true },\n    ];\n\n    if (schema) {\n      getDatasetsList(filters);\n    }\n  }, [db?.id, schema, encodedSchema, getDatasetsList]);\n\n  const datasetNames = datasets?.map(dataset => dataset.table_name);\n\n  return { datasets, datasetNames };\n};\n\nexport default useDatasetsList;\n","import { useLayoutEffect, useMemo, useRef } from 'react';\r\nconst useEventCallback = (fn) => {\r\n    let ref = useRef(fn);\r\n    useLayoutEffect(() => {\r\n        ref.current = fn;\r\n    });\r\n    return useMemo(() => (...args) => {\r\n        const { current } = ref;\r\n        return current(...args);\r\n    }, []);\r\n};\r\nexport default useEventCallback;\r\n//# sourceMappingURL=index.js.map"],"names":["elementRef","plusRef","elementsTruncated","setElementsTruncated","useState","hasHiddenElements","setHasHiddenElements","previousEffectInfoRef","useRef","scrollWidth","parentElementWidth","plusRefWidth","useLayoutEffect","currentElement","current","plusRefElement","clientWidth","childNodes","previousEffectInfo","parentElement","offsetWidth","truncationWidth","plusSize","maxWidth","elementsCount","length","width","hiddenElements","i","itemWidth","titleStyles","theme","css","typography","sizes","xl","weights","bold","colors","grayscale","light1","DynamicEditableTitle","title","placeholder","onSave","canEdit","label","isEditing","setIsEditing","currentTitle","setCurrentTitle","contentRef","showTooltip","setShowTooltip","inputWidth","ref","sizerRef","useResizeDetector","containerWidth","containerRef","refreshMode","useEffect","focus","setSelectionRange","value","scrollLeft","innerHTML","replace","handleClick","useCallback","handleBlur","formattedTitle","trim","handleChange","ev","target","handleKeyPress","key","preventDefault","blur","Tooltip","id","className","t","onChange","onBlur","onClick","onKeyPress","tabIndex","menuTriggerStyles","gridUnit","primary","dark2","headerStyles","light5","buttonsStyles","additionalActionsContainerStyles","PageHeaderWithActions","editableTitleProps","showTitlePanelItems","certificatiedBadgeProps","showFaveStar","faveStarProps","titlePanelAdditionalItems","rightPanelAdditionalItems","additionalActionsMenu","menuDropdownProps","tooltipProps","useTheme","certifiedBy","CertifiedBadge","FaveStar","trigger","overlay","Button","buttonStyle","tooltip","text","placement","Icons","iconColor","iconSize","DatasetActionType","StyledLayoutWrapper","styled","Column","LeftColumn","RightColumn","Row","OuterRow","PanelRow","FooterRow","StyledLayoutHeader","light2","StyledCreateDatasetTitle","StyledLayoutLeftPanel","StyledLayoutDatasetPanel","StyledLayoutRightPanel","success","base","StyledLayoutFooter","info","zIndex","max","HeaderComponentStyles","disabledSaveBtnStyles","light3","DEFAULT_TITLE","Header","setDataset","editing","newDatasetName","type","changeDataset","payload","name","itemId","saveFaveStar","disabled","Menu","_path","_path2","_extends","Object","assign","bind","arguments","source","prototype","hasOwnProperty","call","apply","this","props","height","viewBox","fill","xmlns","fillRule","clipRule","d","StyledTruncatedList","StyledVisibleItems","StyledVisibleItem","StyledTooltipItem","StyledPlus","dark1","normal","TruncatedList","items","renderVisibleItem","item","renderTooltipItem","getKey","maxLinks","itemsNotInTooltipRef","useTruncation","nMoreItems","useMemo","undefined","itemsNotInTooltip","map","itemsInTooltip","slice","getLinkProps","dashboard","to","rel","children","dashboard_title","tooltipItemCSS","columns","sorter","render","record","url","slice_name","owners","owner","first_name","last_name","defaultSortOrder","last_saved_at","moment","fromNow","last_saved_by","dashboards","emptyStateTableCSS","emptyStateButtonText","StyledEmptyStateBig","EmptyStateBig","datasetId","loading","recordCount","data","addDangerToast","useToasts","baseFilters","operator","FilterOperator","state","resourceCount","resourceCollection","fetchData","useListViewResource","resourceCollectionWithKey","o","tablePagination","tableFilters","tableSorter","pageIndex","pageSize","sortBy","ensureIsArray","filter","columnKey","order","desc","filters","useDatasetChartRecords","emptyStateButtonAction","window","open","Table","size","TableSize","defaultPageSize","image","description","buttonText","buttonAction","StyledTabs","Tabs","TabStyles","TRANSLATIONS","USAGE_TEXT","COLUMNS_TEXT","METRICS_TEXT","usageCount","setUsageCount","getDatasetRelatedObjects","SupersetClient","endpoint","then","json","charts","count","catch","error","logging","useGetDatasetRelatedCounts","usageTab","Badge","moreIcon","fullWidth","tab","UsageTab","alphabeticalSort","a","b","localeCompare","StyledContainer","SELECT_MESSAGE","CREATE_MESSAGE","VIEW_DATASET_MESSAGE","SELECT_TABLE_TITLE","NO_COLUMNS_TITLE","NO_COLUMNS_DESCRIPTION","ERROR_TITLE","ERROR_DESCRIPTION","hasError","tableName","hasColumns","currentImage","currentDescription","role","location","href","EPosition","StyledHeader","position","medium","StyledTitle","LoaderContainer","StyledLoader","l","TableContainerWithBanner","TableContainerWithoutBanner","TableScrollContainer","StyledAlert","Alert","secondary","dark3","REFRESHING","COLUMN_TITLE","ALT_LOADING","pageSizeOptions","tableColumnDefinition","dataIndex","EXISTING_DATASET_DESCRIPTION","VIEW_DATASET","columnList","datasets","datasetNames","dataset","table_name","tableWithDataset","find","component","loader","alt","src","LOADING_GIF","closable","showIcon","message","explore_url","RELATIVE","ABSOLUTE","dbId","schema","setHasColumns","setColumnList","setLoading","setHasError","tableNameRef","async","path","response","match","Array","isArray","invalid","some","column","index","valid","BASE_ERROR","console","isITableColumn","isIDatabaseTable","table","getTableMetadata","SearchIcon","LeftPanelStyle","borderRadius","light4","LeftPanel","tableOptions","setTableOptions","resetTables","setResetTables","loadTables","setLoadTables","searchVal","setSearchVal","refresh","setRefresh","selectedTable","setSelectedTable","setDatabase","db","selectDatabase","getTablesList","options","result","encodedSchema","encodeURIComponent","currentUserSelectedDb","getItem","LocalStorageKeys","params","rison","force","schema_name","filteredOptions","option","toLowerCase","Loader","inline","Loading","SELECT_DATABASE_AND_SCHEMA_TEXT","TABLE_LOADING_TEXT","NO_TABLES_FOUND_TITLE","NO_TABLES_FOUND_DESCRIPTION","SELECT_DATABASE_TABLE_TEXT","REFRESH_TABLE_LIST_TOOLTIP","REFRESH_TABLES_TEXT","SEARCH_TABLES_PLACEHOLDER_TEXT","optionsList","document","getElementsByClassName","scrollableOptionsList","scrollHeight","clientHeight","emptyResultsWithSearch","setEmptyResultsWithSearch","DatabaseSelector","handleError","onDbChange","onSchemaChange","selectSchema","emptyState","emptyStateComponent","onEmptyResults","searchText","EmptyState","Form","RefreshLabel","tooltipContent","Input","prefix","evt","allowClear","setTable","selectTable","INPUT_FIELDS","LOG_ACTIONS","LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION","withToasts","datasetObject","history","useHistory","createResource","useSingleViewResource","tooltipText","CREATE_DATASET_TEXT","disabledCheck","logAction","totalCount","keys","reduce","total","createLogAction","logEvent","goBack","database","LOG_ACTIONS_DATASET_CREATION_SUCCESS","push","DatasetLayout","header","leftPanel","datasetPanel","rightPanel","footer","datasetReducer","action","trimmedState","AddDataset","useReducer","editPageIsVisible","setEditPageIsVisible","setDatasets","getDatasetsList","results","page","queryParams","col","opr","useDatasetsList","useParams","Number","isNaN","parseInt","fn","args"],"sourceRoot":""}