{"version":3,"file":"a1c97b22f9f97bef4f45.chunk.js","mappings":"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","sources":["webpack://superset/./node_modules/rc-util/es/Dom/css.js","webpack://superset/./node_modules/rc-util/lib/Children/toArray.js","webpack://superset/./node_modules/rc-util/lib/Dom/addEventListener.js","webpack://superset/./node_modules/rc-util/lib/Dom/css.js","webpack://superset/./node_modules/rc-util/lib/Dom/isVisible.js","webpack://superset/./node_modules/rc-util/lib/getScrollBarSize.js","webpack://superset/./node_modules/rc-util/lib/hooks/useEvent.js","webpack://superset/./node_modules/rc-util/lib/hooks/useLayoutEffect.js","webpack://superset/./node_modules/rc-util/lib/hooks/useMergedState.js","webpack://superset/./node_modules/rc-util/lib/hooks/useState.js","webpack://superset/./packages/superset-ui-core/src/hooks/useTruncation/useChildElementTruncation.ts","webpack://superset/./src/components/DynamicEditableTitle/index.tsx","webpack://superset/./src/components/PageHeaderWithActions/index.tsx","webpack://superset/./src/components/ResizableSidebar/index.tsx","webpack://superset/./src/components/ResizableSidebar/useStoredSidebarWidth.ts","webpack://superset/./src/features/datasets/hooks/useDatasetLists.ts","webpack://superset/./src/features/datasets/AddDataset/types.tsx","webpack://superset/./src/features/datasets/styles.ts","webpack://superset/./src/features/datasets/AddDataset/Header/index.tsx","webpack://superset/./src/assets/images/chart.svg","webpack://superset/./src/components/TruncatedList/index.tsx","webpack://superset/./src/features/datasets/AddDataset/EditDataset/UsageTab/index.tsx","webpack://superset/./src/features/datasets/AddDataset/EditDataset/index.tsx","webpack://superset/./src/features/datasets/hooks/useGetDatasetRelatedCounts.ts","webpack://superset/./src/components/Table/sorters.ts","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/MessageContent.tsx","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/DatasetPanel.tsx","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/index.tsx","webpack://superset/./src/features/datasets/AddDataset/DatasetPanel/types.ts","webpack://superset/./src/features/datasets/AddDataset/LeftPanel/index.tsx","webpack://superset/./src/features/datasets/AddDataset/Footer/index.tsx","webpack://superset/./src/features/datasets/DatasetLayout/index.tsx","webpack://superset/./src/pages/DatasetCreation/index.tsx"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nvar PIXEL_PATTERN = /margin|padding|width|height|max|min|offset/;\nvar removePixel = {\n  left: true,\n  top: true\n};\nvar floatMap = {\n  cssFloat: 1,\n  styleFloat: 1,\n  float: 1\n};\n\nfunction getComputedStyle(node) {\n  return node.nodeType === 1 ? node.ownerDocument.defaultView.getComputedStyle(node, null) : {};\n}\n\nfunction getStyleValue(node, type, value) {\n  type = type.toLowerCase();\n\n  if (value === 'auto') {\n    if (type === 'height') {\n      return node.offsetHeight;\n    }\n\n    if (type === 'width') {\n      return node.offsetWidth;\n    }\n  }\n\n  if (!(type in removePixel)) {\n    removePixel[type] = PIXEL_PATTERN.test(type);\n  }\n\n  return removePixel[type] ? parseFloat(value) || 0 : value;\n}\n\nexport function get(node, name) {\n  var length = arguments.length;\n  var style = getComputedStyle(node);\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n  return length === 1 ? style : getStyleValue(node, name, style[name] || node.style[name]);\n}\nexport function set(node, name, value) {\n  var length = arguments.length;\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n\n  if (length === 3) {\n    if (typeof value === 'number' && PIXEL_PATTERN.test(name)) {\n      value = \"\".concat(value, \"px\");\n    }\n\n    node.style[name] = value; // Number\n\n    return value;\n  }\n\n  for (var x in name) {\n    if (name.hasOwnProperty(x)) {\n      set(node, x, name[x]);\n    }\n  }\n\n  return getComputedStyle(node);\n}\nexport function getOuterWidth(el) {\n  if (el === document.body) {\n    return document.documentElement.clientWidth;\n  }\n\n  return el.offsetWidth;\n}\nexport function getOuterHeight(el) {\n  if (el === document.body) {\n    return window.innerHeight || document.documentElement.clientHeight;\n  }\n\n  return el.offsetHeight;\n}\nexport function getDocSize() {\n  var width = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth);\n  var height = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n  return {\n    width: width,\n    height: height\n  };\n}\nexport function getClientSize() {\n  var width = document.documentElement.clientWidth;\n  var height = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    width: width,\n    height: height\n  };\n}\nexport function getScroll() {\n  return {\n    scrollLeft: Math.max(document.documentElement.scrollLeft, document.body.scrollLeft),\n    scrollTop: Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n  };\n}\nexport function getOffset(node) {\n  var box = node.getBoundingClientRect();\n  var docElem = document.documentElement; // < ie8 不支持 win.pageXOffset, 则使用 docElem.scrollLeft\n\n  return {\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n  };\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = toArray;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactIs = require(\"react-is\");\n\nfunction toArray(children) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var ret = [];\n\n  _react.default.Children.forEach(children, function (child) {\n    if ((child === undefined || child === null) && !option.keepEmpty) {\n      return;\n    }\n\n    if (Array.isArray(child)) {\n      ret = ret.concat(toArray(child));\n    } else if ((0, _reactIs.isFragment)(child) && child.props) {\n      ret = ret.concat(toArray(child.props.children, option));\n    } else {\n      ret.push(child);\n    }\n  });\n\n  return ret;\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = addEventListenerWrap;\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nfunction addEventListenerWrap(target, eventType, cb, option) {\n  /* eslint camelcase: 2 */\n  var callback = _reactDom.default.unstable_batchedUpdates ? function run(e) {\n    _reactDom.default.unstable_batchedUpdates(cb, e);\n  } : cb;\n\n  if (target.addEventListener) {\n    target.addEventListener(eventType, callback, option);\n  }\n\n  return {\n    remove: function remove() {\n      if (target.removeEventListener) {\n        target.removeEventListener(eventType, callback, option);\n      }\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get = get;\nexports.getClientSize = getClientSize;\nexports.getDocSize = getDocSize;\nexports.getOffset = getOffset;\nexports.getOuterHeight = getOuterHeight;\nexports.getOuterWidth = getOuterWidth;\nexports.getScroll = getScroll;\nexports.set = set;\n\n/* eslint-disable no-nested-ternary */\nvar PIXEL_PATTERN = /margin|padding|width|height|max|min|offset/;\nvar removePixel = {\n  left: true,\n  top: true\n};\nvar floatMap = {\n  cssFloat: 1,\n  styleFloat: 1,\n  float: 1\n};\n\nfunction getComputedStyle(node) {\n  return node.nodeType === 1 ? node.ownerDocument.defaultView.getComputedStyle(node, null) : {};\n}\n\nfunction getStyleValue(node, type, value) {\n  type = type.toLowerCase();\n\n  if (value === 'auto') {\n    if (type === 'height') {\n      return node.offsetHeight;\n    }\n\n    if (type === 'width') {\n      return node.offsetWidth;\n    }\n  }\n\n  if (!(type in removePixel)) {\n    removePixel[type] = PIXEL_PATTERN.test(type);\n  }\n\n  return removePixel[type] ? parseFloat(value) || 0 : value;\n}\n\nfunction get(node, name) {\n  var length = arguments.length;\n  var style = getComputedStyle(node);\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n  return length === 1 ? style : getStyleValue(node, name, style[name] || node.style[name]);\n}\n\nfunction set(node, name, value) {\n  var length = arguments.length;\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n\n  if (length === 3) {\n    if (typeof value === 'number' && PIXEL_PATTERN.test(name)) {\n      value = \"\".concat(value, \"px\");\n    }\n\n    node.style[name] = value; // Number\n\n    return value;\n  }\n\n  for (var x in name) {\n    if (name.hasOwnProperty(x)) {\n      set(node, x, name[x]);\n    }\n  }\n\n  return getComputedStyle(node);\n}\n\nfunction getOuterWidth(el) {\n  if (el === document.body) {\n    return document.documentElement.clientWidth;\n  }\n\n  return el.offsetWidth;\n}\n\nfunction getOuterHeight(el) {\n  if (el === document.body) {\n    return window.innerHeight || document.documentElement.clientHeight;\n  }\n\n  return el.offsetHeight;\n}\n\nfunction getDocSize() {\n  var width = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth);\n  var height = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n  return {\n    width: width,\n    height: height\n  };\n}\n\nfunction getClientSize() {\n  var width = document.documentElement.clientWidth;\n  var height = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    width: width,\n    height: height\n  };\n}\n\nfunction getScroll() {\n  return {\n    scrollLeft: Math.max(document.documentElement.scrollLeft, document.body.scrollLeft),\n    scrollTop: Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n  };\n}\n\nfunction getOffset(node) {\n  var box = node.getBoundingClientRect();\n  var docElem = document.documentElement; // < ie8 不支持 win.pageXOffset, 则使用 docElem.scrollLeft\n\n  return {\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default = function _default(element) {\n  if (!element) {\n    return false;\n  }\n\n  if (element instanceof HTMLElement && element.offsetParent) {\n    return true;\n  }\n\n  if (element instanceof SVGGraphicsElement && element.getBBox) {\n    var _element$getBBox = element.getBBox(),\n        width = _element$getBBox.width,\n        height = _element$getBBox.height;\n\n    if (width || height) {\n      return true;\n    }\n  }\n\n  if (element instanceof HTMLElement && element.getBoundingClientRect) {\n    var _element$getBoundingC = element.getBoundingClientRect(),\n        _width = _element$getBoundingC.width,\n        _height = _element$getBoundingC.height;\n\n    if (_width || _height) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getScrollBarSize;\nexports.getTargetScrollBarSize = getTargetScrollBarSize;\n\n/* eslint-disable no-param-reassign */\nvar cached;\n\nfunction getScrollBarSize(fresh) {\n  if (typeof document === 'undefined') {\n    return 0;\n  }\n\n  if (fresh || cached === undefined) {\n    var inner = document.createElement('div');\n    inner.style.width = '100%';\n    inner.style.height = '200px';\n    var outer = document.createElement('div');\n    var outerStyle = outer.style;\n    outerStyle.position = 'absolute';\n    outerStyle.top = '0';\n    outerStyle.left = '0';\n    outerStyle.pointerEvents = 'none';\n    outerStyle.visibility = 'hidden';\n    outerStyle.width = '200px';\n    outerStyle.height = '150px';\n    outerStyle.overflow = 'hidden';\n    outer.appendChild(inner);\n    document.body.appendChild(outer);\n    var widthContained = inner.offsetWidth;\n    outer.style.overflow = 'scroll';\n    var widthScroll = inner.offsetWidth;\n\n    if (widthContained === widthScroll) {\n      widthScroll = outer.clientWidth;\n    }\n\n    document.body.removeChild(outer);\n    cached = widthContained - widthScroll;\n  }\n\n  return cached;\n}\n\nfunction ensureSize(str) {\n  var match = str.match(/^(.*)px$/);\n  var value = Number(match === null || match === void 0 ? void 0 : match[1]);\n  return Number.isNaN(value) ? getScrollBarSize() : value;\n}\n\nfunction getTargetScrollBarSize(target) {\n  if (typeof document === 'undefined' || !target || !(target instanceof Element)) {\n    return {\n      width: 0,\n      height: 0\n    };\n  }\n\n  var _getComputedStyle = getComputedStyle(target, '::-webkit-scrollbar'),\n      width = _getComputedStyle.width,\n      height = _getComputedStyle.height;\n\n  return {\n    width: ensureSize(width),\n    height: ensureSize(height)\n  };\n}","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useEvent;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nfunction useEvent(callback) {\n  var fnRef = React.useRef();\n  fnRef.current = callback;\n  var memoFn = React.useCallback(function () {\n    var _fnRef$current;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_fnRef$current = fnRef.current) === null || _fnRef$current === void 0 ? void 0 : _fnRef$current.call.apply(_fnRef$current, [fnRef].concat(args));\n  }, []);\n  return memoFn;\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useLayoutUpdateEffect = exports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _canUseDom = _interopRequireDefault(require(\"../Dom/canUseDom\"));\n\n/**\n * Wrap `React.useLayoutEffect` which will not throw warning message in test env\n */\nvar useLayoutEffect = process.env.NODE_ENV !== 'test' && (0, _canUseDom.default)() ? React.useLayoutEffect : React.useEffect;\nvar _default = useLayoutEffect;\nexports.default = _default;\n\nvar useLayoutUpdateEffect = function useLayoutUpdateEffect(callback, deps) {\n  var firstMountRef = React.useRef(true);\n  useLayoutEffect(function () {\n    if (!firstMountRef.current) {\n      return callback();\n    }\n  }, deps); // We tell react that first mount has passed\n\n  useLayoutEffect(function () {\n    firstMountRef.current = false;\n    return function () {\n      firstMountRef.current = true;\n    };\n  }, []);\n};\n\nexports.useLayoutUpdateEffect = useLayoutUpdateEffect;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useMergedState;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _useEvent = _interopRequireDefault(require(\"./useEvent\"));\n\nvar _useLayoutEffect = _interopRequireWildcard(require(\"./useLayoutEffect\"));\n\nvar _useState3 = _interopRequireDefault(require(\"./useState\"));\n\nvar Source;\n\n(function (Source) {\n  Source[Source[\"INNER\"] = 0] = \"INNER\";\n  Source[Source[\"PROP\"] = 1] = \"PROP\";\n})(Source || (Source = {}));\n/** We only think `undefined` is empty */\n\n\nfunction hasValue(value) {\n  return value !== undefined;\n}\n/**\n * Similar to `useState` but will use props value if provided.\n * Note that internal use rc-util `useState` hook.\n */\n\n\nfunction useMergedState(defaultStateValue, option) {\n  var _ref = option || {},\n      defaultValue = _ref.defaultValue,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      postState = _ref.postState; // ======================= Init =======================\n\n\n  var _useState = (0, _useState3.default)(function () {\n    var finalValue = undefined;\n    var source;\n\n    if (hasValue(value)) {\n      finalValue = value;\n      source = Source.PROP;\n    } else if (hasValue(defaultValue)) {\n      finalValue = typeof defaultValue === 'function' ? defaultValue() : defaultValue;\n      source = Source.PROP;\n    } else {\n      finalValue = typeof defaultStateValue === 'function' ? defaultStateValue() : defaultStateValue;\n      source = Source.INNER;\n    }\n\n    return [finalValue, source, finalValue];\n  }),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      mergedValue = _useState2[0],\n      setMergedValue = _useState2[1];\n\n  var chosenValue = hasValue(value) ? value : mergedValue[0];\n  var postMergedValue = postState ? postState(chosenValue) : chosenValue; // ======================= Sync =======================\n\n  (0, _useLayoutEffect.useLayoutUpdateEffect)(function () {\n    setMergedValue(function (_ref2) {\n      var _ref3 = (0, _slicedToArray2.default)(_ref2, 1),\n          prevValue = _ref3[0];\n\n      return [value, Source.PROP, prevValue];\n    });\n  }, [value]); // ====================== Update ======================\n\n  var changeEventPrevRef = React.useRef();\n  var triggerChange = (0, _useEvent.default)(function (updater, ignoreDestroy) {\n    setMergedValue(function (prev) {\n      var _prev = (0, _slicedToArray2.default)(prev, 3),\n          prevValue = _prev[0],\n          prevSource = _prev[1],\n          prevPrevValue = _prev[2];\n\n      var nextValue = typeof updater === 'function' ? updater(prevValue) : updater; // Do nothing if value not change\n\n      if (nextValue === prevValue) {\n        return prev;\n      } // Use prev prev value if is in a batch update to avoid missing data\n\n\n      var overridePrevValue = prevSource === Source.INNER && changeEventPrevRef.current !== prevPrevValue ? prevPrevValue : prevValue;\n      return [nextValue, Source.INNER, overridePrevValue];\n    }, ignoreDestroy);\n  }); // ====================== Change ======================\n\n  var onChangeFn = (0, _useEvent.default)(onChange);\n  (0, _useLayoutEffect.default)(function () {\n    var _mergedValue = (0, _slicedToArray2.default)(mergedValue, 3),\n        current = _mergedValue[0],\n        source = _mergedValue[1],\n        prev = _mergedValue[2];\n\n    if (current !== prev && source === Source.INNER) {\n      onChangeFn(current, prev);\n      changeEventPrevRef.current = prev;\n    }\n  }, [mergedValue]);\n  return [postMergedValue, triggerChange];\n}","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useSafeState;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\n/**\n * Same as React.useState but `setState` accept `ignoreDestroy` param to not to setState after destroyed.\n * We do not make this auto is to avoid real memory leak.\n * Developer should confirm it's safe to ignore themselves.\n */\nfunction useSafeState(defaultValue) {\n  var destroyRef = React.useRef(false);\n\n  var _React$useState = React.useState(defaultValue),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      value = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  React.useEffect(function () {\n    destroyRef.current = false;\n    return function () {\n      destroyRef.current = true;\n    };\n  }, []);\n\n  function safeSetState(updater, ignoreDestroy) {\n    if (ignoreDestroy && destroyRef.current) {\n      return;\n    }\n\n    setValue(updater);\n  }\n\n  return [value, safeSetState];\n}","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { RefObject, useLayoutEffect, useState, useRef } from 'react';\n\n/**\n * This hook encapsulates logic to support truncation of child HTML\n * elements contained in a fixed-width parent HTML element.  Given\n * a ref to the parent element and optionally a ref to the \"+x\"\n * component that shows the number of truncated items, this hook\n * will return the number of elements that are not fully visible\n * (including those completely hidden) and whether any elements\n * are completely hidden.\n */\nconst useChildElementTruncation = (\n  elementRef: RefObject<HTMLElement>,\n  plusRef?: RefObject<HTMLElement>,\n) => {\n  const [elementsTruncated, setElementsTruncated] = useState(0);\n  const [hasHiddenElements, setHasHiddenElements] = useState(false);\n\n  const previousEffectInfoRef = useRef({\n    scrollWidth: 0,\n    parentElementWidth: 0,\n    plusRefWidth: 0,\n  });\n\n  useLayoutEffect(() => {\n    const currentElement = elementRef.current;\n    const plusRefElement = plusRef?.current;\n\n    if (!currentElement) {\n      return;\n    }\n\n    const { scrollWidth, clientWidth, childNodes } = currentElement;\n\n    // By using the result of this effect to truncate content\n    // we're effectively changing it's size.\n    // That will trigger another pass at this effect.\n    // Depending on the content elements width, that second rerender could\n    // yield a different truncate count, thus potentially leading to a\n    // rendering loop.\n    // There's only a need to recompute if the parent width or the width of\n    // the child nodes changes.\n    const previousEffectInfo = previousEffectInfoRef.current;\n    const parentElementWidth = currentElement.parentElement?.clientWidth || 0;\n    const plusRefWidth = plusRefElement?.offsetWidth || 0;\n    previousEffectInfoRef.current = {\n      scrollWidth,\n      parentElementWidth,\n      plusRefWidth,\n    };\n\n    if (\n      previousEffectInfo.parentElementWidth === parentElementWidth &&\n      previousEffectInfo.scrollWidth === scrollWidth &&\n      previousEffectInfo.plusRefWidth === plusRefWidth\n    ) {\n      return;\n    }\n\n    if (scrollWidth > clientWidth) {\n      // \"...\" is around 6px wide\n      const truncationWidth = 6;\n      const plusSize = plusRefElement?.offsetWidth || 0;\n      const maxWidth = clientWidth - truncationWidth;\n      const elementsCount = childNodes.length;\n\n      let width = 0;\n      let hiddenElements = 0;\n      for (let i = 0; i < elementsCount; i += 1) {\n        const itemWidth = (childNodes[i] as HTMLElement).offsetWidth;\n        const remainingWidth = maxWidth - truncationWidth - width - plusSize;\n\n        // assures it shows +{number} only when the item is not visible\n        if (remainingWidth <= 0) {\n          hiddenElements += 1;\n        }\n        width += itemWidth;\n      }\n\n      if (elementsCount > 1 && hiddenElements) {\n        setHasHiddenElements(true);\n        setElementsTruncated(hiddenElements);\n      } else {\n        setHasHiddenElements(false);\n        setElementsTruncated(1);\n      }\n    } else {\n      setHasHiddenElements(false);\n      setElementsTruncated(0);\n    }\n  }, [\n    elementRef.current?.offsetWidth,\n    elementRef.current?.clientWidth,\n    elementRef,\n  ]);\n\n  return [elementsTruncated, hasHiddenElements];\n};\n\nexport default useChildElementTruncation;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  KeyboardEvent,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { css, SupersetTheme, t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useResizeDetector } from 'react-resize-detector';\n\nexport type DynamicEditableTitleProps = {\n  title: string;\n  placeholder: string;\n  onSave: (title: string) => void;\n  canEdit: boolean;\n  label: string | undefined;\n};\n\nconst titleStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  font-size: ${theme.typography.sizes.xl}px;\n  font-weight: ${theme.typography.weights.bold};\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  & .dynamic-title,\n  & .dynamic-title-input {\n    display: inline-block;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  & .dynamic-title {\n    cursor: default;\n  }\n  & .dynamic-title-input {\n    border: none;\n    padding: 0;\n    outline: none;\n\n    &::placeholder {\n      color: ${theme.colors.grayscale.light1};\n    }\n  }\n\n  & .input-sizer {\n    position: absolute;\n    left: -9999px;\n    display: inline-block;\n  }\n`;\n\nexport const DynamicEditableTitle = ({\n  title,\n  placeholder,\n  onSave,\n  canEdit,\n  label,\n}: DynamicEditableTitleProps) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [currentTitle, setCurrentTitle] = useState(title || '');\n  const contentRef = useRef<HTMLInputElement>(null);\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const { width: inputWidth, ref: sizerRef } = useResizeDetector();\n  const { width: containerWidth, ref: containerRef } = useResizeDetector({\n    refreshMode: 'debounce',\n  });\n\n  useEffect(() => {\n    setCurrentTitle(title);\n  }, [title]);\n\n  useEffect(() => {\n    if (isEditing && contentRef?.current) {\n      contentRef.current.focus();\n      // move cursor and scroll to the end\n      if (contentRef.current.setSelectionRange) {\n        const { length } = contentRef.current.value;\n        contentRef.current.setSelectionRange(length, length);\n        contentRef.current.scrollLeft = contentRef.current.scrollWidth;\n      }\n    }\n  }, [isEditing]);\n\n  // a trick to make the input grow when user types text\n  // we make additional span component, place it somewhere out of view and copy input\n  // then we can measure the width of that span to resize the input element\n  useLayoutEffect(() => {\n    if (sizerRef?.current) {\n      sizerRef.current.textContent = currentTitle || placeholder;\n    }\n  }, [currentTitle, placeholder, sizerRef]);\n\n  useEffect(() => {\n    if (\n      contentRef.current &&\n      contentRef.current.scrollWidth > contentRef.current.clientWidth\n    ) {\n      setShowTooltip(true);\n    } else {\n      setShowTooltip(false);\n    }\n  }, [inputWidth, containerWidth]);\n\n  const handleClick = useCallback(() => {\n    if (!canEdit || isEditing) {\n      return;\n    }\n    setIsEditing(true);\n  }, [canEdit, isEditing]);\n\n  const handleBlur = useCallback(() => {\n    if (!canEdit) {\n      return;\n    }\n    const formattedTitle = currentTitle.trim();\n    setCurrentTitle(formattedTitle);\n    if (title !== formattedTitle) {\n      onSave(formattedTitle);\n    }\n    setIsEditing(false);\n  }, [canEdit, currentTitle, onSave, title]);\n\n  const handleChange = useCallback(\n    (ev: ChangeEvent<HTMLInputElement>) => {\n      if (!canEdit || !isEditing) {\n        return;\n      }\n      setCurrentTitle(ev.target.value);\n    },\n    [canEdit, isEditing],\n  );\n\n  const handleKeyPress = useCallback(\n    (ev: KeyboardEvent<HTMLInputElement>) => {\n      if (!canEdit) {\n        return;\n      }\n      if (ev.key === 'Enter') {\n        ev.preventDefault();\n        contentRef.current?.blur();\n      }\n    },\n    [canEdit],\n  );\n\n  return (\n    <div css={titleStyles} ref={containerRef}>\n      <Tooltip\n        id=\"title-tooltip\"\n        title={showTooltip && currentTitle && !isEditing ? currentTitle : null}\n      >\n        {canEdit ? (\n          <input\n            data-test=\"editable-title-input\"\n            className=\"dynamic-title-input\"\n            aria-label={label ?? t('Title')}\n            ref={contentRef}\n            onChange={handleChange}\n            onBlur={handleBlur}\n            onClick={handleClick}\n            onKeyPress={handleKeyPress}\n            placeholder={placeholder}\n            value={currentTitle}\n            css={css`\n              cursor: ${isEditing ? 'text' : 'pointer'};\n\n              ${inputWidth &&\n              inputWidth > 0 &&\n              css`\n                width: ${inputWidth + 1}px;\n              `}\n            `}\n          />\n        ) : (\n          <span\n            className=\"dynamic-title\"\n            aria-label={label ?? t('Title')}\n            ref={contentRef}\n            data-test=\"editable-title\"\n          >\n            {currentTitle}\n          </span>\n        )}\n      </Tooltip>\n      <span ref={sizerRef} className=\"input-sizer\" aria-hidden tabIndex={-1} />\n    </div>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode, ReactElement } from 'react';\nimport { css, SupersetTheme, t, useTheme } from '@superset-ui/core';\nimport { AntdDropdown, AntdDropdownProps } from 'src/components';\nimport { TooltipPlacement } from 'src/components/Tooltip';\nimport {\n  DynamicEditableTitle,\n  DynamicEditableTitleProps,\n} from '../DynamicEditableTitle';\nimport CertifiedBadge, { CertifiedBadgeProps } from '../CertifiedBadge';\nimport FaveStar, { FaveStarProps } from '../FaveStar';\nimport Icons from '../Icons';\nimport Button from '../Button';\n\nexport const menuTriggerStyles = (theme: SupersetTheme) => css`\n  width: ${theme.gridUnit * 8}px;\n  height: ${theme.gridUnit * 8}px;\n  padding: 0;\n  border: 1px solid ${theme.colors.primary.dark2};\n\n  &.ant-btn > span.anticon {\n    line-height: 0;\n    transition: inherit;\n  }\n\n  &:hover:not(:focus) > span.anticon {\n    color: ${theme.colors.primary.light1};\n  }\n`;\n\nconst headerStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  background-color: ${theme.colors.grayscale.light5};\n  height: ${theme.gridUnit * 16}px;\n  padding: 0 ${theme.gridUnit * 4}px;\n\n  .editable-title {\n    overflow: hidden;\n\n    & > input[type='button'],\n    & > span {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      max-width: 100%;\n      white-space: nowrap;\n    }\n  }\n\n  span[role='button'] {\n    display: flex;\n    height: 100%;\n  }\n\n  .title-panel {\n    display: flex;\n    align-items: center;\n    min-width: 0;\n    margin-right: ${theme.gridUnit * 12}px;\n  }\n\n  .right-button-panel {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nconst buttonsStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  align-items: center;\n  padding-left: ${theme.gridUnit * 2}px;\n\n  & .fave-unfave-icon {\n    padding: 0 ${theme.gridUnit}px;\n\n    &:first-of-type {\n      padding-left: 0;\n    }\n  }\n`;\n\nconst additionalActionsContainerStyles = (theme: SupersetTheme) => css`\n  margin-left: ${theme.gridUnit * 2}px;\n`;\n\nexport type PageHeaderWithActionsProps = {\n  editableTitleProps: DynamicEditableTitleProps;\n  showTitlePanelItems: boolean;\n  certificatiedBadgeProps?: CertifiedBadgeProps;\n  showFaveStar: boolean;\n  showMenuDropdown?: boolean;\n  faveStarProps: FaveStarProps;\n  titlePanelAdditionalItems: ReactNode;\n  rightPanelAdditionalItems: ReactNode;\n  additionalActionsMenu: ReactElement;\n  menuDropdownProps: Omit<AntdDropdownProps, 'overlay'>;\n  tooltipProps?: {\n    text?: string;\n    placement?: TooltipPlacement;\n  };\n};\n\nexport const PageHeaderWithActions = ({\n  editableTitleProps,\n  showTitlePanelItems,\n  certificatiedBadgeProps,\n  showFaveStar,\n  faveStarProps,\n  titlePanelAdditionalItems,\n  rightPanelAdditionalItems,\n  additionalActionsMenu,\n  menuDropdownProps,\n  showMenuDropdown = true,\n  tooltipProps,\n}: PageHeaderWithActionsProps) => {\n  const theme = useTheme();\n  return (\n    <div css={headerStyles} className=\"header-with-actions\">\n      <div className=\"title-panel\">\n        <DynamicEditableTitle {...editableTitleProps} />\n        {showTitlePanelItems && (\n          <div css={buttonsStyles}>\n            {certificatiedBadgeProps?.certifiedBy && (\n              <CertifiedBadge {...certificatiedBadgeProps} />\n            )}\n            {showFaveStar && <FaveStar {...faveStarProps} />}\n            {titlePanelAdditionalItems}\n          </div>\n        )}\n      </div>\n      <div className=\"right-button-panel\">\n        {rightPanelAdditionalItems}\n        <div css={additionalActionsContainerStyles}>\n          {showMenuDropdown && (\n            <AntdDropdown\n              trigger={['click']}\n              overlay={additionalActionsMenu}\n              {...menuDropdownProps}\n            >\n              <Button\n                css={menuTriggerStyles}\n                buttonStyle=\"tertiary\"\n                aria-label={t('Menu actions trigger')}\n                tooltip={tooltipProps?.text}\n                placement={tooltipProps?.placement}\n                data-test=\"actions-trigger\"\n              >\n                <Icons.MoreHoriz\n                  iconColor={theme.colors.primary.dark2}\n                  iconSize=\"l\"\n                />\n              </Button>\n            </AntdDropdown>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { Resizable } from 're-resizable';\nimport { styled } from '@superset-ui/core';\nimport useStoredSidebarWidth from './useStoredSidebarWidth';\n\nconst ResizableWrapper = styled.div`\n  position: absolute;\n  height: 100%;\n\n  :hover .sidebar-resizer::after {\n    background-color: ${({ theme }) => theme.colors.primary.base};\n  }\n\n  .sidebar-resizer {\n    // @z-index-above-sticky-header (100) + 1 = 101\n    z-index: 101;\n  }\n\n  .sidebar-resizer::after {\n    display: block;\n    content: '';\n    width: 1px;\n    height: 100%;\n    margin: 0 auto;\n  }\n`;\n\ntype Props = {\n  id: string;\n  initialWidth: number;\n  enable: boolean;\n  minWidth?: number;\n  maxWidth?: number;\n  children: (width: number) => React.ReactNode;\n};\n\nconst ResizableSidebar: React.FC<Props> = ({\n  id,\n  initialWidth,\n  minWidth,\n  maxWidth,\n  enable,\n  children,\n}) => {\n  const [width, setWidth] = useStoredSidebarWidth(id, initialWidth);\n\n  return (\n    <>\n      <ResizableWrapper>\n        <Resizable\n          enable={{ right: enable }}\n          handleClasses={{ right: 'sidebar-resizer' }}\n          size={{ width, height: '100%' }}\n          minWidth={minWidth}\n          maxWidth={maxWidth}\n          onResizeStop={(e, direction, ref, d) => setWidth(width + d.width)}\n        />\n      </ResizableWrapper>\n      {children(width)}\n    </>\n  );\n};\n\nexport default ResizableSidebar;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState } from 'react';\nimport {\n  LocalStorageKeys,\n  setItem,\n  getItem,\n} from 'src/utils/localStorageHelpers';\n\nexport default function useStoredSidebarWidth(\n  id: string,\n  initialWidth: number,\n) {\n  const widthsMapRef = useRef<Record<string, number>>();\n  const [sidebarWidth, setSidebarWidth] = useState<number>(initialWidth);\n\n  useEffect(() => {\n    widthsMapRef.current =\n      widthsMapRef.current ??\n      getItem(LocalStorageKeys.common__resizable_sidebar_widths, {});\n    if (widthsMapRef.current[id]) {\n      setSidebarWidth(widthsMapRef.current[id]);\n    }\n  }, [id]);\n\n  function setStoredSidebarWidth(updatedWidth: number) {\n    setSidebarWidth(updatedWidth);\n    setItem(LocalStorageKeys.common__resizable_sidebar_widths, {\n      ...widthsMapRef.current,\n      [id]: updatedWidth,\n    });\n  }\n\n  return [sidebarWidth, setStoredSidebarWidth] as const;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { SupersetClient, logging, t } from '@superset-ui/core';\nimport rison from 'rison';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { DatasetObject } from 'src/features/datasets/AddDataset/types';\nimport { DatabaseObject } from 'src/components/DatabaseSelector';\n\n/**\n * Retrieves all pages of dataset results\n */\nconst useDatasetsList = (\n  db:\n    | (DatabaseObject & {\n        owners: [number];\n      })\n    | undefined,\n  schema: string | null | undefined,\n) => {\n  const [datasets, setDatasets] = useState<DatasetObject[]>([]);\n  const encodedSchema = schema ? encodeURIComponent(schema) : undefined;\n\n  const getDatasetsList = useCallback(async (filters: object[]) => {\n    let results: DatasetObject[] = [];\n    let page = 0;\n    let count;\n\n    // If count is undefined or less than results, we need to\n    // asynchronously retrieve a page of dataset results\n    while (count === undefined || results.length < count) {\n      const queryParams = rison.encode_uri({ filters, page });\n      try {\n        // eslint-disable-next-line no-await-in-loop\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/dataset/?q=${queryParams}`,\n        });\n\n        // Reassign local count to response's count\n        ({ count } = response.json);\n\n        const {\n          json: { result },\n        } = response;\n\n        results = [...results, ...result];\n\n        page += 1;\n      } catch (error) {\n        addDangerToast(t('There was an error fetching dataset'));\n        logging.error(t('There was an error fetching dataset'), error);\n      }\n    }\n\n    setDatasets(results);\n  }, []);\n\n  useEffect(() => {\n    const filters = [\n      { col: 'database', opr: 'rel_o_m', value: db?.id },\n      { col: 'schema', opr: 'eq', value: encodedSchema },\n      { col: 'sql', opr: 'dataset_is_null_or_empty', value: true },\n    ];\n\n    if (schema) {\n      getDatasetsList(filters);\n    }\n  }, [db?.id, schema, encodedSchema, getDatasetsList]);\n\n  const datasetNames = useMemo(\n    () => datasets?.map(dataset => dataset.table_name),\n    [datasets],\n  );\n\n  return { datasets, datasetNames };\n};\n\nexport default useDatasetsList;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { DatabaseObject } from 'src/components/DatabaseSelector';\n\nexport enum DatasetActionType {\n  selectDatabase,\n  selectSchema,\n  selectTable,\n  changeDataset,\n}\n\nexport interface DatasetObject {\n  db: DatabaseObject & { owners: [number] };\n  schema?: string | null;\n  dataset_name: string;\n  table_name?: string | null;\n  explore_url?: string;\n}\n\nexport interface DatasetReducerPayloadType {\n  name: string;\n  value?: string;\n}\n\nexport type Schema = {\n  schema?: string | null | undefined;\n};\n\nexport type DSReducerActionType =\n  | {\n      type: DatasetActionType.selectDatabase;\n      payload: Partial<DatasetObject>;\n    }\n  | {\n      type:\n        | DatasetActionType.changeDataset\n        | DatasetActionType.selectSchema\n        | DatasetActionType.selectTable;\n      payload: DatasetReducerPayloadType;\n    };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\n\nexport const StyledLayoutWrapper = styled.div`\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n`;\n\nexport const LeftColumn = styled.div<{ width?: number }>`\n  width: ${({ theme, width }) => width ?? theme.gridUnit * 80}px;\n  max-width: ${({ theme, width }) => width ?? theme.gridUnit * 80}px;\n  flex-direction: column;\n  flex: 1 0 auto;\n`;\n\nexport const RightColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n`;\n\nconst Row = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n`;\n\nexport const OuterRow = styled(Row)`\n  flex: 1 0 auto;\n  position: relative;\n`;\n\nexport const PanelRow = styled(Row)`\n  flex: 1 0 auto;\n  height: auto;\n`;\n\nexport const FooterRow = styled(Row)`\n  flex: 0 0 auto;\n  height: ${({ theme }) => theme.gridUnit * 16}px;\n  z-index: 0;\n`;\n\nexport const StyledLayoutHeader = styled.div`\n  ${({ theme }) => `\n  flex: 0 0 auto;\n  height: ${theme.gridUnit * 16}px;\n  border-bottom: 2px solid ${theme.colors.grayscale.light2};\n\n  .header-with-actions {\n    height: ${theme.gridUnit * 15.5}px;\n  }\n  `}\n`;\n\nexport const StyledCreateDatasetTitle = styled.div`\n  ${({ theme }) => `\n  margin: ${theme.gridUnit * 4}px;\n  font-size: ${theme.typography.sizes.xl}px;\n  font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nexport const StyledLayoutLeftPanel = styled.div`\n  ${({ theme }) => `\n  height: 100%;\n  border-right: 1px solid ${theme.colors.grayscale.light2};\n  `}\n`;\n\nexport const StyledLayoutDatasetPanel = styled.div`\n  width: 100%;\n  position: relative;\n`;\n\nexport const StyledLayoutRightPanel = styled.div`\n  ${({ theme }) => `\n  border-left: 1px solid ${theme.colors.grayscale.light2};\n  color: ${theme.colors.success.base};\n  `}\n`;\n\nexport const StyledLayoutFooter = styled.div`\n  ${({ theme }) => `\n  height: ${theme.gridUnit * 16}px;\n  width: 100%;\n  border-top: 1px solid ${theme.colors.grayscale.light2};\n  border-bottom: 1px solid ${theme.colors.grayscale.light2};\n  color: ${theme.colors.info.base};\n  border-top: ${theme.gridUnit / 4}px solid\n    ${theme.colors.grayscale.light2};\n  padding: ${theme.gridUnit * 4}px;\n  display: flex;\n  justify-content: flex-end;\n  background-color: ${theme.colors.grayscale.light5};\n  z-index: ${theme.zIndex.max}\n  `}\n`;\n\nexport const HeaderComponentStyles = styled.div`\n  .ant-btn {\n    span {\n      margin-right: 0;\n    }\n\n    &:disabled {\n      svg {\n        color: ${({ theme }) => theme.colors.grayscale.light1};\n      }\n    }\n  }\n`;\n\nexport const disabledSaveBtnStyles = (theme: SupersetTheme) => css`\n  width: ${theme.gridUnit * 21.5}px;\n\n  &:disabled {\n    background-color: ${theme.colors.grayscale.light3};\n    color: ${theme.colors.grayscale.light1};\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { PageHeaderWithActions } from 'src/components/PageHeaderWithActions';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport { Menu } from 'src/components/Menu';\nimport { TooltipPlacement } from 'src/components/Tooltip';\nimport {\n  DatasetActionType,\n  DSReducerActionType,\n} from 'src/features/datasets/AddDataset/types';\nimport {\n  HeaderComponentStyles,\n  disabledSaveBtnStyles,\n  StyledCreateDatasetTitle,\n} from '../../styles';\n\nexport const DEFAULT_TITLE = t('New dataset');\n\nconst tooltipProps: { text: string; placement: TooltipPlacement } = {\n  text: t('Select a database table and create dataset'),\n  placement: 'bottomRight',\n};\n\nconst renderDisabledSaveButton = () => (\n  <Button\n    buttonStyle=\"primary\"\n    tooltip={tooltipProps?.text}\n    placement={tooltipProps?.placement}\n    disabled\n    css={disabledSaveBtnStyles}\n  >\n    <Icons.Save iconSize=\"m\" />\n    {t('Save')}\n  </Button>\n);\n\nconst renderOverlay = () => (\n  <Menu>\n    <Menu.Item>{t('Settings')}</Menu.Item>\n    <Menu.Item>{t('Delete')}</Menu.Item>\n  </Menu>\n);\n\nexport default function Header({\n  setDataset,\n  title = DEFAULT_TITLE,\n  editing = false,\n}: {\n  setDataset: React.Dispatch<DSReducerActionType>;\n  title?: string | null | undefined;\n  schema?: string | null | undefined;\n  editing?: boolean;\n}) {\n  const editableTitleProps = {\n    title: title ?? DEFAULT_TITLE,\n    placeholder: DEFAULT_TITLE,\n    onSave: (newDatasetName: string) => {\n      setDataset({\n        type: DatasetActionType.changeDataset,\n        payload: { name: 'dataset_name', value: newDatasetName },\n      });\n    },\n    canEdit: false,\n    label: t('dataset name'),\n  };\n\n  return (\n    <HeaderComponentStyles>\n      {editing ? (\n        <PageHeaderWithActions\n          editableTitleProps={editableTitleProps}\n          showTitlePanelItems={false}\n          showFaveStar={false}\n          faveStarProps={{ itemId: 1, saveFaveStar: () => {} }}\n          titlePanelAdditionalItems={<></>}\n          rightPanelAdditionalItems={renderDisabledSaveButton()}\n          additionalActionsMenu={renderOverlay()}\n          menuDropdownProps={{\n            disabled: true,\n          }}\n          tooltipProps={tooltipProps}\n        />\n      ) : (\n        <StyledCreateDatasetTitle>\n          {title || DEFAULT_TITLE}\n        </StyledCreateDatasetTitle>\n      )}\n    </HeaderComponentStyles>\n  );\n}\n","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nimport { forwardRef } from \"react\";\nconst SvgChart = (_ref, ref) => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 160,\n    height: 166,\n    fill: \"none\",\n    ref: ref,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#FAFAFA\",\n    fillRule: \"evenodd\",\n    d: \"M123.638 8a.5.5 0 0 0-.5.5V158h28.758V8.5a.5.5 0 0 0-.5-.5h-27.758ZM84.793 40.643a.5.5 0 0 1 .5-.5h27.759a.5.5 0 0 1 .5.5V158H84.793V40.643ZM46.95 72.285a.5.5 0 0 0-.5.5V158h28.758V72.785a.5.5 0 0 0-.5-.5H46.95ZM8.604 93.715a.5.5 0 0 0-.5.5V158h28.758V94.215a.5.5 0 0 0-.5-.5H8.604Z\",\n    clipRule: \"evenodd\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#D9D9D9\",\n    d: \"M123.138 158h-.5v.5h.5v-.5Zm28.758 0v.5h.5v-.5h-.5Zm-38.344 0v.5h.5v-.5h-.5Zm-28.759 0h-.5v.5h.5v-.5Zm-38.344-.001h-.5v.5h.5v-.5Zm28.758 0v.5h.5v-.5h-.5ZM8.104 158h-.5v.5h.5v-.5Zm28.758 0v.5h.5v-.5h-.5ZM123.638 8.5v-1a1 1 0 0 0-1 1h1Zm0 149.5V8.5h-1V158h1Zm28.258-.5h-28.758v1h28.758v-1Zm-.5-149V158h1V8.5h-1Zm0 0h1a1 1 0 0 0-1-1v1Zm-27.758 0h27.758v-1h-27.758v1ZM85.293 39.643a1 1 0 0 0-1 1h1v-1Zm27.759 0H85.293v1h27.759v-1Zm1 1a1 1 0 0 0-1-1v1h1Zm0 117.357V40.643h-1V158h1Zm-29.259.5h28.759v-1H84.793v1Zm-.5-117.857V158h1V40.643h-1ZM46.95 72.785v-1a1 1 0 0 0-1 1h1Zm0 85.214V72.785h-1V158h1Zm28.258-.5H46.45v1h28.758v-1Zm-.5-84.714V158h1V72.785h-1Zm0 0h1a1 1 0 0 0-1-1v1Zm-27.758 0h27.758v-1H46.95v1ZM8.604 94.215v-1a1 1 0 0 0-1 1h1Zm0 63.785V94.215h-1V158h1Zm28.258-.5H8.104v1h28.758v-1Zm-.5-63.285V158h1V94.215h-1Zm0 0h1a1 1 0 0 0-1-1v1Zm-27.758 0h27.758v-1H8.604v1Z\"\n  })));\n};\nconst ForwardRef = /*#__PURE__*/forwardRef(SvgChart);\nexport default ForwardRef;","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode, useMemo, useRef } from 'react';\nimport { styled, t, useTruncation } from '@superset-ui/core';\nimport { Tooltip } from '../Tooltip';\n\nexport type TruncatedListProps<ListItemType> = {\n  /**\n   * Array of input items of type `ListItemType`.\n   */\n  items: ListItemType[];\n\n  /**\n   * Renderer for items not overflowed into the tooltip.\n   * Required if `ListItemType` is not renderable by React.\n   */\n  renderVisibleItem?: (item: ListItemType) => ReactNode;\n\n  /**\n   * Renderer for items that are overflowed into the tooltip.\n   * Required if `ListItemType` is not renderable by React.\n   */\n  renderTooltipItem?: (item: ListItemType) => ReactNode;\n\n  /**\n   * Returns the React key for an item.\n   */\n  getKey?: (item: ListItemType) => React.Key;\n\n  /**\n   * The max number of links that should appear in the tooltip.\n   */\n  maxLinks?: number;\n};\n\nconst StyledTruncatedList = styled.div`\n  & > span {\n    width: 100%;\n    display: flex;\n\n    .ant-tooltip-open {\n      display: inline;\n    }\n  }\n`;\n\nconst StyledVisibleItems = styled.span`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  display: inline-block;\n  width: 100%;\n  vertical-align: bottom;\n`;\n\nconst StyledVisibleItem = styled.span`\n  &:not(:last-child)::after {\n    content: ', ';\n  }\n`;\n\nconst StyledTooltipItem = styled.div`\n  .link {\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    display: block;\n    text-decoration: underline;\n  }\n`;\n\nconst StyledPlus = styled.span`\n  ${({ theme }) => `\n  cursor: pointer;\n  color: ${theme.colors.primary.dark1};\n  font-weight: ${theme.typography.weights.normal};\n  `}\n`;\n\nexport default function TruncatedList<ListItemType>({\n  items,\n  renderVisibleItem = item => item,\n  renderTooltipItem = item => item,\n  getKey = item => item as unknown as React.Key,\n  maxLinks = 20,\n}: TruncatedListProps<ListItemType>) {\n  const itemsNotInTooltipRef = useRef<HTMLDivElement>(null);\n  const plusRef = useRef<HTMLDivElement>(null);\n  const [elementsTruncated, hasHiddenElements] = useTruncation(\n    itemsNotInTooltipRef,\n    plusRef,\n  ) as [number, boolean];\n\n  const nMoreItems = useMemo(\n    () => (items.length > maxLinks ? items.length - maxLinks : undefined),\n    [items, maxLinks],\n  );\n\n  const itemsNotInTooltip = useMemo(\n    () => (\n      <StyledVisibleItems ref={itemsNotInTooltipRef} data-test=\"crosslinks\">\n        {items.map(item => (\n          <StyledVisibleItem key={getKey(item)}>\n            {renderVisibleItem(item)}\n          </StyledVisibleItem>\n        ))}\n      </StyledVisibleItems>\n    ),\n    [getKey, items, renderVisibleItem],\n  );\n\n  const itemsInTooltip = useMemo(\n    () =>\n      items\n        .slice(0, maxLinks)\n        .map(item => (\n          <StyledTooltipItem key={getKey(item)}>\n            {renderTooltipItem(item)}\n          </StyledTooltipItem>\n        )),\n    [getKey, items, maxLinks, renderTooltipItem],\n  );\n\n  return (\n    <StyledTruncatedList>\n      <Tooltip\n        placement=\"top\"\n        title={\n          elementsTruncated ? (\n            <>\n              {itemsInTooltip}\n              {nMoreItems && <span>{t('+ %s more', nMoreItems)}</span>}\n            </>\n          ) : null\n        }\n      >\n        {itemsNotInTooltip}\n        {hasHiddenElements && (\n          <StyledPlus ref={plusRef}>+{elementsTruncated}</StyledPlus>\n        )}\n      </Tooltip>\n    </StyledTruncatedList>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  css,\n  ensureIsArray,\n  styled,\n  SupersetTheme,\n  t,\n} from '@superset-ui/core';\nimport Chart, { ChartLinkedDashboard } from 'src/types/Chart';\nimport Table, {\n  ColumnsType,\n  TableSize,\n  OnChangeFunction,\n} from 'src/components/Table';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport ChartImage from 'src/assets/images/chart.svg';\nimport Icons from 'src/components/Icons';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { useListViewResource } from 'src/views/CRUD/hooks';\nimport { FilterOperator } from 'src/components/ListView';\nimport moment from 'moment';\nimport TruncatedList from 'src/components/TruncatedList';\n\ninterface DatasetUsageProps {\n  datasetId: string;\n}\n\nconst DEFAULT_PAGE_SIZE = 25;\n\nconst getLinkProps = (dashboard: ChartLinkedDashboard) => ({\n  key: dashboard.id,\n  to: `/superset/dashboard/${dashboard.id}`,\n  target: '_blank',\n  rel: 'noreferer noopener',\n  children: dashboard.dashboard_title,\n});\n\nconst tooltipItemCSS = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light5};\n  text-decoration: underline;\n  &:hover {\n    color: inherit;\n  }\n`;\n\nconst columns: ColumnsType<Chart> = [\n  {\n    key: 'slice_name',\n    title: t('Chart'),\n    width: '320px',\n    sorter: true,\n    render: (value, record) => <Link to={record.url}>{record.slice_name}</Link>,\n  },\n  {\n    key: 'owners',\n    title: t('Chart owners'),\n    width: '242px',\n    render: (value, record) => (\n      <TruncatedList\n        items={\n          record.owners?.map(\n            owner => `${owner.first_name} ${owner.last_name}`,\n          ) ?? []\n        }\n      />\n    ),\n  },\n  {\n    key: 'last_saved_at',\n    title: t('Chart last modified'),\n    width: '209px',\n    sorter: true,\n    defaultSortOrder: 'descend',\n    render: (value, record) =>\n      record.last_saved_at ? moment.utc(record.last_saved_at).fromNow() : null,\n  },\n  {\n    key: 'last_saved_by.first_name',\n    title: t('Chart last modified by'),\n    width: '216px',\n    sorter: true,\n    render: (value, record) =>\n      record.last_saved_by\n        ? `${record.last_saved_by.first_name} ${record.last_saved_by.last_name}`\n        : null,\n  },\n  {\n    key: 'dashboards',\n    title: t('Dashboard usage'),\n    width: '420px',\n    render: (value, record) => (\n      <TruncatedList<ChartLinkedDashboard>\n        items={record.dashboards}\n        renderVisibleItem={dashboard => <Link {...getLinkProps(dashboard)} />}\n        renderTooltipItem={dashboard => (\n          <Link {...getLinkProps(dashboard)} css={tooltipItemCSS} />\n        )}\n        getKey={dashboard => dashboard.id}\n      />\n    ),\n  },\n];\n\nconst emptyStateTableCSS = (theme: SupersetTheme) => css`\n  && th.ant-table-cell {\n    color: ${theme.colors.grayscale.light1};\n  }\n\n  .ant-table-placeholder {\n    display: none;\n  }\n`;\n\nconst emptyStateButtonText = (\n  <>\n    <Icons.PlusOutlined\n      iconSize=\"m\"\n      css={css`\n        & > .anticon {\n          line-height: 0;\n        }\n      `}\n    />\n    {t('Create chart with dataset')}\n  </>\n);\n\nconst StyledEmptyStateBig = styled(EmptyStateBig)`\n  margin: ${({ theme }) => 13 * theme.gridUnit}px 0;\n`;\n\n/**\n * Hook that uses the useListViewResource hook to retrieve records\n * based on pagination state.\n */\nconst useDatasetChartRecords = (datasetId: string) => {\n  const { addDangerToast } = useToasts();\n\n  // Always filters charts by dataset\n  const baseFilters = useMemo(\n    () => [\n      {\n        id: 'datasource_id',\n        operator: FilterOperator.equals,\n        value: datasetId,\n      },\n    ],\n    [datasetId],\n  );\n\n  // Returns request status/results and function for re-fetching\n  const {\n    state: { loading, resourceCount, resourceCollection },\n    fetchData,\n  } = useListViewResource<Chart>(\n    'chart',\n    t('chart'),\n    addDangerToast,\n    true,\n    [],\n    baseFilters,\n  );\n\n  // Adds `key` field\n  const resourceCollectionWithKey = useMemo(\n    () => resourceCollection.map(o => ({ ...o, key: o.id })),\n    [resourceCollection],\n  );\n\n  // Called by table with updated table state to fetch new data\n  // @ts-ignore\n  const onChange: OnChangeFunction = useCallback(\n    // @ts-ignore\n    (tablePagination, tableFilters, tableSorter) => {\n      const pageIndex = (tablePagination.current ?? 1) - 1;\n      const pageSize = tablePagination.pageSize ?? 0;\n      const sortBy = ensureIsArray(tableSorter)\n        .filter(({ columnKey }) => typeof columnKey === 'string')\n        .map(({ columnKey, order }) => ({\n          id: columnKey as string,\n          desc: order === 'descend',\n        }));\n      fetchData({ pageIndex, pageSize, sortBy, filters: [] });\n    },\n    [fetchData],\n  );\n\n  // Initial data request\n  useEffect(() => {\n    fetchData({\n      pageIndex: 0,\n      pageSize: DEFAULT_PAGE_SIZE,\n      sortBy: [{ id: 'last_saved_at', desc: true }],\n      filters: [],\n    });\n  }, [fetchData]);\n\n  return {\n    loading,\n    recordCount: resourceCount,\n    data: resourceCollectionWithKey,\n    onChange,\n  };\n};\n\nconst DatasetUsage = ({ datasetId }: DatasetUsageProps) => {\n  const { loading, recordCount, data, onChange } =\n    useDatasetChartRecords(datasetId);\n\n  const emptyStateButtonAction = useCallback(\n    () =>\n      window.open(\n        `/explore/?dataset_type=table&dataset_id=${datasetId}`,\n        '_blank',\n      ),\n    [datasetId],\n  );\n\n  return (\n    <div css={!data.length ? emptyStateTableCSS : null}>\n      <Table\n        columns={columns}\n        data={data}\n        size={TableSize.MIDDLE}\n        defaultPageSize={DEFAULT_PAGE_SIZE}\n        recordCount={recordCount}\n        loading={loading}\n        onChange={onChange}\n      />\n      {!data.length && !loading ? (\n        <StyledEmptyStateBig\n          image={<ChartImage />}\n          title={t('No charts')}\n          description={t('This dataset is not used to power any charts.')}\n          buttonText={emptyStateButtonText}\n          buttonAction={emptyStateButtonAction}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nexport default DatasetUsage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, t } from '@superset-ui/core';\nimport React from 'react';\nimport useGetDatasetRelatedCounts from 'src/features/datasets/hooks/useGetDatasetRelatedCounts';\nimport Badge from 'src/components/Badge';\nimport Tabs from 'src/components/Tabs';\nimport UsageTab from './UsageTab';\n\nconst StyledTabs = styled(Tabs)`\n  ${({ theme }) => `\n  margin-top: ${theme.gridUnit * 8.5}px;\n  padding-left: ${theme.gridUnit * 4}px;\n  padding-right: ${theme.gridUnit * 4}px;\n\n  .ant-tabs-top > .ant-tabs-nav::before {\n    width: ${theme.gridUnit * 50}px;\n  }\n  `}\n`;\n\nconst TabStyles = styled.div`\n  ${({ theme }) => `\n  .ant-badge {\n    width: ${theme.gridUnit * 8}px;\n    margin-left: ${theme.gridUnit * 2.5}px;\n  }\n  `}\n`;\n\ninterface EditPageProps {\n  id: string;\n}\n\nconst TRANSLATIONS = {\n  USAGE_TEXT: t('Usage'),\n  COLUMNS_TEXT: t('Columns'),\n  METRICS_TEXT: t('Metrics'),\n};\n\nconst EditPage = ({ id }: EditPageProps) => {\n  const { usageCount } = useGetDatasetRelatedCounts(id);\n\n  const usageTab = (\n    <TabStyles>\n      <span>{TRANSLATIONS.USAGE_TEXT}</span>\n      {usageCount > 0 && <Badge count={usageCount} />}\n    </TabStyles>\n  );\n\n  return (\n    <StyledTabs moreIcon={null} fullWidth={false}>\n      <Tabs.TabPane tab={TRANSLATIONS.COLUMNS_TEXT} key=\"1\" />\n      <Tabs.TabPane tab={TRANSLATIONS.METRICS_TEXT} key=\"2\" />\n      <Tabs.TabPane tab={usageTab} key=\"3\">\n        <UsageTab datasetId={id} />\n      </Tabs.TabPane>\n    </StyledTabs>\n  );\n};\n\nexport default EditPage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect, useCallback } from 'react';\nimport { SupersetClient, logging, t } from '@superset-ui/core';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\n\nconst useGetDatasetRelatedCounts = (id: string) => {\n  const [usageCount, setUsageCount] = useState(0);\n\n  const getDatasetRelatedObjects = useCallback(\n    () =>\n      SupersetClient.get({\n        endpoint: `/api/v1/dataset/${id}/related_objects`,\n      })\n        .then(({ json }) => {\n          setUsageCount(json?.charts.count);\n        })\n        .catch(error => {\n          addDangerToast(\n            t(`There was an error fetching dataset's related objects`),\n          );\n          logging.error(error);\n        }),\n    [id],\n  );\n\n  useEffect(() => {\n    // Todo: this useEffect should be used to call all count methods conncurently\n    // when we populate data for the new tabs. For right separating out this\n    // api call for building the usage page.\n    if (id) {\n      getDatasetRelatedObjects();\n    }\n  }, [id, getDatasetRelatedObjects]);\n\n  return { usageCount };\n};\n\nexport default useGetDatasetRelatedCounts;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * @param key The name of the row's attribute used to compare values for alphabetical sorting\n * @param a First row object to compare\n * @param b Second row object to compare\n * @returns number\n */\nexport const alphabeticalSort = (key: string, a: object, b: object): number =>\n  a?.[key]?.localeCompare?.(b?.[key]);\n\n/**\n * @param key The name of the row's attribute used to compare values for numerical sorting\n * @param a First row object to compare\n * @param b Second row object to compare\n * @returns number\n */\nexport const numericalSort = (key: string, a: object, b: object): number =>\n  a?.[key] - b?.[key];\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { t, styled } from '@superset-ui/core';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport { Link } from 'react-router-dom';\n\nconst StyledContainer = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 8}px\n    ${({ theme }) => theme.gridUnit * 6}px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n`;\n\nconst StyledEmptyStateBig = styled(EmptyStateBig)`\n  max-width: 50%;\n\n  p {\n    width: ${({ theme }) => theme.gridUnit * 115}px;\n  }\n`;\n\nexport const SELECT_MESSAGE = t(\n  'Datasets can be created from database tables or SQL queries. Select a database table to the left or ',\n);\nexport const CREATE_MESSAGE = t('create dataset from SQL query');\nexport const VIEW_DATASET_MESSAGE = t(\n  ' to open SQL Lab. From there you can save the query as a dataset.',\n);\n\nconst renderEmptyDescription = () => (\n  <>\n    {SELECT_MESSAGE}\n    <Link to=\"/sqllab\">\n      <span role=\"button\" tabIndex={0}>\n        {CREATE_MESSAGE}\n      </span>\n    </Link>\n    {VIEW_DATASET_MESSAGE}\n  </>\n);\n\nexport const SELECT_TABLE_TITLE = t('Select dataset source');\nexport const NO_COLUMNS_TITLE = t('No table columns');\nexport const NO_COLUMNS_DESCRIPTION = t(\n  'This database table does not contain any data. Please select a different table.',\n);\nexport const ERROR_TITLE = t('An Error Occurred');\nexport const ERROR_DESCRIPTION = t(\n  'Unable to load columns for the selected table. Please select a different table.',\n);\n\ninterface MessageContentProps {\n  hasError: boolean;\n  tableName?: string | null;\n  hasColumns: boolean;\n}\n\nexport const MessageContent = (props: MessageContentProps) => {\n  const { hasError, tableName, hasColumns } = props;\n  let currentImage: string | undefined = 'empty-dataset.svg';\n  let currentTitle = SELECT_TABLE_TITLE;\n  let currentDescription = renderEmptyDescription();\n  if (hasError) {\n    currentTitle = ERROR_TITLE;\n    currentDescription = <>{ERROR_DESCRIPTION}</>;\n    currentImage = undefined;\n  } else if (tableName && !hasColumns) {\n    currentImage = 'no-columns.svg';\n    currentTitle = NO_COLUMNS_TITLE;\n    currentDescription = <>{NO_COLUMNS_DESCRIPTION}</>;\n  }\n  return (\n    <StyledContainer>\n      <StyledEmptyStateBig\n        image={currentImage}\n        title={currentTitle}\n        description={currentDescription}\n      />\n    </StyledContainer>\n  );\n};\n\nexport default MessageContent;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t, styled, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport Alert from 'src/components/Alert';\nimport Table, { ColumnsType, TableSize } from 'src/components/Table';\nimport { alphabeticalSort } from 'src/components/Table/sorters';\n// @ts-ignore\nimport LOADING_GIF from 'src/assets/images/loading.gif';\nimport { DatasetObject } from 'src/features/datasets/AddDataset/types';\nimport { ITableColumn } from './types';\nimport MessageContent from './MessageContent';\n\n/**\n * Enum defining CSS position options\n */\nenum EPosition {\n  ABSOLUTE = 'absolute',\n  RELATIVE = 'relative',\n}\n\n/**\n * Interface for StyledHeader\n */\ninterface StyledHeaderProps {\n  /**\n   * Determine the CSS positioning type\n   * Vertical centering of loader, No columns screen, and select table screen\n   * gets offset when the header position is relative and needs to be absolute, but table\n   * needs this positioned relative to render correctly\n   */\n  position: EPosition;\n}\n\nconst LOADER_WIDTH = 200;\nconst SPINNER_WIDTH = 120;\nconst HALF = 0.5;\nconst MARGIN_MULTIPLIER = 3;\n\nconst StyledHeader = styled.div<StyledHeaderProps>`\n  ${({ theme, position }) => `\n  position: ${position};\n  margin: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * MARGIN_MULTIPLIER}px\n    ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  font-size: ${theme.gridUnit * 6}px;\n  font-weight: ${theme.typography.weights.medium};\n  padding-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  .anticon:first-of-type {\n    margin-right: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  }\n\n  .anticon:nth-of-type(2) {\n    margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 1)}px;\n  `}\n`;\n\nconst StyledTitle = styled.div`\n  ${({ theme }) => `\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  margin-bottom: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nconst LoaderContainer = styled.div`\n  ${({ theme }) => `\n  padding: ${theme.gridUnit * 8}px\n    ${theme.gridUnit * 6}px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  `}\n`;\n\nconst StyledLoader = styled.div`\n  ${({ theme }) => `\n  max-width: 50%;\n  width: ${LOADER_WIDTH}px;\n\n  img {\n    width: ${SPINNER_WIDTH}px;\n    margin-left: ${(LOADER_WIDTH - SPINNER_WIDTH) * HALF}px;\n  }\n\n  div {\n    width: 100%;\n    margin-top: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n    text-align: center;\n    font-weight: ${theme.typography.weights.normal};\n    font-size: ${theme.typography.sizes.l}px;\n    color: ${theme.colors.grayscale.light1};\n  }\n  `}\n`;\n\nconst TableContainerWithBanner = styled.div`\n  ${({ theme }) => `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 60}px);\n  overflow: auto;\n  `}\n`;\n\nconst TableContainerWithoutBanner = styled.div`\n  ${({ theme }) => `\n  position: relative;\n  margin: ${theme.gridUnit * MARGIN_MULTIPLIER}px;\n  margin-left: ${theme.gridUnit * (MARGIN_MULTIPLIER + 3)}px;\n  height: calc(100% - ${theme.gridUnit * 30}px);\n  overflow: auto;\n  `}\n`;\n\nconst TableScrollContainer = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n`;\n\nconst StyledAlert = styled(Alert)`\n  ${({ theme }) => `\n  border: 1px solid ${theme.colors.info.base};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 6}px ${theme.gridUnit * 6}px\n    ${theme.gridUnit * 8}px;\n  .view-dataset-button {\n    position: absolute;\n    top: ${theme.gridUnit * 4}px;\n    right: ${theme.gridUnit * 4}px;\n    font-weight: ${theme.typography.weights.normal};\n\n    &:hover {\n      color: ${theme.colors.secondary.dark3};\n      text-decoration: underline;\n    }\n  }\n  `}\n`;\n\nexport const REFRESHING = t('Refreshing columns');\nexport const COLUMN_TITLE = t('Table columns');\nexport const ALT_LOADING = t('Loading');\n\nconst pageSizeOptions = ['5', '10', '15', '25'];\nconst DEFAULT_PAGE_SIZE = 25;\n\n// Define the columns for Table instance\nexport const tableColumnDefinition: ColumnsType<ITableColumn> = [\n  {\n    title: 'Column Name',\n    dataIndex: 'name',\n    key: 'name',\n    sorter: (a: ITableColumn, b: ITableColumn) =>\n      alphabeticalSort('name', a, b),\n  },\n  {\n    title: 'Datatype',\n    dataIndex: 'type',\n    key: 'type',\n    width: '100px',\n    sorter: (a: ITableColumn, b: ITableColumn) =>\n      alphabeticalSort('type', a, b),\n  },\n];\n\n/**\n * Props interface for DatasetPanel\n */\nexport interface IDatasetPanelProps {\n  /**\n   * Name of the database table\n   */\n  tableName?: string | null;\n  /**\n   * Array of ITableColumn instances with name and type attributes\n   */\n  columnList: ITableColumn[];\n  /**\n   * Boolean indicating if there is an error state\n   */\n  hasError: boolean;\n  /**\n   * Boolean indicating if the component is in a loading state\n   */\n  loading: boolean;\n  datasets?: DatasetObject[] | undefined;\n}\n\nconst EXISTING_DATASET_DESCRIPTION = t(\n  'This table already has a dataset associated with it. You can only associate one dataset with a table.\\n',\n);\nconst VIEW_DATASET = t('View Dataset');\n\nconst renderExistingDatasetAlert = (dataset?: DatasetObject) => (\n  <StyledAlert\n    closable={false}\n    type=\"info\"\n    showIcon\n    message={t('This table already has a dataset')}\n    description={\n      <>\n        {EXISTING_DATASET_DESCRIPTION}\n        <span\n          role=\"button\"\n          onClick={() => {\n            window.open(\n              dataset?.explore_url,\n              '_blank',\n              'noreferrer noopener popup=false',\n            );\n          }}\n          tabIndex={0}\n          className=\"view-dataset-button\"\n        >\n          {VIEW_DATASET}\n        </span>\n      </>\n    }\n  />\n);\n\nconst DatasetPanel = ({\n  tableName,\n  columnList,\n  loading,\n  hasError,\n  datasets,\n}: IDatasetPanelProps) => {\n  const theme = useTheme();\n  const hasColumns = columnList?.length > 0 ?? false;\n  const datasetNames = datasets?.map(dataset => dataset.table_name);\n  const tableWithDataset = datasets?.find(\n    dataset => dataset.table_name === tableName,\n  );\n\n  let component;\n  let loader;\n  if (loading) {\n    loader = (\n      <LoaderContainer>\n        <StyledLoader>\n          <img alt={ALT_LOADING} src={LOADING_GIF} />\n          <div>{REFRESHING}</div>\n        </StyledLoader>\n      </LoaderContainer>\n    );\n  }\n  if (!loading) {\n    if (!loading && tableName && hasColumns && !hasError) {\n      component = (\n        <>\n          <StyledTitle>{COLUMN_TITLE}</StyledTitle>\n          {tableWithDataset ? (\n            <TableContainerWithBanner>\n              <TableScrollContainer>\n                <Table\n                  loading={loading}\n                  size={TableSize.SMALL}\n                  columns={tableColumnDefinition}\n                  data={columnList}\n                  pageSizeOptions={pageSizeOptions}\n                  defaultPageSize={DEFAULT_PAGE_SIZE}\n                />\n              </TableScrollContainer>\n            </TableContainerWithBanner>\n          ) : (\n            <TableContainerWithoutBanner>\n              <TableScrollContainer>\n                <Table\n                  loading={loading}\n                  size={TableSize.SMALL}\n                  columns={tableColumnDefinition}\n                  data={columnList}\n                  pageSizeOptions={pageSizeOptions}\n                  defaultPageSize={DEFAULT_PAGE_SIZE}\n                />\n              </TableScrollContainer>\n            </TableContainerWithoutBanner>\n          )}\n        </>\n      );\n    } else {\n      component = (\n        <MessageContent\n          hasColumns={hasColumns}\n          hasError={hasError}\n          tableName={tableName}\n        />\n      );\n    }\n  }\n\n  return (\n    <>\n      {tableName && (\n        <>\n          {datasetNames?.includes(tableName) &&\n            renderExistingDatasetAlert(tableWithDataset)}\n          <StyledHeader\n            position={\n              !loading && hasColumns ? EPosition.RELATIVE : EPosition.ABSOLUTE\n            }\n            title={tableName || ''}\n          >\n            {tableName && (\n              <Icons.Table iconColor={theme.colors.grayscale.base} />\n            )}\n            {tableName}\n          </StyledHeader>\n        </>\n      )}\n      {component}\n      {loader}\n    </>\n  );\n};\n\nexport default DatasetPanel;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { SupersetClient, logging, t } from '@superset-ui/core';\nimport { DatasetObject } from 'src/features/datasets/AddDataset/types';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport DatasetPanel from './DatasetPanel';\nimport { ITableColumn, IDatabaseTable, isIDatabaseTable } from './types';\n\n/**\n * Interface for the getTableMetadata API call\n */\ninterface IColumnProps {\n  /**\n   * Unique id of the database\n   */\n  dbId: number;\n  /**\n   * Name of the table\n   */\n  tableName: string;\n  /**\n   * Name of the schema\n   */\n  schema: string;\n}\n\nexport interface IDatasetPanelWrapperProps {\n  /**\n   * Name of the database table\n   */\n  tableName?: string | null;\n  /**\n   * Database ID\n   */\n  dbId?: number;\n  /**\n   * The selected schema for the database\n   */\n  schema?: string | null;\n  setHasColumns?: Function;\n  datasets?: DatasetObject[] | undefined;\n}\n\nconst DatasetPanelWrapper = ({\n  tableName,\n  dbId,\n  schema,\n  setHasColumns,\n  datasets,\n}: IDatasetPanelWrapperProps) => {\n  const [columnList, setColumnList] = useState<ITableColumn[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const tableNameRef = useRef(tableName);\n\n  const getTableMetadata = async (props: IColumnProps) => {\n    const { dbId, tableName, schema } = props;\n    setLoading(true);\n    setHasColumns?.(false);\n    const path = `/api/v1/database/${dbId}/table/${tableName}/${schema}/`;\n    try {\n      const response = await SupersetClient.get({\n        endpoint: path,\n      });\n\n      if (isIDatabaseTable(response?.json)) {\n        const table: IDatabaseTable = response.json as IDatabaseTable;\n        /**\n         *  The user is able to click other table columns while the http call for last selected table column is made\n         *  This check ensures we process the response that matches the last selected table name and ignore the others\n         */\n        if (table.name === tableNameRef.current) {\n          setColumnList(table.columns);\n          setHasColumns?.(table.columns.length > 0);\n          setHasError(false);\n        }\n      } else {\n        setColumnList([]);\n        setHasColumns?.(false);\n        setHasError(true);\n        addDangerToast(\n          t(\n            'The API response from %s does not match the IDatabaseTable interface.',\n            path,\n          ),\n        );\n        logging.error(\n          t(\n            'The API response from %s does not match the IDatabaseTable interface.',\n            path,\n          ),\n        );\n      }\n    } catch (error) {\n      setColumnList([]);\n      setHasColumns?.(false);\n      setHasError(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    tableNameRef.current = tableName;\n    if (tableName && schema && dbId) {\n      getTableMetadata({ tableName, dbId, schema });\n    }\n    // getTableMetadata is a const and should not be in dependency array\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableName, dbId, schema]);\n\n  return (\n    <DatasetPanel\n      columnList={columnList}\n      hasError={hasError}\n      loading={loading}\n      tableName={tableName}\n      datasets={datasets}\n    />\n  );\n};\n\nexport default DatasetPanelWrapper;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Interface for table columns dataset\n */\nexport interface ITableColumn {\n  /**\n   * Name of the column\n   */\n  name: string;\n  /**\n   * Datatype of the column\n   */\n  type: string;\n}\n\n/**\n * Checks if a given item matches the ITableColumn interface\n * @param item Object to check if it matches the ITableColumn interface\n * @returns boolean true if matches interface\n */\nexport const isITableColumn = (item: any): boolean => {\n  let match = true;\n  const BASE_ERROR =\n    'The object provided to isITableColumn does match the interface.';\n  if (typeof item?.name !== 'string') {\n    match = false;\n    // eslint-disable-next-line no-console\n    console.error(\n      `${BASE_ERROR} The property 'name' is required and must be a string`,\n    );\n  }\n  if (match && typeof item?.type !== 'string') {\n    match = false;\n    // eslint-disable-next-line no-console\n    console.error(\n      `${BASE_ERROR} The property 'type' is required and must be a string`,\n    );\n  }\n  return match;\n};\n\nexport interface IDatabaseTable {\n  name: string;\n  columns: ITableColumn[];\n}\n\n/**\n * Checks if a given item matches the isIDatabsetTable interface\n * @param item Object to check if it matches the isIDatabsetTable interface\n * @returns boolean true if matches interface\n */\nexport const isIDatabaseTable = (item: any): boolean => {\n  let match = true;\n  if (typeof item?.name !== 'string') {\n    match = false;\n  }\n  if (match && !Array.isArray(item.columns)) {\n    match = false;\n  }\n  if (match && item.columns.length > 0) {\n    const invalid = item.columns.some((column: any, index: number) => {\n      const valid = isITableColumn(column);\n      if (!valid) {\n        // eslint-disable-next-line no-console\n        console.error(\n          `The provided object does not match the IDatabaseTable interface. columns[${index}] is invalid and does not match the ITableColumn interface`,\n        );\n      }\n      return !valid;\n    });\n    match = !invalid;\n  }\n  return match;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, SetStateAction, Dispatch, useCallback } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport TableSelector, { TableOption } from 'src/components/TableSelector';\nimport { DatabaseObject } from 'src/components/DatabaseSelector';\nimport { emptyStateComponent } from 'src/components/EmptyState';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { LocalStorageKeys, getItem } from 'src/utils/localStorageHelpers';\nimport {\n  DatasetActionType,\n  DatasetObject,\n} from 'src/features/datasets/AddDataset/types';\nimport { Table } from 'src/hooks/apiResources';\n\ninterface LeftPanelProps {\n  setDataset: Dispatch<SetStateAction<object>>;\n  dataset?: Partial<DatasetObject> | null;\n  datasetNames?: (string | null | undefined)[] | undefined;\n}\n\nconst LeftPanelStyle = styled.div`\n  ${({ theme }) => `\n    padding: ${theme.gridUnit * 4}px;\n    height: 100%;\n    background-color: ${theme.colors.grayscale.light5};\n    position: relative;\n    .emptystate {\n      height: auto;\n      margin-top: ${theme.gridUnit * 17.5}px;\n    }\n    .section-title {\n      margin-top: ${theme.gridUnit * 5.5}px;\n      margin-bottom: ${theme.gridUnit * 11}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .table-title {\n      margin-top: ${theme.gridUnit * 11}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n    .options-list {\n      overflow: auto;\n      position: absolute;\n      bottom: 0;\n      top: ${theme.gridUnit * 92.25}px;\n      left: ${theme.gridUnit * 3.25}px;\n      right: 0;\n\n      .no-scrollbar {\n        margin-right: ${theme.gridUnit * 4}px;\n      }\n\n      .options {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        :hover {\n          background-color: ${theme.colors.grayscale.light4}\n        }\n      }\n\n      .options-highlighted {\n        cursor: pointer;\n        padding: ${theme.gridUnit * 1.75}px;\n        border-radius: ${theme.borderRadius}px;\n        background-color: ${theme.colors.primary.dark1};\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .options, .options-highlighted {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n    }\n    form > span[aria-label=\"refresh\"] {\n      position: absolute;\n      top: ${theme.gridUnit * 69}px;\n      left: ${theme.gridUnit * 42.75}px;\n      font-size: ${theme.gridUnit * 4.25}px;\n    }\n    .table-form {\n      margin-bottom: ${theme.gridUnit * 8}px;\n    }\n    .loading-container {\n      position: absolute;\n      top: ${theme.gridUnit * 89.75}px;\n      left: 0;\n      right: 0;\n      text-align: center;\n      img {\n        width: ${theme.gridUnit * 20}px;\n        margin-bottom: ${theme.gridUnit * 2.5}px;\n      }\n      p {\n        color: ${theme.colors.grayscale.light1};\n      }\n    }\n`}\n`;\n\nexport default function LeftPanel({\n  setDataset,\n  dataset,\n  datasetNames,\n}: LeftPanelProps) {\n  const { addDangerToast } = useToasts();\n\n  const setDatabase = useCallback(\n    (db: Partial<DatabaseObject>) => {\n      setDataset({ type: DatasetActionType.selectDatabase, payload: { db } });\n    },\n    [setDataset],\n  );\n  const setSchema = (schema: string) => {\n    if (schema) {\n      setDataset({\n        type: DatasetActionType.selectSchema,\n        payload: { name: 'schema', value: schema },\n      });\n    }\n  };\n  const setTable = (tableName: string) => {\n    setDataset({\n      type: DatasetActionType.selectTable,\n      payload: { name: 'table_name', value: tableName },\n    });\n  };\n  useEffect(() => {\n    const currentUserSelectedDb = getItem(\n      LocalStorageKeys.db,\n      null,\n    ) as DatabaseObject;\n    if (currentUserSelectedDb) {\n      setDatabase(currentUserSelectedDb);\n    }\n  }, [setDatabase]);\n\n  const customTableOptionLabelRenderer = useCallback(\n    (table: Table) => (\n      <TableOption\n        table={\n          datasetNames?.includes(table.value)\n            ? {\n                ...table,\n                extra: {\n                  warning_markdown: t('This table already has a dataset'),\n                },\n              }\n            : table\n        }\n      />\n    ),\n    [datasetNames],\n  );\n\n  return (\n    <LeftPanelStyle>\n      <TableSelector\n        database={dataset?.db}\n        handleError={addDangerToast}\n        emptyState={emptyStateComponent(false)}\n        onDbChange={setDatabase}\n        onSchemaChange={setSchema}\n        onTableSelectChange={setTable}\n        sqlLabMode={false}\n        customTableOptionLabelRenderer={customTableOptionLabelRenderer}\n        {...(dataset?.schema && { schema: dataset.schema })}\n      />\n    </LeftPanelStyle>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Button from 'src/components/Button';\nimport { t } from '@superset-ui/core';\nimport { useSingleViewResource } from 'src/views/CRUD/hooks';\nimport { logEvent } from 'src/logger/actions';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport {\n  LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SUCCESS,\n} from 'src/logger/LogUtils';\nimport { DatasetObject } from '../types';\n\ninterface FooterProps {\n  url: string;\n  addDangerToast: () => void;\n  datasetObject?: Partial<DatasetObject> | null;\n  onDatasetAdd?: (dataset: DatasetObject) => void;\n  hasColumns?: boolean;\n  datasets?: (string | null | undefined)[] | undefined;\n}\n\nconst INPUT_FIELDS = ['db', 'schema', 'table_name'];\nconst LOG_ACTIONS = [\n  LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION,\n  LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION,\n];\n\nfunction Footer({\n  datasetObject,\n  addDangerToast,\n  hasColumns = false,\n  datasets,\n}: FooterProps) {\n  const history = useHistory();\n  const { createResource } = useSingleViewResource<Partial<DatasetObject>>(\n    'dataset',\n    t('dataset'),\n    addDangerToast,\n  );\n\n  const createLogAction = (dataset: Partial<DatasetObject>) => {\n    let totalCount = 0;\n    const value = Object.keys(dataset).reduce((total, key) => {\n      if (INPUT_FIELDS.includes(key) && dataset[key]) {\n        totalCount += 1;\n      }\n      return totalCount;\n    }, 0);\n\n    return LOG_ACTIONS[value];\n  };\n\n  const cancelButtonOnClick = () => {\n    if (!datasetObject) {\n      logEvent(LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION, {});\n    } else {\n      const logAction = createLogAction(datasetObject);\n      logEvent(logAction, datasetObject);\n    }\n    history.goBack();\n  };\n\n  const tooltipText = t('Select a database table.');\n\n  const onSave = () => {\n    if (datasetObject) {\n      const data = {\n        database: datasetObject.db?.id,\n        schema: datasetObject.schema,\n        table_name: datasetObject.table_name,\n      };\n      createResource(data).then(response => {\n        if (!response) {\n          return;\n        }\n        if (typeof response === 'number') {\n          logEvent(LOG_ACTIONS_DATASET_CREATION_SUCCESS, datasetObject);\n          // When a dataset is created the response we get is its ID number\n          history.push(`/chart/add/?dataset=${datasetObject.table_name}`);\n        }\n      });\n    }\n  };\n\n  const CREATE_DATASET_TEXT = t('Create dataset and create chart');\n  const disabledCheck =\n    !datasetObject?.table_name ||\n    !hasColumns ||\n    datasets?.includes(datasetObject?.table_name);\n\n  return (\n    <>\n      <Button onClick={cancelButtonOnClick}>{t('Cancel')}</Button>\n      <Button\n        buttonStyle=\"primary\"\n        disabled={disabledCheck}\n        tooltip={!datasetObject?.table_name ? tooltipText : undefined}\n        onClick={onSave}\n      >\n        {CREATE_DATASET_TEXT}\n      </Button>\n    </>\n  );\n}\n\nexport default withToasts(Footer);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactElement, JSXElementConstructor } from 'react';\nimport { useTheme } from '@superset-ui/core';\nimport ResizableSidebar from 'src/components/ResizableSidebar';\n\nimport {\n  StyledLayoutWrapper,\n  LeftColumn,\n  RightColumn,\n  OuterRow,\n  PanelRow,\n  FooterRow,\n  StyledLayoutHeader,\n  StyledLayoutLeftPanel,\n  StyledLayoutDatasetPanel,\n  StyledLayoutRightPanel,\n  StyledLayoutFooter,\n} from '../styles';\n\ninterface DatasetLayoutProps {\n  header?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  leftPanel?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  datasetPanel?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  rightPanel?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n  footer?: ReactElement<any, string | JSXElementConstructor<any>> | null;\n}\n\nexport default function DatasetLayout({\n  header,\n  leftPanel,\n  datasetPanel,\n  rightPanel,\n  footer,\n}: DatasetLayoutProps) {\n  const theme = useTheme();\n\n  return (\n    <StyledLayoutWrapper data-test=\"dataset-layout-wrapper\">\n      {header && <StyledLayoutHeader>{header}</StyledLayoutHeader>}\n      <OuterRow>\n        {leftPanel && (\n          <ResizableSidebar\n            id=\"dataset\"\n            initialWidth={theme.gridUnit * 80}\n            minWidth={theme.gridUnit * 80}\n            enable\n          >\n            {adjustedWidth => (\n              <LeftColumn width={adjustedWidth}>\n                <StyledLayoutLeftPanel>{leftPanel}</StyledLayoutLeftPanel>\n              </LeftColumn>\n            )}\n          </ResizableSidebar>\n        )}\n        <RightColumn>\n          <PanelRow>\n            {datasetPanel && (\n              <StyledLayoutDatasetPanel>\n                {datasetPanel}\n              </StyledLayoutDatasetPanel>\n            )}\n            {rightPanel && (\n              <StyledLayoutRightPanel>{rightPanel}</StyledLayoutRightPanel>\n            )}\n          </PanelRow>\n\n          <FooterRow>\n            {footer && <StyledLayoutFooter>{footer}</StyledLayoutFooter>}\n          </FooterRow>\n        </RightColumn>\n      </OuterRow>\n    </StyledLayoutWrapper>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useReducer, Reducer, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useDatasetsList from 'src/features/datasets/hooks/useDatasetLists';\nimport Header from 'src/features/datasets/AddDataset/Header';\nimport EditPage from 'src/features/datasets/AddDataset/EditDataset';\nimport DatasetPanel from 'src/features/datasets/AddDataset/DatasetPanel';\nimport LeftPanel from 'src/features/datasets/AddDataset/LeftPanel';\nimport Footer from 'src/features/datasets/AddDataset/Footer';\nimport {\n  DatasetActionType,\n  DatasetObject,\n  DSReducerActionType,\n} from 'src/features/datasets/AddDataset/types';\nimport DatasetLayout from 'src/features/datasets/DatasetLayout';\n\ntype Schema = {\n  schema: string;\n};\n\nexport function datasetReducer(\n  state: DatasetObject | null,\n  action: DSReducerActionType,\n): Partial<DatasetObject> | Schema | null {\n  const trimmedState = {\n    ...(state || {}),\n  };\n\n  switch (action.type) {\n    case DatasetActionType.selectDatabase:\n      return {\n        ...trimmedState,\n        ...action.payload,\n        schema: null,\n        table_name: null,\n      };\n    case DatasetActionType.selectSchema:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n        table_name: null,\n      };\n    case DatasetActionType.selectTable:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    case DatasetActionType.changeDataset:\n      return {\n        ...trimmedState,\n        [action.payload.name]: action.payload.value,\n      };\n    default:\n      return null;\n  }\n}\n\nconst prevUrl =\n  '/tablemodelview/list/?pageIndex=0&sortColumn=changed_on_delta_humanized&sortOrder=desc';\n\nexport default function AddDataset() {\n  const [dataset, setDataset] = useReducer<\n    Reducer<Partial<DatasetObject> | null, DSReducerActionType>\n  >(datasetReducer, null);\n  const [hasColumns, setHasColumns] = useState(false);\n  const [editPageIsVisible, setEditPageIsVisible] = useState(false);\n\n  const { datasets, datasetNames } = useDatasetsList(\n    dataset?.db,\n    dataset?.schema,\n  );\n\n  const { datasetId: id } = useParams<{ datasetId: string }>();\n  useEffect(() => {\n    if (!Number.isNaN(parseInt(id, 10))) {\n      setEditPageIsVisible(true);\n    }\n  }, [id]);\n\n  const HeaderComponent = () => (\n    <Header setDataset={setDataset} title={dataset?.table_name} />\n  );\n\n  const LeftPanelComponent = () => (\n    <LeftPanel\n      setDataset={setDataset}\n      dataset={dataset}\n      datasetNames={datasetNames}\n    />\n  );\n\n  const EditPageComponent = () => <EditPage id={id} />;\n\n  const DatasetPanelComponent = () => (\n    <DatasetPanel\n      tableName={dataset?.table_name}\n      dbId={dataset?.db?.id}\n      schema={dataset?.schema}\n      setHasColumns={setHasColumns}\n      datasets={datasets}\n    />\n  );\n\n  const FooterComponent = () => (\n    <Footer\n      url={prevUrl}\n      datasetObject={dataset}\n      hasColumns={hasColumns}\n      datasets={datasetNames}\n    />\n  );\n\n  return (\n    <DatasetLayout\n      header={HeaderComponent()}\n      leftPanel={editPageIsVisible ? null : LeftPanelComponent()}\n      datasetPanel={\n        editPageIsVisible ? EditPageComponent() : DatasetPanelComponent()\n      }\n      footer={FooterComponent()}\n    />\n  );\n}\n"],"names":["getOffset","node","box","getBoundingClientRect","docElem","document","documentElement","left","window","pageXOffset","scrollLeft","clientLeft","body","top","pageYOffset","scrollTop","clientTop","_interopRequireDefault","Object","defineProperty","exports","value","toArray","children","option","arguments","length","undefined","ret","_react","default","Children","forEach","child","keepEmpty","Array","isArray","concat","_reactIs","isFragment","props","push","target","eventType","cb","callback","_reactDom","unstable_batchedUpdates","e","addEventListener","remove","removeEventListener","get","name","style","getComputedStyle","floatMap","type","toLowerCase","offsetHeight","offsetWidth","removePixel","PIXEL_PATTERN","test","parseFloat","getStyleValue","getClientSize","width","clientWidth","height","innerHeight","clientHeight","getDocSize","Math","max","scrollWidth","scrollHeight","getOuterHeight","el","getOuterWidth","getScroll","set","x","hasOwnProperty","cssFloat","styleFloat","float","nodeType","ownerDocument","defaultView","element","HTMLElement","offsetParent","SVGGraphicsElement","getBBox","_element$getBBox","_element$getBoundingC","_width","_height","cached","getScrollBarSize","fresh","inner","createElement","outer","outerStyle","position","pointerEvents","visibility","overflow","appendChild","widthContained","widthScroll","removeChild","ensureSize","str","match","Number","isNaN","getTargetScrollBarSize","Element","_getComputedStyle","_interopRequireWildcard","fnRef","React","useRef","current","useCallback","_fnRef$current","_len","args","_key","call","apply","useLayoutUpdateEffect","useLayoutEffect","useEffect","_default","deps","firstMountRef","defaultStateValue","_ref","defaultValue","onChange","postState","_useState","_useState3","source","finalValue","hasValue","Source","PROP","INNER","_useState2","_slicedToArray2","mergedValue","setMergedValue","chosenValue","postMergedValue","_useLayoutEffect","_ref2","prevValue","changeEventPrevRef","triggerChange","_useEvent","updater","ignoreDestroy","prev","_prev","prevSource","prevPrevValue","nextValue","overridePrevValue","onChangeFn","_mergedValue","destroyRef","_React$useState","useState","_React$useState2","setValue","useChildElementTruncation","elementRef","plusRef","_elementRef$current","_elementRef$current2","elementsTruncated","setElementsTruncated","hasHiddenElements","setHasHiddenElements","previousEffectInfoRef","parentElementWidth","plusRefWidth","_currentElement$paren","currentElement","plusRefElement","childNodes","previousEffectInfo","parentElement","truncationWidth","plusSize","maxWidth","elementsCount","hiddenElements","i","titleStyles","theme","css","typography","sizes","xl","weights","bold","colors","grayscale","light1","DynamicEditableTitle","title","placeholder","onSave","canEdit","label","isEditing","setIsEditing","currentTitle","setCurrentTitle","contentRef","showTooltip","setShowTooltip","inputWidth","ref","sizerRef","useResizeDetector","containerWidth","containerRef","refreshMode","focus","setSelectionRange","textContent","handleClick","handleBlur","formattedTitle","trim","handleChange","ev","handleKeyPress","_contentRef$current","key","preventDefault","blur","___EmotionJSX","Tooltip","id","className","t","onBlur","onClick","onKeyPress","tabIndex","menuTriggerStyles","gridUnit","primary","dark2","headerStyles","light5","buttonsStyles","additionalActionsContainerStyles","PageHeaderWithActions","editableTitleProps","showTitlePanelItems","certificatiedBadgeProps","showFaveStar","faveStarProps","titlePanelAdditionalItems","rightPanelAdditionalItems","additionalActionsMenu","menuDropdownProps","showMenuDropdown","tooltipProps","useTheme","certifiedBy","CertifiedBadge","FaveStar","AntdDropdown","_extends","trigger","overlay","Button","buttonStyle","tooltip","text","placement","Icons","MoreHoriz","iconColor","iconSize","ResizableWrapper","styled","div","base","initialWidth","minWidth","enable","setWidth","widthsMapRef","sidebarWidth","setSidebarWidth","_widthsMapRef$current","getItem","LocalStorageKeys","common__resizable_sidebar_widths","updatedWidth","setItem","useStoredSidebarWidth","Resizable","right","handleClasses","size","onResizeStop","direction","d","useDatasetsList","db","schema","datasets","setDatasets","encodedSchema","encodeURIComponent","getDatasetsList","async","filters","count","results","page","queryParams","rison","response","SupersetClient","endpoint","json","result","error","addDangerToast","logging","col","opr","datasetNames","useMemo","map","dataset","table_name","DatasetActionType","StyledLayoutWrapper","LeftColumn","_ref3","RightColumn","Row","OuterRow","PanelRow","FooterRow","_ref4","StyledLayoutHeader","_ref5","light2","StyledCreateDatasetTitle","_ref6","StyledLayoutLeftPanel","_ref7","StyledLayoutDatasetPanel","StyledLayoutRightPanel","_ref8","success","StyledLayoutFooter","_ref9","info","zIndex","HeaderComponentStyles","_ref10","disabledSaveBtnStyles","light3","DEFAULT_TITLE","renderDisabledSaveButton","disabled","Save","renderOverlay","Menu","Item","Header","setDataset","editing","newDatasetName","changeDataset","payload","itemId","saveFaveStar","_path","_path2","assign","bind","prototype","this","SvgChart","titleId","xmlns","fill","fillRule","clipRule","forwardRef","StyledTruncatedList","StyledVisibleItems","span","StyledVisibleItem","StyledTooltipItem","StyledPlus","dark1","normal","TruncatedList","items","renderVisibleItem","item","renderTooltipItem","getKey","maxLinks","itemsNotInTooltipRef","useTruncation","nMoreItems","itemsNotInTooltip","itemsInTooltip","slice","getLinkProps","dashboard","to","rel","dashboard_title","tooltipItemCSS","columns","sorter","render","record","Link","url","slice_name","_record$owners$map","_record$owners","owners","owner","first_name","last_name","defaultSortOrder","last_saved_at","moment","fromNow","last_saved_by","dashboards","emptyStateTableCSS","emptyStateButtonText","PlusOutlined","StyledEmptyStateBig","EmptyStateBig","datasetId","loading","recordCount","data","useDatasetChartRecords","useToasts","baseFilters","operator","FilterOperator","equals","state","resourceCount","resourceCollection","fetchData","useListViewResource","resourceCollectionWithKey","o","tablePagination","tableFilters","tableSorter","_tablePagination$curr","_tablePagination$page","pageIndex","pageSize","sortBy","ensureIsArray","filter","columnKey","order","desc","emptyStateButtonAction","open","Table","TableSize","MIDDLE","defaultPageSize","image","ChartImage","description","buttonText","buttonAction","StyledTabs","Tabs","TabStyles","TRANSLATIONS","USAGE_TEXT","COLUMNS_TEXT","METRICS_TEXT","usageCount","useGetDatasetRelatedCounts","setUsageCount","getDatasetRelatedObjects","then","charts","catch","usageTab","Badge","moreIcon","fullWidth","TabPane","tab","UsageTab","alphabeticalSort","a","b","_a$key","localeCompare","StyledContainer","SELECT_MESSAGE","CREATE_MESSAGE","VIEW_DATASET_MESSAGE","SELECT_TABLE_TITLE","NO_COLUMNS_TITLE","NO_COLUMNS_DESCRIPTION","ERROR_TITLE","ERROR_DESCRIPTION","hasError","tableName","hasColumns","currentImage","currentDescription","role","EPosition","StyledHeader","medium","StyledTitle","LoaderContainer","StyledLoader","l","TableContainerWithBanner","TableContainerWithoutBanner","TableScrollContainer","StyledAlert","Alert","secondary","dark3","REFRESHING","COLUMN_TITLE","ALT_LOADING","pageSizeOptions","tableColumnDefinition","dataIndex","EXISTING_DATASET_DESCRIPTION","VIEW_DATASET","columnList","tableWithDataset","find","component","loader","alt","src","LOADING_GIF","SMALL","MessageContent","includes","closable","showIcon","message","explore_url","RELATIVE","ABSOLUTE","renderExistingDatasetAlert","dbId","setHasColumns","setColumnList","setLoading","setHasError","tableNameRef","path","isIDatabaseTable","invalid","some","column","index","valid","isITableColumn","BASE_ERROR","console","table","getTableMetadata","DatasetPanel","LeftPanelStyle","borderRadius","light4","LeftPanel","setDatabase","selectDatabase","currentUserSelectedDb","customTableOptionLabelRenderer","TableOption","extra","warning_markdown","TableSelector","database","handleError","emptyState","emptyStateComponent","onDbChange","onSchemaChange","selectSchema","onTableSelectChange","selectTable","sqlLabMode","INPUT_FIELDS","LOG_ACTIONS","LOG_ACTIONS_DATASET_CREATION_EMPTY_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_DATABASE_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_SCHEMA_CANCELLATION","LOG_ACTIONS_DATASET_CREATION_TABLE_CANCELLATION","withToasts","datasetObject","history","useHistory","createResource","useSingleViewResource","tooltipText","CREATE_DATASET_TEXT","disabledCheck","cancelButtonOnClick","logAction","createLogAction","totalCount","keys","reduce","total","logEvent","goBack","_datasetObject$db","LOG_ACTIONS_DATASET_CREATION_SUCCESS","DatasetLayout","header","leftPanel","datasetPanel","rightPanel","footer","ResizableSidebar","adjustedWidth","datasetReducer","action","trimmedState","prevUrl","AddDataset","useReducer","editPageIsVisible","setEditPageIsVisible","useParams","parseInt","EditPage","_dataset$db","Footer","DatasetPanelComponent"],"sourceRoot":""}