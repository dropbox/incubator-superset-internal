{"version":3,"file":"4113.a57f2982ca08c88b13db.entry.js","mappings":"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","sources":["webpack://superset/./src/SqlLab/actions/sqlLab.js","webpack://superset/./src/components/ModalTrigger/index.jsx","webpack://superset/./src/explore/exploreUtils/index.js","webpack://superset/./src/utils/dates.js","webpack://superset/./src/utils/hostNamesConfig.js","webpack://superset/./packages/superset-ui-chart-controls/src/components/InfoTooltipWithTrigger.tsx","webpack://superset/./packages/superset-ui-chart-controls/src/components/Tooltip.tsx","webpack://superset/./packages/superset-ui-core/src/chart/registries/ChartBuildQueryRegistrySingleton.ts","webpack://superset/./packages/superset-ui-core/src/chart/registries/ChartMetadataRegistrySingleton.ts","webpack://superset/./packages/superset-ui-core/src/components/SafeMarkdown.tsx","webpack://superset/./packages/superset-ui-core/src/query/DatasourceKey.ts","webpack://superset/./packages/superset-ui-core/src/query/buildQueryContext.ts","webpack://superset/./packages/superset-ui-core/src/query/processFilters.ts","webpack://superset/./packages/superset-ui-core/src/query/buildQueryObject.ts","webpack://superset/./packages/superset-ui-core/src/query/extractQueryFields.ts","webpack://superset/./packages/superset-ui-core/src/query/extractExtras.ts","webpack://superset/./packages/superset-ui-core/src/query/processExtraFormData.ts","webpack://superset/./packages/superset-ui-core/src/query/constants.ts","webpack://superset/./packages/superset-ui-core/src/query/convertFilter.ts","webpack://superset/./packages/superset-ui-core/src/query/getColumnLabel.ts","webpack://superset/./packages/superset-ui-core/src/query/getMetricLabel.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Column.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Datasource.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Filter.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Metric.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Operator.ts","webpack://superset/./packages/superset-ui-core/src/query/types/QueryFormData.ts","webpack://superset/./packages/superset-ui-core/src/utils/featureFlags.ts","webpack://superset/./packages/superset-ui-core/src/utils/removeDuplicates.ts","webpack://superset/./src/SqlLab/types.ts","webpack://superset/./src/SqlLab/components/SaveDatasetModal/index.tsx","webpack://superset/./src/SqlLab/constants.ts","webpack://superset/./src/SqlLab/utils/sqlKeywords.ts","webpack://superset/./src/components/Alert/index.tsx","webpack://superset/./src/components/AsyncAceEditor/index.tsx","webpack://superset/./src/components/AsyncEsmComponent/index.tsx","webpack://superset/./src/components/Collapse/index.tsx","webpack://superset/./src/components/EmptyState/index.tsx","webpack://superset/./src/components/ErrorMessage/ErrorMessageWithStackTrace.tsx","webpack://superset/./src/components/Form/FormItem.tsx","webpack://superset/./src/components/Form/FormLabel.tsx","webpack://superset/./src/assets/images/icons/error.svg?d566","webpack://superset/./src/components/Form/LabeledErrorBoundInput.tsx","webpack://superset/./src/components/Form/Form.tsx","webpack://superset/./src/components/InfoTooltip/index.tsx","webpack://superset/./src/components/Input/index.tsx","webpack://superset/./src/components/Menu/index.tsx","webpack://superset/./src/components/Radio/index.tsx","webpack://superset/./src/components/WarningIconWithTooltip/index.tsx","webpack://superset/./src/dashboard/util/constants.ts","webpack://superset/./src/explore/constants.ts","webpack://superset/./src/featureFlags.ts","webpack://superset/./src/utils/safeStringify.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport shortid from 'shortid';\nimport JSONbig from 'json-bigint';\nimport { t, SupersetClient } from '@superset-ui/core';\nimport invert from 'lodash/invert';\nimport mapKeys from 'lodash/mapKeys';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\n\nimport { now } from 'src/utils/dates';\nimport {\n  addDangerToast as addDangerToastAction,\n  addInfoToast as addInfoToastAction,\n  addSuccessToast as addSuccessToastAction,\n  addWarningToast as addWarningToastAction,\n} from 'src/components/MessageToasts/actions';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport COMMON_ERR_MESSAGES from 'src/utils/errorMessages';\n\nexport const RESET_STATE = 'RESET_STATE';\nexport const ADD_QUERY_EDITOR = 'ADD_QUERY_EDITOR';\nexport const UPDATE_QUERY_EDITOR = 'UPDATE_QUERY_EDITOR';\nexport const QUERY_EDITOR_SAVED = 'QUERY_EDITOR_SAVED';\nexport const CLONE_QUERY_TO_NEW_TAB = 'CLONE_QUERY_TO_NEW_TAB';\nexport const REMOVE_QUERY_EDITOR = 'REMOVE_QUERY_EDITOR';\nexport const MERGE_TABLE = 'MERGE_TABLE';\nexport const REMOVE_TABLE = 'REMOVE_TABLE';\nexport const END_QUERY = 'END_QUERY';\nexport const REMOVE_QUERY = 'REMOVE_QUERY';\nexport const EXPAND_TABLE = 'EXPAND_TABLE';\nexport const COLLAPSE_TABLE = 'COLLAPSE_TABLE';\nexport const QUERY_EDITOR_SETDB = 'QUERY_EDITOR_SETDB';\nexport const QUERY_EDITOR_SET_SCHEMA = 'QUERY_EDITOR_SET_SCHEMA';\nexport const QUERY_EDITOR_SET_SCHEMA_OPTIONS =\n  'QUERY_EDITOR_SET_SCHEMA_OPTIONS';\nexport const QUERY_EDITOR_SET_TABLE_OPTIONS = 'QUERY_EDITOR_SET_TABLE_OPTIONS';\nexport const QUERY_EDITOR_SET_TITLE = 'QUERY_EDITOR_SET_TITLE';\nexport const QUERY_EDITOR_SET_AUTORUN = 'QUERY_EDITOR_SET_AUTORUN';\nexport const QUERY_EDITOR_SET_SQL = 'QUERY_EDITOR_SET_SQL';\nexport const QUERY_EDITOR_SET_QUERY_LIMIT = 'QUERY_EDITOR_SET_QUERY_LIMIT';\nexport const QUERY_EDITOR_SET_TEMPLATE_PARAMS =\n  'QUERY_EDITOR_SET_TEMPLATE_PARAMS';\nexport const QUERY_EDITOR_SET_SELECTED_TEXT = 'QUERY_EDITOR_SET_SELECTED_TEXT';\nexport const QUERY_EDITOR_SET_FUNCTION_NAMES =\n  'QUERY_EDITOR_SET_FUNCTION_NAMES';\nexport const QUERY_EDITOR_PERSIST_HEIGHT = 'QUERY_EDITOR_PERSIST_HEIGHT';\nexport const QUERY_EDITOR_TOGGLE_LEFT_BAR = 'QUERY_EDITOR_TOGGLE_LEFT_BAR';\nexport const MIGRATE_QUERY_EDITOR = 'MIGRATE_QUERY_EDITOR';\nexport const MIGRATE_TAB_HISTORY = 'MIGRATE_TAB_HISTORY';\nexport const MIGRATE_TABLE = 'MIGRATE_TABLE';\nexport const MIGRATE_QUERY = 'MIGRATE_QUERY';\n\nexport const SET_DATABASES = 'SET_DATABASES';\nexport const SET_ACTIVE_QUERY_EDITOR = 'SET_ACTIVE_QUERY_EDITOR';\nexport const LOAD_QUERY_EDITOR = 'LOAD_QUERY_EDITOR';\nexport const SET_TABLES = 'SET_TABLES';\nexport const SET_ACTIVE_SOUTHPANE_TAB = 'SET_ACTIVE_SOUTHPANE_TAB';\nexport const REFRESH_QUERIES = 'REFRESH_QUERIES';\nexport const SET_USER_OFFLINE = 'SET_USER_OFFLINE';\nexport const RUN_QUERY = 'RUN_QUERY';\nexport const START_QUERY = 'START_QUERY';\nexport const STOP_QUERY = 'STOP_QUERY';\nexport const REQUEST_QUERY_RESULTS = 'REQUEST_QUERY_RESULTS';\nexport const QUERY_SUCCESS = 'QUERY_SUCCESS';\nexport const QUERY_FAILED = 'QUERY_FAILED';\nexport const CLEAR_QUERY_RESULTS = 'CLEAR_QUERY_RESULTS';\nexport const REMOVE_DATA_PREVIEW = 'REMOVE_DATA_PREVIEW';\nexport const CHANGE_DATA_PREVIEW_ID = 'CHANGE_DATA_PREVIEW_ID';\n\nexport const START_QUERY_VALIDATION = 'START_QUERY_VALIDATION';\nexport const QUERY_VALIDATION_RETURNED = 'QUERY_VALIDATION_RETURNED';\nexport const QUERY_VALIDATION_FAILED = 'QUERY_VALIDATION_FAILED';\nexport const COST_ESTIMATE_STARTED = 'COST_ESTIMATE_STARTED';\nexport const COST_ESTIMATE_RETURNED = 'COST_ESTIMATE_RETURNED';\nexport const COST_ESTIMATE_FAILED = 'COST_ESTIMATE_FAILED';\n\nexport const CREATE_DATASOURCE_STARTED = 'CREATE_DATASOURCE_STARTED';\nexport const CREATE_DATASOURCE_SUCCESS = 'CREATE_DATASOURCE_SUCCESS';\nexport const CREATE_DATASOURCE_FAILED = 'CREATE_DATASOURCE_FAILED';\n\nexport const addInfoToast = addInfoToastAction;\nexport const addSuccessToast = addSuccessToastAction;\nexport const addDangerToast = addDangerToastAction;\nexport const addWarningToast = addWarningToastAction;\n\nexport const CtasEnum = {\n  TABLE: 'TABLE',\n  VIEW: 'VIEW',\n};\nconst ERR_MSG_CANT_LOAD_QUERY = t(\"The query couldn't be loaded\");\n\n// a map of SavedQuery field names to the different names used client-side,\n// because for now making the names consistent is too complicated\n// so it might as well only happen in one place\nconst queryClientMapping = {\n  id: 'remoteId',\n  db_id: 'dbId',\n  client_id: 'id',\n  label: 'title',\n};\nconst queryServerMapping = invert(queryClientMapping);\n\n// uses a mapping like those above to convert object key names to another style\nconst fieldConverter = mapping => obj =>\n  mapKeys(obj, (value, key) => (key in mapping ? mapping[key] : key));\n\nconst convertQueryToServer = fieldConverter(queryServerMapping);\nconst convertQueryToClient = fieldConverter(queryClientMapping);\n\nexport function resetState() {\n  return { type: RESET_STATE };\n}\n\nexport function startQueryValidation(query) {\n  Object.assign(query, {\n    id: query.id ? query.id : shortid.generate(),\n  });\n  return { type: START_QUERY_VALIDATION, query };\n}\n\nexport function queryValidationReturned(query, results) {\n  return { type: QUERY_VALIDATION_RETURNED, query, results };\n}\n\nexport function queryValidationFailed(query, message, error) {\n  return { type: QUERY_VALIDATION_FAILED, query, message, error };\n}\n\nexport function updateQueryEditor(alterations) {\n  return { type: UPDATE_QUERY_EDITOR, alterations };\n}\n\nexport function scheduleQuery(query) {\n  return dispatch =>\n    SupersetClient.post({\n      endpoint: '/savedqueryviewapi/api/create',\n      postPayload: query,\n      stringify: false,\n    })\n      .then(() =>\n        dispatch(\n          addSuccessToast(\n            t(\n              'Your query has been scheduled. To see details of your query, navigate to Saved queries',\n            ),\n          ),\n        ),\n      )\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be scheduled'))),\n      );\n}\n\nexport function estimateQueryCost(query) {\n  const { dbId, schema, sql, templateParams } = query;\n  const endpoint =\n    schema === null\n      ? `/superset/estimate_query_cost/${dbId}/`\n      : `/superset/estimate_query_cost/${dbId}/${schema}/`;\n  return dispatch =>\n    Promise.all([\n      dispatch({ type: COST_ESTIMATE_STARTED, query }),\n      SupersetClient.post({\n        endpoint,\n        postPayload: {\n          sql,\n          templateParams: JSON.parse(templateParams || '{}'),\n        },\n      })\n        .then(({ json }) =>\n          dispatch({ type: COST_ESTIMATE_RETURNED, query, json }),\n        )\n        .catch(response =>\n          getClientErrorObject(response).then(error => {\n            const message =\n              error.error ||\n              error.statusText ||\n              t('Failed at retrieving results');\n            return dispatch({\n              type: COST_ESTIMATE_FAILED,\n              query,\n              error: message,\n            });\n          }),\n        ),\n    ]);\n}\n\nexport function startQuery(query) {\n  Object.assign(query, {\n    id: query.id ? query.id : shortid.generate(),\n    progress: 0,\n    startDttm: now(),\n    state: query.runAsync ? 'pending' : 'running',\n    cached: false,\n  });\n  return { type: START_QUERY, query };\n}\n\nexport function querySuccess(query, results) {\n  return function (dispatch) {\n    const sync =\n      !query.isDataPreview &&\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${results.query.sqlEditorId}`),\n            postPayload: { latest_query_id: query.id },\n          })\n        : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_SUCCESS, query, results }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while storing the latest query id in the backend. ' +\n                'Please contact your administrator if this problem persists.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryFailed(query, msg, link, errors) {\n  return function (dispatch) {\n    const sync =\n      !query.isDataPreview &&\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${query.sqlEditorId}`),\n            postPayload: { latest_query_id: query.id },\n          })\n        : Promise.resolve();\n\n    return (\n      sync\n        .catch(() =>\n          dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while storing the latest query id in the backend. ' +\n                  'Please contact your administrator if this problem persists.',\n              ),\n            ),\n          ),\n        )\n        // We should always show the error message, even if we couldn't sync the\n        // state to the backend\n        .then(() => dispatch({ type: QUERY_FAILED, query, msg, link, errors }))\n    );\n  };\n}\n\nexport function stopQuery(query) {\n  return { type: STOP_QUERY, query };\n}\n\nexport function clearQueryResults(query) {\n  return { type: CLEAR_QUERY_RESULTS, query };\n}\n\nexport function removeDataPreview(table) {\n  return { type: REMOVE_DATA_PREVIEW, table };\n}\n\nexport function requestQueryResults(query) {\n  return { type: REQUEST_QUERY_RESULTS, query };\n}\n\nexport function fetchQueryResults(query, displayLimit) {\n  return function (dispatch) {\n    dispatch(requestQueryResults(query));\n\n    return SupersetClient.get({\n      endpoint: `/superset/results/${query.resultsKey}/?rows=${displayLimit}`,\n      parseMethod: 'text',\n    })\n      .then(({ text = '{}' }) => {\n        const bigIntJson = JSONbig.parse(text);\n        return dispatch(querySuccess(query, bigIntJson));\n      })\n      .catch(response =>\n        getClientErrorObject(response).then(error => {\n          const message =\n            error.error ||\n            error.statusText ||\n            t('Failed at retrieving results');\n\n          return dispatch(\n            queryFailed(query, message, error.link, error.errors),\n          );\n        }),\n      );\n  };\n}\n\nexport function runQuery(query) {\n  return function (dispatch) {\n    dispatch(startQuery(query));\n    const postPayload = {\n      client_id: query.id,\n      database_id: query.dbId,\n      json: true,\n      runAsync: query.runAsync,\n      schema: query.schema,\n      sql: query.sql,\n      sql_editor_id: query.sqlEditorId,\n      tab: query.tab,\n      tmp_table_name: query.tempTable,\n      select_as_cta: query.ctas,\n      ctas_method: query.ctas_method,\n      templateParams: query.templateParams,\n      queryLimit: query.queryLimit,\n      expand_data: true,\n    };\n\n    const search = window.location.search || '';\n    return SupersetClient.post({\n      endpoint: `/superset/sql_json/${search}`,\n      body: JSON.stringify(postPayload),\n      headers: { 'Content-Type': 'application/json' },\n      parseMethod: 'text',\n    })\n      .then(({ text = '{}' }) => {\n        if (!query.runAsync) {\n          const bigIntJson = JSONbig.parse(text);\n          dispatch(querySuccess(query, bigIntJson));\n        }\n      })\n      .catch(response =>\n        getClientErrorObject(response).then(error => {\n          let message = error.error || error.statusText || t('Unknown error');\n          if (message.includes('CSRF token')) {\n            message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n          }\n          dispatch(queryFailed(query, message, error.link, error.errors));\n        }),\n      );\n  };\n}\n\nexport function reRunQuery(query) {\n  // run Query with a new id\n  return function (dispatch) {\n    dispatch(runQuery({ ...query, id: shortid.generate() }));\n  };\n}\n\nexport function validateQuery(query) {\n  return function (dispatch) {\n    dispatch(startQueryValidation(query));\n\n    const postPayload = {\n      schema: query.schema,\n      sql: query.sql,\n      template_params: query.templateParams,\n    };\n\n    return SupersetClient.post({\n      endpoint: `/api/v1/database/${query.dbId}/validate_sql`,\n      body: JSON.stringify(postPayload),\n      headers: { 'Content-Type': 'application/json' },\n    })\n      .then(({ json }) => dispatch(queryValidationReturned(query, json.result)))\n      .catch(response =>\n        getClientErrorObject(response.result).then(error => {\n          let message = error.error || error.statusText || t('Unknown error');\n          if (message.includes('CSRF token')) {\n            message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n          }\n          dispatch(queryValidationFailed(query, message, error));\n        }),\n      );\n  };\n}\n\nexport function postStopQuery(query) {\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/superset/stop_query/',\n      postPayload: { client_id: query.id },\n      stringify: false,\n    })\n      .then(() => dispatch(stopQuery(query)))\n      .then(() => dispatch(addSuccessToast(t('Query was stopped.'))))\n      .catch(() =>\n        dispatch(addDangerToast(t('Failed at stopping query. %s', query.id))),\n      );\n  };\n}\n\nexport function setDatabases(databases) {\n  return { type: SET_DATABASES, databases };\n}\n\nfunction migrateTable(table, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI('/tableschemaview/'),\n    postPayload: { table: { ...table, queryEditorId } },\n  })\n    .then(({ json }) => {\n      const newTable = {\n        ...table,\n        id: json.id,\n        queryEditorId,\n      };\n      return dispatch({ type: MIGRATE_TABLE, oldTable: table, newTable });\n    })\n    .catch(() =>\n      dispatch(\n        addWarningToast(\n          t(\n            'Unable to migrate table schema state to backend. Superset will retry ' +\n              'later. Please contact your administrator if this problem persists.',\n          ),\n        ),\n      ),\n    );\n}\n\nfunction migrateQuery(queryId, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI(`/tabstateview/${queryEditorId}/migrate_query`),\n    postPayload: { queryId },\n  })\n    .then(() => dispatch({ type: MIGRATE_QUERY, queryId, queryEditorId }))\n    .catch(() =>\n      dispatch(\n        addWarningToast(\n          t(\n            'Unable to migrate query state to backend. Superset will retry later. ' +\n              'Please contact your administrator if this problem persists.',\n          ),\n        ),\n      ),\n    );\n}\n\nexport function migrateQueryEditorFromLocalStorage(\n  queryEditor,\n  tables,\n  queries,\n) {\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/tabstateview/',\n      postPayload: { queryEditor },\n    })\n      .then(({ json }) => {\n        const newQueryEditor = {\n          ...queryEditor,\n          id: json.id.toString(),\n        };\n        dispatch({\n          type: MIGRATE_QUERY_EDITOR,\n          oldQueryEditor: queryEditor,\n          newQueryEditor,\n        });\n        dispatch({\n          type: MIGRATE_TAB_HISTORY,\n          oldId: queryEditor.id,\n          newId: newQueryEditor.id,\n        });\n        return Promise.all([\n          ...tables.map(table =>\n            migrateTable(table, newQueryEditor.id, dispatch),\n          ),\n          ...queries.map(query =>\n            migrateQuery(query.id, newQueryEditor.id, dispatch),\n          ),\n        ]);\n      })\n      .catch(() =>\n        dispatch(\n          addWarningToast(\n            t(\n              'Unable to migrate query editor state to backend. Superset will retry ' +\n                'later. Please contact your administrator if this problem persists.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function addQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: '/tabstateview/',\n          postPayload: { queryEditor },\n        })\n      : Promise.resolve({ json: { id: shortid.generate() } });\n\n    return sync\n      .then(({ json }) => {\n        const newQueryEditor = {\n          ...queryEditor,\n          id: json.id.toString(),\n        };\n        return dispatch({\n          type: ADD_QUERY_EDITOR,\n          queryEditor: newQueryEditor,\n        });\n      })\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'Unable to add a new tab to the backend. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function cloneQueryToNewTab(query, autorun) {\n  return function (dispatch, getState) {\n    const state = getState();\n    const { queryEditors, tabHistory } = state.sqlLab;\n    const sourceQueryEditor = queryEditors.find(\n      qe => qe.id === tabHistory[tabHistory.length - 1],\n    );\n    const queryEditor = {\n      title: t('Copy of %s', sourceQueryEditor.title),\n      dbId: query.dbId ? query.dbId : null,\n      schema: query.schema ? query.schema : null,\n      autorun,\n      sql: query.sql,\n      queryLimit: sourceQueryEditor.queryLimit,\n      maxRow: sourceQueryEditor.maxRow,\n      templateParams: sourceQueryEditor.templateParams,\n    };\n    return dispatch(addQueryEditor(queryEditor));\n  };\n}\n\nexport function setActiveQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}/activate`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: SET_ACTIVE_QUERY_EDITOR, queryEditor }))\n      .catch(response => {\n        if (response.status !== 404) {\n          return dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while setting the active tab. Please contact ' +\n                  'your administrator.',\n              ),\n            ),\n          );\n        }\n        return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n      });\n  };\n}\n\nexport function loadQueryEditor(queryEditor) {\n  return { type: LOAD_QUERY_EDITOR, queryEditor };\n}\n\nexport function setTables(tableSchemas) {\n  const tables = tableSchemas\n    .filter(tableSchema => tableSchema.description !== null)\n    .map(tableSchema => {\n      const {\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        dataPreviewQueryId,\n      } = tableSchema.description;\n      return {\n        dbId: tableSchema.database_id,\n        queryEditorId: tableSchema.tab_state_id.toString(),\n        schema: tableSchema.schema,\n        name: tableSchema.table,\n        expanded: tableSchema.expanded,\n        id: tableSchema.id,\n        dataPreviewQueryId,\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        isMetadataLoading: false,\n        isExtraMetadataLoading: false,\n      };\n    });\n  return { type: SET_TABLES, tables };\n}\n\nexport function switchQueryEditor(queryEditor, displayLimit) {\n  return function (dispatch) {\n    if (\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) &&\n      !queryEditor.loaded\n    ) {\n      SupersetClient.get({\n        endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n      })\n        .then(({ json }) => {\n          const loadedQueryEditor = {\n            id: json.id.toString(),\n            loaded: true,\n            title: json.label,\n            sql: json.sql,\n            selectedText: null,\n            latestQueryId: json.latest_query?.id,\n            autorun: json.autorun,\n            dbId: json.database_id,\n            templateParams: json.template_params,\n            schema: json.schema,\n            queryLimit: json.query_limit,\n            remoteId: json.saved_query?.id,\n            validationResult: {\n              id: null,\n              errors: [],\n              completed: false,\n            },\n            hideLeftBar: json.hide_left_bar,\n          };\n          dispatch(loadQueryEditor(loadedQueryEditor));\n          dispatch(setTables(json.table_schemas || []));\n          dispatch(setActiveQueryEditor(loadedQueryEditor));\n          if (json.latest_query && json.latest_query.resultsKey) {\n            dispatch(fetchQueryResults(json.latest_query, displayLimit));\n          }\n        })\n        .catch(response => {\n          if (response.status !== 404) {\n            return dispatch(\n              addDangerToast(t('An error occurred while fetching tab state')),\n            );\n          }\n          return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n        });\n    } else {\n      dispatch(setActiveQueryEditor(queryEditor));\n    }\n  };\n}\n\nexport function setActiveSouthPaneTab(tabId) {\n  return { type: SET_ACTIVE_SOUTHPANE_TAB, tabId };\n}\n\nexport function toggleLeftBar(queryEditor) {\n  const hideLeftBar = !queryEditor.hideLeftBar;\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { hide_left_bar: hideLeftBar },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_TOGGLE_LEFT_BAR,\n          queryEditor,\n          hideLeftBar,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while hiding the left bar. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing tab. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeQuery(query) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(\n            `/tabstateview/${query.sqlEditorId}/query/${query.id}`,\n          ),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_QUERY, query }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing query. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetDb(queryEditor, dbId) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { database_id: dbId },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_EDITOR_SETDB, queryEditor, dbId }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab database ID. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSchema(queryEditor, schema) {\n  return function (dispatch) {\n    const sync =\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) &&\n      typeof queryEditor === 'object'\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n            postPayload: { schema },\n          })\n        : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_SET_SCHEMA,\n          queryEditor: queryEditor || {},\n          schema,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab schema. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSchemaOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_SCHEMA_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetTableOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_TABLE_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetAutorun(queryEditor, autorun) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { autorun },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({ type: QUERY_EDITOR_SET_AUTORUN, queryEditor, autorun }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab autorun. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetTitle(queryEditor, title) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { label: title },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({ type: QUERY_EDITOR_SET_TITLE, queryEditor, title }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab title. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function saveQuery(query) {\n  return dispatch =>\n    SupersetClient.post({\n      endpoint: '/savedqueryviewapi/api/create',\n      postPayload: convertQueryToServer(query),\n      stringify: false,\n    })\n      .then(result => {\n        const savedQuery = convertQueryToClient(result.json.item);\n        dispatch({\n          type: QUERY_EDITOR_SAVED,\n          query,\n          result: savedQuery,\n        });\n        dispatch(queryEditorSetTitle(query, query.title));\n        return savedQuery;\n      })\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be saved'))),\n      );\n}\n\nexport const addSavedQueryToTabState =\n  (queryEditor, savedQuery) => dispatch => {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: `/tabstateview/${queryEditor.id}`,\n          postPayload: { saved_query_id: savedQuery.remoteId },\n        })\n      : Promise.resolve();\n\n    return sync\n      .catch(() => {\n        dispatch(addDangerToast(t('Your query was not properly saved')));\n      })\n      .then(() => {\n        dispatch(addSuccessToast(t('Your query was saved')));\n      });\n  };\n\nexport function updateSavedQuery(query) {\n  return dispatch =>\n    SupersetClient.put({\n      endpoint: `/savedqueryviewapi/api/update/${query.remoteId}`,\n      postPayload: convertQueryToServer(query),\n      stringify: false,\n    })\n      .then(() => {\n        dispatch(addSuccessToast(t('Your query was updated')));\n        dispatch(queryEditorSetTitle(query, query.title));\n      })\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be updated'))),\n      )\n      .then(() => dispatch(updateQueryEditor(query)));\n}\n\nexport function queryEditorSetSql(queryEditor, sql) {\n  return { type: QUERY_EDITOR_SET_SQL, queryEditor, sql };\n}\n\nexport function queryEditorSetAndSaveSql(queryEditor, sql) {\n  return function (dispatch) {\n    // saved query and set tab state use this action\n    dispatch(queryEditorSetSql(queryEditor, sql));\n    if (isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)) {\n      return SupersetClient.put({\n        endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n        postPayload: { sql, latest_query_id: queryEditor.latestQueryId },\n      }).catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while storing your query in the backend. To ' +\n                'avoid losing your changes, please save your query using the ' +\n                '\"Save Query\" button.',\n            ),\n          ),\n        ),\n      );\n    }\n    return Promise.resolve();\n  };\n}\n\nexport function queryEditorSetQueryLimit(queryEditor, queryLimit) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { query_limit: queryLimit },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_SET_QUERY_LIMIT,\n          queryEditor,\n          queryLimit,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab title. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetTemplateParams(queryEditor, templateParams) {\n  return function (dispatch) {\n    dispatch({\n      type: QUERY_EDITOR_SET_TEMPLATE_PARAMS,\n      queryEditor,\n      templateParams,\n    });\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { template_params: templateParams },\n        })\n      : Promise.resolve();\n\n    return sync.catch(() =>\n      dispatch(\n        addDangerToast(\n          t(\n            'An error occurred while setting the tab template parameters. ' +\n              'Please contact your administrator.',\n          ),\n        ),\n      ),\n    );\n  };\n}\n\nexport function queryEditorSetSelectedText(queryEditor, sql) {\n  return { type: QUERY_EDITOR_SET_SELECTED_TEXT, queryEditor, sql };\n}\n\nexport function mergeTable(table, query, prepend) {\n  return { type: MERGE_TABLE, table, query, prepend };\n}\n\nfunction getTableMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n      `/api/v1/database/${query.dbId}/table/${encodeURIComponent(\n        table.name,\n      )}/${encodeURIComponent(table.schema)}/`,\n    ),\n  })\n    .then(({ json }) => {\n      const newTable = {\n        ...table,\n        ...json,\n        expanded: true,\n        isMetadataLoading: false,\n      };\n      dispatch(mergeTable(newTable)); // Merge table to tables in state\n      return newTable;\n    })\n    .catch(() =>\n      Promise.all([\n        dispatch(\n          mergeTable({\n            ...table,\n            isMetadataLoading: false,\n          }),\n        ),\n        dispatch(\n          addDangerToast(t('An error occurred while fetching table metadata')),\n        ),\n      ]),\n    );\n}\n\nfunction getTableExtendedMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n      `/api/v1/database/${query.dbId}/table_extra/` +\n        `${encodeURIComponent(table.name)}/${encodeURIComponent(\n          table.schema,\n        )}/`,\n    ),\n  })\n    .then(({ json }) => {\n      dispatch(\n        mergeTable({ ...table, ...json, isExtraMetadataLoading: false }),\n      );\n      return json;\n    })\n    .catch(() =>\n      Promise.all([\n        dispatch(mergeTable({ ...table, isExtraMetadataLoading: false })),\n        dispatch(\n          addDangerToast(t('An error occurred while fetching table metadata')),\n        ),\n      ]),\n    );\n}\n\nexport function addTable(query, database, tableName, schemaName) {\n  return function (dispatch) {\n    const table = {\n      dbId: query.dbId,\n      queryEditorId: query.id,\n      schema: schemaName,\n      name: tableName,\n    };\n    dispatch(\n      mergeTable(\n        {\n          ...table,\n          isMetadataLoading: true,\n          isExtraMetadataLoading: true,\n          expanded: true,\n        },\n        null,\n        true,\n      ),\n    );\n\n    return Promise.all([\n      getTableMetadata(table, query, dispatch),\n      getTableExtendedMetadata(table, query, dispatch),\n    ]).then(([newTable, json]) => {\n      const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.post({\n            endpoint: encodeURI('/tableschemaview/'),\n            postPayload: { table: { ...newTable, ...json } },\n          })\n        : Promise.resolve({ json: { id: shortid.generate() } });\n\n      if (!database.disable_data_preview && database.id === query.dbId) {\n        const dataPreviewQuery = {\n          id: shortid.generate(),\n          dbId: query.dbId,\n          sql: newTable.selectStar,\n          tableName: table.name,\n          sqlEditorId: null,\n          tab: '',\n          runAsync: database.allow_run_async,\n          ctas: false,\n          isDataPreview: true,\n        };\n        Promise.all([\n          dispatch(\n            mergeTable(\n              {\n                ...newTable,\n                dataPreviewQueryId: dataPreviewQuery.id,\n              },\n              dataPreviewQuery,\n            ),\n          ),\n          dispatch(runQuery(dataPreviewQuery)),\n        ]);\n      }\n\n      return sync\n        .then(({ json: resultJson }) =>\n          dispatch(mergeTable({ ...table, id: resultJson.id })),\n        )\n        .catch(() =>\n          dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while fetching table metadata. ' +\n                  'Please contact your administrator.',\n              ),\n            ),\n          ),\n        );\n    });\n  };\n}\n\nexport function changeDataPreviewId(oldQueryId, newQuery) {\n  return { type: CHANGE_DATA_PREVIEW_ID, oldQueryId, newQuery };\n}\n\nexport function reFetchQueryResults(query) {\n  return function (dispatch) {\n    const newQuery = {\n      id: shortid.generate(),\n      dbId: query.dbId,\n      sql: query.sql,\n      tableName: query.tableName,\n      sqlEditorId: null,\n      tab: '',\n      runAsync: false,\n      ctas: false,\n      queryLimit: query.queryLimit,\n      isDataPreview: query.isDataPreview,\n    };\n    dispatch(runQuery(newQuery));\n    dispatch(changeDataPreviewId(query.id, newQuery));\n  };\n}\n\nexport function expandTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tableschemaview/${table.id}/expanded`),\n          postPayload: { expanded: true },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: EXPAND_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while expanding the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function collapseTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tableschemaview/${table.id}/expanded`),\n          postPayload: { expanded: false },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: COLLAPSE_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while collapsing the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(`/tableschemaview/${table.id}`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function refreshQueries(alteredQueries) {\n  return { type: REFRESH_QUERIES, alteredQueries };\n}\n\nexport function setUserOffline(offline) {\n  return { type: SET_USER_OFFLINE, offline };\n}\n\nexport function persistEditorHeight(queryEditor, northPercent, southPercent) {\n  return {\n    type: QUERY_EDITOR_PERSIST_HEIGHT,\n    queryEditor,\n    northPercent,\n    southPercent,\n  };\n}\n\nexport function popStoredQuery(urlId) {\n  return function (dispatch) {\n    return SupersetClient.get({ endpoint: `/kv/${urlId}` })\n      .then(({ json }) =>\n        dispatch(\n          addQueryEditor({\n            title: json.title ? json.title : t('Shared query'),\n            dbId: json.dbId ? parseInt(json.dbId, 10) : null,\n            schema: json.schema ? json.schema : null,\n            autorun: json.autorun ? json.autorun : false,\n            sql: json.sql ? json.sql : 'SELECT ...',\n          }),\n        ),\n      )\n      .catch(() => dispatch(addDangerToast(ERR_MSG_CANT_LOAD_QUERY)));\n  };\n}\nexport function popSavedQuery(saveQueryId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: `/savedqueryviewapi/api/get/${saveQueryId}`,\n    })\n      .then(({ json }) => {\n        const queryEditorProps = {\n          ...convertQueryToClient(json.result),\n          loaded: true,\n          autorun: false,\n        };\n        return dispatch(addQueryEditor(queryEditorProps));\n      })\n      .catch(() => dispatch(addDangerToast(ERR_MSG_CANT_LOAD_QUERY)));\n  };\n}\nexport function popQuery(queryId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: `/api/v1/query/${queryId}`,\n    })\n      .then(({ json }) => {\n        const queryData = json.result;\n        const queryEditorProps = {\n          dbId: queryData.database.id,\n          schema: queryData.schema,\n          sql: queryData.sql,\n          title: `Copy of ${queryData.tab_name}`,\n          autorun: false,\n        };\n        return dispatch(addQueryEditor(queryEditorProps));\n      })\n      .catch(() => dispatch(addDangerToast(ERR_MSG_CANT_LOAD_QUERY)));\n  };\n}\nexport function popDatasourceQuery(datasourceKey, sql) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: `/superset/fetch_datasource_metadata?datasourceKey=${datasourceKey}`,\n    })\n      .then(({ json }) =>\n        dispatch(\n          addQueryEditor({\n            title: `Query ${json.name}`,\n            dbId: json.database.id,\n            schema: json.schema,\n            autorun: sql !== undefined,\n            sql: sql || json.select_star,\n          }),\n        ),\n      )\n      .catch(() =>\n        dispatch(addDangerToast(t(\"The datasource couldn't be loaded\"))),\n      );\n  };\n}\nexport function createDatasourceStarted() {\n  return { type: CREATE_DATASOURCE_STARTED };\n}\nexport function createDatasourceSuccess(data) {\n  const datasource = `${data.table_id}__table`;\n  return { type: CREATE_DATASOURCE_SUCCESS, datasource };\n}\nexport function createDatasourceFailed(err) {\n  return { type: CREATE_DATASOURCE_FAILED, err };\n}\n\nexport function createDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/superset/sqllab_viz/',\n      postPayload: { data: vizOptions },\n    })\n      .then(({ json }) => {\n        dispatch(createDatasourceSuccess(json));\n\n        return Promise.resolve(json);\n      })\n      .catch(() => {\n        dispatch(\n          createDatasourceFailed(\n            t('An error occurred while creating the data source'),\n          ),\n        );\n\n        return Promise.reject();\n      });\n  };\n}\n\nexport function createCtasDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/superset/get_or_create_table/',\n      postPayload: { data: vizOptions },\n    })\n      .then(({ json }) => {\n        dispatch(createDatasourceSuccess(json));\n\n        return json;\n      })\n      .catch(() => {\n        const errorMsg = t('An error occurred while creating the data source');\n        dispatch(createDatasourceFailed(errorMsg));\n        return Promise.reject(new Error(errorMsg));\n      });\n  };\n}\n\nexport function queryEditorSetFunctionNames(queryEditor, dbId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: encodeURI(`/api/v1/database/${dbId}/function_names/`),\n    })\n      .then(({ json }) =>\n        dispatch({\n          type: QUERY_EDITOR_SET_FUNCTION_NAMES,\n          queryEditor,\n          functionNames: json.function_names,\n        }),\n      )\n      .catch(err => {\n        if (err.status === 404) {\n          // for databases that have been deleted, just reset the function names\n          dispatch({\n            type: QUERY_EDITOR_SET_FUNCTION_NAMES,\n            queryEditor,\n            functionNames: [],\n          });\n        } else {\n          dispatch(\n            addDangerToast(\n              t('An error occurred while fetching function names.'),\n            ),\n          );\n        }\n      });\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'src/components/Modal';\nimport Button from 'src/components/Button';\n\nconst propTypes = {\n  dialogClassName: PropTypes.string,\n  triggerNode: PropTypes.node.isRequired,\n  modalTitle: PropTypes.node,\n  modalBody: PropTypes.node, // not required because it can be generated by beforeOpen\n  modalFooter: PropTypes.node,\n  beforeOpen: PropTypes.func,\n  onExit: PropTypes.func,\n  isButton: PropTypes.bool,\n  className: PropTypes.string,\n  tooltip: PropTypes.string,\n  width: PropTypes.string,\n  maxWidth: PropTypes.string,\n  responsive: PropTypes.bool,\n  resizable: PropTypes.bool,\n  resizableConfig: PropTypes.object,\n  draggable: PropTypes.bool,\n  draggableConfig: PropTypes.object,\n  destroyOnClose: PropTypes.bool,\n};\n\nconst defaultProps = {\n  beforeOpen: () => {},\n  onExit: () => {},\n  isButton: false,\n  className: '',\n  modalTitle: '',\n  resizable: false,\n  draggable: false,\n};\n\nexport default class ModalTrigger extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n    };\n    this.open = this.open.bind(this);\n    this.close = this.close.bind(this);\n  }\n\n  close() {\n    this.setState(() => ({ showModal: false }));\n  }\n\n  open(e) {\n    e.preventDefault();\n    this.props.beforeOpen();\n    this.setState(() => ({ showModal: true }));\n  }\n\n  renderModal() {\n    return (\n      <Modal\n        wrapClassName={this.props.dialogClassName}\n        className={this.props.className}\n        show={this.state.showModal}\n        onHide={this.close}\n        afterClose={this.props.onExit}\n        title={this.props.modalTitle}\n        footer={this.props.modalFooter}\n        hideFooter={!this.props.modalFooter}\n        width={this.props.width}\n        maxWidth={this.props.maxWidth}\n        responsive={this.props.responsive}\n        resizable={this.props.resizable}\n        resizableConfig={this.props.resizableConfig}\n        draggable={this.props.draggable}\n        draggableConfig={this.props.draggableConfig}\n        destroyOnClose={this.props.destroyOnClose}\n      >\n        {this.props.modalBody}\n      </Modal>\n    );\n  }\n\n  render() {\n    if (this.props.isButton) {\n      return (\n        <>\n          <Button\n            className=\"modal-trigger\"\n            data-test=\"btn-modal-trigger\"\n            tooltip={this.props.tooltip}\n            onClick={this.open}\n          >\n            {this.props.triggerNode}\n          </Button>\n          {this.renderModal()}\n        </>\n      );\n    }\n    /* eslint-disable jsx-a11y/interactive-supports-focus */\n    return (\n      <>\n        <span data-test=\"span-modal-trigger\" onClick={this.open} role=\"button\">\n          {this.props.triggerNode}\n        </span>\n        {this.renderModal()}\n      </>\n    );\n  }\n}\n\nModalTrigger.propTypes = propTypes;\nModalTrigger.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useCallback, useEffect } from 'react';\n/* eslint camelcase: 0 */\nimport URI from 'urijs';\nimport {\n  buildQueryContext,\n  ensureIsArray,\n  getChartBuildQueryRegistry,\n  getChartMetadataRegistry,\n  SupersetClient,\n} from '@superset-ui/core';\nimport { availableDomains } from 'src/utils/hostNamesConfig';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport { URL_PARAMS } from 'src/constants';\nimport {\n  MULTI_OPERATORS,\n  OPERATOR_ENUM_TO_OPERATOR_TYPE,\n} from 'src/explore/constants';\nimport { DashboardStandaloneMode } from 'src/dashboard/util/constants';\nimport { optionLabel } from '../../utils/common';\n\nexport function getChartKey(explore) {\n  const { slice } = explore;\n  return slice ? slice.slice_id : 0;\n}\n\nlet requestCounter = 0;\nexport function getHostName(allowDomainSharding = false) {\n  let currentIndex = 0;\n  if (allowDomainSharding) {\n    currentIndex = requestCounter % availableDomains.length;\n    requestCounter += 1;\n\n    // if domain sharding is enabled, skip main domain for fetching chart API\n    // leave main domain free for other calls like fav star, save change, etc.\n    // to make dashboard be responsive when it's loading large number of charts\n    if (currentIndex === 0) {\n      currentIndex += 1;\n      requestCounter += 1;\n    }\n  }\n  return availableDomains[currentIndex];\n}\n\nexport function getAnnotationJsonUrl(slice_id, form_data, isNative, force) {\n  if (slice_id === null || slice_id === undefined) {\n    return null;\n  }\n  const uri = URI(window.location.search);\n  const endpoint = isNative ? 'annotation_json' : 'slice_json';\n  return uri\n    .pathname(`/superset/${endpoint}/${slice_id}`)\n    .search({\n      form_data: safeStringify(form_data, (key, value) =>\n        value === null ? undefined : value,\n      ),\n      force,\n    })\n    .toString();\n}\n\nexport function getURIDirectory(endpointType = 'base') {\n  // Building the directory part of the URI\n  if (\n    ['full', 'json', 'csv', 'query', 'results', 'samples'].includes(\n      endpointType,\n    )\n  ) {\n    return '/superset/explore_json/';\n  }\n  return '/superset/explore/';\n}\n\nexport function mountExploreUrl(endpointType, extraSearch = {}, force = false) {\n  const uri = new URI('/');\n  const directory = getURIDirectory(endpointType);\n  const search = uri.search(true);\n  Object.keys(extraSearch).forEach(key => {\n    search[key] = extraSearch[key];\n  });\n  if (endpointType === URL_PARAMS.standalone.name) {\n    if (force) {\n      search.force = '1';\n    }\n    search.standalone = DashboardStandaloneMode.HIDE_NAV;\n  }\n  return uri.directory(directory).search(search).toString();\n}\n\nexport function getChartDataUri({ path, qs, allowDomainSharding = false }) {\n  // The search params from the window.location are carried through,\n  // but can be specified with curUrl (used for unit tests to spoof\n  // the window.location).\n  let uri = new URI({\n    protocol: window.location.protocol.slice(0, -1),\n    hostname: getHostName(allowDomainSharding),\n    port: window.location.port ? window.location.port : '',\n    path,\n  });\n  if (qs) {\n    uri = uri.search(qs);\n  }\n  return uri;\n}\n\n/**\n * This gets the minimal url for the given form data.\n * If there are dashboard overrides present in the form data,\n * they will not be included in the url.\n */\nexport function getExploreUrl({\n  formData,\n  endpointType = 'base',\n  force = false,\n  curUrl = null,\n  requestParams = {},\n  allowDomainSharding = false,\n  method = 'POST',\n}) {\n  if (!formData.datasource) {\n    return null;\n  }\n\n  // label_colors should not pollute the URL\n  // eslint-disable-next-line no-param-reassign\n  delete formData.label_colors;\n\n  let uri = getChartDataUri({ path: '/', allowDomainSharding });\n  if (curUrl) {\n    uri = URI(URI(curUrl).search());\n  }\n\n  const directory = getURIDirectory(endpointType);\n\n  // Building the querystring (search) part of the URI\n  const search = uri.search(true);\n  const { slice_id, extra_filters, adhoc_filters, viz_type } = formData;\n  if (slice_id) {\n    const form_data = { slice_id };\n    if (method === 'GET') {\n      form_data.viz_type = viz_type;\n      if (extra_filters && extra_filters.length) {\n        form_data.extra_filters = extra_filters;\n      }\n      if (adhoc_filters && adhoc_filters.length) {\n        form_data.adhoc_filters = adhoc_filters;\n      }\n    }\n    search.form_data = safeStringify(form_data);\n  }\n  if (force) {\n    search.force = 'true';\n  }\n  if (endpointType === 'csv') {\n    search.csv = 'true';\n  }\n  if (endpointType === URL_PARAMS.standalone.name) {\n    search.standalone = '1';\n  }\n  if (endpointType === 'query') {\n    search.query = 'true';\n  }\n  if (endpointType === 'results') {\n    search.results = 'true';\n  }\n  if (endpointType === 'samples') {\n    search.samples = 'true';\n  }\n  const paramNames = Object.keys(requestParams);\n  if (paramNames.length) {\n    paramNames.forEach(name => {\n      if (requestParams.hasOwnProperty(name)) {\n        search[name] = requestParams[name];\n      }\n    });\n  }\n  return uri.search(search).directory(directory).toString();\n}\n\nexport const shouldUseLegacyApi = formData => {\n  const vizMetadata = getChartMetadataRegistry().get(formData.viz_type);\n  return vizMetadata ? vizMetadata.useLegacyApi : false;\n};\n\nexport const buildV1ChartDataPayload = ({\n  formData,\n  force,\n  resultFormat,\n  resultType,\n  setDataMask,\n  ownState,\n}) => {\n  const buildQuery =\n    getChartBuildQueryRegistry().get(formData.viz_type) ??\n    (buildQueryformData =>\n      buildQueryContext(buildQueryformData, baseQueryObject => [\n        {\n          ...baseQueryObject,\n        },\n      ]));\n  return buildQuery(\n    {\n      ...formData,\n      force,\n      result_format: resultFormat,\n      result_type: resultType,\n    },\n    {\n      ownState,\n      hooks: {\n        setDataMask,\n      },\n    },\n  );\n};\n\nexport const getLegacyEndpointType = ({ resultType, resultFormat }) =>\n  resultFormat === 'csv' ? resultFormat : resultType;\n\nexport const exportChart = ({\n  formData,\n  resultFormat = 'json',\n  resultType = 'full',\n  force = false,\n  ownState = {},\n}) => {\n  let url;\n  let payload;\n  if (shouldUseLegacyApi(formData)) {\n    const endpointType = getLegacyEndpointType({ resultFormat, resultType });\n    url = getExploreUrl({\n      formData,\n      endpointType,\n      allowDomainSharding: false,\n    });\n    payload = formData;\n  } else {\n    url = '/api/v1/chart/data';\n    payload = buildV1ChartDataPayload({\n      formData,\n      force,\n      resultFormat,\n      resultType,\n      ownState,\n    });\n  }\n\n  SupersetClient.postForm(url, { form_data: safeStringify(payload) });\n};\n\nexport const exploreChart = formData => {\n  const url = getExploreUrl({\n    formData,\n    endpointType: 'base',\n    allowDomainSharding: false,\n  });\n  SupersetClient.postForm(url, { form_data: safeStringify(formData) });\n};\n\nexport const useDebouncedEffect = (effect, delay, deps) => {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const callback = useCallback(effect, deps);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      callback();\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [callback, delay]);\n};\n\nexport const getSimpleSQLExpression = (subject, operator, comparator) => {\n  const isMulti =\n    [...MULTI_OPERATORS]\n      .map(op => OPERATOR_ENUM_TO_OPERATOR_TYPE[op].operation)\n      .indexOf(operator) >= 0;\n  let expression = subject ?? '';\n  if (subject && operator) {\n    expression += ` ${operator}`;\n    const firstValue =\n      isMulti && Array.isArray(comparator) ? comparator[0] : comparator;\n    const comparatorArray = ensureIsArray(comparator);\n    const isString =\n      firstValue !== undefined && Number.isNaN(Number(firstValue));\n    const quote = isString ? \"'\" : '';\n    const [prefix, suffix] = isMulti ? ['(', ')'] : ['', ''];\n    const formattedComparators = comparatorArray\n      .map(val => optionLabel(val))\n      .map(\n        val =>\n          `${quote}${isString ? String(val).replace(\"'\", \"''\") : val}${quote}`,\n      );\n    if (comparatorArray.length > 0) {\n      expression += ` ${prefix}${formattedComparators.join(', ')}${suffix}`;\n    }\n  }\n  return expression;\n};\n\nexport function formatSelectOptions(options) {\n  return options.map(opt => [opt, opt.toString()]);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport moment from 'moment';\n\nexport const fDuration = function (t1, t2, format = 'HH:mm:ss.SS') {\n  const diffSec = t2 - t1;\n  const duration = moment(new Date(diffSec));\n  return duration.utc().format(format);\n};\n\nexport const now = function () {\n  // seconds from EPOCH as a float\n  return moment().utc().valueOf();\n};\n\nexport const epochTimeXHoursAgo = function (h) {\n  return moment().subtract(h, 'hours').utc().valueOf();\n};\n\nexport const epochTimeXDaysAgo = function (d) {\n  return moment().subtract(d, 'days').utc().valueOf();\n};\n\nexport const epochTimeXYearsAgo = function (y) {\n  return moment().subtract(y, 'years').utc().valueOf();\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  initFeatureFlags,\n  isFeatureEnabled,\n  FeatureFlag,\n} from 'src/featureFlags';\n\nfunction getDomainsConfig() {\n  const appContainer = document.getElementById('app');\n  if (!appContainer) {\n    return [];\n  }\n\n  const availableDomains = new Set([window.location.hostname]);\n\n  // don't do domain sharding if a certain query param is set\n  const disableDomainSharding =\n    new URLSearchParams(window.location.search).get('disableDomainSharding') ===\n    '1';\n  if (disableDomainSharding) {\n    return Array.from(availableDomains);\n  }\n\n  const bootstrapData = JSON.parse(appContainer.getAttribute('data-bootstrap'));\n  // this module is a little special, it may be loaded before index.jsx,\n  // where window.featureFlags get initialized\n  // eslint-disable-next-line camelcase\n  initFeatureFlags(bootstrapData?.common?.feature_flags);\n\n  if (\n    isFeatureEnabled(FeatureFlag.ALLOW_DASHBOARD_DOMAIN_SHARDING) &&\n    bootstrapData &&\n    bootstrapData.common &&\n    bootstrapData.common.conf &&\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS\n  ) {\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach(hostName => {\n      availableDomains.add(hostName);\n    });\n  }\n  return Array.from(availableDomains);\n}\n\nexport const availableDomains = getDomainsConfig();\n\nexport const allowCrossDomain = availableDomains.length > 1;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { CSSProperties } from 'react';\nimport { kebabCase } from 'lodash';\nimport { TooltipPlacement } from 'antd/lib/tooltip';\nimport { t } from '@superset-ui/core';\nimport { Tooltip, TooltipProps } from './Tooltip';\n\nexport interface InfoTooltipWithTriggerProps {\n  label?: string;\n  tooltip?: TooltipProps['title'];\n  icon?: string;\n  onClick?: () => void;\n  placement?: TooltipPlacement;\n  bsStyle?: string;\n  className?: string;\n  iconsStyle?: CSSProperties;\n}\n\nexport function InfoTooltipWithTrigger({\n  label,\n  tooltip,\n  bsStyle,\n  onClick,\n  icon = 'info-circle',\n  className = 'text-muted',\n  placement = 'right',\n  iconsStyle = {},\n}: InfoTooltipWithTriggerProps) {\n  const iconClass = `fa fa-${icon} ${className} ${\n    bsStyle ? `text-${bsStyle}` : ''\n  }`;\n  const iconEl = (\n    <i\n      role=\"button\"\n      aria-label={t('Show info tooltip')}\n      tabIndex={0}\n      className={iconClass}\n      style={{ cursor: onClick ? 'pointer' : undefined, ...iconsStyle }}\n      onClick={onClick}\n      onKeyPress={\n        onClick &&\n        (event => {\n          if (event.key === 'Enter' || event.key === ' ') {\n            onClick();\n          }\n        })\n      }\n    />\n  );\n  if (!tooltip) {\n    return iconEl;\n  }\n  return (\n    <Tooltip\n      id={`${kebabCase(label)}-tooltip`}\n      title={tooltip}\n      placement={placement}\n    >\n      {iconEl}\n    </Tooltip>\n  );\n}\n\nexport default InfoTooltipWithTrigger;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { useTheme, css } from '@superset-ui/core';\nimport { Tooltip as BaseTooltip } from 'antd';\nimport type { TooltipProps } from 'antd/lib/tooltip';\nimport { Global } from '@emotion/react';\n\nexport type { TooltipProps } from 'antd/lib/tooltip';\n\nexport const Tooltip = ({ overlayStyle, color, ...props }: TooltipProps) => {\n  const theme = useTheme();\n  const defaultColor = `${theme.colors.grayscale.dark2}e6`;\n  return (\n    <>\n      {/* Safari hack to hide browser default tooltips */}\n      <Global\n        styles={css`\n          .ant-tooltip-open {\n            display: inline-block;\n            &::after {\n              content: '';\n              display: block;\n            }\n          }\n        `}\n      />\n      <BaseTooltip\n        overlayStyle={{\n          fontSize: theme.typography.sizes.s,\n          lineHeight: '1.6',\n          maxWidth: theme.gridUnit * 62,\n          minWidth: theme.gridUnit * 30,\n          ...overlayStyle,\n        }}\n        // make the tooltip display closer to the label\n        align={{ offset: [0, 1] }}\n        color={defaultColor || color}\n        trigger=\"hover\"\n        placement=\"bottom\"\n        // don't allow hovering over the tooltip\n        mouseLeaveDelay={0}\n        {...props}\n      />\n    </>\n  );\n};\n\nexport default Tooltip;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  Registry,\n  makeSingleton,\n  OverwritePolicy,\n  QueryContext,\n  SetDataMaskHook,\n  JsonObject,\n} from '../..';\n\n// Ideally this would be <T extends QueryFormData>\nexport type BuildQuery<T = any> = (\n  formData: T,\n  options?: {\n    extras?: {\n      cachedChanges?: any;\n    };\n    ownState?: JsonObject;\n    hooks?: {\n      setDataMask: SetDataMaskHook;\n      setCachedChanges: (newChanges: any) => void;\n    };\n  },\n) => QueryContext;\n\nclass ChartBuildQueryRegistry extends Registry<BuildQuery> {\n  constructor() {\n    super({ name: 'ChartBuildQuery', overwritePolicy: OverwritePolicy.WARN });\n  }\n}\n\nconst getInstance = makeSingleton(ChartBuildQueryRegistry);\n\nexport default getInstance;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Registry, makeSingleton, OverwritePolicy } from '../..';\nimport ChartMetadata from '../models/ChartMetadata';\n\nclass ChartMetadataRegistry extends Registry<ChartMetadata, ChartMetadata> {\n  constructor() {\n    super({ name: 'ChartMetadata', overwritePolicy: OverwritePolicy.WARN });\n  }\n}\n\nconst getInstance = makeSingleton(ChartMetadataRegistry);\n\nexport default getInstance;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport ReactMarkdown, { MarkdownAbstractSyntaxTree } from 'react-markdown';\n// @ts-ignore no types available\nimport htmlParser from 'react-markdown/plugins/html-parser';\n\nimport { FeatureFlag, isFeatureEnabled } from '../utils';\n\ninterface SafeMarkdownProps {\n  source: string;\n}\n\nfunction isSafeMarkup(node: MarkdownAbstractSyntaxTree) {\n  return node.type === 'html' && node.value\n    ? /href=\"(javascript|vbscript|file):.*\"/gim.test(node.value) === false\n    : true;\n}\n\nfunction SafeMarkdown({ source }: SafeMarkdownProps) {\n  return (\n    <ReactMarkdown\n      source={source}\n      escapeHtml={isFeatureEnabled(FeatureFlag.ESCAPE_MARKDOWN_HTML)}\n      skipHtml={!isFeatureEnabled(FeatureFlag.DISPLAY_MARKDOWN_HTML)}\n      allowNode={isSafeMarkup}\n      astPlugins={[\n        htmlParser({\n          isValidNode: (node: MarkdownAbstractSyntaxTree) =>\n            node.type !== 'script',\n        }),\n      ]}\n    />\n  );\n}\n\nexport default SafeMarkdown;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { DatasourceType } from './types/Datasource';\n\nexport default class DatasourceKey {\n  readonly id: number;\n\n  readonly type: DatasourceType;\n\n  constructor(key: string) {\n    const [idStr, typeStr] = key.split('__');\n    this.id = parseInt(idStr, 10);\n    this.type =\n      typeStr === 'table' ? DatasourceType.Table : DatasourceType.Druid;\n  }\n\n  public toString() {\n    return `${this.id}__${this.type}`;\n  }\n\n  public toObject() {\n    return {\n      id: this.id,\n      type: this.type,\n    };\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport buildQueryObject from './buildQueryObject';\nimport DatasourceKey from './DatasourceKey';\nimport { QueryFieldAliases, QueryFormData } from './types/QueryFormData';\nimport { QueryContext, QueryObject } from './types/Query';\nimport { SetDataMaskHook } from '../chart';\nimport { JsonObject } from '../connection';\n\nconst WRAP_IN_ARRAY = (baseQueryObject: QueryObject) => [baseQueryObject];\n\nexport type BuildFinalQueryObjects = (\n  baseQueryObject: QueryObject,\n) => QueryObject[];\n\nexport default function buildQueryContext(\n  formData: QueryFormData,\n  options?:\n    | {\n        buildQuery?: BuildFinalQueryObjects;\n        queryFields?: QueryFieldAliases;\n        ownState?: JsonObject;\n        hooks?: { setDataMask: SetDataMaskHook };\n      }\n    | BuildFinalQueryObjects,\n): QueryContext {\n  const { queryFields, buildQuery = WRAP_IN_ARRAY } =\n    typeof options === 'function'\n      ? { buildQuery: options, queryFields: {} }\n      : options || {};\n  const queries = buildQuery(buildQueryObject(formData, queryFields));\n  queries.forEach(query => {\n    if (Array.isArray(query.post_processing)) {\n      // eslint-disable-next-line no-param-reassign\n      query.post_processing = query.post_processing.filter(Boolean);\n    }\n  });\n  return {\n    datasource: new DatasourceKey(formData.datasource).toObject(),\n    force: formData.force || false,\n    queries,\n    form_data: formData,\n    result_format: formData.result_format || 'json',\n    result_type: formData.result_type || 'full',\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable camelcase */\nimport { QueryFormData } from './types/QueryFormData';\nimport { QueryObjectFilterClause } from './types/Query';\nimport { isSimpleAdhocFilter } from './types/Filter';\nimport convertFilter from './convertFilter';\n\nfunction sanitizeClause(clause: string): string {\n  let sanitizedClause = clause;\n  if (clause.includes('--')) {\n    sanitizedClause = `${clause}\\n`;\n  }\n  return `(${sanitizedClause})`;\n}\n\n/** Logic formerly in viz.py's process_query_filters */\nexport default function processFilters(\n  formData: Partial<QueryFormData>,\n): Partial<QueryFormData> {\n  // Split adhoc_filters into four fields according to\n  // (1) clause (WHERE or HAVING)\n  // (2) expressionType\n  //     2.1 SIMPLE (subject + operator + comparator)\n  //     2.2 SQL (freeform SQL expression))\n  const { adhoc_filters, extras = {}, filters = [], where } = formData;\n  const simpleWhere: QueryObjectFilterClause[] = filters;\n\n  const simpleHaving: QueryObjectFilterClause[] = [];\n  const freeformWhere: string[] = [];\n  if (where) freeformWhere.push(where);\n  const freeformHaving: string[] = [];\n\n  (adhoc_filters || []).forEach(filter => {\n    const { clause } = filter;\n    if (isSimpleAdhocFilter(filter)) {\n      const filterClause = convertFilter(filter);\n      if (clause === 'WHERE') {\n        simpleWhere.push(filterClause);\n      } else {\n        simpleHaving.push(filterClause);\n      }\n    } else {\n      const { sqlExpression } = filter;\n      if (clause === 'WHERE') {\n        freeformWhere.push(sqlExpression);\n      } else {\n        freeformHaving.push(sqlExpression);\n      }\n    }\n  });\n\n  // some filter-related fields need to go in `extras`\n  extras.having = freeformHaving.map(sanitizeClause).join(' AND ');\n  extras.having_druid = simpleHaving;\n  extras.where = freeformWhere.map(sanitizeClause).join(' AND ');\n\n  return {\n    filters: simpleWhere,\n    extras,\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable camelcase */\nimport {\n  AdhocFilter,\n  QueryFieldAliases,\n  QueryFormColumn,\n  QueryFormData,\n  QueryObject,\n  QueryObjectFilterClause,\n  isPhysicalColumn,\n  isAdhocColumn,\n} from './types';\nimport processFilters from './processFilters';\nimport extractExtras from './extractExtras';\nimport extractQueryFields from './extractQueryFields';\nimport { overrideExtraFormData } from './processExtraFormData';\n\n/**\n * Build the common segments of all query objects (e.g. the granularity field derived from\n * either sql alchemy or druid). The segments specific to each viz type is constructed in the\n * buildQuery method for each viz type (see `wordcloud/buildQuery.ts` for an example).\n * Note the type of the formData argument passed in here is the type of the formData for a\n * specific viz, which is a subtype of the generic formData shared among all viz types.\n */\nexport default function buildQueryObject<T extends QueryFormData>(\n  formData: T,\n  queryFields?: QueryFieldAliases,\n): QueryObject {\n  const {\n    annotation_layers = [],\n    extra_form_data,\n    time_range,\n    since,\n    until,\n    row_limit,\n    row_offset,\n    order_desc,\n    limit,\n    timeseries_limit_metric,\n    granularity,\n    url_params = {},\n    custom_params = {},\n    series_columns,\n    series_limit,\n    series_limit_metric,\n    ...residualFormData\n  } = formData;\n  const {\n    adhoc_filters: appendAdhocFilters = [],\n    filters: appendFilters = [],\n    custom_form_data = {},\n    ...overrides\n  } = extra_form_data || {};\n\n  const numericRowLimit = Number(row_limit);\n  const numericRowOffset = Number(row_offset);\n  const { metrics, columns, orderby } = extractQueryFields(\n    residualFormData,\n    queryFields,\n  );\n\n  // collect all filters for conversion to simple filters/freeform clauses\n  const extras = extractExtras(formData);\n  const { filters: extraFilters } = extras;\n  const filterFormData: {\n    filters: QueryObjectFilterClause[];\n    adhoc_filters: AdhocFilter[];\n  } = {\n    filters: [...extraFilters, ...appendFilters],\n    adhoc_filters: [...(formData.adhoc_filters || []), ...appendAdhocFilters],\n  };\n  const extrasAndfilters = processFilters({\n    ...formData,\n    ...extras,\n    ...filterFormData,\n  });\n  const normalizeSeriesLimitMetric = (column: QueryFormColumn | undefined) => {\n    if (isAdhocColumn(column) || isPhysicalColumn(column)) {\n      return column;\n    }\n    return undefined;\n  };\n\n  let queryObject: QueryObject = {\n    // fallback `null` to `undefined` so they won't be sent to the backend\n    // (JSON.strinify will ignore `undefined`.)\n    time_range: time_range || undefined,\n    since: since || undefined,\n    until: until || undefined,\n    granularity: granularity || undefined,\n    ...extras,\n    ...extrasAndfilters,\n    columns,\n    metrics,\n    orderby,\n    annotation_layers,\n    row_limit:\n      row_limit == null || Number.isNaN(numericRowLimit)\n        ? undefined\n        : numericRowLimit,\n    row_offset:\n      row_offset == null || Number.isNaN(numericRowOffset)\n        ? undefined\n        : numericRowOffset,\n    series_columns,\n    series_limit,\n    series_limit_metric: normalizeSeriesLimitMetric(series_limit_metric),\n    timeseries_limit: limit ? Number(limit) : 0,\n    timeseries_limit_metric: timeseries_limit_metric || undefined,\n    order_desc: typeof order_desc === 'undefined' ? true : order_desc,\n    url_params: url_params || undefined,\n    custom_params,\n  };\n\n  // override extra form data used by native and cross filters\n  queryObject = overrideExtraFormData(queryObject, overrides);\n\n  return { ...queryObject, custom_form_data };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '../translation';\nimport { removeDuplicates } from '../utils';\nimport { DTTM_ALIAS } from './constants';\nimport getColumnLabel from './getColumnLabel';\nimport getMetricLabel from './getMetricLabel';\nimport {\n  QueryFields,\n  QueryFormColumn,\n  QueryFormMetric,\n  QueryFormOrderBy,\n  QueryFieldAliases,\n  FormDataResidual,\n  QueryMode,\n} from './types/QueryFormData';\n\n/**\n * Extra SQL query related fields from chart form data.\n * Consolidate field values into arrays.\n *\n * @param formData - the (partial) form data obtained from chart controls.\n * @param aliases - additional field aliases that maps arbitrary field names to\n *                  query field names.\n */\nexport default function extractQueryFields(\n  formData: FormDataResidual,\n  aliases?: QueryFieldAliases,\n): QueryFields {\n  const queryFieldAliases: QueryFieldAliases = {\n    /** These are predefined for backward compatibility */\n    metric: 'metrics',\n    metric_2: 'metrics',\n    secondary_metric: 'metrics',\n    x: 'metrics',\n    y: 'metrics',\n    size: 'metrics',\n    all_columns: 'columns',\n    series: 'groupby',\n    order_by_cols: 'orderby',\n    ...aliases,\n  };\n  const {\n    query_mode: queryMode,\n    include_time: includeTime,\n    ...restFormData\n  } = formData;\n\n  let columns: QueryFormColumn[] = [];\n  let metrics: QueryFormMetric[] = [];\n  let orderby: QueryFormOrderBy[] = [];\n\n  Object.entries(restFormData).forEach(([key, value]) => {\n    // ignore `null` or `undefined` value\n    if (value == null) {\n      return;\n    }\n\n    let normalizedKey: string = queryFieldAliases[key] || key;\n\n    // ignore columns when (specifically) in aggregate mode.\n    // For charts that support both aggregate and raw records mode,\n    // we store both `groupby` and `columns` in `formData`, so users can\n    // switch between modes while retaining the selected options for each.\n    if (queryMode === QueryMode.aggregate && normalizedKey === 'columns') {\n      return;\n    }\n\n    // for the same reason, ignore groupby and metrics in raw records mode\n    if (\n      queryMode === QueryMode.raw &&\n      (normalizedKey === 'groupby' || normalizedKey === 'metrics')\n    ) {\n      return;\n    }\n\n    // groupby has been deprecated in QueryObject: https://github.com/apache/superset/pull/9366\n    if (normalizedKey === 'groupby') {\n      normalizedKey = 'columns';\n    }\n\n    if (normalizedKey === 'metrics') {\n      metrics = metrics.concat(value);\n    } else if (normalizedKey === 'columns') {\n      // currently the columns field only accept pre-defined columns (string shortcut)\n      columns = columns.concat(value);\n    } else if (normalizedKey === 'orderby') {\n      orderby = orderby.concat(value);\n    }\n  });\n\n  if (includeTime && !columns.includes(DTTM_ALIAS)) {\n    columns.unshift(DTTM_ALIAS);\n  }\n\n  return {\n    columns: removeDuplicates(\n      columns.filter(col => col !== ''),\n      getColumnLabel,\n    ),\n    metrics:\n      queryMode === QueryMode.raw\n        ? undefined\n        : removeDuplicates(metrics, getMetricLabel),\n    orderby:\n      orderby.length > 0\n        ? orderby.map(item => {\n            // value can be in the format of `['[\"col1\", true]', '[\"col2\", false]'],\n            // where the option strings come directly from `order_by_choices`.\n            if (typeof item === 'string') {\n              try {\n                return JSON.parse(item);\n              } catch (error) {\n                throw new Error(t('Found invalid orderby options'));\n              }\n            }\n            return item;\n          })\n        : undefined,\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable camelcase */\nimport {\n  AppliedTimeExtras,\n  isDruidFormData,\n  QueryFormData,\n  QueryObjectExtras,\n  QueryObjectFilterClause,\n  TimeColumnConfigKey,\n} from './types';\n\ntype ExtraFilterQueryField = {\n  time_range?: string;\n  granularity_sqla?: string;\n  time_grain_sqla?: string;\n  druid_time_origin?: string;\n  granularity?: string;\n};\n\ntype ExtractedExtra = ExtraFilterQueryField & {\n  filters: QueryObjectFilterClause[];\n  extras: QueryObjectExtras;\n  applied_time_extras: AppliedTimeExtras;\n};\n\nexport default function extractExtras(formData: QueryFormData): ExtractedExtra {\n  const applied_time_extras: AppliedTimeExtras = {};\n  const filters: QueryObjectFilterClause[] = [];\n  const extras: QueryObjectExtras = {};\n  const extract: ExtractedExtra = {\n    filters,\n    extras,\n    applied_time_extras,\n  };\n\n  const reservedColumnsToQueryField: Record<\n    TimeColumnConfigKey,\n    keyof ExtraFilterQueryField\n  > = {\n    __time_range: 'time_range',\n    __time_col: 'granularity_sqla',\n    __time_grain: 'time_grain_sqla',\n    __time_origin: 'druid_time_origin',\n    __granularity: 'granularity',\n  };\n\n  (formData.extra_filters || []).forEach(filter => {\n    if (filter.col in reservedColumnsToQueryField) {\n      const key = filter.col as TimeColumnConfigKey;\n      const queryField = reservedColumnsToQueryField[key];\n      extract[queryField] = filter.val as string;\n      applied_time_extras[key] = filter.val as string;\n    } else {\n      filters.push(filter);\n    }\n  });\n\n  // map to undeprecated names and remove deprecated fields\n  if (isDruidFormData(formData) && !extract.druid_time_origin) {\n    extras.druid_time_origin = formData.druid_time_origin;\n    delete extract.druid_time_origin;\n  } else {\n    // SQL\n    extras.time_grain_sqla =\n      extract.time_grain_sqla || formData.time_grain_sqla;\n    extract.granularity =\n      extract.granularity_sqla ||\n      formData.granularity ||\n      formData.granularity_sqla;\n    delete extract.granularity_sqla;\n    delete extract.time_grain_sqla;\n  }\n\n  return extract;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ExtraFormDataOverride, QueryObject } from './types';\nimport {\n  EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS,\n  EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS,\n} from './constants';\n\nexport function overrideExtraFormData(\n  queryObject: QueryObject,\n  overrideFormData: ExtraFormDataOverride,\n): QueryObject {\n  const overriddenFormData: QueryObject = { ...queryObject };\n  const { extras: overriddenExtras = {} } = overriddenFormData;\n  Object.entries(EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS).forEach(\n    ([key, target]) => {\n      const value = overrideFormData[key as keyof ExtraFormDataOverride];\n      if (value !== undefined) {\n        overriddenFormData[target] = value;\n      }\n    },\n  );\n  EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS.forEach(key => {\n    if (key in overrideFormData) {\n      // @ts-ignore\n      overriddenExtras[key] = overrideFormData[key];\n    }\n  });\n  if (Object.keys(overriddenExtras).length > 0) {\n    overriddenFormData.extras = overriddenExtras;\n  }\n  return overriddenFormData;\n}\n","import {\n  ExtraFormDataAppend,\n  ExtraFormDataOverrideExtras,\n  ExtraFormDataOverrideRegular,\n  ExtraFormDataOverride,\n  QueryObject,\n} from './types';\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport const DTTM_ALIAS = '__timestamp';\n\nexport const EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS: (keyof ExtraFormDataOverrideExtras)[] =\n  ['druid_time_origin', 'relative_start', 'relative_end', 'time_grain_sqla'];\n\nexport const EXTRA_FORM_DATA_APPEND_KEYS: (keyof ExtraFormDataAppend)[] = [\n  'adhoc_filters',\n  'filters',\n  'interactive_groupby',\n  'interactive_highlight',\n  'interactive_drilldown',\n  'custom_form_data',\n];\n\nexport const EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS: Record<\n  keyof ExtraFormDataOverrideRegular,\n  keyof QueryObject\n> = {\n  granularity: 'granularity',\n  granularity_sqla: 'granularity',\n  time_column: 'time_column',\n  time_grain: 'time_grain',\n  time_range: 'time_range',\n};\n\nexport const EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS = Object.keys(\n  EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS,\n) as (keyof ExtraFormDataOverrideRegular)[];\n\nexport const EXTRA_FORM_DATA_OVERRIDE_KEYS: (keyof ExtraFormDataOverride)[] = [\n  ...EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS,\n  ...EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS,\n];\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  SimpleAdhocFilter,\n  isBinaryAdhocFilter,\n  isUnaryAdhocFilter,\n} from './types/Filter';\nimport { QueryObjectFilterClause } from './types/Query';\n\nexport default function convertFilter(\n  filter: SimpleAdhocFilter,\n): QueryObjectFilterClause {\n  const { subject } = filter;\n  if (isUnaryAdhocFilter(filter)) {\n    const { operator } = filter;\n\n    return {\n      col: subject,\n      op: operator,\n    };\n  }\n  if (isBinaryAdhocFilter(filter)) {\n    const { operator } = filter;\n\n    return {\n      col: subject,\n      op: operator,\n      val: filter.comparator,\n    };\n  }\n\n  const { operator } = filter;\n\n  return {\n    col: subject,\n    op: operator,\n    val: filter.comparator,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { isPhysicalColumn, QueryFormColumn } from './types';\n\nexport default function getColumnLabel(column: QueryFormColumn): string {\n  if (isPhysicalColumn(column)) {\n    return column;\n  }\n  if (column.label) {\n    return column.label;\n  }\n  return column.sqlExpression;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { isAdhocMetricSimple, isSavedMetric, QueryFormMetric } from './types';\n\nexport default function getMetricLabel(metric: QueryFormMetric): string {\n  if (isSavedMetric(metric)) {\n    return metric;\n  }\n  if (metric.label) {\n    return metric.label;\n  }\n  if (isAdhocMetricSimple(metric)) {\n    return `${metric.aggregate}(${\n      metric.column.columnName || metric.column.column_name\n    })`;\n  }\n  return metric.sqlExpression;\n}\n","/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { GenericDataType } from './QueryResponse';\n\nexport interface AdhocColumn {\n  hasCustomLabel?: boolean;\n  label?: string;\n  optionName?: string;\n  sqlExpression: string;\n  expressionType: 'SQL';\n}\n\n/**\n * A column that is physically defined in datasource.\n */\nexport type PhysicalColumn = string;\n\n/**\n * Column information defined in datasource.\n */\nexport interface Column {\n  id: number;\n  type?: string;\n  type_generic?: GenericDataType;\n  column_name: string;\n  groupby?: boolean;\n  is_dttm?: boolean;\n  filterable?: boolean;\n  verbose_name?: string | null;\n  description?: string | null;\n  expression?: string | null;\n  database_expression?: string | null;\n  python_date_format?: string | null;\n}\n\nexport default {};\n\nexport function isPhysicalColumn(\n  column?: AdhocColumn | PhysicalColumn,\n): column is PhysicalColumn {\n  return typeof column === 'string';\n}\n\nexport function isAdhocColumn(column?: AdhocColumn | PhysicalColumn) {\n  return (column as AdhocColumn)?.sqlExpression !== undefined;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Column } from './Column';\nimport { Metric } from './Metric';\n\nexport enum DatasourceType {\n  Table = 'table',\n  Druid = 'druid',\n  Query = 'query',\n  Dataset = 'dataset',\n  SlTable = 'sl_table',\n  SavedQuery = 'saved_query',\n}\n\n/**\n * Datasource metadata.\n */\nexport interface Datasource {\n  id: number;\n  name: string;\n  type: DatasourceType;\n  columns: Column[];\n  metrics: Metric[];\n  description?: string;\n  // key is column names (labels)\n  columnFormats?: {\n    [key: string]: string;\n  };\n  verboseMap?: {\n    [key: string]: string;\n  };\n}\n\nexport const DEFAULT_METRICS = [\n  {\n    metric_name: 'COUNT(*)',\n    expression: 'COUNT(*)',\n  },\n];\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  UnaryOperator,\n  BinaryOperator,\n  SetOperator,\n  isUnaryOperator,\n  isBinaryOperator,\n  isSetOperator,\n} from './Operator';\nimport { TimeGranularity } from '../../time-format';\n\ninterface BaseSimpleAdhocFilter {\n  expressionType: 'SIMPLE';\n  clause: 'WHERE' | 'HAVING';\n  subject: string;\n  timeGrain?: TimeGranularity;\n  isExtra?: boolean;\n}\n\nexport type UnaryAdhocFilter = BaseSimpleAdhocFilter & {\n  operator: UnaryOperator;\n};\n\nexport type BinaryAdhocFilter = BaseSimpleAdhocFilter & {\n  operator: BinaryOperator;\n  comparator: string;\n};\n\nexport type SetAdhocFilter = BaseSimpleAdhocFilter & {\n  operator: SetOperator;\n  comparator: string[];\n};\n\nexport type SimpleAdhocFilter =\n  | UnaryAdhocFilter\n  | BinaryAdhocFilter\n  | SetAdhocFilter;\n\nexport interface FreeFormAdhocFilter {\n  expressionType: 'SQL';\n  clause: 'WHERE' | 'HAVING';\n  sqlExpression: string;\n}\n\nexport type AdhocFilter = SimpleAdhocFilter | FreeFormAdhocFilter;\n\n//---------------------------------------------------\n// Type guards\n//---------------------------------------------------\n\nexport function isSimpleAdhocFilter(\n  filter: AdhocFilter,\n): filter is SimpleAdhocFilter {\n  return filter.expressionType === 'SIMPLE';\n}\n\nexport function isUnaryAdhocFilter(\n  filter: SimpleAdhocFilter,\n): filter is UnaryAdhocFilter {\n  return isUnaryOperator(filter.operator);\n}\n\nexport function isBinaryAdhocFilter(\n  filter: SimpleAdhocFilter,\n): filter is BinaryAdhocFilter {\n  return isBinaryOperator(filter.operator);\n}\n\nexport function isSetAdhocFilter(\n  filter: SimpleAdhocFilter,\n): filter is SetAdhocFilter {\n  return isSetOperator(filter.operator);\n}\n","/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Maybe } from '../../types';\nimport { Column } from './Column';\n\nexport type Aggregate =\n  | 'AVG'\n  | 'COUNT'\n  | 'COUNT_DISTINCT'\n  | 'MAX'\n  | 'MIN'\n  | 'SUM';\n\nexport interface AdhocMetricBase {\n  hasCustomLabel?: boolean;\n  label?: string;\n  optionName?: string;\n}\n\nexport interface AdhocMetricSimple extends AdhocMetricBase {\n  expressionType: 'SIMPLE';\n  column: Omit<Column, 'column_name'> & {\n    column_name?: string;\n    columnName?: string;\n  };\n  aggregate: Aggregate;\n}\n\nexport interface AdhocMetricSQL extends AdhocMetricBase {\n  expressionType: 'SQL';\n  sqlExpression: string;\n}\n\nexport type AdhocMetric = AdhocMetricSimple | AdhocMetricSQL;\n\n/**\n * Select a predefined metric by its `metric_name`.\n */\nexport type SavedMetric = string;\n\n/**\n * Metric definition stored in datasource metadata.\n */\nexport interface Metric {\n  id?: number;\n  metric_name: string;\n  expression?: Maybe<string>;\n  certification_details?: Maybe<string>;\n  certified_by?: Maybe<string>;\n  d3format?: Maybe<string>;\n  description?: Maybe<string>;\n  is_certified?: boolean;\n  verbose_name?: string;\n  warning_markdown?: Maybe<string>;\n  warning_text?: Maybe<string>;\n}\n\nexport default {};\n\nexport function isAdhocMetricSimple(\n  metric: AdhocMetric,\n): metric is AdhocMetricSimple {\n  return metric.expressionType === 'SIMPLE';\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/** List of operators that do not require another operand */\nconst UNARY_OPERATORS = ['IS NOT NULL', 'IS NULL'] as const;\n\n/** List of operators that require another operand that is a single value */\nconst BINARY_OPERATORS = [\n  '==',\n  '!=',\n  '>',\n  '<',\n  '>=',\n  '<=',\n  'ILIKE',\n  'LIKE',\n  'REGEX',\n] as const;\n\n/** List of operators that require another operand that is a set */\nconst SET_OPERATORS = ['IN', 'NOT IN'] as const;\n\n//---------------------------------------------------\n// Derived types\n//---------------------------------------------------\n\n/** An operator that does not require another operand */\nexport type UnaryOperator = typeof UNARY_OPERATORS[number];\n\n/** An operator that requires another operand that is a single value */\nexport type BinaryOperator = typeof BINARY_OPERATORS[number];\n\n/** An operator that require another operand that is a set */\nexport type SetOperator = typeof SET_OPERATORS[number];\n\n//---------------------------------------------------\n// Type guards\n//---------------------------------------------------\n\nconst unaryOperatorSet = new Set<string>(UNARY_OPERATORS);\n\nexport function isUnaryOperator(operator: string): operator is UnaryOperator {\n  return unaryOperatorSet.has(operator);\n}\n\nconst binaryOperatorSet = new Set<string>(BINARY_OPERATORS);\n\nexport function isBinaryOperator(operator: string): operator is BinaryOperator {\n  return binaryOperatorSet.has(operator);\n}\n\nconst setOperatorSet = new Set<string>(SET_OPERATORS);\n\nexport function isSetOperator(operator: string): operator is SetOperator {\n  return setOperatorSet.has(operator);\n}\n","/* eslint-disable camelcase */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Types for the final QueryContext sent to /api/v1/chart/data.\n */\nimport { AdhocMetric, SavedMetric } from './Metric';\nimport { AdhocFilter } from './Filter';\nimport { BinaryOperator, SetOperator } from './Operator';\nimport { AnnotationLayer } from './AnnotationLayer';\nimport {\n  QueryObject,\n  QueryObjectExtras,\n  QueryObjectFilterClause,\n} from './Query';\nimport { TimeRange } from './Time';\nimport { TimeGranularity } from '../../time-format';\nimport { JsonObject } from '../../connection';\nimport { AdhocColumn, PhysicalColumn } from './Column';\n\n/**\n * Metric definition/reference in query object.\n */\nexport type QueryFormMetric = SavedMetric | AdhocMetric;\n\n/**\n * Column selects in query object (used as dimensions in both groupby or raw\n * query mode). Can be either reference to physical column or expression.\n */\nexport type QueryFormColumn = PhysicalColumn | AdhocColumn;\n\n/**\n * Order query results by columns.\n * Format: [metric/column, is_ascending].\n */\nexport type QueryFormOrderBy =\n  | [QueryFormColumn | QueryFormMetric | {}, boolean]\n  | [];\n\nexport interface FormDataResidual {\n  [key: string]: any;\n}\n\nexport enum QueryMode {\n  aggregate = 'aggregate',\n  raw = 'raw',\n}\n\n/**\n * Query form fields related to SQL query and data outputs.\n */\nexport interface QueryFields {\n  columns?: QueryFormColumn[];\n  metrics?: QueryFormMetric[];\n  orderby?: QueryFormOrderBy[];\n}\n\n/**\n * Name of query fields.\n */\nexport type QueryField = keyof QueryFields;\n\n/**\n * Map of arbitrary control field names to query field names\n * (one of 'metrics' | 'columns' | 'groupby').\n *\n * Note that `groupby` is only added here because it is will be handled when\n * processing aliases but will not be sent to final objects. See `extraQueryFields.ts`.\n */\nexport type QueryFieldAliases = {\n  [key: string]: QueryField | 'groupby';\n};\n\n/**\n * Filter value for adhoc filters from dashboard FilterBox.\n * Currently only Binary and Set filters are supported.\n */\nexport type QueryFormExtraFilter = {\n  col: string;\n} & (\n  | {\n      op: BinaryOperator;\n      val: string;\n    }\n  | {\n      op: SetOperator;\n      val: string[];\n    }\n);\n\n/** These properties will be appended to those pre-existing in the form data/query object */\nexport type ExtraFormDataAppend = {\n  adhoc_filters?: AdhocFilter[];\n  filters?: QueryObjectFilterClause[];\n  /** These properties are for dynamic cross chart interaction */\n  interactive_drilldown?: string[];\n  interactive_groupby?: string[];\n  interactive_highlight?: string[];\n  /** This property can be used to pass non-standard form data between viz components */\n  custom_form_data?: JsonObject;\n};\n\n/** These parameters override properties in the extras parameter in the form data/query object.\n * Not all keys of QueryObjectExtras are supported here to ensure that freeform where and having\n * filter clauses can't be overridden */\nexport type ExtraFormDataOverrideExtras = Pick<\n  QueryObjectExtras,\n  'druid_time_origin' | 'relative_start' | 'relative_end' | 'time_grain_sqla'\n>;\n\n/** These parameters override those already present in the form data/query object */\nexport type ExtraFormDataOverrideRegular = Partial<\n  Pick<SqlaFormData, 'granularity_sqla'>\n> &\n  Partial<Pick<DruidFormData, 'granularity'>> &\n  Partial<Pick<BaseFormData, 'time_range'>> &\n  Partial<Pick<QueryObject, 'time_column' | 'time_grain'>>;\n\n/** These parameters override those already present in the form data/query object */\nexport type ExtraFormDataOverride = ExtraFormDataOverrideRegular &\n  ExtraFormDataOverrideExtras;\n\nexport type ExtraFormData = ExtraFormDataAppend & ExtraFormDataOverride;\n\n// Type signature for formData shared by all viz types\n// It will be gradually filled out as we build out the query object\n\nexport interface BaseFormData extends TimeRange, FormDataResidual {\n  /** datasource identifier ${id}_${type} */\n  datasource: string;\n  /**\n   * visualization type\n   * - necessary if you use the plugin and want to use\n   * buildQuery function from the plugin.\n   * This must match the key used when registering the plugin.\n   * - not necessary if you do not plan to use the\n   * buildQuery function from the plugin.\n   * Can put \"custom\" (or any string) in this field in that case.\n   */\n  viz_type: string;\n  metrics?: QueryFormMetric[];\n  where?: string;\n  columns?: QueryFormColumn[];\n  groupby?: QueryFormColumn[];\n  all_columns?: QueryFormColumn[];\n  /** list of filters */\n  adhoc_filters?: AdhocFilter[] | null;\n  extra_filters?: QueryFormExtraFilter[] | null;\n  extra_form_data?: ExtraFormData;\n  /** order descending */\n  order_desc?: boolean;\n  /** limit number of time series */\n  limit?: number;\n  /** limit number of row in the results */\n  row_limit?: string | number | null;\n  /** row offset for server side pagination */\n  row_offset?: string | number | null;\n  /** The metric used to order timeseries for limiting */\n  timeseries_limit_metric?: QueryFormMetric;\n  /** Force refresh */\n  force?: boolean;\n  result_format?: string;\n  result_type?: string;\n  annotation_layers?: AnnotationLayer[];\n  url_params?: Record<string, string>;\n  custom_params?: Record<string, string>;\n  /** limit number of series */\n  series_columns?: QueryFormColumn[];\n  series_limit?: number;\n  series_limit_metric?: QueryFormColumn;\n}\n\n/**\n * Form data for SQLAlchemy based datasources.\n */\nexport interface SqlaFormData extends BaseFormData {\n  /**\n   * Name of the Time Column. Time column is optional.\n   */\n  granularity_sqla?: string;\n  time_grain_sqla?: TimeGranularity;\n  having?: string;\n}\n\n/**\n * Form data for Druid datasources.\n */\nexport interface DruidFormData extends BaseFormData {\n  granularity?: string;\n  having_druid?: string;\n  druid_time_origin?: string;\n}\n\nexport type QueryFormData = DruidFormData | SqlaFormData;\n\n//---------------------------------------------------\n// Type guards\n//---------------------------------------------------\n\nexport function isDruidFormData(\n  formData: QueryFormData,\n): formData is DruidFormData {\n  return 'granularity' in formData;\n}\n\nexport function isSavedMetric(metric: QueryFormMetric): metric is SavedMetric {\n  return typeof metric === 'string';\n}\n\nexport default {};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// We can codegen the enum definition based on a list of supported flags that we\n// check into source control. We're hardcoding the supported flags for now.\nexport enum FeatureFlag {\n  ALLOW_DASHBOARD_DOMAIN_SHARDING = 'ALLOW_DASHBOARD_DOMAIN_SHARDING',\n  ALERT_REPORTS = 'ALERT_REPORTS',\n  CLIENT_CACHE = 'CLIENT_CACHE',\n  DYNAMIC_PLUGINS = 'DYNAMIC_PLUGINS',\n  ENABLE_ADVANCED_DATA_TYPES = 'ENABLE_ADVANCED_DATA_TYPES',\n  SCHEDULED_QUERIES = 'SCHEDULED_QUERIES',\n  SQL_VALIDATORS_BY_ENGINE = 'SQL_VALIDATORS_BY_ENGINE',\n  ESTIMATE_QUERY_COST = 'ESTIMATE_QUERY_COST',\n  SHARE_QUERIES_VIA_KV_STORE = 'SHARE_QUERIES_VIA_KV_STORE',\n  SQLLAB_BACKEND_PERSISTENCE = 'SQLLAB_BACKEND_PERSISTENCE',\n  THUMBNAILS = 'THUMBNAILS',\n  LISTVIEWS_DEFAULT_CARD_VIEW = 'LISTVIEWS_DEFAULT_CARD_VIEW',\n  DISABLE_LEGACY_DATASOURCE_EDITOR = 'DISABLE_LEGACY_DATASOURCE_EDITOR',\n  DISABLE_DATASET_SOURCE_EDIT = 'DISABLE_DATASET_SOURCE_EDIT',\n  DISPLAY_MARKDOWN_HTML = 'DISPLAY_MARKDOWN_HTML',\n  ESCAPE_MARKDOWN_HTML = 'ESCAPE_MARKDOWN_HTML',\n  DASHBOARD_NATIVE_FILTERS = 'DASHBOARD_NATIVE_FILTERS',\n  DASHBOARD_CROSS_FILTERS = 'DASHBOARD_CROSS_FILTERS',\n  DASHBOARD_NATIVE_FILTERS_SET = 'DASHBOARD_NATIVE_FILTERS_SET',\n  DASHBOARD_FILTERS_EXPERIMENTAL = 'DASHBOARD_FILTERS_EXPERIMENTAL',\n  EMBEDDED_SUPERSET = 'EMBEDDED_SUPERSET',\n  ENABLE_FILTER_BOX_MIGRATION = 'ENABLE_FILTER_BOX_MIGRATION',\n  VERSIONED_EXPORT = 'VERSIONED_EXPORT',\n  GLOBAL_ASYNC_QUERIES = 'GLOBAL_ASYNC_QUERIES',\n  ENABLE_TEMPLATE_PROCESSING = 'ENABLE_TEMPLATE_PROCESSING',\n  ENABLE_EXPLORE_DRAG_AND_DROP = 'ENABLE_EXPLORE_DRAG_AND_DROP',\n  ENABLE_DND_WITH_CLICK_UX = 'ENABLE_DND_WITH_CLICK_UX',\n  FORCE_DATABASE_CONNECTIONS_SSL = 'FORCE_DATABASE_CONNECTIONS_SSL',\n  ENABLE_TEMPLATE_REMOVE_FILTERS = 'ENABLE_TEMPLATE_REMOVE_FILTERS',\n  ENABLE_JAVASCRIPT_CONTROLS = 'ENABLE_JAVASCRIPT_CONTROLS',\n  DASHBOARD_RBAC = 'DASHBOARD_RBAC',\n  ALERTS_ATTACH_REPORTS = 'ALERTS_ATTACH_REPORTS',\n  ALLOW_FULL_CSV_EXPORT = 'ALLOW_FULL_CSV_EXPORT',\n  UX_BETA = 'UX_BETA',\n  GENERIC_CHART_AXES = 'GENERIC_CHART_AXES',\n  USE_ANALAGOUS_COLORS = 'USE_ANALAGOUS_COLORS',\n}\nexport type ScheduleQueriesProps = {\n  JSONSCHEMA: {\n    [key: string]: string;\n  };\n  UISCHEMA: {\n    [key: string]: string;\n  };\n  VALIDATION: {\n    [key: string]: string;\n  };\n};\nexport type FeatureFlagMap = {\n  [key in Exclude<FeatureFlag, FeatureFlag.SCHEDULED_QUERIES>]?: boolean;\n} & {\n  SCHEDULED_QUERIES?: ScheduleQueriesProps;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ndeclare global {\n  interface Window {\n    featureFlags: FeatureFlagMap;\n  }\n}\n\nexport function isFeatureEnabled(feature: FeatureFlag) {\n  return window && window.featureFlags && !!window.featureFlags[feature];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/**\n * Remove duplicate items from a list.\n */\nexport function removeDuplicates<T>(\n  items: T[],\n  hash?: (item: T) => unknown,\n): T[] {\n  if (hash) {\n    const seen = new Set();\n    return items.filter(x => {\n      const itemHash = hash(x);\n      if (seen.has(itemHash)) return false;\n      seen.add(itemHash);\n      return true;\n    });\n  }\n  return [...new Set(items)];\n}\n\nexport default removeDuplicates;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetError } from 'src/components/ErrorMessage/types';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport { ToastType } from 'src/components/MessageToasts/types';\nimport { Dataset } from '@superset-ui/chart-controls';\nimport { Query, QueryResponse } from '@superset-ui/core';\nimport { ExploreRootState } from 'src/explore/types';\n\nexport type ExploreDatasource = Dataset | QueryResponse;\n\nexport interface QueryEditor {\n  dbId?: number;\n  title: string;\n  schema: string;\n  autorun: boolean;\n  sql: string;\n  remoteId: number | null;\n  validationResult?: {\n    completed: boolean;\n    errors: SupersetError[];\n  };\n}\n\nexport type toastState = {\n  id: string;\n  toastType: ToastType;\n  text: string;\n  duration: number;\n  noDuplicate: boolean;\n};\n\nexport type SqlLabRootState = {\n  sqlLab: {\n    activeSouthPaneTab: string | number; // default is string; action.newQuery.id is number\n    alerts: any[];\n    databases: Record<string, any>;\n    dbConnect: boolean;\n    offline: boolean;\n    queries: Query[];\n    queryEditors: QueryEditor[];\n    tabHistory: string[]; // default is activeTab ? [activeTab.id.toString()] : []\n    tables: Record<string, any>[];\n    queriesLastUpdate: number;\n    user: UserWithPermissionsAndRoles;\n    errorMessage: string | null;\n  };\n  localStorageUsageInKilobytes: number;\n  messageToasts: toastState[];\n  common: {};\n};\n\nexport type SqlLabExploreRootState = SqlLabRootState | ExploreRootState;\n\nexport const getInitialState = (state: SqlLabExploreRootState) => {\n  if (state.hasOwnProperty('sqlLab')) {\n    const {\n      sqlLab: { user },\n    } = state as SqlLabRootState;\n    return user;\n  }\n\n  const {\n    explore: { user },\n  } = state as ExploreRootState;\n  return user;\n};\n\nexport enum DatasetRadioState {\n  SAVE_NEW = 1,\n  OVERWRITE_DATASET = 2,\n}\n\nexport const EXPLORE_CHART_DEFAULT = {\n  metrics: [],\n  groupby: [],\n  time_range: 'No filter',\n  viz_type: 'table',\n};\n\nexport interface DatasetOwner {\n  first_name: string;\n  id: number;\n  last_name: string;\n  username: string;\n}\n\nexport interface DatasetOptionAutocomplete {\n  value: string;\n  datasetId: number;\n  owners: [DatasetOwner];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { FunctionComponent, useState } from 'react';\nimport { Radio } from 'src/components/Radio';\nimport { AutoComplete, RadioChangeEvent } from 'src/components';\nimport { Input } from 'src/components/Input';\nimport StyledModal from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport {\n  styled,\n  t,\n  SupersetClient,\n  makeApi,\n  JsonResponse,\n  JsonObject,\n  QueryResponse,\n} from '@superset-ui/core';\nimport { useSelector, useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport rison from 'rison';\nimport { createDatasource } from 'src/SqlLab/actions/sqlLab';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { UserWithPermissionsAndRoles as User } from 'src/types/bootstrapTypes';\nimport {\n  DatasetRadioState,\n  EXPLORE_CHART_DEFAULT,\n  DatasetOwner,\n  DatasetOptionAutocomplete,\n  SqlLabExploreRootState,\n  getInitialState,\n  ExploreDatasource,\n} from 'src/SqlLab/types';\nimport { exploreChart } from 'src/explore/exploreUtils';\n\ninterface SaveDatasetModalProps {\n  visible: boolean;\n  onHide: () => void;\n  buttonTextOnSave: string;\n  buttonTextOnOverwrite: string;\n  modalDescription?: string;\n  datasource: ExploreDatasource;\n}\n\nconst Styles = styled.div`\n  .sdm-body {\n    margin: 0 8px;\n  }\n  .sdm-input {\n    margin-left: 45px;\n    width: 401px;\n  }\n  .sdm-autocomplete {\n    margin-left: 8px;\n    width: 401px;\n  }\n  .sdm-radio {\n    display: block;\n    height: 30px;\n    margin: 10px 0px;\n    line-height: 30px;\n  }\n  .sdm-overwrite-msg {\n    margin: 7px;\n  }\n`;\n\nconst updateDataset = async (\n  dbId: number,\n  datasetId: number,\n  sql: string,\n  columns: Array<Record<string, any>>,\n  owners: [number],\n  overrideColumns: boolean,\n) => {\n  const endpoint = `api/v1/dataset/${datasetId}?override_columns=${overrideColumns}`;\n  const headers = { 'Content-Type': 'application/json' };\n  const body = JSON.stringify({\n    sql,\n    columns,\n    owners,\n    database_id: dbId,\n  });\n\n  const data: JsonResponse = await SupersetClient.put({\n    endpoint,\n    headers,\n    body,\n  });\n  return data.json.result;\n};\n\n// eslint-disable-next-line no-empty-pattern\nexport const SaveDatasetModal: FunctionComponent<SaveDatasetModalProps> = ({\n  visible,\n  onHide,\n  buttonTextOnSave,\n  buttonTextOnOverwrite,\n  modalDescription,\n  datasource,\n}) => {\n  const query = datasource as QueryResponse;\n  const getDefaultDatasetName = () =>\n    `${query.tab} ${moment().format('MM/DD/YYYY HH:mm:ss')}`;\n  const [datasetName, setDatasetName] = useState(getDefaultDatasetName());\n  const [newOrOverwrite, setNewOrOverwrite] = useState(\n    DatasetRadioState.SAVE_NEW,\n  );\n  const [shouldOverwriteDataset, setShouldOverwriteDataset] = useState(false);\n  const [userDatasetOptions, setUserDatasetOptions] = useState<\n    DatasetOptionAutocomplete[]\n  >([]);\n  const [datasetToOverwrite, setDatasetToOverwrite] = useState<\n    Record<string, any>\n  >({});\n  const [autocompleteValue, setAutocompleteValue] = useState('');\n\n  const user = useSelector<SqlLabExploreRootState, User>(user =>\n    getInitialState(user),\n  );\n  const dispatch = useDispatch<(dispatch: any) => Promise<JsonObject>>();\n\n  const handleOverwriteDataset = async () => {\n    await updateDataset(\n      query.dbId,\n      datasetToOverwrite.datasetId,\n      query.sql,\n      query.results.selected_columns.map(\n        (d: { name: string; type: string; is_dttm: boolean }) => ({\n          column_name: d.name,\n          type: d.type,\n          is_dttm: d.is_dttm,\n        }),\n      ),\n      datasetToOverwrite.owners.map((o: DatasetOwner) => o.id),\n      true,\n    );\n\n    setShouldOverwriteDataset(false);\n    setDatasetToOverwrite({});\n    setDatasetName(getDefaultDatasetName());\n\n    exploreChart({\n      ...EXPLORE_CHART_DEFAULT,\n      datasource: `${datasetToOverwrite.datasetId}__table`,\n      all_columns: query.results.selected_columns.map(\n        (d: { name: string; type: string; is_dttm: boolean }) => d.name,\n      ),\n    });\n  };\n\n  const getUserDatasets = async (searchText = '') => {\n    // Making sure that autocomplete input has a value before rendering the dropdown\n    // Transforming the userDatasetsOwned data for SaveModalComponent)\n    const { userId } = user;\n    if (userId) {\n      const queryParams = rison.encode({\n        filters: [\n          {\n            col: 'table_name',\n            opr: 'ct',\n            value: searchText,\n          },\n          {\n            col: 'owners',\n            opr: 'rel_m_m',\n            value: userId,\n          },\n        ],\n        order_column: 'changed_on_delta_humanized',\n        order_direction: 'desc',\n      });\n\n      const response = await makeApi({\n        method: 'GET',\n        endpoint: '/api/v1/dataset',\n      })(`q=${queryParams}`);\n\n      return response.result.map(\n        (r: { table_name: string; id: number; owners: [DatasetOwner] }) => ({\n          value: r.table_name,\n          datasetId: r.id,\n          owners: r.owners,\n        }),\n      );\n    }\n\n    return null;\n  };\n\n  const handleSaveInDataset = () => {\n    // if user wants to overwrite a dataset we need to prompt them\n    if (newOrOverwrite === DatasetRadioState.OVERWRITE_DATASET) {\n      setShouldOverwriteDataset(true);\n      return;\n    }\n\n    const selectedColumns = query.results.selected_columns || [];\n\n    // The filters param is only used to test jinja templates.\n    // Remove the special filters entry from the templateParams\n    // before saving the dataset.\n    if (query.templateParams) {\n      const p = JSON.parse(query.templateParams);\n      /* eslint-disable-next-line no-underscore-dangle */\n      if (p._filters) {\n        /* eslint-disable-next-line no-underscore-dangle */\n        delete p._filters;\n        // eslint-disable-next-line no-param-reassign\n        query.templateParams = JSON.stringify(p);\n      }\n    }\n\n    dispatch(\n      createDatasource({\n        schema: query.schema,\n        sql: query.sql,\n        dbId: query.dbId,\n        templateParams: query.templateParams,\n        datasourceName: datasetName,\n        columns: selectedColumns,\n      }),\n    )\n      .then((data: { table_id: number }) => {\n        exploreChart({\n          datasource: `${data.table_id}__table`,\n          metrics: [],\n          groupby: [],\n          time_range: 'No filter',\n          viz_type: 'table',\n          all_columns: selectedColumns.map(c => c.name),\n          row_limit: 1000,\n        });\n      })\n      .catch(() => {\n        addDangerToast(t('An error occurred saving dataset'));\n      });\n\n    setDatasetName(getDefaultDatasetName());\n    onHide();\n  };\n\n  const handleSaveDatasetModalSearch = async (searchText: string) => {\n    const userDatasetsOwned = await getUserDatasets(searchText);\n    setUserDatasetOptions(userDatasetsOwned);\n  };\n\n  const handleOverwriteDatasetOption = (\n    _data: string,\n    option: Record<string, any>,\n  ) => setDatasetToOverwrite(option);\n\n  const handleDatasetNameChange = (e: React.FormEvent<HTMLInputElement>) => {\n    // @ts-expect-error\n    setDatasetName(e.target.value);\n  };\n\n  const handleOverwriteCancel = () => {\n    setShouldOverwriteDataset(false);\n    setDatasetToOverwrite({});\n  };\n\n  const disableSaveAndExploreBtn =\n    (newOrOverwrite === DatasetRadioState.SAVE_NEW &&\n      datasetName.length === 0) ||\n    (newOrOverwrite === DatasetRadioState.OVERWRITE_DATASET &&\n      Object.keys(datasetToOverwrite).length === 0 &&\n      autocompleteValue.length === 0);\n\n  const filterAutocompleteOption = (\n    inputValue: string,\n    option: { value: string; datasetId: number },\n  ) => option.value.toLowerCase().includes(inputValue.toLowerCase());\n\n  return (\n    <StyledModal\n      show={visible}\n      title={t('Save or Overwrite Dataset')}\n      onHide={onHide}\n      footer={\n        <>\n          {!shouldOverwriteDataset && (\n            <Button\n              disabled={disableSaveAndExploreBtn}\n              buttonStyle=\"primary\"\n              onClick={handleSaveInDataset}\n            >\n              {buttonTextOnSave}\n            </Button>\n          )}\n          {shouldOverwriteDataset && (\n            <>\n              <Button onClick={handleOverwriteCancel}>Back</Button>\n              <Button\n                className=\"md\"\n                buttonStyle=\"primary\"\n                onClick={handleOverwriteDataset}\n                disabled={disableSaveAndExploreBtn}\n              >\n                {buttonTextOnOverwrite}\n              </Button>\n            </>\n          )}\n        </>\n      }\n    >\n      <Styles>\n        {!shouldOverwriteDataset && (\n          <div className=\"sdm-body\">\n            {modalDescription && (\n              <div className=\"sdm-prompt\">{modalDescription}</div>\n            )}\n            <Radio.Group\n              onChange={(e: RadioChangeEvent) => {\n                setNewOrOverwrite(Number(e.target.value));\n              }}\n              value={newOrOverwrite}\n            >\n              <Radio className=\"sdm-radio\" value={1}>\n                {t('Save as new')}\n                <Input\n                  className=\"sdm-input\"\n                  defaultValue={datasetName}\n                  onChange={handleDatasetNameChange}\n                  disabled={newOrOverwrite !== 1}\n                />\n              </Radio>\n              <Radio className=\"sdm-radio\" value={2}>\n                {t('Overwrite existing')}\n                <AutoComplete\n                  className=\"sdm-autocomplete\"\n                  options={userDatasetOptions}\n                  onSelect={handleOverwriteDatasetOption}\n                  onSearch={handleSaveDatasetModalSearch}\n                  onChange={value => {\n                    setDatasetToOverwrite({});\n                    setAutocompleteValue(value);\n                  }}\n                  placeholder={t('Select or type dataset name')}\n                  filterOption={filterAutocompleteOption}\n                  disabled={newOrOverwrite !== 2}\n                  value={autocompleteValue}\n                />\n              </Radio>\n            </Radio.Group>\n          </div>\n        )}\n        {shouldOverwriteDataset && (\n          <div className=\"sdm-overwrite-msg\">\n            {t('Are you sure you want to overwrite this dataset?')}\n          </div>\n        )}\n      </Styles>\n    </StyledModal>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport const STATE_TYPE_MAP = {\n  offline: 'danger',\n  failed: 'danger',\n  pending: 'info',\n  fetching: 'info',\n  running: 'warning',\n  stopped: 'danger',\n  success: 'success',\n};\n\nexport const STATUS_OPTIONS = {\n  success: 'success',\n  failed: 'failed',\n  running: 'running',\n  offline: 'offline',\n  pending: 'pending',\n};\n\nexport const TIME_OPTIONS = [\n  'now',\n  '1 hour ago',\n  '1 day ago',\n  '7 days ago',\n  '28 days ago',\n  '90 days ago',\n  '1 year ago',\n];\n\n// SqlEditor layout constants\nexport const SQL_EDITOR_GUTTER_HEIGHT = 5;\nexport const SQL_EDITOR_GUTTER_MARGIN = 3;\nexport const SQL_TOOLBAR_HEIGHT = 51;\n\n// kilobyte storage\nexport const KB_STORAGE = 1024;\nexport const BYTES_PER_CHAR = 2;\n\n// browser's localStorage max usage constants\nexport const LOCALSTORAGE_MAX_QUERY_AGE_MS = 24 * 60 * 60 * 1000; // 24 hours\nexport const LOCALSTORAGE_MAX_USAGE_KB = 5 * 1024; // 5M\nexport const LOCALSTORAGE_WARNING_THRESHOLD = 0.9;\nexport const LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS = 8000; // danger type toast duration\n\n// autocomplete score weights\nexport const SQL_KEYWORD_AUTOCOMPLETE_SCORE = 100;\nexport const SQL_FUNCTIONS_AUTOCOMPLETE_SCORE = 90;\nexport const SCHEMA_AUTOCOMPLETE_SCORE = 60;\nexport const TABLE_AUTOCOMPLETE_SCORE = 55;\nexport const COLUMN_AUTOCOMPLETE_SCORE = 50;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SQL_KEYWORD_AUTOCOMPLETE_SCORE } from '../constants';\n\nconst SQL_KEYWORDS = [\n  'AND',\n  'AS',\n  'ASC',\n  'AVG',\n  'BY',\n  'CASE',\n  'COUNT',\n  'CREATE',\n  'CROSS',\n  'DATABASE',\n  'DEFAULT',\n  'DELETE',\n  'DESC',\n  'DISTINCT',\n  'DROP',\n  'ELSE',\n  'END',\n  'FOREIGN',\n  'FROM',\n  'GRANT',\n  'GROUP',\n  'HAVING',\n  'IF',\n  'INNER',\n  'INSERT',\n  'JOIN',\n  'KEY',\n  'LEFT',\n  'LIMIT',\n  'MAX',\n  'MIN',\n  'NATURAL',\n  'NOT',\n  'NULL',\n  'OFFSET',\n  'ON',\n  'OR',\n  'ORDER',\n  'OUTER',\n  'PRIMARY',\n  'REFERENCES',\n  'RIGHT',\n  'SELECT',\n  'SUM',\n  'TABLE',\n  'THEN',\n  'TYPE',\n  'UNION',\n  'UPDATE',\n  'WHEN',\n  'WHERE',\n];\n\nconst SQL_DATA_TYPES = [\n  'BIGINT',\n  'BINARY',\n  'BIT',\n  'CHAR',\n  'DATE',\n  'DECIMAL',\n  'DOUBLE',\n  'FLOAT',\n  'INT',\n  'INTEGER',\n  'MONEY',\n  'NUMBER',\n  'NUMERIC',\n  'REAL',\n  'SET',\n  'TEXT',\n  'TIMESTAMP',\n  'VARCHAR',\n];\n\nconst allKeywords = SQL_KEYWORDS.concat(SQL_DATA_TYPES);\n\nconst sqlKeywords = allKeywords.map(keyword => ({\n  meta: 'sql',\n  name: keyword,\n  score: SQL_KEYWORD_AUTOCOMPLETE_SCORE,\n  value: keyword,\n}));\n\nexport default sqlKeywords;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { PropsWithChildren } from 'react';\nimport AntdAlert, { AlertProps as AntdAlertProps } from 'antd/lib/alert';\nimport { useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nexport type AlertProps = PropsWithChildren<\n  AntdAlertProps & { roomBelow?: boolean }\n>;\n\nexport default function Alert(props: AlertProps) {\n  const {\n    type = 'info',\n    description,\n    showIcon = true,\n    closable = true,\n    roomBelow = false,\n    children,\n  } = props;\n\n  const theme = useTheme();\n  const { colors, typography, gridUnit } = theme;\n  const { alert, error, info, success } = colors;\n\n  let baseColor = info;\n  let AlertIcon = Icons.InfoSolid;\n  if (type === 'error') {\n    baseColor = error;\n    AlertIcon = Icons.ErrorSolid;\n  } else if (type === 'warning') {\n    baseColor = alert;\n    AlertIcon = Icons.AlertSolid;\n  } else if (type === 'success') {\n    baseColor = success;\n    AlertIcon = Icons.CircleCheckSolid;\n  }\n\n  return (\n    <AntdAlert\n      role=\"alert\"\n      showIcon={showIcon}\n      icon={<AlertIcon aria-label={`${type} icon`} />}\n      closeText={closable && <Icons.XSmall aria-label=\"close icon\" />}\n      css={{\n        marginBottom: roomBelow ? gridUnit * 4 : 0,\n        padding: `${gridUnit * 2}px ${gridUnit * 3}px`,\n        alignItems: 'flex-start',\n        border: 0,\n        backgroundColor: baseColor.light2,\n        '& .ant-alert-icon': {\n          marginRight: gridUnit * 2,\n        },\n        '& .ant-alert-message': {\n          color: baseColor.dark2,\n          fontSize: typography.sizes.m,\n          fontWeight: description\n            ? typography.weights.bold\n            : typography.weights.normal,\n        },\n        '& .ant-alert-description': {\n          color: baseColor.dark2,\n          fontSize: typography.sizes.m,\n        },\n      }}\n      {...props}\n    >\n      {children}\n    </AntdAlert>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { forwardRef } from 'react';\nimport {\n  Editor as OrigEditor,\n  IEditSession,\n  Position,\n  TextMode as OrigTextMode,\n} from 'brace';\nimport AceEditor, { IAceEditorProps } from 'react-ace';\nimport { acequire } from 'ace-builds/src-noconflict/ace';\nimport AsyncEsmComponent, {\n  PlaceholderProps,\n} from 'src/components/AsyncEsmComponent';\n\nexport interface AceCompleterKeywordData {\n  name: string;\n  value: string;\n  score: number;\n  meta: string;\n}\n\nexport type TextMode = OrigTextMode & { $id: string };\n\nexport interface AceCompleter {\n  insertMatch: (\n    data?: Editor | { value: string } | string,\n    options?: AceCompleterKeywordData,\n  ) => void;\n}\n\nexport type Editor = OrigEditor & {\n  completer: AceCompleter;\n  completers: AceCompleter[];\n};\n\nexport interface AceCompleterKeyword extends AceCompleterKeywordData {\n  completer?: AceCompleter;\n}\n\n/**\n * Async loaders to import brace modules. Must manually create call `import(...)`\n * promises because webpack can only analyze async imports statically.\n */\nconst aceModuleLoaders = {\n  'mode/sql': () => import('brace/mode/sql'),\n  'mode/markdown': () => import('brace/mode/markdown'),\n  'mode/css': () => import('brace/mode/css'),\n  'mode/json': () => import('brace/mode/json'),\n  'mode/yaml': () => import('brace/mode/yaml'),\n  'mode/html': () => import('brace/mode/html'),\n  'mode/javascript': () => import('brace/mode/javascript'),\n  'theme/textmate': () => import('brace/theme/textmate'),\n  'theme/github': () => import('brace/theme/github'),\n  'ext/language_tools': () => import('brace/ext/language_tools'),\n  'ext/searchbox': () => import('brace/ext/searchbox'),\n};\n\nexport type AceModule = keyof typeof aceModuleLoaders;\n\nexport type AsyncAceEditorProps = IAceEditorProps & {\n  keywords?: AceCompleterKeyword[];\n};\n\nexport type AceEditorMode = 'sql';\nexport type AceEditorTheme = 'textmate' | 'github';\nexport type AsyncAceEditorOptions = {\n  defaultMode?: AceEditorMode;\n  defaultTheme?: AceEditorTheme;\n  defaultTabSize?: number;\n  placeholder?: React.ComponentType<\n    PlaceholderProps & Partial<IAceEditorProps>\n  > | null;\n};\n\n/**\n * Get an async AceEditor with automatical loading of specified ace modules.\n */\nexport default function AsyncAceEditor(\n  aceModules: AceModule[],\n  {\n    defaultMode,\n    defaultTheme,\n    defaultTabSize = 2,\n    placeholder,\n  }: AsyncAceEditorOptions = {},\n) {\n  return AsyncEsmComponent(async () => {\n    const { default: ReactAceEditor } = await import('react-ace');\n\n    await Promise.all(aceModules.map(x => aceModuleLoaders[x]()));\n\n    const inferredMode =\n      defaultMode ||\n      aceModules.find(x => x.startsWith('mode/'))?.replace('mode/', '');\n    const inferredTheme =\n      defaultTheme ||\n      aceModules.find(x => x.startsWith('theme/'))?.replace('theme/', '');\n\n    return forwardRef<AceEditor, AsyncAceEditorProps>(\n      function ExtendedAceEditor(\n        {\n          keywords,\n          mode = inferredMode,\n          theme = inferredTheme,\n          tabSize = defaultTabSize,\n          defaultValue = '',\n          ...props\n        },\n        ref,\n      ) {\n        if (keywords) {\n          const langTools = acequire('ace/ext/language_tools');\n          const completer = {\n            getCompletions: (\n              editor: AceEditor,\n              session: IEditSession,\n              pos: Position,\n              prefix: string,\n              callback: (error: null, wordList: object[]) => void,\n            ) => {\n              // If the prefix starts with a number, don't try to autocomplete\n              if (!Number.isNaN(parseInt(prefix, 10))) {\n                return;\n              }\n              if ((session.getMode() as TextMode).$id === `ace/mode/${mode}`) {\n                callback(null, keywords);\n              }\n            },\n          };\n          langTools.setCompleters([completer]);\n        }\n        return (\n          <ReactAceEditor\n            ref={ref}\n            mode={mode}\n            theme={theme}\n            tabSize={tabSize}\n            defaultValue={defaultValue}\n            {...props}\n          />\n        );\n      },\n    );\n  }, placeholder);\n}\n\nexport const SQLEditor = AsyncAceEditor([\n  'mode/sql',\n  'theme/github',\n  'ext/language_tools',\n  'ext/searchbox',\n]);\n\nexport const FullSQLEditor = AsyncAceEditor(\n  ['mode/sql', 'theme/github', 'ext/language_tools', 'ext/searchbox'],\n  {\n    // a custom placeholder in SQL lab for less jumpy re-renders\n    placeholder: () => {\n      const gutterBackground = '#e8e8e8'; // from ace-github theme\n      return (\n        <div\n          style={{\n            height: '100%',\n          }}\n        >\n          <div\n            style={{ width: 41, height: '100%', background: gutterBackground }}\n          />\n          {/* make it possible to resize the placeholder */}\n          <div className=\"ace_content\" />\n        </div>\n      );\n    },\n  },\n);\n\nexport const MarkdownEditor = AsyncAceEditor([\n  'mode/markdown',\n  'theme/textmate',\n]);\n\nexport const TextAreaEditor = AsyncAceEditor([\n  'mode/markdown',\n  'mode/sql',\n  'mode/json',\n  'mode/html',\n  'mode/javascript',\n  'theme/textmate',\n]);\n\nexport const CssEditor = AsyncAceEditor(['mode/css', 'theme/github']);\n\nexport const JsonEditor = AsyncAceEditor(['mode/json', 'theme/github']);\n\n/**\n * JSON or Yaml config editor.\n */\nexport const ConfigEditor = AsyncAceEditor([\n  'mode/json',\n  'mode/yaml',\n  'theme/github',\n]);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  CSSProperties,\n  useEffect,\n  useState,\n  RefObject,\n  forwardRef,\n} from 'react';\nimport Loading from '../Loading';\n\nexport type PlaceholderProps = {\n  showLoadingForImport?: boolean;\n  width?: string | number;\n  height?: string | number;\n  placeholderStyle?: CSSProperties;\n} & {\n  [key: string]: any;\n};\n\nfunction DefaultPlaceholder({\n  width,\n  height,\n  showLoadingForImport = false,\n  placeholderStyle: style,\n}: PlaceholderProps) {\n  return (\n    // since `width` defaults to 100%, we can display the placeholder once\n    // height is specified.\n    (height && (\n      <div key=\"async-asm-placeholder\" style={{ width, height, ...style }}>\n        {showLoadingForImport && <Loading position=\"floating\" />}\n      </div>\n    )) ||\n    // `|| null` is for in case of height=0.\n    null\n  );\n}\n\n/**\n * Asynchronously import an ES module as a React component, render a placeholder\n * first (if provided) and re-render once import is complete.\n */\nexport default function AsyncEsmComponent<\n  P = PlaceholderProps,\n  M = React.ComponentType<P> | { default: React.ComponentType<P> },\n>(\n  /**\n   * A promise generator that returns the React component to render.\n   */\n  loadComponent: Promise<M> | (() => Promise<M>),\n  /**\n   * Placeholder while still importing.\n   */\n  placeholder: React.ComponentType<\n    PlaceholderProps & Partial<P>\n  > | null = DefaultPlaceholder,\n) {\n  // component props + placeholder props\n  type FullProps = P & PlaceholderProps;\n  let promise: Promise<M> | undefined;\n  let component: React.ComponentType<FullProps>;\n\n  /**\n   * Safely wait for promise, make sure the loader function only execute once.\n   */\n  function waitForPromise() {\n    if (!promise) {\n      // load component on initialization\n      promise =\n        loadComponent instanceof Promise ? loadComponent : loadComponent();\n    }\n    if (!component) {\n      promise.then(result => {\n        component = ((result as { default?: React.ComponentType<P> }).default ||\n          result) as React.ComponentType<FullProps>;\n      });\n    }\n    return promise;\n  }\n\n  type AsyncComponent = React.ForwardRefExoticComponent<\n    React.PropsWithoutRef<FullProps> &\n      React.RefAttributes<React.ComponentType<FullProps>>\n  > & {\n    preload?: typeof waitForPromise;\n  };\n\n  const AsyncComponent: AsyncComponent = forwardRef(function AsyncComponent(\n    props: FullProps,\n    ref: RefObject<React.ComponentType<FullProps>>,\n  ) {\n    const [loaded, setLoaded] = useState(component !== undefined);\n    useEffect(() => {\n      let isMounted = true;\n      if (!loaded) {\n        // update state to trigger a re-render\n        waitForPromise().then(() => {\n          if (isMounted) {\n            setLoaded(true);\n          }\n        });\n      }\n      return () => {\n        isMounted = false;\n      };\n    });\n    const Component = component || placeholder;\n    return Component ? (\n      // placeholder does not get the ref\n      <Component ref={Component === component ? ref : null} {...props} />\n    ) : null;\n  });\n  // preload the async component before rendering\n  AsyncComponent.preload = waitForPromise;\n\n  return AsyncComponent as AsyncComponent & {\n    preload: typeof waitForPromise;\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { Collapse as AntdCollapse } from 'antd';\nimport { CollapseProps as AntdCollapseProps } from 'antd/lib/collapse';\n\nexport interface CollapseProps extends AntdCollapseProps {\n  light?: boolean;\n  bigger?: boolean;\n  bold?: boolean;\n  animateArrows?: boolean;\n}\n\nconst Collapse = Object.assign(\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  styled(({ light, bigger, bold, animateArrows, ...props }: CollapseProps) => (\n    <AntdCollapse {...props} />\n  ))`\n    .ant-collapse-item {\n      .ant-collapse-header {\n        font-weight: ${({ bold, theme }) =>\n          bold\n            ? theme.typography.weights.bold\n            : theme.typography.weights.normal};\n        font-size: ${({ bigger, theme }) =>\n          bigger ? `${theme.gridUnit * 4}px` : 'inherit'};\n\n        .ant-collapse-arrow svg {\n          transition: ${({ animateArrows }) =>\n            animateArrows ? 'transform 0.24s' : 'none'};\n        }\n\n        ${({ expandIconPosition }) =>\n          expandIconPosition &&\n          expandIconPosition === 'right' &&\n          `\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(90deg) !important;\n            }\n          `}\n\n        ${({ light, theme }) =>\n          light &&\n          `\n            color: ${theme.colors.grayscale.light4};\n            .ant-collapse-arrow svg {\n              color: ${theme.colors.grayscale.light4};\n            }\n          `}\n\n        ${({ ghost, bordered, theme }) =>\n          ghost &&\n          bordered &&\n          `\n            border-bottom: 1px solid ${theme.colors.grayscale.light3};\n          `}\n      }\n      .ant-collapse-content {\n        .ant-collapse-content-box {\n          .loading.inline {\n            margin: ${({ theme }) => theme.gridUnit * 12}px auto;\n            display: block;\n          }\n        }\n      }\n    }\n    .ant-collapse-item-active {\n      .ant-collapse-header {\n        ${({ expandIconPosition }) =>\n          expandIconPosition &&\n          expandIconPosition === 'right' &&\n          `\n            .anticon.anticon-right.ant-collapse-arrow > svg {\n              transform: rotate(-90deg) !important;\n            }\n          `}\n      }\n    }\n  `,\n  {\n    Panel: AntdCollapse.Panel,\n  },\n);\n\nexport default Collapse;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode, SyntheticEvent } from 'react';\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\nimport { Empty } from 'src/components';\nimport Button from 'src/components/Button';\n\nexport enum EmptyStateSize {\n  Small,\n  Medium,\n  Big,\n}\n\nexport interface EmptyStateSmallProps {\n  title: ReactNode;\n  description?: ReactNode;\n  image: ReactNode;\n}\n\nexport interface EmptyStateProps extends EmptyStateSmallProps {\n  buttonText?: ReactNode;\n  buttonAction?: React.MouseEventHandler<HTMLElement>;\n}\n\nexport interface ImageContainerProps {\n  image: ReactNode;\n  size: EmptyStateSize;\n}\n\nconst EmptyStateContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n    padding: ${theme.gridUnit * 4}px;\n    text-align: center;\n\n    & .ant-empty-image svg {\n      width: auto;\n    }\n\n    & a,\n    & span[role='button'] {\n      color: inherit;\n      text-decoration: underline;\n      &:hover {\n        color: ${theme.colors.grayscale.base};\n      }\n    }\n  `}\n`;\n\nconst TextContainer = styled.div``;\n\nconst Title = styled.p`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.m}px;\n    color: ${theme.colors.grayscale.light1};\n    margin: ${theme.gridUnit * 2}px 0 0 0;\n    font-weight: ${theme.typography.weights.bold};\n  `}\n`;\n\nconst BigTitle = styled(Title)`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.l}px;\n    color: ${theme.colors.grayscale.light1};\n    margin-top: ${theme.gridUnit * 4}px;\n  `}\n`;\n\nconst Description = styled.p`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.s}px;\n    color: ${theme.colors.grayscale.light1};\n    margin: ${theme.gridUnit * 2}px 0 0 0;\n  `}\n`;\n\nconst BigDescription = styled(Description)`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.m}px;\n  `}\n`;\n\nconst SmallDescription = styled(Description)`\n  ${({ theme }) => css`\n    margin-top: ${theme.gridUnit}px;\n    line-height: 1.2;\n  `}\n`;\n\nconst ActionButton = styled(Button)`\n  ${({ theme }) => css`\n    margin-top: ${theme.gridUnit * 4}px;\n    z-index: 1;\n  `}\n`;\n\nconst getImage = (image: string | ReactNode) =>\n  typeof image === 'string' ? `/static/assets/images/${image}` : image;\n\nconst getImageHeight = (size: EmptyStateSize) => {\n  switch (size) {\n    case EmptyStateSize.Small:\n      return { height: '50px' };\n    case EmptyStateSize.Medium:\n      return { height: '80px' };\n    case EmptyStateSize.Big:\n      return { height: '150px' };\n    default:\n      return { height: '50px' };\n  }\n};\n\nconst ImageContainer = ({ image, size }: ImageContainerProps) => (\n  <Empty\n    description={false}\n    image={getImage(image)}\n    imageStyle={getImageHeight(size)}\n  />\n);\n\nconst handleMouseDown = (e: SyntheticEvent) => {\n  e.preventDefault();\n  e.stopPropagation();\n};\n\nexport const EmptyStateBig = ({\n  title,\n  image,\n  description,\n  buttonAction,\n  buttonText,\n}: EmptyStateProps) => (\n  <EmptyStateContainer>\n    <ImageContainer image={image} size={EmptyStateSize.Big} />\n    <TextContainer\n      css={(theme: SupersetTheme) =>\n        css`\n          max-width: ${theme.gridUnit * 150}px;\n        `\n      }\n    >\n      <BigTitle>{title}</BigTitle>\n      {description && <BigDescription>{description}</BigDescription>}\n      {buttonAction && buttonText && (\n        <ActionButton\n          buttonStyle=\"primary\"\n          onClick={buttonAction}\n          onMouseDown={handleMouseDown}\n        >\n          {buttonText}\n        </ActionButton>\n      )}\n    </TextContainer>\n  </EmptyStateContainer>\n);\n\nexport const EmptyStateMedium = ({\n  title,\n  image,\n  description,\n  buttonAction,\n  buttonText,\n}: EmptyStateProps) => (\n  <EmptyStateContainer>\n    <ImageContainer image={image} size={EmptyStateSize.Medium} />\n    <TextContainer\n      css={(theme: SupersetTheme) =>\n        css`\n          max-width: ${theme.gridUnit * 100}px;\n        `\n      }\n    >\n      <Title>{title}</Title>\n      {description && <Description>{description}</Description>}\n      {buttonText && buttonAction && (\n        <ActionButton\n          buttonStyle=\"primary\"\n          onClick={buttonAction}\n          onMouseDown={handleMouseDown}\n        >\n          {buttonText}\n        </ActionButton>\n      )}\n    </TextContainer>\n  </EmptyStateContainer>\n);\n\nexport const EmptyStateSmall = ({\n  title,\n  image,\n  description,\n}: EmptyStateSmallProps) => (\n  <EmptyStateContainer>\n    <ImageContainer image={image} size={EmptyStateSize.Small} />\n    <TextContainer\n      css={(theme: SupersetTheme) =>\n        css`\n          max-width: ${theme.gridUnit * 75}px;\n        `\n      }\n    >\n      <Title>{title}</Title>\n      {description && <SmallDescription>{description}</SmallDescription>}\n    </TextContainer>\n  </EmptyStateContainer>\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport getErrorMessageComponentRegistry from './getErrorMessageComponentRegistry';\nimport { SupersetError, ErrorSource } from './types';\nimport ErrorAlert from './ErrorAlert';\n\nconst DEFAULT_TITLE = t('Unexpected error');\n\ntype Props = {\n  title?: string;\n  error?: SupersetError;\n  link?: string;\n  subtitle?: React.ReactNode;\n  copyText?: string;\n  stackTrace?: string;\n  source?: ErrorSource;\n};\n\nexport default function ErrorMessageWithStackTrace({\n  title = DEFAULT_TITLE,\n  error,\n  subtitle,\n  copyText,\n  link,\n  stackTrace,\n  source,\n}: Props) {\n  // Check if a custom error message component was registered for this message\n  if (error) {\n    const ErrorMessageComponent = getErrorMessageComponentRegistry().get(\n      error.error_type,\n    );\n    if (ErrorMessageComponent) {\n      return (\n        <ErrorMessageComponent\n          error={error}\n          source={source}\n          subtitle={subtitle}\n        />\n      );\n    }\n  }\n\n  return (\n    <ErrorAlert\n      level=\"warning\"\n      title={title}\n      subtitle={subtitle}\n      copyText={copyText}\n      source={source}\n      body={\n        link || stackTrace ? (\n          <>\n            {link && (\n              <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\n                (Request Access)\n              </a>\n            )}\n            <br />\n            {stackTrace && <pre>{stackTrace}</pre>}\n          </>\n        ) : undefined\n      }\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport Form from 'antd/lib/form';\nimport { styled } from '@superset-ui/core';\n\nconst StyledItem = styled(Form.Item)`\n  ${({ theme }) => `\n    .ant-form-item-label {\n      padding-bottom: ${theme.gridUnit}px;\n      & > label {\n        text-transform: uppercase;\n        font-size: ${theme.typography.sizes.s}px;\n        color: ${theme.colors.grayscale.base};\n\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            color: ${theme.colors.error.base};\n            font-size: ${theme.typography.sizes.s}px;\n            content: '*';\n          }\n        }\n      }\n    }\n  `}\n`;\n\nexport default StyledItem;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode } from 'react';\nimport { styled } from '@superset-ui/core';\n\nexport type FormLabelProps = {\n  children: ReactNode;\n  htmlFor?: string;\n  required?: boolean;\n  className?: string;\n};\n\nconst Label = styled.label`\n  text-transform: uppercase;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst RequiredLabel = styled.label`\n  text-transform: uppercase;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n  &::after {\n    display: inline-block;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n    color: ${({ theme }) => theme.colors.error.base};\n    font-size: ${({ theme }) => theme.typography.sizes.m}px;\n    content: '*';\n  }\n`;\n\nexport default function FormLabel({\n  children,\n  htmlFor,\n  required = false,\n  className,\n}: FormLabelProps) {\n  const StyledLabel = required ? RequiredLabel : Label;\n  return (\n    <StyledLabel htmlFor={htmlFor} className={className}>\n      {children}\n    </StyledLabel>\n  );\n}\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgError(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M12 7a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1zm0 8a1 1 0 100 2 1 1 0 000-2zm9.71-7.44l-5.27-5.27a1.05 1.05 0 00-.71-.29H8.27a1.05 1.05 0 00-.71.29L2.29 7.56a1.05 1.05 0 00-.29.71v7.46c.004.265.107.518.29.71l5.27 5.27c.192.183.445.286.71.29h7.46a1.05 1.05 0 00.71-.29l5.27-5.27a1.05 1.05 0 00.29-.71V8.27a1.05 1.05 0 00-.29-.71zM20 15.31L15.31 20H8.69L4 15.31V8.69L8.69 4h6.62L20 8.69v6.62z\",\n    fill: \"currentColor\"\n  })));\n}\n\nexport default SvgError;","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { Input, Tooltip } from 'antd';\nimport { EyeInvisibleOutlined, EyeOutlined } from '@ant-design/icons';\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport errorIcon from 'src/assets/images/icons/error.svg';\nimport FormItem from './FormItem';\nimport FormLabel from './FormLabel';\n\nexport interface LabeledErrorBoundInputProps {\n  label?: string;\n  validationMethods:\n    | { onBlur: (value: any) => void }\n    | { onChange: (value: any) => void };\n  errorMessage?: string | null;\n  helpText?: string;\n  required?: boolean;\n  hasTooltip?: boolean;\n  tooltipText?: string | null;\n  id?: string;\n  classname?: string;\n  [x: string]: any;\n}\n\nconst StyledInput = styled(Input)`\n  margin: ${({ theme }) => `${theme.gridUnit}px 0 ${theme.gridUnit * 2}px`};\n`;\n\nconst StyledInputPassword = styled(Input.Password)`\n  margin: ${({ theme }) => `${theme.gridUnit}px 0 ${theme.gridUnit * 2}px`};\n`;\n\nconst alertIconStyles = (theme: SupersetTheme, hasError: boolean) => css`\n  .ant-form-item-children-icon {\n    display: none;\n  }\n  ${hasError &&\n  `.ant-form-item-control-input-content {\n      position: relative;\n      &:after {\n        content: ' ';\n        display: inline-block;\n        background: ${theme.colors.error.base};\n        mask: url(${errorIcon});\n        mask-size: cover;\n        width: ${theme.gridUnit * 4}px;\n        height: ${theme.gridUnit * 4}px;\n        position: absolute;\n        right: ${theme.gridUnit * 1.25}px;\n        top: ${theme.gridUnit * 2.75}px;\n      }\n    }`}\n`;\n\nconst StyledFormGroup = styled('div')`\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  margin-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  .ant-form-item {\n    margin-bottom: 0;\n  }\n`;\n\nconst StyledAlignment = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledFormLabel = styled(FormLabel)`\n  margin-bottom: 0;\n`;\n\nconst LabeledErrorBoundInput = ({\n  label,\n  validationMethods,\n  errorMessage,\n  helpText,\n  required = false,\n  hasTooltip = false,\n  tooltipText,\n  id,\n  className,\n  ...props\n}: LabeledErrorBoundInputProps) => (\n  <StyledFormGroup className={className}>\n    <StyledAlignment>\n      <StyledFormLabel htmlFor={id} required={required}>\n        {label}\n      </StyledFormLabel>\n      {hasTooltip && (\n        <InfoTooltip tooltip={`${tooltipText}`} viewBox=\"0 -1 24 24\" />\n      )}\n    </StyledAlignment>\n    <FormItem\n      css={(theme: SupersetTheme) => alertIconStyles(theme, !!errorMessage)}\n      validateTrigger={Object.keys(validationMethods)}\n      validateStatus={errorMessage ? 'error' : 'success'}\n      help={errorMessage || helpText}\n      hasFeedback={!!errorMessage}\n    >\n      {props.name === 'password' ? (\n        <StyledInputPassword\n          {...props}\n          {...validationMethods}\n          iconRender={visible =>\n            visible ? (\n              <Tooltip title=\"Hide password.\">\n                <EyeInvisibleOutlined />\n              </Tooltip>\n            ) : (\n              <Tooltip title=\"Show password.\">\n                <EyeOutlined />\n              </Tooltip>\n            )\n          }\n          role=\"textbox\"\n        />\n      ) : (\n        <StyledInput {...props} {...validationMethods} />\n      )}\n    </FormItem>\n  </StyledFormGroup>\n);\n\nexport default LabeledErrorBoundInput;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport AntdForm, { FormProps } from 'antd/lib/form';\nimport { styled } from '@superset-ui/core';\n\nconst StyledForm = styled(AntdForm)`\n  &.ant-form label {\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  }\n  .ant-form-item {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n`;\n\nexport default function Form(props: FormProps) {\n  return <StyledForm {...props} />;\n}\n\nexport type { FormProps };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\n\nexport interface InfoTooltipProps {\n  className?: string;\n  tooltip: string;\n  placement?:\n    | 'bottom'\n    | 'left'\n    | 'right'\n    | 'top'\n    | 'topLeft'\n    | 'topRight'\n    | 'bottomLeft'\n    | 'bottomRight'\n    | 'leftTop'\n    | 'leftBottom'\n    | 'rightTop'\n    | 'rightBottom'\n    | undefined;\n  trigger?: string | Array<string>;\n  overlayStyle?: any;\n  bgColor?: string;\n  viewBox?: string;\n}\n\nconst StyledTooltip = styled(Tooltip)`\n  cursor: pointer;\n  path:first-of-type {\n    fill: ${({ theme }) => theme.colors.grayscale.base};\n  }\n`;\n\nconst StyledTooltipTitle = styled.span`\n  display: -webkit-box;\n  -webkit-line-clamp: 20;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst defaultOverlayStyle = {\n  fontSize: '12px',\n  lineHeight: '16px',\n};\n\nconst defaultColor = 'rgba(0,0,0,0.9)';\n\nexport default function InfoTooltip({\n  tooltip,\n  placement = 'right',\n  trigger = 'hover',\n  overlayStyle = defaultOverlayStyle,\n  bgColor = defaultColor,\n  viewBox = '0 -2 24 24',\n}: InfoTooltipProps) {\n  return (\n    <StyledTooltip\n      title={<StyledTooltipTitle>{tooltip}</StyledTooltipTitle>}\n      placement={placement}\n      trigger={trigger}\n      overlayStyle={overlayStyle}\n      color={bgColor}\n    >\n      <Icons.InfoSolidSmall className=\"info-solid-small\" viewBox={viewBox} />\n    </StyledTooltip>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { Input as AntdInput, InputNumber as AntdInputNumber } from 'antd';\n\nexport const Input = styled(AntdInput)`\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light3};\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n`;\n\nexport const InputNumber = styled(AntdInputNumber)`\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light3};\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n`;\n\nexport const TextArea = styled(AntdInput.TextArea)`\n  border: 1px solid ${({ theme }) => theme.colors.secondary.light3};\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { Menu as AntdMenu } from 'antd';\n\nconst MenuItem = styled(AntdMenu.Item)`\n  > a {\n    text-decoration: none;\n  }\n\n  &.ant-menu-item {\n    height: ${({ theme }) => theme.gridUnit * 8}px;\n    line-height: ${({ theme }) => theme.gridUnit * 8}px;\n    a {\n      border-bottom: none;\n      transition: background-color ${({ theme }) => theme.transitionTiming}s;\n      &:after {\n        content: '';\n        position: absolute;\n        bottom: -3px;\n        left: 50%;\n        width: 0;\n        height: 3px;\n        opacity: 0;\n        transform: translateX(-50%);\n        transition: all ${({ theme }) => theme.transitionTiming}s;\n        background-color: ${({ theme }) => theme.colors.primary.base};\n      }\n      &:focus {\n        border-bottom: none;\n        background-color: transparent;\n        @media (max-width: 767px) {\n          background-color: ${({ theme }) => theme.colors.primary.light5};\n        }\n      }\n    }\n  }\n\n  &.ant-menu-item,\n  &.ant-dropdown-menu-item {\n    span[role='button'] {\n      display: inline-block;\n      width: 100%;\n    }\n    transition-duration: 0s;\n  }\n`;\n\nconst StyledNav = styled(AntdMenu)`\n  line-height: 51px;\n  border: none;\n\n  & > .ant-menu-item,\n  & > .ant-menu-submenu {\n    vertical-align: inherit;\n    &:hover {\n      color: ${({ theme }) => theme.colors.grayscale.dark1};\n    }\n  }\n\n  &:not(.ant-menu-dark) > .ant-menu-submenu,\n  &:not(.ant-menu-dark) > .ant-menu-item {\n    &:hover {\n      border-bottom: none;\n    }\n  }\n\n  &:not(.ant-menu-dark) > .ant-menu-submenu,\n  &:not(.ant-menu-dark) > .ant-menu-item {\n    margin: 0px;\n  }\n\n  & > .ant-menu-item > a {\n    padding: ${({ theme }) => theme.gridUnit * 4}px;\n  }\n`;\n\nconst StyledSubMenu = styled(AntdMenu.SubMenu)`\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\n  border-bottom: none;\n  .ant-menu-submenu-open,\n  .ant-menu-submenu-active {\n    background-color: ${({ theme }) => theme.colors.primary.light5};\n    .ant-menu-submenu-title {\n      color: ${({ theme }) => theme.colors.grayscale.dark1};\n      background-color: ${({ theme }) => theme.colors.primary.light5};\n      border-bottom: none;\n      margin: 0;\n      &:after {\n        opacity: 1;\n        width: calc(100% - 1);\n      }\n    }\n  }\n  .ant-menu-submenu-title {\n    position: relative;\n    top: ${({ theme }) => -theme.gridUnit - 3}px;\n    &:after {\n      content: '';\n      position: absolute;\n      bottom: -3px;\n      left: 50%;\n      width: 0;\n      height: 3px;\n      opacity: 0;\n      transform: translateX(-50%);\n      transition: all ${({ theme }) => theme.transitionTiming}s;\n      background-color: ${({ theme }) => theme.colors.primary.base};\n    }\n  }\n  .ant-menu-submenu-arrow {\n    top: 67%;\n  }\n  & > .ant-menu-submenu-title {\n    padding: 0 ${({ theme }) => theme.gridUnit * 6}px 0\n      ${({ theme }) => theme.gridUnit * 3}px !important;\n    span[role='img'] {\n      position: absolute;\n      right: ${({ theme }) => -theme.gridUnit + -2}px;\n      top: ${({ theme }) => theme.gridUnit * 5.25}px;\n      svg {\n        font-size: ${({ theme }) => theme.gridUnit * 6}px;\n        color: ${({ theme }) => theme.colors.grayscale.base};\n      }\n    }\n    & > span {\n      position: relative;\n      top: 7px;\n    }\n    &:hover {\n      color: ${({ theme }) => theme.colors.primary.base};\n    }\n  }\n`;\n\nexport declare type MenuMode =\n  | 'vertical'\n  | 'vertical-left'\n  | 'vertical-right'\n  | 'horizontal'\n  | 'inline';\n\nexport const Menu = Object.assign(AntdMenu, {\n  Item: MenuItem,\n});\n\nexport const MainNav = Object.assign(StyledNav, {\n  Item: MenuItem,\n  SubMenu: StyledSubMenu,\n  Divider: AntdMenu.Divider,\n  ItemGroup: AntdMenu.ItemGroup,\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport { Radio as AntdRadio } from 'antd';\n\nconst StyledRadio = styled(AntdRadio)`\n  .ant-radio-inner {\n    top: -1px;\n    left: 2px;\n    width: ${({ theme }) => theme.gridUnit * 4}px;\n    height: ${({ theme }) => theme.gridUnit * 4}px;\n    border-width: 2px;\n    border-color: ${({ theme }) => theme.colors.grayscale.light2};\n  }\n\n  .ant-radio.ant-radio-checked {\n    .ant-radio-inner {\n      border-width: ${({ theme }) => theme.gridUnit + 1}px;\n      border-color: ${({ theme }) => theme.colors.primary.base};\n    }\n\n    .ant-radio-inner::after {\n      background-color: ${({ theme }) => theme.colors.grayscale.light5};\n      top: 0;\n      left: 0;\n      width: ${({ theme }) => theme.gridUnit + 2}px;\n      height: ${({ theme }) => theme.gridUnit + 2}px;\n    }\n  }\n\n  .ant-radio:hover,\n  .ant-radio:focus {\n    .ant-radio-inner {\n      border-color: ${({ theme }) => theme.colors.primary.dark1};\n    }\n  }\n`;\nconst StyledGroup = styled(AntdRadio.Group)`\n  font-size: inherit;\n`;\n\nexport const Radio = Object.assign(StyledRadio, {\n  Group: StyledGroup,\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { useTheme, SafeMarkdown } from '@superset-ui/core';\nimport Icons, { IconType } from 'src/components/Icons';\nimport { Tooltip } from 'src/components/Tooltip';\n\nexport interface WarningIconWithTooltipProps {\n  warningMarkdown: string;\n  size?: IconType['iconSize'];\n}\n\nfunction WarningIconWithTooltip({\n  warningMarkdown,\n  size,\n}: WarningIconWithTooltipProps) {\n  const theme = useTheme();\n  return (\n    <Tooltip\n      id=\"warning-tooltip\"\n      title={<SafeMarkdown source={warningMarkdown} />}\n    >\n      <Icons.AlertSolid\n        iconColor={theme.colors.alert.base}\n        iconSize={size}\n        css={{ marginRight: theme.gridUnit * 2 }}\n      />\n    </Tooltip>\n  );\n}\n\nexport default WarningIconWithTooltip;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// Ids\nexport const DASHBOARD_GRID_ID = 'GRID_ID';\nexport const DASHBOARD_HEADER_ID = 'HEADER_ID';\nexport const DASHBOARD_ROOT_ID = 'ROOT_ID';\nexport const DASHBOARD_VERSION_KEY = 'DASHBOARD_VERSION_KEY';\n\nexport const NEW_COMPONENTS_SOURCE_ID = 'NEW_COMPONENTS_SOURCE_ID';\nexport const NEW_CHART_ID = 'NEW_CHART_ID';\nexport const NEW_COLUMN_ID = 'NEW_COLUMN_ID';\nexport const NEW_DIVIDER_ID = 'NEW_DIVIDER_ID';\nexport const NEW_HEADER_ID = 'NEW_HEADER_ID';\nexport const NEW_MARKDOWN_ID = 'NEW_MARKDOWN_ID';\nexport const NEW_ROW_ID = 'NEW_ROW_ID';\nexport const NEW_TAB_ID = 'NEW_TAB_ID';\nexport const NEW_TABS_ID = 'NEW_TABS_ID';\nexport const NEW_DYNAMIC_COMPONENT = 'NEW_DYNAMIC_COMPONENT';\n\n// grid constants\nexport const DASHBOARD_ROOT_DEPTH = 0;\nexport const GRID_BASE_UNIT = 8;\nexport const GRID_GUTTER_SIZE = 2 * GRID_BASE_UNIT;\nexport const GRID_COLUMN_COUNT = 12;\nexport const GRID_MIN_COLUMN_COUNT = 1;\nexport const GRID_MIN_ROW_UNITS = 5;\nexport const GRID_MAX_ROW_UNITS = 100;\nexport const GRID_MIN_ROW_HEIGHT = GRID_GUTTER_SIZE;\nexport const GRID_DEFAULT_CHART_WIDTH = 4;\n\n// Header types\nexport const SMALL_HEADER = 'SMALL_HEADER';\nexport const MEDIUM_HEADER = 'MEDIUM_HEADER';\nexport const LARGE_HEADER = 'LARGE_HEADER';\n\n// Style types\nexport const BACKGROUND_WHITE = 'BACKGROUND_WHITE';\nexport const BACKGROUND_TRANSPARENT = 'BACKGROUND_TRANSPARENT';\n\n// undo-redo\nexport const UNDO_LIMIT = 50;\n\n// save dash options\nexport const SAVE_TYPE_OVERWRITE = 'overwrite';\nexport const SAVE_TYPE_NEWDASHBOARD = 'newDashboard';\n\n// default dashboard layout data size limit\n// could be overwritten by server-side config\nexport const DASHBOARD_POSITION_DATA_LIMIT = 65535;\n\n// in-component element types: can be added into\n// directPathToChild, used for in dashboard navigation and focus\nexport const IN_COMPONENT_ELEMENT_TYPES = ['LABEL'];\n\n// filter scope selector filter fields pane root id\nexport const ALL_FILTERS_ROOT = 'ALL_FILTERS_ROOT';\n\nexport enum DashboardStandaloneMode {\n  NONE = 0,\n  HIDE_NAV = 1,\n  HIDE_NAV_AND_TITLE = 2,\n  REPORT = 3,\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\n\nexport const AGGREGATES = {\n  AVG: 'AVG',\n  COUNT: 'COUNT',\n  COUNT_DISTINCT: 'COUNT_DISTINCT',\n  MAX: 'MAX',\n  MIN: 'MIN',\n  SUM: 'SUM',\n};\nexport const AGGREGATES_OPTIONS = Object.values(AGGREGATES);\n\nexport enum Operators {\n  EQUALS = 'EQUALS',\n  NOT_EQUALS = 'NOT_EQUALS',\n  LESS_THAN = 'LESS_THAN',\n  LESS_THAN_OR_EQUAL = 'LESS_THAN_OR_EQUAL',\n  GREATER_THAN = 'GREATER_THAN',\n  GREATER_THAN_OR_EQUAL = 'GREATER_THAN_OR_EQUAL',\n  IN = 'IN',\n  NOT_IN = 'NOT_IN',\n  LIKE = 'LIKE',\n  ILIKE = 'ILIKE',\n  REGEX = 'REGEX',\n  IS_NOT_NULL = 'IS_NOT_NULL',\n  IS_NULL = 'IS_NULL',\n  LATEST_PARTITION = 'LATEST_PARTITION',\n  IS_TRUE = 'IS_TRUE',\n  IS_FALSE = 'IS_FALSE',\n}\n\nexport interface OperatorType {\n  display: string;\n  operation: string;\n}\n\nexport const OPERATOR_ENUM_TO_OPERATOR_TYPE: {\n  [key in Operators]: OperatorType;\n} = {\n  [Operators.EQUALS]: { display: 'Equal to (=)', operation: '==' },\n  [Operators.NOT_EQUALS]: { display: 'Not equal to (≠)', operation: '!=' },\n  [Operators.LESS_THAN]: { display: 'Less than (<)', operation: '<' },\n  [Operators.LESS_THAN_OR_EQUAL]: {\n    display: 'Less or equal (<=)',\n    operation: '<=',\n  },\n  [Operators.GREATER_THAN]: { display: 'Greater than (>)', operation: '>' },\n  [Operators.GREATER_THAN_OR_EQUAL]: {\n    display: 'Greater or equal (>=)',\n    operation: '>=',\n  },\n  [Operators.IN]: { display: 'In', operation: 'IN' },\n  [Operators.NOT_IN]: { display: 'Not in', operation: 'NOT IN' },\n  [Operators.LIKE]: { display: 'Like', operation: 'LIKE' },\n  [Operators.ILIKE]: { display: 'Like (case insensitive)', operation: 'ILIKE' },\n  [Operators.REGEX]: { display: 'Regex', operation: 'REGEX' },\n  [Operators.IS_NOT_NULL]: { display: 'Is not null', operation: 'IS NOT NULL' },\n  [Operators.IS_NULL]: { display: 'Is null', operation: 'IS NULL' },\n  [Operators.LATEST_PARTITION]: {\n    display: 'use latest_partition template',\n    operation: 'LATEST PARTITION',\n  },\n  [Operators.IS_TRUE]: { display: 'Is true', operation: '==' },\n  [Operators.IS_FALSE]: { display: 'Is false', operation: '==' },\n};\n\nexport const OPERATORS_OPTIONS = Object.values(Operators) as Operators[];\n\nexport const TABLE_ONLY_OPERATORS = [Operators.LIKE, Operators.ILIKE];\nexport const DRUID_ONLY_OPERATORS = [Operators.REGEX];\nexport const HAVING_OPERATORS = [\n  Operators.EQUALS,\n  Operators.NOT_EQUALS,\n  Operators.LESS_THAN,\n  Operators.LESS_THAN_OR_EQUAL,\n  Operators.GREATER_THAN,\n  Operators.GREATER_THAN_OR_EQUAL,\n];\nexport const MULTI_OPERATORS = new Set([Operators.IN, Operators.NOT_IN]);\n// CUSTOM_OPERATORS will show operator in simple mode,\n// but will generate customized sqlExpression\nexport const CUSTOM_OPERATORS = new Set([Operators.LATEST_PARTITION]);\n// DISABLE_INPUT_OPERATORS will disable filter value input\n// in adhocFilter control\nexport const DISABLE_INPUT_OPERATORS = [\n  Operators.IS_NOT_NULL,\n  Operators.IS_NULL,\n  Operators.LATEST_PARTITION,\n  Operators.IS_TRUE,\n  Operators.IS_FALSE,\n];\n\nexport const sqlaAutoGeneratedMetricNameRegex =\n  /^(sum|min|max|avg|count|count_distinct)__.*$/i;\nexport const sqlaAutoGeneratedMetricRegex =\n  /^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\\([A-Z0-9_.\"]*\\)$/i;\nexport const druidAutoGeneratedMetricRegex =\n  /^(LONG|DOUBLE|FLOAT)?(SUM|MAX|MIN|COUNT)\\([A-Z0-9_.\"]*\\)$/i;\n\nexport const TIME_FILTER_LABELS = {\n  time_range: t('Time range'),\n  granularity_sqla: t('Time column'),\n  time_grain_sqla: t('Time grain'),\n  druid_time_origin: t('Origin'),\n  granularity: t('Time granularity'),\n};\n\nexport const FILTER_CONFIG_ATTRIBUTES = {\n  CLEARABLE: 'clearable',\n  DEFAULT_VALUE: 'defaultValue',\n  MULTIPLE: 'multiple',\n  SEARCH_ALL_OPTIONS: 'searchAllOptions',\n  SORT_ASCENDING: 'asc',\n  SORT_METRIC: 'metric',\n};\n\nexport const FILTER_OPTIONS_LIMIT = 1000;\n\n/**\n * Map control names to their key in extra_filters\n */\nexport const TIME_FILTER_MAP = {\n  time_range: '__time_range',\n  granularity_sqla: '__time_col',\n  time_grain_sqla: '__time_grain',\n  druid_time_origin: '__time_origin',\n  granularity: '__granularity',\n};\n\n// TODO: make this configurable per Superset installation\nexport const DEFAULT_TIME_RANGE = 'No filter';\nexport const NO_TIME_RANGE = 'No filter';\n\nexport enum FILTER_BOX_MIGRATION_STATES {\n  CONVERTED = 'CONVERTED',\n  NOOP = 'NOOP',\n  REVIEWING = 'REVIEWING',\n  SNOOZED = 'SNOOZED',\n  UNDECIDED = 'UNDECIDED',\n}\n\nexport const FILTER_BOX_TRANSITION_SNOOZE_DURATION = 24 * 60 * 60 * 1000; // 24 hours\n\nexport const POPOVER_INITIAL_HEIGHT = 240;\nexport const POPOVER_INITIAL_WIDTH = 320;\nexport const UNRESIZABLE_POPOVER_WIDTH = 296;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FeatureFlagMap, FeatureFlag } from '@superset-ui/core';\n\nexport { FeatureFlag } from '@superset-ui/core';\nexport type { FeatureFlagMap } from '@superset-ui/core';\n\nexport function initFeatureFlags(featureFlags: FeatureFlagMap) {\n  if (!window.featureFlags) {\n    window.featureFlags = featureFlags || {};\n  }\n}\n\nexport function isFeatureEnabled(feature: FeatureFlag) {\n  return window && window.featureFlags && !!window.featureFlags[feature];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * A Stringify function that will not crash when it runs into circular JSON references,\n * unlike JSON.stringify. Any circular references are simply omitted, as if there had\n * been no data present\n * @param object any JSON object to be stringified\n */\nexport function safeStringify(object: any): string {\n  const cache = new Set();\n  return JSON.stringify(object, (key, value) => {\n    if (typeof value === 'object' && value !== null) {\n      if (cache.has(value)) {\n        // We've seen this object before\n        try {\n          // Quick deep copy to duplicate if this is a repeat rather than a circle.\n          return JSON.parse(JSON.stringify(value));\n        } catch (err) {\n          // Discard key if value cannot be duplicated.\n          return; // eslint-disable-line consistent-return\n        }\n      }\n      // Store the value in our cache.\n      cache.add(value);\n    }\n    return value;\n  });\n}\n"],"names":["RESET_STATE","ADD_QUERY_EDITOR","UPDATE_QUERY_EDITOR","QUERY_EDITOR_SAVED","CLONE_QUERY_TO_NEW_TAB","REMOVE_QUERY_EDITOR","MERGE_TABLE","REMOVE_TABLE","END_QUERY","REMOVE_QUERY","EXPAND_TABLE","COLLAPSE_TABLE","QUERY_EDITOR_SETDB","QUERY_EDITOR_SET_SCHEMA","QUERY_EDITOR_SET_SCHEMA_OPTIONS","QUERY_EDITOR_SET_TABLE_OPTIONS","QUERY_EDITOR_SET_TITLE","QUERY_EDITOR_SET_AUTORUN","QUERY_EDITOR_SET_SQL","QUERY_EDITOR_SET_QUERY_LIMIT","QUERY_EDITOR_SET_TEMPLATE_PARAMS","QUERY_EDITOR_SET_SELECTED_TEXT","QUERY_EDITOR_SET_FUNCTION_NAMES","QUERY_EDITOR_PERSIST_HEIGHT","QUERY_EDITOR_TOGGLE_LEFT_BAR","MIGRATE_QUERY_EDITOR","MIGRATE_TAB_HISTORY","MIGRATE_TABLE","MIGRATE_QUERY","SET_DATABASES","SET_ACTIVE_QUERY_EDITOR","LOAD_QUERY_EDITOR","SET_TABLES","SET_ACTIVE_SOUTHPANE_TAB","REFRESH_QUERIES","SET_USER_OFFLINE","RUN_QUERY","START_QUERY","STOP_QUERY","REQUEST_QUERY_RESULTS","QUERY_SUCCESS","QUERY_FAILED","CLEAR_QUERY_RESULTS","REMOVE_DATA_PREVIEW","CHANGE_DATA_PREVIEW_ID","START_QUERY_VALIDATION","QUERY_VALIDATION_RETURNED","QUERY_VALIDATION_FAILED","COST_ESTIMATE_STARTED","COST_ESTIMATE_RETURNED","COST_ESTIMATE_FAILED","CREATE_DATASOURCE_STARTED","CREATE_DATASOURCE_SUCCESS","CREATE_DATASOURCE_FAILED","addInfoToast","addInfoToastAction","addSuccessToast","addSuccessToastAction","addDangerToast","addDangerToastAction","addWarningToast","addWarningToastAction","CtasEnum","TABLE","VIEW","ERR_MSG_CANT_LOAD_QUERY","t","queryClientMapping","id","db_id","client_id","label","fieldConverter","mapping","obj","mapKeys","value","key","convertQueryToServer","invert","convertQueryToClient","resetState","type","startQueryValidation","query","Object","assign","shortid","queryValidationReturned","results","queryValidationFailed","message","error","updateQueryEditor","alterations","scheduleQuery","dispatch","SupersetClient","endpoint","postPayload","stringify","then","catch","estimateQueryCost","dbId","schema","sql","templateParams","Promise","all","JSON","parse","json","response","getClientErrorObject","statusText","startQuery","progress","startDttm","now","state","runAsync","cached","querySuccess","isDataPreview","isFeatureEnabled","FeatureFlag","encodeURI","sqlEditorId","latest_query_id","resolve","queryFailed","msg","link","errors","stopQuery","clearQueryResults","removeDataPreview","table","requestQueryResults","fetchQueryResults","displayLimit","resultsKey","parseMethod","text","bigIntJson","JSONbig","runQuery","database_id","sql_editor_id","tab","tmp_table_name","tempTable","select_as_cta","ctas","ctas_method","queryLimit","expand_data","search","window","location","body","headers","includes","COMMON_ERR_MESSAGES","reRunQuery","validateQuery","template_params","result","postStopQuery","setDatabases","databases","migrateQueryEditorFromLocalStorage","queryEditor","tables","queries","newQueryEditor","toString","oldQueryEditor","oldId","newId","map","queryEditorId","newTable","oldTable","migrateTable","queryId","migrateQuery","addQueryEditor","cloneQueryToNewTab","autorun","getState","queryEditors","tabHistory","sqlLab","sourceQueryEditor","find","qe","length","title","maxRow","setActiveQueryEditor","status","loadQueryEditor","setTables","tableSchemas","filter","tableSchema","description","columns","selectStar","primaryKey","foreignKeys","indexes","dataPreviewQueryId","tab_state_id","name","expanded","isMetadataLoading","isExtraMetadataLoading","switchQueryEditor","loaded","loadedQueryEditor","selectedText","latestQueryId","latest_query","query_limit","remoteId","saved_query","validationResult","completed","hideLeftBar","hide_left_bar","table_schemas","setActiveSouthPaneTab","tabId","toggleLeftBar","removeQueryEditor","removeQuery","queryEditorSetDb","queryEditorSetSchema","queryEditorSetSchemaOptions","options","queryEditorSetTableOptions","queryEditorSetAutorun","queryEditorSetTitle","saveQuery","savedQuery","item","addSavedQueryToTabState","saved_query_id","updateSavedQuery","queryEditorSetSql","queryEditorSetAndSaveSql","queryEditorSetQueryLimit","queryEditorSetTemplateParams","queryEditorSetSelectedText","mergeTable","prepend","getTableMetadata","encodeURIComponent","getTableExtendedMetadata","addTable","database","tableName","schemaName","sync","disable_data_preview","dataPreviewQuery","allow_run_async","resultJson","changeDataPreviewId","oldQueryId","newQuery","reFetchQueryResults","expandTable","collapseTable","removeTable","refreshQueries","alteredQueries","setUserOffline","offline","persistEditorHeight","northPercent","southPercent","popStoredQuery","urlId","parseInt","popSavedQuery","saveQueryId","queryEditorProps","popQuery","queryData","tab_name","popDatasourceQuery","datasourceKey","undefined","select_star","createDatasourceStarted","createDatasourceSuccess","data","datasource","table_id","createDatasourceFailed","err","createDatasource","vizOptions","reject","createCtasDatasource","errorMsg","Error","queryEditorSetFunctionNames","functionNames","function_names","propTypes","dialogClassName","PropTypes","triggerNode","modalTitle","modalBody","modalFooter","beforeOpen","onExit","isButton","className","tooltip","width","maxWidth","responsive","resizable","resizableConfig","draggable","draggableConfig","destroyOnClose","ModalTrigger","React","constructor","props","super","this","showModal","open","bind","close","setState","e","preventDefault","renderModal","wrapClassName","show","onHide","afterClose","footer","hideFooter","render","onClick","role","defaultProps","getChartKey","explore","slice","slice_id","requestCounter","getHostName","allowDomainSharding","currentIndex","availableDomains","getAnnotationJsonUrl","form_data","isNative","force","URI","pathname","safeStringify","getURIDirectory","endpointType","mountExploreUrl","extraSearch","uri","directory","keys","forEach","URL_PARAMS","standalone","DashboardStandaloneMode","getChartDataUri","path","qs","protocol","hostname","port","getExploreUrl","formData","curUrl","requestParams","method","label_colors","extra_filters","adhoc_filters","viz_type","csv","samples","paramNames","hasOwnProperty","shouldUseLegacyApi","vizMetadata","getChartMetadataRegistry","get","useLegacyApi","buildV1ChartDataPayload","resultFormat","resultType","setDataMask","ownState","getChartBuildQueryRegistry","buildQueryformData","buildQueryContext","baseQueryObject","result_format","result_type","hooks","getLegacyEndpointType","exportChart","url","payload","exploreChart","useDebouncedEffect","effect","delay","deps","callback","useCallback","useEffect","handler","setTimeout","clearTimeout","getSimpleSQLExpression","subject","operator","comparator","isMulti","MULTI_OPERATORS","op","OPERATOR_ENUM_TO_OPERATOR_TYPE","operation","indexOf","expression","firstValue","Array","isArray","comparatorArray","ensureIsArray","isString","Number","isNaN","quote","prefix","suffix","formattedComparators","val","optionLabel","String","replace","join","formatSelectOptions","opt","fDuration","t1","t2","format","diffSec","moment","Date","utc","valueOf","appContainer","document","getElementById","Set","URLSearchParams","from","bootstrapData","getAttribute","initFeatureFlags","common","feature_flags","conf","SUPERSET_WEBSERVER_DOMAINS","hostName","add","getDomainsConfig","allowCrossDomain","InfoTooltipWithTrigger","bsStyle","icon","placement","iconsStyle","iconClass","iconEl","tabIndex","style","cursor","onKeyPress","event","Tooltip","overlayStyle","color","theme","defaultColor","colors","grayscale","dark2","styles","fontSize","typography","sizes","s","lineHeight","gridUnit","minWidth","align","offset","trigger","mouseLeaveDelay","ChartBuildQueryRegistry","overwritePolicy","ChartMetadataRegistry","isSafeMarkup","node","test","source","escapeHtml","skipHtml","allowNode","astPlugins","isValidNode","DatasourceKey","idStr","typeStr","split","toObject","WRAP_IN_ARRAY","queryFields","buildQuery","post_processing","Boolean","sanitizeClause","clause","sanitizedClause","buildQueryObject","annotation_layers","extra_form_data","time_range","since","until","row_limit","row_offset","order_desc","limit","timeseries_limit_metric","granularity","url_params","custom_params","series_columns","series_limit","series_limit_metric","residualFormData","appendAdhocFilters","filters","appendFilters","custom_form_data","overrides","numericRowLimit","numericRowOffset","metrics","orderby","aliases","queryFieldAliases","metric","metric_2","secondary_metric","x","y","size","all_columns","series","order_by_cols","query_mode","queryMode","include_time","includeTime","restFormData","entries","normalizedKey","concat","unshift","removeDuplicates","col","getColumnLabel","getMetricLabel","extractQueryFields","extras","applied_time_extras","extract","reservedColumnsToQueryField","__time_range","__time_col","__time_grain","__time_origin","__granularity","push","druid_time_origin","time_grain_sqla","granularity_sqla","extractExtras","extraFilters","filterFormData","extrasAndfilters","where","simpleWhere","simpleHaving","freeformWhere","freeformHaving","filterClause","convertFilter","sqlExpression","having","having_druid","processFilters","queryObject","column","normalizeSeriesLimitMetric","timeseries_limit","overrideFormData","overriddenFormData","overriddenExtras","target","overrideExtraFormData","DTTM_ALIAS","EXTRA_FORM_DATA_OVERRIDE_EXTRA_KEYS","EXTRA_FORM_DATA_APPEND_KEYS","EXTRA_FORM_DATA_OVERRIDE_REGULAR_MAPPINGS","time_column","time_grain","EXTRA_FORM_DATA_OVERRIDE_REGULAR_KEYS","EXTRA_FORM_DATA_OVERRIDE_KEYS","aggregate","columnName","column_name","isPhysicalColumn","isAdhocColumn","DatasourceType","DEFAULT_METRICS","metric_name","isSimpleAdhocFilter","expressionType","isUnaryAdhocFilter","isBinaryAdhocFilter","isSetAdhocFilter","isAdhocMetricSimple","unaryOperatorSet","isUnaryOperator","has","binaryOperatorSet","isBinaryOperator","setOperatorSet","isSetOperator","QueryMode","isDruidFormData","isSavedMetric","feature","featureFlags","items","hash","seen","itemHash","DatasetRadioState","EXPLORE_CHART_DEFAULT","groupby","Styles","SaveDatasetModal","visible","buttonTextOnSave","buttonTextOnOverwrite","modalDescription","getDefaultDatasetName","datasetName","setDatasetName","useState","newOrOverwrite","setNewOrOverwrite","SAVE_NEW","shouldOverwriteDataset","setShouldOverwriteDataset","userDatasetOptions","setUserDatasetOptions","datasetToOverwrite","setDatasetToOverwrite","autocompleteValue","setAutocompleteValue","user","getInitialState","disableSaveAndExploreBtn","OVERWRITE_DATASET","Button","disabled","buttonStyle","selectedColumns","selected_columns","p","_filters","datasourceName","c","async","datasetId","owners","overrideColumns","updateDataset","d","is_dttm","o","Radio","onChange","Input","defaultValue","onSelect","_data","option","onSearch","searchText","userDatasetsOwned","userId","queryParams","opr","order_column","order_direction","makeApi","r","table_name","getUserDatasets","placeholder","filterOption","inputValue","toLowerCase","STATE_TYPE_MAP","failed","pending","fetching","running","stopped","success","STATUS_OPTIONS","SQL_EDITOR_GUTTER_HEIGHT","SQL_EDITOR_GUTTER_MARGIN","SQL_TOOLBAR_HEIGHT","KB_STORAGE","BYTES_PER_CHAR","LOCALSTORAGE_MAX_QUERY_AGE_MS","LOCALSTORAGE_MAX_USAGE_KB","LOCALSTORAGE_WARNING_THRESHOLD","LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS","SQL_KEYWORD_AUTOCOMPLETE_SCORE","SQL_FUNCTIONS_AUTOCOMPLETE_SCORE","SCHEMA_AUTOCOMPLETE_SCORE","TABLE_AUTOCOMPLETE_SCORE","COLUMN_AUTOCOMPLETE_SCORE","keyword","meta","score","Alert","showIcon","closable","roomBelow","children","alert","info","baseColor","AlertIcon","closeText","css","marginBottom","padding","alignItems","border","backgroundColor","light2","marginRight","m","fontWeight","weights","bold","normal","aceModuleLoaders","AsyncAceEditor","aceModules","defaultMode","defaultTheme","defaultTabSize","default","ReactAceEditor","inferredMode","startsWith","inferredTheme","forwardRef","keywords","mode","tabSize","ref","completer","getCompletions","editor","session","pos","getMode","$id","acequire","setCompleters","SQLEditor","FullSQLEditor","height","background","MarkdownEditor","TextAreaEditor","CssEditor","JsonEditor","ConfigEditor","DefaultPlaceholder","showLoadingForImport","placeholderStyle","position","AsyncEsmComponent","loadComponent","promise","component","waitForPromise","AsyncComponent","setLoaded","isMounted","Component","preload","light","bigger","animateArrows","expandIconPosition","light4","ghost","bordered","light3","Panel","EmptyStateSize","EmptyStateContainer","base","TextContainer","Title","light1","BigTitle","l","Description","BigDescription","SmallDescription","ActionButton","getImage","image","getImageHeight","Small","Medium","Big","ImageContainer","imageStyle","handleMouseDown","stopPropagation","EmptyStateBig","buttonAction","buttonText","onMouseDown","EmptyStateMedium","EmptyStateSmall","DEFAULT_TITLE","ErrorMessageWithStackTrace","subtitle","copyText","stackTrace","ErrorMessageComponent","error_type","level","href","rel","Label","RequiredLabel","FormLabel","htmlFor","required","StyledLabel","_path","_extends","i","arguments","prototype","call","apply","viewBox","fill","xmlns","fillRule","clipRule","StyledInput","StyledInputPassword","StyledFormGroup","StyledAlignment","StyledFormLabel","validationMethods","errorMessage","helpText","hasTooltip","tooltipText","InfoTooltip","FormItem","hasError","alertIconStyles","validateTrigger","validateStatus","help","hasFeedback","iconRender","EyeInvisibleOutlined","EyeOutlined","StyledForm","Form","StyledTooltip","StyledTooltipTitle","defaultOverlayStyle","bgColor","secondary","borderRadius","InputNumber","TextArea","MenuItem","transitionTiming","primary","light5","StyledNav","dark1","StyledSubMenu","Menu","Item","MainNav","SubMenu","Divider","ItemGroup","StyledRadio","StyledGroup","Group","warningMarkdown","iconColor","iconSize","DASHBOARD_GRID_ID","DASHBOARD_HEADER_ID","DASHBOARD_ROOT_ID","DASHBOARD_VERSION_KEY","NEW_COMPONENTS_SOURCE_ID","NEW_CHART_ID","NEW_COLUMN_ID","NEW_DIVIDER_ID","NEW_HEADER_ID","NEW_MARKDOWN_ID","NEW_ROW_ID","NEW_TAB_ID","NEW_TABS_ID","NEW_DYNAMIC_COMPONENT","DASHBOARD_ROOT_DEPTH","GRID_BASE_UNIT","GRID_GUTTER_SIZE","GRID_COLUMN_COUNT","GRID_MIN_COLUMN_COUNT","GRID_MIN_ROW_UNITS","GRID_DEFAULT_CHART_WIDTH","SMALL_HEADER","MEDIUM_HEADER","LARGE_HEADER","BACKGROUND_WHITE","BACKGROUND_TRANSPARENT","UNDO_LIMIT","SAVE_TYPE_OVERWRITE","SAVE_TYPE_NEWDASHBOARD","DASHBOARD_POSITION_DATA_LIMIT","IN_COMPONENT_ELEMENT_TYPES","ALL_FILTERS_ROOT","AGGREGATES","AVG","COUNT","COUNT_DISTINCT","MAX","MIN","SUM","AGGREGATES_OPTIONS","values","Operators","EQUALS","display","NOT_EQUALS","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","IN","NOT_IN","LIKE","ILIKE","REGEX","IS_NOT_NULL","IS_NULL","LATEST_PARTITION","IS_TRUE","IS_FALSE","OPERATORS_OPTIONS","TABLE_ONLY_OPERATORS","DRUID_ONLY_OPERATORS","HAVING_OPERATORS","CUSTOM_OPERATORS","DISABLE_INPUT_OPERATORS","sqlaAutoGeneratedMetricRegex","TIME_FILTER_LABELS","FILTER_CONFIG_ATTRIBUTES","CLEARABLE","DEFAULT_VALUE","MULTIPLE","SEARCH_ALL_OPTIONS","SORT_ASCENDING","SORT_METRIC","FILTER_OPTIONS_LIMIT","TIME_FILTER_MAP","DEFAULT_TIME_RANGE","NO_TIME_RANGE","FILTER_BOX_MIGRATION_STATES","FILTER_BOX_TRANSITION_SNOOZE_DURATION","POPOVER_INITIAL_HEIGHT","POPOVER_INITIAL_WIDTH","UNRESIZABLE_POPOVER_WIDTH","object","cache"],"sourceRoot":""}