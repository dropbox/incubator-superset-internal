/*! For license information please see 40570d40329b4a6329ac.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1010:function(e,t,n){"use strict";var a=n(7),r=n.n(a),o=(n(0),n(2)),i=n.n(o),s=n(1);const l={controls:i.a.arrayOf(i.a.object).isRequired};function c(e){var t;const n=12/e.controls.length;return Object(s.f)("div",{className:"row space-1"},r()(t=e.controls).call(t,(e,t)=>Object(s.f)("div",{className:"col-lg-"+n+" col-xs-12",key:t},e)))}c.propTypes=l,t.a=c},1011:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pa}));var a=n(23),r=n.n(a),o=n(6),i=n.n(o),s=n(0),l=n.n(s),c=(n(124),n(40),n(26)),u=n.n(c),d=n(4),p=n.n(d),h=n(7),f=n.n(h),g=n(29),b=n.n(g),m=n(44),v=n.n(m),y=n(2),O=n.n(y),x=n(1625),C=n(2962),w=n(94),E=n(9),_=n(165),S=n(151),j=n(142),T=n(327),R=n(125),k=n(115),M=n(1);const D=Object(T.a)(()=>n.e(57).then(n.bind(null,3475)),()=>Object(M.f)("div",{style:{width:450,height:368}})),P={colorScheme:O.a.string.isRequired,annotationError:O.a.object,annotationQuery:O.a.object,vizType:O.a.string,validationErrors:O.a.array,name:O.a.string.isRequired,actions:O.a.object,value:O.a.arrayOf(O.a.object),onChange:O.a.func,refreshAnnotationData:O.a.func};class A extends l.a.PureComponent{constructor(e){var t,n,a;super(e),this.state={popoverVisible:{},addedAnnotationIndex:null},this.addAnnotationLayer=i()(t=this.addAnnotationLayer).call(t,this),this.removeAnnotationLayer=i()(n=this.removeAnnotationLayer).call(n,this),this.handleVisibleChange=i()(a=this.handleVisibleChange).call(a,this)}componentDidMount(){D.preload()}UNSAFE_componentWillReceiveProps(e){const{name:t,annotationError:n,validationErrors:a,value:r}=e;v()(n).length&&!a.length&&this.props.actions.setControlValue(t,r,v()(n)),!v()(n).length&&a.length&&this.props.actions.setControlValue(t,r,[])}addAnnotationLayer(e,t){let n=this.props.value;b()(n).call(n,e)?n=f()(n).call(n,n=>n===e?t:n):(n=[...n,t],this.setState({addedAnnotationIndex:n.length-1})),this.props.refreshAnnotationData(t),this.props.onChange(n)}handleVisibleChange(e,t){this.setState(n=>({popoverVisible:p()({},n.popoverVisible,{[t]:e})}))}removeAnnotationLayer(e){var t;const n=u()(t=this.props.value).call(t,t=>t!==e);this.props.onChange(n)}renderPopover(e,t,n){const a=(null==t?void 0:t.name)||"_new";return Object(M.f)("div",{id:"annotation-pop-"+a},Object(M.f)(D,r()({},t,{error:n,colorScheme:this.props.colorScheme,vizType:this.props.vizType,addAnnotationLayer:e=>this.addAnnotationLayer(t,e),removeAnnotationLayer:()=>this.removeAnnotationLayer(t),close:()=>{this.handleVisibleChange(!1,e),this.setState({addedAnnotationIndex:null})}})))}renderInfo(e){const{annotationError:t,annotationQuery:n}=this.props;return n[e.name]?Object(M.f)("i",{className:"fa fa-refresh",style:{color:"orange"},"aria-hidden":!0}):t[e.name]?Object(M.f)(S.a,{label:"validation-errors",bsStyle:"danger",tooltip:t[e.name]}):e.show?"":Object(M.f)("span",{style:{color:"red"}}," Hidden ")}render(){var e;const{addedAnnotationIndex:t}=this.state,n=this.props.value[t],a=f()(e=this.props.value).call(e,(e,t)=>Object(M.f)(j.a,{key:t,trigger:"click",placement:"right",title:Object(E.c)("Edit Annotation Layer"),content:this.renderPopover(t,e,this.props.annotationError[e.name]),visible:this.state.popoverVisible[t],onVisibleChange:e=>this.handleVisibleChange(e,t)},Object(M.f)(x.a,null,Object(M.f)("span",null,e.name),Object(M.f)("span",{style:{float:"right"}},this.renderInfo(e)))));return Object(M.f)("div",null,Object(M.f)(C.a,null,a,Object(M.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover("add",n),title:Object(E.c)("Add Annotation Layer"),visible:this.state.popoverVisible.add,destroyTooltipOnHide:!0,onVisibleChange:e=>this.handleVisibleChange(e,"add")},Object(M.f)(x.a,null,Object(M.f)("i",{className:"fa fa-plus"})," ","  ",Object(E.c)("Add Annotation Layer")))))}}A.propTypes=P,A.defaultProps={vizType:"",value:[],annotationError:{},annotationQuery:{},onChange:()=>{}};const N=Object(_.c)(A);var F=Object(w.b)((function({charts:e,explore:t}){const n=e[Object(R.f)(t)]||e[0]||{};return{colorScheme:(t.controls||{}).color_scheme.value,annotationError:n.annotationError,annotationQuery:n.annotationQuery,vizType:t.controls.viz_type.value}}),(function(e){return{refreshAnnotationData:t=>e(Object(k.runAnnotationQuery)(t))}}))(N),L=n(579),I=n.n(L),B=n(277),U=n.n(B),V=n(689),H=n(1146),q=n(973),z=n(668),G=n(90);const W={onChange:O.a.func,value:O.a.array};class Y extends l.a.Component{constructor(e){var t,n,a;super(e),this.state={minMax:[null===e.value[0]?"":e.value[0],null===e.value[1]?"":e.value[1]]},this.onChange=i()(t=this.onChange).call(t,this),this.onMinChange=i()(n=this.onMinChange).call(n,this),this.onMaxChange=i()(a=this.onMaxChange).call(a,this)}onMinChange(e){const t=e.target.value;this.setState(e=>({minMax:[t,e.minMax[1]]}),this.onChange)}onMaxChange(e){const t=e.target.value;this.setState(e=>({minMax:[e.minMax[0],t]}),this.onChange)}onChange(){const e=this.state.minMax,t=[];e[0]&&U()(Number(e[0]))&&t.push(Object(E.c)("`Min` value should be numeric or empty")),e[1]&&U()(Number(e[1]))&&t.push(Object(E.c)("`Max` value should be numeric or empty")),0===t.length?this.props.onChange([I()(e[0]),I()(e[1])],t):this.props.onChange([null,null],t)}render(){return Object(M.f)("div",null,Object(M.f)(G.a,this.props),Object(M.f)(V.a,{bsSize:"small"},Object(M.f)(H.a,null,Object(M.f)(q.a,{xs:6},Object(M.f)(z.a,{type:"text",placeholder:Object(E.c)("Min"),onChange:this.onMinChange,value:this.state.minMax[0]})),Object(M.f)(q.a,{xs:6},Object(M.f)(z.a,{type:"text",placeholder:Object(E.c)("Max"),onChange:this.onMaxChange,value:this.state.minMax[1]})))))}}Y.propTypes=W,Y.defaultProps={onChange:()=>{},value:[null,null]};var K=n(372),Q=n(34),X=n.n(Q),Z=n(76),$=n.n(Z),J=n(110),ee=n.n(J),te=n(291);n(1262);const ne={name:O.a.string.isRequired,label:O.a.string,description:O.a.string,placeholder:O.a.string,addTooltip:O.a.string,itemGenerator:O.a.func,keyAccessor:O.a.func,onChange:O.a.func,value:O.a.oneOfType([O.a.array]),isFloat:O.a.bool,isInt:O.a.bool,controlName:O.a.string.isRequired},ae={label:null,description:null,onChange:()=>{},placeholder:"Empty collection",itemGenerator:()=>({key:ee.a.generate()}),keyAccessor:e=>e.key,value:[],addTooltip:"Add an item"},re=Object(te.b)(x.a),oe=Object(te.a)(C.a),ie=Object(te.c)(()=>Object(M.f)("i",{className:"fa fa-bars text-primary",style:{cursor:"ns-resize"}}));class se extends l.a.Component{constructor(e){var t;super(e),this.onAdd=i()(t=this.onAdd).call(t,this)}onChange(e,t){p()(this.props.value[e],t),this.props.onChange(this.props.value)}onAdd(){var e;this.props.onChange($()(e=this.props.value).call(e,[this.props.itemGenerator()]))}onSortEnd({oldIndex:e,newIndex:t}){this.props.onChange(Object(te.d)(this.props.value,e,t))}removeItem(e){var t;this.props.onChange(u()(t=this.props.value).call(t,(t,n)=>e!==n))}renderList(){var e,t;if(0===this.props.value.length)return Object(M.f)("div",{className:"text-muted"},this.props.placeholder);const n=Da[this.props.controlName];return Object(M.f)(oe,{useDragHandle:!0,lockAxis:"y",onSortEnd:i()(e=this.onSortEnd).call(e,this)},f()(t=this.props.value).call(t,(e,t)=>{var a,o;const s=this.props,l=X()(s,["label"]);return Object(M.f)(re,{className:"clearfix",key:this.props.keyAccessor(e),index:t},Object(M.f)("div",{className:"pull-left m-r-5"},Object(M.f)(ie,null)),Object(M.f)("div",{className:"pull-left"},Object(M.f)(n,r()({},l,e,{onChange:i()(a=this.onChange).call(a,this,t)}))),Object(M.f)("div",{className:"pull-right"},Object(M.f)(S.a,{icon:"times",label:"remove-item",tooltip:"remove item",bsStyle:"primary",onClick:i()(o=this.removeItem).call(o,this,t)})))}))}render(){return Object(M.f)("div",{className:"CollectionControl"},Object(M.f)(G.a,this.props),this.renderList(),Object(M.f)(S.a,{icon:"plus-circle",label:"add-item",tooltip:this.props.addTooltip,bsStyle:"primary",className:"fa-lg",onClick:this.onAdd}))}}se.propTypes=ne,se.defaultProps=ae;var le=n(19),ce=n.n(le),ue=n(715);const de={onChange:O.a.func,value:O.a.object,colorScheme:O.a.string,colorNamespace:O.a.string},pe={onChange:()=>{},value:{},colorScheme:void 0,colorNamespace:void 0};class he extends l.a.PureComponent{constructor(e){var t;super(e),ce()(t=v()(this.props.value)).call(t,e=>{ue.b.getScale(this.props.colorScheme,this.props.colorNamespace).setColor(e,this.props.value[e])})}render(){return null}}he.propTypes=de,he.defaultProps=pe;var fe=n(1034),ge=n(236);const be={onChange:O.a.func,value:O.a.object},me={position:"absolute",width:"50px",height:"20px",top:"0px",left:"0px",right:"0px",bottom:"0px"},ve={swatch:{width:"50px",height:"20px",position:"relative",padding:"5px",borderRadius:"1px",display:"inline-block",cursor:"pointer",boxShadow:"rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset, rgba(0, 0, 0, 0.25) 0px 0px 4px inset"},color:p()({},me,{borderRadius:"2px"}),checkboard:p()({},me,{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center'})};class ye extends l.a.Component{constructor(e){var t;super(e),this.onChange=i()(t=this.onChange).call(t,this)}onChange(e){this.props.onChange(e.rgb)}renderPopover(){var e;const t=u()(e=Object(ge.a)().get().colors).call(e,(e,t)=>t<7);return Object(M.f)("div",{id:"filter-popover",className:"color-popover"},Object(M.f)(fe.SketchPicker,{color:this.props.value,onChange:this.onChange,presetColors:t}))}render(){const e=this.props.value||{r:0,g:0,b:0,a:0},t=p()({},ve.color,{background:"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"});return Object(M.f)("div",null,Object(M.f)(G.a,this.props),Object(M.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover()},Object(M.f)("div",{style:ve.swatch},Object(M.f)("div",{style:ve.checkboard}),Object(M.f)("div",{style:t}))))}}ye.propTypes=be,ye.defaultProps={onChange:()=>{}};var Oe,xe=n(750),Ce=n(46),we=n.n(Ce),Ee=n(8),_e=n.n(Ee),Se=n(2963),je=n(1250),Te=n(50),Re=n(230),ke=n(766),Me=n(14),De=n(58),Pe=n(35),Ae=n(1629),Ne=n(57),Fe=n(417),Le=n(85),Ie=n(28),Be=n(132),Ue=n(64),Ve=n(167),He=n(73);function qe(){const e=_e()(["\n  .btn-container {\n    display: flex;\n    justify-content: flex-end;\n    padding: 0px 15px;\n    margin: 10px 0 0 0;\n  }\n\n  .confirm-modal-container {\n    margin: 9px;\n  }\n"]);return qe=function(){return e},e}const ze=Object(E.c)("Warning! Changing the dataset may break the chart if the metadata (columns/metrics) does not exist in the target dataset"),Ge=Te.a.div(qe()),We=f()(Oe=["name","type","schema","connection","creator"]).call(Oe,e=>({accessor:e,Header:e})),Ye=Object(E.c)("Changing the dataset may break the chart if the chart relies on columns or metadata that does not exist in the target dataset"),Ke={pageIndex:0,pageSize:20,filters:[],sortBy:[{id:"changed_on_delta_humanized"}]};var Qe=Object(He.a)(({addDangerToast:e,addSuccessToast:t,onChange:n,onDatasourceSave:a,onHide:r,show:o})=>{const[i,c]=Object(s.useState)(void 0),[u,d]=Object(s.useState)(!1),[h,g]=Object(s.useState)();let b=Object(s.useRef)(null);const{state:{loading:m,resourceCollection:v},fetchData:y}=Object(Be.e)("dataset",Object(E.c)("dataset"),e),O=Object(s.useCallback)(e=>{d(!0),g(e)},[]);Object(R.n)(()=>{i&&y(p()({},Ke,{filters:[{id:"table_name",operator:"ct",value:i}]}))},1e3),Object(s.useEffect)(()=>{o&&(async()=>{b&&b.current&&b.current.focus(),await y(Ke)})()},[e,y,n,a,r,O,o]);return Object(M.f)(Le.a,{show:o,onHide:r,responsive:!0,title:Object(E.c)("Select a dataset"),hideFooter:!0},Object(M.f)(l.a.Fragment,null,!u&&Object(M.f)(l.a.Fragment,null,Object(M.f)(Ae.a,{bsStyle:"warning"},Object(M.f)("strong",null,Object(E.c)("Warning!"))," ",Ye),Object(M.f)("div",null,Object(M.f)(z.a,{inputRef:e=>{(e=>{b=e})(e)},type:"text",bsSize:"sm",value:i,placeholder:Object(E.c)("Search / Filter"),onChange:e=>{var t,n;const a=null!=(t=null===(n=e.currentTarget)||void 0===n?void 0:n.value)?t:"";c(a)}})),m&&Object(M.f)(Ve.a,null),!m&&Object(M.f)(Fe.b,{columns:We,data:f()(v).call(v,e=>({rawName:e.table_name,connection:e.database.database_name,schema:e.schema,name:Object(M.f)("a",{href:"#",onClick:()=>O(p()({type:"table"},e)),className:"datasource-link"},e.table_name),type:e.kind})),pageSize:20,className:"table-condensed"})),u&&Object(M.f)(Ge,null,Object(M.f)("div",{className:"confirm-modal-container"},ze,Object(M.f)("div",{className:"btn-container"},Object(M.f)(Ie.a,{onClick:()=>{d(!1)}},"Cancel"),Object(M.f)(Ie.a,{className:"proceed-btn",buttonStyle:"primary",onClick:()=>{Ne.a.get({endpoint:"/datasource/get/"+(null==h?void 0:h.type)+"/"+(null==h?void 0:h.id)}).then(({json:e})=>{a(e),n((null==h?void 0:h.id)+"__table")}).catch(t=>{Object(Ue.a)(t).then(({error:t,message:n})=>{const a=t?t.error||t.statusText||t:n;e(a)})}),r(),t("Successfully changed datasource!")}},"Proceed"))))))}),Xe=n(824),Ze=n(101);function $e(){const e=_e()(["\n  overflow: auto; /* for very very long columns names */\n  white-space: nowrap; /* make sure tooltip trigger is on the same line as the metric */\n  .and-more {\n    padding-left: 38px;\n  }\n"]);return $e=function(){return e},e}function Je(){const e=_e()(["\n  .ant-dropdown-trigger {\n    margin-left: ","px;\n    box-shadow: none;\n    &:active {\n      box-shadow: none;\n    }\n  }\n\n  .btn-group .open .dropdown-toggle {\n    box-shadow: none;\n    &.button-default {\n      background: none;\n    }\n  }\n\n  i.angle {\n    color: ",";\n  }\n\n  svg.datasource-modal-trigger {\n    color: ",";\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .datasource-controls {\n    display: flex;\n  }\n"]);return Je=function(){return e},e}const et={actions:O.a.object.isRequired,onChange:O.a.func,value:O.a.string,datasource:O.a.object.isRequired,isEditable:O.a.bool,onDatasourceSave:O.a.func},tt=Te.a.div(Je(),({theme:e})=>e.gridUnit,({theme:e})=>e.colors.primary.base,({theme:e})=>e.colors.primary.base),nt=Object(Te.a)(q.a)($e());class at extends l.a.PureComponent{constructor(e){var t,n,a,r,o,s;super(e),this.state={showEditDatasourceModal:!1,showChangeDatasourceModal:!1},this.onDatasourceSave=i()(t=this.onDatasourceSave).call(t,this),this.toggleChangeDatasourceModal=i()(n=this.toggleChangeDatasourceModal).call(n,this),this.toggleEditDatasourceModal=i()(a=this.toggleEditDatasourceModal).call(a,this),this.toggleShowDatasource=i()(r=this.toggleShowDatasource).call(r,this),this.renderDatasource=i()(o=this.renderDatasource).call(o,this),this.handleMenuItemClick=i()(s=this.handleMenuItemClick).call(s,this)}onDatasourceSave(e){this.props.actions.setDatasource(e),this.props.onDatasourceSave&&this.props.onDatasourceSave(e)}toggleShowDatasource(){this.setState(({showDatasource:e})=>({showDatasource:!e}))}toggleChangeDatasourceModal(){this.setState(({showChangeDatasourceModal:e})=>({showChangeDatasourceModal:!e}))}toggleEditDatasourceModal(){this.setState(({showEditDatasourceModal:e})=>({showEditDatasourceModal:!e}))}handleMenuItemClick({key:e}){if("change_dataset"===e&&this.toggleChangeDatasourceModal(),"edit_dataset"===e&&this.toggleEditDatasourceModal(),"view_in_sql_lab"===e){const{datasource:e}=this.props,t={datasourceKey:e.id+"__"+e.type,sql:e.sql};Object(R.l)("/superset/sqllab",t)}}renderDatasource(){var e,t,n,a;const{datasource:r}=this.props,{showDatasource:o}=this.state;return Object(M.f)("div",{className:"m-t-10"},Object(M.f)(Se.a,{className:"m-t-0"},Object(M.f)("div",{className:"m-b-10"},Object(M.f)(Ze.a,null,Object(M.f)("i",{className:"fa fa-database"})," ",r.database.backend)," "+r.database.name+" "),o&&Object(M.f)(H.a,{className:"datasource-container"},Object(M.f)(nt,{md:6},Object(M.f)("strong",null,"Columns"),f()(e=we()(t=r.columns).call(t,0,50)).call(e,e=>Object(M.f)("div",{key:e.column_name},Object(M.f)(Re.a,{showType:!0,column:e}))),r.columns.length>50&&Object(M.f)("div",{className:"and-more"},"...")),Object(M.f)(nt,{md:6},Object(M.f)("strong",null,"Metrics"),f()(n=we()(a=r.metrics).call(a,0,50)).call(n,e=>Object(M.f)("div",{key:e.metric_name},Object(M.f)(ke.a,{metric:e,showType:!0}))),r.columns.length>50&&Object(M.f)("div",{className:"and-more"},"...")))))}render(){const{showChangeDatasourceModal:e,showEditDatasourceModal:t,showDatasource:n}=this.state,{datasource:a,onChange:r}=this.props,o=Object(M.f)(Me.i,{onClick:this.handleMenuItemClick},this.props.isEditable&&Object(M.f)(Me.i.Item,{key:"edit_dataset"},Object(E.c)("Edit Dataset")),Object(M.f)(Me.i.Item,{key:"change_dataset"},Object(E.c)("Change Dataset")),Object(M.f)(Me.i.Item,{key:"view_in_sql_lab"},Object(E.c)("View in SQL Lab"))),{health_check_message:i}=a;return Object(M.f)(tt,{className:"DatasourceControl"},Object(M.f)(G.a,this.props),Object(M.f)("div",{className:"datasource-controls"},Object(M.f)(De.a,{title:Object(E.c)("Expand/collapse dataset configuration")},Object(M.f)(Ze.a,{style:{textTransform:"none"},onClick:this.toggleShowDatasource},a.name," ",Object(M.f)("i",{className:"angle fa fa-angle-"+(n?"up":"down")}))),i&&Object(M.f)(De.a,{title:i},Object(M.f)(Pe.a,{name:"alert-solid",color:Te.b.colors.warning.base})),Object(M.f)(Me.f,{overlay:o,trigger:["click"]},Object(M.f)(De.a,{title:Object(E.c)("More dataset related options")},Object(M.f)(Pe.a,{className:"datasource-modal-trigger",name:"more-horiz"})))),Object(M.f)(je.a,{in:this.state.showDatasource},this.renderDatasource()),t&&Object(M.f)(Xe.a,{datasource:a,show:t,onDatasourceSave:this.onDatasourceSave,onHide:this.toggleEditDatasourceModal}),e&&Object(M.f)(Qe,{onDatasourceSave:this.onDatasourceSave,onHide:this.toggleChangeDatasourceModal,show:e,onChange:r}))}}at.propTypes=et,at.defaultProps={onChange:()=>{},onDatasourceSave:null,value:null,isEditable:!0};var rt=at,ot=n(956),it=n(2978),st=n(370),lt=(n(1153),n(55)),ct=n.n(lt),ut=n(1213),dt=n.n(ut),pt=n(65),ht=n.n(pt),ft=n(329),gt=n.n(ft),bt=n(59),mt=n.n(bt),vt=n(120),yt=n.n(vt),Ot=n(54),xt=n.n(Ot),Ct=n(830),wt=n.n(Ct),Et=n(106),_t=n.n(Et),St=n(290),jt=n.n(St),Tt=n(70),Rt=n(307),kt=O.a.shape({aggregate_name:O.a.string.isRequired});const Mt={aggregate:kt,showType:O.a.bool};function Dt({aggregate:e,showType:t}){return Object(M.f)("div",null,t&&Object(M.f)(Rt.a,{type:"aggregate"}),Object(M.f)("span",{className:"m-r-5 option-label"},e.aggregate_name))}Dt.propTypes=Mt;var Pt=O.a.shape({column_name:O.a.string.isRequired,type:O.a.string}),At=O.a.shape({metric_name:O.a.string.isRequired,expression:O.a.string.isRequired});const Nt={option:O.a.oneOfType([Pt,At,kt]).isRequired,addWarningToast:O.a.func.isRequired};function Ft({option:e,addWarningToast:t}){return e.metric_name?Object(M.f)(ke.a,{metric:e,showType:!0}):e.column_name?Object(M.f)(Re.a,{column:e,showType:!0}):e.aggregate_name?Object(M.f)(Dt,{aggregate:e,showType:!0}):(t("You must supply either a saved metric, column or aggregate to MetricDefinitionOption"),null)}Ft.propTypes=Nt;var Lt=Object(He.a)(Ft);const It={title:O.a.shape({label:O.a.string,hasCustomLabel:O.a.bool}),defaultLabel:O.a.string,onChange:O.a.func.isRequired};class Bt extends l.a.Component{constructor(e){var t,n,a,r,o;super(e),this.onMouseOver=i()(t=this.onMouseOver).call(t,this),this.onMouseOut=i()(n=this.onMouseOut).call(n,this),this.onClick=i()(a=this.onClick).call(a,this),this.onBlur=i()(r=this.onBlur).call(r,this),this.onInputBlur=i()(o=this.onInputBlur).call(o,this),this.state={isHovered:!1,isEditable:!1}}onMouseOver(){this.setState({isHovered:!0})}onMouseOut(){this.setState({isHovered:!1})}onClick(){this.setState({isEditable:!0})}onBlur(){this.setState({isEditable:!1})}onInputBlur(e){""===e.target.value&&(e.target.value=this.props.defaultLabel,this.props.onChange(e)),this.onBlur()}render(){const{title:e,onChange:t}=this.props;return this.state.isEditable?Object(M.f)(z.a,{className:"metric-edit-popover-label-input",type:"text",placeholder:e.label,value:e.hasCustomLabel?e.label:"",autoFocus:!0,onChange:t,onBlur:this.onInputBlur}):Object(M.f)(De.a,{placement:"top",title:"Click to edit label"},Object(M.f)("span",{className:"AdhocMetricEditPopoverTitle inline-editable",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onClick,onBlur:this.onBlur,role:"button",tabIndex:0},e.hasCustomLabel?e.label:"My Metric"," ",Object(M.f)("i",{className:"fa fa-pencil",style:{color:this.state.isHovered?"black":"grey"}})))}}Bt.propTypes=It;var Ut=n(113),Vt=n(176),Ht=n(109),qt=n(184),zt=n(400),Gt=n(45),Wt=(n(180),n(1214)),Yt=n.n(Wt);const Kt="SIMPLE",Qt="SQL";function Xt(e){if(e.sqlExpression&&Gt.p.test(e.sqlExpression)){var t,n;const a=ct()(t=e.sqlExpression).call(t,")"),r=Yt()(n=e.sqlExpression.substring(0,a)).call(n,"(");if(a>0&&r>0)return e.sqlExpression.substring(r+1,a)}return null}function Zt(e){if(e.sqlExpression&&Gt.p.test(e.sqlExpression)){var t;const n=ct()(t=e.sqlExpression).call(t,"(");if(n>0)return e.sqlExpression.substring(0,n)}return null}class $t{constructor(e){if(this.expressionType=e.expressionType||Kt,this.expressionType===Kt){const t=Xt(e);this.column=e.column||t&&{column_name:t},this.aggregate=e.aggregate||Zt(e),this.sqlExpression=null}else this.expressionType===Qt&&(this.sqlExpression=e.sqlExpression,this.column=null,this.aggregate=null);this.isNew=!!e.isNew,this.hasCustomLabel=!(!e.hasCustomLabel||!e.label),this.label=this.hasCustomLabel?e.label:this.getDefaultLabel(),this.optionName=e.optionName||"metric_"+Math.random().toString(36).substring(2,15)+"_"+Math.random().toString(36).substring(2,15)}getDefaultLabel(){const e=this.translateToSql();return e.length<43?e:e.substring(0,40)+"..."}translateToSql(){return this.expressionType===Kt?(this.aggregate||"")+"("+(this.column&&this.column.column_name||"")+")":this.expressionType===Qt?this.sqlExpression:""}duplicateWith(e){return new $t(p()({},this,{isNew:!1},e))}equals(e){return e.label===this.label&&e.expressionType===this.expressionType&&e.sqlExpression===this.sqlExpression&&e.aggregate===this.aggregate&&(e.column&&e.column.column_name)===(this.column&&this.column.column_name)}isValid(){return this.expressionType===Kt?!(!this.column||!this.aggregate):this.expressionType===Qt&&!!this.sqlExpression}inferSqlExpressionAggregate(){return Zt(this)}inferSqlExpressionColumn(){return Xt(this)}}function Jt(){const e=_e()(["\n  margin-left: ","px;\n"]);return Jt=function(){return e},e}const en={adhocMetric:O.a.instanceOf($t).isRequired,onChange:O.a.func.isRequired,onClose:O.a.func.isRequired,onResize:O.a.func.isRequired,columns:O.a.arrayOf(Pt),datasourceType:O.a.string,title:O.a.shape({label:O.a.string,hasCustomLabel:O.a.bool})},tn=Te.a.i(Jt(),({theme:e})=>2*e.gridUnit);class nn extends l.a.Component{constructor(e){var t,n,a,r,o,s,l,c,u;super(e),this.onSave=i()(t=this.onSave).call(t,this),this.onColumnChange=i()(n=this.onColumnChange).call(n,this),this.onAggregateChange=i()(a=this.onAggregateChange).call(a,this),this.onSqlExpressionChange=i()(r=this.onSqlExpressionChange).call(r,this),this.onDragDown=i()(o=this.onDragDown).call(o,this),this.onMouseMove=i()(s=this.onMouseMove).call(s,this),this.onMouseUp=i()(l=this.onMouseUp).call(l,this),this.handleAceEditorRef=i()(c=this.handleAceEditorRef).call(c,this),this.refreshAceEditor=i()(u=this.refreshAceEditor).call(u,this),this.state={adhocMetric:this.props.adhocMetric,width:320,height:240},document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}onSave(){const{title:e}=this.props,{hasCustomLabel:t}=e;let{label:n}=e;const{adhocMetric:a}=this.state,r=a.label;t||(n=r),this.props.onChange(p()({},a,{label:n,hasCustomLabel:t,isNew:!1})),this.props.onClose()}onColumnChange(e){var t;const n=mt()(t=this.props.columns).call(t,t=>t.id===e);this.setState(e=>({adhocMetric:e.adhocMetric.duplicateWith({column:n,expressionType:Kt})}))}onAggregateChange(e){this.setState(t=>({adhocMetric:t.adhocMetric.duplicateWith({aggregate:e,expressionType:Kt})}))}onSqlExpressionChange(e){this.setState(t=>({adhocMetric:t.adhocMetric.duplicateWith({sqlExpression:e,expressionType:Qt})}))}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),320),height:Math.max(this.dragStartHeight+2*(e.clientY-this.dragStartY),240)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}refreshAceEditor(){yt()(()=>{this.aceEditorRef&&this.aceEditorRef.editor.resize()},0)}renderColumnOption(e){return Object(M.f)(Re.a,{column:e,showType:!0})}render(){const e=this.props,{adhocMetric:t,columns:n}=e,a=X()(e,["adhocMetric","columns","onChange","onClose","onResize","datasourceType"]),{adhocMetric:o}=this.state,i=$()(zt.a).call(zt.a,f()(n).call(n,e=>({name:e.column_name,value:e.column_name,score:50,meta:"column"}))),s={placeholder:Object(E.c)("%s column(s)",n.length),value:o.column&&o.column.column_name||o.inferSqlExpressionColumn(),onChange:this.onColumnChange,allowClear:!0,showSearch:!0,filterOption:(e,t)=>{var n;return ct()(n=t.filterBy.toLowerCase()).call(n,e.toLowerCase())>=0}},l={placeholder:Object(E.c)("%s aggregates(s)",Gt.b.length),value:o.aggregate||o.inferSqlExpressionAggregate(),onChange:this.onAggregateChange,allowClear:!0,autoFocus:!0,showSearch:!0};var c;"druid"===this.props.datasourceType&&(l.options=u()(c=l.options).call(c,e=>"AVG"!==e));const d=o.isValid(),p=!o.equals(t);return Object(M.f)("div",r()({id:"metrics-edit-popover"},a),Object(M.f)(Ut.c,{id:"adhoc-metric-edit-tabs",defaultActiveKey:o.expressionType,className:"adhoc-metric-edit-tabs",style:{height:this.state.height,width:this.state.width},onChange:this.refreshAceEditor},Object(M.f)(Ut.c.TabPane,{className:"adhoc-metric-edit-tab",key:Kt,tab:"Simple"},Object(M.f)(V.a,null,Object(M.f)(Ht.a,null,Object(M.f)("strong",null,"column")),Object(M.f)(Vt.b,r()({name:"select-column"},s),f()(n).call(n,e=>Object(M.f)(Vt.b.Option,{value:e.id,filterBy:e.verbose_name||e.column_name,key:e.id},this.renderColumnOption(e))))),Object(M.f)(V.a,null,Object(M.f)(Ht.a,null,Object(M.f)("strong",null,"aggregate")),Object(M.f)(Vt.b,r()({name:"select-aggregate"},l),f()(Gt.b).call(Gt.b,e=>Object(M.f)(Vt.b.Option,{value:e,key:e},e))))),Object(M.f)(Ut.c.TabPane,{className:"adhoc-metric-edit-tab",key:Qt,tab:"Custom SQL"},"druid"!==this.props.datasourceType?Object(M.f)(V.a,null,Object(M.f)(qt.f,{showLoadingForImport:!0,ref:this.handleAceEditorRef,keywords:i,height:this.state.height-80+"px",onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:o.sqlExpression||o.translateToSql(),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"adhoc-filter-sql-editor",wrapEnabled:!0})):Object(M.f)("div",{className:"custom-sql-disabled-message"},"Custom SQL Metrics are not available on druid datasources"))),Object(M.f)("div",null,Object(M.f)(Ie.a,{buttonSize:"small",onClick:this.props.onClose,cta:!0},"Close"),Object(M.f)(Ie.a,{disabled:!d,buttonStyle:p&&d?"primary":"default",buttonSize:"small",onClick:this.onSave,cta:!0},"Save"),Object(M.f)(tn,{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}nn.propTypes=en,nn.defaultProps={columns:[]};const an={adhocMetric:O.a.instanceOf($t),onMetricEdit:O.a.func.isRequired,columns:O.a.arrayOf(Pt),multi:O.a.bool,datasourceType:O.a.string};class rn extends l.a.PureComponent{constructor(e){var t,n,a,r;super(e),this.onPopoverResize=i()(t=this.onPopoverResize).call(t,this),this.onLabelChange=i()(n=this.onLabelChange).call(n,this),this.closePopover=i()(a=this.closePopover).call(a,this),this.togglePopover=i()(r=this.togglePopover).call(r,this),this.state={popoverVisible:void 0,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel}}}componentWillUnmount(){this.props.adhocMetric.isNew=!1}onLabelChange(e){const t=e.target.value;this.setState({title:{label:t||this.props.adhocMetric.label,hasCustomLabel:!!t}})}onPopoverResize(){this.forceUpdate()}closePopover(){this.togglePopover(!1)}togglePopover(e){this.setState(({popoverVisible:t})=>(this.props.adhocMetric.isNew=!1,{popoverVisible:void 0===e?!t:e}))}render(){const{adhocMetric:e}=this.props,t=Object(M.f)(nn,{adhocMetric:e,title:this.state.title,columns:this.props.columns,datasourceType:this.props.datasourceType,onResize:this.onPopoverResize,onClose:this.closePopover,onChange:this.props.onMetricEdit}),n=Object(M.f)(Bt,{title:this.state.title,defaultLabel:e.label,onChange:this.onLabelChange});return Object(M.f)("div",{className:"metric-option",role:"button",tabIndex:0,onMouseDown:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation()},Object(M.f)(j.a,{placement:"right",trigger:"click",disabled:!0,content:t,defaultVisible:this.state.popoverVisible||e.isNew,visible:this.state.popoverVisible,onVisibleChange:this.togglePopover,title:n},Object(M.f)(Ze.a,{className:"option-label adhoc-option"},e.label,Object(M.f)("i",{className:"fa fa-caret-right adhoc-label-arrow"}))))}}var on=rn;rn.propTypes=an;var sn=O.a.oneOfType([O.a.shape({expressionType:O.a.oneOf([Kt]).isRequired,column:Pt.isRequired,aggregate:O.a.oneOf(v()(Gt.a)).isRequired,label:O.a.string.isRequired}),O.a.shape({expressionType:O.a.oneOf([Qt]).isRequired,sqlExpression:O.a.string.isRequired,label:O.a.string.isRequired})]);const ln={option:O.a.oneOfType([At,sn]).isRequired,onMetricEdit:O.a.func,columns:O.a.arrayOf(Pt),multi:O.a.bool,datasourceType:O.a.string};function cn({option:e,onMetricEdit:t,columns:n,multi:a,datasourceType:r}){return e.metric_name?Object(M.f)(ke.a,{metric:e}):e instanceof $t?Object(M.f)(on,{adhocMetric:e,onMetricEdit:t,columns:n,multi:a,datasourceType:r}):null}cn.propTypes=ln;const un={name:O.a.string.isRequired,onChange:O.a.func,value:O.a.oneOfType([O.a.arrayOf(O.a.oneOfType([O.a.string,sn])),O.a.oneOfType([O.a.string,sn])]),columns:O.a.arrayOf(Pt),savedMetrics:O.a.arrayOf(At),isLoading:O.a.bool,multi:O.a.bool,clearable:O.a.bool,datasourceType:O.a.string};function dn(e){return e&&!(e instanceof $t)&&e.expressionType}function pn(e){return e?xt()(e)?f()(e).call(e,e=>dn(e)?new $t(e):e):dn(e)?[new $t(e)]:[e]:[]}function hn(e){const{type:t}=e;return"string"!=typeof t?Gt.a.COUNT:""===t||"expression"===t?Gt.a.SUM:t.match(/.*char.*/i)||t.match(/string.*/i)||t.match(/.*text.*/i)?Gt.a.COUNT_DISTINCT:t.match(/.*int.*/i)||"LONG"===t||"DOUBLE"===t||"FLOAT"===t?Gt.a.SUM:t.match(/.*bool.*/i)?Gt.a.MAX:t.match(/.*time.*/i)?Gt.a.COUNT:t.match(/unknown/i)?Gt.a.COUNT:null}class fn extends l.a.PureComponent{constructor(e){var t,n,a,r,o,s,l;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.onPaste=i()(n=this.onPaste).call(n,this),this.onMetricEdit=i()(a=this.onMetricEdit).call(a,this),this.checkIfAggregateInInput=i()(r=this.checkIfAggregateInInput).call(r,this),this.optionsForSelect=i()(o=this.optionsForSelect).call(o,this),this.selectFilterOption=i()(s=this.selectFilterOption).call(s,this),this.isAutoGeneratedMetric=i()(l=this.isAutoGeneratedMetric).call(l,this),this.optionRenderer=e=>Object(M.f)(Lt,{option:e}),this.valueRenderer=e=>Object(M.f)(cn,{option:e,onMetricEdit:this.onMetricEdit,columns:this.props.columns,multi:this.props.multi,datasourceType:this.props.datasourceType}),this.select=null,this.selectRef=e=>{this.select=e?e.select:null},this.state={aggregateInInput:null,options:this.optionsForSelect(this.props),value:pn(this.props.value)}}UNSAFE_componentWillReceiveProps(e){const{value:t}=this.props;if(!jt()(this.props.columns,e.columns)||!jt()(this.props.savedMetrics,e.savedMetrics)){this.setState({options:this.optionsForSelect(e)}),function(e,t){var n,a,r,o,i;const s=new _t.a(f()(n=[...t.columns||[],...t.savedMetrics||[]]).call(n,({column_name:e,metric_name:t})=>e||t));return wt()(a=u()(r=f()(o=u()(i=xt()(e)?e:[e]).call(i,e=>e)).call(o,e=>e.column?e.column.column_name:e.column_name||e)).call(r,e=>e&&"string"==typeof e)).call(a,e=>s.has(e))}(t,e)||this.props.onChange([])}t!==e.value&&this.setState({value:pn(e.value)})}onMetricEdit(e){var t;let n=f()(t=this.state.value).call(t,t=>t.optionName===e.optionName?e:t);this.props.multi||(n=n[0]),this.props.onChange(n)}onChange(e){var t;if(null===e)return void this.props.onChange(null);let n;n=xt()(e)?e:e?[e]:[];const a=u()(t=f()(n).call(n,e=>{if(e.metric_name)return e.metric_name;if(e.column_name){const t=this.clearedAggregateInInput;return this.clearedAggregateInInput=null,new $t({isNew:!0,column:e,aggregate:t||hn(e)})}if(e instanceof $t)return e;if(e.aggregate_name&&this.select){const t=e.aggregate_name+"()";this.select.inputRef.value=t,this.select.handleInputChange({currentTarget:{value:t}}),yt()(()=>{this.select.focusInput(),this.select.inputRef.selectionStart=t.length-1,this.select.inputRef.selectionEnd=t.length-1})}return null})).call(t,e=>e);this.props.onChange(this.props.multi?a:a[0])}onPaste(e){const t=e.clipboardData.getData("Text");t&&this.checkIfAggregateInInput(t)}checkIfAggregateInInput(e){const t=e.toLowerCase(),n=mt()(Gt.b).call(Gt.b,e=>gt()(t).call(t,e.toLowerCase()+"("))||null;this.clearedAggregateInInput=this.state.aggregateInInput,this.setState({aggregateInInput:n})}optionsForSelect(e){const{columns:t,savedMetrics:n}=e,a=[...t||[],...t&&t.length?f()(Gt.b).call(Gt.b,e=>({aggregate_name:e})):[],...n||[]];return ht()(a).call(a,(e,t)=>(t.metric_name?e.push(p()({},t,{optionName:t.metric_name})):t.column_name?e.push(p()({},t,{optionName:"_col_"+t.column_name})):t.aggregate_name&&e.push(p()({},t,{optionName:"_aggregate_"+t.aggregate_name})),e),[])}isAutoGeneratedMetric(e){return"druid"===this.props.datasourceType?Gt.n.test(e.verbose_name):Gt.o.test(e.metric_name)}selectFilterOption({data:e},t){var n,a;if(this.state.aggregateInInput){var r;let n=t.length;dt()(t).call(t,")")&&(n=t.length-1);const a=t.substring(ct()(t).call(t,"(")+1,n);return e.column_name&&ct()(r=e.column_name.toLowerCase()).call(r,a)>=0}return e.optionName&&(!e.metric_name||!this.isAutoGeneratedMetric(e)||e.verbose_name)&&(ct()(n=e.optionName.toLowerCase()).call(n,t)>=0||e.verbose_name&&ct()(a=e.verbose_name.toLowerCase()).call(a,t)>=0)}render(){return Object(M.f)("div",{className:"metrics-select"},Object(M.f)(G.a,this.props),Object(M.f)(Tt.g,{isLoading:this.props.isLoading,isMulti:this.props.multi,name:"select-"+this.props.name,placeholder:this.props.multi?Object(E.c)("choose one or more columns or aggregate functions"):Object(E.c)("choose a column or aggregate function"),options:this.state.options,value:this.state.value,labelKey:"label",valueKey:"optionName",onPaste:this.onPaste,clearable:this.props.clearable,closeOnSelect:!0,onChange:this.onChange,optionRenderer:this.optionRenderer,valueRenderer:this.valueRenderer,valueRenderedAsLabel:!0,onInputChange:this.checkIfAggregateInInput,filterOption:this.selectFilterOption,selectRef:this.selectRef}))}}fn.propTypes=un,fn.defaultProps={onChange:()=>{},clearable:!0,savedMetrics:[],columns:[]};var gn=n(328);const bn="fix",mn="metric",vn={onChange:O.a.func,value:O.a.object,isFloat:O.a.bool,datasource:O.a.object.isRequired,default:O.a.shape({type:O.a.oneOf(["fix","metric"]),value:O.a.oneOfType([O.a.string,O.a.number])})},yn={onChange:()=>{},default:{type:bn,value:5}};class On extends l.a.Component{constructor(e){var t,n,a,r,o;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.setType=i()(n=this.setType).call(n,this),this.setFixedValue=i()(a=this.setFixedValue).call(a,this),this.setMetric=i()(r=this.setMetric).call(r,this),this.toggle=i()(o=this.toggle).call(o,this);const s=(e.value?e.value.type:e.default.type)||bn,l=(e.value?e.value.value:e.default.value)||"100";this.state={type:s,fixedValue:s===bn?l:"",metricValue:s===mn?l:null}}onChange(){this.props.onChange({type:this.state.type,value:this.state.type===bn?this.state.fixedValue:this.state.metricValue})}setType(e){this.setState({type:e},this.onChange)}setFixedValue(e){this.setState({fixedValue:e},this.onChange)}setMetric(e){this.setState({metricValue:e},this.onChange)}toggle(){this.setState(e=>({expanded:!e.expanded}))}render(){const e=(this.props.value||this.props.default).type||bn,t=this.props.datasource?this.props.datasource.columns:null,n=this.props.datasource?this.props.datasource.metrics:null;return Object(M.f)("div",null,Object(M.f)(G.a,this.props),Object(M.f)(Ze.a,{onClick:this.toggle},this.state.type===bn&&Object(M.f)("span",null,this.state.fixedValue),this.state.type===mn&&Object(M.f)("span",null,Object(M.f)("span",{style:{fontWeight:"normal"}},"metric: "),Object(M.f)("strong",null,this.state.metricValue?this.state.metricValue.label:null))),Object(M.f)(it.a,{className:"panel-spreaded",collapsible:!0,expanded:this.state.expanded,onToggle:this.toggle},Object(M.f)(it.a.Collapse,null,Object(M.f)(it.a.Body,null,Object(M.f)("div",{className:"well"},Object(M.f)(gn.a,{title:"Fixed",isSelected:e===bn,onSelect:()=>{this.setType(bn)}},Object(M.f)(st.a,{isFloat:!0,onChange:this.setFixedValue,onFocus:()=>{this.setType(bn)},value:this.state.fixedValue})),Object(M.f)(gn.a,{title:"Based on a metric",isSelected:e===mn,onSelect:()=>{this.setType(mn)}},Object(M.f)(fn,{name:"metric",columns:t,savedMetrics:n,multi:!1,onFocus:()=>{this.setType(mn)},onChange:this.setMetric,value:this.state.metricValue})))))))}}On.propTypes=vn,On.defaultProps=yn;const xn={onChange:O.a.func,value:O.a.oneOfType([O.a.string,O.a.number,O.a.object,O.a.bool,O.a.array,O.a.func])};function Cn(e){return Object(M.f)(z.a,{type:"hidden",value:e.value})}Cn.propTypes=xn,Cn.defaultProps={onChange:()=>{}};var wn=n(1036),En=n(414),_n=n(1151),Sn=n.n(_n);n(1257),n(1317);function jn(e){return Object(M.f)("span",{className:"BootstrapSliderWrapper"},Object(M.f)(Sn.a,e))}const Tn={onChange:O.a.func,value:O.a.oneOfType([O.a.string,O.a.number])};function Rn(e){return Object(M.f)("div",null,Object(M.f)(G.a,e),Object(M.f)(jn,r()({},e,{change:t=>{e.onChange(t.target.value)}})))}Rn.propTypes=Tn,Rn.defaultProps={onChange:()=>{}};var kn=n(1039),Mn=n(1037);const Dn={label:O.a.string,tooltip:O.a.string,colType:O.a.string,width:O.a.string,height:O.a.string,timeLag:O.a.oneOfType([O.a.string,O.a.number]),timeRatio:O.a.string,comparisonType:O.a.string,showYAxis:O.a.bool,yAxisBounds:O.a.array,bounds:O.a.array,d3format:O.a.string,dateFormat:O.a.string,onChange:O.a.func},Pn={label:Object(E.c)("Time Series Columns"),tooltip:"",colType:"",width:"",height:"",timeLag:"",timeRatio:"",comparisonType:"",showYAxis:!1,yAxisBounds:[null,null],bounds:[null,null],d3format:"",dateFormat:"",onChange:()=>{}},An=[{value:"value",label:"Actual value"},{value:"diff",label:"Difference"},{value:"perc",label:"Percentage"},{value:"perc_change",label:"Percentage Change"}],Nn=[{value:"time",label:"Time Comparison"},{value:"contrib",label:"Contribution"},{value:"spark",label:"Sparkline"},{value:"avg",label:"Period Average"}];class Fn extends l.a.Component{constructor(e){var t;super(e);const n={label:this.props.label,tooltip:this.props.tooltip,colType:this.props.colType,width:this.props.width,height:this.props.height,timeLag:this.props.timeLag||0,timeRatio:this.props.timeRatio,comparisonType:this.props.comparisonType,showYAxis:this.props.showYAxis,yAxisBounds:this.props.yAxisBounds,bounds:this.props.bounds,d3format:this.props.d3format,dateFormat:this.props.dateFormat};delete n.onChange,this.state=n,this.onChange=i()(t=this.onChange).call(t,this)}onChange(){this.props.onChange(this.state)}onSelectChange(e,t){this.setState({[e]:t.value},this.onChange)}onTextInputChange(e,t){this.setState({[e]:t.target.value},this.onChange)}onCheckboxChange(e,t){this.setState({[e]:t},this.onChange)}onBoundsChange(e){this.setState({bounds:e},this.onChange)}onYAxisBoundsChange(e){this.setState({yAxisBounds:e},this.onChange)}setType(){}textSummary(){return""+this.state.label}edit(){}formRow(e,t,n,a){return Object(M.f)(H.a,{style:{marginTop:"5px"}},Object(M.f)(q.a,{md:5},e+" ",Object(M.f)(S.a,{placement:"top",tooltip:t,label:n})),Object(M.f)(q.a,{md:7},a))}renderPopover(){var e,t,n,a,r,o,s,l,c,u,d,p,h,f,g;return Object(M.f)("div",{id:"ts-col-popo",style:{width:300}},this.formRow("Label","The column header label","time-lag",Object(M.f)(z.a,{value:this.state.label,onChange:i()(e=this.onTextInputChange).call(e,this,"label"),bsSize:"small",placeholder:"Label"})),this.formRow("Tooltip","Column header tooltip","col-tooltip",Object(M.f)(z.a,{value:this.state.tooltip,onChange:i()(t=this.onTextInputChange).call(t,this,"tooltip"),bsSize:"small",placeholder:"Tooltip"})),this.formRow("Type","Type of comparison, value difference or percentage","col-type",Object(M.f)(Tt.g,{value:this.state.colType,clearable:!1,onChange:i()(n=this.onSelectChange).call(n,this,"colType"),options:Nn})),Object(M.f)("hr",null),"spark"===this.state.colType&&this.formRow("Width","Width of the sparkline","spark-width",Object(M.f)(z.a,{value:this.state.width,onChange:i()(a=this.onTextInputChange).call(a,this,"width"),bsSize:"small",placeholder:"Width"})),"spark"===this.state.colType&&this.formRow("Height","Height of the sparkline","spark-width",Object(M.f)(z.a,{value:this.state.height,onChange:i()(r=this.onTextInputChange).call(r,this,"height"),bsSize:"small",placeholder:"height"})),ct()(o=["time","avg"]).call(o,this.state.colType)>=0&&this.formRow("Time Lag","Number of periods to compare against","time-lag",Object(M.f)(z.a,{value:this.state.timeLag,onChange:i()(s=this.onTextInputChange).call(s,this,"timeLag"),bsSize:"small",placeholder:"Time Lag"})),ct()(l=["spark"]).call(l,this.state.colType)>=0&&this.formRow("Time Ratio","Number of periods to ratio against","time-ratio",Object(M.f)(z.a,{value:this.state.timeRatio,onChange:i()(c=this.onTextInputChange).call(c,this,"timeRatio"),bsSize:"small",placeholder:"Time Ratio"})),"time"===this.state.colType&&this.formRow("Type","Type of comparison, value difference or percentage","comp-type",Object(M.f)(Tt.g,{value:this.state.comparisonType,clearable:!1,onChange:i()(u=this.onSelectChange).call(u,this,"comparisonType"),options:An})),"spark"===this.state.colType&&this.formRow("Show Y-axis","Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise.","show-y-axis-bounds",Object(M.f)(K.a,{value:this.state.showYAxis,onChange:i()(d=this.onCheckboxChange).call(d,this,"showYAxis")})),"spark"===this.state.colType&&this.formRow("Y-axis bounds","Manually set min/max values for the y-axis.","y-axis-bounds",Object(M.f)(Y,{value:this.state.yAxisBounds,onChange:i()(p=this.onYAxisBoundsChange).call(p,this)})),"spark"!==this.state.colType&&this.formRow("Color bounds","Number bounds used for color encoding from red to blue.\n              Reverse the numbers for blue to red. To get pure red or blue,\n              you can enter either only min or max.","bounds",Object(M.f)(Y,{value:this.state.bounds,onChange:i()(h=this.onBoundsChange).call(h,this)})),this.formRow("Number format","Optional d3 number format string","d3-format",Object(M.f)(z.a,{value:this.state.d3format,onChange:i()(f=this.onTextInputChange).call(f,this,"d3format"),bsSize:"small",placeholder:"Number format string"})),"spark"===this.state.colType&&this.formRow("Date format","Optional d3 date format string","date-format",Object(M.f)(z.a,{value:this.state.dateFormat,onChange:i()(g=this.onTextInputChange).call(g,this,"dateFormat"),bsSize:"small",placeholder:"Date format string"})))}render(){var e;return Object(M.f)("span",null,this.textSummary()," ",Object(M.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover(),title:"Column Configuration"},Object(M.f)(S.a,{icon:"edit",className:"text-primary",onClick:i()(e=this.edit).call(e,this),label:"edit-ts-column"})))}}Fn.propTypes=Dn,Fn.defaultProps=Pn;var Ln=n(960);const In=["longitude","latitude","zoom","bearing","pitch"],Bn={onChange:O.a.func,value:O.a.shape({longitude:O.a.number,latitude:O.a.number,zoom:O.a.number,bearing:O.a.number,pitch:O.a.number}),default:O.a.object,name:O.a.string.isRequired},Un={onChange:()=>{},default:{type:"fix",value:5},value:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0}};class Vn extends l.a.Component{constructor(e){var t;super(e),this.onChange=i()(t=this.onChange).call(t,this)}onChange(e,t){this.props.onChange(p()({},this.props.value,{[e]:t}))}renderTextControl(e){var t;return Object(M.f)("div",{key:e},Object(M.f)(Ht.a,null,e),Object(M.f)(st.a,{value:this.props.value[e],onChange:i()(t=this.onChange).call(t,this,e),isFloat:!0}))}renderPopover(){return Object(M.f)("div",{id:"filter-popover-"+this.props.name},f()(In).call(In,e=>this.renderTextControl(e)))}renderLabel(){return this.props.value.longitude&&this.props.value.latitude?Object(Ln.decimal2sexagesimal)(this.props.value.longitude)+" | "+Object(Ln.decimal2sexagesimal)(this.props.value.latitude):"N/A"}render(){return Object(M.f)("div",null,Object(M.f)(G.a,this.props),Object(M.f)(j.a,{container:document.body,trigger:"click",placement:"right",content:this.renderPopover(),title:"Viewport"},Object(M.f)(Ze.a,{className:"pointer"},this.renderLabel())))}}Vn.propTypes=Bn,Vn.defaultProps=Un;var Hn=n(823),qn=n(288),zn=n.n(qn),Gn=n(330),Wn=n.n(Gn),Yn=n(189);const Kn="SIMPLE",Qn="SQL",Xn={HAVING:"HAVING",WHERE:"WHERE"},Zn={"==":"=","!=":"<>",">":">","<":"<",">=":">=","<=":"<=",in:"in","not in":"not in",LIKE:"like",regex:"regex","IS NOT NULL":"IS NOT NULL","IS NULL":"IS NULL","LATEST PARTITION":({datasource:e})=>"= '{{ presto.latest_partition('"+e.schema+"."+e.datasource_name+"') }}'"};function $n(e,{useSimple:t}={}){if(e.expressionType===Kn||t){const t=Gt.i.has(e.operator),{subject:n}=e;return n+" "+(e.operator&&Gt.c.has(e.operator)?Zn[e.operator](e):Zn[e.operator])+" "+(t?"('":"")+(xt()(e.comparator)?e.comparator.join("','"):e.comparator||"")+(t?"')":"")}return e.expressionType===Qn?e.sqlExpression:""}class Jn{constructor(e){this.expressionType=e.expressionType||Kn,this.expressionType===Kn?(this.subject=e.subject,this.operator=e.operator,this.comparator=e.comparator,this.clause=e.clause,this.sqlExpression=null):this.expressionType===Qn&&(this.sqlExpression="string"==typeof e.sqlExpression?e.sqlExpression:$n(e,{useSimple:!0}),this.clause=e.clause,e.operator&&Gt.c.has(e.operator)?(this.subject=e.subject,this.operator=e.operator):(this.subject=null,this.operator=null),this.comparator=null),this.isExtra=!!e.isExtra,this.isNew=!!e.isNew,this.filterOptionName=e.filterOptionName||"filter_"+Math.random().toString(36).substring(2,15)+"_"+Math.random().toString(36).substring(2,15)}duplicateWith(e){return new Jn(p()({},this,{isNew:!1},e))}equals(e){return e.expressionType===this.expressionType&&e.sqlExpression===this.sqlExpression&&e.operator===this.operator&&e.comparator===this.comparator&&e.subject===this.subject}isValid(){if(this.expressionType===Kn){if("IS NOT NULL"===this.operator||"IS NULL"===this.operator)return!(!this.operator||!this.subject);if(this.operator&&this.subject&&this.clause)if(xt()(this.comparator)){if(this.comparator.length>0)return!0}else if(null!==this.comparator)return!0}else if(this.expressionType===Qn)return!(!this.sqlExpression||!this.clause);return!1}getDefaultLabel(){const e=this.translateToSql();return e.length<43?e:e.substring(0,40)+"..."}translateToSql(){return $n(this)}}var ea=O.a.oneOfType([O.a.shape({expressionType:O.a.oneOf([Kn]).isRequired,clause:O.a.oneOf([Xn.HAVING,Xn.WHERE]).isRequired,subject:O.a.string.isRequired,operator:O.a.oneOf(v()(Gt.j)).isRequired,comparator:O.a.oneOfType([O.a.string,O.a.arrayOf(O.a.string)]).isRequired}),O.a.shape({expressionType:O.a.oneOf([Qn]).isRequired,clause:O.a.oneOf([Xn.WHERE,Xn.HAVING]).isRequired,sqlExpression:O.a.string.isRequired})]);const ta={adhocMetric:sn,showType:O.a.bool};function na({adhocMetric:e,showType:t=!1}){return Object(M.f)("div",null,t&&Object(M.f)(Rt.a,{type:"expression"}),Object(M.f)("span",{className:"option-label"},e.label))}na.propTypes=ta;const aa={option:O.a.oneOfType([Pt,O.a.shape({saved_metric_name:O.a.string.isRequired}),sn]).isRequired};function ra({option:e}){return e.saved_metric_name?Object(M.f)("div",null,Object(M.f)(Rt.a,{type:"expression"}),Object(M.f)("span",{className:"option-label"},e.saved_metric_name)):e.column_name?Object(M.f)(Re.a,{column:e,showType:!0}):e.label?Object(M.f)(na,{adhocMetric:e,showType:!0}):void 0}function oa(){const e=_e()(["\n  .ant-select-selector::after {\n    content: '","';\n    display: inline-block;\n    white-space: nowrap;\n    color: ",";\n  }\n"]);return oa=function(){return e},e}ra.propTypes=aa;const ia=Object(Te.a)(Vt.b)(oa(),({labelText:e})=>e||"\\A0",({theme:e})=>e.colors.grayscale.light1),sa={adhocFilter:O.a.instanceOf(Jn).isRequired,onChange:O.a.func.isRequired,options:O.a.arrayOf(O.a.oneOfType([Pt,O.a.shape({saved_metric_name:O.a.string.isRequired}),sn])).isRequired,onHeightChange:O.a.func.isRequired,datasource:O.a.object,partitionColumn:O.a.string,popoverRef:O.a.object};class la extends l.a.Component{constructor(e){var t,n,a,r,o,s;super(e),this.onSubjectChange=i()(t=this.onSubjectChange).call(t,this),this.onOperatorChange=i()(n=this.onOperatorChange).call(n,this),this.onComparatorChange=i()(a=this.onComparatorChange).call(a,this),this.onInputComparatorChange=i()(r=this.onInputComparatorChange).call(r,this),this.isOperatorRelevant=i()(o=this.isOperatorRelevant).call(o,this),this.refreshComparatorSuggestions=i()(s=this.refreshComparatorSuggestions).call(s,this),this.state={suggestions:[],abortActiveRequest:null},this.selectProps={name:"select-column",showSearch:!0},this.menuPortalProps={menuPortalTarget:e.popoverRef,menuPosition:"fixed",menuPlacement:"bottom"}}UNSAFE_componentWillMount(){this.refreshComparatorSuggestions()}componentDidUpdate(e){e.adhocFilter.subject!==this.props.adhocFilter.subject&&this.refreshComparatorSuggestions()}onSubjectChange(e){var t;const n=mt()(t=this.props.options).call(t,t=>t.id===e||t.optionName===e);let a,r;n&&n.column_name?(a=n.column_name,r=Xn.WHERE):n&&(n.saved_metric_name||n.label)&&(a=n.saved_metric_name||n.label,r=Xn.HAVING);const{operator:o}=this.props.adhocFilter;this.props.onChange(this.props.adhocFilter.duplicateWith({subject:a,clause:r,operator:o&&this.isOperatorRelevant(o,a)?o:null,expressionType:Kn}))}onOperatorChange(e){const t=this.props.adhocFilter.comparator;let n;var a;Gt.i.has(e)?n=xt()(t)?t:u()(a=[t]).call(a,e=>e):n=xt()(t)?t[0]:t;e&&Gt.c.has(e)?this.props.onChange(this.props.adhocFilter.duplicateWith({subject:this.props.adhocFilter.subject,clause:Xn.WHERE,operator:e,expressionType:Qn,datasource:this.props.datasource})):this.props.onChange(this.props.adhocFilter.duplicateWith({operator:e,comparator:n,expressionType:Kn}))}onInputComparatorChange(e){this.onComparatorChange(e.target.value)}onComparatorChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({comparator:e,expressionType:Kn}))}refreshComparatorSuggestions(){const{datasource:e}=this.props,t=this.props.adhocFilter.subject,n=this.props.adhocFilter.clause===Xn.HAVING;if(t&&e&&e.filter_select&&!n){this.state.abortActiveRequest&&this.state.abortActiveRequest();const n=new AbortController,{signal:a}=n;this.setState({abortActiveRequest:n.abort,loading:!0}),Ne.a.get({signal:a,endpoint:"/superset/filter/"+e.type+"/"+e.id+"/"+t+"/"}).then(({json:e})=>{this.setState(()=>({suggestions:e,abortActiveRequest:null,loading:!1}))}).catch(()=>{this.setState(()=>({suggestions:[],abortActiveRequest:null,loading:!1}))})}}isOperatorRelevant(e,t){if(e&&Gt.c.has(e)){const{partitionColumn:e}=this.props;return e&&t&&t===e}return!("druid"===this.props.datasource.type&&ct()(Gt.l).call(Gt.l,e)>=0||"table"===this.props.datasource.type&&ct()(Gt.e).call(Gt.e,e)>=0||this.props.adhocFilter.clause===Xn.HAVING&&-1===ct()(Gt.h).call(Gt.h,e))}focusComparator(e){e&&e.focus()}optionsRemaining(){var e;const{suggestions:t}=this.state,{comparator:n}=this.props.adhocFilter,a=xt()(n)?u()(n).call(n,e=>b()(t).call(t,e)).length:0;return null!=(e=(null==t?void 0:t.length)-a)?e:0}createSuggestionsPlaceholder(){const e=this.optionsRemaining(),t=Object(E.c)("%s option(s)",e);return e?t:""}renderSubjectOptionLabel(e){return Object(M.f)(ra,{option:e})}render(){var e,t;const{adhocFilter:n,options:a,datasource:o}=this.props;let i=a;const{subject:s,operator:c,comparator:d}=n,p={value:null!=s?s:void 0,onChange:this.onSubjectChange,notFoundContent:Object(E.c)("No such column found. To filter on a metric, try the Custom SQL tab."),filterOption:(e,t)=>{var n;return ct()(n=t.filterBy.toLowerCase()).call(n,e.toLowerCase())>=0}};"druid"===o.type?p.placeholder=Object(E.c)("%s column(s) and metric(s)",i.length):(p.placeholder=n.clause===Xn.WHERE?Object(E.c)("%s column(s)",i.length):Object(E.c)("To filter on a metric, use Custom SQL tab."),i=u()(a).call(a,e=>e.column_name));const h={placeholder:Object(E.c)("%s operators(s)",Gt.k.length),value:c,onChange:this.onOperatorChange,filterOption:(e,t)=>{var n;return ct()(n=t.value.toLowerCase()).call(n,e.toLowerCase())>=0}};return Object(M.f)(l.a.Fragment,null,Object(M.f)(V.a,{className:"adhoc-filter-simple-column-dropdown"},Object(M.f)(Vt.b,r()({},this.selectProps,p,{name:"filter-column"}),f()(i).call(i,e=>Object(M.f)(Vt.b.Option,{value:e.id||e.optionName,filterBy:e.saved_metric_name||e.column_name||e.label,key:e.id},this.renderSubjectOptionLabel(e))))),Object(M.f)(V.a,null,Object(M.f)(Vt.b,r()({},this.selectProps,h,{name:"filter-operator"}),f()(e=u()(Gt.k).call(Gt.k,e=>this.isOperatorRelevant(e,s))).call(e,e=>Object(M.f)(Vt.b.Option,{value:e,key:e},function(e){return e===Gt.j["=="]?"equals":e===Gt.j["!="]?"not equal to":e===Gt.j.LIKE?"like":e===Gt.j["LATEST PARTITION"]?"use latest_partition template":e}(e))))),Object(M.f)(V.a,null,Gt.i.has(c)||this.state.suggestions.length>0?Object(M.f)(ia,{name:"filter-value",autoFocus:!0,allowClear:!0,showSearch:!0,mode:Gt.i.has(c)&&"tags",tokenSeparators:[","," ",";"],loading:this.state.loading,value:d,onChange:this.onComparatorChange,notFoundContent:Object(E.c)("type a value here"),disabled:b()(Gt.d).call(Gt.d,c),placeholder:this.createSuggestionsPlaceholder(),labelText:(null==d?void 0:d.length)>0&&this.createSuggestionsPlaceholder()},f()(t=this.state.suggestions).call(t,e=>Object(M.f)(Vt.b.Option,{value:e,key:e},e))):Object(M.f)("input",{name:"filter-value",ref:this.focusComparator,type:"text",onChange:this.onInputComparatorChange,value:d,className:"form-control input-sm",placeholder:Object(E.c)("Filter value (case sensitive)"),disabled:b()(Gt.d).call(Gt.d,c)})))}}la.propTypes=sa,la.defaultProps={datasource:{}};const ca={adhocFilter:O.a.instanceOf(Jn).isRequired,onChange:O.a.func.isRequired,options:O.a.arrayOf(O.a.oneOfType([Pt,O.a.shape({saved_metric_name:O.a.string.isRequired}),sn])).isRequired,height:O.a.number.isRequired};class ua extends l.a.Component{constructor(e){var t,n,a;super(e),this.onSqlExpressionChange=i()(t=this.onSqlExpressionChange).call(t,this),this.onSqlExpressionClauseChange=i()(n=this.onSqlExpressionClauseChange).call(n,this),this.handleAceEditorRef=i()(a=this.handleAceEditorRef).call(a,this),this.selectProps={name:"select-column"}}componentDidUpdate(){this.aceEditorRef&&this.aceEditorRef.editor.resize()}onSqlExpressionClauseChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({clause:e,expressionType:Qn}))}onSqlExpressionChange(e){this.props.onChange(this.props.adhocFilter.duplicateWith({sqlExpression:e,expressionType:Qn}))}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}render(){var e,t;const{adhocFilter:n,height:a,options:o}=this.props,i={placeholder:Object(E.c)("choose WHERE or HAVING..."),value:n.clause,onChange:this.onSqlExpressionClauseChange},s=$()(zt.a).call(zt.a,u()(e=f()(o).call(o,e=>e.column_name?{name:e.column_name,value:e.column_name,score:50,meta:"option"}:null)).call(e,Boolean));return Object(M.f)("span",null,Object(M.f)(V.a,{className:"filter-edit-clause-section"},Object(M.f)(Vt.b,r()({},this.selectProps,i,{className:"filter-edit-clause-dropdown"}),f()(t=v()(Xn)).call(t,e=>Object(M.f)(Vt.b.Option,{value:e,key:e},e))),Object(M.f)("span",{className:"filter-edit-clause-info"},Object(M.f)("strong",null,"WHERE")," ",Object(E.c)("filters by columns"),Object(M.f)("br",null),Object(M.f)("strong",null,"HAVING")," ",Object(E.c)("filters by metrics"))),Object(M.f)(V.a,null,Object(M.f)(qt.f,{ref:this.handleAceEditorRef,keywords:s,height:a-130+"px",onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:n.sqlExpression||n.translateToSql(),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"adhoc-filter-sql-editor",wrapEnabled:!0})))}}function da(){const e=_e()(["\n  margin-left: ","px;\n"]);return da=function(){return e},e}ua.propTypes=ca;const pa={adhocFilter:O.a.instanceOf(Jn).isRequired,onChange:O.a.func.isRequired,onClose:O.a.func.isRequired,onResize:O.a.func.isRequired,options:O.a.arrayOf(O.a.oneOfType([Pt,O.a.shape({saved_metric_name:O.a.string.isRequired}),sn])).isRequired,datasource:O.a.object,partitionColumn:O.a.string,theme:O.a.object},ha=Te.a.i(da(),({theme:e})=>2*e.gridUnit);class fa extends l.a.Component{constructor(e){var t,n,a,r,o,s;super(e),this.onSave=i()(t=this.onSave).call(t,this),this.onDragDown=i()(n=this.onDragDown).call(n,this),this.onMouseMove=i()(a=this.onMouseMove).call(a,this),this.onMouseUp=i()(r=this.onMouseUp).call(r,this),this.onAdhocFilterChange=i()(o=this.onAdhocFilterChange).call(o,this),this.adjustHeight=i()(s=this.adjustHeight).call(s,this),this.state={adhocFilter:this.props.adhocFilter,width:320,height:240},this.popoverContentRef=l.a.createRef()}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}onAdhocFilterChange(e){this.setState({adhocFilter:e})}onSave(){this.props.onChange(p()({},this.state.adhocFilter,{isNew:!1})),this.props.onClose()}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),320),height:Math.max(this.dragStartHeight+2*(e.clientY-this.dragStartY),240)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}adjustHeight(e){this.setState(t=>({height:t.height+e}))}render(){const e=this.props,{adhocFilter:t,options:n,datasource:a,partitionColumn:o}=e,i=X()(e,["adhocFilter","options","onChange","onClose","onResize","datasource","partitionColumn","theme"]),{adhocFilter:s}=this.state,l=s.isValid(),c=!s.equals(t);return Object(M.f)("div",r()({id:"filter-edit-popover"},i,{ref:this.popoverContentRef}),Object(M.f)(Ut.c,{id:"adhoc-filter-edit-tabs",defaultActiveKey:s.expressionType,className:"adhoc-filter-edit-tabs",style:{height:this.state.height,width:this.state.width}},Object(M.f)(Ut.c.TabPane,{className:"adhoc-filter-edit-tab",key:Kn,tab:"Simple"},Object(M.f)(la,{adhocFilter:this.state.adhocFilter,onChange:this.onAdhocFilterChange,options:n,datasource:a,onHeightChange:this.adjustHeight,partitionColumn:o,popoverRef:this.popoverContentRef.current})),Object(M.f)(Ut.c.TabPane,{className:"adhoc-filter-edit-tab",key:Qn,tab:"Custom SQL"},this.props.datasource&&"druid"===this.props.datasource.type?Object(M.f)("div",{className:"custom-sql-disabled-message"},"Custom SQL Filters are not available on druid datasources"):Object(M.f)(ua,{adhocFilter:this.state.adhocFilter,onChange:this.onAdhocFilterChange,options:this.props.options,height:this.state.height}))),Object(M.f)("div",null,Object(M.f)(Ie.a,{buttonSize:"small",onClick:this.props.onClose,cta:!0},Object(E.c)("Close")),Object(M.f)(Ie.a,{disabled:!l,buttonStyle:c&&l?"primary":"default",buttonSize:"small",className:"m-r-5",onClick:this.onSave,cta:!0},Object(E.c)("Save")),Object(M.f)(ha,{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}fa.propTypes=pa;const ga={adhocFilter:O.a.instanceOf(Jn).isRequired,onFilterEdit:O.a.func.isRequired,options:O.a.arrayOf(O.a.oneOfType([Pt,O.a.shape({saved_metric_name:O.a.string.isRequired}),sn])).isRequired,datasource:O.a.object,partitionColumn:O.a.string};class ba extends l.a.PureComponent{constructor(e){var t,n,a;super(e),this.onPopoverResize=i()(t=this.onPopoverResize).call(t,this),this.closePopover=i()(n=this.closePopover).call(n,this),this.togglePopover=i()(a=this.togglePopover).call(a,this),this.state={popoverVisible:!!e.adhocFilter.isNew}}componentWillUnmount(){this.props.adhocFilter.isNew=!1}onPopoverResize(){this.forceUpdate()}closePopover(){this.togglePopover(!1)}togglePopover(e){this.setState(({popoverVisible:t})=>(this.props.adhocFilter.isNew=!1,{popoverVisible:void 0===e?!t:e}))}render(){const{adhocFilter:e}=this.props,t=Object(M.f)(fa,{adhocFilter:e,options:this.props.options,datasource:this.props.datasource,partitionColumn:this.props.partitionColumn,onResize:this.onPopoverResize,onClose:this.closePopover,onChange:this.props.onFilterEdit});return Object(M.f)("div",{role:"button",tabIndex:0,onMouseDown:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation()},e.isExtra&&Object(M.f)(S.a,{icon:"exclamation-triangle",placement:"top",className:"m-r-5 text-muted",tooltip:Object(E.c)("\n                This filter was inherited from the dashboard's context.\n                It won't be saved when saving the chart.\n              ")}),Object(M.f)(j.a,{placement:"right",trigger:"click",content:t,defaultVisible:this.state.popoverVisible||e.isNew,visible:this.state.popoverVisible,onVisibleChange:()=>this.togglePopover(!0),overlayStyle:{zIndex:1}},Object(M.f)(Ze.a,{className:"option-label adhoc-option adhoc-filter-option"},e.getDefaultLabel(),Object(M.f)("i",{className:"fa fa-caret-right adhoc-label-arrow"}))))}}var ma=ba;ba.propTypes=ga;const va={name:O.a.string,onChange:O.a.func,value:O.a.arrayOf(ea),datasource:O.a.object,columns:O.a.arrayOf(Pt),savedMetrics:O.a.arrayOf(At),formData:O.a.shape({metric:O.a.oneOfType([O.a.string,sn]),metrics:O.a.arrayOf(O.a.oneOfType([O.a.string,sn]))}),isLoading:O.a.bool};function ya(e){return e&&!(e instanceof Jn)&&e.expressionType}class Oa extends l.a.Component{constructor(e){var t,n,a,r,o;super(e),this.optionsForSelect=i()(t=this.optionsForSelect).call(t,this),this.onFilterEdit=i()(n=this.onFilterEdit).call(n,this),this.onChange=i()(a=this.onChange).call(a,this),this.getMetricExpression=i()(r=this.getMetricExpression).call(r,this);const s=f()(o=this.props.value||[]).call(o,e=>ya(e)?new Jn(e):e);this.optionRenderer=e=>Object(M.f)(ra,{option:e}),this.valueRenderer=e=>Object(M.f)(ma,{adhocFilter:e,onFilterEdit:this.onFilterEdit,options:this.state.options,datasource:this.props.datasource}),this.state={values:s,options:this.optionsForSelect(this.props)}}componentDidMount(){const{datasource:e}=this.props;if(e&&"table"===e.type){var t;const n=null===(t=e.database)||void 0===t?void 0:t.id,{datasource_name:a,schema:r,is_sqllab_view:o}=e;!o&&n&&a&&r&&Ne.a.get({endpoint:"/superset/extra_table_metadata/"+n+"/"+a+"/"+r+"/"}).then(({json:e})=>{if(e&&e.partitions){const{partitions:t}=e;if(t&&t.cols&&1===v()(t.cols).length){const e=t.cols[0];this.valueRenderer=t=>Object(M.f)(ma,{adhocFilter:t,onFilterEdit:this.onFilterEdit,options:this.state.options,datasource:this.props.datasource,partitionColumn:e})}}}).catch(e=>{Yn.a.error("fetch extra_table_metadata:",e.statusText)})}}UNSAFE_componentWillReceiveProps(e){var t;(this.props.columns===e.columns&&this.props.formData===e.formData||this.setState({options:this.optionsForSelect(e)}),this.props.value!==e.value)&&this.setState({values:f()(t=e.value||[]).call(t,e=>ya(e)?new Jn(e):e)})}onFilterEdit(e){var t;this.props.onChange(f()(t=Wn()(this.state)).call(t,t=>t.filterOptionName===e.filterOptionName?e:t))}onChange(e){var t,n;const a=u()(t=f()(n=e||[]).call(n,e=>e instanceof Jn?e:e.saved_metric_name?new Jn({expressionType:"druid"===this.props.datasource.type?Kn:Qn,subject:"druid"===this.props.datasource.type?e.saved_metric_name:this.getMetricExpression(e.saved_metric_name),operator:Gt.j[">"],comparator:0,clause:Xn.HAVING,isNew:!0}):e.label?new Jn({expressionType:"druid"===this.props.datasource.type?Kn:Qn,subject:"druid"===this.props.datasource.type?e.label:new $t(e).translateToSql(),operator:Gt.j[">"],comparator:0,clause:Xn.HAVING,isNew:!0}):e.column_name?new Jn({expressionType:Kn,subject:e.column_name,operator:Gt.j["=="],comparator:"",clause:Xn.WHERE,isNew:!0}):null)).call(t,e=>e);this.props.onChange(a)}getMetricExpression(e){var t;return mt()(t=this.props.savedMetrics).call(t,t=>t.metric_name===e).expression}optionsForSelect(e){var t,n,a;const r=u()(t=[...e.columns,...f()(n=[...e.formData.metrics||[],e.formData.metric]).call(n,e=>e&&("string"==typeof e?{saved_metric_name:e}:new $t(e)))]).call(t,e=>e);return zn()(a=ht()(r).call(r,(e,t)=>(t.saved_metric_name?e.push(p()({},t,{filterOptionName:t.saved_metric_name})):t.column_name?e.push(p()({},t,{filterOptionName:"_col_"+t.column_name})):t instanceof $t&&e.push(p()({},t,{filterOptionName:"_adhocmetric_"+t.label})),e),[])).call(a,(e,t)=>(e.saved_metric_name||e.column_name||e.label).localeCompare(t.saved_metric_name||t.column_name||t.label))}render(){return Object(M.f)("div",{className:"metrics-select"},Object(M.f)(G.a,this.props),Object(M.f)(Tt.g,{isMulti:!0,isLoading:this.props.isLoading,name:"select-"+this.props.name,placeholder:Object(E.c)("choose one or more columns or metrics"),options:this.state.options,value:Wn()(this.state),labelKey:"label",valueKey:"filterOptionName",clearable:!0,closeOnSelect:!0,onChange:this.onChange,optionRenderer:this.optionRenderer,valueRenderer:this.valueRenderer}))}}Oa.propTypes=va,Oa.defaultProps={name:"",onChange:()=>{},columns:[],savedMetrics:[],formData:{}};var xa=n(161),Ca=n.n(xa);const wa={marginTop:"5px",minHeight:"30px"},Ea={textAlign:"right"},_a={label:O.a.string.isRequired,tooltip:O.a.string,control:O.a.node.isRequired,isCheckbox:O.a.bool};function Sa({label:e,tooltip:t,control:n,isCheckbox:a}){const r=Object(M.f)("span",null,e," ",t&&Object(M.f)(S.a,{placement:"top",label:e,tooltip:t}));return a?Object(M.f)(H.a,{style:wa},Object(M.f)(q.a,{md:4,style:Ea},n),Object(M.f)(q.a,{md:8},r)):Object(M.f)(H.a,{style:wa},Object(M.f)(q.a,{md:4,style:Ea},r),Object(M.f)(q.a,{md:8},n))}Sa.propTypes=_a,Sa.defaultProps={tooltip:null,isCheckbox:!1};const ja=new _t.a(["TINYINT","SMALLINT","INT","INTEGER","BIGINT","LONG"]),Ta=new _t.a(["FLOAT","DOUBLE","REAL","NUMERIC","DECIMAL","MONEY"]),Ra={datasource:O.a.object.isRequired,onChange:O.a.func,asc:O.a.bool,clearable:O.a.bool,multiple:O.a.bool,column:O.a.string,label:O.a.string,metric:O.a.string,searchAllOptions:O.a.bool,defaultValue:O.a.string},ka={width:350};class Ma extends l.a.Component{constructor(e){var t,n;super(e);const{column:a,metric:r,asc:o,clearable:s,multiple:l,searchAllOptions:c,label:u,defaultValue:d}=e;this.state={column:a,metric:r,label:u,asc:o,clearable:s,multiple:l,searchAllOptions:c,defaultValue:d},this.onChange=i()(t=this.onChange).call(t,this),this.onControlChange=i()(n=this.onControlChange).call(n,this)}onChange(){this.props.onChange(this.state)}onControlChange(e,t){let n=t;const{column:a,multiple:r}=this.state;if(t&&!r&&e===Gt.f.DEFAULT_VALUE){var o;const{datasource:e}=this.props,r=mt()(o=e.columns).call(o,e=>e.column_name===a);if(r&&r.type){const e=r.type.toUpperCase();"BOOLEAN"===e?n="true"===t:ja.has(e)?n=U()(Number(t))?null:Ca()(t,10):Ta.has(e)&&(n=U()(Number(t))?null:I()(t))}}this.setState({[e]:n},this.onChange)}setType(){}textSummary(){return this.state.column||"N/A"}renderForm(){var e,t,n,a,r,o;return Object(M.f)("div",null,Object(M.f)(Sa,{label:Object(E.c)("Column"),control:Object(M.f)(En.a,{value:this.state.column,name:"column",clearable:!1,options:$()(e=f()(t=u()(n=this.props.datasource.columns).call(n,e=>e!==this.state.column)).call(t,e=>({value:e.column_name,label:e.column_name}))).call(e,[{value:this.state.column,label:this.state.column}]),onChange:e=>this.onControlChange("column",e)})}),Object(M.f)(Sa,{label:Object(E.c)("Label"),control:Object(M.f)(st.a,{value:this.state.label,name:"label",onChange:e=>this.onControlChange("label",e)})}),Object(M.f)(Sa,{label:Object(E.c)("Default"),tooltip:Object(E.c)("(optional) default value for the filter, when using the multiple option, you can use a semicolon-delimited list of options."),control:Object(M.f)(st.a,{value:this.state.defaultValue,name:"defaultValue",onChange:e=>this.onControlChange(Gt.f.DEFAULT_VALUE,e)})}),Object(M.f)(Sa,{label:Object(E.c)("Sort Metric"),tooltip:Object(E.c)("Metric to sort the results by"),control:Object(M.f)(En.a,{value:this.state.metric,name:"column",options:$()(a=f()(r=u()(o=this.props.datasource.metrics).call(o,e=>e!==this.state.metric)).call(r,e=>({value:e.metric_name,label:e.metric_name}))).call(a,[{value:this.state.metric,label:this.state.metric}]),onChange:e=>this.onControlChange("metric",e)})}),Object(M.f)(Sa,{label:Object(E.c)("Sort Ascending"),tooltip:Object(E.c)("Check for sorting ascending"),isCheckbox:!0,control:Object(M.f)(K.a,{value:this.state.asc,onChange:e=>this.onControlChange("asc",e)})}),Object(M.f)(Sa,{label:Object(E.c)("Allow Multiple Selections"),isCheckbox:!0,tooltip:Object(E.c)("Multiple selections allowed, otherwise filter is limited to a single value"),control:Object(M.f)(K.a,{value:this.state.multiple,onChange:e=>this.onControlChange(Gt.f.MULTIPLE,e)})}),Object(M.f)(Sa,{label:Object(E.c)("Search All Filter Options"),tooltip:Object(E.c)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database)."),isCheckbox:!0,control:Object(M.f)(K.a,{value:this.state.searchAllOptions,onChange:e=>this.onControlChange(Gt.f.SEARCH_ALL_OPTIONS,e)})}),Object(M.f)(Sa,{label:Object(E.c)("Required"),tooltip:Object(E.c)("User must select a value for this filter"),isCheckbox:!0,control:Object(M.f)(K.a,{value:!this.state.clearable,onChange:e=>this.onControlChange("clearable",!e)})}))}renderPopover(){return Object(M.f)("div",{id:"ts-col-popo",style:ka},this.renderForm())}render(){return Object(M.f)("span",null,this.textSummary()," ",Object(M.f)(j.a,{trigger:"click",placement:"right",content:this.renderPopover(),title:Object(E.c)("Filter Configuration")},Object(M.f)(S.a,{icon:"edit",className:"text-primary",label:"edit-ts-column"})))}}Ma.propTypes=Ra,Ma.defaultProps={onChange:()=>{},asc:!0,clearable:!0,multiple:!0,searchAllOptions:!1};var Da={AnnotationLayerControl:F,BoundsControl:Y,CheckboxControl:K.a,CollectionControl:se,ColorMapControl:he,ColorPickerControl:ye,ColorSchemeControl:xe.a,DatasourceControl:rt,DateFilterControl:ot.a,FixedOrMetricControl:On,HiddenControl:Cn,SelectAsyncControl:wn.a,SelectControl:En.a,SliderControl:Rn,SpatialControl:kn.a,TextAreaControl:Mn.a,TextControl:st.a,TimeSeriesColumnControl:Fn,ViewportControl:Vn,VizTypeControl:Hn.a,MetricsControl:fn,AdhocFilterControl:Oa,FilterBoxItemControl:Ma};n(1318);class Pa extends l.a.PureComponent{constructor(e){var t,n,a;super(e),this.state={hovered:!1},this.onChange=i()(t=this.onChange).call(t,this),this.onMouseEnter=i()(n=this.setHover).call(n,this,!0),this.onMouseLeave=i()(a=this.setHover).call(a,this,!1)}onChange(e,t){this.props.actions.setControlValue(this.props.name,e,t)}setHover(e){this.setState({hovered:e})}render(){const{type:e,hidden:t}=this.props;if(!e)return null;const n="string"==typeof e?Da[e]:e;return Object(M.f)("div",{className:"Control",style:t?{display:"none"}:void 0,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},Object(M.f)(n,r()({onChange:this.onChange,hovered:this.state.hovered},this.props)))}}},1029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var a=i(n(0)),r=i(n(82)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1272));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.Checkboard=function(e){var t=e.white,n=e.grey,i=e.size,s=e.renderers,l=e.borderRadius,c=e.boxShadow,u=(0,r.default)({default:{grid:{borderRadius:l,boxShadow:c,absolute:"0px 0px 0px 0px",background:"url("+o.get(t,n,i,s.canvas)+") center left"}}});return a.default.createElement("div",{style:u.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=s},1030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),i=c(o),s=c(n(211)),l=c(n(303));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.ColorWrap=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(l.default.simpleCheckForValidColor(e)){var a=l.default.toState(e,e.h||t.state.oldHue);t.setState(a),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,a,n),t.props.onChange&&t.props.onChange(a,n)}},t.handleSwatchHover=function(e,n){if(l.default.simpleCheckForValidColor(e)){var a=l.default.toState(e,e.h||t.state.oldHue);t.setState(a),t.props.onSwatchHover&&t.props.onSwatchHover(a,n)}},t.state=a({},l.default.toState(e.color,0)),t.debounce=(0,s.default)((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(a({},l.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.default.createElement(e,a({},this.props,this.state,{onChange:this.handleChange},t))}}]),n}(o.PureComponent||o.Component);return t.propTypes=a({},e.propTypes),t.defaultProps=a({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=u},1031:function(e,t,n){"use strict";n.r(t),n.d(t,"red",(function(){return a})),n.d(t,"pink",(function(){return r})),n.d(t,"purple",(function(){return o})),n.d(t,"deepPurple",(function(){return i})),n.d(t,"indigo",(function(){return s})),n.d(t,"blue",(function(){return l})),n.d(t,"lightBlue",(function(){return c})),n.d(t,"cyan",(function(){return u})),n.d(t,"teal",(function(){return d})),n.d(t,"green",(function(){return p})),n.d(t,"lightGreen",(function(){return h})),n.d(t,"lime",(function(){return f})),n.d(t,"yellow",(function(){return g})),n.d(t,"amber",(function(){return b})),n.d(t,"orange",(function(){return m})),n.d(t,"deepOrange",(function(){return v})),n.d(t,"brown",(function(){return y})),n.d(t,"grey",(function(){return O})),n.d(t,"blueGrey",(function(){return x})),n.d(t,"darkText",(function(){return C})),n.d(t,"lightText",(function(){return w})),n.d(t,"darkIcons",(function(){return E})),n.d(t,"lightIcons",(function(){return _})),n.d(t,"white",(function(){return S})),n.d(t,"black",(function(){return j}));var a={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},o={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},i={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},u={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},d={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},p={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},h={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},f={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},g={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},b={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},v={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},y={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},O={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},x={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},C={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},w={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},E={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},_={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},S="#ffffff",j="#000000";t.default={red:a,pink:r,purple:o,deepPurple:i,indigo:s,blue:l,lightBlue:c,cyan:u,teal:d,green:p,lightGreen:h,lime:f,yellow:g,amber:b,orange:m,deepOrange:v,brown:y,grey:O,blueGrey:x,darkText:C,lightText:w,darkIcons:E,lightIcons:_,white:S,black:j}},1032:function(e,t,n){},1033:function(e,t,n){},1034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPicker=t.TwitterPicker=t.SwatchesPicker=t.SliderPicker=t.SketchPicker=t.PhotoshopPicker=t.MaterialPicker=t.HuePicker=t.GithubPicker=t.CompactPicker=t.ChromePicker=t.default=t.CirclePicker=t.BlockPicker=t.AlphaPicker=void 0;var a=n(1263);Object.defineProperty(t,"AlphaPicker",{enumerable:!0,get:function(){return v(a).default}});var r=n(1282);Object.defineProperty(t,"BlockPicker",{enumerable:!0,get:function(){return v(r).default}});var o=n(1284);Object.defineProperty(t,"CirclePicker",{enumerable:!0,get:function(){return v(o).default}});var i=n(1286);Object.defineProperty(t,"ChromePicker",{enumerable:!0,get:function(){return v(i).default}});var s=n(1290);Object.defineProperty(t,"CompactPicker",{enumerable:!0,get:function(){return v(s).default}});var l=n(1293);Object.defineProperty(t,"GithubPicker",{enumerable:!0,get:function(){return v(l).default}});var c=n(1295);Object.defineProperty(t,"HuePicker",{enumerable:!0,get:function(){return v(c).default}});var u=n(1297);Object.defineProperty(t,"MaterialPicker",{enumerable:!0,get:function(){return v(u).default}});var d=n(1298);Object.defineProperty(t,"PhotoshopPicker",{enumerable:!0,get:function(){return v(d).default}});var p=n(1304);Object.defineProperty(t,"SketchPicker",{enumerable:!0,get:function(){return v(p).default}});var h=n(1307);Object.defineProperty(t,"SliderPicker",{enumerable:!0,get:function(){return v(h).default}});var f=n(1311);Object.defineProperty(t,"SwatchesPicker",{enumerable:!0,get:function(){return v(f).default}});var g=n(1314);Object.defineProperty(t,"TwitterPicker",{enumerable:!0,get:function(){return v(g).default}});var b=n(1030);Object.defineProperty(t,"CustomPicker",{enumerable:!0,get:function(){return v(b).default}});var m=v(i);function v(e){return e&&e.__esModule?e:{default:e}}t.default=m.default},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(298),r=n.n(a),o=(n(0),n(2)),i=n.n(o),s=n(58),l=n(1);const c={label:i.a.string.isRequired,tooltip:i.a.node.isRequired,children:i.a.node.isRequired,placement:i.a.string,trigger:i.a.oneOfType([i.a.string,i.a.arrayOf(i.a.string)])};function u({label:e,tooltip:t,children:n,placement:a,trigger:o}){return Object(l.f)(s.a,{id:r()(e)+"-tooltip",placement:a,title:t,trigger:o},n)}u.propTypes=c,u.defaultProps={placement:"top"}},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return j}));var a=n(4),r=n.n(a),o=n(29),i=n.n(o),s=n(8),l=n.n(s),c=(n(0),n(50)),u=n(1),d=n(14),p=n(35);function h(){const e=l()(["\n  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-tab {\n    margin: 0 ","px;\n    padding: ",";\n    background: transparent;\n    border: none;\n  }\n\n  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-ink-bar {\n    visibility: visible;\n  }\n\n  .ant-tabs-tab-btn {\n    font-size: ","px;\n  }\n\n  .ant-tabs-tab-remove {\n    margin-left: 0;\n    padding-right: 0;\n  }\n\n  .ant-tabs-nav-add {\n    min-width: unset !important;\n    background: transparent !important;\n    border: none !important;\n  }\n"]);return h=function(){return e},e}function f(){const e=l()(["\n      .ant-tabs-nav-list {\n        width: 100%;\n      }\n    "]);return f=function(){return e},e}function g(){const e=l()(["\n  .ant-tabs-content-holder {\n    background: white;\n  }\n\n  & > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n\n  .ant-tabs-tab-remove {\n    padding-top: 0;\n    padding-bottom: 0;\n    height: ","px;\n  }\n\n  ","\n"]);return g=function(){return e},e}function b(){const e=l()([""]);return b=function(){return e},e}function m(){const e=l()(["\n      .ant-tabs-nav-list {\n        width: 100%;\n      }\n\n      .ant-tabs-tab {\n        width: 0;\n      }\n    "]);return m=function(){return e},e}function v(){const e=l()(["\n  .ant-tabs-content-holder {\n    overflow: auto;\n  }\n\n  .ant-tabs-tab {\n    flex: 1 1 auto;\n\n    &.ant-tabs-tab-active .ant-tabs-tab-btn {\n      color: inherit;\n    }\n\n    &:hover {\n      .anchor-link-container {\n        cursor: pointer;\n\n        .fa.fa-link {\n          visibility: visible;\n        }\n      }\n    }\n\n    .short-link-trigger.btn {\n      padding: 0 ","px;\n\n      & > .fa.fa-link {\n        top: 0;\n      }\n    }\n  }\n\n  ",";\n\n  .ant-tabs-tab-btn {\n    display: flex;\n    flex: 1 1 auto;\n    align-items: center;\n    justify-content: center;\n    font-size: ","px;\n    text-align: center;\n    text-transform: uppercase;\n    user-select: none;\n\n    .required {\n      margin-left: ","px;\n      color: ",";\n    }\n  }\n\n  .ant-tabs-ink-bar {\n    background: ",";\n  }\n"]);return v=function(){return e},e}const y=["fullWidth"],O=Object(c.a)(d.q,{shouldForwardProp:e=>!i()(y).call(y,e)})(v(),({theme:e})=>e.gridUnit,({fullWidth:e})=>e&&Object(u.e)(m()),({theme:e})=>e.typography.sizes.s,({theme:e})=>e.gridUnit/2,({theme:e})=>e.colors.error.base,({theme:e})=>e.colors.secondary.base),x=Object(c.a)(d.q.TabPane)(b()),C=r()(O,{TabPane:x});C.defaultProps={fullWidth:!0};const w=Object(c.a)(O)(g(),({theme:e})=>6*e.gridUnit,({fullWidth:e})=>e&&Object(u.e)(f())),E=r()(w,{TabPane:x});E.defaultProps={type:"editable-card",fullWidth:!1},E.TabPane.defaultProps={closeIcon:Object(u.f)(p.a,{role:"button",tabIndex:0,cursor:"pointer",name:"cancel-x"})};const _=Object(c.a)(E)(h(),({theme:e})=>4*e.gridUnit,({theme:e})=>3*e.gridUnit+"px "+e.gridUnit+"px",({theme:e})=>e.typography.sizes.m),S=r()(_,{TabPane:x});var j=C},114:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"m",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"n",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"o",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"l",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"k",(function(){return y})),n.d(t,"p",(function(){return O})),n.d(t,"q",(function(){return x}));var a=n(106),r=n.n(a);const o="load_chart",i="render_chart",s="hide_browser_tab",l="mount_dashboard",c="mount_explorer",u="select_dashboard_tab",d="force_refresh_chart",p="change_explore_controls",h="toggle_edit_dashboard",f="force_refresh_dashboard",g="periodic_render_dashboard",b="explore_dashboard_chart",m="export_csv_dashboard_chart",v="change_dashboard_filter",y="omnibar_triggered",O=new r.a([o,i,s]),x=(new r.a([l,u,b,d,m,v,p,h,f,g,y,c]),{getTimestamp:()=>Math.round(window.performance.now())})},115:function(e,t,n){"use strict";n.r(t),n.d(t,"CHART_UPDATE_STARTED",(function(){return R})),n.d(t,"chartUpdateStarted",(function(){return k})),n.d(t,"CHART_UPDATE_SUCCEEDED",(function(){return M})),n.d(t,"chartUpdateSucceeded",(function(){return D})),n.d(t,"CHART_UPDATE_STOPPED",(function(){return P})),n.d(t,"chartUpdateStopped",(function(){return A})),n.d(t,"CHART_UPDATE_FAILED",(function(){return N})),n.d(t,"chartUpdateFailed",(function(){return F})),n.d(t,"CHART_UPDATE_QUEUED",(function(){return L})),n.d(t,"chartUpdateQueued",(function(){return I})),n.d(t,"CHART_RENDERING_FAILED",(function(){return B})),n.d(t,"chartRenderingFailed",(function(){return U})),n.d(t,"CHART_RENDERING_SUCCEEDED",(function(){return V})),n.d(t,"chartRenderingSucceeded",(function(){return H})),n.d(t,"REMOVE_CHART",(function(){return q})),n.d(t,"removeChart",(function(){return z})),n.d(t,"ANNOTATION_QUERY_SUCCESS",(function(){return G})),n.d(t,"annotationQuerySuccess",(function(){return W})),n.d(t,"ANNOTATION_QUERY_STARTED",(function(){return Y})),n.d(t,"annotationQueryStarted",(function(){return K})),n.d(t,"ANNOTATION_QUERY_FAILED",(function(){return Q})),n.d(t,"annotationQueryFailed",(function(){return X})),n.d(t,"getChartDataRequest",(function(){return Z})),n.d(t,"runAnnotationQuery",(function(){return $})),n.d(t,"TRIGGER_QUERY",(function(){return J})),n.d(t,"triggerQuery",(function(){return ee})),n.d(t,"RENDER_TRIGGERED",(function(){return te})),n.d(t,"renderTriggered",(function(){return ne})),n.d(t,"UPDATE_QUERY_FORM_DATA",(function(){return ae})),n.d(t,"updateQueryFormData",(function(){return re})),n.d(t,"UPDATE_CHART_ID",(function(){return oe})),n.d(t,"updateChartId",(function(){return ie})),n.d(t,"ADD_CHART",(function(){return se})),n.d(t,"addChart",(function(){return le})),n.d(t,"exploreJSON",(function(){return ce})),n.d(t,"GET_SAVED_CHART",(function(){return ue})),n.d(t,"getSavedChart",(function(){return de})),n.d(t,"POST_CHART_FORM_DATA",(function(){return pe})),n.d(t,"postChartFormData",(function(){return he})),n.d(t,"redirectSQLLab",(function(){return fe})),n.d(t,"refreshChart",(function(){return ge}));n(124),n(180),n(40);var a=n(7),r=n.n(a),o=n(65),i=n.n(o),s=n(29),l=n.n(s),c=n(60),u=n.n(c),d=n(44),p=n.n(d),h=n(97),f=n.n(h),g=n(4),b=n.n(g),m=n(15),v=n.n(m),y=n(57),O=n(9),x=n(47),C=n(125),w=n(957),E=n(68),_=n(289),S=n(114),j=n(64),T=n(376);const R="CHART_UPDATE_STARTED";function k(e,t,n){return{type:R,queryController:e,latestQueryFormData:t,key:n}}const M="CHART_UPDATE_SUCCEEDED";function D(e,t){return{type:M,queryResponse:e,key:t}}const P="CHART_UPDATE_STOPPED";function A(e){return{type:P,key:e}}const N="CHART_UPDATE_FAILED";function F(e,t){return{type:N,queryResponse:e,key:t}}const L="CHART_UPDATE_QUEUED";function I(e,t){return{type:L,asyncJobMeta:e,key:t}}const B="CHART_RENDERING_FAILED";function U(e,t,n){return{type:B,error:e,key:t,stackTrace:n}}const V="CHART_RENDERING_SUCCEEDED";function H(e){return{type:V,key:e}}const q="REMOVE_CHART";function z(e){return{type:q,key:e}}const G="ANNOTATION_QUERY_SUCCESS";function W(e,t,n){return{type:G,annotation:e,queryResponse:t,key:n}}const Y="ANNOTATION_QUERY_STARTED";function K(e,t,n){return{type:Y,annotation:e,queryController:t,key:n}}const Q="ANNOTATION_QUERY_FAILED";function X(e,t,n){return{type:Q,annotation:e,queryResponse:t,key:n}}async function Z({formData:e,resultFormat:t="json",resultType:n="full",force:a=!1,method:r="POST",requestParams:o={}}){let i=b()({},o);return T.a&&(i=b()({},i,{mode:"cors",credentials:"include"})),Object(C.m)(e)?(async(e,t,n,a,r="POST",o={})=>{const i=Object(C.j)({resultFormat:t,resultType:n}),s=T.a&&(null==o?void 0:o.dashboard_id),l=Object(C.i)({formData:e,endpointType:i,force:a,allowDomainSharding:s,method:r,requestParams:o.dashboard_id?{dashboard_id:o.dashboard_id}:{}}),c=b()({},o,{url:l,postPayload:{form_data:e}});return(Object(x.c)(x.a.CLIENT_CACHE)?y.a.get:y.a.post)(c).then(({json:e})=>({result:[e]}))})(e,t,n,a,r,i):(async(e,t,n,a,r)=>{const o=Object(C.a)({formData:e,resultType:n,resultFormat:t,force:a}),{slice_id:i}=e,{dashboard_id:s}=r,l={};void 0!==i&&(l.form_data='{"slice_id":'+i+"}"),void 0!==s&&(l.dashboard_id=s),!1!==a&&(l.force=a);const c=T.a&&(null==r?void 0:r.dashboard_id),u=Object(C.e)({path:"/api/v1/chart/data",qs:l,allowDomainSharding:c}).toString(),d=b()({},r,{url:u,headers:{"Content-Type":"application/json"},body:f()(o)});return y.a.post(d).then(({json:e})=>e)})(e,t,n,a,i)}function $(e,t=60,n=null,a,r=!1){return function(o,s){var c;const d=a||p()(s().charts)[0],h=b()({},n||s().charts[d].latestQueryFormData);if(!Object(w.f)(e.sourceType))return u.a.resolve();const f=h.time_grain_sqla||h.granularity;h.time_grain_sqla=f,h.granularity=f;const g=p()(e.overrides);(l()(g).call(g,"since")||l()(g).call(g,"until"))&&(e.overrides=b()({},e.overrides,{time_range:null}));const m=i()(c=p()(e.overrides)).call(c,(t,n)=>b()({},t,{[n]:e.overrides[n]||h[n]}),{});if(!r&&h){const e=h.extra_filters&&h.extra_filters.length>0;m.extra_filters=e?h.extra_filters:void 0}const v=e.sourceType===w.a.NATIVE,O=Object(C.d)(e.value,m,v),x=new AbortController,{signal:E}=x;return o(K(e,x,d)),y.a.get({url:O,signal:E,timeout:1e3*t}).then(({json:t})=>o(W(e,t,d))).catch(t=>Object(j.a)(t).then(t=>{var n;"timeout"===t.statusText?o(X(e,{error:"Query Timeout"},d)):l()(n=(t.error||"").toLowerCase()).call(n,"no data")?o(W(e,t,d)):"abort"!==t.statusText&&o(X(e,t,d))}))}}const J="TRIGGER_QUERY";function ee(e=!0,t){return{type:J,value:e,key:t}}const te="RENDER_TRIGGERED";function ne(e,t){return{type:te,value:e,key:t}}const ae="UPDATE_QUERY_FORM_DATA";function re(e,t){return{type:ae,value:e,key:t}}const oe="UPDATE_CHART_ID";function ie(e,t=0){return{type:oe,newId:e,key:t}}const se="ADD_CHART";function le(e,t){return{type:se,chart:e,key:t}}function ce(e,t=!1,n=60,a,o,i){return async s=>{const l=S.q.getTimestamp(),c=new AbortController,d={signal:c.signal,timeout:1e3*n};i&&(d.dashboard_id=i);const p=Z({formData:e,resultFormat:"json",resultType:"full",force:t,method:o,requestParams:d});s(k(c,e,a));const h=p.then(n=>{if(Object(x.c)(x.a.GLOBAL_ASYNC_QUERIES)){const e="result"in n?n.result[0]:n;return s(I(e,a))}const r=n.result[0];return s(Object(_.logEvent)(S.h,{slice_id:a,applied_filters:r.applied_filters,is_cached:r.is_cached,force_refresh:t,row_count:r.rowcount,datasource:e.datasource,start_offset:l,ts:(new Date).getTime(),duration:S.q.getTimestamp()-l,has_extra_filters:e.extra_filters&&e.extra_filters.length>0,viz_type:e.viz_type,data_age:r.is_cached?v()(new Date).diff(v.a.utc(r.cached_dttm)):null})),s(D(r,a))}).catch(t=>{const n=(t,n)=>{s(Object(_.logEvent)(S.h,{slice_id:a,has_err:!0,is_cached:n,error_details:t,datasource:e.datasource,start_offset:l,ts:(new Date).getTime(),duration:S.q.getTimestamp()-l}))};return"AbortError"===t.name?(n("abort"),s(A(a))):Object(j.a)(t).then(e=>("timeout"===t.statusText?n("timeout"):n(e.error,e.is_cached),s(F(e,a))))}),f=Object(C.m)(e)&&e.annotation_layers||[],g=i>0;return u.a.all([h,s(ee(!1,a)),s(re(e,a)),...r()(f).call(f,t=>s($(t,n,e,a,g)))])}}const ue="GET_SAVED_CHART";function de(e,t=!1,n=60,a,r){return ce(e,t,n,a,"GET",r)}const pe="POST_CHART_FORM_DATA";function he(e,t=!1,n=60,a,r){return ce(e,t,n,a,"POST",r)}function fe(e){return t=>{Z({formData:e,resultFormat:"json",resultType:"query"}).then(({result:t})=>{const n={datasourceKey:e.datasource,sql:t[0].query};Object(C.l)("/superset/sqllab",n)}).catch(()=>t(Object(E.c)(Object(O.c)("An error occurred while loading the SQL"))))}}function ge(e,t,n){return(a,r)=>{const o=(r().charts||{})[e],i=r().dashboardInfo.common.conf.SUPERSET_WEBSERVER_TIMEOUT;o.latestQueryFormData&&0!==p()(o.latestQueryFormData).length&&a(he(o.latestQueryFormData,t,i,o.id,n))}}},125:function(e,t,n){"use strict";n.d(t,"f",(function(){return w})),n.d(t,"d",(function(){return S})),n.d(t,"k",(function(){return j})),n.d(t,"h",(function(){return T})),n.d(t,"e",(function(){return R})),n.d(t,"i",(function(){return k})),n.d(t,"m",(function(){return M})),n.d(t,"a",(function(){return D})),n.d(t,"j",(function(){return P})),n.d(t,"l",(function(){return A})),n.d(t,"g",(function(){return N})),n.d(t,"c",(function(){return F})),n.d(t,"b",(function(){return L})),n.d(t,"n",(function(){return I}));n(180),n(378);var a=n(120),r=n.n(a),o=n(4),i=n.n(o),s=n(46),l=n.n(s),c=n(44),u=n.n(c),d=n(19),p=n.n(d),h=n(29),f=n.n(h),g=n(0),b=n(318),m=n.n(b),v=n(225),y=n(270),O=n(415),x=n(376),C=n(223);function w(e){const{slice:t}=e;return t?t.slice_id:0}let E=0;function _(e=!1){let t=0;return e&&(t=E%x.b.length,E+=1,0===t&&(t+=1,E+=1)),x.b[t]}function S(e,t,n){if(null==e)return null;const a=n?"annotation_json":"slice_json";return m()(window.location.search).pathname("/superset/"+a+"/"+e).search({form_data:Object(C.a)(t,(e,t)=>null===t?void 0:t)}).toString()}function j(e="base"){var t;return f()(t=["full","json","csv","query","results","samples"]).call(t,e)?"/superset/explore_json/":"/superset/explore/"}function T(e,t,n=!0,a={}){var r;if(!e.datasource)return null;const o=new m.a("/"),i=j(t),s=o.search(!0);p()(r=u()(a)).call(r,e=>{s[e]=a[e]}),s.form_data=Object(C.a)(e),"standalone"===t&&(s.standalone="true");const l=o.directory(i).search(s).toString();if(!n&&l.length>8e3){return T({datasource:e.datasource,viz_type:e.viz_type},t,!1,{URL_IS_TOO_LONG_TO_SHARE:null})}return l}function R({path:e,qs:t,allowDomainSharding:n=!1}){var a;let r=new m.a({protocol:l()(a=window.location.protocol).call(a,0,-1),hostname:_(n),port:window.location.port?window.location.port:"",path:e});return t&&(r=r.search(t)),r}function k({formData:e,endpointType:t="base",force:n=!1,curUrl:a=null,requestParams:r={},allowDomainSharding:o=!1,method:i="POST"}){if(!e.datasource)return null;let s=R({path:"/",allowDomainSharding:o});a&&(s=m()(m()(a).search()));const l=j(t),c=s.search(!0),{slice_id:d,extra_filters:h,adhoc_filters:f,viz_type:g}=e;if(d){const e={slice_id:d};"GET"===i&&(e.viz_type=g,h&&h.length&&(e.extra_filters=h),f&&f.length&&(e.adhoc_filters=f)),c.form_data=Object(C.a)(e)}n&&(c.force="true"),"csv"===t&&(c.csv="true"),"standalone"===t&&(c.standalone="true"),"query"===t&&(c.query="true"),"results"===t&&(c.results="true"),"samples"===t&&(c.samples="true");const b=u()(r);return b.length&&p()(b).call(b,e=>{r.hasOwnProperty(e)&&(c[e]=r[e])}),s.search(c).directory(l).toString()}const M=e=>{const t=Object(v.a)().get(e.viz_type);return!!t&&t.useLegacyApi},D=({formData:e,force:t,resultFormat:n,resultType:a})=>{var r;return(null!=(r=Object(y.a)().get(e.viz_type))?r:e=>Object(O.a)(e,e=>[i()({},e)]))(i()({},e,{force:t,result_format:n,result_type:a}))},P=({resultType:e,resultFormat:t})=>"csv"===t?t:e;function A(e,t,n="_blank"){if(!e)return;const a=document.createElement("form");a.action=e,a.method="POST",a.target=n;const r=document.createElement("input");r.type="hidden",r.name="csrf_token",r.value=(document.getElementById("csrf_token")||{}).value,a.appendChild(r);const o=document.createElement("input");o.type="hidden",o.name="form_data",o.value=Object(C.a)(t),a.appendChild(o),document.body.appendChild(a),a.submit(),document.body.removeChild(a)}function N(e){let t;return e&&(t=Math.ceil(Math.max(5,1e4/e))),t||50}const F=({formData:e,resultFormat:t="json",resultType:n="full",force:a=!1})=>{let r,o;if(M(e)){r=k({formData:e,endpointType:P({resultFormat:t,resultType:n}),allowDomainSharding:!1}),o=e}else r="/api/v1/chart/data",o=D({formData:e,force:a,resultFormat:t,resultType:n});A(r,o)},L=e=>{A(k({formData:e,endpointType:"base",allowDomainSharding:!1}),e)},I=(e,t)=>{const n=Object(g.useCallback)(e,[e]);Object(g.useEffect)(()=>{const e=r()(()=>{n()},t);return()=>{clearTimeout(e)}},[n,t])}},1257:function(e,t,n){},1262:function(e,t,n){},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPicker=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=l(n(0)),o=l(n(82)),i=n(143),s=l(n(1281));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.AlphaPicker=function(e){var t=e.rgb,n=e.hsl,s=e.width,l=e.height,c=e.onChange,u=e.direction,d=e.style,p=e.renderers,h=e.pointer,f=e.className,g=void 0===f?"":f,b=(0,o.default)({default:{picker:{position:"relative",width:s,height:l},alpha:{radius:"2px",style:d}}});return r.default.createElement("div",{style:b.picker,className:"alpha-picker "+g},r.default.createElement(i.Alpha,a({},b.alpha,{rgb:t,hsl:n,pointer:h,renderers:p,onChange:c,direction:u})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,i.ColorWrap)(c)},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var a=s(n(1189)),r=s(n(978)),o=s(n(413)),i=s(n(388));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,o.default)(t)?(0,r.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,a.default)(t)&&n.push(t)})),n};t.default=l},1265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var a=i(n(978)),r=i(n(1635)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,r.default)(e.default)||{};return t.map((function(t){var r=e[t];return r&&(0,a.default)(r,(function(e,t){n[t]||(n[t]={}),n[t]=o({},n[t],r[t])})),t})),n};t.default=s},1266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var a,r=n(978),o=(a=r)&&a.__esModule?a:{default:a},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,n){var a={};(0,o.default)(e,(function(e,t){var n=s[t];n?a=i({},a,n(e)):a[t]=e})),t[n]=a})),t};t.default=l},1267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(0),i=(a=o)&&a.__esModule?a:{default:a};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function a(){var n,o,c;s(this,a);for(var u=arguments.length,d=Array(u),p=0;p<u;p++)d[p]=arguments[p];return o=c=l(this,(n=a.__proto__||Object.getPrototypeOf(a)).call.apply(n,[this].concat(d))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return i.default.createElement(t,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},i.default.createElement(e,r({},c.props,c.state)))},l(c,o)}return c(a,n),a}(i.default.Component)};t.default=u},1268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(0),i=(a=o)&&a.__esModule?a:{default:a};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function a(){var n,o,c;s(this,a);for(var u=arguments.length,d=Array(u),p=0;p<u;p++)d[p]=arguments[p];return o=c=l(this,(n=a.__proto__||Object.getPrototypeOf(a)).call.apply(n,[this].concat(d))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return i.default.createElement(t,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},i.default.createElement(e,r({},c.props,c.state)))},l(c,o)}return c(a,n),a}(i.default.Component)};t.default=u},1269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&a("first-child"),e===t-1&&a("last-child"),(0===e||e%2==0)&&a("even"),1===Math.abs(e%2)&&a("odd"),a("nth-child",e),n}},1270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),i=u(o),s=u(n(82)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1271)),c=u(n(1029));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=t.Alpha=function(e){function t(){var e,n,a;d(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleChange=function(e,t){var n=l.calculateChange(e,t,a.props,a.container);n&&a.props.onChange&&a.props.onChange(n,e)},a.handleMouseDown=function(e){a.handleChange(e,!0),window.addEventListener("mousemove",a.handleChange),window.addEventListener("mouseup",a.handleMouseUp)},a.handleMouseUp=function(){a.unbindEventListeners()},a.unbindEventListeners=function(){window.removeEventListener("mousemove",a.handleChange),window.removeEventListener("mouseup",a.handleMouseUp)},p(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:a({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.default.createElement("div",{style:n.alpha},i.default.createElement("div",{style:n.checkboard},i.default.createElement(c.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:n.gradient}),i.default.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:n.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:n.slider}))))}}]),t}(o.PureComponent||o.Component);t.default=h},1271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,a){e.preventDefault();var r=a.clientWidth,o=a.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=i-(a.getBoundingClientRect().left+window.pageXOffset),c=s-(a.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var u=void 0;if(u=c<0?0:c>o?1:Math.round(100*c/o)/100,n.hsl.a!==u)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:u,source:"rgb"}}else{var d=void 0;if(d=l<0?0:l>r?1:Math.round(100*l/r)/100,n.a!==d)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:d,source:"rgb"}}return null}},1272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={},r=t.render=function(e,t,n,a){if("undefined"==typeof document&&!a)return null;var r=a?new a:document.createElement("canvas");r.width=2*n,r.height=2*n;var o=r.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,r.width,r.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),r.toDataURL()):null};t.get=function(e,t,n,o){var i=e+"-"+t+"-"+n+(o?"-server":""),s=r(e,t,n,o);return a[i]?a[i]:(a[i]=s,s)}},1273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=s(r),i=s(n(82));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,e.target.value),e):n.props.onChange&&n.props.onChange(e.target.value,e),n.setState({value:e.target.value})},n.handleKeyDown=function(e){var t=String(e.target.value),a=t.indexOf("%")>-1,r=Number(t.replace(/%/g,""));if(!isNaN(r)){var o=n.props.arrowOffset||1;38===e.keyCode&&(null!==n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,r+o),e):n.props.onChange&&n.props.onChange(r+o,e),a?n.setState({value:r+o+"%"}):n.setState({value:r+o})),40===e.keyCode&&(null!==n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,r-o),e):n.props.onChange&&n.props.onChange(r-o,e),a?n.setState({value:r-o+"%"}):n.setState({value:r-o}))}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(l({},n.props.label,t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.default.createElement("div",{style:t.wrap},o.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(r.PureComponent||r.Component);t.default=c},1274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=l(r),i=l(n(82)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1275));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.Hue=function(e){function t(){var e,n,a;c(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleChange=function(e,t){var n=s.calculateChange(e,t,a.props,a.container);n&&a.props.onChange&&a.props.onChange(n,e)},a.handleMouseDown=function(e){a.handleChange(e,!0),window.addEventListener("mousemove",a.handleChange),window.addEventListener("mouseup",a.handleMouseUp)},a.handleMouseUp=function(){a.unbindEventListeners()},u(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,a=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return o.default.createElement("div",{style:a.hue},o.default.createElement("div",{className:"hue-"+n,style:a.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.default.createElement("div",{style:a.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:a.slider}))))}}]),t}(r.PureComponent||r.Component);t.default=d},1275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,a){e.preventDefault();var r=a.clientWidth,o=a.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=i-(a.getBoundingClientRect().left+window.pageXOffset),c=s-(a.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{u=360*(-100*c/o+100)/100}if(n.hsl.h!==u)return{h:u,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}else{var d=void 0;if(l<0)d=0;else if(l>r)d=359;else{d=360*(100*l/r)/100}if(n.hsl.h!==d)return{h:d,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}return null}},1276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var a=i(n(0)),r=i(n(2)),o=i(n(82));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.Raised=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,s=(0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},{"zDepth-1":1===t});return a.default.createElement("div",{style:s.wrap},a.default.createElement("div",{style:s.bg}),a.default.createElement("div",{style:s.content},i))};s.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number},s.defaultProps={background:"#fff",zDepth:1,radius:2},t.default=s},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=c(r),i=c(n(82)),s=c(n(829)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1278));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e,t){n.props.onChange&&n.throttle(n.props.onChange,l.calculateChange(e,t,n.props,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,s.default)((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,a=t.white,r=t.black,s=t.pointer,l=t.circle,c=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:a,black:r,pointer:s,circle:l}},{custom:!!this.props.style});return o.default.createElement("div",{style:c.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),o.default.createElement("div",{style:c.white,className:"saturation-white"},o.default.createElement("div",{style:c.black,className:"saturation-black"}),o.default.createElement("div",{style:c.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:c.circle}))))}}]),t}(r.PureComponent||r.Component);t.default=u},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,a){e.preventDefault();var r=a.getBoundingClientRect(),o=r.width,i=r.height,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(a.getBoundingClientRect().left+window.pageXOffset),u=l-(a.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>o?c=o:u<0?u=0:u>i&&(u=i);var d=100*c/o,p=-100*u/i+100;return{h:n.hsl.h,s:d,v:p,a:n.hsl.a,source:"rgb"}}},1279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=l(n(0)),o=l(n(82)),i=n(1280),s=n(143);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Swatch=function(e){var t=e.color,n=e.style,i=e.onClick,l=void 0===i?function(){}:i,c=e.onHover,u=e.title,d=void 0===u?t:u,p=e.children,h=e.focus,f=e.focusStyle,g=void 0===f?{}:f,b="transparent"===t,m=(0,o.default)({default:{swatch:a({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,h?g:{})}}),v={};return c&&(v.onMouseOver=function(e){return c(t,e)}),r.default.createElement("div",a({style:m.swatch,onClick:function(e){return l(t,e)},title:d,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&l(t,e)}},v),p,b&&r.default.createElement(s.Checkboard,{borderRadius:m.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,i.handleFocus)(c)},1280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),s=(a=i)&&a.__esModule?a:{default:a};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function a(){var e,t,n;l(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=n=c(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},c(n,t)}return u(a,n),o(a,[{key:"render",value:function(){return s.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(e,r({},this.props,this.state)))}}]),a}(s.default.Component)}},1281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPointer=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.AlphaPointer=function(e){var t=e.direction,n=(0,r.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return a.default.createElement("div",{style:n.picker})};t.default=i},1282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var a=c(n(0)),r=c(n(2)),o=c(n(82)),i=c(n(303)),s=n(143),l=c(n(1283));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Block=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,c=e.colors,u=e.width,d=e.triangle,p=e.className,h=void 0===p?"":p,f="transparent"===r,g=function(e,n){i.default.isValidHex(e)&&t({hex:e,source:"hex"},n)},b=(0,o.default)({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:i.default.getContrastingColor(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},{"hide-triangle":"hide"===d});return a.default.createElement("div",{style:b.card,className:"block-picker "+h},a.default.createElement("div",{style:b.triangle}),a.default.createElement("div",{style:b.head},f&&a.default.createElement(s.Checkboard,{borderRadius:"6px 6px 0 0"}),a.default.createElement("div",{style:b.label},r)),a.default.createElement("div",{style:b.body},a.default.createElement(l.default,{colors:c,onClick:g,onSwatchHover:n}),a.default.createElement(s.EditableInput,{style:{input:b.input},value:r,onChange:g})))};u.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["top","hide"])},u.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top"},t.default=(0,s.ColorWrap)(u)},1283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSwatches=void 0;var a=s(n(0)),r=s(n(82)),o=s(n(388)),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.BlockSwatches=function(e){var t=e.colors,n=e.onClick,s=e.onSwatchHover,l=(0,r.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return a.default.createElement("div",{style:l.swatches},(0,o.default)(t,(function(e){return a.default.createElement(i.Swatch,{key:e,color:e,style:l.swatch,onClick:n,onHover:s,focusStyle:{boxShadow:"0 0 4px "+e}})})),a.default.createElement("div",{style:l.clear}))};t.default=l},1284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var a=u(n(0)),r=u(n(2)),o=u(n(82)),i=u(n(388)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1031)),l=n(143),c=u(n(1285));function u(e){return e&&e.__esModule?e:{default:e}}var d=t.Circle=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,s=e.colors,l=e.hex,u=e.circleSize,d=e.circleSpacing,p=e.className,h=void 0===p?"":p,f=(0,o.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}}),g=function(e,t){return n({hex:e,source:"hex"},t)};return a.default.createElement("div",{style:f.card,className:"circle-picker "+h},(0,i.default)(s,(function(e){return a.default.createElement(c.default,{key:e,color:e,onClick:g,onSwatchHover:r,active:l===e.toLowerCase(),circleSize:u,circleSpacing:d})})))};d.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),circleSize:r.default.number,circleSpacing:r.default.number},d.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[s.red[500],s.pink[500],s.purple[500],s.deepPurple[500],s.indigo[500],s.blue[500],s.lightBlue[500],s.cyan[500],s.teal[500],s.green[500],s.lightGreen[500],s.lime[500],s.yellow[500],s.amber[500],s.orange[500],s.deepOrange[500],s.brown[500],s.blueGrey[500]]},t.default=(0,l.ColorWrap)(d)},1285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleSwatch=void 0;var a=s(n(0)),r=n(82),o=s(r),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CircleSwatch=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,s=e.hover,l=e.active,c=e.circleSize,u=e.circleSpacing,d=(0,o.default)({default:{swatch:{width:c,height:c,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+c/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:l});return a.default.createElement("div",{style:d.swatch},a.default.createElement(i.Swatch,{style:d.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+t}}))};l.defaultProps={circleSize:28,circleSpacing:14},t.default=(0,r.handleHover)(l)},1286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome=void 0;var a=u(n(0)),r=u(n(2)),o=u(n(82)),i=n(143),s=u(n(1287)),l=u(n(1288)),c=u(n(1289));function u(e){return e&&e.__esModule?e:{default:e}}var d=t.Chrome=function(e){var t=e.onChange,n=e.disableAlpha,r=e.rgb,u=e.hsl,d=e.hsv,p=e.hex,h=e.renderers,f=e.className,g=void 0===f?"":f,b=(0,o.default)({default:{picker:{background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",width:"225px",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},{disableAlpha:n});return a.default.createElement("div",{style:b.picker,className:"chrome-picker "+g},a.default.createElement("div",{style:b.saturation},a.default.createElement(i.Saturation,{style:b.Saturation,hsl:u,hsv:d,pointer:c.default,onChange:t})),a.default.createElement("div",{style:b.body},a.default.createElement("div",{style:b.controls,className:"flexbox-fix"},a.default.createElement("div",{style:b.color},a.default.createElement("div",{style:b.swatch},a.default.createElement("div",{style:b.active}),a.default.createElement(i.Checkboard,{renderers:h}))),a.default.createElement("div",{style:b.toggles},a.default.createElement("div",{style:b.hue},a.default.createElement(i.Hue,{style:b.Hue,hsl:u,pointer:l.default,onChange:t})),a.default.createElement("div",{style:b.alpha},a.default.createElement(i.Alpha,{style:b.Alpha,rgb:r,hsl:u,pointer:l.default,renderers:h,onChange:t})))),a.default.createElement(s.default,{rgb:r,hsl:u,hex:p,onChange:t,disableAlpha:n})))};d.propTypes={disableAlpha:r.default.bool},d.defaultProps={disableAlpha:!1},t.default=(0,i.ColorWrap)(d)},1287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeFields=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(0)),o=l(n(82)),i=l(n(303)),s=n(143);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.ChromeFields=function(e){function t(){var e,n,a;c(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={view:""},a.toggleViews=function(){"hex"===a.state.view?a.setState({view:"rgb"}):"rgb"===a.state.view?a.setState({view:"hsl"}):"hsl"===a.state.view&&(1===a.props.hsl.a?a.setState({view:"hex"}):a.setState({view:"rgb"}))},a.handleChange=function(e,t){e.hex?i.default.isValidHex(e.hex)&&a.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?a.props.onChange({r:e.r||a.props.rgb.r,g:e.g||a.props.rgb.g,b:e.b||a.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),a.props.onChange({h:a.props.hsl.h,s:a.props.hsl.s,l:a.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&a.props.onChange({h:e.h||a.props.hsl.h,s:Number(e.s&&e.s||a.props.hsl.s),l:Number(e.l&&e.l||a.props.hsl.l),source:"hsl"},t)},a.showHighlight=function(e){e.target.style.background="#eee"},a.hideHighlight=function(e){e.target.style.background="transparent"},u(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var e=this,t=(0,o.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=r.default.createElement("div",{style:t.fields,className:"flexbox-fix"},r.default.createElement("div",{style:t.field},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=r.default.createElement("div",{style:t.fields,className:"flexbox-fix"},r.default.createElement("div",{style:t.field},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),r.default.createElement("div",{style:t.field},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),r.default.createElement("div",{style:t.field},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),r.default.createElement("div",{style:t.alpha},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=r.default.createElement("div",{style:t.fields,className:"flexbox-fix"},r.default.createElement("div",{style:t.field},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),r.default.createElement("div",{style:t.field},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),r.default.createElement("div",{style:t.field},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),r.default.createElement("div",{style:t.alpha},r.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),r.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,r.default.createElement("div",{style:t.toggle},r.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},r.default.createElement("svg",{style:t.svg,viewBox:"0 0 24 24",onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight},r.default.createElement("path",{ref:function(t){return e.iconUp=t},fill:"#333",d:"M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}),r.default.createElement("path",{ref:function(t){return e.iconDown=t},fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"})))))}}]),t}(r.default.Component);t.default=d},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointer=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointer=function(){var e=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.default.createElement("div",{style:e.picker})};t.default=i},1289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointerCircle=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointerCircle=function(){var e=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return a.default.createElement("div",{style:e.picker})};t.default=i},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compact=void 0;var a=d(n(0)),r=d(n(2)),o=d(n(82)),i=d(n(388)),s=d(n(303)),l=n(143),c=d(n(1291)),u=d(n(1292));function d(e){return e&&e.__esModule?e:{default:e}}var p=t.Compact=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,d=e.hex,p=e.rgb,h=e.className,f=void 0===h?"":h,g=(0,o.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}}),b=function(e,n){e.hex?s.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return a.default.createElement(l.Raised,{style:g.Compact},a.default.createElement("div",{style:g.compact,className:"compact-picker "+f},a.default.createElement("div",null,(0,i.default)(r,(function(e){return a.default.createElement(c.default,{key:e,color:e,active:e.toLowerCase()===d,onClick:b,onSwatchHover:n})})),a.default.createElement("div",{style:g.clear})),a.default.createElement(u.default,{hex:d,rgb:p,onChange:b})))};p.propTypes={colors:r.default.arrayOf(r.default.string)},p.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]},t.default=(0,l.ColorWrap)(p)},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactColor=void 0;var a=s(n(0)),r=s(n(82)),o=s(n(303)),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CompactColor=function(e){var t=e.color,n=e.onClick,s=void 0===n?function(){}:n,l=e.onSwatchHover,c=e.active,u=(0,r.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:o.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:c,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return a.default.createElement(i.Swatch,{style:u.color,color:t,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},a.default.createElement("div",{style:u.dot}))};t.default=l},1292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactFields=void 0;var a=i(n(0)),r=i(n(82)),o=n(143);function i(e){return e&&e.__esModule?e:{default:e}}var s=t.CompactFields=function(e){var t=e.hex,n=e.rgb,i=e.onChange,s=(0,r.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(e,t){e.r||e.g||e.b?i({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):i({hex:e.hex,source:"hex"},t)};return a.default.createElement("div",{style:s.fields,className:"flexbox-fix"},a.default.createElement("div",{style:s.active}),a.default.createElement(o.EditableInput,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:l}),a.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:l}),a.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:l}),a.default.createElement(o.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:l}))};t.default=s},1293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Github=void 0;var a=c(n(0)),r=c(n(2)),o=c(n(82)),i=c(n(388)),s=n(143),l=c(n(1294));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Github=function(e){var t=e.width,n=e.colors,r=e.onChange,s=e.onSwatchHover,c=e.triangle,u=e.className,d=void 0===u?"":u,p=(0,o.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},{"hide-triangle":"hide"===c,"top-left-triangle":"top-left"===c,"top-right-triangle":"top-right"===c,"bottom-left-triangle":"bottom-left"==c,"bottom-right-triangle":"bottom-right"===c}),h=function(e,t){return r({hex:e,source:"hex"},t)};return a.default.createElement("div",{style:p.card,className:"github-picker "+d},a.default.createElement("div",{style:p.triangleShadow}),a.default.createElement("div",{style:p.triangle}),(0,i.default)(n,(function(e){return a.default.createElement(l.default,{color:e,key:e,onClick:h,onSwatchHover:s})})))};u.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.string),triangle:r.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"])},u.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left"},t.default=(0,s.ColorWrap)(u)},1294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GithubSwatch=void 0;var a=s(n(0)),r=n(82),o=s(r),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.GithubSwatch=function(e){var t=e.hover,n=e.color,r=e.onClick,s=e.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},c=(0,o.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:t});return a.default.createElement("div",{style:c.swatch},a.default.createElement(i.Swatch,{color:n,onClick:r,onHover:s,focusStyle:l}))};t.default=(0,r.handleHover)(l)},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HuePicker=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=l(n(0)),o=l(n(82)),i=n(143),s=l(n(1296));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.HuePicker=function(e){var t=e.width,n=e.height,s=e.onChange,l=e.hsl,c=e.direction,u=e.pointer,d=e.className,p=void 0===d?"":d,h=(0,o.default)({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}});return r.default.createElement("div",{style:h.picker,className:"hue-picker "+p},r.default.createElement(i.Hue,a({},h.hue,{hsl:l,pointer:u,onChange:function(e){return s({a:1,h:e.h,l:.5,s:1})},direction:c})))};c.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,i.ColorWrap)(c)},1296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(e){var t=e.direction,n=(0,r.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return a.default.createElement("div",{style:n.picker})};t.default=i},1297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var a=s(n(0)),r=s(n(82)),o=s(n(303)),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.Material=function(e){var t=e.onChange,n=e.hex,s=e.rgb,l=e.className,c=void 0===l?"":l,u=(0,r.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}}),d=function(e,n){e.hex?o.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||s.r,g:e.g||s.g,b:e.b||s.b,source:"rgb"},n)};return a.default.createElement(i.Raised,null,a.default.createElement("div",{style:u.material,className:"material-picker "+c},a.default.createElement(i.EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:n,onChange:d}),a.default.createElement("div",{style:u.split,className:"flexbox-fix"},a.default.createElement("div",{style:u.third},a.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:s.r,onChange:d})),a.default.createElement("div",{style:u.third},a.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:s.g,onChange:d})),a.default.createElement("div",{style:u.third},a.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:s.b,onChange:d})))))};t.default=(0,i.ColorWrap)(l)},1298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Photoshop=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=h(n(0)),o=h(n(2)),i=h(n(82)),s=n(143),l=h(n(1299)),c=h(n(1300)),u=h(n(1301)),d=h(n(1302)),p=h(n(1303));function h(e){return e&&e.__esModule?e:{default:e}}var f=t.Photoshop=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props.className,t=void 0===e?"":e,n=(0,i.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}});return r.default.createElement("div",{style:n.picker,className:"photoshop-picker "+t},r.default.createElement("div",{style:n.head},this.props.header),r.default.createElement("div",{style:n.body,className:"flexbox-fix"},r.default.createElement("div",{style:n.saturation},r.default.createElement(s.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:c.default,onChange:this.props.onChange})),r.default.createElement("div",{style:n.hue},r.default.createElement(s.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:u.default,onChange:this.props.onChange})),r.default.createElement("div",{style:n.controls},r.default.createElement("div",{style:n.top,className:"flexbox-fix"},r.default.createElement("div",{style:n.previews},r.default.createElement(p.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),r.default.createElement("div",{style:n.actions},r.default.createElement(d.default,{label:"OK",onClick:this.props.onAccept,active:!0}),r.default.createElement(d.default,{label:"Cancel",onClick:this.props.onCancel}),r.default.createElement(l.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(r.default.Component);f.propTypes={header:o.default.string},f.defaultProps={header:"Color Picker"},t.default=(0,s.ColorWrap)(f)},1299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPicker=void 0;var a=s(n(0)),r=s(n(82)),o=s(n(303)),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.PhotoshopPicker=function(e){var t=e.onChange,n=e.rgb,s=e.hsv,l=e.hex,c=(0,r.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),u=function(e,a){e["#"]?o.default.isValidHex(e["#"])&&t({hex:e["#"],source:"hex"},a):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},a):(e.h||e.s||e.v)&&t({h:e.h||s.h,s:e.s||s.s,v:e.v||s.v,source:"hsv"},a)};return a.default.createElement("div",{style:c.fields},a.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"h",value:Math.round(s.h),onChange:u}),a.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"s",value:Math.round(100*s.s),onChange:u}),a.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"v",value:Math.round(100*s.v),onChange:u}),a.default.createElement("div",{style:c.divider}),a.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:n.r,onChange:u}),a.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:n.g,onChange:u}),a.default.createElement(i.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:n.b,onChange:u}),a.default.createElement("div",{style:c.divider}),a.default.createElement(i.EditableInput,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"#",value:l.replace("#",""),onChange:u}),a.default.createElement("div",{style:c.fieldSymbols},a.default.createElement("div",{style:c.symbol},"°"),a.default.createElement("div",{style:c.symbol},"%"),a.default.createElement("div",{style:c.symbol},"%")))};t.default=l},1300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(e){var t=e.hsl,n=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return a.default.createElement("div",{style:n.picker})};t.default=i},1301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(){var e=(0,r.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return a.default.createElement("div",{style:e.pointer},a.default.createElement("div",{style:e.left},a.default.createElement("div",{style:e.leftInside})),a.default.createElement("div",{style:e.right},a.default.createElement("div",{style:e.rightInside})))};t.default=i},1302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopBotton=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopBotton=function(e){var t=e.onClick,n=e.label,o=e.children,i=e.active,s=(0,r.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return a.default.createElement("div",{style:s.button,onClick:t},n||o)};t.default=i},1303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPreviews=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPreviews=function(e){var t=e.rgb,n=e.currentColor,o=(0,r.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return a.default.createElement("div",null,a.default.createElement("div",{style:o.label},"new"),a.default.createElement("div",{style:o.swatches},a.default.createElement("div",{style:o.new}),a.default.createElement("div",{style:o.current})),a.default.createElement("div",{style:o.label},"current"))};t.default=i},1304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var a=c(n(0)),r=c(n(2)),o=c(n(82)),i=n(143),s=c(n(1305)),l=c(n(1306));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Sketch=function(e){var t=e.width,n=e.rgb,r=e.hex,c=e.hsv,u=e.hsl,d=e.onChange,p=e.onSwatchHover,h=e.disableAlpha,f=e.presetColors,g=e.renderers,b=e.className,m=void 0===b?"":b,v=(0,o.default)({default:{picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},{disableAlpha:h});return a.default.createElement("div",{style:v.picker,className:"sketch-picker "+m},a.default.createElement("div",{style:v.saturation},a.default.createElement(i.Saturation,{style:v.Saturation,hsl:u,hsv:c,onChange:d})),a.default.createElement("div",{style:v.controls,className:"flexbox-fix"},a.default.createElement("div",{style:v.sliders},a.default.createElement("div",{style:v.hue},a.default.createElement(i.Hue,{style:v.Hue,hsl:u,onChange:d})),a.default.createElement("div",{style:v.alpha},a.default.createElement(i.Alpha,{style:v.Alpha,rgb:n,hsl:u,renderers:g,onChange:d}))),a.default.createElement("div",{style:v.color},a.default.createElement(i.Checkboard,null),a.default.createElement("div",{style:v.activeColor}))),a.default.createElement(s.default,{rgb:n,hsl:u,hex:r,onChange:d,disableAlpha:h}),a.default.createElement(l.default,{colors:f,onClick:d,onSwatchHover:p}))};u.propTypes={disableAlpha:r.default.bool,width:r.default.oneOfType([r.default.string,r.default.number])},u.defaultProps={disableAlpha:!1,width:200,presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,i.ColorWrap)(u)},1305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var a=s(n(0)),r=s(n(82)),o=s(n(303)),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SketchFields=function(e){var t=e.onChange,n=e.rgb,s=e.hsl,l=e.hex,c=e.disableAlpha,u=(0,r.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:c}),d=function(e,a){e.hex?o.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},a):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},a):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:s.h,s:s.s,l:s.l,a:e.a,source:"rgb"},a))};return a.default.createElement("div",{style:u.fields,className:"flexbox-fix"},a.default.createElement("div",{style:u.double},a.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"hex",value:l.replace("#",""),onChange:d})),a.default.createElement("div",{style:u.single},a.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"r",value:n.r,onChange:d,dragLabel:"true",dragMax:"255"})),a.default.createElement("div",{style:u.single},a.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"g",value:n.g,onChange:d,dragLabel:"true",dragMax:"255"})),a.default.createElement("div",{style:u.single},a.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"b",value:n.b,onChange:d,dragLabel:"true",dragMax:"255"})),a.default.createElement("div",{style:u.alpha},a.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"a",value:Math.round(100*n.a),onChange:d,dragLabel:"true",dragMax:"100"})))};t.default=l},1306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=l(n(0)),o=l(n(2)),i=l(n(82)),s=n(143);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SketchPresetColors=function(e){var t=e.colors,n=e.onClick,o=void 0===n?function(){}:n,l=e.onSwatchHover,c=(0,i.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),u=function(e,t){o({hex:e,source:"hex"},t)};return r.default.createElement("div",{style:c.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return r.default.createElement("div",{key:n,style:c.swatchWrap},r.default.createElement(s.Swatch,a({},t,{style:c.swatch,onClick:u,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};c.propTypes={colors:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.shape({color:o.default.string,title:o.default.string})])).isRequired},t.default=c},1307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var a=l(n(0)),r=l(n(82)),o=n(143),i=l(n(1308)),s=l(n(1310));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Slider=function(e){var t=e.hsl,n=e.onChange,s=e.pointer,l=e.className,c=void 0===l?"":l,u=(0,r.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}});return a.default.createElement("div",{className:"slider-picker "+c},a.default.createElement("div",{style:u.hue},a.default.createElement(o.Hue,{style:u.Hue,hsl:t,pointer:s,onChange:n})),a.default.createElement("div",{style:u.swatches},a.default.createElement(i.default,{hsl:t,onClick:n})))};c.defaultProps={pointer:s.default},t.default=(0,o.ColorWrap)(c)},1308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatches=void 0;var a=i(n(0)),r=i(n(82)),o=i(n(1309));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.SliderSwatches=function(e){var t=e.onClick,n=e.hsl,i=(0,r.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return a.default.createElement("div",{style:i.swatches},a.default.createElement("div",{style:i.swatch},a.default.createElement(o.default,{hsl:n,offset:".80",active:Math.round(100*n.l)/100==.8&&Math.round(100*n.s)/100==.5,onClick:t,first:!0})),a.default.createElement("div",{style:i.swatch},a.default.createElement(o.default,{hsl:n,offset:".65",active:Math.round(100*n.l)/100==.65&&Math.round(100*n.s)/100==.5,onClick:t})),a.default.createElement("div",{style:i.swatch},a.default.createElement(o.default,{hsl:n,offset:".50",active:Math.round(100*n.l)/100==.5&&Math.round(100*n.s)/100==.5,onClick:t})),a.default.createElement("div",{style:i.swatch},a.default.createElement(o.default,{hsl:n,offset:".35",active:Math.round(100*n.l)/100==.35&&Math.round(100*n.s)/100==.5,onClick:t})),a.default.createElement("div",{style:i.swatch},a.default.createElement(o.default,{hsl:n,offset:".20",active:Math.round(100*n.l)/100==.2&&Math.round(100*n.s)/100==.5,onClick:t,last:!0})),a.default.createElement("div",{style:i.clear}))};t.default=s},1309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatch=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderSwatch=function(e){var t=e.hsl,n=e.offset,o=e.onClick,i=void 0===o?function(){}:o,s=e.active,l=e.first,c=e.last,u=(0,r.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:l,last:c});return a.default.createElement("div",{style:u.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})};t.default=i},1310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var a=o(n(0)),r=o(n(82));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(){var e=(0,r.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.default.createElement("div",{style:e.picker})};t.default=i},1311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatches=void 0;var a=d(n(0)),r=d(n(2)),o=d(n(82)),i=d(n(388)),s=d(n(303)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1031)),c=n(143),u=d(n(1312));function d(e){return e&&e.__esModule?e:{default:e}}var p=t.Swatches=function(e){var t=e.width,n=e.height,r=e.onChange,l=e.onSwatchHover,d=e.colors,p=e.hex,h=e.className,f=void 0===h?"":h,g=(0,o.default)({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}}),b=function(e,t){s.default.isValidHex(e)&&r({hex:e,source:"hex"},t)};return a.default.createElement("div",{style:g.picker,className:"swatches-picker "+f},a.default.createElement(c.Raised,null,a.default.createElement("div",{style:g.overflow},a.default.createElement("div",{style:g.body},(0,i.default)(d,(function(e){return a.default.createElement(u.default,{key:e.toString(),group:e,active:p,onClick:b,onSwatchHover:l})})),a.default.createElement("div",{style:g.clear})))))};p.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),colors:r.default.arrayOf(r.default.arrayOf(r.default.string))},p.defaultProps={width:320,height:240,colors:[[l.red[900],l.red[700],l.red[500],l.red[300],l.red[100]],[l.pink[900],l.pink[700],l.pink[500],l.pink[300],l.pink[100]],[l.purple[900],l.purple[700],l.purple[500],l.purple[300],l.purple[100]],[l.deepPurple[900],l.deepPurple[700],l.deepPurple[500],l.deepPurple[300],l.deepPurple[100]],[l.indigo[900],l.indigo[700],l.indigo[500],l.indigo[300],l.indigo[100]],[l.blue[900],l.blue[700],l.blue[500],l.blue[300],l.blue[100]],[l.lightBlue[900],l.lightBlue[700],l.lightBlue[500],l.lightBlue[300],l.lightBlue[100]],[l.cyan[900],l.cyan[700],l.cyan[500],l.cyan[300],l.cyan[100]],[l.teal[900],l.teal[700],l.teal[500],l.teal[300],l.teal[100]],["#194D33",l.green[700],l.green[500],l.green[300],l.green[100]],[l.lightGreen[900],l.lightGreen[700],l.lightGreen[500],l.lightGreen[300],l.lightGreen[100]],[l.lime[900],l.lime[700],l.lime[500],l.lime[300],l.lime[100]],[l.yellow[900],l.yellow[700],l.yellow[500],l.yellow[300],l.yellow[100]],[l.amber[900],l.amber[700],l.amber[500],l.amber[300],l.amber[100]],[l.orange[900],l.orange[700],l.orange[500],l.orange[300],l.orange[100]],[l.deepOrange[900],l.deepOrange[700],l.deepOrange[500],l.deepOrange[300],l.deepOrange[100]],[l.brown[900],l.brown[700],l.brown[500],l.brown[300],l.brown[100]],[l.blueGrey[900],l.blueGrey[700],l.blueGrey[500],l.blueGrey[300],l.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]},t.default=(0,c.ColorWrap)(p)},1312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesGroup=void 0;var a=s(n(0)),r=s(n(82)),o=s(n(388)),i=s(n(1313));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesGroup=function(e){var t=e.onClick,n=e.onSwatchHover,s=e.group,l=e.active,c=(0,r.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return a.default.createElement("div",{style:c.group},(0,o.default)(s,(function(e,r){return a.default.createElement(i.default,{key:e,color:e,active:e.toLowerCase()===l,first:0===r,last:r===s.length-1,onClick:t,onSwatchHover:n})})))};t.default=l},1313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesColor=void 0;var a=s(n(0)),r=s(n(82)),o=s(n(303)),i=n(143);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesColor=function(e){var t=e.color,n=e.onClick,s=void 0===n?function(){}:n,l=e.onSwatchHover,c=e.first,u=e.last,d=e.active,p=(0,r.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{fill:o.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{fill:"#333"}},transparent:{check:{fill:"#333"}}},{first:c,last:u,active:d,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return a.default.createElement(i.Swatch,{color:t,style:p.color,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},a.default.createElement("div",{style:p.check},a.default.createElement("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},a.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};t.default=l},1314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twitter=void 0;var a=c(n(0)),r=c(n(2)),o=c(n(82)),i=c(n(388)),s=c(n(303)),l=n(143);function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Twitter=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,c=e.colors,u=e.width,d=e.triangle,p=e.className,h=void 0===p?"":p,f=(0,o.default)({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},{"hide-triangle":"hide"===d,"top-left-triangle":"top-left"===d,"top-right-triangle":"top-right"===d}),g=function(e,n){s.default.isValidHex(e)&&t({hex:e,source:"hex"},n)};return a.default.createElement("div",{style:f.card,className:"twitter-picker "+h},a.default.createElement("div",{style:f.triangleShadow}),a.default.createElement("div",{style:f.triangle}),a.default.createElement("div",{style:f.body},(0,i.default)(c,(function(e,t){return a.default.createElement(l.Swatch,{key:t,color:e,hex:e,style:f.swatch,onClick:g,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),a.default.createElement("div",{style:f.hash},"#"),a.default.createElement(l.EditableInput,{style:{input:f.input},value:r.replace("#",""),onChange:g}),a.default.createElement("div",{style:f.clear})))};u.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),triangle:r.default.oneOf(["hide","top-left","top-right"]),colors:r.default.arrayOf(r.default.string)},u.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left"},t.default=(0,l.ColorWrap)(u)},1315:function(e,t,n){},1316:function(e,t,n){},1317:function(e,t,n){},1318:function(e,t,n){},132:function(e,t,n){"use strict";n.d(t,"e",(function(){return L})),n.d(t,"f",(function(){return I})),n.d(t,"d",(function(){return B})),n.d(t,"c",(function(){return V})),n.d(t,"b",(function(){return H})),n.d(t,"a",(function(){return q}));n(214),n(124),n(767),n(40);var a,r=n(65),o=n.n(r),i=n(84),s=n.n(i),l=n(213),c=n.n(l),u=n(164),d=n.n(u),p=n(26),h=n.n(p),f=n(29),g=n.n(f),b=n(54),m=n.n(b),v=n(97),y=n.n(v),O=n(76),x=n.n(O),C=n(7),w=n.n(C),E=n(59),_=n.n(E),S=n(4),j=n.n(S),T=n(96),R=n.n(T),k=n(0),M=n(57),D=n(9),P=n(382),A=n(52),N=n(265),F=n(64);function L(e,t,n,a=!0,r=[],o=[]){const[i,s]=Object(k.useState)({count:0,collection:r,loading:!0,lastFetchDataConfig:null,permissions:[],bulkSelectEnabled:!1});function l(e){s(t=>j()({},t,e))}Object(k.useEffect)(()=>{a&&M.a.get({endpoint:"/api/v1/"+e+"/_info?q="+R.a.encode({keys:["permissions"]})}).then(({json:e={}})=>{l({permissions:e.permissions})},Object(A.d)(e=>n(Object(D.c)("An error occurred while fetching %s info: %s",t,e))))},[]);const c=Object(k.useCallback)(({pageIndex:a,pageSize:r,sortBy:i,filters:s})=>{var c;l({lastFetchDataConfig:{filters:s,pageIndex:a,pageSize:r,sortBy:i},loading:!0});const u=w()(c=x()(o).call(o,s)).call(c,({id:e,operator:t,value:n})=>({col:e,opr:t,value:n})),d=R.a.encode(j()({order_column:i[0].id,order_direction:i[0].desc?"desc":"asc",page:a,page_size:r},u.length?{filters:u}:{}));return M.a.get({endpoint:"/api/v1/"+e+"/?q="+d}).then(({json:e={}})=>{l({collection:e.result,count:e.count})},Object(A.d)(e=>n(Object(D.c)("An error occurred while fetching %ss: %s",t,e)))).finally(()=>{l({loading:!1})})},[o.length?o:null]);return{state:{loading:i.loading,resourceCount:i.count,resourceCollection:i.collection,bulkSelectEnabled:i.bulkSelectEnabled},setResourceCollection:e=>l({collection:e}),hasPerm:function(e){var t;return!!i.permissions.length&&Boolean(_()(t=i.permissions).call(t,t=>t===e))},fetchData:c,toggleBulkSelect:function(){l({bulkSelectEnabled:!i.bulkSelectEnabled})},refreshData:e=>i.lastFetchDataConfig?c(i.lastFetchDataConfig):e?c(e):null}}function I(e,t,n){const[a,r]=Object(k.useState)({loading:!1,resource:null,error:null});function o(e){r(t=>j()({},t,e))}return{state:a,setResource:e=>o({resource:e}),fetchResource:Object(k.useCallback)(a=>(o({loading:!0}),M.a.get({endpoint:"/api/v1/"+e+"/"+a}).then(({json:e={}})=>(o({resource:e.result,error:null}),e.result),Object(A.d)(e=>{n(Object(D.c)("An error occurred while fetching %ss: %s",t,y()(e))),o({error:e})})).finally(()=>{o({loading:!1})})),[]),createResource:Object(k.useCallback)(a=>(o({loading:!0}),M.a.post({endpoint:"/api/v1/"+e+"/",body:y()(a),headers:{"Content-Type":"application/json"}}).then(({json:e={}})=>(o({resource:e.result}),e.id),Object(A.d)(e=>n(Object(D.c)("An error occurred while creating %ss: %s",t,y()(e))))).finally(()=>{o({loading:!1})})),[]),updateResource:Object(k.useCallback)((a,r)=>(o({loading:!0}),M.a.put({endpoint:"/api/v1/"+e+"/"+a,body:y()(r),headers:{"Content-Type":"application/json"}}).then(({json:e={}})=>(o({resource:e.result}),e.result),Object(A.d)(e=>n(Object(D.c)("An error occurred while fetching %ss: %s",t,y()(e))))).finally(()=>{o({loading:!1})})),[])}}function B(e,t,n){const[a,r]=Object(k.useState)({loading:!1,passwordsNeeded:[],alreadyExists:[]});function o(e){r(t=>j()({},t,e))}const i=e=>"object"==typeof e&&m()(e._schema)&&1===e._schema.length&&"Must provide a password for the database"===e._schema[0],l=e=>"string"==typeof e&&g()(e).call(e,"already exists and `overwrite=true` was not passed"),u=e=>{var t,n;return w()(t=h()(n=d()(e)).call(n,([,e])=>i(e))).call(t,([e])=>e)},p=e=>{var t,n;return w()(t=h()(n=d()(e)).call(n,([,e])=>l(e))).call(t,([e])=>e)};return{state:a,importResource:Object(k.useCallback)((a,r={},d=!1)=>{o({loading:!0});const h=new FormData;return h.append("formData",a),r&&h.append("passwords",y()(r)),d&&h.append("overwrite","true"),M.a.post({endpoint:"/api/v1/"+e+"/import/",body:h}).then(()=>!0).catch(e=>Object(F.a)(e).then(e=>{const a=e.message||e.error;return"string"==typeof a?(n(Object(D.c)("An error occurred while importing %s: %s",t,a)),!1):((e=>{var t;return c()(t=s()(e)).call(t,e=>!i(e)&&!l(e))})(a)?n(Object(D.c)("An error occurred while importing %s: %s",t,y()(a))):o({passwordsNeeded:u(a),alreadyExists:p(a)}),!1)})).finally(()=>{o({loading:!1})})},[])}}!function(e){e.CHART="slice",e.DASHBOARD="Dashboard"}(a||(a={}));const U={chart:Object(P.a)({requestType:"search",method:"GET",endpoint:"/api/v1/chart/favorite_status"}),dashboard:Object(P.a)({requestType:"search",method:"GET",endpoint:"/api/v1/dashboard/favorite_status"})};function V(e,t,n){const[r,i]=Object(k.useState)({}),s=e=>i(t=>j()({},t,e));return Object(k.useEffect)(()=>{t.length&&U[e]("q="+R.a.encode(t)).then(({result:e})=>{const t=o()(e).call(e,(e,t)=>(e[t.id]=t.value,e),{});s(t)},Object(A.d)(e=>n(Object(D.c)("There was an error fetching the favorite status: %s",e))))},[t]),[Object(k.useCallback)((t,r)=>{const o=r?"unselect":"select";M.a.get({endpoint:"/superset/favstar/"+("chart"===e?a.CHART:a.DASHBOARD)+"/"+t+"/"+o+"/"}).then(({json:e})=>{s({[t]:(null==e?void 0:e.count)>0})},Object(A.d)(e=>n(Object(D.c)("There was an error saving the favorite status: %s",e))))},[e]),r]}const H=(e,t)=>{const[n,a]=Object(k.useState)(null);return{sliceCurrentlyEditing:n,handleChartUpdated:function(n){const a=w()(t).call(t,e=>e.id===n.id?j()({},e,n):e);e(a)},openChartEditModal:function(e){a({slice_id:e.id,slice_name:e.slice_name,description:e.description,cache_timeout:e.cache_timeout})},closeChartEditModal:function(){a(null)}}},q=(e,t,n)=>{Object(N.a)(window.location.origin+"/superset/sqllab?savedQueryId="+e).then(()=>{n(Object(D.c)("Link Copied!"))}).catch(()=>{t(Object(D.c)("Sorry, your browser does not support copying."))})}},142:function(e,t,n){"use strict";const a=n(14).l;t.a=a},143:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1270);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return d(a).default}});var r=n(1029);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return d(r).default}});var o=n(1273);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return d(o).default}});var i=n(1274);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return d(i).default}});var s=n(1276);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return d(s).default}});var l=n(1277);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return d(l).default}});var c=n(1030);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return d(c).default}});var u=n(1279);function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return d(u).default}})},159:function(e,t,n){"use strict";n.d(t,"n",(function(){return a})),n.d(t,"o",(function(){return r})),n.d(t,"q",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"m",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"p",(function(){return v})),n.d(t,"b",(function(){return y}));const a={offline:"danger",failed:"danger",pending:"info",fetching:"info",running:"warning",stopped:"danger",success:"success"},r={success:"success",failed:"failed",running:"running",offline:"offline",pending:"pending"},o=["now","1 hour ago","1 day ago","7 days ago","28 days ago","90 days ago","1 year ago"],i=5,s=3,l=51,c=1024,u=2,d=864e5,p=5120,h=.9,f=8e3,g=100,b=90,m=60,v=55,y=50},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(8),r=n.n(a),o=(n(0),n(50)),i=n(1);function s(){const e=r()(["\n  z-index: 1000;\n  width: 50px;\n  position: relative;\n  margin: 10px;\n  &.inline {\n    margin: 0px;\n    width: 30px;\n  }\n  &.floating {\n    padding: 0;\n    margin: 0;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n"]);return s=function(){return e},e}const l=o.a.img(s());function c({position:e="floating"}){return Object(i.f)(l,{className:"loading "+e,alt:"Loading...",src:"/static/assets/images/loading.gif"})}},176:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var a=n(4),r=n.n(a),o=n(8),i=n.n(o),s=n(50),l=n(14);function c(){const e=i()(["\n  &.ant-select-single {\n    .ant-select-selector {\n      height: 36px;\n      padding: 0 11px;\n      background-color: ",";\n      border: none;\n\n      .ant-select-selection-search-input {\n        height: 100%;\n      }\n\n      .ant-select-selection-item,\n      .ant-select-selection-placeholder {\n        line-height: 35px;\n        color: ",";\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){const e=i()(["\n  display: block;\n"]);return u=function(){return e},e}const d=Object(s.a)(l.n)(u()),p=Object(s.a)(d)(c(),({theme:e})=>e.colors.grayscale.light3,({theme:e})=>e.colors.grayscale.dark1),h=l.n.Option,f=r()(d,{Option:h}),g=r()(p,{Option:h})},184:function(e,t,n){"use strict";n.d(t,"f",(function(){return _})),n.d(t,"c",(function(){return S})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return T})),n.d(t,"b",(function(){return R})),n.d(t,"d",(function(){return k})),n.d(t,"a",(function(){return M}));n(124),n(280),n(40);var a=n(23),r=n.n(a),o=n(161),i=n.n(o),s=n(277),l=n.n(s),c=n(34),u=n.n(c),d=n(329),p=n.n(d),h=n(59),f=n.n(h),g=n(7),b=n.n(g),m=n(60),v=n.n(m),y=n(0),O=n.n(y),x=n(327),C=n(1);const w={"mode/sql":()=>n.e(75).then(n.t.bind(null,1320,7)),"mode/markdown":()=>Promise.all([n.e(11),n.e(10),n.e(19),n.e(64)]).then(n.t.bind(null,1321,7)),"mode/css":()=>Promise.all([n.e(10),n.e(72)]).then(n.t.bind(null,1322,7)),"mode/json":()=>n.e(63).then(n.t.bind(null,1323,7)),"mode/yaml":()=>n.e(76).then(n.t.bind(null,1324,7)),"mode/html":()=>Promise.all([n.e(11),n.e(10),n.e(19),n.e(73)]).then(n.t.bind(null,1325,7)),"mode/javascript":()=>Promise.all([n.e(11),n.e(74)]).then(n.t.bind(null,1326,7)),"theme/textmate":()=>n.e(78).then(n.t.bind(null,1327,7)),"theme/github":()=>n.e(77).then(n.t.bind(null,1328,7)),"ext/language_tools":()=>n.e(71).then(n.t.bind(null,1329,7))};function E(e,{defaultMode:t,defaultTheme:a,defaultTabSize:o=2,placeholder:s}={}){return Object(x.a)(async()=>{var s,c;const{default:d}=await Promise.all([n.e(0),n.e(18)]).then(n.t.bind(null,1258,7)),{default:h}=await Promise.all([n.e(0),n.e(18),n.e(47)]).then(n.t.bind(null,1330,7));await v.a.all(b()(e).call(e,e=>w[e]()));const g=t||(null===(s=f()(e).call(e,e=>p()(e).call(e,"mode/")))||void 0===s?void 0:s.replace("mode/","")),m=a||(null===(c=f()(e).call(e,e=>p()(e).call(e,"theme/")))||void 0===c?void 0:c.replace("theme/",""));return O.a.forwardRef((function(e,t){let{keywords:n,mode:a=g,theme:s=m,tabSize:c=o}=e,p=u()(e,["keywords","mode","theme","tabSize"]);if(n){const e={getCompletions:(e,t,r,o,s)=>{l()(i()(o,10))&&t.getMode().$id==="ace/mode/"+a&&s(null,n)}};d.acequire("ace/ext/language_tools").setCompleters([e])}return Object(C.f)(h,r()({ref:t,mode:a,theme:s,tabSize:c},p))}))},s)}const _=E(["mode/sql","theme/github","ext/language_tools"]),S=E(["mode/sql","theme/github","ext/language_tools"],{placeholder:()=>Object(C.f)("div",{style:{height:"100%"}},Object(C.f)("div",{style:{width:41,height:"100%",background:"#e8e8e8"}}),Object(C.f)("div",{className:"ace_content"}))}),j=E(["mode/markdown","theme/textmate"]),T=E(["mode/markdown","mode/sql","mode/json","mode/html","mode/javascript","theme/textmate"]),R=E(["mode/css","theme/github"]),k=E(["mode/json","theme/github"]),M=E(["mode/json","mode/yaml","theme/github"])},2028:function(e,t,n){},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(97),r=n.n(a),o=n(106),i=n.n(o);function s(e){const t=new i.a;return r()(e,(e,n)=>{if("object"==typeof n&&null!==n){if(t.has(n))try{return JSON.parse(r()(n))}catch(e){return}t.add(n)}return n})}},237:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let r;n.d(t,"a",(function(){return o})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.FRONTEND_CSRF_ERROR="FRONTEND_CSRF_ERROR",e.FRONTEND_NETWORK_ERROR="FRONTEND_NETWORK_ERROR",e.FRONTEND_TIMEOUT_ERROR="FRONTEND_TIMEOUT_ERROR",e.GENERIC_DB_ENGINE_ERROR="GENERIC_DB_ENGINE_ERROR",e.VIZ_GET_DF_ERROR="VIZ_GET_DF_ERROR",e.UNKNOWN_DATASOURCE_TYPE_ERROR="UNKNOWN_DATASOURCE_TYPE_ERROR",e.FAILED_FETCHING_DATASOURCE_INFO_ERROR="FAILED_FETCHING_DATASOURCE_INFO_ERROR",e.TABLE_SECURITY_ACCESS_ERROR="TABLE_SECURITY_ACCESS_ERROR",e.DATASOURCE_SECURITY_ACCESS_ERROR="DATASOURCE_SECURITY_ACCESS_ERROR",e.MISSING_OWNERSHIP_ERROR="MISSING_OWNERSHIP_ERROR"}(r||(r={}));class o extends Error{constructor({status:e,statusText:t,message:n,link:o,extra:i,stack:s,error_type:l,originalError:c}){super(n),a(this,"status",void 0),a(this,"statusText",void 0),a(this,"errorType",void 0),a(this,"extra",void 0),a(this,"originalError",void 0);const u=s||(c instanceof Error?c.stack:void 0);this.stack=u&&this.stack?[this.stack.split("\n")[0],...u.split("\n").slice(1)].join("\n"):this.stack,this.name="SupersetApiError",this.errorType=l||r.UNKNOWN_ERROR,this.extra=i||{},o&&(this.extra.link=o),this.status=e,this.statusText=t,this.originalError=c}}},289:function(e,t,n){"use strict";n.r(t),n.d(t,"LOG_EVENT",(function(){return a})),n.d(t,"logEvent",(function(){return r}));const a="LOG_EVENT";function r(e,t){return n=>n({type:a,payload:{eventName:e,eventData:t}})}},303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=void 0;var a=o(n(1636)),r=o(n(570));function o(e){return e&&e.__esModule?e:{default:e}}t.default={simpleCheckForValidColor:function(e){var t=0,n=0;return(0,a.default)(["r","g","b","a","h","s","l","v"],(function(a){if(e[a]&&(t+=1,isNaN(e[a])||(n+=1),"s"===a||"l"===a)){/^\d+%$/.test(e[a])&&(n+=1)}})),t===n&&e},toState:function(e,t){var n=e.hex?(0,r.default)(e.hex):(0,r.default)(e),a=n.toHsl(),o=n.toHsv(),i=n.toRgb(),s=n.toHex();return 0===a.s&&(a.h=t||0,o.h=t||0),{hsl:a,hex:"000000"===s&&0===i.a?"transparent":"#"+s,rgb:i,hsv:o,oldHue:e.h||t||a.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,r.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"}};t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},327:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(40);var a=n(23),r=n.n(a),o=n(60),i=n.n(o),s=n(4),l=n.n(s),c=n(0),u=n.n(c),d=n(167),p=n(1);function h({width:e,height:t,showLoadingForImport:n=!1,placeholderStyle:a}){return t&&Object(p.f)("div",{key:"async-asm-placeholder",style:l()({width:e,height:t},a)},n&&Object(p.f)(d.a,{position:"floating"}))||null}function f(e,t=h){let n,a;function o(){return n||(n=e instanceof i.a?e:e()),a||n.then(e=>{a=e.default||e}),n}const s=u.a.forwardRef((function(e,n){const[i,s]=Object(c.useState)(void 0!==a);Object(c.useEffect)(()=>{let e=!0;return i||o().then(()=>{e&&s(!0)}),()=>{e=!1}});const l=a||t;return l?Object(p.f)(l,r()({ref:l===a?n:null},e)):null}));return s.preload=o,s}},376:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(730),r=n.n(a),o=n(19),i=n.n(o),s=n(106),l=n.n(s),c=n(47);const u=function(){var e;const t=document.getElementById("app");if(!t)return[];const n=JSON.parse(t.getAttribute("data-bootstrap"));Object(c.b)(null==n?void 0:null===(e=n.common)||void 0===e?void 0:e.feature_flags);const a=new l.a([window.location.hostname]);var o;return Object(c.c)(c.a.ALLOW_DASHBOARD_DOMAIN_SHARDING)&&n&&n.common&&n.common.conf&&n.common.conf.SUPERSET_WEBSERVER_DOMAINS&&i()(o=n.common.conf.SUPERSET_WEBSERVER_DOMAINS).call(o,e=>{a.add(e)}),r()(a)}(),d=u.length>1},382:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(57),r=n(237);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}async function i(e){if(e instanceof r.a)throw e;if("string"==typeof e)throw new r.a({message:e});if(e instanceof Error)throw new r.a({message:e.message||"Unknown Error",originalError:e});let t,n,a,i,s="Unknown Error";if(e instanceof Response){a=e.status,i=e.statusText,s=a+" "+i;try{t=await e.json(),n=t}catch(t){n=e}}else e&&(t=e);if(t&&("error"in t||"message"in t||"errors"in t)){let e;var l;if("errors"in t)e=(null==(l=t.errors)?void 0:l[0])||{};else e="object"==typeof t.error?t.error:t;throw s=e.message||e.error||e.error_type||s,new r.a(o({status:a,statusText:i,message:s,originalError:n},e))}throw new r.a({message:s,originalError:e})}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const l=new Set(["form","json","search"]);function c(e){let{endpoint:t,method:n,requestType:r,responseType:o,processResponse:c}=e,u=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["endpoint","method","requestType","responseType","processResponse"]);const d=r||(function(e){return!e||"GET"===e||"DELETE"===e||"HEAD"===e}(n)?"search":"json");if(!l.has(d))throw new Error("Invalid request payload type, choose from: form | json | search");async function p(e,{client:r=a.a}={client:a.a}){try{const a=s({},u,{method:n,endpoint:t});let l;"search"===d?a.searchParams=e:"form"===d?a.postPayload=e:a.jsonPayload=e;const p=await r.request(s({},a,{parseMethod:"raw"}));if("text"===o)l=await p.text();else if("raw"===o||null===o)l=p;else if(l=await p.json(),l&&"object"==typeof l&&"error"in l)return i(l);const h=l;return c?c(h):h}catch(e){return i(e)}}return p.method=n,p.endpoint=t,p.requestType=d,p}},400:function(e,t,n){"use strict";var a=n(7),r=n.n(a),o=n(76),i=n.n(o),s=n(159);const l=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"],c=i()(l).call(l,["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]),u=r()(c).call(c,e=>({meta:"sql",name:e,score:s.l,value:e}));t.a=u},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"o",(function(){return v})),n.d(t,"p",(function(){return y})),n.d(t,"n",(function(){return O})),n.d(t,"m",(function(){return x})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return w}));var a=n(106),r=n.n(a),o=n(84),i=n.n(o),s=n(9);const l={AVG:"AVG",COUNT:"COUNT",COUNT_DISTINCT:"COUNT_DISTINCT",MAX:"MAX",MIN:"MIN",SUM:"SUM"},c=i()(l),u={"==":"==","!=":"!=",">":">","<":"<",">=":">=","<=":"<=",in:"in","not in":"not in",LIKE:"LIKE",regex:"regex","IS NOT NULL":"IS NOT NULL","IS NULL":"IS NULL","LATEST PARTITION":"LATEST PARTITION"},d=i()(u),p=[u.LIKE],h=[u.regex],f=[u["=="],u["!="],u[">"],u["<"],u[">="],u["<="]],g=new r.a([u.in,u["not in"]]),b=new r.a([u["LATEST PARTITION"]]),m=[u["IS NOT NULL"],u["IS NULL"],u["LATEST PARTITION"]],v=/^(sum|min|max|avg|count|count_distinct)__.*$/i,y=/^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\([A-Z0-9_."]*\)$/i,O=/^(LONG|DOUBLE|FLOAT)?(SUM|MAX|MIN|COUNT)\([A-Z0-9_."]*\)$/i,x={time_range:Object(s.c)("Time Range"),granularity_sqla:Object(s.c)("Time Column"),time_grain_sqla:Object(s.c)("Time Grain"),druid_time_origin:Object(s.c)("Origin"),granularity:Object(s.c)("Time Granularity")},C={DEFAULT_VALUE:"defaultValue",MULTIPLE:"multiple",SEARCH_ALL_OPTIONS:"searchAllOptions",CLEARABLE:"clearable"},w=1e3},47:function(e,t,n){"use strict";var a;function r(e){window.featureFlags||(window.featureFlags=e||{})}function o(e){return window&&window.featureFlags&&!!window.featureFlags[e]}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),function(e){e.ALLOW_DASHBOARD_DOMAIN_SHARDING="ALLOW_DASHBOARD_DOMAIN_SHARDING",e.OMNIBAR="OMNIBAR",e.CLIENT_CACHE="CLIENT_CACHE",e.SCHEDULED_QUERIES="SCHEDULED_QUERIES",e.SQL_VALIDATORS_BY_ENGINE="SQL_VALIDATORS_BY_ENGINE",e.ESTIMATE_QUERY_COST="ESTIMATE_QUERY_COST",e.SHARE_QUERIES_VIA_KV_STORE="SHARE_QUERIES_VIA_KV_STORE",e.SQLLAB_BACKEND_PERSISTENCE="SQLLAB_BACKEND_PERSISTENCE",e.THUMBNAILS="THUMBNAILS",e.LISTVIEWS_DEFAULT_CARD_VIEW="LISTVIEWS_DEFAULT_CARD_VIEW",e.ENABLE_REACT_CRUD_VIEWS="ENABLE_REACT_CRUD_VIEWS",e.DISABLE_DATASET_SOURCE_EDIT="DISABLE_DATASET_SOURCE_EDIT",e.DISPLAY_MARKDOWN_HTML="DISPLAY_MARKDOWN_HTML",e.ESCAPE_MARKDOWN_HTML="ESCAPE_MARKDOWN_HTML",e.VERSIONED_EXPORT="VERSIONED_EXPORT",e.GLOBAL_ASYNC_QUERIES="GLOBAL_ASYNC_QUERIES",e.ENABLE_TEMPLATE_PROCESSING="ENABLE_TEMPLATE_PROCESSING"}(a||(a={}))},52:function(e,t,n){"use strict";n.d(t,"g",(function(){return S})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return T})),n.d(t,"d",(function(){return R})),n.d(t,"j",(function(){return k})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return D})),n.d(t,"k",(function(){return P})),n.d(t,"m",(function(){return A})),n.d(t,"l",(function(){return F})),n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return B}));n(124),n(175),n(40);var a=n(8),r=n.n(a),o=n(46),i=n.n(o),s=n(60),l=n.n(s),c=n(76),u=n.n(c),d=n(7),p=n.n(d),h=n(4),f=n.n(h),g=n(57),b=n(9),m=n(189),v=n(50),y=n(96),O=n.n(y),x=n(64);function C(){const e=r()(["\n  svg {\n    vertical-align: -7px;\n    color: ",";\n  }\n"]);return C=function(){return e},e}function w(){const e=r()(["\n  cursor: pointer;\n  a {\n    text-decoration: none;\n  }\n"]);return w=function(){return e},e}function E(){const e=r()(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(31%, 31%));\n  "," {\n    grid-template-columns: repeat(auto-fit, minmax(31%, 31%));\n  }\n\n  "," {\n    grid-template-columns: repeat(auto-fit, minmax(48%, 48%));\n  }\n\n  "," {\n    grid-template-columns: repeat(auto-fit, minmax(50%, 80%));\n  }\n  grid-gap: ","px;\n  justify-content: left;\n  padding: ","px;\n  padding-top: ","px;\n"]);return E=function(){return e},e}const _=e=>(t,n,a,r)=>async(o="",i,s)=>{const l="/api/v1/"+t+"/"+e+"/"+n,c=r&&0===i?[{label:"me",value:r}]:[];try{var d;const e=O.a.encode(f()({},i?{page:i}:{},s?{page_size:s}:{},o?{filter:o}:{})),{json:t={}}=await g.a.get({endpoint:l+"?q="+e}),n=null==t?void 0:null===(d=t.result)||void 0===d?void 0:p()(d).call(d,({text:e,value:t})=>({label:e,value:t}));return u()(c).call(c,n)}catch(e){a(e)}return[]},S=(e,t,n)=>{const a=e=>{const t={order_column:"changed_on_delta_humanized",order_direction:"desc",page:0,page_size:3,filters:e};return e||delete t.filters,O.a.encode(t)},r={edited:[{col:"changed_by",opr:"rel_o_m",value:""+e}],created:[{col:"created_by",opr:"rel_o_m",value:""+e}]},o=[g.a.get({endpoint:t}),g.a.get({endpoint:"/api/v1/dashboard/?q="+a(r.edited)}),g.a.get({endpoint:"/api/v1/chart/?q="+a(r.edited)}),g.a.get({endpoint:"/api/v1/dashboard/?q="+a(r.created)}),g.a.get({endpoint:"/api/v1/chart/?q="+a(r.created)}),g.a.get({endpoint:"/api/v1/saved_query/?q="+a(r.created)})];return l.a.all(o).then(([e,t,r,o,s,c])=>{var u,d,p,h,f,m,v,y,O,x;const C={editedDash:null===(u=t.json)||void 0===u?void 0:i()(d=u.result).call(d,0,3),editedChart:null===(p=r.json)||void 0===p?void 0:i()(h=p.result).call(h,0,3),createdByDash:null===(f=o.json)||void 0===f?void 0:i()(m=f.result).call(m,0,3),createdByChart:null===(v=s.json)||void 0===v?void 0:i()(y=v.result).call(y,0,3),createdByQuery:null===(O=c.json)||void 0===O?void 0:i()(x=O.result).call(x,0,3)};if(0===e.json.length){const e=[g.a.get({endpoint:"/api/v1/chart/?q="+a()}),g.a.get({endpoint:"/api/v1/dashboard/?q="+a()})];return l.a.all(e).then(([e,t])=>(C.examples=[...e.json.result,...t.json.result],C)).catch(e=>n(Object(b.c)("There was an error fetching your recent activity:"),e))}return C.viewed=e.json,C})},j=_("related"),T=_("distinct");function R(e){return async t=>{const n=await Object(x.a)(t);m.a.error(t),e(n.message||n.error)}}function k({id:e,slice_name:t},n,a,r,o,i){const s={pageIndex:0,pageSize:3,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"created_by",operator:"rel_o_m",value:""+i}]};g.a.delete({endpoint:"/api/v1/chart/"+e}).then(()=>{"Mine"===o?r(s):r(),n(Object(b.c)("Deleted: %s",t))},()=>{a(Object(b.c)("There was an issue deleting: %s",t))})}function M(e){return window.location.assign("/api/v1/chart/export/?q="+O.a.encode(p()(e).call(e,({id:e})=>e)))}function D(e){return window.location.assign("/api/v1/dashboard/export/?q="+O.a.encode(p()(e).call(e,({id:e})=>e)))}function P({id:e,dashboard_title:t},n,a,r,o,i){return g.a.delete({endpoint:"/api/v1/dashboard/"+e}).then(()=>{"Mine"===o?n({pageIndex:0,pageSize:3,sortBy:[{id:"changed_on_delta_humanized",desc:!0}],filters:[{id:"owners",operator:"rel_m_m",value:""+i}]}):n(),a(Object(b.c)("Deleted: %s",t))},R(e=>r(Object(b.c)("There was an issue deleting %s: %s",t,e))))}function A(e,t){let n=e.split("\n");return n.length>=t&&(n=i()(n).call(n,0,t),n.push("...")),n.join("\n")}const N=[576,768,992,1200],F=p()(N).call(N,e=>"@media (max-width: "+e+"px)"),L=v.a.div(E(),[F[3]],[F[2]],[F[1]],({theme:e})=>8*e.gridUnit,({theme:e})=>6*e.gridUnit,({theme:e})=>2*e.gridUnit),I=v.a.div(w()),B=v.a.div(C(),({theme:e})=>e.colors.primary.dark1)},572:function(e,t,n){"use strict";var a=n(23),r=n.n(a),o=n(6),i=n.n(o),s=n(0),l=n.n(s),c=n(2),u=n.n(c),d=n(70),p=n(9),h=n(57),f=n(64),g=n(1);const b={dataEndpoint:u.a.string.isRequired,onChange:u.a.func.isRequired,mutator:u.a.func.isRequired,onAsyncError:u.a.func,value:u.a.oneOfType([u.a.number,u.a.arrayOf(u.a.number)]),valueRenderer:u.a.func,placeholder:u.a.string,autoSelect:u.a.bool},m={placeholder:Object(p.c)("Select ..."),onAsyncError:()=>{}};class v extends l.a.PureComponent{constructor(e){var t;super(e),this.state={isLoading:!1,options:[]},this.onChange=i()(t=this.onChange).call(t,this)}componentDidMount(){this.fetchOptions()}onChange(e){this.props.onChange(e)}fetchOptions(){this.setState({isLoading:!0});const{mutator:e,dataEndpoint:t}=this.props;return h.a.get({endpoint:t}).then(({json:t})=>{const n=e?e(t):t;this.setState({options:n,isLoading:!1}),!this.props.value&&this.props.autoSelect&&n.length>0&&this.onChange(n[0])}).catch(e=>Object(f.a)(e).then(e=>{this.props.onAsyncError(e.error||e.statusText||e),this.setState({isLoading:!1})}))}render(){return Object(g.f)(d.f,r()({placeholder:this.props.placeholder,options:this.state.options,value:this.props.value,isLoading:this.state.isLoading,onChange:this.onChange,valueRenderer:this.props.valueRenderer},this.props))}}v.propTypes=b,v.defaultProps=m,t.a=v},628:function(e,t,n){"use strict";n.r(t),n.d(t,"TIME_FILTER_MAP",(function(){return $})),n.d(t,"TIME_RANGE",(function(){return J}));n(124),n(175);var a=n(106),r=n.n(a),o=n(44),i=n.n(o),s=n(19),l=n.n(s),c=n(329),u=n.n(c),d=n(288),p=n.n(d),h=n(26),f=n.n(h),g=n(59),b=n.n(g),m=n(7),v=n.n(m),y=n(54),O=n.n(y),x=n(4),C=n.n(x),w=n(6),E=n.n(w),_=n(796),S=n.n(_),j=n(8),T=n.n(j),R=n(211),k=n.n(R),M=n(0),D=n.n(M),P=n(2),A=n.n(P),N=n(232),F=n(70),L=n(28),I=n(50),B=n(57),U=n(9),V=n(727),H=n(109),q=n(956),z=n(1010),G=n(1011),W=n(662),Y=n(125),K=n(398),Q=n(45),X=(n(2028),n(1));function Z(){const e=T()(["\n  height: 100%;\n  min-height: 100%;\n  max-height: 100%;\n  overflow: visible;\n"]);return Z=function(){return e},e}const $={time_range:"__time_range",granularity_sqla:"__time_col",time_grain_sqla:"__time_grain",druid_time_origin:"__time_origin",granularity:"__granularity"},J=$.time_range,ee={chartId:A.a.number.isRequired,origSelectedValues:A.a.object,datasource:A.a.object.isRequired,instantFiltering:A.a.bool,filtersFields:A.a.arrayOf(A.a.shape({field:A.a.string,label:A.a.string})),filtersChoices:A.a.objectOf(A.a.arrayOf(A.a.shape({id:A.a.string,text:A.a.string,filter:A.a.string,metric:A.a.number}))),onChange:A.a.func,onFilterMenuOpen:A.a.func,onFilterMenuClose:A.a.func,showDateFilter:A.a.bool,showSqlaTimeGrain:A.a.bool,showSqlaTimeColumn:A.a.bool,showDruidTimeGrain:A.a.bool,showDruidTimeOrigin:A.a.bool},te=I.a.div(Z());class ne extends D.a.PureComponent{constructor(e){var t,n,a,r;super(e),S()(this,"onCloseDateFilterControl",()=>this.onFilterMenuClose(J)),this.state={selectedValues:e.origSelectedValues,hasChanged:!1},this.debouncerCache={},this.maxValueCache={},this.changeFilter=E()(t=this.changeFilter).call(t,this),this.onFilterMenuOpen=E()(n=this.onFilterMenuOpen).call(n,this),this.onOpenDateFilterControl=E()(a=this.onOpenDateFilterControl).call(a,this),this.onFilterMenuClose=E()(r=this.onFilterMenuClose).call(r,this)}onFilterMenuOpen(e){return this.props.onFilterMenuOpen(this.props.chartId,e)}onFilterMenuClose(e){return this.props.onFilterMenuClose(this.props.chartId,e)}onOpenDateFilterControl(){return this.onFilterMenuOpen(J)}getControlData(e){const{selectedValues:t}=this.state,n=C()({},W.a[e],{name:e,key:"control-"+e,value:t[$[e]],actions:{setControlValue:this.changeFilter}}),a=n.mapStateToProps;return a?C()({},n,a(this.props)):n}getKnownMax(e,t){return this.maxValueCache[e]=Math.max(this.maxValueCache[e]||0,Object(N.max)(t||this.props.filtersChoices[e]||[],e=>e.metric)),this.maxValueCache[e]}clickApply(){const{selectedValues:e}=this.state;this.setState({hasChanged:!1},()=>{this.props.onChange(e,!1)})}changeFilter(e,t){const n=$[e]||e;let a=null;null!==t&&(a=O()(t)?v()(t).call(t,e=>"string"==typeof e?e:e.value):t.value?t.value:t),this.setState(e=>({selectedValues:C()({},e.selectedValues,{[n]:a}),hasChanged:!0}),()=>{this.props.instantFiltering&&this.props.onChange({[n]:a},!1)})}debounceLoadOptions(e){return e in this.debouncerCache||(this.debouncerCache[e]=k()((t,n)=>{this.loadOptions(e,t).then(n)},500)),this.debouncerCache[e]}transformOptions(e,t){const n=void 0===t?Object(N.max)(e,e=>e.metric):t;return v()(e).call(e,e=>{const t=Math.round(e.metric/n*100),a={backgroundImage:"linear-gradient(to right, lightgrey, lightgrey "+t+"%, rgba(0,0,0,0) "+t+"%"};let r=e.id;return!0===r?r=V.b:!1===r&&(r=V.a),{value:e.id,label:r,style:a}})}async loadOptions(e,t=""){var n,a,r;const o=t.toLowerCase(),i=b()(n=this.props.filtersFields).call(n,t=>t.key===e).asc,s=C()({},this.props.rawFormData,{adhoc_filters:t?[{clause:"WHERE",comparator:null,expressionType:"SQL",sqlExpression:"lower("+e+") like '%"+o+"%'"}]:null}),{json:l}=await B.a.get({url:Object(Y.i)({formData:s,endpointType:"json",method:"GET"})}),c=f()(a=(null==l?void 0:null===(r=l.data)||void 0===r?void 0:r[e])||[]).call(a,e=>e.id);return c&&0!==c.length?(o&&p()(c).call(c,(e,t)=>{const n=e.id.toLowerCase(),a=t.id.toLowerCase(),r=u()(a).call(a,o)-u()(n).call(n,o);return 0===r?(e.metric-t.metric)*(i?1:-1):r}),this.transformOptions(c,this.getKnownMax(e,c))):[]}renderDateFilter(){const{showDateFilter:e}=this.props,t=Q.m.time_range;return e?Object(X.f)("div",{className:"row space-1"},Object(X.f)("div",{className:"col-lg-12 col-xs-12 filter-container"},Object(X.f)(q.a,{name:J,label:t,description:Object(U.c)("Select start and end date"),onChange:e=>{this.changeFilter(J,e)},onOpenDateFilterControl:this.onOpenDateFilterControl,onCloseDateFilterControl:this.onCloseDateFilterControl,value:this.state.selectedValues[J]||"No filter"}))):null}renderDatasourceFilters(){const{showSqlaTimeGrain:e,showSqlaTimeColumn:t,showDruidTimeGrain:n,showDruidTimeOrigin:a}=this.props,r=[],o=[],i=[];return e&&o.push("time_grain_sqla"),t&&o.push("granularity_sqla"),n&&i.push("granularity"),a&&i.push("druid_time_origin"),o.length&&r.push(Object(X.f)(z.a,{key:"sqla-filters",className:"control-row",controls:v()(o).call(o,e=>Object(X.f)(G.a,this.getControlData(e)))})),i.length&&r.push(Object(X.f)(z.a,{key:"druid-filters",className:"control-row",controls:v()(i).call(i,e=>Object(X.f)(G.a,this.getControlData(e)))})),r}renderSelect(e){var t,n;const{filtersChoices:a}=this.props,{selectedValues:o}=this.state;this.debouncerCache={},this.maxValueCache={},l()(t=f()(n=i()(o)).call(n,e=>o.hasOwnProperty(e)&&e in a)).call(t,e=>{var t;const n=a[e]||(a[e]=[]),i=new r.a(v()(n).call(n,e=>e.id)),s=O()(o[e])?o[e]:[o[e]];l()(t=f()(s).call(s,e=>null!==e&&!i.has(e))).call(t,t=>{n.unshift({filter:e,id:t,text:t,metric:0})})});const{key:s,label:c}=e,u=a[s]||[];let d=o[s]||null;return void 0===d&&e[Q.f.DEFAULT_VALUE]&&(d=e[Q.f.MULTIPLE]?e[Q.f.DEFAULT_VALUE].split(";"):e[Q.f.DEFAULT_VALUE]),Object(X.f)(K.a,{cacheOptions:!0,loadOptions:this.debounceLoadOptions(s),defaultOptions:this.transformOptions(u),key:s,placeholder:Object(U.c)("Type or Select [%s]",c),isMulti:e[Q.f.MULTIPLE],isClearable:e[Q.f.CLEARABLE],value:d,options:this.transformOptions(u),onChange:e=>{e!==d&&this.changeFilter(s,e)},onMenuOpen:()=>this.onFilterMenuOpen(s),onBlur:()=>this.onFilterMenuClose(s),onMenuClose:()=>this.onFilterMenuClose(s),selectWrap:e[Q.f.SEARCH_ALL_OPTIONS]&&u.length>=Q.g?F.a:F.c,noResultsText:Object(U.c)("No results found")})}renderFilters(){const{filtersFields:e=[]}=this.props;return v()(e).call(e,e=>{const{label:t,key:n}=e;return Object(X.f)("div",{key:n,className:"m-b-5 filter-container"},Object(X.f)(H.a,{htmlFor:"LABEL-"+n},t),this.renderSelect(e))})}render(){var e;const{instantFiltering:t}=this.props;return Object(X.f)(te,null,this.renderDateFilter(),this.renderDatasourceFilters(),this.renderFilters(),!t&&Object(X.f)(L.a,{buttonSize:"small",buttonStyle:"primary",onClick:E()(e=this.clickApply).call(e,this),disabled:!this.state.hasChanged},Object(U.c)("Apply")))}}ne.propTypes=ee,ne.defaultProps={origSelectedValues:{},onChange:()=>{},onFilterMenuOpen:()=>{},onFilterMenuClose:()=>{},showDateFilter:!1,showSqlaTimeGrain:!1,showSqlaTimeColumn:!1,showDruidTimeGrain:!1,showDruidTimeOrigin:!1,instantFiltering:!1},t.default=ne},662:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var a=n(384),r=n.n(a),o=n(330),i=n.n(o),s=n(7),l=n.n(s),c=(n(288),n(4)),u=n.n(c),d=n(26),p=n.n(d),h=n(55),f=n.n(h),g=(n(0),n(236)),b=n(399),m=n(9),v=n(969),y=n(797),O=n(230),x=n(196),C=n(45),w=n(1);const E=Object(g.a)(),_=Object(b.a)(),S={verbose_name:"Time",column_name:"__timestamp",description:Object(m.c)("A reference to the [Time] configuration, taking granularity into account")},j={type:"SelectControl",queryField:"groupby",multi:!0,freeForm:!0,label:Object(m.c)("Group by"),default:[],includeTime:!1,description:Object(m.c)("One or many controls to group by"),optionRenderer:e=>Object(w.f)(O.a,{column:e,showType:!0}),valueRenderer:e=>Object(w.f)(O.a,{column:e}),valueKey:"column_name",allowAll:!0,filterOption:({data:e},t)=>{var n,a;return e.column_name&&f()(n=e.column_name.toLowerCase()).call(n,t.toLowerCase())>=0||e.verbose_name&&f()(a=e.verbose_name.toLowerCase()).call(a,t.toLowerCase())>=0},promptTextCreator:e=>e,mapStateToProps:(e,t)=>{const n={};var a;e.datasource&&(n.options=p()(a=e.datasource.columns).call(a,e=>e.groupby),t&&t.includeTime&&n.options.push(S));return n},commaChoosesOption:!1},T={type:"MetricsControl",queryField:"metrics",multi:!0,label:Object(m.c)("Metrics"),validators:[v.a],default:e=>{const t=Object(x.d)(e.savedMetrics);return t?[t]:null},mapStateToProps:e=>{const{datasource:t}=e;return{columns:t?t.columns:[],savedMetrics:t?t.metrics:[],datasourceType:t&&t.type}},description:Object(m.c)("One or many metrics to display")},R=u()({},T,{multi:!1,label:Object(m.c)("Metric"),description:Object(m.c)("Metric"),default:e=>Object(x.d)(e.savedMetrics)});const k={metrics:T,metric:R,datasource:{type:"DatasourceControl",label:Object(m.c)("Dataset"),default:null,description:null,mapStateToProps:({datasource:e})=>({datasource:e,isEditable:!!e})},viz_type:{type:"VizTypeControl",label:Object(m.c)("Visualization Type"),default:"table",description:Object(m.c)("The type of visualization to display")},color_picker:{label:Object(m.c)("Fixed Color"),description:Object(m.c)("Use this to define a static color for all circles"),type:"ColorPickerControl",default:{r:0,g:122,b:135,a:1},renderTrigger:!0},metric_2:u()({},R,{label:Object(m.c)("Right Axis Metric"),clearable:!0,description:Object(m.c)("Choose a metric for right axis")}),linear_color_scheme:{type:"ColorSchemeControl",label:Object(m.c)("Linear Color Scheme"),choices:()=>{var e;return l()(e=i()(_).call(_)).call(e,e=>[e.id,e.label])},default:_.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>_.getMap(),isLinear:!0},secondary_metric:u()({},R,{label:Object(m.c)("Color Metric"),default:null,validators:[],description:Object(m.c)("A metric to use for color")}),groupby:j,columns:u()({},j,{label:Object(m.c)("Columns"),description:Object(m.c)("One or many controls to pivot as columns")}),druid_time_origin:{type:"SelectControl",freeForm:!0,label:C.m.druid_time_origin,choices:[["","default"],["now","now"]],default:null,description:Object(m.c)("Defines the origin where time buckets start, accepts natural dates as in `now`, `sunday` or `1970-01-01`")},granularity:{type:"SelectControl",freeForm:!0,label:C.m.granularity,default:"one day",choices:[[null,"all"],["PT5S","5 seconds"],["PT30S","30 seconds"],["PT1M","1 minute"],["PT5M","5 minutes"],["PT30M","30 minutes"],["PT1H","1 hour"],["PT6H","6 hour"],["P1D","1 day"],["P7D","7 days"],["P1W","week"],["week_starting_sunday","week starting Sunday"],["week_ending_saturday","week ending Saturday"],["P1M","month"],["P3M","quarter"],["P1Y","year"]],description:Object(m.c)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`, `1 day` or `56 weeks`")},granularity_sqla:{type:"SelectControl",label:C.m.granularity_sqla,description:Object(m.c)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),clearable:!1,optionRenderer:e=>Object(w.f)(O.a,{column:e,showType:!0}),valueRenderer:e=>Object(w.f)(O.a,{column:e}),valueKey:"column_name",mapStateToProps:e=>{const t={};return e.datasource&&(t.choices=e.datasource.granularity_sqla,t.default=null,e.datasource.main_dttm_col?t.default=e.datasource.main_dttm_col:t.choices&&t.choices.length>0&&(t.default=t.choices[0].column_name)),t}},time_grain_sqla:{type:"SelectControl",label:C.m.time_grain_sqla,default:"P1D",description:Object(m.c)("The time granularity for the visualization. This applies a date transformation to alter your time column and defines a new time granularity. The options here are defined on a per database engine basis in the Superset source code."),mapStateToProps:e=>({choices:e.datasource?e.datasource.time_grain_sqla:null})},time_range:{type:"DateFilterControl",freeForm:!0,label:C.m.time_range,default:Object(m.c)("Last week"),description:Object(m.c)('The time range for the visualization. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.'),mapStateToProps:e=>({endpoints:e.form_data?e.form_data.time_range_endpoints:null})},row_limit:{type:"SelectControl",freeForm:!0,label:Object(m.c)("Row limit"),validators:[y.a],default:1e4,choices:Object(x.a)([10,50,100,250,500,1e3,5e3,1e4,5e4])},limit:{type:"SelectControl",freeForm:!0,label:Object(m.c)("Series limit"),validators:[y.a],choices:Object(x.a)([0,5,10,25,50,100,500]),description:Object(m.c)("Limits the number of time series that get displayed. A sub query (or an extra phase where sub queries are not supported) is applied to limit the number of time series that get fetched and displayed. This feature is useful when grouping by high cardinality dimension(s).")},timeseries_limit_metric:{type:"MetricsControl",label:Object(m.c)("Sort By"),default:null,clearable:!0,description:Object(m.c)("Metric used to define the top series"),mapStateToProps:e=>({columns:e.datasource?e.datasource.columns:[],savedMetrics:e.datasource?e.datasource.metrics:[],datasourceType:e.datasource&&e.datasource.type})},series:u()({},j,{label:Object(m.c)("Series"),multi:!1,default:null,description:Object(m.c)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")}),entity:u()({},j,{label:Object(m.c)("Entity"),default:null,multi:!1,validators:[v.a],description:Object(m.c)("This defines the element to be plotted on the chart")}),x:u()({},R,{label:Object(m.c)("X Axis"),description:Object(m.c)("Metric assigned to the [X] axis"),default:null}),y:u()({},R,{label:Object(m.c)("Y Axis"),default:null,description:Object(m.c)("Metric assigned to the [Y] axis")}),size:u()({},R,{label:Object(m.c)("Bubble Size"),default:null}),y_axis_format:{type:"SelectControl",freeForm:!0,label:Object(m.c)("Y Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:[["SMART_NUMBER","Adaptative formating"],["~g","Original value"],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION","Duration in ms (66000 => 1m 6s)"],["DURATION_SUB","Duration in ms (100.40008 => 100ms 400µs 80ns)"]],description:"D3 format syntax: https://github.com/d3/d3-format",mapStateToProps:e=>{const t=e.controls&&e.controls.comparison_type&&"percentage"===e.controls.comparison_type.value;return{warning:t?Object(m.c)('When `Calculation type` is set to "Percentage change", the Y Axis Format is forced to `.1%`'):null,disabled:t}}},adhoc_filters:{type:"AdhocFilterControl",label:Object(m.c)("Filters"),default:null,description:"",mapStateToProps:e=>{var t;return{columns:e.datasource?p()(t=e.datasource.columns).call(t,e=>e.filterable):[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource}},provideFormDataToProps:!0},color_scheme:{type:"ColorSchemeControl",label:Object(m.c)("Color Scheme"),default:E.getDefaultKey(),renderTrigger:!0,choices:()=>{var e;return l()(e=r()(E).call(E)).call(e,e=>[e,e])},description:Object(m.c)("The color scheme for rendering chart"),schemes:()=>E.getMap()},label_colors:{type:"ColorMapControl",label:Object(m.c)("Color Map"),default:{},renderTrigger:!0,mapStateToProps:e=>({colorNamespace:e.form_data.color_namespace,colorScheme:e.form_data.color_scheme})}}},727:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));const a="YYYY-MM-DD HH:mm:ssZ",r="HH:mm:ss.SSS",o="True",i="False"},750:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(40);var a=n(7),r=n.n(a),o=n(6),i=n.n(o),s=n(661),l=n.n(s),c=n(0),u=n.n(c),d=n(2),p=n.n(d),h=n(70),f=n(90),g=n(107),b=(n(1033),n(1));const m={description:p.a.string,label:p.a.string.isRequired,name:p.a.string.isRequired,onChange:p.a.func,value:p.a.string,clearable:p.a.bool,default:p.a.string,choices:p.a.oneOfType([p.a.arrayOf(p.a.array),p.a.func]),schemes:p.a.oneOfType([p.a.object,p.a.func]),isLinear:p.a.bool};class v extends u.a.PureComponent{constructor(e){var t,n;super(e),this.onChange=i()(t=this.onChange).call(t,this),this.renderOption=i()(n=this.renderOption).call(n,this)}onChange(e){const t=e?e.value:null;this.props.onChange(t)}renderOption(e){const{isLinear:t}=this.props,n=this.schemes[e.value];let a=[];return n&&(a=t?n.getColors(10):n.colors),Object(b.f)(g.a,{label:n.id+"-tooltip",tooltip:n.label},Object(b.f)("ul",{className:"color-scheme-container"},r()(a).call(a,(e,t)=>Object(b.f)("li",{key:n.id+"-"+t,style:{backgroundColor:e,border:"1px solid "+("white"===e?"black":e)}}," "))))}render(){var e;const{schemes:t,choices:n}=this.props;this.schemes=l()(t)?t():t;const a=r()(e=l()(n)?n():n).call(e,([e,t])=>{var n;return{value:e,label:(null===(n=this.schemes[e])||void 0===n?void 0:n.label)||t}}),o={multi:!1,name:"select-"+this.props.name,placeholder:"Select ("+a.length+")",default:this.props.default,options:a,value:this.props.value,autosize:!1,clearable:this.props.clearable,onChange:this.onChange,optionRenderer:this.renderOption,valueRenderer:this.renderOption};return Object(b.f)("div",null,Object(b.f)(f.a,this.props),Object(b.f)(h.f,o))}}v.propTypes=m,v.defaultProps={choices:[],schemes:{},clearable:!1,onChange:()=>{}}},766:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(2),r=n.n(a),o=n(0),i=n.n(o),s=n(50),l=n(151),c=n(307),u=n(1147),d=n(1144),p=n(427),h=n(9);const f={wordWrap:"break-word"};function g({certifiedBy:e,details:t,metricName:n}){return i.a.createElement(u.a,{placement:"top",overlay:i.a.createElement(d.a,{id:Object(p.kebabCase)(n)+"-tooltip",style:f},e&&i.a.createElement("div",null,Object(h.c)("Certified by %s",e)),i.a.createElement("div",null,t))},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"16",viewBox:"0 0 24 24",width:"16"},i.a.createElement("g",null,i.a.createElement("path",{fill:s.b.colors.primary.base,d:"M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7 l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z M9.38,16.01L7,13.61c-0.39-0.39-0.39-1.02,0-1.41 l0.07-0.07c0.39-0.39,1.03-0.39,1.42,0l1.61,1.62l5.15-5.16c0.39-0.39,1.03-0.39,1.42,0l0.07,0.07c0.39,0.39,0.39,1.02,0,1.41 l-5.92,5.94C10.41,16.4,9.78,16.4,9.38,16.01z"}))))}g.propTypes={certifiedBy:r.a.oneOfType([r.a.string,r.a.oneOf([null])]),details:r.a.oneOfType([r.a.string,r.a.oneOf([null])]),metricName:r.a.string.isRequired};var b=g;function m(){const e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(["\n  align-items: center;\n  display: flex;\n\n  > svg {\n    margin-right: ","px;\n  }\n"]);return m=function(){return e},e}const v=s.a.div(m(),({theme:e})=>e.gridUnit);function y({metric:e,openInNewWindow:t=!1,showFormula:n=!0,showType:a=!1,url:r=""}){const o=e.verbose_name||e.metric_name||e.label,s=r?i.a.createElement("a",{href:r,target:t?"_blank":""},o):o;return i.a.createElement(v,{className:"metric-option"},a&&i.a.createElement(c.a,{type:"expression"}),e.is_certified&&i.a.createElement(b,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),i.a.createElement("span",{className:"option-label"},s),e.description&&i.a.createElement(l.b,{className:"text-muted",icon:"info",tooltip:e.description,label:"descr-"+e.metric_name}),n&&i.a.createElement(l.b,{className:"text-muted",icon:"question-circle-o",tooltip:e.expression,label:"expr-"+e.metric_name}),e.warning_text&&i.a.createElement(l.b,{className:"text-danger",icon:"warning",tooltip:e.warning_text,label:"warn-"+e.metric_name}))}y.propTypes={openInNewWindow:r.a.bool,showFormula:r.a.bool,showType:r.a.bool,url:r.a.string}},82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var a=c(n(1264)),r=c(n(1265)),o=c(n(1266)),i=c(n(1267)),s=c(n(1268)),l=c(n(1269));function c(e){return e&&e.__esModule?e:{default:e}}t.hover=i.default,t.handleHover=i.default,t.handleActive=s.default,t.loop=l.default;var u=t.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=(0,a.default)(n),l=(0,r.default)(e,s);return(0,o.default)(l)};t.default=u},823:function(e,t,n){"use strict";n(40);var a=n(46),r=n.n(a),o=n(29),i=n.n(o),s=n(1009),l=n.n(s),c=n(7),u=n.n(c),d=n(76),p=n.n(d),h=n(26),f=n.n(h),g=n(106),b=n.n(g),m=n(0),v=n.n(m),y=n(2),O=n.n(y),x=n(1146),C=n(973),w=n(668),E=n(225),_=n(9),S=n(58),j=n(85),T=n(101),R=n(90),k=(n(1032),n(1));const M={description:O.a.string,label:O.a.string,name:O.a.string.isRequired,onChange:O.a.func,value:O.a.string.isRequired,labelBsStyle:O.a.string},D=Object(E.a)(),P=["line","big_number","table","filter_box","dist_bar","area","bar","deck_polygon","pie","time_table","pivot_table","histogram","big_number_total","deck_scatter","deck_hex","time_pivot","deck_arc","heatmap","deck_grid","dual_line","deck_screengrid","line_multi","treemap","box_plot","sunburst","sankey","word_cloud","mapbox","kepler","cal_heatmap","rose","bubble","deck_geojson","horizon","deck_multi","compare","partition","event_flow","deck_path","directed_force","world_map","paired_ttest","para","country_map"],A=new b.a(P),N=e=>{var t,n,a,o;const[s,c]=Object(m.useState)(!1),[d,h]=Object(m.useState)(""),g=Object(m.useRef)(null);Object(m.useEffect)(()=>{var e;s&&(null==g||null===(e=g.current)||void 0===e||e.focus())},[s]);const b=()=>{c(e=>!e)},y=t=>{const{value:n}=e,{key:a,value:r}=t,o=a===n;return Object(k.f)("div",{role:"button",tabIndex:0,className:"viztype-selector-container "+(o?"selected":""),onClick:()=>{return t=a,e.onChange(t),void c(!1);var t}},Object(k.f)("img",{alt:r.name,width:"100%",className:"viztype-selector "+(o?"selected":""),src:r.thumbnail}),Object(k.f)("div",{className:"viztype-label"},r.name))},{value:O,labelBsStyle:E}=e,M=d.toLowerCase(),N=f()(t=p()(n=u()(a=f()(P).call(P,e=>D.has(e))).call(a,e=>({key:e,value:D.get(e)}))).call(n,f()(o=l()(D).call(D)).call(o,({key:e})=>!A.has(e)))).call(t,e=>{var t;return i()(t=e.value.name.toLowerCase()).call(t,M)}),F=[];for(let e=0;e<=N.length;e+=6){var L;F.push(Object(k.f)(x.a,{key:"row-"+e},u()(L=r()(N).call(N,e,e+6)).call(L,e=>Object(k.f)(C.a,{md:2,key:"grid-col-"+e.key},y(e)))))}return Object(k.f)("div",null,Object(k.f)(R.a,e),Object(k.f)(S.a,{id:"error-tooltip",placement:"right",title:Object(_.c)("Click to change visualization type")},Object(k.f)(v.a.Fragment,null,Object(k.f)(T.a,{onClick:b,bsStyle:E},D.has(O)?D.get(O).name:""+O),!D.has(O)&&Object(k.f)("div",{className:"text-danger"},Object(k.f)("i",{className:"fa fa-exclamation-circle text-danger"})," ",Object(k.f)("small",null,Object(_.c)("This visualization type is not supported."))))),Object(k.f)(j.a,{show:s,onHide:b,onEnter:()=>{g&&g.focus()},title:Object(_.c)("Select a visualization type"),responsive:!0,hideFooter:!0,forceRender:!0},Object(k.f)("div",{className:"viztype-control-search-box"},Object(k.f)(w.a,{inputRef:e=>{g.current=e},type:"text",value:d,placeholder:Object(_.c)("Search"),onChange:e=>{h(e.target.value)}})),F))};N.propTypes=M,N.defaultProps={onChange:()=>{},labelBsStyle:"default"},t.a=N},824:function(e,t,n){"use strict";n(124),n(40);var a=n(7),r=n.n(a),o=n(4),i=n.n(o),s=n(97),l=n.n(s),c=n(8),u=n.n(c),d=n(0),p=n.n(d),h=n(1629),f=n(28),g=n(50),b=n(57),m=n(9),v=n(85),y=n(327),O=n(47),x=n(64),C=n(73),w=n(1);function E(){const e=u()(["\n  .modal-content {\n    height: 900px;\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  .modal-header {\n    flex: 0 1 auto;\n  }\n  .modal-body {\n    flex: 1 1 auto;\n    overflow: auto;\n  }\n\n  .modal-footer {\n    flex: 0 1 auto;\n  }\n"]);return E=function(){return e},e}const _=Object(y.a)(()=>Promise.all([n.e(0),n.e(14),n.e(43)]).then(n.bind(null,1634))),S=Object(g.a)(v.a)(E());function j(e){var t,n;return(null==e?void 0:e.certified_by)||(null==e?void 0:e.certification_details)?l()({certification:{certified_by:null!=(t=null==e?void 0:e.certified_by)?t:null,details:null!=(n=null==e?void 0:e.certification_details)?n:null}}):null}t.a=Object(C.a)(({addSuccessToast:e,datasource:t,onDatasourceSave:n,onHide:a,show:o})=>{const[s,l]=Object(d.useState)(t),[c,u]=Object(d.useState)([]),[g,y]=Object(d.useState)(!1),C=Object(d.useRef)(null),[E,T]=v.a.useModal(),R=()=>{var t,o,l;const c=(null===(t=s.tableSelector)||void 0===t?void 0:t.schema)||(null===(o=s.databaseSelector)||void 0===o?void 0:o.schema)||s.schema;y(!0),b.a.post({endpoint:"/datasource/save/",postPayload:{data:i()({},s,{schema:c,metrics:null==s?void 0:null===(l=s.metrics)||void 0===l?void 0:r()(l).call(l,e=>i()({},e,{extra:j(e)})),type:s.type||s.datasource_type})}}).then(({json:t})=>{e(Object(m.c)("The dataset has been saved")),n(t),a()}).catch(e=>{y(!1),Object(x.a)(e).then(({error:e})=>{E.error({title:"Error",content:e||Object(m.c)("An error has occurred"),okButtonProps:{danger:!0,className:"btn-danger"}})})})},k=()=>{var e;null===(e=C.current)||void 0===e||e.destroy()};return Object(w.f)(S,{show:o,onHide:a,title:Object(w.f)("span",null,Object(m.c)("Edit Dataset "),Object(w.f)("strong",null,s.table_name)),footer:Object(w.f)(p.a.Fragment,null,Object(O.c)(O.a.ENABLE_REACT_CRUD_VIEWS)&&Object(w.f)(f.a,{buttonSize:"sm",buttonStyle:"default",className:"m-r-5",onClick:()=>{window.location.href=s.edit_url||s.url}},Object(m.c)("Use Legacy Datasource Editor")),Object(w.f)(f.a,{buttonSize:"sm",buttonStyle:"primary",className:"m-r-5",onClick:()=>{C.current=E.confirm({title:Object(m.c)("Confirm save"),content:Object(w.f)("div",null,Object(w.f)(h.a,{bsStyle:"warning",className:"pointer",onClick:k},Object(w.f)("div",null,Object(w.f)("i",{className:"fa fa-exclamation-triangle"})," ",Object(m.c)("The dataset configuration exposed here\n                affects all the charts using this dataset.\n                Be mindful that changing settings\n                here may affect other charts\n                in undesirable ways."))),Object(m.c)("Are you sure you want to save and apply changes?")),onOk:R,icon:null})},disabled:g||c.length>0},Object(m.c)("Save")),Object(w.f)(f.a,{buttonSize:"sm",onClick:a},Object(m.c)("Cancel"))),responsive:!0},Object(w.f)(_,{showLoadingForImport:!0,height:500,datasource:s,onChange:(e,t)=>{var n;l(i()({},e,{metrics:null==e?void 0:r()(n=e.metrics).call(n,e=>i()({},e,{is_certified:(null==e?void 0:e.certified_by)||(null==e?void 0:e.certification_details)}))})),u(t)}}),T)})},956:function(e,t,n){"use strict";n(280),n(175),n(40);var a=n(7),r=n.n(a),o=n(23),i=n.n(o),s=n(6),l=n.n(s),c=n(4),u=n.n(c),d=n(55),p=n.n(d),h=n(8),f=n.n(h),g=n(885),b=n.n(g),m=n(0),v=n.n(m),y=n(2),O=n.n(y),x=n(689),C=n(2983),w=n(668),E=n(2964),_=n(58),S=n(142),j=n(14),T=n(28),R=n(959),k=n.n(R),M=(n(1315),n(15)),D=n.n(M),P=n(9),A=n(50),N=n(165),F=n(113);const L=(e,t)=>e.replace("T00:00:00","")||(t?"-∞":"∞"),I=(e,t)=>{var n;const a=e.split(" : ");if(1===a.length)return e;const o=r()(n=t||["unknown","unknown"]).call(n,e=>"inclusive"===e?"≤":"<");return L(a[0],!0)+" "+o[0]+" col "+o[1]+" "+L(a[1])};var B=n(101),U=(n(1316),n(90)),V=n(328),H=n(1);function q(){const e=f()(["\n  width: ","px;\n\n  .timeframes-container {\n    margin-left: ","px;\n  }\n\n  .relative-timerange-container {\n    display: flex;\n    margin-top: ","px;\n  }\n\n  .timerange-input {\n    width: ","px;\n    margin: 0 ","px;\n  }\n\n  .datetime {\n    margin: ","px 0;\n  }\n\n  .ant-tabs {\n    overflow: visible;\n    & > .ant-tabs-content-holder {\n      overflow: visible;\n    }\n  }\n"]);return q=function(){return e},e}function z(){const e=f()(["\n  .radio {\n    margin: ","px 0;\n  }\n"]);return z=function(){return e},e}const G=b()({DEFAULTS:"defaults",CUSTOM_START_END:"custom_start_end",CUSTOM_RANGE:"custom_range"}),W=b()({DEFAULTS:"defaults",CUSTOM:"custom"}),Y=b()({LAST:"Last",NEXT:"Next"}),K=["Last day","Last week","Last month","Last quarter","Last year","No filter"],Q=["seconds","minutes","hours","days","weeks","months","years"],X="YYYY-MM-DD[T]HH:mm:ss",Z=D()().utc().startOf("day").subtract(7,"days").format(X),$=D()().utc().startOf("day").format(X),J=Object(P.c)("Superset supports smart date parsing. Strings like `3 weeks ago`, `last sunday`, or `2 weeks from now` can be used."),ee={animation:O.a.bool,name:O.a.string.isRequired,label:O.a.string,description:O.a.string,onChange:O.a.func,value:O.a.string,height:O.a.number,onOpenDateFilterControl:O.a.func,onCloseDateFilterControl:O.a.func,endpoints:O.a.arrayOf(O.a.string)},te={animation:!0,onChange:()=>{},value:"Last week",onOpenDateFilterControl:()=>{},onCloseDateFilterControl:()=>{}};function ne(e){return e===D()(e,X).format(X)}function ae(e){const t=e.split(" ")[1]+"s";let n;return n="No filter"===e?"":"years"===t?D()().utc().startOf(t).subtract(1,t):D()().utc().startOf("day").subtract(1,t),{tab:W.DEFAULTS,type:G.DEFAULTS,common:e,since:""===n?"":n.format(X),until:""===n?"":n.add(1,t).format(X)}}function re(e){const[t,n,a]=e.split(" ",3);let r,o;return t===Y.LAST?(o=D()().utc().startOf("day").format(X),r=D()().utc().startOf("day").subtract(n,a).format(X)):(o=D()().utc().startOf("day").add(n,a).format(X),r=D()().startOf("day").format(X)),{tab:W.CUSTOM,type:G.CUSTOM_RANGE,common:null,rel:t,num:n,grain:a,since:r,until:o}}const oe=A.a.div(z(),({theme:e})=>e.gridUnit),ie=A.a.div(q(),({theme:e})=>60*e.gridUnit,({theme:e})=>2*e.gridUnit,({theme:e})=>2*e.gridUnit,({theme:e})=>15*e.gridUnit,({theme:e})=>e.gridUnit,({theme:e})=>e.gridUnit);class se extends v.a.Component{constructor(e){var t,n,a,r,o,i,s,c,d,h,f,g,b;super(e),this.state={type:G.DEFAULTS,tab:W.DEFAULTS,common:K[0],rel:Y.LAST,num:"7",grain:Q[3],since:Z,until:$,showSinceCalendar:!1,showUntilCalendar:!1,sinceViewMode:"days",untilViewMode:"days",popoverVisible:!1};const{value:m}=e;m&&p()(m).call(m," : ")>=0?this.state=u()({},this.state,function(e){const[t,n]=e.split(" : ",2);return{since:t,until:n,type:G.CUSTOM_START_END,tab:W.CUSTOM}}(m)):p()(K).call(K,m)>=0?this.state=u()({},this.state,ae(m)):m&&(this.state=u()({},this.state,re(m))),this.close=l()(t=this.close).call(t,this),this.handleClick=l()(n=this.handleClick).call(n,this),this.isValidSince=l()(a=this.isValidSince).call(a,this),this.isValidUntil=l()(r=this.isValidUntil).call(r,this),this.onEnter=l()(o=this.onEnter).call(o,this),this.renderInput=l()(i=this.renderInput).call(i,this),this.setCustomRange=l()(s=this.setCustomRange).call(s,this),this.setCustomStartEnd=l()(c=this.setCustomStartEnd).call(c,this),this.setTypeCustomRange=l()(d=this.setTypeCustomRange).call(d,this),this.setTypeCustomStartEnd=l()(h=this.setTypeCustomStartEnd).call(h,this),this.toggleCalendar=l()(f=this.toggleCalendar).call(f,this),this.changeTab=l()(g=this.changeTab).call(g,this),this.handleVisibleChange=l()(b=this.handleVisibleChange).call(b,this)}componentDidMount(){document.addEventListener("click",this.handleClick)}componentWillUnmount(){document.removeEventListener("click",this.handleClick)}onEnter(e){"Enter"===e.key&&this.close()}setCustomRange(e,t){const n=u()({},this.state,{[e]:t}),a=[n.rel,n.num,n.grain].join(" ");this.setState(re(a))}setCustomStartEnd(e,t){const n="since"===e&&"days"===this.state.sinceViewMode||"until"===e&&"days"===this.state.untilViewMode;this.setState(a=>({type:G.CUSTOM_START_END,[e]:"string"==typeof t?t:t.format(X),showSinceCalendar:a.showSinceCalendar&&!n,showUntilCalendar:a.showUntilCalendar&&!n,sinceViewMode:n?"days":a.sinceViewMode,untilViewMode:n?"days":a.untilViewMode}))}setTypeCustomRange(){this.setState({type:G.CUSTOM_RANGE})}setTypeCustomStartEnd(){this.setState({type:G.CUSTOM_START_END})}changeTab(){const{tab:e}=this.state;e===W.CUSTOM?this.setState({tab:W.DEFAULTS}):e===W.DEFAULTS&&this.setState({tab:W.CUSTOM})}handleClick(e){const{target:t}=e;this.startEndSectionRef&&this.startEndSectionRef.contains(t)&&this.setTypeCustomStartEnd(),"popover-trigger"!==t.getAttribute("name")&&this.popoverContainer&&!this.popoverContainer.contains(t)&&this.props.onCloseDateFilterControl()}close(){let e;e=this.state.type===G.DEFAULTS||this.state.tab===W.DEFAULTS?this.state.common:this.state.type===G.CUSTOM_RANGE?this.state.rel+" "+this.state.num+" "+this.state.grain:[this.state.since,this.state.until].join(" : "),this.props.onCloseDateFilterControl(),this.props.onChange(e),this.setState({showSinceCalendar:!1,showUntilCalendar:!1,popoverVisible:!1})}isValidSince(e){return!ne(this.state.until)||e<=D()(this.state.until,X)}isValidUntil(e){return!ne(this.state.since)||e>=D()(this.state.since,X)}toggleCalendar(e){const t={};"showSinceCalendar"===e?(t.showSinceCalendar=!this.state.showSinceCalendar,this.state.showSinceCalendar||(t.showUntilCalendar=!1)):"showUntilCalendar"===e&&(t.showUntilCalendar=!this.state.showUntilCalendar,this.state.showUntilCalendar||(t.showSinceCalendar=!1)),this.setState(t)}handleVisibleChange(e){e?this.props.onOpenDateFilterControl():this.props.onCloseDateFilterControl(),this.setState({popoverVisible:e})}renderInput(e,t){return Object(H.f)(x.a,null,Object(H.f)(C.a,{bsSize:"small"},Object(H.f)(w.a,i()({},e,{type:"text",onKeyPress:this.onEnter,onFocus:this.setTypeCustomStartEnd,onClick:()=>{}})),Object(H.f)(C.a.Button,{onClick:()=>this.toggleCalendar(t)},Object(H.f)(T.a,null,Object(H.f)("i",{className:"fa fa-calendar"})))))}renderPopover(){const e=r()(Q).call(Q,e=>Object(H.f)(j.n.Option,{key:e,value:e,active:e===this.state.grain},e)),t=r()(K).call(K,e=>{const t=ae(e),n=(a=t.since,r=t.until,a+" : "+r);var a,r;return Object(H.f)(oe,{key:e},Object(H.f)(_.a,{id:"tooltip-"+e,key:e,placement:"right",title:I(n,this.props.endpoints)},Object(H.f)("div",{style:{display:"inline-block"}},Object(H.f)(E.a,{key:e.replace(" ","").toLowerCase(),checked:this.state.common===e,onChange:()=>this.setState(t)},e))))});return Object(H.f)(ie,{id:"filter-popover",ref:e=>{this.popoverContainer=e}},Object(H.f)(F.c,{defaultActiveKey:this.state.tab===W.DEFAULTS?"1":"2",id:"type",className:"time-filter-tabs",onChange:this.changeTab},Object(H.f)(F.c.TabPane,{key:"1",tab:"Defaults",forceRender:!0},Object(H.f)("div",{className:"timeframes-container"},Object(H.f)(x.a,null,t))),Object(H.f)(F.c.TabPane,{key:"2",tab:"Custom"},Object(H.f)(x.a,null,Object(H.f)(V.a,{title:"Relative to today",isSelected:this.state.type===G.CUSTOM_RANGE,onSelect:this.setTypeCustomRange},Object(H.f)("div",{className:"relative-timerange-container clearfix centered"},Object(H.f)(j.n,{value:this.state.rel,onSelect:e=>this.setCustomRange("rel",e),onFocus:this.setTypeCustomRange},Object(H.f)(j.n.Option,{value:Y.LAST},"Last"),Object(H.f)(j.n.Option,{value:Y.NEXT},"Next")),Object(H.f)(j.h,{className:"timerange-input",type:"text",onChange:e=>this.setCustomRange("num",e.target.value),onFocus:this.setTypeCustomRange,onPressEnter:this.close,value:this.state.num}),Object(H.f)(j.n,{value:this.state.grain,onFocus:this.setTypeCustomRange,onSelect:e=>this.setCustomRange("grain",e),dropdownMatchSelectWidth:!1},e))),Object(H.f)(V.a,{title:"Start / end",isSelected:this.state.type===G.CUSTOM_START_END,onSelect:this.setTypeCustomStartEnd,info:J},Object(H.f)("div",{ref:e=>{this.startEndSectionRef=e}},Object(H.f)(C.a,null,Object(H.f)(k.a,{className:"datetime",inputProps:{"data-test":"date-from-input"},value:this.state.since,defaultValue:this.state.since,viewDate:this.state.since,onChange:e=>this.setCustomStartEnd("since",e),isValidDate:this.isValidSince,onClick:this.setTypeCustomStartEnd,renderInput:e=>this.renderInput(e,"showSinceCalendar"),open:this.state.showSinceCalendar,viewMode:this.state.sinceViewMode,onViewModeChange:e=>this.setState({sinceViewMode:e})}),Object(H.f)(k.a,{className:"datetime",inputProps:{"data-test":"date-to-input"},value:this.state.until,defaultValue:this.state.until,viewDate:this.state.until,onChange:e=>this.setCustomStartEnd("until",e),isValidDate:this.isValidUntil,onClick:this.setTypeCustomStartEnd,renderInput:e=>this.renderInput(e,"showUntilCalendar"),open:this.state.showUntilCalendar,viewMode:this.state.untilViewMode,onViewModeChange:e=>this.setState({untilViewMode:e})}))))))),Object(H.f)("div",{className:"clearfix"},Object(H.f)(T.a,{buttonSize:"small",className:"float-right ok",buttonStyle:"primary",onClick:this.close},"Ok")))}render(){const e=this.props.value||te.value;return Object(H.f)("div",null,Object(H.f)(U.a,this.props),Object(H.f)(S.a,{trigger:"click",placement:"right",content:this.renderPopover(),visible:this.state.popoverVisible,onVisibleChange:this.handleVisibleChange},Object(H.f)(B.a,{name:"popover-trigger",className:"pointer"},I(e,this.props.endpoints))))}}t.a=Object(N.c)(se);se.propTypes=ee,se.defaultProps=te},957:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return h}));n(4);var a=n(44),r=n.n(a),o=n(65),i=n.n(o);function s(e){var t;return i()(t=r()(e)).call(t,(e,t)=>{const n=e;return n[t]=t,n},{})}const l={FORMULA:{value:"FORMULA",label:"Formula"},EVENT:{value:"EVENT",label:"Event",supportNativeSource:!0},INTERVAL:{value:"INTERVAL",label:"Interval",supportNativeSource:!0},TIME_SERIES:{value:"TIME_SERIES",label:"Time Series"}},c=s(l),u=c.FORMULA,d={NATIVE:{value:"NATIVE",label:"Superset annotation"}},p=s(d);function h(e){return!!e}},959:function(e,t,n){e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=n(0)},function(e,t){e.exports=n(15)},function(e,t,n){e.exports=n(5)()},function(e,t){e.exports=n(11)},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";var a=n(6);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,i){if(i!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(1),i=n.n(o),s=n(0),l=n.n(s);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e){var t=e.onClickPrev,n=e.onClickSwitch,a=e.onClickNext,r=e.switchContent,o=e.switchColSpan,i=e.switchProps;return l.a.createElement("tr",null,l.a.createElement("th",{className:"rdtPrev",onClick:t},l.a.createElement("span",null,"‹")),l.a.createElement("th",c({className:"rdtSwitch",colSpan:o,onClick:n},i),r),l.a.createElement("th",{className:"rdtNext",onClick:a},l.a.createElement("span",null,"›")))}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(r,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g(this,n)}}(r);function r(){var e;p(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return v(b(e=a.call.apply(a,[this].concat(n))),"_setDate",(function(t){e.props.updateDate(t)})),e}return t=r,(n=[{key:"render",value:function(){var e=this.props.viewDate,t=e.localeData(),n=e.clone().startOf("month"),a=e.clone().endOf("month");return l.a.createElement("div",{className:"rdtDays"},l.a.createElement("table",null,l.a.createElement("thead",null,this.renderNavigation(e,t),this.renderDayHeaders(t)),l.a.createElement("tbody",null,this.renderDays(e,n,a)),this.renderFooter(e)))}},{key:"renderNavigation",value:function(e,t){var n=this;return l.a.createElement(u,{onClickPrev:function(){return n.props.navigate(-1,"months")},onClickSwitch:function(){return n.props.showView("months")},onClickNext:function(){return n.props.navigate(1,"months")},switchContent:t.months(e)+" "+e.year(),switchColSpan:5,switchProps:{"data-value":this.props.viewDate.month()}})}},{key:"renderDayHeaders",value:function(e){var t=this.getDaysOfWeek(e).map((function(e,t){return l.a.createElement("th",{key:e+t,className:"dow"},e)}));return l.a.createElement("tr",null,t)}},{key:"renderDays",value:function(e,t,n){var a=[[],[],[],[],[],[]],r=e.clone().subtract(1,"months");r.date(r.daysInMonth()).startOf("week");for(var o=r.clone().add(42,"d"),i=0;r.isBefore(o);)this.getRow(a,i++).push(this.renderDay(r,t,n)),r.add(1,"d");return a.map((function(e,t){return l.a.createElement("tr",{key:"".concat(o.month(),"_").concat(t)},e)}))}},{key:"renderDay",value:function(e,t,n){var a=this.props.selectedDate,r={key:e.format("M_D"),"data-value":e.date(),"data-month":e.month(),"data-year":e.year()},o="rdtDay";return e.isBefore(t)?o+=" rdtOld":e.isAfter(n)&&(o+=" rdtNew"),a&&e.isSame(a,"day")&&(o+=" rdtActive"),e.isSame(this.props.moment(),"day")&&(o+=" rdtToday"),this.props.isValidDate(e)?r.onClick=this._setDate:o+=" rdtDisabled",r.className=o,this.props.renderDay?this.props.renderDay(r,e.clone(),a&&a.clone()):l.a.createElement("td",r,e.date())}},{key:"renderFooter",value:function(e){var t=this;if(this.props.timeFormat)return l.a.createElement("tfoot",null,l.a.createElement("tr",null,l.a.createElement("td",{onClick:function(){return t.props.showView("time")},colSpan:7,className:"rdtTimeToggle"},e.format(this.props.timeFormat))))}},{key:"getDaysOfWeek",value:function(e){var t=e.firstDayOfWeek(),n=[],a=0;return e._weekdaysMin.forEach((function(e){n[(7+a++-t)%7]=e})),n}},{key:"getRow",value:function(e,t){return e[Math.floor(t/7)]}}])&&h(t.prototype,n),r}(l.a.Component);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v(y,"defaultProps",{isValidDate:function(){return!0}});var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S(e);if(t){var r=S(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E(this,n)}}(r);function r(){var e;x(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return j(_(e=a.call.apply(a,[this].concat(n))),"_updateSelectedMonth",(function(t){e.props.updateDate(t)})),e}return t=r,(n=[{key:"render",value:function(){return l.a.createElement("div",{className:"rdtMonths"},l.a.createElement("table",null,l.a.createElement("thead",null,this.renderNavigation())),l.a.createElement("table",null,l.a.createElement("tbody",null,this.renderMonths())))}},{key:"renderNavigation",value:function(){var e=this,t=this.props.viewDate.year();return l.a.createElement(u,{onClickPrev:function(){return e.props.navigate(-1,"years")},onClickSwitch:function(){return e.props.showView("years")},onClickNext:function(){return e.props.navigate(1,"years")},switchContent:t,switchColSpan:"2"})}},{key:"renderMonths",value:function(e){for(var t=[[],[],[]],n=0;n<12;n++)this.getRow(t,n).push(this.renderMonth(n,this.props.selectedDate));return t.map((function(e,t){return l.a.createElement("tr",{key:t},e)}))}},{key:"renderMonth",value:function(e,t){var n,a="rdtMonth";this.isDisabledMonth(e)?a+=" rdtDisabled":n=this._updateSelectedMonth,t&&t.year()===this.props.viewDate.year()&&t.month()===e&&(a+=" rdtActive");var r={key:e,className:a,"data-value":e,onClick:n};return this.props.renderMonth?this.props.renderMonth(r,e,this.props.viewDate.year(),this.props.selectedDate&&this.props.selectedDate.clone()):l.a.createElement("td",r,this.getMonthText(e))}},{key:"getRow",value:function(e,t){return t<4?e[0]:t<8?e[1]:e[2]}},{key:"capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"isDisabledMonth",value:function(e){var t=this.props.isValidDate;if(!t)return!1;for(var n=this.props.viewDate.clone().set({month:e}),a=n.endOf("month").date()+1;a-- >1;)if(t(n.date(a)))return!1;return!0}},{key:"getMonthText",value:function(e){var t=this.props.viewDate,n=t.localeData().monthsShort(t.month(e));return this.capitalize(n.substring(0,3))}}])&&C(t.prototype,n),r}(l.a.Component);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(r,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=N(e);if(t){var r=N(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return P(this,n)}}(r);function r(){var e;k(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return F(A(e=a.call.apply(a,[this].concat(n))),"disabledYearsCache",{}),F(A(e),"_updateSelectedYear",(function(t){e.props.updateDate(t)})),e}return t=r,(n=[{key:"render",value:function(){var e=10*parseInt(this.props.viewDate.year()/10,10);return l.a.createElement("div",{className:"rdtYears"},l.a.createElement("table",null,l.a.createElement("thead",null,this.renderNavigation(e))),l.a.createElement("table",null,l.a.createElement("tbody",null,this.renderYears(e))))}},{key:"renderNavigation",value:function(e){var t=this;return l.a.createElement(u,{onClickPrev:function(){return t.props.navigate(-10,"years")},onClickSwitch:function(){return t.props.showView("years")},onClickNext:function(){return t.props.navigate(10,"years")},switchContent:"".concat(e,"-").concat(e+9)})}},{key:"renderYears",value:function(e){for(var t=[[],[],[]],n=this.props.selectedDate&&this.props.selectedDate.year(),a=e-1;a<e+11;a++)this.getRow(t,a-e).push(this.renderYear(a,n));return t.map((function(e,t){return l.a.createElement("tr",{key:t},e)}))}},{key:"renderYear",value:function(e,t){var n,a="rdtYear";this.isDisabledYear(e)?a+=" rdtDisabled":n=this._updateSelectedYear,t===e&&(a+=" rdtActive");var r={key:e,className:a,"data-value":e,onClick:n};return this.props.renderYear?this.props.renderYear(r,e,this.props.selectedDate&&this.props.selectedDate.clone()):l.a.createElement("td",r,e)}},{key:"getRow",value:function(e,t){return t<3?e[0]:t<7?e[1]:e[2]}},{key:"isDisabledYear",value:function(e){var t=this.disabledYearsCache;if(void 0!==t[e])return t[e];var n=this.props.isValidDate;if(!n)return!1;for(var a=this.props.viewDate.clone().set({year:e}),r=a.endOf("year").dayOfYear()+1;r-- >1;)if(n(a.dayOfYear(r)))return t[e]=!1,!1;return t[e]=!0,!0}}])&&M(t.prototype,n),r}(l.a.Component);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(r,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=G(e);if(t){var r=G(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return q(this,n)}}(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),W(z(t=a.call(this,e)),"padValues",{hours:1,minutes:2,seconds:2,milliseconds:3}),t.constraints=t.createConstraints(e),t.state=t.getTimeParts(e.selectedDate||e.viewDate),t}return t=r,(n=[{key:"createConstraints",value:function(e){var t={};return Object.keys(Y).forEach((function(n){t[n]=U(U({},Y[n]),e.timeConstraints[n]||{})})),t}},{key:"render",value:function(){var e=this,t=[],n=this.state;return this.getCounters().forEach((function(a,r){r&&"ampm"!==a&&t.push(l.a.createElement("div",{key:"sep".concat(r),className:"rdtCounterSeparator"},":")),t.push(e.renderCounter(a,n[a]))})),l.a.createElement("div",{className:"rdtTime"},l.a.createElement("table",null,this.renderHeader(),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{className:"rdtCounters"},t))))))}},{key:"renderCounter",value:function(e,t){var n=this;return"hours"===e&&this.isAMPM()&&0==(t=(t-1)%12+1)&&(t=12),"ampm"===e&&(t=-1!==this.props.timeFormat.indexOf(" A")?this.props.viewDate.format("A"):this.props.viewDate.format("a")),l.a.createElement("div",{key:e,className:"rdtCounter"},l.a.createElement("span",{className:"rdtBtn",onMouseDown:function(t){return n.onStartClicking(t,"increase",e)}},"▲"),l.a.createElement("div",{className:"rdtCount"},t),l.a.createElement("span",{className:"rdtBtn",onMouseDown:function(t){return n.onStartClicking(t,"decrease",e)}},"▼"))}},{key:"renderHeader",value:function(){var e=this;if(this.props.dateFormat){var t=this.props.selectedDate||this.props.viewDate;return l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"rdtSwitch",colSpan:"4",onClick:function(){return e.props.showView("days")}},t.format(this.props.dateFormat))))}}},{key:"onStartClicking",value:function(e,t,n){var a=this;if(!e||!e.button||0===e.button){if("ampm"===n)return this.toggleDayPart();var r={},o=document.body;r[n]=this[t](n),this.setState(r),this.timer=setTimeout((function(){a.increaseTimer=setInterval((function(){r[n]=a[t](n),a.setState(r)}),70)}),500),this.mouseUpListener=function(){clearTimeout(a.timer),clearInterval(a.increaseTimer),a.props.setTime(n,parseInt(a.state[n],10)),o.removeEventListener("mouseup",a.mouseUpListener),o.removeEventListener("touchend",a.mouseUpListener)},o.addEventListener("mouseup",this.mouseUpListener),o.addEventListener("touchend",this.mouseUpListener)}}},{key:"toggleDayPart",value:function(){var e=parseInt(this.state.hours,10);e>=12?e-=12:e+=12,this.props.setTime("hours",e)}},{key:"increase",value:function(e){var t=this.constraints[e],n=parseInt(this.state[e],10)+t.step;return n>t.max&&(n=t.min+(n-(t.max+1))),this.pad(e,n)}},{key:"decrease",value:function(e){var t=this.constraints[e],n=parseInt(this.state[e],10)-t.step;return n<t.min&&(n=t.max+1-(t.min-n)),this.pad(e,n)}},{key:"pad",value:function(e,t){for(var n=t+"";n.length<this.padValues[e];)n="0"+n;return n}},{key:"getCounters",value:function(){var e=[],t=this.props.timeFormat;return-1!==t.toLowerCase().indexOf("h")&&(e.push("hours"),-1!==t.indexOf("m")&&(e.push("minutes"),-1!==t.indexOf("s")&&(e.push("seconds"),-1!==t.indexOf("S")&&e.push("milliseconds")))),this.isAMPM()&&e.push("ampm"),e}},{key:"isAMPM",value:function(){return-1!==this.props.timeFormat.toLowerCase().indexOf(" a")}},{key:"getTimeParts",value:function(e){var t=e.hours();return{hours:this.pad("hours",t),minutes:this.pad("minutes",e.minutes()),seconds:this.pad("seconds",e.seconds()),milliseconds:this.pad("milliseconds",e.milliseconds()),ampm:t<12?"am":"pm"}}},{key:"componentDidUpdate",value:function(e){this.props.selectedDate?this.props.selectedDate!==e.selectedDate&&this.setState(this.getTimeParts(this.props.selectedDate)):e.viewDate!==this.props.viewDate&&this.setState(this.getTimeParts(this.props.viewDate))}}])&&V(t.prototype,n),r}(l.a.Component),Q=n(3);function X(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var Z,$,J=(void 0===Z&&(Z=0),function(){return++Z}),ee={},te={},ne=["touchstart","touchmove"];function ae(e,t){var n=null;return-1!==ne.indexOf(t)&&$&&(n={passive:!e.props.preventDefault}),n}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ce(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=fe(e);if(t){var r=fe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return Ce}));var be="years",me="months",ve="days",ye=r.a,Oe=function(){},xe=ye.oneOfType([ye.instanceOf(i.a),ye.instanceOf(Date),ye.string]),Ce=function(e){ue(n,e);var t=de(n);function n(e){var a;return se(this,n),ge(he(a=t.call(this,e)),"_renderCalendar",(function(e){var t=a.props,n={viewDate:a.state.viewDate.clone(),selectedDate:a.getSelectedDate(),isValidDate:t.isValidDate,updateDate:a._updateDate,navigate:a._viewNavigate,moment:i.a,showView:a._showView};switch(e){case be:return n.renderYear=t.renderYear,l.a.createElement(L,n);case me:return n.renderMonth=t.renderMonth,l.a.createElement(T,n);case ve:return n.renderDay=t.renderDay,n.timeFormat=a.getFormat("time"),l.a.createElement(y,n);default:return n.dateFormat=a.getFormat("date"),n.timeFormat=a.getFormat("time"),n.timeConstraints=t.timeConstraints,n.setTime=a._setTime,l.a.createElement(K,n)}})),ge(he(a),"_showView",(function(e,t){var n=(t||a.state.viewDate).clone(),r=a.props.onBeforeNavigate(e,a.state.currentView,n);r&&a.state.currentView!==r&&(a.props.onNavigate(r),a.setState({currentView:r}))})),ge(he(a),"viewToMethod",{days:"date",months:"month",years:"year"}),ge(he(a),"nextView",{days:"time",months:"days",years:"months"}),ge(he(a),"_updateDate",(function(e){var t=a.state.currentView,n=a.getUpdateOn(a.getFormat("date")),r=a.state.viewDate.clone();r[a.viewToMethod[t]](parseInt(e.target.getAttribute("data-value"),10)),"days"===t&&(r.month(parseInt(e.target.getAttribute("data-month"),10)),r.year(parseInt(e.target.getAttribute("data-year"),10)));var o={viewDate:r};t===n?(o.selectedDate=r.clone(),o.inputValue=r.format(a.getFormat("datetime")),void 0===a.props.open&&a.props.input&&a.props.closeOnSelect&&a._closeCalendar(),a.props.onChange(r.clone())):a._showView(a.nextView[t],r),a.setState(o)})),ge(he(a),"_viewNavigate",(function(e,t){var n=a.state.viewDate.clone();n.add(e,t),e>0?a.props.onNavigateForward(e,t):a.props.onNavigateBack(-e,t),a.setState({viewDate:n})})),ge(he(a),"_setTime",(function(e,t){var n=(a.getSelectedDate()||a.state.viewDate).clone();n[e](t),a.props.value||a.setState({selectedDate:n,viewDate:n.clone(),inputValue:n.format(a.getFormat("datetime"))}),a.props.onChange(n)})),ge(he(a),"_openCalendar",(function(){a.isOpen()||a.setState({open:!0},a.props.onOpen)})),ge(he(a),"_closeCalendar",(function(){a.isOpen()&&a.setState({open:!1},(function(){a.props.onClose(a.state.selectedDate||a.state.inputValue)}))})),ge(he(a),"_handleClickOutside",(function(){var e=a.props;e.input&&a.state.open&&void 0===e.open&&e.closeOnClickOutside&&a._closeCalendar()})),ge(he(a),"_onInputFocus",(function(e){a.callHandler(a.props.inputProps.onFocus,e)&&a._openCalendar()})),ge(he(a),"_onInputChange",(function(e){if(a.callHandler(a.props.inputProps.onChange,e)){var t=e.target?e.target.value:e,n=a.localMoment(t,a.getFormat("datetime")),r={inputValue:t};n.isValid()?(r.selectedDate=n,r.viewDate=n.clone().startOf("month")):r.selectedDate=null,a.setState(r,(function(){a.props.onChange(n.isValid()?n:a.state.inputValue)}))}})),ge(he(a),"_onInputKeyDown",(function(e){a.callHandler(a.props.inputProps.onKeyDown,e)&&9===e.which&&a.props.closeOnTab&&a._closeCalendar()})),ge(he(a),"_onInputClick",(function(e){console.log("CLICKING 2!"),a.callHandler(a.props.inputProps.onClick,e)&&a._openCalendar()})),a.state=a.getInitialState(e),a}return ce(n,[{key:"render",value:function(){return l.a.createElement(we,{className:this.getClassName(),onClickOut:this._handleClickOutside},this.renderInput(),l.a.createElement("div",{className:"rdtPicker"},this.renderView(this.state.currentView,this._renderCalendar)))}},{key:"renderInput",value:function(){if(this.props.input){var e=ie(ie({type:"text",className:"form-control",value:this.getInputValue()},this.props.inputProps),{},{onFocus:this._onInputFocus,onChange:this._onInputChange,onKeyDown:this._onInputKeyDown,onClick:this._onInputClick});return this.props.renderInput?l.a.createElement("div",null,this.props.renderInput(e,this._openCalendar,this._closeCalendar)):l.a.createElement("input",e)}}},{key:"renderView",value:function(e,t){return this.props.renderView?this.props.renderView(e,(function(){return t(e)})):t(this.state.currentView)}},{key:"getInitialState",value:function(e){var t=e||this.props,n=this.getFormat("datetime"),a=this.parseDate(t.value||t.initialValue,n);return this.checkTZ(t),{open:!t.input,currentView:t.initialViewMode||this.getInitialView(this.getFormat("date")),viewDate:this.getInitialViewDate(t.initialViewDate,a,n),selectedDate:a&&a.isValid()?a:void 0,inputValue:this.getInitialInputValue(t,a,n)}}},{key:"getInitialViewDate",value:function(e,t,n){var a;if(e){if((a=this.parseDate(e,n))&&a.isValid())return a;this.log('The initialViewDated given "'+e+'" is not valid. Using current date instead.')}else if(t&&t.isValid())return t.clone();return this.getInitialDate()}},{key:"getInitialDate",value:function(){var e=this.localMoment();return e.hour(0).minute(0).second(0).millisecond(0),e}},{key:"getInitialView",value:function(e){return e?this.getUpdateOn(e):"time"}},{key:"parseDate",value:function(e,t){var n;return e&&"string"==typeof e?n=this.localMoment(e,t):e&&(n=this.localMoment(e)),n&&!n.isValid()&&(n=null),n}},{key:"getClassName",value:function(){var e="rdt",t=this.props,n=t.className;return Array.isArray(n)?e+=" "+n.join(" "):n&&(e+=" "+n),t.input||(e+=" rdtStatic"),this.isOpen()&&(e+=" rdtOpen"),e}},{key:"isOpen",value:function(){return!this.props.input||(void 0===this.props.open?this.state.open:this.props.open)}},{key:"getUpdateOn",value:function(e){return this.props.updateOnView?this.props.updateOnView:e.match(/[lLD]/)?ve:-1!==e.indexOf("M")?me:-1!==e.indexOf("Y")?be:ve}},{key:"getLocaleData",value:function(e){var t=e||this.props;return this.localMoment(t.value||t.defaultValue||new Date).localeData()}},{key:"getDateFormat",value:function(e){var t=this.props.dateFormat;return!0===t?e.longDateFormat("L"):t||""}},{key:"getTimeFormat",value:function(e){var t=this.props.timeFormat;return!0===t?e.longDateFormat("LT"):t||""}},{key:"getFormat",value:function(e){if("date"===e)return this.getDateFormat(this.getLocaleData());if("time"===e)return this.getTimeFormat(this.getLocaleData());var t=this.getLocaleData(),n=this.getDateFormat(t),a=this.getTimeFormat(t);return n&&a?n+" "+a:n||a}},{key:"updateTime",value:function(e,t,n,a){var r={},o=a?"selectedDate":"viewDate";r[o]=this.state[o].clone()[e](t,n),this.setState(r)}},{key:"localMoment",value:function(e,t,n){var a=null;return a=(n=n||this.props).utc?i.a.utc(e,t,n.strictParsing):n.displayTimeZone?i.a.tz(e,t,n.displayTimeZone):i()(e,t,n.strictParsing),n.locale&&a.locale(n.locale),a}},{key:"checkTZ",value:function(e){!e.displayTimeZone||this.tzWarning||i.a.tz||(this.tzWarning=!0,this.log('displayTimeZone prop with value "'+e.displayTimeZone+'" is used but moment.js timezone is not loaded.',"error"))}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=!1,n=this.props;["locale","utc","displayZone","dateFormat","timeFormat"].forEach((function(a){e[a]!==n[a]&&(t=!0)})),t&&this.regenerateDates(this.props),n.value&&n.value!==e.value&&this.setViewDate(n.value),this.checkTZ(this.props)}}},{key:"regenerateDates",value:function(e){var t=this.state.viewDate.clone(),n=this.state.selectedDate&&this.state.selectedDate.clone();e.locale&&(t.locale(e.locale),n&&n.locale(e.locale)),e.utc?(t.utc(),n&&n.utc()):e.displayTimeZone?(t.tz(e.displayTimeZone),n&&n.tz(e.displayTimeZone)):(t.locale(),n&&n.locale());var a={viewDate:t,selectedDate:n};n&&n.isValid()&&(a.inputValue=n.format(this.getFormat("datetime"))),this.setState(a)}},{key:"getSelectedDate",value:function(){if(void 0===this.props.value)return this.state.selectedDate;var e=this.parseDate(this.props.value,this.getFormat("datetime"));return!(!e||!e.isValid())&&e}},{key:"getInitialInputValue",value:function(e,t,n){return e.inputProps.value?e.inputProps.value:t&&t.isValid()?t.format(n):e.value&&"string"==typeof e.value?e.value:e.initialValue&&"string"==typeof e.initialValue?e.initialValue:""}},{key:"getInputValue",value:function(){var e=this.getSelectedDate();return e?e.format(this.getFormat("datetime")):this.state.inputValue}},{key:"setViewDate",value:function(e){var t,n=this;return e&&(t="string"==typeof e?this.localMoment(e,this.getFormat("datetime")):this.localMoment(e))&&t.isValid()?void this.setState({viewDate:t}):n.log("Invalid date passed to the `setViewDate` method: "+e)}},{key:"navigate",value:function(e){this._showView(e)}},{key:"log",value:function(e,t){var n="undefined"!=typeof window&&window.console;n&&(t||(t="warn"),n[t]("***react-datetime:"+e))}},{key:"callHandler",value:function(e,t){return!e||!1!==e(t)}}]),n}(l.a.Component);ge(Ce,"propTypes",{value:xe,initialValue:xe,initialViewDate:xe,initialViewMode:ye.oneOf([be,me,ve,"time"]),onOpen:ye.func,onClose:ye.func,onChange:ye.func,onNavigate:ye.func,onBeforeNavigate:ye.func,onNavigateBack:ye.func,onNavigateForward:ye.func,updateOnView:ye.string,locale:ye.string,utc:ye.bool,displayTimeZone:ye.string,input:ye.bool,dateFormat:ye.oneOfType([ye.string,ye.bool]),timeFormat:ye.oneOfType([ye.string,ye.bool]),inputProps:ye.object,timeConstraints:ye.object,isValidDate:ye.func,open:ye.bool,strictParsing:ye.bool,closeOnSelect:ye.bool,closeOnTab:ye.bool,renderView:ye.func,renderInput:ye.func,renderDay:ye.func,renderMonth:ye.func,renderYear:ye.func}),ge(Ce,"defaultProps",{onOpen:Oe,onClose:Oe,onCalendarOpen:Oe,onCalendarClose:Oe,onChange:Oe,onNavigate:Oe,onBeforeNavigate:function(e){return e},onNavigateBack:Oe,onNavigateForward:Oe,dateFormat:!0,timeFormat:!0,utc:!1,className:"",input:!0,inputProps:{},timeConstraints:{},isValidDate:function(){return!0},strictParsing:!0,closeOnSelect:!1,closeOnTab:!0,closeOnClickOutside:!0}),ge(Ce,"moment",i.a);var we=function(e,t){var n,a,r=e.displayName||e.name||"Component";return a=n=function(n){var a,o;function i(e){var a;return(a=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!=typeof a.__clickOutsideHandlerProp){var t=a.getInstance();if("function"!=typeof t.props.handleClickOutside){if("function"!=typeof t.handleClickOutside)throw new Error("WrappedComponent: "+r+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else a.__clickOutsideHandlerProp(e)},a.__getComponentNode=function(){var e=a.getInstance();return t&&"function"==typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"==typeof e.setClickOutsideRef?e.setClickOutsideRef():Object(Q.findDOMNode)(e)},a.enableOnClickOutside=function(){if("undefined"!=typeof document&&!te[a._uid]){void 0===$&&($=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),te[a._uid]=!0;var e=a.props.eventTypes;e.forEach||(e=[e]),ee[a._uid]=function(e){var t;null!==a.componentNode&&(a.props.preventDefault&&e.preventDefault(),a.props.stopPropagation&&e.stopPropagation(),a.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode;){if(X(e,t,n))return!0;e=e.parentNode}return e}(e.target,a.componentNode,a.props.outsideClickIgnoreClass)===document&&a.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,ee[a._uid],ae(a,e))}))}},a.disableOnClickOutside=function(){delete te[a._uid];var e=ee[a._uid];if(e&&"undefined"!=typeof document){var t=a.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,ae(a,t))})),delete ee[a._uid]}},a.getRef=function(e){return a.instanceRef=e},a._uid=J(),a}o=n,(a=i).prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o;var l=i.prototype;return l.getInstance=function(){if(!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},l.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"==typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!=typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+r+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},l.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},l.componentWillUnmount=function(){this.disableOnClickOutside()},l.render=function(){var t=this.props,n=(t.excludeScrollbar,function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(t,["excludeScrollbar"]));return e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,Object(s.createElement)(e,n)},i}(s.Component),n.displayName="OnClickOutside("+r+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:"ignore-react-onclickoutside",preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},a}(function(e){ue(n,e);var t=de(n);function n(){var e;se(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return ge(he(e=t.call.apply(t,[this].concat(r))),"container",l.a.createRef()),e}return ce(n,[{key:"render",value:function(){return l.a.createElement("div",{className:this.props.className,ref:this.container},this.props.children)}},{key:"handleClickOutside",value:function(e){this.props.onClickOut(e)}},{key:"setClickOutsideRef",value:function(){return this.container.current}}]),n}(l.a.Component))}])},96:function(e,t,n){var a,r,o;r=[t],void 0===(o="function"==typeof(a=function(e){var t,n,a,r=e;void 0===r&&(window.rison={}),r.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var e=[],t=0;t<16;t++)for(var n=0;n<16;n++)if(t+n!=0){var a=String.fromCharCode(16*t+n);/\w|[-_.\/~]/.test(a)||e.push("\\u00"+t.toString(16)+n.toString(16))}r.not_idchar=e.join("")}(),r.not_idchar=" '!:(),*@$",r.not_idstart="-0123456789",a="[^"+r.not_idstart+r.not_idchar+"][^"+r.not_idchar+"]*",r.id_ok=new RegExp("^"+a+"$"),r.next_id=new RegExp(a,"g"),r.quote=function(e){return/^[-A-Za-z0-9~!*()_.',:@$\/]*$/.test(e)?e:encodeURIComponent(e).replace("%2C",",","g").replace("%3A",":","g").replace("%40","@","g").replace("%24","$","g").replace("%2F","/","g").replace("%20","+","g")},t={"'":!0,"!":!0},n={array:function(e){var t,a,r,o,i=["!("],s=e.length;for(r=0;r<s;r+=1)o=e[r],(a=n[typeof o])&&"string"==typeof(o=a(o))&&(t&&(i[i.length]=","),i[i.length]=o,t=!0);return i[i.length]=")",i.join("")},boolean:function(e){return e?"!t":"!f"},null:function(e){return"!n"},number:function(e){return isFinite(e)?String(e).replace(/\+/,""):"!n"},object:function(e){if(e){if(e instanceof Array)return n.array(e);if("object"==typeof e.__prototype__&&void 0!==e.__prototype__.encode_rison)return e.encode_rison();var t,a,r,o,i,s=["("],l=[];for(r in e)l[l.length]=r;for(l.sort(),i=0;i<l.length;i++)o=e[r=l[i]],(a=n[typeof o])&&"string"==typeof(o=a(o))&&(t&&(s[s.length]=","),s.push(n.string(r),":",o),t=!0);return s[s.length]=")",s.join("")}return"!n"},string:function(e){return""==e?"''":r.id_ok.test(e)?e:"'"+(e=e.replace(/(['!])/g,(function(e,n){return t[n]?"!"+n:n})))+"'"},undefined:function(e){throw new Error("rison can't encode the undefined value")}},r.encode=function(e){return n[typeof e](e)},r.encode_object=function(e){if("object"!=typeof e||null===e||e instanceof Array)throw new Error("rison.encode_object expects an object argument");var t=n[typeof e](e);return t.substring(1,t.length-1)},r.encode_array=function(e){if(!(e instanceof Array))throw new Error("rison.encode_array expects an array argument");var t=n[typeof e](e);return t.substring(2,t.length-1)},r.encode_uri=function(e){return r.quote(n[typeof e](e))},r.decode=function(e){return new r.parser((function(e){throw Error("rison decoder error: "+e)})).parse(e)},r.decode_object=function(e){return r.decode("("+e+")")},r.decode_array=function(e){return r.decode("!("+e+")")},r.parser=function(e){this.errorHandler=e},r.parser.WHITESPACE="",r.parser.prototype.setOptions=function(e){e.errorHandler&&(this.errorHandler=e.errorHandler)},r.parser.prototype.parse=function(e){this.string=e,this.index=0,this.message=null;var t=this.readValue();return!this.message&&this.next()&&(t=this.error("unable to parse string as rison: '"+r.encode(e)+"'")),this.message&&this.errorHandler&&this.errorHandler(this.message,this.index),t},r.parser.prototype.error=function(e){"undefined"!=typeof console&&console.log("rison parser error: ",e),this.message=e},r.parser.prototype.readValue=function(){var e=this.next(),t=e&&this.table[e];if(t)return t.apply(this);var n=this.string,a=this.index-1;r.next_id.lastIndex=a;var o=r.next_id.exec(n);if(o.length>0){var i=o[0];return this.index=a+i.length,i}return e?this.error("invalid character: '"+e+"'"):this.error("empty expression")},r.parser.parse_array=function(e){for(var t,n=[];")"!=(t=e.next());){if(!t)return e.error("unmatched '!('");if(n.length)","!=t&&e.error("missing ','");else{if(","==t)return e.error("extra ','");--e.index}var a=e.readValue();if(void 0===a)return;n.push(a)}return n},r.parser.bangs={t:!0,f:!1,n:null,"(":r.parser.parse_array},r.parser.prototype.table={"!":function(){var e=this.string.charAt(this.index++);if(!e)return this.error('"!" at end of input');var t=r.parser.bangs[e];return"function"==typeof t?t.call(null,this):void 0===t?this.error('unknown literal: "!'+e+'"'):t},"(":function(){for(var e,t={},n=0;")"!=(e=this.next());){if(n)","!=e&&this.error("missing ','");else{if(","==e)return this.error("extra ','");--this.index}var a=this.readValue();if(void 0===a)return;if(":"!=this.next())return this.error("missing ':'");var r=this.readValue();if(void 0===r)return;t[a]=r,n++}return t},"'":function(){for(var e,t=this.string,n=this.index,a=n,r=[];"'"!=(e=t.charAt(n++));){if(!e)return this.error('unmatched "\'"');if("!"==e){if(a<n-1&&r.push(t.slice(a,n-1)),e=t.charAt(n++),!("!'".indexOf(e)>=0))return this.error('invalid string escape: "!'+e+'"');r.push(e),a=n}}return a<n-1&&r.push(t.slice(a,n-1)),this.index=n,1==r.length?r[0]:r.join("")},"-":function(){var e=this.string,t=this.index,n=t-1,a="int",r="-",o={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var i=e.charAt(t++);if(!i)break;"0"<=i&&i<="9"||(r.indexOf(i)>=0?r="":"exp"==(a=o[a+"+"+i.toLowerCase()])&&(r="-"))}while(a);return this.index=--t,"-"==(e=e.slice(n,t))?this.error("invalid number"):Number(e)}},function(e){for(var t=0;t<=9;t++)e[String(t)]=e["-"]}(r.parser.prototype.table),r.parser.prototype.next=function(){var e=this.string,t=this.index;do{if(t==e.length)return;var n=e.charAt(t++)}while(r.parser.WHITESPACE.indexOf(n)>=0);return this.index=t,n}})?a.apply(t,r):a)||(e.exports=o)},960:function(e,t,n){var a;!function(n,r){"use strict";function o(){}o.TO_RAD=Math.PI/180,o.TO_DEG=180/Math.PI,o.PI_X2=2*Math.PI,o.PI_DIV4=Math.PI/4;var i=Object.create(o.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:o.prototype},extend:{value:function(e,t){for(var n in e)void 0!==i.prototype[n]&&!0!==t||("function"==typeof e[n]&&"function"==typeof e[n].bind?i.prototype[n]=e[n].bind(i):i.prototype[n]=e[n])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*o.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*o.TO_DEG}),i.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:void 0,latitude:e.length>=2?1:void 0,elevation:e.length>=3?2:void 0};var t=function(t){var n;return t.every((function(t){return"object"!=typeof e||(!e.hasOwnProperty(t)||(n=t,!1))})),n},n=t(["lng","lon","longitude"]),a=t(["lat","latitude"]),r=t(["alt","altitude","elevation","elev"]);return void 0!==a||void 0!==n||void 0!==r?{latitude:a,longitude:n,elevation:r}:void 0},getLat:function(e,t){return!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var n={latitude:!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},a=e[this.getKeys(e).elevation];return void 0!==a&&(n.elevation=a),n},ll:function(e,t){return this.coords.call(this,e,t)},validate:function(e){var t=this.getKeys(e);if(void 0===t||void 0===t.latitude||"undefined"===t.longitude)return!1;var n=e[t.latitude],a=e[t.longitude];return!(void 0===n||!this.isDecimal(n)&&!this.isSexagesimal(n))&&(!(void 0===a||!this.isDecimal(a)&&!this.isSexagesimal(a))&&(n=this.useDecimal(n),a=this.useDecimal(a),!(n<this.minLat||n>this.maxLat||a<this.minLon||a>this.maxLon)))},getDistance:function(e,t,n,a){n=Math.floor(n)||1,a=Math.floor(a)||0;var r,o,s,l,c,u,d,p=this.coords(e),h=this.coords(t),f=6378137,g=6356752.314245,b=1/298.257223563,m=(h.longitude-p.longitude).toRad(),v=Math.atan((1-b)*Math.tan(parseFloat(p.latitude).toRad())),y=Math.atan((1-b)*Math.tan(parseFloat(h.latitude).toRad())),O=Math.sin(v),x=Math.cos(v),C=Math.sin(y),w=Math.cos(y),E=m,_=100;do{var S=Math.sin(E),j=Math.cos(E);if(0===(u=Math.sqrt(w*S*(w*S)+(x*C-O*w*j)*(x*C-O*w*j))))return i.distance=0;r=O*C+x*w*j,o=Math.atan2(u,r),c=r-2*O*C/(l=1-(s=x*w*S/u)*s),isNaN(c)&&(c=0);var T=b/16*l*(4+b*(4-3*l));d=E,E=m+(1-T)*b*s*(o+T*u*(c+T*r*(2*c*c-1)))}while(Math.abs(E-d)>1e-12&&--_>0);if(0===_)return NaN;var R=l*(f*f-g*g)/(g*g),k=R/1024*(256+R*(R*(74-47*R)-128)),M=g*(1+R/16384*(4096+R*(R*(320-175*R)-768)))*(o-k*u*(c+k/4*(r*(2*c*c-1)-k/6*c*(4*u*u-3)*(4*c*c-3))));if(M=M.toFixed(a),void 0!==this.elevation(e)&&void 0!==this.elevation(t)){var D=Math.abs(this.elevation(e)-this.elevation(t));M=Math.sqrt(M*M+D*D)}return this.distance=Math.round(M*Math.pow(10,a)/n)*n/Math.pow(10,a)},getDistanceSimple:function(e,t,n){n=Math.floor(n)||1;var a=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return i.distance=Math.floor(Math.round(a/n)*n)},getCenter:function(e){var t=e;if("object"==typeof e&&!(e instanceof Array))for(var n in t=[],e)t.push(this.coords(e[n]));if(!t.length)return!1;var a,r,i,s=0,l=0,c=0;t.forEach((function(e){a=this.latitude(e).toRad(),r=this.longitude(e).toRad(),s+=Math.cos(a)*Math.cos(r),l+=Math.cos(a)*Math.sin(r),c+=Math.sin(a)}),this);var u=t.length;return s/=u,l/=u,c/=u,r=Math.atan2(l,s),i=Math.sqrt(s*s+l*l),{latitude:((a=Math.atan2(c,i))*o.TO_DEG).toFixed(6),longitude:(r*o.TO_DEG).toFixed(6)}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),n={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==t&&(n.maxElev=0,n.minElev=1/0);for(var a=0,r=e.length;a<r;++a)n.maxLat=Math.max(this.latitude(e[a]),n.maxLat),n.minLat=Math.min(this.latitude(e[a]),n.minLat),n.maxLng=Math.max(this.longitude(e[a]),n.maxLng),n.minLng=Math.min(this.longitude(e[a]),n.minLng),t&&(n.maxElev=Math.max(this.elevation(e[a]),n.maxElev),n.minElev=Math.min(this.elevation(e[a]),n.minElev));return n},getCenterOfBounds:function(e){var t=this.getBounds(e),n=t.minLat+(t.maxLat-t.minLat)/2,a=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(a.toFixed(6))}},getBoundsOfDistance:function(e,t){var n,a,r=this.latitude(e),i=this.longitude(e),s=r.toRad(),l=i.toRad(),c=t/this.radius,u=s-c,d=s+c,p=this.maxLat.toRad(),h=this.minLat.toRad(),f=this.maxLon.toRad(),g=this.minLon.toRad();if(u>h&&d<p){var b=Math.asin(Math.sin(c)/Math.cos(s));(n=l-b)<g&&(n+=o.PI_X2),(a=l+b)>f&&(a-=o.PI_X2)}else u=Math.max(u,h),d=Math.min(d,p),n=g,a=f;return[{latitude:u.toDeg(),longitude:n.toDeg()},{latitude:d.toDeg(),longitude:a.toDeg()}]},isPointInside:function(e,t){for(var n=!1,a=-1,r=t.length,o=r-1;++a<r;o=a)(this.longitude(t[a])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[o])||this.longitude(t[o])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[a]))&&this.latitude(e)<(this.latitude(t[o])-this.latitude(t[a]))*(this.longitude(e)-this.longitude(t[a]))/(this.longitude(t[o])-this.longitude(t[a]))+this.latitude(t[a])&&(n=!n);return n},preparePolygonForIsPointInsideOptimized:function(e){for(var t=0,n=e.length-1;t<e.length;t++)this.longitude(e[n])===this.longitude(e[t])?(e[t].constant=this.latitude(e[t]),e[t].multiple=0):(e[t].constant=this.latitude(e[t])-this.longitude(e[t])*this.latitude(e[n])/(this.longitude(e[n])-this.longitude(e[t]))+this.longitude(e[t])*this.latitude(e[t])/(this.longitude(e[n])-this.longitude(e[t])),e[t].multiple=(this.latitude(e[n])-this.latitude(e[t]))/(this.longitude(e[n])-this.longitude(e[t]))),n=t},isPointInsideWithPreparedPolygon:function(e,t){for(var n=!1,a=this.longitude(e),r=this.latitude(e),o=0,i=t.length-1;o<t.length;o++)(this.longitude(t[o])<a&&this.longitude(t[i])>=a||this.longitude(t[i])<a&&this.longitude(t[o])>=a)&&(n^=a*t[o].multiple+t[o].constant<r),i=o;return n},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,n){return this.getDistance(e,t)<n},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var n=this.longitude(t).toRad()-this.longitude(e).toRad(),a=Math.log(Math.tan(this.latitude(t).toRad()/2+o.PI_DIV4)/Math.tan(this.latitude(e).toRad()/2+o.PI_DIV4));return Math.abs(n)>Math.PI&&(n=n>0?-1*(o.PI_X2-n):o.PI_X2+n),(Math.atan2(n,a).toDeg()+360)%360},getBearing:function(e,t){return t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e),(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(e,t,n){var a,r;switch(r="circle"==n?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(r/22.5)){case 1:a={exact:"NNE",rough:"N"};break;case 2:a={exact:"NE",rough:"N"};break;case 3:a={exact:"ENE",rough:"E"};break;case 4:a={exact:"E",rough:"E"};break;case 5:a={exact:"ESE",rough:"E"};break;case 6:a={exact:"SE",rough:"E"};break;case 7:a={exact:"SSE",rough:"S"};break;case 8:a={exact:"S",rough:"S"};break;case 9:a={exact:"SSW",rough:"S"};break;case 10:a={exact:"SW",rough:"S"};break;case 11:a={exact:"WSW",rough:"W"};break;case 12:a={exact:"W",rough:"W"};break;case 13:a={exact:"WNW",rough:"W"};break;case 14:a={exact:"NW",rough:"W"};break;case 15:a={exact:"NNW",rough:"N"};break;default:a={exact:"N",rough:"N"}}return a.bearing=r,a},getDirection:function(e,t,n){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){return Object.keys(t).map((function(n){var a=this.getDistance(e,t[n]),r=Object.create(t[n]);return r.distance=a,r.key=n,r}),this).sort((function(e,t){return e.distance-t.distance}))},isPointInLine:function(e,t,n){return(this.getDistance(t,e,1,3)+this.getDistance(e,n,1,3)).toFixed(3)==this.getDistance(t,n,1,3)},isPointNearLine:function(e,t,n,a){return this.getDistanceFromLine(e,t,n)<a},getDistanceFromLine:function(e,t,n){var a=this.getDistance(t,e,1,3),r=this.getDistance(e,n,1,3),o=this.getDistance(t,n,1,3),i=Math.acos((a*a+o*o-r*r)/(2*a*o)),s=Math.acos((r*r+o*o-a*a)/(2*r*o));return i>Math.PI/2?a:s>Math.PI/2?r:Math.sin(i)*a},findNearest:function(e,t,n,a){n=n||0,a=a||1;var r=this.orderByDistance(e,t);return 1===a?r[n]:r.splice(n,a)},getPathLength:function(e){for(var t,n=0,a=0,r=e.length;a<r;++a)t&&(n+=this.getDistance(this.coords(e[a]),t)),t=this.coords(e[a]);return n},getSpeed:function(e,t,n){var a=n&&n.unit||"km";"mph"==a?a="mi":"kmh"==a&&(a="km");var r=i.getDistance(e,t)/(1*t.time/1e3-1*e.time/1e3)*3600;return Math.round(r*this.measures[a]*1e4)/1e4},computeDestinationPoint:function(e,t,n,a){var r=this.latitude(e),o=this.longitude(e);a=void 0===a?this.radius:Number(a);var i=Number(t)/a,s=Number(n).toRad(),l=Number(r).toRad(),c=Number(o).toRad(),u=Math.asin(Math.sin(l)*Math.cos(i)+Math.cos(l)*Math.sin(i)*Math.cos(s)),d=c+Math.atan2(Math.sin(s)*Math.sin(i)*Math.cos(l),Math.cos(i)-Math.sin(l)*Math.sin(u));return d=(d+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:u.toDeg(),longitude:d.toDeg()}},convertUnit:function(e,t,n){if(0===t)return 0;if(void 0===t){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;t=this.distance}if(e=e||"m",n=null==n?4:n,void 0!==this.measures[e])return this.round(t*this.measures[e],n);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map((function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var n in e)e[n]=t.useDecimal(e[n]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e}))}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var n in e)e[n]=this.useDecimal(e[n]);return e}if(this.isDecimal(e))return parseFloat(e);if(!0===this.isSexagesimal(e))return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),n=Math.abs(t[0]),a=60*("0."+(t[1]||0)),r=a.toString().split(".");return a=Math.floor(a),r=(60*("0."+(r[1]||0))).toFixed(2),this.sexagesimal[e]=n+"° "+a+"' "+r+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern).exec(e),n=0,a=0;t&&(n=parseFloat(t[2]/60),a=parseFloat(t[4]/3600)||0);var r=(parseFloat(t[1])+n+a).toFixed(8);return r="S"==t[7]||"W"==t[7]?parseFloat(-r):parseFloat(r),this.decimal[e]=r,r},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}}),void 0!==e.exports?(e.exports=i,"object"==typeof n&&(n.geolib=i)):void 0===(a=function(){return i}.apply(t,[]))||(e.exports=a)}(this)}}]);