{"version":3,"file":"a8081c8ca2998894cb7f.chunk.js","mappings":"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","sources":["webpack://superset/./src/components/CronPicker/CronPicker.tsx","webpack://superset/./src/components/ListView/ActionsBar.tsx","webpack://superset/./src/components/Switch/index.tsx","webpack://superset/./src/components/TimezoneSelector/index.tsx","webpack://superset/./src/features/alerts/components/AlertStatusIcon.tsx","webpack://superset/./src/features/alerts/types.ts","webpack://superset/./src/features/alerts/components/RecipientIcon.tsx","webpack://superset/./src/components/LastUpdated/index.tsx","webpack://superset/./src/features/alerts/components/AlertReportCronScheduler.tsx","webpack://superset/./src/features/alerts/components/NotificationMethod.tsx","webpack://superset/./src/features/alerts/AlertReportModal.tsx","webpack://superset/./src/pages/AlertReportList/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { ConfigProvider } from 'antd';\nimport { styled, t } from '@superset-ui/core';\nimport ReactCronPicker, { Locale, CronProps } from 'react-js-cron';\n\nexport * from 'react-js-cron';\n\nexport const LOCALE: Locale = {\n  everyText: t('every'),\n  emptyMonths: t('every month'),\n  emptyMonthDays: t('every day of the month'),\n  emptyMonthDaysShort: t('day of the month'),\n  emptyWeekDays: t('every day of the week'),\n  emptyWeekDaysShort: t('day of the week'),\n  emptyHours: t('every hour'),\n  emptyMinutes: t('every minute'),\n  emptyMinutesForHourPeriod: t('every'),\n  yearOption: t('year'),\n  monthOption: t('month'),\n  weekOption: t('week'),\n  dayOption: t('day'),\n  hourOption: t('hour'),\n  minuteOption: t('minute'),\n  rebootOption: t('reboot'),\n  prefixPeriod: t('Every'),\n  prefixMonths: t('in'),\n  prefixMonthDays: t('on'),\n  prefixWeekDays: t('on'),\n  prefixWeekDaysForMonthAndYearPeriod: t('and'),\n  prefixHours: t('at'),\n  prefixMinutes: t(':'),\n  prefixMinutesForHourPeriod: t('at'),\n  suffixMinutesForHourPeriod: t('minute(s)'),\n  errorInvalidCron: t('Invalid cron expression'),\n  clearButtonText: t('Clear'),\n  weekDays: [\n    // Order is important, the index will be used as value\n    t('Sunday'), // Sunday must always be first, it's \"0\"\n    t('Monday'),\n    t('Tuesday'),\n    t('Wednesday'),\n    t('Thursday'),\n    t('Friday'),\n    t('Saturday'),\n  ],\n  months: [\n    // Order is important, the index will be used as value\n    t('January'),\n    t('February'),\n    t('March'),\n    t('April'),\n    t('May'),\n    t('June'),\n    t('July'),\n    t('August'),\n    t('September'),\n    t('October'),\n    t('November'),\n    t('December'),\n  ],\n  // Order is important, the index will be used as value\n  altWeekDays: [\n    t('SUN'), // Sunday must always be first, it's \"0\"\n    t('MON'),\n    t('TUE'),\n    t('WED'),\n    t('THU'),\n    t('FRI'),\n    t('SAT'),\n  ],\n  // Order is important, the index will be used as value\n  altMonths: [\n    t('JAN'),\n    t('FEB'),\n    t('MAR'),\n    t('APR'),\n    t('MAY'),\n    t('JUN'),\n    t('JUL'),\n    t('AUG'),\n    t('SEP'),\n    t('OCT'),\n    t('NOV'),\n    t('DEC'),\n  ],\n};\n\nexport const CronPicker = styled((props: CronProps) => (\n  <ConfigProvider\n    getPopupContainer={trigger => trigger.parentElement as HTMLElement}\n  >\n    <ReactCronPicker locale={LOCALE} {...props} />\n  </ConfigProvider>\n))`\n  .react-js-cron-field {\n    margin-bottom: 0px;\n  }\n  .react-js-cron-select:not(.react-js-cron-custom-select) > div:first-of-type,\n  .react-js-cron-custom-select {\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n    background-color: ${({ theme }) =>\n      theme.colors.grayscale.light4} !important;\n  }\n  .react-js-cron-custom-select > div:first-of-type {\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n  }\n  .react-js-cron-custom-select .ant-select-selection-placeholder {\n    flex: auto;\n  }\n  .react-js-cron-custom-select .ant-select-selection-overflow-item {\n    align-self: center;\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { TooltipPlacement } from 'antd/lib/tooltip';\n\nexport type ActionProps = {\n  label: string;\n  tooltip?: string | React.ReactElement;\n  placement?: TooltipPlacement;\n  icon: string;\n  onClick: () => void;\n};\n\ninterface ActionsBarProps {\n  actions: Array<ActionProps>;\n}\n\nconst StyledActions = styled.span`\n  white-space: nowrap;\n  min-width: 100px;\n  svg,\n  i {\n    margin-right: 8px;\n\n    &:hover {\n      path {\n        fill: ${({ theme }) => theme.colors.primary.base};\n      }\n    }\n  }\n`;\n\nconst ActionWrapper = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nexport default function ActionsBar({ actions }: ActionsBarProps) {\n  return (\n    <StyledActions className=\"actions\">\n      {actions.map((action, index) => {\n        const ActionIcon = Icons[action.icon];\n        if (action.tooltip) {\n          return (\n            <Tooltip\n              id={`${action.label}-tooltip`}\n              title={action.tooltip}\n              placement={action.placement}\n              key={index}\n            >\n              <ActionWrapper\n                role=\"button\"\n                tabIndex={0}\n                className=\"action-button\"\n                data-test={action.label}\n                onClick={action.onClick}\n              >\n                <ActionIcon />\n              </ActionWrapper>\n            </Tooltip>\n          );\n        }\n\n        return (\n          <ActionWrapper\n            role=\"button\"\n            tabIndex={0}\n            className=\"action-button\"\n            onClick={action.onClick}\n            data-test={action.label}\n            key={index}\n          >\n            <ActionIcon />\n          </ActionWrapper>\n        );\n      })}\n    </StyledActions>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport BaseSwitch, { SwitchProps } from 'antd/lib/switch';\n\nconst StyledSwitch = styled(BaseSwitch)`\n  .ant-switch-checked {\n    background-color: ${({ theme }) => theme.colors.primary.base};\n  }\n`;\n\nexport const Switch = (props: SwitchProps) => <StyledSwitch {...props} />;\nexport type { SwitchProps };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useEffect, useMemo } from 'react';\nimport moment from 'moment-timezone';\nimport { t } from '@superset-ui/core';\nimport { Select } from 'src/components';\n\nconst DEFAULT_TIMEZONE = {\n  name: 'GMT Standard Time',\n  value: 'Africa/Abidjan', // timezones are deduped by the first alphabetical value\n};\n\nconst MIN_SELECT_WIDTH = '400px';\n\nconst offsetsToName = {\n  '-300-240': ['Eastern Standard Time', 'Eastern Daylight Time'],\n  '-360-300': ['Central Standard Time', 'Central Daylight Time'],\n  '-420-360': ['Mountain Standard Time', 'Mountain Daylight Time'],\n  '-420-420': [\n    'Mountain Standard Time - Phoenix',\n    'Mountain Standard Time - Phoenix',\n  ],\n  '-480-420': ['Pacific Standard Time', 'Pacific Daylight Time'],\n  '-540-480': ['Alaska Standard Time', 'Alaska Daylight Time'],\n  '-600-600': ['Hawaii Standard Time', 'Hawaii Daylight Time'],\n  '60120': ['Central European Time', 'Central European Daylight Time'],\n  '00': [DEFAULT_TIMEZONE.name, DEFAULT_TIMEZONE.name],\n  '060': ['GMT Standard Time - London', 'British Summer Time'],\n};\n\nconst currentDate = moment();\nconst JANUARY = moment([2021, 1]);\nconst JULY = moment([2021, 7]);\n\nconst getOffsetKey = (name: string) =>\n  JANUARY.tz(name).utcOffset().toString() +\n  JULY.tz(name).utcOffset().toString();\n\nconst getTimezoneName = (name: string) => {\n  const offsets = getOffsetKey(name);\n  return (\n    (currentDate.tz(name).isDST()\n      ? offsetsToName[offsets]?.[1]\n      : offsetsToName[offsets]?.[0]) || name\n  );\n};\n\nconst ALL_ZONES = moment.tz\n  .countries()\n  .map(country => moment.tz.zonesForCountry(country, true))\n  .flat();\n\nconst TIMEZONES: moment.MomentZoneOffset[] = [];\nALL_ZONES.forEach(zone => {\n  if (\n    !TIMEZONES.find(\n      option => getOffsetKey(option.name) === getOffsetKey(zone.name),\n    )\n  ) {\n    TIMEZONES.push(zone); // dedupe zones by offsets\n  }\n});\n\nconst TIMEZONE_OPTIONS = TIMEZONES.map(zone => ({\n  label: `GMT ${moment\n    .tz(currentDate, zone.name)\n    .format('Z')} (${getTimezoneName(zone.name)})`,\n  value: zone.name,\n  offsets: getOffsetKey(zone.name),\n  timezoneName: zone.name,\n}));\n\nconst TIMEZONE_OPTIONS_SORT_COMPARATOR = (\n  a: typeof TIMEZONE_OPTIONS[number],\n  b: typeof TIMEZONE_OPTIONS[number],\n) =>\n  moment.tz(currentDate, a.timezoneName).utcOffset() -\n  moment.tz(currentDate, b.timezoneName).utcOffset();\n\n// pre-sort timezone options by time offset\nTIMEZONE_OPTIONS.sort(TIMEZONE_OPTIONS_SORT_COMPARATOR);\n\nconst matchTimezoneToOptions = (timezone: string) =>\n  TIMEZONE_OPTIONS.find(option => option.offsets === getOffsetKey(timezone))\n    ?.value || DEFAULT_TIMEZONE.value;\n\nexport type TimezoneSelectorProps = {\n  onTimezoneChange: (value: string) => void;\n  timezone?: string | null;\n  minWidth?: string;\n};\n\nexport default function TimezoneSelector({\n  onTimezoneChange,\n  timezone,\n  minWidth = MIN_SELECT_WIDTH, // smallest size for current values\n}: TimezoneSelectorProps) {\n  const validTimezone = useMemo(\n    () => matchTimezoneToOptions(timezone || moment.tz.guess()),\n    [timezone],\n  );\n\n  // force trigger a timezone update if provided `timezone` is not invalid\n  useEffect(() => {\n    if (timezone !== validTimezone) {\n      onTimezoneChange(validTimezone);\n    }\n  }, [validTimezone, onTimezoneChange, timezone]);\n\n  return (\n    <Select\n      ariaLabel={t('Timezone selector')}\n      css={{ minWidth }}\n      onChange={tz => onTimezoneChange(tz as string)}\n      value={validTimezone}\n      options={TIMEZONE_OPTIONS}\n      sortComparator={TIMEZONE_OPTIONS_SORT_COMPARATOR}\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t, SupersetTheme, useTheme } from '@superset-ui/core';\nimport React from 'react';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { AlertState } from '../types';\n\nfunction getStatusColor(\n  status: string,\n  isReportEnabled: boolean,\n  theme: SupersetTheme,\n) {\n  switch (status) {\n    case AlertState.Working:\n      return theme.colors.primary.base;\n    case AlertState.Error:\n      return theme.colors.error.base;\n    case AlertState.Success:\n      return isReportEnabled\n        ? theme.colors.success.base\n        : theme.colors.alert.base;\n    case AlertState.Noop:\n      return theme.colors.success.base;\n    case AlertState.Grace:\n      return theme.colors.alert.base;\n    default:\n      return theme.colors.grayscale.base;\n  }\n}\n\nexport default function AlertStatusIcon({\n  state,\n  isReportEnabled = false,\n}: {\n  state: string;\n  isReportEnabled: boolean;\n}) {\n  const theme = useTheme();\n  const lastStateConfig = {\n    icon: Icons.Check,\n    label: '',\n    status: '',\n  };\n  switch (state) {\n    case AlertState.Success:\n      lastStateConfig.icon = isReportEnabled\n        ? Icons.Check\n        : Icons.AlertSolidSmall;\n      lastStateConfig.label = isReportEnabled\n        ? t('Report sent')\n        : t('Alert triggered, notification sent');\n      lastStateConfig.status = AlertState.Success;\n      break;\n    case AlertState.Working:\n      lastStateConfig.icon = Icons.Running;\n      lastStateConfig.label = isReportEnabled\n        ? t('Report sending')\n        : t('Alert running');\n      lastStateConfig.status = AlertState.Working;\n      break;\n    case AlertState.Error:\n      lastStateConfig.icon = Icons.XSmall;\n      lastStateConfig.label = isReportEnabled\n        ? t('Report failed')\n        : t('Alert failed');\n      lastStateConfig.status = AlertState.Error;\n      break;\n    case AlertState.Noop:\n      lastStateConfig.icon = Icons.Check;\n      lastStateConfig.label = t('Nothing triggered');\n      lastStateConfig.status = AlertState.Noop;\n      break;\n    case AlertState.Grace:\n      lastStateConfig.icon = Icons.AlertSolidSmall;\n      lastStateConfig.label = t('Alert Triggered, In Grace Period');\n      lastStateConfig.status = AlertState.Grace;\n      break;\n    default:\n      lastStateConfig.icon = Icons.Check;\n      lastStateConfig.label = t('Nothing triggered');\n      lastStateConfig.status = AlertState.Noop;\n  }\n  const Icon = lastStateConfig.icon;\n  return (\n    <Tooltip title={lastStateConfig.label} placement=\"bottomLeft\">\n      <Icon\n        iconColor={getStatusColor(\n          lastStateConfig.status,\n          isReportEnabled,\n          theme,\n        )}\n      />\n    </Tooltip>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport Owner from 'src/types/Owner';\nimport { NOTIFICATION_FORMATS } from 'src/reports/types';\n\ntype user = {\n  id: number;\n  first_name: string;\n  last_name: string;\n};\nexport type ChartObject = {\n  id: number;\n  slice_name: string;\n  viz_type: string;\n};\n\nexport type DashboardObject = {\n  dashboard_title: string;\n  id: number;\n};\n\nexport type DatabaseObject = {\n  database_name: string;\n  id: number;\n};\n\nexport type NotificationMethodOption = 'Email' | 'Slack';\n\nexport type Recipient = {\n  recipient_config_json: {\n    target: string;\n  };\n  type: NotificationMethodOption;\n};\n\nexport type MetaObject = {\n  id?: number;\n  label?: string;\n  value?: number | string;\n};\n\nexport type Operator = '<' | '>' | '<=' | '>=' | '==' | '!=' | 'not null';\n\nexport type AlertObject = {\n  active?: boolean;\n  creation_method?: string;\n  chart?: MetaObject;\n  changed_by?: user;\n  changed_on_delta_humanized?: string;\n  chart_id: number;\n  created_by?: user;\n  created_on?: string;\n  crontab?: string;\n  dashboard?: MetaObject;\n  dashboard_id?: number;\n  database?: MetaObject;\n  description?: string;\n  force_screenshot: boolean;\n  grace_period?: number;\n  id: number;\n  last_eval_dttm?: number;\n  last_state?: 'Success' | 'Working' | 'Error' | 'Not triggered' | 'On Grace';\n  log_retention?: number;\n  name?: string;\n  owners?: Array<Owner | MetaObject>;\n  sql?: string;\n  timezone?: string;\n  recipients?: Array<Recipient>;\n  report_format?: NOTIFICATION_FORMATS;\n  type?: string;\n  validator_config_json?: {\n    op?: Operator;\n    threshold?: number;\n  };\n  validator_type?: string;\n  working_timeout?: number;\n  error?: string;\n};\n\nexport type LogObject = {\n  end_dttm: string;\n  error_message: string;\n  id: number;\n  scheduled_dttm: string;\n  start_dttm: string;\n  state: string;\n  value: string;\n  uuid: string;\n};\n\nexport enum AlertState {\n  Success = 'Success',\n  Working = 'Working',\n  Error = 'Error',\n  Noop = 'Not triggered',\n  Grace = 'On Grace',\n}\n\nexport enum RecipientIconName {\n  Email = 'Email',\n  Slack = 'Slack',\n}\nexport interface AlertsReportsConfig {\n  ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT: number;\n  ALERT_REPORTS_DEFAULT_RETENTION: number;\n  ALERT_REPORTS_DEFAULT_CRON_VALUE: string;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetTheme, css } from '@superset-ui/core';\nimport React, { ReactElement } from 'react';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { RecipientIconName } from '../types';\n\nconst StyledIcon = (theme: SupersetTheme) => css`\n  color: ${theme.colors.grayscale.light1};\n  margin-right: ${theme.gridUnit * 2}px;\n`;\n\nexport default function RecipientIcon({ type }: { type: string }) {\n  const recipientIconConfig: { icon: null | ReactElement; label: string } = {\n    icon: null,\n    label: '',\n  };\n  switch (type) {\n    case RecipientIconName.Email:\n      recipientIconConfig.icon = <Icons.Email css={StyledIcon} />;\n      recipientIconConfig.label = RecipientIconName.Email;\n      break;\n    case RecipientIconName.Slack:\n      recipientIconConfig.icon = <Icons.Slack css={StyledIcon} />;\n      recipientIconConfig.label = RecipientIconName.Slack;\n      break;\n    default:\n      recipientIconConfig.icon = null;\n      recipientIconConfig.label = '';\n  }\n  return recipientIconConfig.icon ? (\n    <Tooltip title={recipientIconConfig.label} placement=\"bottom\">\n      {recipientIconConfig.icon}\n    </Tooltip>\n  ) : null;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState, FunctionComponent } from 'react';\nimport moment, { Moment, MomentInput } from 'moment';\nimport { t, styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nconst REFRESH_INTERVAL = 60000; // every minute\n\ninterface LastUpdatedProps {\n  updatedAt: MomentInput;\n  update?: React.MouseEventHandler<HTMLSpanElement>;\n}\nmoment.updateLocale('en', {\n  calendar: {\n    lastDay: '[Yesterday at] LTS',\n    sameDay: '[Today at] LTS',\n    nextDay: '[Tomorrow at] LTS',\n    lastWeek: '[last] dddd [at] LTS',\n    nextWeek: 'dddd [at] LTS',\n    sameElse: 'L',\n  },\n});\n\nconst TextStyles = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst Refresh = styled(Icons.Refresh)`\n  color: ${({ theme }) => theme.colors.primary.base};\n  width: auto;\n  height: ${({ theme }) => theme.gridUnit * 5}px;\n  position: relative;\n  top: ${({ theme }) => theme.gridUnit}px;\n  left: ${({ theme }) => theme.gridUnit}px;\n  cursor: pointer;\n`;\n\nexport const LastUpdated: FunctionComponent<LastUpdatedProps> = ({\n  updatedAt,\n  update,\n}) => {\n  const [timeSince, setTimeSince] = useState<Moment>(moment(updatedAt));\n\n  useEffect(() => {\n    setTimeSince(() => moment(updatedAt));\n\n    // update UI every minute in case day changes\n    const interval = setInterval(() => {\n      setTimeSince(() => moment(updatedAt));\n    }, REFRESH_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, [updatedAt]);\n\n  return (\n    <TextStyles>\n      {t('Last Updated %s', timeSince.isValid() ? timeSince.calendar() : '--')}\n      {update && <Refresh onClick={update} />}\n    </TextStyles>\n  );\n};\n\nexport default LastUpdated;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useCallback, useRef, FocusEvent } from 'react';\nimport { t, useTheme } from '@superset-ui/core';\n\nimport { AntdInput, RadioChangeEvent } from 'src/components';\nimport { Input } from 'src/components/Input';\nimport { Radio } from 'src/components/Radio';\nimport { CronPicker, CronError } from 'src/components/CronPicker';\nimport { StyledInputContainer } from '../AlertReportModal';\n\nexport interface AlertReportCronSchedulerProps {\n  value: string;\n  onChange: (change: string) => any;\n}\n\nexport const AlertReportCronScheduler: React.FC<AlertReportCronSchedulerProps> =\n  ({ value, onChange }) => {\n    const theme = useTheme();\n    const inputRef = useRef<AntdInput>(null);\n    const [scheduleFormat, setScheduleFormat] = useState<'picker' | 'input'>(\n      'picker',\n    );\n\n    const handleRadioButtonChange = useCallback(\n      (e: RadioChangeEvent) => setScheduleFormat(e.target.value),\n      [],\n    );\n\n    const customSetValue = useCallback(\n      (newValue: string) => {\n        onChange(newValue);\n        inputRef.current?.setValue(newValue);\n      },\n      [inputRef, onChange],\n    );\n\n    const handleBlur = useCallback(\n      (event: FocusEvent<HTMLInputElement>) => {\n        onChange(event.target.value);\n      },\n      [onChange],\n    );\n\n    const handlePressEnter = useCallback(() => {\n      onChange(inputRef.current?.input.value || '');\n    }, [onChange]);\n\n    const [error, onError] = useState<CronError>();\n\n    return (\n      <>\n        <Radio.Group onChange={handleRadioButtonChange} value={scheduleFormat}>\n          <div className=\"inline-container add-margin\">\n            <Radio data-test=\"picker\" value=\"picker\" />\n            <CronPicker\n              clearButton={false}\n              value={value}\n              setValue={customSetValue}\n              disabled={scheduleFormat !== 'picker'}\n              displayError={scheduleFormat === 'picker'}\n              onError={onError}\n            />\n          </div>\n          <div className=\"inline-container add-margin\">\n            <Radio data-test=\"input\" value=\"input\" />\n            <span className=\"input-label\">{t('CRON Schedule')}</span>\n            <StyledInputContainer\n              data-test=\"input-content\"\n              className=\"styled-input\"\n            >\n              <div className=\"input-container\">\n                <Input\n                  type=\"text\"\n                  name=\"crontab\"\n                  ref={inputRef}\n                  style={error ? { borderColor: theme.colors.error.base } : {}}\n                  placeholder={t('CRON expression')}\n                  disabled={scheduleFormat !== 'input'}\n                  onBlur={handleBlur}\n                  onPressEnter={handlePressEnter}\n                />\n              </div>\n            </StyledInputContainer>\n          </div>\n        </Radio.Group>\n      </>\n    );\n  };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FunctionComponent, useState } from 'react';\nimport { styled, t, useTheme } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport Icons from 'src/components/Icons';\nimport { NotificationMethodOption } from '../types';\nimport { StyledInputContainer } from '../AlertReportModal';\n\nconst StyledNotificationMethod = styled.div`\n  margin-bottom: 10px;\n\n  .input-container {\n    textarea {\n      height: auto;\n    }\n  }\n\n  .inline-container {\n    margin-bottom: 10px;\n\n    .input-container {\n      margin-left: 10px;\n    }\n\n    > div {\n      margin: 0;\n    }\n\n    .delete-button {\n      margin-left: 10px;\n      padding-top: 3px;\n    }\n  }\n`;\n\ntype NotificationSetting = {\n  method?: NotificationMethodOption;\n  recipients: string;\n  options: NotificationMethodOption[];\n};\n\ninterface NotificationMethodProps {\n  setting?: NotificationSetting | null;\n  index: number;\n  onUpdate?: (index: number, updatedSetting: NotificationSetting) => void;\n  onRemove?: (index: number) => void;\n}\n\nexport const NotificationMethod: FunctionComponent<NotificationMethodProps> = ({\n  setting = null,\n  index,\n  onUpdate,\n  onRemove,\n}) => {\n  const { method, recipients, options } = setting || {};\n  const [recipientValue, setRecipientValue] = useState<string>(\n    recipients || '',\n  );\n  const theme = useTheme();\n\n  if (!setting) {\n    return null;\n  }\n\n  const onMethodChange = (method: NotificationMethodOption) => {\n    // Since we're swapping the method, reset the recipients\n    setRecipientValue('');\n    if (onUpdate) {\n      const updatedSetting = {\n        ...setting,\n        method,\n        recipients: '',\n      };\n\n      onUpdate(index, updatedSetting);\n    }\n  };\n\n  const onRecipientsChange = (\n    event: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    const { target } = event;\n\n    setRecipientValue(target.value);\n\n    if (onUpdate) {\n      const updatedSetting = {\n        ...setting,\n        recipients: target.value,\n      };\n\n      onUpdate(index, updatedSetting);\n    }\n  };\n\n  // Set recipients\n  if (!!recipients && recipientValue !== recipients) {\n    setRecipientValue(recipients);\n  }\n\n  return (\n    <StyledNotificationMethod>\n      <div className=\"inline-container\">\n        <StyledInputContainer>\n          <div className=\"input-container\">\n            <Select\n              ariaLabel={t('Delivery method')}\n              data-test=\"select-delivery-method\"\n              onChange={onMethodChange}\n              placeholder={t('Select Delivery Method')}\n              options={(options || []).map(\n                (method: NotificationMethodOption) => ({\n                  label: method,\n                  value: method,\n                }),\n              )}\n              value={method}\n            />\n          </div>\n        </StyledInputContainer>\n        {method !== undefined && !!onRemove ? (\n          <span\n            role=\"button\"\n            tabIndex={0}\n            className=\"delete-button\"\n            onClick={() => onRemove(index)}\n          >\n            <Icons.Trash iconColor={theme.colors.grayscale.base} />\n          </span>\n        ) : null}\n      </div>\n      {method !== undefined ? (\n        <StyledInputContainer>\n          <div className=\"control-label\">{t(method)}</div>\n          <div className=\"input-container\">\n            <textarea\n              name=\"recipients\"\n              value={recipientValue}\n              onChange={onRecipientsChange}\n            />\n          </div>\n          <div className=\"helper\">\n            {t('Recipients are separated by \",\" or \";\"')}\n          </div>\n        </StyledInputContainer>\n      ) : null}\n    </StyledNotificationMethod>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  FunctionComponent,\n  useState,\n  useEffect,\n  useMemo,\n  useCallback,\n} from 'react';\nimport {\n  css,\n  FeatureFlag,\n  styled,\n  SupersetClient,\n  SupersetTheme,\n  t,\n} from '@superset-ui/core';\nimport rison from 'rison';\nimport { useSingleViewResource } from 'src/views/CRUD/hooks';\n\nimport Icons from 'src/components/Icons';\nimport { Switch } from 'src/components/Switch';\nimport Modal from 'src/components/Modal';\nimport TimezoneSelector from 'src/components/TimezoneSelector';\nimport { Radio } from 'src/components/Radio';\nimport { propertyComparator } from 'src/components/Select/utils';\nimport { isFeatureEnabled } from 'src/featureFlags';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport Owner from 'src/types/Owner';\nimport { AntdCheckbox, AsyncSelect, Select } from 'src/components';\nimport TextAreaControl from 'src/explore/components/controls/TextAreaControl';\nimport { useCommonConf } from 'src/features/databases/state';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport {\n  NotificationMethodOption,\n  AlertObject,\n  ChartObject,\n  DashboardObject,\n  DatabaseObject,\n  MetaObject,\n  Operator,\n  Recipient,\n  AlertsReportsConfig,\n} from 'src/features/alerts/types';\nimport { useSelector } from 'react-redux';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport { AlertReportCronScheduler } from './components/AlertReportCronScheduler';\nimport { NotificationMethod } from './components/NotificationMethod';\n\nconst TIMEOUT_MIN = 1;\nconst TEXT_BASED_VISUALIZATION_TYPES = [\n  'pivot_table',\n  'pivot_table_v2',\n  'table',\n  'paired_ttest',\n];\n\ntype SelectValue = {\n  value: string;\n  label: string;\n};\n\ninterface AlertReportModalProps {\n  addSuccessToast: (msg: string) => void;\n  addDangerToast: (msg: string) => void;\n  alert?: AlertObject | null;\n  isReport?: boolean;\n  onAdd?: (alert?: AlertObject) => void;\n  onHide: () => void;\n  show: boolean;\n}\n\nconst DEFAULT_WORKING_TIMEOUT = 3600;\nconst DEFAULT_CRON_VALUE = '0 * * * *'; // every hour\nconst DEFAULT_RETENTION = 90;\n\nconst DEFAULT_NOTIFICATION_METHODS: NotificationMethodOption[] = ['Email'];\nconst DEFAULT_NOTIFICATION_FORMAT = 'PNG';\nconst CONDITIONS = [\n  {\n    label: t('< (Smaller than)'),\n    value: '<',\n  },\n  {\n    label: t('> (Larger than)'),\n    value: '>',\n  },\n  {\n    label: t('<= (Smaller or equal)'),\n    value: '<=',\n  },\n  {\n    label: t('>= (Larger or equal)'),\n    value: '>=',\n  },\n  {\n    label: t('== (Is equal)'),\n    value: '==',\n  },\n  {\n    label: t('!= (Is not equal)'),\n    value: '!=',\n  },\n  {\n    label: t('Not null'),\n    value: 'not null',\n  },\n];\n\nconst RETENTION_OPTIONS = [\n  {\n    label: t('None'),\n    value: 0,\n  },\n  {\n    label: t('30 days'),\n    value: 30,\n  },\n  {\n    label: t('60 days'),\n    value: 60,\n  },\n  {\n    label: t('90 days'),\n    value: 90,\n  },\n];\n\nconst StyledModal = styled(Modal)`\n  max-width: 1200px;\n  width: 100%;\n\n  .ant-modal-body {\n    overflow: initial;\n  }\n`;\n\nconst StyledIcon = (theme: SupersetTheme) => css`\n  margin: auto ${theme.gridUnit * 2}px auto 0;\n  color: ${theme.colors.grayscale.base};\n`;\n\nconst StyledSectionContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  .control-label {\n    margin-top: ${({ theme }) => theme.gridUnit}px;\n  }\n\n  .header-section {\n    display: flex;\n    flex: 0 0 auto;\n    align-items: center;\n    width: 100%;\n    padding: ${({ theme }) => theme.gridUnit * 4}px;\n    border-bottom: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n\n  .column-section {\n    display: flex;\n    flex: 1 1 auto;\n\n    .column {\n      flex: 1 1 auto;\n      min-width: calc(33.33% - ${({ theme }) => theme.gridUnit * 8}px);\n      padding: ${({ theme }) => theme.gridUnit * 4}px;\n\n      .async-select {\n        margin: 10px 0 20px;\n      }\n\n      &.condition {\n        border-right: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n      }\n\n      &.message {\n        border-left: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n      }\n    }\n  }\n\n  .inline-container {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    &.wrap {\n      flex-wrap: wrap;\n    }\n\n    > div {\n      flex: 1 1 auto;\n    }\n\n    &.add-margin {\n      margin-bottom: 5px;\n    }\n\n    .styled-input {\n      margin: 0 0 0 10px;\n\n      input {\n        flex: 0 0 auto;\n      }\n    }\n  }\n`;\n\nconst StyledSectionTitle = styled.div`\n  display: flex;\n  align-items: center;\n  margin: ${({ theme }) => theme.gridUnit * 2}px auto\n    ${({ theme }) => theme.gridUnit * 4}px auto;\n\n  h4 {\n    margin: 0;\n  }\n\n  .required {\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n    color: ${({ theme }) => theme.colors.error.base};\n  }\n`;\n\nconst StyledSwitchContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n\n  .switch-label {\n    margin-left: 10px;\n  }\n`;\n\nexport const StyledInputContainer = styled.div`\n  flex: 1;\n  margin-top: 0;\n\n  .helper {\n    display: block;\n    color: ${({ theme }) => theme.colors.grayscale.base};\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    padding: ${({ theme }) => theme.gridUnit}px 0;\n    text-align: left;\n  }\n\n  .required {\n    margin-left: ${({ theme }) => theme.gridUnit / 2}px;\n    color: ${({ theme }) => theme.colors.error.base};\n  }\n\n  .input-container {\n    display: flex;\n    align-items: center;\n\n    > div {\n      width: 100%;\n    }\n\n    label {\n      display: flex;\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n\n    i {\n      margin: 0 ${({ theme }) => theme.gridUnit}px;\n    }\n  }\n\n  input,\n  textarea {\n    flex: 1 1 auto;\n  }\n\n  input[disabled] {\n    color: ${({ theme }) => theme.colors.grayscale.base};\n  }\n\n  textarea {\n    height: 300px;\n    resize: none;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n  }\n\n  textarea,\n  input[type='text'],\n  input[type='number'] {\n    padding: ${({ theme }) => theme.gridUnit}px\n      ${({ theme }) => theme.gridUnit * 2}px;\n    border-style: none;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n\n    &[name='description'] {\n      flex: 1 1 auto;\n    }\n  }\n\n  .input-label {\n    margin-left: 10px;\n  }\n`;\n\nconst StyledRadio = styled(Radio)`\n  display: block;\n  line-height: ${({ theme }) => theme.gridUnit * 7}px;\n`;\n\nconst StyledRadioGroup = styled(Radio.Group)`\n  margin-left: ${({ theme }) => theme.gridUnit * 5.5}px;\n`;\n\nconst StyledCheckbox = styled(AntdCheckbox)`\n  margin-left: ${({ theme }) => theme.gridUnit * 5.5}px;\n  margin-top: ${({ theme }) => theme.gridUnit}px;\n`;\n\n// Notification Method components\nconst StyledNotificationAddButton = styled.div`\n  color: ${({ theme }) => theme.colors.primary.dark1};\n  cursor: pointer;\n\n  i {\n    margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  &.disabled {\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n    cursor: default;\n  }\n`;\n\nconst StyledNotificationMethodWrapper = styled.div`\n  .inline-container .input-container {\n    margin-left: 0;\n  }\n`;\n\nconst timezoneHeaderStyle = (theme: SupersetTheme) => css`\n  margin: ${theme.gridUnit * 3}px 0;\n`;\n\nconst inputSpacer = (theme: SupersetTheme) => css`\n  margin-right: ${theme.gridUnit * 3}px;\n`;\n\ntype NotificationAddStatus = 'active' | 'disabled' | 'hidden';\n\ninterface NotificationMethodAddProps {\n  status: NotificationAddStatus;\n  onClick: () => void;\n}\n\nconst TRANSLATIONS = {\n  ADD_NOTIFICATION_METHOD_TEXT: t('Add notification method'),\n  ADD_DELIVERY_METHOD_TEXT: t('Add delivery method'),\n  SAVE_TEXT: t('Save'),\n  ADD_TEXT: t('Add'),\n  EDIT_REPORT_TEXT: t('Edit Report'),\n  EDIT_ALERT_TEXT: t('Edit Alert'),\n  ADD_REPORT_TEXT: t('Add Report'),\n  ADD_ALERT_TEXT: t('Add Alert'),\n  REPORT_NAME_TEXT: t('Report name'),\n  ALERT_NAME_TEXT: t('Alert name'),\n  OWNERS_TEXT: t('Owners'),\n  DESCRIPTION_TEXT: t('Description'),\n  ACTIVE_TEXT: t('Active'),\n  ALERT_CONDITION_TEXT: t('Alert condition'),\n  DATABASE_TEXT: t('Database'),\n  SQL_QUERY_TEXT: t('SQL Query'),\n  TRIGGER_ALERT_IF_TEXT: t('Trigger Alert If...'),\n  CONDITION_TEXT: t('Condition'),\n  VALUE_TEXT: t('Value'),\n  VALUE_TOOLTIP: t('Threshold value should be double precision number'),\n  REPORT_SCHEDULE_TEXT: t('Report schedule'),\n  ALERT_CONDITION_SCHEDULE_TEXT: t('Alert condition schedule'),\n  TIMEZONE_TEXT: t('Timezone'),\n  SCHEDULE_SETTINGS_TEXT: t('Schedule settings'),\n  LOG_RETENTION_TEXT: t('Log retention'),\n  WORKING_TIMEOUT_TEXT: t('Working timeout'),\n  TIME_IN_SECONDS_TEXT: t('Time in seconds'),\n  SECONDS_TEXT: t('seconds'),\n  GRACE_PERIOD_TEXT: t('Grace period'),\n  MESSAGE_CONTENT_TEXT: t('Message content'),\n  DASHBOARD_TEXT: t('Dashboard'),\n  CHART_TEXT: t('Chart'),\n  SEND_AS_PNG_TEXT: t('Send as PNG'),\n  SEND_AS_CSV_TEXT: t('Send as CSV'),\n  SEND_AS_TEXT: t('Send as text'),\n  IGNORE_CACHE_TEXT: t('Ignore cache when generating screenshot'),\n  NOTIFICATION_METHOD_TEXT: t('Notification method'),\n};\n\nconst NotificationMethodAdd: FunctionComponent<NotificationMethodAddProps> = ({\n  status = 'active',\n  onClick,\n}) => {\n  if (status === 'hidden') {\n    return null;\n  }\n\n  const checkStatus = () => {\n    if (status !== 'disabled') {\n      onClick();\n    }\n  };\n\n  return (\n    <StyledNotificationAddButton className={status} onClick={checkStatus}>\n      <i className=\"fa fa-plus\" />{' '}\n      {status === 'active'\n        ? TRANSLATIONS.ADD_NOTIFICATION_METHOD_TEXT\n        : TRANSLATIONS.ADD_DELIVERY_METHOD_TEXT}\n    </StyledNotificationAddButton>\n  );\n};\n\ntype NotificationSetting = {\n  method?: NotificationMethodOption;\n  recipients: string;\n  options: NotificationMethodOption[];\n};\n\nconst AlertReportModal: FunctionComponent<AlertReportModalProps> = ({\n  addDangerToast,\n  onAdd,\n  onHide,\n  show,\n  alert = null,\n  isReport = false,\n  addSuccessToast,\n}) => {\n  const currentUser = useSelector<any, UserWithPermissionsAndRoles>(\n    state => state.user,\n  );\n  const conf = useCommonConf();\n  const allowedNotificationMethods: NotificationMethodOption[] =\n    conf?.ALERT_REPORTS_NOTIFICATION_METHODS || DEFAULT_NOTIFICATION_METHODS;\n\n  const [disableSave, setDisableSave] = useState<boolean>(true);\n  const [currentAlert, setCurrentAlert] =\n    useState<Partial<AlertObject> | null>();\n  const [isHidden, setIsHidden] = useState<boolean>(true);\n  const [contentType, setContentType] = useState<string>('dashboard');\n  const [reportFormat, setReportFormat] = useState<string>(\n    DEFAULT_NOTIFICATION_FORMAT,\n  );\n  const [forceScreenshot, setForceScreenshot] = useState<boolean>(false);\n\n  // Dropdown options\n  const [conditionNotNull, setConditionNotNull] = useState<boolean>(false);\n  const [sourceOptions, setSourceOptions] = useState<MetaObject[]>([]);\n  const [dashboardOptions, setDashboardOptions] = useState<MetaObject[]>([]);\n  const [chartOptions, setChartOptions] = useState<MetaObject[]>([]);\n\n  // Chart metadata\n  const [chartVizType, setChartVizType] = useState<string>('');\n\n  const isEditMode = alert !== null;\n  const formatOptionEnabled =\n    contentType === 'chart' &&\n    (isFeatureEnabled(FeatureFlag.ALERTS_ATTACH_REPORTS) || isReport);\n\n  const [notificationAddState, setNotificationAddState] =\n    useState<NotificationAddStatus>('active');\n  const [notificationSettings, setNotificationSettings] = useState<\n    NotificationSetting[]\n  >([]);\n\n  const onNotificationAdd = () => {\n    const settings: NotificationSetting[] = notificationSettings.slice();\n\n    settings.push({\n      recipients: '',\n      options: allowedNotificationMethods,\n    });\n\n    setNotificationSettings(settings);\n    setNotificationAddState(\n      settings.length === allowedNotificationMethods.length\n        ? 'hidden'\n        : 'disabled',\n    );\n  };\n\n  const {\n    ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT,\n    ALERT_REPORTS_DEFAULT_CRON_VALUE,\n    ALERT_REPORTS_DEFAULT_RETENTION,\n  } = useSelector<any, AlertsReportsConfig>(state => {\n    const conf = state.common?.conf;\n    return {\n      ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT:\n        conf?.ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT ?? DEFAULT_WORKING_TIMEOUT,\n      ALERT_REPORTS_DEFAULT_CRON_VALUE:\n        conf?.ALERT_REPORTS_DEFAULT_CRON_VALUE ?? DEFAULT_CRON_VALUE,\n      ALERT_REPORTS_DEFAULT_RETENTION:\n        conf?.ALERT_REPORTS_DEFAULT_RETENTION ?? DEFAULT_RETENTION,\n    };\n  });\n\n  const defaultAlert = {\n    active: true,\n    creation_method: 'alerts_reports',\n    crontab: ALERT_REPORTS_DEFAULT_CRON_VALUE,\n    log_retention: ALERT_REPORTS_DEFAULT_RETENTION,\n    working_timeout: ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT,\n    name: '',\n    owners: [],\n    recipients: [],\n    sql: '',\n    validator_config_json: {},\n    validator_type: '',\n    force_screenshot: false,\n    grace_period: undefined,\n  };\n\n  const updateNotificationSetting = (\n    index: number,\n    setting: NotificationSetting,\n  ) => {\n    const settings = notificationSettings.slice();\n\n    settings[index] = setting;\n    setNotificationSettings(settings);\n\n    if (setting.method !== undefined && notificationAddState !== 'hidden') {\n      setNotificationAddState('active');\n    }\n  };\n\n  const removeNotificationSetting = (index: number) => {\n    const settings = notificationSettings.slice();\n\n    settings.splice(index, 1);\n    setNotificationSettings(settings);\n    setNotificationAddState('active');\n  };\n\n  // Alert fetch logic\n  const {\n    state: { loading, resource, error: fetchError },\n    fetchResource,\n    createResource,\n    updateResource,\n    clearError,\n  } = useSingleViewResource<AlertObject>('report', t('report'), addDangerToast);\n\n  // Functions\n  const hide = () => {\n    clearError();\n    setIsHidden(true);\n    onHide();\n    setNotificationSettings([]);\n    setCurrentAlert({ ...defaultAlert });\n    setNotificationAddState('active');\n  };\n\n  const onSave = () => {\n    // Notification Settings\n    const recipients: Recipient[] = [];\n\n    notificationSettings.forEach(setting => {\n      if (setting.method && setting.recipients.length) {\n        recipients.push({\n          recipient_config_json: {\n            target: setting.recipients,\n          },\n          type: setting.method,\n        });\n      }\n    });\n\n    const shouldEnableForceScreenshot = contentType === 'chart' && !isReport;\n    const data: any = {\n      ...currentAlert,\n      type: isReport ? 'Report' : 'Alert',\n      force_screenshot: shouldEnableForceScreenshot || forceScreenshot,\n      validator_type: conditionNotNull ? 'not null' : 'operator',\n      validator_config_json: conditionNotNull\n        ? {}\n        : currentAlert?.validator_config_json,\n      chart: contentType === 'chart' ? currentAlert?.chart?.value : null,\n      dashboard:\n        contentType === 'dashboard' ? currentAlert?.dashboard?.value : null,\n      database: currentAlert?.database?.value,\n      owners: (currentAlert?.owners || []).map(\n        owner => (owner as MetaObject).value || owner.id,\n      ),\n      recipients,\n      report_format:\n        contentType === 'dashboard'\n          ? DEFAULT_NOTIFICATION_FORMAT\n          : reportFormat || DEFAULT_NOTIFICATION_FORMAT,\n    };\n\n    if (data.recipients && !data.recipients.length) {\n      delete data.recipients;\n    }\n\n    data.context_markdown = 'string';\n\n    if (isEditMode) {\n      // Edit\n      if (currentAlert?.id) {\n        const update_id = currentAlert.id;\n\n        delete data.id;\n        delete data.created_by;\n        delete data.last_eval_dttm;\n        delete data.last_state;\n        delete data.last_value;\n        delete data.last_value_row_json;\n\n        updateResource(update_id, data).then(response => {\n          if (!response) {\n            return;\n          }\n\n          addSuccessToast(t('%s updated', data.type));\n\n          if (onAdd) {\n            onAdd();\n          }\n\n          hide();\n        });\n      }\n    } else if (currentAlert) {\n      // Create\n      createResource(data).then(response => {\n        if (!response) {\n          return;\n        }\n\n        addSuccessToast(t('%s updated', data.type));\n\n        if (onAdd) {\n          onAdd(response);\n        }\n\n        hide();\n      });\n    }\n  };\n\n  // Fetch data to populate form dropdowns\n  const loadOwnerOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/report/related/created_by?q=${query}`,\n        }).then(response => ({\n          data: response.json.result.map(\n            (item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            }),\n          ),\n          totalCount: response.json.count,\n        }));\n      },\n    [],\n  );\n\n  const getSourceData = useCallback(\n    (db?: MetaObject) => {\n      const database = db || currentAlert?.database;\n\n      if (!database || database.label) {\n        return null;\n      }\n\n      let result;\n\n      // Cycle through source options to find the selected option\n      sourceOptions.forEach(source => {\n        if (source.value === database.value || source.value === database.id) {\n          result = source;\n        }\n      });\n\n      return result;\n    },\n    [currentAlert?.database, sourceOptions],\n  );\n\n  // Updating alert/report state\n  const updateAlertState = (name: string, value: any) => {\n    setCurrentAlert(currentAlertData => ({\n      ...currentAlertData,\n      [name]: value,\n    }));\n  };\n\n  const loadSourceOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/report/related/database?q=${query}`,\n        }).then(response => {\n          const list = response.json.result.map(\n            (item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            }),\n          );\n          setSourceOptions(list);\n          return { data: list, totalCount: response.json.count };\n        });\n      },\n    [],\n  );\n\n  const databaseLabel = currentAlert?.database && !currentAlert.database.label;\n  useEffect(() => {\n    // Find source if current alert has one set\n    if (databaseLabel) {\n      updateAlertState('database', getSourceData());\n    }\n  }, [databaseLabel, getSourceData]);\n\n  const loadDashboardOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode_uri({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/report/related/dashboard?q=${query}`,\n        }).then(response => {\n          const list = response.json.result.map(\n            (item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            }),\n          );\n          setDashboardOptions(list);\n          return { data: list, totalCount: response.json.count };\n        });\n      },\n    [],\n  );\n\n  const getDashboardData = (db?: MetaObject) => {\n    const dashboard = db || currentAlert?.dashboard;\n\n    if (!dashboard || dashboard.label) {\n      return null;\n    }\n\n    let result;\n\n    // Cycle through dashboard options to find the selected option\n    dashboardOptions.forEach(dash => {\n      if (dash.value === dashboard.value || dash.value === dashboard.id) {\n        result = dash;\n      }\n    });\n\n    return result;\n  };\n\n  const getChartData = useCallback(\n    (chartData?: MetaObject) => {\n      const chart = chartData || currentAlert?.chart;\n\n      if (!chart || chart.label) {\n        return null;\n      }\n\n      let result;\n\n      // Cycle through chart options to find the selected option\n      chartOptions.forEach(slice => {\n        if (slice.value === chart.value || slice.value === chart.id) {\n          result = slice;\n        }\n      });\n\n      return result;\n    },\n    [chartOptions, currentAlert?.chart],\n  );\n\n  const noChartLabel = currentAlert?.chart && !currentAlert?.chart.label;\n  useEffect(() => {\n    // Find source if current alert has one set\n    if (noChartLabel) {\n      updateAlertState('chart', getChartData());\n    }\n  }, [getChartData, noChartLabel]);\n\n  const loadChartOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode_uri({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/report/related/chart?q=${query}`,\n        }).then(response => {\n          const list = response.json.result.map(\n            (item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            }),\n          );\n\n          setChartOptions(list);\n          return { data: list, totalCount: response.json.count };\n        });\n      },\n    [],\n  );\n\n  const getChartVisualizationType = (chart: SelectValue) =>\n    SupersetClient.get({\n      endpoint: `/api/v1/chart/${chart.value}`,\n    }).then(response => setChartVizType(response.json.result.viz_type));\n\n  // Handle input/textarea updates\n  const onTextChange = (\n    event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\n  ) => {\n    const { target } = event;\n\n    updateAlertState(target.name, target.value);\n  };\n\n  const onTimeoutVerifyChange = (\n    event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\n  ) => {\n    const { target } = event;\n    const value = +target.value;\n\n    // Need to make sure grace period is not lower than TIMEOUT_MIN\n    if (value === 0) {\n      updateAlertState(target.name, null);\n    } else {\n      updateAlertState(\n        target.name,\n        value ? Math.max(value, TIMEOUT_MIN) : value,\n      );\n    }\n  };\n\n  const onSQLChange = (value: string) => {\n    updateAlertState('sql', value || '');\n  };\n\n  const onOwnersChange = (value: Array<SelectValue>) => {\n    updateAlertState('owners', value || []);\n  };\n\n  const onSourceChange = (value: Array<SelectValue>) => {\n    updateAlertState('database', value || []);\n  };\n\n  const onDashboardChange = (dashboard: SelectValue) => {\n    updateAlertState('dashboard', dashboard || undefined);\n    updateAlertState('chart', null);\n  };\n\n  const onChartChange = (chart: SelectValue) => {\n    getChartVisualizationType(chart);\n    updateAlertState('chart', chart || undefined);\n    updateAlertState('dashboard', null);\n  };\n\n  const onActiveSwitch = (checked: boolean) => {\n    updateAlertState('active', checked);\n  };\n\n  const onConditionChange = (op: Operator) => {\n    setConditionNotNull(op === 'not null');\n\n    const config = {\n      op,\n      threshold: currentAlert\n        ? currentAlert.validator_config_json?.threshold\n        : undefined,\n    };\n\n    updateAlertState('validator_config_json', config);\n  };\n\n  const onThresholdChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n\n    const config = {\n      op: currentAlert ? currentAlert.validator_config_json?.op : undefined,\n      threshold: target.value,\n    };\n\n    updateAlertState('validator_config_json', config);\n  };\n\n  const onLogRetentionChange = (retention: number) => {\n    updateAlertState('log_retention', retention);\n  };\n\n  const onTimezoneChange = (timezone: string) => {\n    updateAlertState('timezone', timezone);\n  };\n\n  const onContentTypeChange = (event: any) => {\n    const { target } = event;\n    // When switch content type, reset force_screenshot to false\n    setForceScreenshot(false);\n    // Gives time to close the select before changing the type\n    setTimeout(() => setContentType(target.value), 200);\n  };\n\n  const onFormatChange = (event: any) => {\n    const { target } = event;\n\n    setReportFormat(target.value);\n  };\n\n  const onForceScreenshotChange = (event: any) => {\n    setForceScreenshot(event.target.checked);\n  };\n\n  // Make sure notification settings has the required info\n  const checkNotificationSettings = () => {\n    if (!notificationSettings.length) {\n      return false;\n    }\n\n    let hasInfo = false;\n\n    notificationSettings.forEach(setting => {\n      if (!!setting.method && setting.recipients?.length) {\n        hasInfo = true;\n      }\n    });\n\n    return hasInfo;\n  };\n\n  const validate = () => {\n    if (\n      currentAlert?.name?.length &&\n      currentAlert?.owners?.length &&\n      currentAlert?.crontab?.length &&\n      currentAlert?.working_timeout !== undefined &&\n      ((contentType === 'dashboard' && !!currentAlert?.dashboard) ||\n        (contentType === 'chart' && !!currentAlert?.chart)) &&\n      checkNotificationSettings()\n    ) {\n      if (isReport) {\n        setDisableSave(false);\n      } else if (\n        !!currentAlert.database &&\n        currentAlert.sql?.length &&\n        (conditionNotNull || !!currentAlert.validator_config_json?.op) &&\n        (conditionNotNull ||\n          currentAlert.validator_config_json?.threshold !== undefined)\n      ) {\n        setDisableSave(false);\n      } else {\n        setDisableSave(true);\n      }\n    } else {\n      setDisableSave(true);\n    }\n  };\n\n  // Initialize\n  useEffect(() => {\n    if (\n      isEditMode &&\n      (!currentAlert?.id || alert?.id !== currentAlert.id || (isHidden && show))\n    ) {\n      if (alert?.id !== null && !loading && !fetchError) {\n        const id = alert.id || 0;\n        fetchResource(id);\n      }\n    } else if (\n      !isEditMode &&\n      (!currentAlert || currentAlert.id || (isHidden && show))\n    ) {\n      setCurrentAlert({\n        ...defaultAlert,\n        owners: currentUser\n          ? [\n              {\n                value: currentUser.userId,\n                label: `${currentUser.firstName} ${currentUser.lastName}`,\n              },\n            ]\n          : [],\n      });\n      setNotificationSettings([]);\n      setNotificationAddState('active');\n    }\n  }, [alert]);\n\n  useEffect(() => {\n    if (resource) {\n      // Add notification settings\n      const settings = (resource.recipients || []).map(setting => {\n        const config =\n          typeof setting.recipient_config_json === 'string'\n            ? JSON.parse(setting.recipient_config_json)\n            : {};\n        return {\n          method: setting.type,\n          // @ts-ignore: Type not assignable\n          recipients: config.target || setting.recipient_config_json,\n          options: allowedNotificationMethods,\n        };\n      });\n\n      setNotificationSettings(settings);\n      setNotificationAddState(\n        settings.length === allowedNotificationMethods.length\n          ? 'hidden'\n          : 'active',\n      );\n      setContentType(resource.chart ? 'chart' : 'dashboard');\n      setReportFormat(\n        resource.chart\n          ? resource.report_format || DEFAULT_NOTIFICATION_FORMAT\n          : DEFAULT_NOTIFICATION_FORMAT,\n      );\n      const validatorConfig =\n        typeof resource.validator_config_json === 'string'\n          ? JSON.parse(resource.validator_config_json)\n          : resource.validator_config_json;\n\n      setConditionNotNull(resource.validator_type === 'not null');\n\n      if (resource.chart) {\n        setChartVizType((resource.chart as ChartObject).viz_type);\n      }\n      setForceScreenshot(resource.force_screenshot);\n\n      setCurrentAlert({\n        ...resource,\n        chart: resource.chart\n          ? getChartData(resource.chart) || {\n              value: (resource.chart as ChartObject).id,\n              label: (resource.chart as ChartObject).slice_name,\n            }\n          : undefined,\n        dashboard: resource.dashboard\n          ? getDashboardData(resource.dashboard) || {\n              value: (resource.dashboard as DashboardObject).id,\n              label: (resource.dashboard as DashboardObject).dashboard_title,\n            }\n          : undefined,\n        database: resource.database\n          ? getSourceData(resource.database) || {\n              value: (resource.database as DatabaseObject).id,\n              label: (resource.database as DatabaseObject).database_name,\n            }\n          : undefined,\n        owners: (alert?.owners || []).map(owner => ({\n          value: (owner as MetaObject).value || owner.id,\n          label:\n            (owner as MetaObject).label ||\n            `${(owner as Owner).first_name} ${(owner as Owner).last_name}`,\n        })),\n        // @ts-ignore: Type not assignable\n        validator_config_json:\n          resource.validator_type === 'not null'\n            ? {\n                op: 'not null',\n              }\n            : validatorConfig,\n      });\n    }\n  }, [resource]);\n\n  // Validation\n  const currentAlertSafe = currentAlert || {};\n  useEffect(() => {\n    validate();\n  }, [\n    currentAlertSafe.name,\n    currentAlertSafe.owners,\n    currentAlertSafe.database,\n    currentAlertSafe.sql,\n    currentAlertSafe.validator_config_json,\n    currentAlertSafe.crontab,\n    currentAlertSafe.working_timeout,\n    currentAlertSafe.dashboard,\n    currentAlertSafe.chart,\n    contentType,\n    notificationSettings,\n    conditionNotNull,\n  ]);\n\n  // Show/hide\n  if (isHidden && show) {\n    setIsHidden(false);\n  }\n\n  return (\n    <StyledModal\n      className=\"no-content-padding\"\n      responsive\n      disablePrimaryButton={disableSave}\n      onHandledPrimaryAction={onSave}\n      onHide={hide}\n      primaryButtonName={\n        isEditMode ? TRANSLATIONS.SAVE_TEXT : TRANSLATIONS.ADD_TEXT\n      }\n      show={show}\n      width=\"100%\"\n      maxWidth=\"1450px\"\n      title={\n        <h4 data-test=\"alert-report-modal-title\">\n          {isEditMode ? (\n            <Icons.EditAlt css={StyledIcon} />\n          ) : (\n            <Icons.PlusLarge css={StyledIcon} />\n          )}\n          {isEditMode && isReport\n            ? TRANSLATIONS.EDIT_REPORT_TEXT\n            : isEditMode\n            ? TRANSLATIONS.EDIT_ALERT_TEXT\n            : isReport\n            ? TRANSLATIONS.ADD_REPORT_TEXT\n            : TRANSLATIONS.ADD_ALERT_TEXT}\n        </h4>\n      }\n    >\n      <StyledSectionContainer>\n        <div className=\"header-section\">\n          <StyledInputContainer>\n            <div className=\"control-label\">\n              {isReport\n                ? TRANSLATIONS.REPORT_NAME_TEXT\n                : TRANSLATIONS.ALERT_NAME_TEXT}\n              <span className=\"required\">*</span>\n            </div>\n            <div className=\"input-container\">\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={currentAlert ? currentAlert.name : ''}\n                placeholder={\n                  isReport\n                    ? TRANSLATIONS.REPORT_NAME_TEXT\n                    : TRANSLATIONS.ALERT_NAME_TEXT\n                }\n                onChange={onTextChange}\n                css={inputSpacer}\n              />\n            </div>\n          </StyledInputContainer>\n          <StyledInputContainer>\n            <div className=\"control-label\">\n              {TRANSLATIONS.OWNERS_TEXT}\n              <span className=\"required\">*</span>\n            </div>\n            <div data-test=\"owners-select\" className=\"input-container\">\n              <AsyncSelect\n                ariaLabel={TRANSLATIONS.OWNERS_TEXT}\n                allowClear\n                name=\"owners\"\n                mode=\"multiple\"\n                value={\n                  (currentAlert?.owners as {\n                    label: string;\n                    value: number;\n                  }[]) || []\n                }\n                options={loadOwnerOptions}\n                onChange={onOwnersChange}\n                css={inputSpacer}\n              />\n            </div>\n          </StyledInputContainer>\n          <StyledInputContainer>\n            <div className=\"control-label\">{TRANSLATIONS.DESCRIPTION_TEXT}</div>\n            <div className=\"input-container\">\n              <input\n                type=\"text\"\n                name=\"description\"\n                value={currentAlert ? currentAlert.description || '' : ''}\n                placeholder={TRANSLATIONS.DESCRIPTION_TEXT}\n                onChange={onTextChange}\n                css={inputSpacer}\n              />\n            </div>\n          </StyledInputContainer>\n          <StyledSwitchContainer>\n            <Switch\n              onChange={onActiveSwitch}\n              checked={currentAlert ? currentAlert.active : true}\n            />\n            <div className=\"switch-label\">{TRANSLATIONS.ACTIVE_TEXT}</div>\n          </StyledSwitchContainer>\n        </div>\n        <div className=\"column-section\">\n          {!isReport && (\n            <div className=\"column condition\">\n              <StyledSectionTitle>\n                <h4>{TRANSLATIONS.ALERT_CONDITION_TEXT}</h4>\n              </StyledSectionTitle>\n              <StyledInputContainer>\n                <div className=\"control-label\">\n                  {TRANSLATIONS.DATABASE_TEXT}\n                  <span className=\"required\">*</span>\n                </div>\n                <div className=\"input-container\">\n                  <AsyncSelect\n                    ariaLabel={TRANSLATIONS.DATABASE_TEXT}\n                    name=\"source\"\n                    value={\n                      currentAlert?.database?.label &&\n                      currentAlert?.database?.value\n                        ? {\n                            value: currentAlert.database.value,\n                            label: currentAlert.database.label,\n                          }\n                        : undefined\n                    }\n                    options={loadSourceOptions}\n                    onChange={onSourceChange}\n                  />\n                </div>\n              </StyledInputContainer>\n              <StyledInputContainer>\n                <div className=\"control-label\">\n                  {TRANSLATIONS.SQL_QUERY_TEXT}\n                  <span className=\"required\">*</span>\n                </div>\n                <TextAreaControl\n                  name=\"sql\"\n                  language=\"sql\"\n                  offerEditInModal={false}\n                  minLines={15}\n                  maxLines={15}\n                  onChange={onSQLChange}\n                  readOnly={false}\n                  initialValue={resource?.sql}\n                  key={currentAlert?.id}\n                />\n              </StyledInputContainer>\n              <div className=\"inline-container wrap\">\n                <StyledInputContainer>\n                  <div className=\"control-label\" css={inputSpacer}>\n                    {TRANSLATIONS.TRIGGER_ALERT_IF_TEXT}\n                    <span className=\"required\">*</span>\n                  </div>\n                  <div className=\"input-container\">\n                    <Select\n                      ariaLabel={TRANSLATIONS.CONDITION_TEXT}\n                      onChange={onConditionChange}\n                      placeholder=\"Condition\"\n                      value={\n                        currentAlert?.validator_config_json?.op || undefined\n                      }\n                      options={CONDITIONS}\n                      css={inputSpacer}\n                    />\n                  </div>\n                </StyledInputContainer>\n                <StyledInputContainer>\n                  <div className=\"control-label\">\n                    {TRANSLATIONS.VALUE_TEXT}{' '}\n                    <InfoTooltipWithTrigger\n                      tooltip={TRANSLATIONS.VALUE_TOOLTIP}\n                    />\n                    <span className=\"required\">*</span>\n                  </div>\n                  <div className=\"input-container\">\n                    <input\n                      type=\"number\"\n                      name=\"threshold\"\n                      disabled={conditionNotNull}\n                      value={\n                        currentAlert?.validator_config_json?.threshold !==\n                        undefined\n                          ? currentAlert.validator_config_json.threshold\n                          : ''\n                      }\n                      placeholder={TRANSLATIONS.VALUE_TEXT}\n                      onChange={onThresholdChange}\n                    />\n                  </div>\n                </StyledInputContainer>\n              </div>\n            </div>\n          )}\n          <div className=\"column schedule\">\n            <StyledSectionTitle>\n              <h4>\n                {isReport\n                  ? TRANSLATIONS.REPORT_SCHEDULE_TEXT\n                  : TRANSLATIONS.ALERT_CONDITION_SCHEDULE_TEXT}\n              </h4>\n              <span className=\"required\">*</span>\n            </StyledSectionTitle>\n            <AlertReportCronScheduler\n              value={currentAlert?.crontab || ALERT_REPORTS_DEFAULT_CRON_VALUE}\n              onChange={newVal => updateAlertState('crontab', newVal)}\n            />\n            <div className=\"control-label\">{TRANSLATIONS.TIMEZONE_TEXT}</div>\n            <div\n              className=\"input-container\"\n              css={(theme: SupersetTheme) => timezoneHeaderStyle(theme)}\n            >\n              <TimezoneSelector\n                onTimezoneChange={onTimezoneChange}\n                timezone={currentAlert?.timezone}\n                minWidth=\"100%\"\n              />\n            </div>\n            <StyledSectionTitle>\n              <h4>{TRANSLATIONS.SCHEDULE_SETTINGS_TEXT}</h4>\n            </StyledSectionTitle>\n            <StyledInputContainer>\n              <div className=\"control-label\">\n                {TRANSLATIONS.LOG_RETENTION_TEXT}\n                <span className=\"required\">*</span>\n              </div>\n              <div className=\"input-container\">\n                <Select\n                  ariaLabel={TRANSLATIONS.LOG_RETENTION_TEXT}\n                  placeholder={TRANSLATIONS.LOG_RETENTION_TEXT}\n                  onChange={onLogRetentionChange}\n                  value={\n                    typeof currentAlert?.log_retention === 'number'\n                      ? currentAlert?.log_retention\n                      : ALERT_REPORTS_DEFAULT_RETENTION\n                  }\n                  options={RETENTION_OPTIONS}\n                  sortComparator={propertyComparator('value')}\n                />\n              </div>\n            </StyledInputContainer>\n            <StyledInputContainer>\n              <div className=\"control-label\">\n                {TRANSLATIONS.WORKING_TIMEOUT_TEXT}\n                <span className=\"required\">*</span>\n              </div>\n              <div className=\"input-container\">\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  name=\"working_timeout\"\n                  value={currentAlert?.working_timeout || ''}\n                  placeholder={TRANSLATIONS.TIME_IN_SECONDS_TEXT}\n                  onChange={onTimeoutVerifyChange}\n                />\n                <span className=\"input-label\">{TRANSLATIONS.SECONDS_TEXT}</span>\n              </div>\n            </StyledInputContainer>\n            {!isReport && (\n              <StyledInputContainer>\n                <div className=\"control-label\">\n                  {TRANSLATIONS.GRACE_PERIOD_TEXT}\n                </div>\n                <div className=\"input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    name=\"grace_period\"\n                    value={currentAlert?.grace_period || ''}\n                    placeholder={TRANSLATIONS.TIME_IN_SECONDS_TEXT}\n                    onChange={onTimeoutVerifyChange}\n                  />\n                  <span className=\"input-label\">\n                    {TRANSLATIONS.SECONDS_TEXT}\n                  </span>\n                </div>\n              </StyledInputContainer>\n            )}\n          </div>\n          <div className=\"column message\">\n            <StyledSectionTitle>\n              <h4>{TRANSLATIONS.MESSAGE_CONTENT_TEXT}</h4>\n              <span className=\"required\">*</span>\n            </StyledSectionTitle>\n            <Radio.Group onChange={onContentTypeChange} value={contentType}>\n              <StyledRadio value=\"dashboard\">\n                {TRANSLATIONS.DASHBOARD_TEXT}\n              </StyledRadio>\n              <StyledRadio value=\"chart\">{TRANSLATIONS.CHART_TEXT}</StyledRadio>\n            </Radio.Group>\n            {contentType === 'chart' ? (\n              <AsyncSelect\n                ariaLabel={TRANSLATIONS.CHART_TEXT}\n                name=\"chart\"\n                value={\n                  currentAlert?.chart?.label && currentAlert?.chart?.value\n                    ? {\n                        value: currentAlert.chart.value,\n                        label: currentAlert.chart.label,\n                      }\n                    : undefined\n                }\n                options={loadChartOptions}\n                onChange={onChartChange}\n              />\n            ) : (\n              <AsyncSelect\n                ariaLabel={TRANSLATIONS.DASHBOARD_TEXT}\n                name=\"dashboard\"\n                value={\n                  currentAlert?.dashboard?.label &&\n                  currentAlert?.dashboard?.value\n                    ? {\n                        value: currentAlert.dashboard.value,\n                        label: currentAlert.dashboard.label,\n                      }\n                    : undefined\n                }\n                options={loadDashboardOptions}\n                onChange={onDashboardChange}\n              />\n            )}\n            {formatOptionEnabled && (\n              <>\n                <div className=\"inline-container\">\n                  <StyledRadioGroup\n                    onChange={onFormatChange}\n                    value={reportFormat}\n                  >\n                    <StyledRadio value=\"PNG\">\n                      {TRANSLATIONS.SEND_AS_PNG_TEXT}\n                    </StyledRadio>\n                    <StyledRadio value=\"CSV\">\n                      {TRANSLATIONS.SEND_AS_CSV_TEXT}\n                    </StyledRadio>\n                    {TEXT_BASED_VISUALIZATION_TYPES.includes(chartVizType) && (\n                      <StyledRadio value=\"TEXT\">\n                        {TRANSLATIONS.SEND_AS_TEXT}\n                      </StyledRadio>\n                    )}\n                  </StyledRadioGroup>\n                </div>\n              </>\n            )}\n            {(isReport || contentType === 'dashboard') && (\n              <div className=\"inline-container\">\n                <StyledCheckbox\n                  data-test=\"bypass-cache\"\n                  className=\"checkbox\"\n                  checked={forceScreenshot}\n                  onChange={onForceScreenshotChange}\n                >\n                  {TRANSLATIONS.IGNORE_CACHE_TEXT}\n                </StyledCheckbox>\n              </div>\n            )}\n            <StyledSectionTitle>\n              <h4>{TRANSLATIONS.NOTIFICATION_METHOD_TEXT}</h4>\n              <span className=\"required\">*</span>\n            </StyledSectionTitle>\n            {notificationSettings.map((notificationSetting, i) => (\n              <StyledNotificationMethodWrapper>\n                <NotificationMethod\n                  setting={notificationSetting}\n                  index={i}\n                  key={`NotificationMethod-${i}`}\n                  onUpdate={updateNotificationSetting}\n                  onRemove={removeNotificationSetting}\n                />\n              </StyledNotificationMethodWrapper>\n            ))}\n            <NotificationMethodAdd\n              data-test=\"notification-add\"\n              status={notificationAddState}\n              onClick={onNotificationAdd}\n            />\n          </div>\n        </div>\n      </StyledSectionContainer>\n    </StyledModal>\n  );\n};\n\nexport default withToasts(AlertReportModal);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  t,\n  SupersetClient,\n  makeApi,\n  styled,\n  getExtensionsRegistry,\n} from '@superset-ui/core';\nimport moment from 'moment';\nimport ActionsBar, { ActionProps } from 'src/components/ListView/ActionsBar';\nimport FacePile from 'src/components/FacePile';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ListView, {\n  FilterOperator,\n  Filters,\n  ListViewProps,\n} from 'src/components/ListView';\nimport SubMenu, { SubMenuProps } from 'src/features/home/SubMenu';\nimport { Switch } from 'src/components/Switch';\nimport { DATETIME_WITH_TIME_ZONE } from 'src/constants';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport AlertStatusIcon from 'src/features/alerts/components/AlertStatusIcon';\nimport RecipientIcon from 'src/features/alerts/components/RecipientIcon';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport DeleteModal from 'src/components/DeleteModal';\nimport LastUpdated from 'src/components/LastUpdated';\nimport {\n  useListViewResource,\n  useSingleViewResource,\n} from 'src/views/CRUD/hooks';\nimport { createErrorHandler, createFetchRelated } from 'src/views/CRUD/utils';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport Owner from 'src/types/Owner';\nimport AlertReportModal from 'src/features/alerts/AlertReportModal';\nimport { AlertObject, AlertState } from 'src/features/alerts/types';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst PAGE_SIZE = 25;\n\nconst AlertStateLabel: Record<AlertState, string> = {\n  [AlertState.Success]: t('Success'),\n  [AlertState.Working]: t('Working'),\n  [AlertState.Error]: t('Error'),\n  [AlertState.Noop]: t('Not triggered'),\n  [AlertState.Grace]: t('On Grace'),\n};\n\ninterface AlertListProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  isReportEnabled: boolean;\n  user: {\n    userId: string | number;\n    firstName: string;\n    lastName: string;\n  };\n}\nconst deleteAlerts = makeApi<number[], { message: string }>({\n  requestType: 'rison',\n  method: 'DELETE',\n  endpoint: '/api/v1/report/',\n});\n\nconst RefreshContainer = styled.div`\n  width: 100%;\n  padding: 0 ${({ theme }) => theme.gridUnit * 4}px\n    ${({ theme }) => theme.gridUnit * 3}px;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n`;\n\nconst StyledHeaderWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  > *:first-child {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst HeaderExtension = extensionsRegistry.get('alertsreports.header.icon');\n\nfunction AlertList({\n  addDangerToast,\n  isReportEnabled = false,\n  user,\n  addSuccessToast,\n}: AlertListProps) {\n  const title = isReportEnabled ? t('report') : t('alert');\n  const titlePlural = isReportEnabled ? t('reports') : t('alerts');\n  const pathName = isReportEnabled ? 'Reports' : 'Alerts';\n  const initialFilters = useMemo(\n    () => [\n      {\n        id: 'type',\n        operator: FilterOperator.equals,\n        value: isReportEnabled ? 'Report' : 'Alert',\n      },\n    ],\n    [isReportEnabled],\n  );\n  const {\n    state: {\n      loading,\n      resourceCount: alertsCount,\n      resourceCollection: alerts,\n      bulkSelectEnabled,\n      lastFetched,\n    },\n    hasPerm,\n    fetchData,\n    setResourceCollection,\n    refreshData,\n    toggleBulkSelect,\n  } = useListViewResource<AlertObject>(\n    'report',\n    t('reports'),\n    addDangerToast,\n    true,\n    undefined,\n    initialFilters,\n  );\n\n  const { updateResource } = useSingleViewResource<Partial<AlertObject>>(\n    'report',\n    t('reports'),\n    addDangerToast,\n  );\n\n  const [alertModalOpen, setAlertModalOpen] = useState<boolean>(false);\n  const [currentAlert, setCurrentAlert] = useState<Partial<AlertObject> | null>(\n    null,\n  );\n  const [currentAlertDeleting, setCurrentAlertDeleting] =\n    useState<AlertObject | null>(null);\n\n  // Actions\n  function handleAlertEdit(alert: AlertObject | null) {\n    setCurrentAlert(alert);\n    setAlertModalOpen(true);\n  }\n\n  const generateKey = () => `${new Date().getTime()}`;\n\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canCreate = hasPerm('can_write');\n\n  useEffect(() => {\n    if (bulkSelectEnabled && canDelete) {\n      toggleBulkSelect();\n    }\n  }, [isReportEnabled]);\n\n  const handleAlertDelete = ({ id, name }: AlertObject) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/report/${id}`,\n    }).then(\n      () => {\n        refreshData();\n        setCurrentAlertDeleting(null);\n        addSuccessToast(t('Deleted: %s', name));\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(t('There was an issue deleting %s: %s', name, errMsg)),\n      ),\n    );\n  };\n\n  const handleBulkAlertDelete = async (alertsToDelete: AlertObject[]) => {\n    try {\n      const { message } = await deleteAlerts(\n        alertsToDelete.map(({ id }) => id),\n      );\n      refreshData();\n      addSuccessToast(message);\n    } catch (e) {\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t(\n            'There was an issue deleting the selected %s: %s',\n            titlePlural,\n            errMsg,\n          ),\n        ),\n      )(e);\n    }\n  };\n\n  const initialSort = [{ id: 'name', desc: true }];\n\n  const toggleActive = useCallback(\n    (data: AlertObject, checked: boolean) => {\n      if (data?.id) {\n        const update_id = data.id;\n        const original = [...alerts];\n\n        setResourceCollection(\n          original.map(alert => {\n            if (alert?.id === data.id) {\n              return {\n                ...alert,\n                active: checked,\n              };\n            }\n\n            return alert;\n          }),\n        );\n\n        updateResource(update_id, { active: checked }, false, false)\n          .then()\n          .catch(() => setResourceCollection(original));\n      }\n    },\n    [alerts, setResourceCollection, updateResource],\n  );\n\n  const columns = useMemo(\n    () => [\n      {\n        Cell: ({\n          row: {\n            original: { last_state: lastState },\n          },\n        }: any) => (\n          <AlertStatusIcon\n            state={lastState}\n            isReportEnabled={isReportEnabled}\n          />\n        ),\n        accessor: 'last_state',\n        size: 'xs',\n        disableSortBy: true,\n      },\n      {\n        Cell: ({\n          row: {\n            original: { last_eval_dttm: lastEvalDttm },\n          },\n        }: any) =>\n          lastEvalDttm\n            ? moment.utc(lastEvalDttm).local().format(DATETIME_WITH_TIME_ZONE)\n            : '',\n        accessor: 'last_eval_dttm',\n        Header: t('Last run'),\n        size: 'lg',\n      },\n      {\n        accessor: 'name',\n        Header: t('Name'),\n        size: 'xl',\n      },\n      {\n        Header: t('Schedule'),\n        accessor: 'crontab_humanized',\n        size: 'xl',\n        Cell: ({\n          row: {\n            original: { crontab_humanized = '', timezone },\n          },\n        }: any) => (\n          <Tooltip\n            title={`${crontab_humanized} (${timezone})`}\n            placement=\"topLeft\"\n          >\n            <span>{`${crontab_humanized} (${timezone})`}</span>\n          </Tooltip>\n        ),\n      },\n      {\n        Cell: ({\n          row: {\n            original: { recipients },\n          },\n        }: any) =>\n          recipients.map((r: any) => (\n            <RecipientIcon key={r.id} type={r.type} />\n          )),\n        accessor: 'recipients',\n        Header: t('Notification method'),\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { created_by },\n          },\n        }: any) =>\n          created_by ? `${created_by.first_name} ${created_by.last_name}` : '',\n        Header: t('Created by'),\n        id: 'created_by',\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { owners = [] },\n          },\n        }: any) => <FacePile users={owners} />,\n        Header: t('Owners'),\n        id: 'owners',\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { changed_on_delta_humanized: changedOn },\n          },\n        }: any) => <span className=\"no-wrap\">{changedOn}</span>,\n        Header: t('Modified'),\n        accessor: 'changed_on_delta_humanized',\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          return (\n            <Switch\n              disabled={!allowEdit}\n              data-test=\"toggle-active\"\n              checked={original.active}\n              onClick={(checked: boolean) => toggleActive(original, checked)}\n              size=\"small\"\n            />\n          );\n        },\n        Header: t('Active'),\n        accessor: 'active',\n        id: 'active',\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const history = useHistory();\n          const handleEdit = () => handleAlertEdit(original);\n          const handleDelete = () => setCurrentAlertDeleting(original);\n          const handleGotoExecutionLog = () =>\n            history.push(`/${original.type.toLowerCase()}/${original.id}/log`);\n\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          const actions = [\n            canEdit\n              ? {\n                  label: 'execution-log-action',\n                  tooltip: t('Execution log'),\n                  placement: 'bottom',\n                  icon: 'Note',\n                  onClick: handleGotoExecutionLog,\n                }\n              : null,\n            canEdit\n              ? {\n                  label: allowEdit ? 'edit-action' : 'preview-action',\n                  tooltip: allowEdit ? t('Edit') : t('View'),\n                  placement: 'bottom',\n                  icon: allowEdit ? 'Edit' : 'Binoculars',\n                  onClick: handleEdit,\n                }\n              : null,\n            allowEdit && canDelete\n              ? {\n                  label: 'delete-action',\n                  tooltip: t('Delete'),\n                  placement: 'bottom',\n                  icon: 'Trash',\n                  onClick: handleDelete,\n                }\n              : null,\n          ].filter(item => item !== null);\n\n          return <ActionsBar actions={actions as ActionProps[]} />;\n        },\n        Header: t('Actions'),\n        id: 'actions',\n        hidden: !canEdit && !canDelete,\n        disableSortBy: true,\n        size: 'xl',\n      },\n    ],\n    [canDelete, canEdit, isReportEnabled, toggleActive],\n  );\n\n  const subMenuButtons: SubMenuProps['buttons'] = [];\n\n  if (canCreate) {\n    subMenuButtons.push({\n      name: (\n        <>\n          <i className=\"fa fa-plus\" /> {title}\n        </>\n      ),\n      buttonStyle: 'primary',\n      onClick: () => {\n        handleAlertEdit(null);\n      },\n    });\n  }\n  if (canDelete) {\n    subMenuButtons.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary',\n      'data-test': 'bulk-select-toggle',\n    });\n  }\n\n  const emptyState = {\n    title: t('No %s yet', titlePlural),\n    image: 'filter-results.svg',\n    buttonAction: () => handleAlertEdit(null),\n    buttonText: canCreate ? (\n      <>\n        <i className=\"fa fa-plus\" /> {title}{' '}\n      </>\n    ) : null,\n  };\n\n  const filters: Filters = useMemo(\n    () => [\n      {\n        Header: t('Owner'),\n        key: 'owner',\n        id: 'owners',\n        input: 'select',\n        operator: FilterOperator.relationManyMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'report',\n          'owners',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching owners values: %s', errMsg),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Created by'),\n        key: 'created_by',\n        id: 'created_by',\n        input: 'select',\n        operator: FilterOperator.relationOneMany,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchRelated(\n          'report',\n          'created_by',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching created by values: %s', errMsg),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Status'),\n        key: 'status',\n        id: 'last_state',\n        input: 'select',\n        operator: FilterOperator.equals,\n        unfilteredLabel: 'Any',\n        selects: [\n          {\n            label: AlertStateLabel[AlertState.Success],\n            value: AlertState.Success,\n          },\n          {\n            label: AlertStateLabel[AlertState.Working],\n            value: AlertState.Working,\n          },\n          { label: AlertStateLabel[AlertState.Error], value: AlertState.Error },\n          { label: AlertStateLabel[AlertState.Noop], value: AlertState.Noop },\n          { label: AlertStateLabel[AlertState.Grace], value: AlertState.Grace },\n        ],\n      },\n      {\n        Header: t('Search'),\n        key: 'search',\n        id: 'name',\n        input: 'search',\n        operator: FilterOperator.contains,\n      },\n    ],\n    [],\n  );\n\n  const header = HeaderExtension ? (\n    <StyledHeaderWithIcon>\n      <div>{t('Alerts & reports')}</div>\n      <HeaderExtension />\n    </StyledHeaderWithIcon>\n  ) : (\n    t('Alerts & reports')\n  );\n\n  return (\n    <>\n      <SubMenu\n        activeChild={pathName}\n        name={header}\n        tabs={[\n          {\n            name: 'Alerts',\n            label: t('Alerts'),\n            url: '/alert/list/',\n            usesRouter: true,\n            'data-test': 'alert-list',\n          },\n          {\n            name: 'Reports',\n            label: t('Reports'),\n            url: '/report/list/',\n            usesRouter: true,\n            'data-test': 'report-list',\n          },\n        ]}\n        buttons={subMenuButtons}\n      >\n        <RefreshContainer>\n          <LastUpdated updatedAt={lastFetched} update={() => refreshData()} />\n        </RefreshContainer>\n      </SubMenu>\n      <AlertReportModal\n        alert={currentAlert}\n        addDangerToast={addDangerToast}\n        layer={currentAlert}\n        onHide={() => {\n          setAlertModalOpen(false);\n          setCurrentAlert(null);\n          refreshData();\n        }}\n        show={alertModalOpen}\n        isReport={isReportEnabled}\n        key={currentAlert?.id || generateKey()}\n      />\n      {currentAlertDeleting && (\n        <DeleteModal\n          description={t(\n            'This action will permanently delete %s.',\n            currentAlertDeleting.name,\n          )}\n          onConfirm={() => {\n            if (currentAlertDeleting) {\n              handleAlertDelete(currentAlertDeleting);\n            }\n          }}\n          onHide={() => setCurrentAlertDeleting(null)}\n          open\n          title={t('Delete %s?', title)}\n        />\n      )}\n      <ConfirmStatusChange\n        title={t('Please confirm')}\n        description={t(\n          'Are you sure you want to delete the selected %s?',\n          titlePlural,\n        )}\n        onConfirm={handleBulkAlertDelete}\n      >\n        {confirmDelete => {\n          const bulkActions: ListViewProps['bulkActions'] = canDelete\n            ? [\n                {\n                  key: 'delete',\n                  name: t('Delete'),\n                  onSelect: confirmDelete,\n                  type: 'danger',\n                },\n              ]\n            : [];\n          return (\n            <ListView<AlertObject>\n              className=\"alerts-list-view\"\n              columns={columns}\n              count={alertsCount}\n              data={alerts}\n              emptyState={emptyState}\n              fetchData={fetchData}\n              filters={filters}\n              initialSort={initialSort}\n              loading={loading}\n              bulkActions={bulkActions}\n              bulkSelectEnabled={bulkSelectEnabled}\n              disableBulkSelect={toggleBulkSelect}\n              pageSize={PAGE_SIZE}\n            />\n          );\n        }}\n      </ConfirmStatusChange>\n    </>\n  );\n}\n\nexport default withToasts(AlertList);\n"],"names":["LOCALE","everyText","t","emptyMonths","emptyMonthDays","emptyMonthDaysShort","emptyWeekDays","emptyWeekDaysShort","emptyHours","emptyMinutes","emptyMinutesForHourPeriod","yearOption","monthOption","weekOption","dayOption","hourOption","minuteOption","rebootOption","prefixPeriod","prefixMonths","prefixMonthDays","prefixWeekDays","prefixWeekDaysForMonthAndYearPeriod","prefixHours","prefixMinutes","prefixMinutesForHourPeriod","suffixMinutesForHourPeriod","errorInvalidCron","clearButtonText","weekDays","months","altWeekDays","altMonths","CronPicker","styled","props","getPopupContainer","trigger","parentElement","locale","theme","gridUnit","colors","grayscale","light4","StyledActions","primary","base","ActionWrapper","ActionsBar","actions","className","map","action","index","ActionIcon","Icons","icon","tooltip","id","label","title","placement","key","role","tabIndex","onClick","StyledSwitch","BaseSwitch","Switch","DEFAULT_TIMEZONE","MIN_SELECT_WIDTH","offsetsToName","currentDate","moment","JANUARY","JULY","getOffsetKey","name","tz","utcOffset","toString","getTimezoneName","offsets","isDST","ALL_ZONES","country","flat","TIMEZONES","forEach","zone","find","option","push","TIMEZONE_OPTIONS","format","value","timezoneName","TIMEZONE_OPTIONS_SORT_COMPARATOR","a","b","TimezoneSelector","onTimezoneChange","timezone","minWidth","validTimezone","useMemo","matchTimezoneToOptions","useEffect","ariaLabel","css","onChange","options","sortComparator","sort","getStatusColor","status","isReportEnabled","AlertState","error","success","alert","AlertStatusIcon","state","useTheme","lastStateConfig","Icon","iconColor","RecipientIconName","StyledIcon","light1","RecipientIcon","type","recipientIconConfig","Tooltip","calendar","lastDay","sameDay","nextDay","lastWeek","nextWeek","sameElse","TextStyles","Refresh","updatedAt","update","timeSince","setTimeSince","useState","interval","setInterval","clearInterval","isValid","AlertReportCronScheduler","inputRef","useRef","scheduleFormat","setScheduleFormat","handleRadioButtonChange","useCallback","e","target","customSetValue","newValue","current","setValue","handleBlur","event","handlePressEnter","input","onError","Radio","clearButton","disabled","displayError","StyledInputContainer","Input","ref","style","borderColor","placeholder","onBlur","onPressEnter","StyledNotificationMethod","NotificationMethod","setting","onUpdate","onRemove","method","recipients","recipientValue","setRecipientValue","updatedSetting","undefined","TEXT_BASED_VISUALIZATION_TYPES","DEFAULT_NOTIFICATION_METHODS","DEFAULT_NOTIFICATION_FORMAT","CONDITIONS","RETENTION_OPTIONS","StyledModal","Modal","StyledSectionContainer","light2","StyledSectionTitle","StyledSwitchContainer","typography","sizes","s","StyledRadio","StyledRadioGroup","StyledCheckbox","AntdCheckbox","StyledNotificationAddButton","dark1","StyledNotificationMethodWrapper","inputSpacer","TRANSLATIONS","ADD_NOTIFICATION_METHOD_TEXT","ADD_DELIVERY_METHOD_TEXT","SAVE_TEXT","ADD_TEXT","EDIT_REPORT_TEXT","EDIT_ALERT_TEXT","ADD_REPORT_TEXT","ADD_ALERT_TEXT","REPORT_NAME_TEXT","ALERT_NAME_TEXT","OWNERS_TEXT","DESCRIPTION_TEXT","ACTIVE_TEXT","ALERT_CONDITION_TEXT","DATABASE_TEXT","SQL_QUERY_TEXT","TRIGGER_ALERT_IF_TEXT","CONDITION_TEXT","VALUE_TEXT","VALUE_TOOLTIP","REPORT_SCHEDULE_TEXT","ALERT_CONDITION_SCHEDULE_TEXT","TIMEZONE_TEXT","SCHEDULE_SETTINGS_TEXT","LOG_RETENTION_TEXT","WORKING_TIMEOUT_TEXT","TIME_IN_SECONDS_TEXT","SECONDS_TEXT","GRACE_PERIOD_TEXT","MESSAGE_CONTENT_TEXT","DASHBOARD_TEXT","CHART_TEXT","SEND_AS_PNG_TEXT","SEND_AS_CSV_TEXT","SEND_AS_TEXT","IGNORE_CACHE_TEXT","NOTIFICATION_METHOD_TEXT","NotificationMethodAdd","withToasts","addDangerToast","onAdd","onHide","show","isReport","addSuccessToast","currentUser","useSelector","user","conf","useCommonConf","allowedNotificationMethods","ALERT_REPORTS_NOTIFICATION_METHODS","disableSave","setDisableSave","currentAlert","setCurrentAlert","isHidden","setIsHidden","contentType","setContentType","reportFormat","setReportFormat","forceScreenshot","setForceScreenshot","conditionNotNull","setConditionNotNull","sourceOptions","setSourceOptions","dashboardOptions","setDashboardOptions","chartOptions","setChartOptions","chartVizType","setChartVizType","isEditMode","formatOptionEnabled","isFeatureEnabled","FeatureFlag","notificationAddState","setNotificationAddState","notificationSettings","setNotificationSettings","ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT","ALERT_REPORTS_DEFAULT_CRON_VALUE","ALERT_REPORTS_DEFAULT_RETENTION","common","defaultAlert","active","creation_method","crontab","log_retention","working_timeout","owners","sql","validator_config_json","validator_type","force_screenshot","grace_period","updateNotificationSetting","settings","slice","removeNotificationSetting","splice","loading","resource","fetchError","fetchResource","createResource","updateResource","clearError","useSingleViewResource","hide","loadOwnerOptions","page","pageSize","query","rison","filter","page_size","SupersetClient","endpoint","then","response","data","json","result","item","text","totalCount","count","getSourceData","db","database","source","updateAlertState","currentAlertData","loadSourceOptions","list","databaseLabel","loadDashboardOptions","getDashboardData","dashboard","dash","getChartData","chartData","chart","noChartLabel","loadChartOptions","onTextChange","onTimeoutVerifyChange","Math","max","userId","firstName","lastName","config","recipient_config_json","JSON","parse","length","report_format","validatorConfig","viz_type","slice_name","dashboard_title","database_name","owner","first_name","last_name","op","currentAlertSafe","hasInfo","checkNotificationSettings","threshold","responsive","disablePrimaryButton","onHandledPrimaryAction","shouldEnableForceScreenshot","context_markdown","update_id","created_by","last_eval_dttm","last_state","last_value","last_value_row_json","primaryButtonName","width","maxWidth","allowClear","mode","description","checked","TextAreaControl","language","offerEditInModal","minLines","maxLines","readOnly","initialValue","InfoTooltipWithTrigger","newVal","timezoneHeaderStyle","retention","propertyComparator","min","setTimeout","getChartVisualizationType","notificationSetting","i","extensionsRegistry","getExtensionsRegistry","AlertStateLabel","deleteAlerts","makeApi","requestType","RefreshContainer","light5","StyledHeaderWithIcon","HeaderExtension","get","titlePlural","pathName","initialFilters","operator","FilterOperator","resourceCount","alertsCount","resourceCollection","alerts","bulkSelectEnabled","lastFetched","hasPerm","fetchData","setResourceCollection","refreshData","toggleBulkSelect","useListViewResource","alertModalOpen","setAlertModalOpen","currentAlertDeleting","setCurrentAlertDeleting","handleAlertEdit","canEdit","canDelete","canCreate","initialSort","desc","toggleActive","original","catch","columns","Cell","row","lastState","accessor","size","disableSortBy","lastEvalDttm","local","DATETIME_WITH_TIME_ZONE","Header","crontab_humanized","r","FacePile","users","changed_on_delta_humanized","changedOn","allowEdit","o","isUserAdmin","history","useHistory","toLowerCase","hidden","subMenuButtons","buttonStyle","emptyState","image","buttonAction","buttonText","filters","unfilteredLabel","fetchSelects","createFetchRelated","createErrorHandler","errMsg","paginate","selects","header","SubMenu","activeChild","tabs","url","usesRouter","buttons","layer","Date","getTime","DeleteModal","onConfirm","handleAlertDelete","open","ConfirmStatusChange","async","alertsToDelete","message","confirmDelete","bulkActions","onSelect","ListView","disableBulkSelect"],"sourceRoot":""}