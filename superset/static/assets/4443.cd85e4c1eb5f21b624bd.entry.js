"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[4443],{18239:(e,t,r)=>{r.d(t,{Z:()=>Y});var a=r(37703),o=r(14890),n=r(52256),i=r(97381),s=r(5872),l=r.n(s),d=r(45697),c=r.n(d),u=r(67294),h=r(61988),p=r(51995),m=r(68492),g=r(91877),f=r(93185),v=r(9531),y=r(35932),b=r(38703),T=r(94301),S=r(57902),Z=r(3741),C=r(27600),E=r(23525),R=r(42190),D=r(18446),_=r.n(D),w=r(42933),x=r.n(w),F=r(88274),A=r(16355),P=r(11965);const O={annotationData:c().object,actions:c().object,chartId:c().number.isRequired,datasource:c().object,initialValues:c().object,formData:c().object.isRequired,labelColors:c().object,sharedLabelColors:c().object,height:c().number,width:c().number,setControlValue:c().func,vizType:c().string.isRequired,triggerRender:c().bool,chartAlert:c().string,chartStatus:c().string,queriesResponse:c().arrayOf(c().object),triggerQuery:c().bool,refreshOverlayVisible:c().bool,addFilter:c().func,setDataMask:c().func,onFilterMenuOpen:c().func,onFilterMenuClose:c().func,ownState:c().object,postTransformProps:c().func,source:c().oneOf(["dashboard","explore"])},$={},k={addFilter:()=>$,onFilterMenuOpen:()=>$,onFilterMenuClose:()=>$,initialValues:$,setControlValue(){},triggerRender:!1};class I extends u.Component{constructor(e){super(e),this.hasQueryResponseChange=!1,this.handleAddFilter=this.handleAddFilter.bind(this),this.handleRenderSuccess=this.handleRenderSuccess.bind(this),this.handleRenderFailure=this.handleRenderFailure.bind(this),this.handleSetControlValue=this.handleSetControlValue.bind(this),this.hooks={onAddFilter:this.handleAddFilter,onError:this.handleRenderFailure,setControlValue:this.handleSetControlValue,onFilterMenuOpen:this.props.onFilterMenuOpen,onFilterMenuClose:this.props.onFilterMenuClose,setDataMask:e=>{var t;null==(t=this.props.actions)||t.updateDataMask(this.props.chartId,e)}}}shouldComponentUpdate(e){var t,r;return!(!(e.queriesResponse&&["success","rendered"].indexOf(e.chartStatus)>-1)||null!=(t=e.queriesResponse)&&null!=(r=t[0])&&r.error||e.refreshOverlayVisible)&&(this.hasQueryResponseChange=e.queriesResponse!==this.props.queriesResponse,this.hasQueryResponseChange||!_()(e.datasource,this.props.datasource)||e.annotationData!==this.props.annotationData||e.ownState!==this.props.ownState||e.filterState!==this.props.filterState||e.height!==this.props.height||e.width!==this.props.width||e.triggerRender||e.labelColors!==this.props.labelColors||e.sharedLabelColors!==this.props.sharedLabelColors||e.formData.color_scheme!==this.props.formData.color_scheme||e.cacheBusterProp!==this.props.cacheBusterProp)}handleAddFilter(e,t,r=!0,a=!0){this.props.addFilter(e,t,r,a)}handleRenderSuccess(){const{actions:e,chartStatus:t,chartId:r,vizType:a}=this.props;["loading","rendered"].indexOf(t)<0&&e.chartRenderingSucceeded(r),this.hasQueryResponseChange&&e.logEvent(Z.aD,{slice_id:r,viz_type:a,start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:Z.Yd.getTimestamp()-this.renderStartTime})}handleRenderFailure(e,t){const{actions:r,chartId:a}=this.props;m.Z.warn(e),r.chartRenderingFailed(e.toString(),a,t?t.componentStack:null),this.hasQueryResponseChange&&r.logEvent(Z.aD,{slice_id:a,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:Z.Yd.getTimestamp()-this.renderStartTime})}handleSetControlValue(...e){const{setControlValue:t}=this.props;t&&t(...e)}render(){const{chartAlert:e,chartStatus:t,vizType:r,chartId:a,refreshOverlayVisible:o}=this.props;if(o||"loading"===t||e||null===t)return null;this.renderStartTime=Z.Yd.getTimestamp();const{width:n,height:i,datasource:s,annotationData:l,initialValues:d,ownState:c,filterState:u,formData:p,queriesResponse:m,postTransformProps:g}=this.props,f=x()(r),v="table"===r?`superset-chart-${f}`:f;let y;const b=(0,h.t)("No results were returned for this query"),S="explore"===this.props.source?(0,h.t)("Make sure that the controls are configured properly and the datasource contains data for the selected time range"):void 0,C="chart.svg";return y=n>300&&i>220?(0,P.tZ)(T.XJ,{title:b,description:S,image:C}):(0,P.tZ)(T.Tc,{title:b,image:C}),(0,P.tZ)(F.Z,{disableErrorBoundary:!0,key:`${a}`,id:`chart-id-${a}`,className:v,chartType:r,width:n,height:i,annotationData:l,datasource:s,initialValues:d,formData:p,ownState:c,filterState:u,hooks:this.hooks,behaviors:[A.cg.INTERACTIVE_CHART],queriesData:m,onRenderSuccess:this.handleRenderSuccess,onRenderFailure:this.handleRenderFailure,noResults:y,postTransformProps:g})}}I.propTypes=O,I.defaultProps=k;const U=I;var N=r(54804),M=r(72875);const q=({chartId:e,error:t,...r})=>{const{result:a}=(0,N.hb)(e),o=t&&{...t,extra:{...t.extra,owners:a}};return(0,P.tZ)(M.Z,l()({},r,{error:o}))},z={annotationData:c().object,actions:c().object,chartId:c().number.isRequired,datasource:c().object,dashboardId:c().number,initialValues:c().object,formData:c().object.isRequired,labelColors:c().object,sharedLabelColors:c().object,width:c().number,height:c().number,setControlValue:c().func,timeout:c().number,vizType:c().string.isRequired,triggerRender:c().bool,force:c().bool,isFiltersInitialized:c().bool,isDeactivatedViz:c().bool,chartAlert:c().string,chartStatus:c().string,chartStackTrace:c().string,queriesResponse:c().arrayOf(c().object),triggerQuery:c().bool,refreshOverlayVisible:c().bool,errorMessage:c().node,addFilter:c().func,onQuery:c().func,onFilterMenuOpen:c().func,onFilterMenuClose:c().func,ownState:c().object,postTransformProps:c().func,datasetsStatus:c().oneOf(["loading","error","complete"])},L={},j=(0,h.t)("The dataset associated with this chart no longer exists"),V={addFilter:()=>L,onFilterMenuOpen:()=>L,onFilterMenuClose:()=>L,initialValues:L,setControlValue(){},triggerRender:!1,dashboardId:null,chartStackTrace:null,isDeactivatedViz:!1,force:!1},K=p.iK.div`
  min-height: ${e=>e.height}px;
  position: relative;

  .chart-tooltip {
    opacity: 0.75;
    font-size: ${({theme:e})=>e.typography.sizes.s}px;
  }

  .slice_container {
    height: ${e=>e.height}px;
  }
`,H=p.iK.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`,B=p.iK.div`
  font-family: ${({theme:e})=>e.typography.families.monospace};
  white-space: pre;
  word-break: break-word;
  overflow-x: auto;
  white-space: pre-wrap;
`;class G extends u.PureComponent{constructor(e){super(e),this.handleRenderContainerFailure=this.handleRenderContainerFailure.bind(this)}componentDidMount(){this.props.triggerQuery&&"UNDECIDED"!==this.props.filterboxMigrationState&&this.runQuery()}componentDidUpdate(){if(this.props.triggerQuery&&"UNDECIDED"!==this.props.filterboxMigrationState){if(this.props.isDeactivatedViz&&this.props.queriesResponse)return;this.runQuery()}}runQuery(){this.props.chartId>0&&(0,g.cr)(f.T.CLIENT_CACHE)?this.props.actions.getSavedChart(this.props.formData,this.props.force||(0,E.eY)(C.KD.force),this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState):this.props.actions.postChartFormData(this.props.formData,this.props.force||(0,E.eY)(C.KD.force),this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState)}handleRenderContainerFailure(e,t){const{actions:r,chartId:a}=this.props;m.Z.warn(e),r.chartRenderingFailed(e.toString(),a,t?t.componentStack:null),r.logEvent(Z.aD,{slice_id:a,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:Z.Yd.getTimestamp()-this.renderStartTime})}renderErrorMessage(e){var t;const{chartId:r,chartAlert:a,chartStackTrace:o,datasource:n,dashboardId:i,height:s,datasetsStatus:l}=this.props,d=null==e||null==(t=e.errors)?void 0:t[0],c=a||(null==e?void 0:e.message);return void 0!==a&&a!==j&&n===v.tw&&l!==R.ni.ERROR?(0,P.tZ)(K,{key:r,"data-ui-anchor":"chart",className:"chart-container",height:s},(0,P.tZ)(b.Z,null)):(0,P.tZ)(q,{key:r,chartId:r,error:d,subtitle:(0,P.tZ)(B,null,c),copyText:c,link:e?e.link:null,source:i?"dashboard":"explore",stackTrace:o})}render(){const{height:e,chartAlert:t,chartStatus:r,errorMessage:a,onQuery:o,refreshOverlayVisible:n,queriesResponse:i=[],isDeactivatedViz:s=!1,width:d}=this.props,c="loading"===r,u=n&&!a;if(this.renderContainerStartTime=Z.Yd.getTimestamp(),"failed"===r)return i.map((e=>this.renderErrorMessage(e)));if(a){const e=(0,g.cr)(f.T.ENABLE_EXPLORE_DRAG_AND_DROP)?(0,h.t)("Drag and drop values into highlighted field(s) on the left control panel and run query"):(0,h.t)("Select values in highlighted field(s) on the left control panel and run query");return(0,P.tZ)(T.XJ,{title:(0,h.t)("Add required control values to preview chart"),description:e,image:"chart.svg"})}return(0,P.tZ)(S.Z,{onError:this.handleRenderContainerFailure,showMessage:!1},(0,P.tZ)(K,{"data-ui-anchor":"chart",className:"chart-container",height:e,width:d},(0,P.tZ)("div",{className:"slice_container "+(u?" faded":"")},(0,P.tZ)(U,l()({},this.props,{source:this.props.dashboardId?"dashboard":"explore"}))),!c&&!t&&u&&(0,P.tZ)(H,null,(0,P.tZ)(y.Z,{onClick:o,buttonStyle:"primary"},(0,h.t)("Run query"))),c&&!s&&(0,P.tZ)(b.Z,null)))}}G.propTypes=z,G.defaultProps=V;const Q=G;var W=r(74599);const Y=(0,a.$j)(null,(function(e){return{actions:(0,o.DE)({...n,updateDataMask:W.eG,logEvent:i.logEvent},e)}}))(Q)},2275:(e,t,r)=>{r.d(t,{cP:()=>l,$6:()=>d,Rw:()=>c,Er:()=>u,DZ:()=>h,$X:()=>p,ck:()=>v});var a=r(45697),o=r.n(a),n=r(81255),i=r(713),s=r(79271);const l=o().shape({id:o().string.isRequired,type:o().oneOf(Object.values(n.ZP)).isRequired,parents:o().arrayOf(o().string),children:o().arrayOf(o().string),meta:o().shape({width:o().number,height:o().number,headerSize:o().oneOf(s.Z.map((e=>e.value))),background:o().oneOf(i.Z.map((e=>e.value))),chartId:o().number})}),d=o().shape({id:o().number.isRequired,chartAlert:o().string,chartStatus:o().string,chartUpdateEndTime:o().number,chartUpdateStartTime:o().number,latestQueryFormData:o().object,queryController:o().shape({abort:o().func}),queriesResponse:o().arrayOf(o().object),triggerQuery:o().bool,lastRendered:o().number}),c=o().shape({slice_id:o().number.isRequired,slice_url:o().string.isRequired,slice_name:o().string.isRequired,datasource:o().string,datasource_name:o().string,datasource_link:o().string,changed_on:o().number.isRequired,modified:o().string.isRequired,viz_type:o().string.isRequired,description:o().string,description_markeddown:o().string,owners:o().arrayOf(o().string)}),u=o().shape({chartId:o().number.isRequired,componentId:o().string.isRequired,filterName:o().string.isRequired,datasourceId:o().string.isRequired,directPathToFilter:o().arrayOf(o().string).isRequired,isDateFilter:o().bool.isRequired,isInstantFilter:o().bool.isRequired,columns:o().object,labels:o().object,scopes:o().object}),h=o().shape({sliceIds:o().arrayOf(o().number).isRequired,expandedSlices:o().object,editMode:o().bool,isPublished:o().bool.isRequired,colorNamespace:o().string,colorScheme:o().string,updatedColorScheme:o().bool,hasUnsavedChanges:o().bool}),p=o().shape({id:o().number.isRequired,metadata:o().object,slug:o().string,dash_edit_perm:o().bool.isRequired,dash_save_perm:o().bool.isRequired,common:o().object,userId:o().string.isRequired}),m=o().shape({value:o().oneOfType([o().number,o().string]).isRequired,label:o().string.isRequired}),g={value:o().oneOfType([o().number,o().string]).isRequired,label:o().string.isRequired,children:o().arrayOf(o().oneOfType([o().shape((f=()=>g,()=>f().apply(void 0,arguments))),m]))};var f;const v=o().oneOfType([o().shape(g),m])},88274:(e,t,r)=>{r.d(t,{Z:()=>_});var a=r(5872),o=r.n(a),n=r(67294),i=r(47859),s=r(86170),l=r(22222),d=r(80644),c=r(54085),u=r(74464),h=r(9330),p=r(89453),m=r(11965);function g(e){return e}const f=()=>null,v={id:"",className:"",preTransformProps:g,overrideTransformProps:void 0,postTransformProps:g,onRenderSuccess(){},onRenderFailure(){}},y=new h.Z;class b extends n.PureComponent{constructor(...e){super(...e),this.container=void 0,this.processChartProps=(0,l.P1)((e=>e.chartProps),(e=>e.preTransformProps),(e=>e.transformProps),(e=>e.postTransformProps),((e,t=g,r=g,a=g)=>a(r(t(e))))),this.createLoadableRenderer=(0,l.P1)((e=>e.chartType),(e=>e.overrideTransformProps),((e,t)=>{if(e){const r=(0,p.Z)({loader:{Chart:()=>(0,c.Z)().getAsPromise(e),transformProps:t?()=>Promise.resolve(t):()=>(0,u.Z)().getAsPromise(e)},loading:t=>this.renderLoading(t,e),render:this.renderChart});return r.preload(),r}return f})),this.renderChart=(e,t)=>{const{Chart:r,transformProps:a}=e,{chartProps:o,preTransformProps:n,postTransformProps:i}=t;return(0,m.tZ)(r,this.processChartProps({chartProps:o,preTransformProps:n,transformProps:a,postTransformProps:i}))},this.renderLoading=(e,t)=>{const{error:r}=e;return r?(0,m.tZ)("div",{className:"alert alert-warning",role:"alert"},(0,m.tZ)("strong",null,"ERROR")," ",(0,m.tZ)("code",null,'chartType="',t,'"')," —",r.toString()):null},this.setRef=e=>{this.container=e}}render(){const{id:e,className:t,preTransformProps:r,postTransformProps:a,chartProps:n=y,onRenderSuccess:i,onRenderFailure:s}=this.props,l=this.createLoadableRenderer(this.props);if(null===n)return null;const d={};return e&&(d.id=e),t&&(d.className=t),(0,m.tZ)("div",o()({},d,{ref:this.setRef}),(0,m.tZ)(l,{preTransformProps:r,postTransformProps:a,chartProps:n,onRenderSuccess:i,onRenderFailure:s}))}}b.defaultProps=v;const T={backgroundColor:"#000",color:"#fff",overflow:"auto",padding:32};var S=r(51995),Z=r(61988);const C={maxWidth:800},E=S.iK.div`
  ${({theme:e,width:t,height:r})=>m.iv`
    align-items: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    height: ${r}px;
    width: ${t}px;
    padding: ${4*e.gridUnit}px;

    & .no-results-title {
      font-size: ${e.typography.sizes.l}px;
      font-weight: ${e.typography.weights.bold};
      padding-bottom: ${2*e.gridUnit};
    }

    & .no-results-body {
      font-size: ${e.typography.sizes.m}px;
    }
  `}
`,R=({className:e,height:t,id:r,width:a})=>{const o="string"==typeof a||a>250,n=(0,Z.t)("No results were returned for this query. If you expected results to be returned, ensure any filters are configured properly and the datasource contains data for the selected time range.");return(0,m.tZ)(E,{height:t,width:a,className:e,id:r,title:o?void 0:n},(0,m.tZ)("div",{style:C},(0,m.tZ)("div",{className:"no-results-title"},(0,Z.t)("No Results")),o&&(0,m.tZ)("div",{className:"no-results-body"},n)))},D={FallbackComponent:function({componentStack:e,error:t,height:r,width:a}){return(0,m.tZ)("div",{style:{...T,height:r,width:a}},(0,m.tZ)("div",null,(0,m.tZ)("div",null,(0,m.tZ)("b",null,"Oops! An error occured!")),(0,m.tZ)("code",null,t?t.toString():"Unknown Error")),e&&(0,m.tZ)("div",null,(0,m.tZ)("b",null,"Stack Trace:"),(0,m.tZ)("code",null,e.split("\n").map((e=>(0,m.tZ)("div",{key:e},e))))))},height:400,width:"100%",enableNoResults:!0};class _ extends n.PureComponent{constructor(...e){super(...e),this.core=void 0,this.createChartProps=h.Z.createSelector(),this.parseDimension=(0,l.P1)((({width:e})=>e),(({height:e})=>e),((e,t)=>{const r=(0,d.Z)(e),a=(0,d.Z)(t),o={height:a.isDynamic?100*a.multiplier+"%":a.value,width:r.isDynamic?100*r.multiplier+"%":r.value};return{BoundingBox:r.isDynamic&&a.isDynamic&&1===r.multiplier&&1===a.multiplier?n.Fragment:({children:e})=>(0,m.tZ)("div",{style:o},e),heightInfo:a,widthInfo:r}})),this.setRef=e=>{this.core=e}}renderChart(e,t){const{id:r,className:a,chartType:n,preTransformProps:s,overrideTransformProps:l,postTransformProps:d,onRenderSuccess:c,onRenderFailure:u,disableErrorBoundary:h,FallbackComponent:p,onErrorBoundary:g,Wrapper:f,queriesData:v,enableNoResults:y,noResults:T,...S}=this.props,Z=this.createChartProps({...S,queriesData:v,height:t,width:e});let C;if(!y||v&&!v.every((({data:e})=>!e||Array.isArray(e)&&0===e.length))){const o=(0,m.tZ)(b,{ref:this.setRef,id:r,className:a,chartType:n,chartProps:Z,preTransformProps:s,overrideTransformProps:l,postTransformProps:d,onRenderSuccess:c,onRenderFailure:u});C=f?(0,m.tZ)(f,{width:e,height:t},o):o}else C=T||(0,m.tZ)(R,{id:r,className:a,height:t,width:e});return!0===h?C:(0,m.tZ)(i.ZP,{FallbackComponent:r=>(0,m.tZ)(p,o()({width:e,height:t},r)),onError:g},C)}render(){const{heightInfo:e,widthInfo:t,BoundingBox:r}=this.parseDimension(this.props);if(t.isDynamic||e.isDynamic){const{debounceTime:a}=this.props;return(0,m.tZ)(r,null,(0,m.tZ)(s.Z,{debounceTime:a},(({width:r,height:a})=>this.renderChart(t.isDynamic?Math.floor(r):t.value,e.isDynamic?Math.floor(a):e.value))))}return this.renderChart(t.value,e.value)}}_.defaultProps=D},89453:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(68356),o=r.n(a);const n={onRenderFailure(){},onRenderSuccess(){}};function i(e){const t=o().Map(e);class r extends t{componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){const{loaded:e,loading:t,error:r}=this.state,{onRenderFailure:a,onRenderSuccess:o}=this.props;t||(r?a(r):e&&Object.keys(e).length>0&&o())}}return r.defaultProps=void 0,r.defaultProps=n,r.preload=t.preload,r}},9330:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(22222),o=r(78036);const n=800,i=600;class s{constructor(e={}){this.annotationData=void 0,this.datasource=void 0,this.rawDatasource=void 0,this.initialValues=void 0,this.formData=void 0,this.rawFormData=void 0,this.height=void 0,this.hooks=void 0,this.ownState=void 0,this.filterState=void 0,this.queriesData=void 0,this.width=void 0,this.behaviors=void 0,this.appSection=void 0,this.isRefreshing=void 0,this.inputRef=void 0;const{annotationData:t={},datasource:r={},formData:a={},hooks:s={},ownState:l={},filterState:d={},initialValues:c={},queriesData:u=[],behaviors:h=[],width:p=n,height:m=i,appSection:g,isRefreshing:f,inputRef:v}=e;this.width=p,this.height=m,this.annotationData=t,this.datasource=(0,o.Z)(r),this.rawDatasource=r,this.formData=(0,o.Z)(a),this.rawFormData=a,this.hooks=s,this.initialValues=c,this.queriesData=u,this.ownState=l,this.filterState=d,this.behaviors=h,this.appSection=g,this.isRefreshing=f,this.inputRef=v}}s.createSelector=void 0,s.createSelector=function(){return(0,a.P1)((e=>e.annotationData),(e=>e.datasource),(e=>e.formData),(e=>e.height),(e=>e.hooks),(e=>e.initialValues),(e=>e.queriesData),(e=>e.width),(e=>e.ownState),(e=>e.filterState),(e=>e.behaviors),(e=>e.appSection),(e=>e.isRefreshing),(e=>e.inputRef),((e,t,r,a,o,n,i,l,d,c,u,h,p,m)=>new s({annotationData:e,datasource:t,formData:r,height:a,hooks:o,initialValues:n,queriesData:i,ownState:d,filterState:c,width:l,behaviors:u,appSection:h,isRefreshing:p,inputRef:m})))}},80644:(e,t,r)=>{r.d(t,{Z:()=>o});const a={isDynamic:!0,multiplier:1};function o(e){return"auto"===e||"100%"===e?a:"string"==typeof e&&e.length>0&&"%"===e[e.length-1]?{isDynamic:!0,multiplier:parseFloat(e)/100}:{isDynamic:!1,value:"number"==typeof e?e:parseFloat(e)}}},78036:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(68929),o=r.n(a),n=r(68630),i=r.n(n),s=r(67523),l=r.n(s);function d(e){if(null==e)return e;if(i()(e))return l()(e,((e,t)=>o()(t)));throw new Error(`Cannot convert input that is not a plain object: ${e}`)}},37488:(e,t,r)=>{r.d(t,{Z:()=>n}),r(67294);var a=r(11965),o={name:"1qbe4ct",styles:"& :nth-child(1):not(:nth-last-child(1)){border-top-right-radius:0;border-bottom-right-radius:0;border-right:0;margin-left:0;}& :not(:nth-child(1)):not(:nth-last-child(1)){border-radius:0;border-right:0;margin-left:0;}& :nth-last-child(1):not(:nth-child(1)){border-top-left-radius:0;border-bottom-left-radius:0;margin-left:0;}"};function n(e){const{className:t,children:r}=e;return(0,a.tZ)("div",{role:"group",className:t,css:o},r)}},79789:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(67294),o=r(51995),n=r(61988),i=r(70163),s=r(58593),l=r(11965);const d=function({certifiedBy:e,details:t,size:r="l"}){const d=(0,o.Fg)();return(0,l.tZ)(s.u,{id:"certified-details-tooltip",title:(0,l.tZ)(a.Fragment,null,e&&(0,l.tZ)("div",null,(0,l.tZ)("strong",null,(0,n.t)("Certified by %s",e))),(0,l.tZ)("div",null,t))},(0,l.tZ)(i.Z.Certified,{iconColor:d.colors.primary.base,iconSize:r}))}},9433:(e,t,r)=>{r.d(t,{CronPicker:()=>u});var a=r(5872),o=r.n(a),n=(r(67294),r(85631)),i=r(61988),s=r(51995),l=r(61247),d=r(11965);const c={everyText:(0,i.t)("every"),emptyMonths:(0,i.t)("every month"),emptyMonthDays:(0,i.t)("every day of the month"),emptyMonthDaysShort:(0,i.t)("day of the month"),emptyWeekDays:(0,i.t)("every day of the week"),emptyWeekDaysShort:(0,i.t)("day of the week"),emptyHours:(0,i.t)("every hour"),emptyMinutes:(0,i.t)("every minute"),emptyMinutesForHourPeriod:(0,i.t)("every"),yearOption:(0,i.t)("year"),monthOption:(0,i.t)("month"),weekOption:(0,i.t)("week"),dayOption:(0,i.t)("day"),hourOption:(0,i.t)("hour"),minuteOption:(0,i.t)("minute"),rebootOption:(0,i.t)("reboot"),prefixPeriod:(0,i.t)("Every"),prefixMonths:(0,i.t)("in"),prefixMonthDays:(0,i.t)("on"),prefixWeekDays:(0,i.t)("on"),prefixWeekDaysForMonthAndYearPeriod:(0,i.t)("and"),prefixHours:(0,i.t)("at"),prefixMinutes:(0,i.t)(":"),prefixMinutesForHourPeriod:(0,i.t)("at"),suffixMinutesForHourPeriod:(0,i.t)("minute(s)"),errorInvalidCron:(0,i.t)("Invalid cron expression"),clearButtonText:(0,i.t)("Clear"),weekDays:[(0,i.t)("Sunday"),(0,i.t)("Monday"),(0,i.t)("Tuesday"),(0,i.t)("Wednesday"),(0,i.t)("Thursday"),(0,i.t)("Friday"),(0,i.t)("Saturday")],months:[(0,i.t)("January"),(0,i.t)("February"),(0,i.t)("March"),(0,i.t)("April"),(0,i.t)("May"),(0,i.t)("June"),(0,i.t)("July"),(0,i.t)("August"),(0,i.t)("September"),(0,i.t)("October"),(0,i.t)("November"),(0,i.t)("December")],altWeekDays:[(0,i.t)("SUN"),(0,i.t)("MON"),(0,i.t)("TUE"),(0,i.t)("WED"),(0,i.t)("THU"),(0,i.t)("FRI"),(0,i.t)("SAT")],altMonths:[(0,i.t)("JAN"),(0,i.t)("FEB"),(0,i.t)("MAR"),(0,i.t)("APR"),(0,i.t)("MAY"),(0,i.t)("JUN"),(0,i.t)("JUL"),(0,i.t)("AUG"),(0,i.t)("SEP"),(0,i.t)("OCT"),(0,i.t)("NOV"),(0,i.t)("DEC")]},u=(0,s.iK)((e=>(0,d.tZ)(n.ZP,{getPopupContainer:e=>e.parentElement},(0,d.tZ)(l.Z,o()({locale:c},e)))))`
  .react-js-cron-select:not(.react-js-cron-custom-select) > div:first-of-type,
  .react-js-cron-custom-select {
    border-radius: ${({theme:e})=>e.gridUnit}px;
    background-color: ${({theme:e})=>e.colors.grayscale.light4} !important;
  }
  .react-js-cron-custom-select > div:first-of-type {
    border-radius: ${({theme:e})=>e.gridUnit}px;
  }
`},17198:(e,t,r)=>{r.d(t,{Z:()=>h});var a=r(51995),o=r(61988),n=r(67294),i=r(9875),s=r(74069),l=r(49238),d=r(11965);const c=a.iK.div`
  padding-top: 8px;
  width: 50%;
  label {
    color: ${({theme:e})=>e.colors.grayscale.base};
    text-transform: uppercase;
  }
`,u=a.iK.div`
  line-height: 40px;
  padding-top: 16px;
`;function h({description:e,onConfirm:t,onHide:r,open:a,title:h}){const[p,m]=(0,n.useState)(!0),[g,f]=(0,n.useState)(""),v=()=>{f(""),t()};return(0,d.tZ)(s.Z,{disablePrimaryButton:p,onHide:()=>{f(""),r()},onHandledPrimaryAction:v,primaryButtonName:(0,o.t)("delete"),primaryButtonType:"danger",show:a,title:h},(0,d.tZ)(u,null,e),(0,d.tZ)(c,null,(0,d.tZ)(l.lX,{htmlFor:"delete"},(0,o.t)('Type "%s" to confirm',(0,o.t)("DELETE"))),(0,d.tZ)(i.II,{type:"text",id:"delete",autoComplete:"off",value:g,onChange:e=>{var t;const r=null!=(t=e.target.value)?t:"";m(r.toUpperCase()!==(0,o.t)("DELETE")),f(r)},onPressEnter:()=>{p||v()}})))}},88694:(e,t,r)=>{r.d(t,{L:()=>c,$:()=>u});var a=r(5872),o=r.n(a),n=(r(67294),r(4715)),i=r(51995),s=r(11965);const l=i.iK.div`
  width: ${({theme:e})=>.75*e.gridUnit}px;
  height: ${({theme:e})=>.75*e.gridUnit}px;
  border-radius: 50%;
  background-color: ${({theme:e})=>e.colors.grayscale.light1};

  font-weight: ${({theme:e})=>e.typography.weights.normal};
  display: inline-flex;
  position: relative;

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary.base};

    &::before,
    &::after {
      background-color: ${({theme:e})=>e.colors.primary.base};
    }
  }

  &::before,
  &::after {
    position: absolute;
    content: ' ';
    width: ${({theme:e})=>.75*e.gridUnit}px;
    height: ${({theme:e})=>.75*e.gridUnit}px;
    border-radius: 50%;
    background-color: ${({theme:e})=>e.colors.grayscale.light1};
  }

  &::before {
    top: ${({theme:e})=>e.gridUnit}px;
  }

  &::after {
    bottom: ${({theme:e})=>e.gridUnit}px;
  }
`,d=i.iK.div`
  display: flex;
  align-items: center;
  padding: ${({theme:e})=>2*e.gridUnit}px;
  padding-left: ${({theme:e})=>e.gridUnit}px;
`,c=({overlay:e,...t})=>(0,s.tZ)(n.Gj,o()({overlay:e},t),(0,s.tZ)(d,null,(0,s.tZ)(l,null))),u=e=>(0,s.tZ)(n.Gj,o()({overlayStyle:{zIndex:99,animationDuration:"0s"}},e))},38270:(e,t,r)=>{r.d(t,{Z:()=>m});var a=r(5872),o=r.n(a),n=r(67294),i=r(94184),s=r.n(i),l=r(51995),d=r(61988),c=r(58593),u=r(79789),h=r(11965);const p=(0,l.iK)(u.Z)`
  vertical-align: middle;
`;function m({canEdit:e=!1,editing:t=!1,extraClasses:r,multiLine:a=!1,noPermitTooltip:i,onSaveTitle:l,showTooltip:u=!0,style:m,title:g="",defaultTitle:f="",placeholder:v="",certifiedBy:y,certificationDetails:b,...T}){const[S,Z]=(0,n.useState)(t),[C,E]=(0,n.useState)(g),[R,D]=(0,n.useState)(g),[_,w]=(0,n.useState)(null),x=(0,n.useRef)();function F(){if(!e||S)return;const t=x.current?x.current.getBoundingClientRect():null;Z(!0),w(t)}function A(){const t=C.trim();e&&(Z(!1),t.length?(R!==t&&D(t),g!==t&&l(t)):E(R))}function P(e){" "===e.key&&e.stopPropagation(),"Enter"===e.key&&(e.preventDefault(),A())}function O(t){e&&E(t.target.value)}function $(e){"Enter"===e.key&&(e.preventDefault(),A())}let k;(0,n.useEffect)((()=>{g!==C&&(D(C),E(g))}),[g]),(0,n.useEffect)((()=>{if(S&&(x.current.focus(),x.current.setSelectionRange)){const{length:e}=x.current.value;x.current.setSelectionRange(e,e),x.current.scrollLeft=x.current.scrollWidth,x.current.scrollTop=x.current.scrollHeight}}),[S]),k=C,S||C||(k=f||g);const I=S&&_?{height:`${_.height}px`}:void 0;let U=a&&S?(0,h.tZ)("textarea",{ref:x,value:k,className:g?void 0:"text-muted",onKeyDown:P,onChange:O,onBlur:A,onClick:F,onKeyPress:$,placeholder:v,style:I}):(0,h.tZ)("input",{ref:x,type:S?"text":"button",value:k,className:g?void 0:"text-muted",onKeyDown:P,onChange:O,onBlur:A,onClick:F,onKeyPress:$,placeholder:v});return u&&!S&&(U=(0,h.tZ)(c.u,{id:"title-tooltip",title:e?(0,d.t)("Click to edit"):i||(0,d.t)("You don't have the rights to alter this title.")},U)),e||(U=(0,h.tZ)("span",null,k)),(0,h.tZ)("span",o()({className:s()("editable-title",r,e&&"editable-title--editable",S&&"editable-title--editing"),style:m},T),y&&(0,h.tZ)(n.Fragment,null,(0,h.tZ)(p,{certifiedBy:y,details:b,size:"xl"})," "),U)}},36674:(e,t,r)=>{r.d(t,{Z:()=>u});var a=r(67294),o=r(51995),n=r(61988),i=r(58593),s=r(33626),l=r(70163),d=r(11965);const c=o.iK.a`
  font-size: ${({theme:e})=>e.typography.sizes.xl}px;
  display: flex;
  padding: 0 0 0 0.5em;
`,u=({itemId:e,isStarred:t,showTooltip:r,saveFaveStar:o,fetchFaveStar:u})=>{(0,s.J)((()=>{u&&u(e)}));const h=(0,a.useCallback)((r=>{r.preventDefault(),o(e,!!t)}),[t,e,o]),p=(0,d.tZ)(c,{href:"#",onClick:h,className:"fave-unfave-icon",role:"button"},t?(0,d.tZ)(l.Z.FavoriteSelected,{iconSize:"xxl"}):(0,d.tZ)(l.Z.FavoriteUnselected,{iconSize:"xxl"}));return r?(0,d.tZ)(i.u,{id:"fave-unfave-tooltip",title:(0,n.t)("Click to favorite/unfavorite")},p):p}},48600:(e,t,r)=>{r.d(t,{Z:()=>v});var a=r(11965),o=r(67294),n=r(37703),i=r(51995),s=r(61988),l=r(70163),d=r(12441),c=r(83862),u=r(88694),h=r(91877),p=r(93185),m=r(17198);const g=e=>a.iv`
  color: ${e.colors.error.base};
`;var f={name:"833hqy",styles:"width:200px"};function v({showReportModal:e,toggleActive:t,deleteActiveReport:r}){const v=(0,n.v9)((e=>e.reports)),y=v[Object.keys(v)[0]],[b,T]=(0,o.useState)(null),S=(0,i.Fg)();return(0,h.cr)(p.T.ALERT_REPORTS)?(0,a.tZ)(o.Fragment,null,(0,a.tZ)(u.$,{overlay:(0,a.tZ)(c.v,{selectable:!1,css:f},(0,a.tZ)(c.v.Item,null,(0,s.t)("Email reports active"),(0,a.tZ)(d.r,{checked:null==y?void 0:y.active,onClick:e=>(async(e,r)=>{null!=e&&e.id&&t(e,r)})(y,e),size:"small",css:(0,a.iv)({marginLeft:2*S.gridUnit},"","")})),(0,a.tZ)(c.v.Item,{onClick:e},(0,s.t)("Edit email report")),(0,a.tZ)(c.v.Item,{onClick:()=>T(y),css:g},(0,s.t)("Delete email report"))),trigger:["click"],getPopupContainer:e=>e.closest(".action-button")},(0,a.tZ)("span",{role:"button",className:"action-button",tabIndex:0},(0,a.tZ)(l.Z.Calendar,null))),b&&(0,a.tZ)(m.Z,{description:(0,s.t)("This action will permanently delete %s.",b.name),onConfirm:()=>{b&&(e=>{r(e),T(null)})(b)},onHide:()=>T(null),open:!0,title:(0,s.t)("Delete Report?")})):null}},97860:(e,t,r)=>{r.d(t,{Z:()=>U});var a=r(67294),o=r(61988),n=r(98286),i=r(14890),s=r(37703),l=r(61358),d=r(29487),c=r(98978),u=r(87858),h=r(70163),p=r(14114),m=r(51995),g=r(11965),f=r(74069),v=r(35932),y=r(87183),b=r(9433);const T=(0,m.iK)(f.Z)`
  .ant-modal-body {
    padding: 0;
  }
`,S=m.iK.div`
  padding: ${({theme:e})=>`${3*e.gridUnit}px ${4*e.gridUnit}px ${2*e.gridUnit}px`};
  label {
    font-size: ${({theme:e})=>e.typography.sizes.s-1}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,Z=m.iK.div`
  border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  padding: ${({theme:e})=>`${4*e.gridUnit}px ${4*e.gridUnit}px ${6*e.gridUnit}px`};
  .ant-select {
    width: 100%;
  }
  .control-label {
    font-size: ${({theme:e})=>e.typography.sizes.s-1}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,C=m.iK.span`
  span {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    vertical-align: middle;
  }
  .text {
    vertical-align: middle;
  }
`,E=m.iK.div`
  margin-bottom: ${({theme:e})=>7*e.gridUnit}px;

  h4 {
    margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  }
`,R=(0,m.iK)(b.CronPicker)`
  margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
`,D=m.iK.p`
  color: ${({theme:e})=>e.colors.error.base};
`,_=g.iv`
  margin-bottom: 0;
`,w=(0,m.iK)(v.Z)`
  width: ${({theme:e})=>40*e.gridUnit}px;
`,x=m.iK.div`
  margin: ${({theme:e})=>8*e.gridUnit}px 0
    ${({theme:e})=>4*e.gridUnit}px;
`,F=(0,m.iK)(y.Y)`
  display: block;
  line-height: ${({theme:e})=>8*e.gridUnit}px;
`,A=(0,m.iK)(y.Y.Group)`
  margin-left: ${({theme:e})=>.5*e.gridUnit}px;
`;var P;!function(e){e[e.inputChange=0]="inputChange",e[e.fetched=1]="fetched",e[e.reset=2]="reset",e[e.error=3]="error"}(P||(P={}));const O=["pivot_table","pivot_table_v2","table","paired_ttest"],$="TEXT",k=(0,o.t)("We were unable to create your report. Please try again."),I=(e,t)=>{var r;const a={name:"Weekly Report"};switch(t.type){case P.inputChange:return{...a,...e,[t.payload.name]:t.payload.value};case P.fetched:return{...a,...t.payload};case P.reset:return{...a};case P.error:return{...e,error:(null==(r=t.payload)?void 0:r.name[0])||k};default:return e}},U=(0,s.$j)(null,(e=>(0,i.DE)({addReport:l.cq,editReport:l.Me},e)))((0,p.ZP)((({onReportAdd:e,onHide:t,show:r=!1,...i})=>{var p,m;const f=null==(p=i.props.chart)||null==(m=p.sliceFormData)?void 0:m.viz_type,v=!!i.props.chart,y=v&&O.includes(f)?$:"PNG",[b,k]=(0,a.useReducer)(I,null),U=(0,a.useCallback)(((e,t)=>{k({type:e,payload:t})}),[]),[N,M]=(0,a.useState)(),q=(0,s.I0)(),z=(0,s.v9)((e=>e.reports)),L=z&&Object.keys(z).length;(0,a.useEffect)((()=>{if(L){const e=Object.keys(z),t=z[e[0]];k({type:P.fetched,payload:t})}else k({type:P.reset})}),[z]);const j=(0,g.tZ)(C,null,(0,g.tZ)(h.Z.Calendar,null),(0,g.tZ)("span",{className:"text"},L?(0,o.t)("Edit Email Report"):(0,o.t)("New Email Report"))),V=(0,g.tZ)(a.Fragment,null,(0,g.tZ)(w,{key:"back",onClick:t},(0,o.t)("Cancel")),(0,g.tZ)(w,{key:"submit",buttonStyle:"primary",onClick:async()=>{var r;const a={crontab:null==b?void 0:b.crontab,dashboard:i.props.dashboardId,chart:null==(r=i.props.chart)?void 0:r.id,description:null==b?void 0:b.description,name:null==b?void 0:b.name,owners:[i.props.userId],recipients:[{recipient_config_json:{target:i.props.userEmail},type:"Email"}],type:"Report",creation_method:i.props.creationMethod,active:!0,report_format:(null==b?void 0:b.report_format)||y,timezone:null==b?void 0:b.timezone,force_screenshot:!1};if(L)await q((0,l.Me)(null==b?void 0:b.id,a)),t();else try{await q((0,l.cq)(a)),t()}catch(e){const{message:t}=await(0,n.O)(e);U(P.error,t)}e&&e()},disabled:!(null!=b&&b.name)},L?(0,o.t)("Save"):(0,o.t)("Add"))),K=(0,g.tZ)(a.Fragment,null,(0,g.tZ)(x,null,(0,g.tZ)("h4",null,(0,o.t)("Message Content"))),(0,g.tZ)("div",{className:"inline-container"},(0,g.tZ)(A,{onChange:e=>{U(P.inputChange,{name:"report_format",value:e.target.value})},value:(null==b?void 0:b.report_format)||y},O.includes(f)&&(0,g.tZ)(F,{value:$},(0,o.t)("Text embedded in email")),(0,g.tZ)(F,{value:"PNG"},(0,o.t)("Image (PNG) embedded in email")),(0,g.tZ)(F,{value:"CSV"},(0,o.t)("Formatted CSV attached in email")))));return(0,g.tZ)(T,{show:r,onHide:t,title:j,footer:V,width:"432",centered:!0},(0,g.tZ)(S,null,(0,g.tZ)(u.Z,{id:"name",name:"name",value:(null==b?void 0:b.name)||"",placeholder:(0,o.t)("Weekly Report"),required:!0,validationMethods:{onChange:({target:e})=>U(P.inputChange,{name:e.name,value:e.value})},label:"Report Name"}),(0,g.tZ)(u.Z,{id:"description",name:"description",value:(null==b?void 0:b.description)||"",validationMethods:{onChange:({target:e})=>U(P.inputChange,{name:e.name,value:e.value})},label:(0,o.t)("Description"),placeholder:(0,o.t)("Include a description that will be sent with your report"),css:_})),(0,g.tZ)(Z,null,(0,g.tZ)(E,null,(0,g.tZ)("h4",{css:e=>(e=>g.iv`
  margin: ${3*e.gridUnit}px 0;
`)(e)},(0,o.t)("Schedule")),(0,g.tZ)("p",null,(0,o.t)("Scheduled reports will be sent to your email as a PNG"))),(0,g.tZ)(R,{clearButton:!1,value:(0,o.t)((null==b?void 0:b.crontab)||"0 12 * * 1"),setValue:e=>{U(P.inputChange,{name:"crontab",value:e})},onError:M}),(0,g.tZ)(D,null,N),(0,g.tZ)("div",{className:"control-label",css:e=>(e=>g.iv`
  margin: ${3*e.gridUnit}px 0 ${2*e.gridUnit}px;
`)(e)},(0,o.t)("Timezone")),(0,g.tZ)(c.Z,{onTimezoneChange:e=>{k({type:P.inputChange,payload:{name:"timezone",value:e}})},timezone:null==b?void 0:b.timezone}),v&&K),(null==b?void 0:b.error)&&(0,g.tZ)(d.Z,{type:"error",css:e=>(e=>g.iv`
  border: ${e.colors.error.base} 1px solid;
  padding: ${4*e.gridUnit}px;
  margin: ${8*e.gridUnit}px ${4*e.gridUnit}px;
  color: ${e.colors.error.dark2};
  .ant-alert-message {
    font-size: ${e.typography.sizes.s+1}px;
    font-weight: bold;
  }
  .ant-alert-description {
    font-size: ${e.typography.sizes.s+1}px;
    line-height: ${4*e.gridUnit}px;
    .ant-alert-icon {
      margin-right: ${2.5*e.gridUnit}px;
      font-size: ${e.typography.sizes.l+1}px;
      position: relative;
      top: ${e.gridUnit/4}px;
    }
  }
`)(e),message:(0,o.t)("Report Creation Error"),description:null==b?void 0:b.error}))})))},12441:(e,t,r)=>{r.d(t,{r:()=>s}),r(67294);var a=r(51995),o=r(40987),n=r(11965);const i=(0,a.iK)(o.Z)`
  .ant-switch-checked {
    background-color: ${({theme:e})=>e.colors.primary.base};
  }
`,s=e=>(0,n.tZ)(i,e)},98978:(e,t,r)=>{r.d(t,{Z:()=>T});var a=r(11965),o=r(67294),n=r(80008),i=r.n(n),s=r(61988),l=r(4715);const d="GMT Standard Time",c={"-300-240":["Eastern Standard Time","Eastern Daylight Time"],"-360-300":["Central Standard Time","Central Daylight Time"],"-420-360":["Mountain Standard Time","Mountain Daylight Time"],"-420-420":["Mountain Standard Time - Phoenix","Mountain Standard Time - Phoenix"],"-480-420":["Pacific Standard Time","Pacific Daylight Time"],"-540-480":["Alaska Standard Time","Alaska Daylight Time"],"-600-600":["Hawaii Standard Time","Hawaii Daylight Time"],60120:["Central European Time","Central European Daylight Time"],"00":[d,d],"060":["GMT Standard Time - London","British Summer Time"]},u=i()(),h=i()([2021,1]),p=i()([2021,7]),m=e=>h.tz(e).utcOffset().toString()+p.tz(e).utcOffset().toString(),g=e=>{var t,r;const a=m(e);return(u.tz(e).isDST()?null==(t=c[a])?void 0:t[1]:null==(r=c[a])?void 0:r[0])||e},f=i().tz.countries().map((e=>i().tz.zonesForCountry(e,!0))).flat(),v=[];f.forEach((e=>{v.find((t=>m(t.name)===m(e.name)))||v.push(e)}));const y=v.map((e=>({label:`GMT ${i().tz(u,e.name).format("Z")} (${g(e.name)})`,value:e.name,offsets:m(e.name),timezoneName:e.name}))),b=(e,t)=>i().tz(u,e.timezoneName).utcOffset()-i().tz(u,t.timezoneName).utcOffset();function T({onTimezoneChange:e,timezone:t}){const r=(0,o.useMemo)((()=>(e=>{var t;return(null==(t=y.find((t=>t.offsets===m(e))))?void 0:t.value)||"Africa/Abidjan"})(t||i().tz.guess())),[t]);return(0,o.useEffect)((()=>{t!==r&&e(r)}),[r,e,t]),(0,a.tZ)(l.Ph,{ariaLabel:(0,s.t)("Timezone selector"),css:(0,a.iv)({minWidth:"400px"},"",""),onChange:t=>e(t),value:r,options:y,sortComparator:b})}y.sort(b)},9531:(e,t,r)=>{r.d(t,{tw:()=>a,Ky:()=>o,RX:()=>n,Mz:()=>i,gz:()=>s,I6:()=>l,UN:()=>d,a7:()=>c,XX:()=>u});const a={id:0,type:r(46078).i.Table,uid:"_placeholder_",datasource_name:"",table_name:"",columns:[],column_types:[],metrics:[],column_format:{},verbose_map:{},main_dttm_col:"",description:""},o=53,n=50,i=72,s=32,l=260,d=80,c=46,u=374},713:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(61988),o=r(80621);const n=[{value:o.HE,label:(0,a.t)("Transparent"),className:"background--transparent"},{value:o.b5,label:(0,a.t)("White"),className:"background--white"}]},79271:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(61988),o=r(80621);const n=[{value:o.u_,label:(0,a.t)("Small"),className:"header-style-option header-small"},{value:o.OE,label:(0,a.t)("Medium"),className:"header-style-option header-medium"},{value:o.pQ,label:(0,a.t)("Large"),className:"header-style-option header-large"}]},651:(e,t,r)=>{r.r(t),r.d(t,{SET_DATASOURCE_TYPE:()=>s,setDatasourceType:()=>l,SET_DATASOURCE:()=>d,setDatasource:()=>c,SET_DATASOURCES:()=>u,setDatasources:()=>h,POST_DATASOURCE_STARTED:()=>p,FETCH_DATASOURCE_SUCCEEDED:()=>m,fetchDatasourceSucceeded:()=>g,FETCH_DATASOURCES_STARTED:()=>f,fetchDatasourcesStarted:()=>v,FETCH_DATASOURCES_SUCCEEDED:()=>y,fetchDatasourcesSucceeded:()=>b,TOGGLE_FAVE_STAR:()=>T,toggleFaveStar:()=>S,FETCH_FAVE_STAR:()=>Z,fetchFaveStar:()=>C,SAVE_FAVE_STAR:()=>E,saveFaveStar:()=>R,SET_FIELD_VALUE:()=>D,setControlValue:()=>_,SET_EXPLORE_CONTROLS:()=>w,setExploreControls:()=>x,UPDATE_CHART_TITLE:()=>F,updateChartTitle:()=>A,CREATE_NEW_SLICE:()=>P,createNewSlice:()=>O,SLICE_UPDATED:()=>$,sliceUpdated:()=>k,SET_TIME_FORMATTED_COLUMN:()=>I,setTimeFormattedColumn:()=>U,UNSET_TIME_FORMATTED_COLUMN:()=>N,unsetTimeFormattedColumn:()=>M,exploreActions:()=>q});var a=r(31069),o=r(61988),n=r(72570);const i="/superset/favstar/slice",s="SET_DATASOURCE_TYPE";function l(e){return{type:s,datasourceType:e}}const d="SET_DATASOURCE";function c(e){return{type:d,datasource:e}}const u="SET_DATASOURCES";function h(e){return{type:u,datasources:e}}const p="POST_DATASOURCE_STARTED",m="FETCH_DATASOURCE_SUCCEEDED";function g(){return{type:m}}const f="FETCH_DATASOURCES_STARTED";function v(){return{type:f}}const y="FETCH_DATASOURCES_SUCCEEDED";function b(){return{type:y}}const T="TOGGLE_FAVE_STAR";function S(e){return{type:T,isStarred:e}}const Z="FETCH_FAVE_STAR";function C(e){return function(t){a.Z.get({endpoint:`${i}/${e}/count/`}).then((({json:e})=>{e.count>0&&t(S(!0))}))}}const E="SAVE_FAVE_STAR";function R(e,t){return function(r){const s=t?"unselect":"select";a.Z.get({endpoint:`${i}/${e}/${s}/`}).then((()=>r(S(!t)))).catch((()=>{r((0,n.Gb)((0,o.t)("An error occurred while starring this chart")))}))}}const D="SET_FIELD_VALUE";function _(e,t,r){return{type:D,controlName:e,value:t,validationErrors:r}}const w="UPDATE_EXPLORE_CONTROLS";function x(e){return{type:w,formData:e}}const F="UPDATE_CHART_TITLE";function A(e){return{type:F,sliceName:e}}const P="CREATE_NEW_SLICE";function O(e,t,r,a,o){return{type:P,can_add:e,can_download:t,can_overwrite:r,slice:a,form_data:o}}const $="SLICE_UPDATED";function k(e){return{type:$,slice:e}}const I="SET_TIME_FORMATTED_COLUMN";function U(e,t){return{type:I,datasourceId:e,columnName:t}}const N="UNSET_TIME_FORMATTED_COLUMN";function M(e,t){return{type:N,datasourceId:e,columnIndex:t}}const q={...n.s2,setDatasourceType:l,setDatasource:c,setDatasources:h,fetchDatasourcesStarted:v,fetchDatasourcesSucceeded:b,toggleFaveStar:S,fetchFaveStar:C,saveFaveStar:R,setControlValue:_,setExploreControls:x,updateChartTitle:A,createNewSlice:O,sliceUpdated:k,setTimeFormattedColumn:U,unsetTimeFormattedColumn:M}},50909:(e,t,r)=>{r.d(t,{qi:()=>R,m:()=>_,HS:()=>w,uy:()=>x,C4:()=>k,_q:()=>U});var a=r(11965),o=r(67294),n=r(51995),i=r(61988),s=r(51115),l=r(42846),d=r(88889),c=r(23279),u=r.n(c),h=r(37703),p=r(4715),m=r(9875),g=r(27600),f=r(87183),v=r(70163),y=r(35932),b=r(76697),T=r(54076),S=r(13433),Z=r(33891),C=r(651);const E=(0,n.iK)("span")`
  color: ${({theme:e})=>e.colors.grayscale.light1};
`,R=(0,n.iK)(y.Z)`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;

  // needed to override button's first-of-type margin: 0
  && {
    margin: 0 ${({theme:e})=>2*e.gridUnit}px;
  }

  i {
    padding: 0 ${({theme:e})=>e.gridUnit}px;
  }
`,D=(0,a.tZ)(R,{buttonSize:"xsmall","aria-label":(0,i.t)("Copy")},(0,a.tZ)("i",{className:"fa fa-clipboard"})),_=({data:e,columns:t})=>(0,a.tZ)(S.Z,{text:e&&t?(0,T.Mv)(e,t):"",wrapped:!1,copyNode:D}),w=({onChangeHandler:e})=>{const t=u()(e,g.M$);return(0,a.tZ)(m.II,{placeholder:(0,i.t)("Search"),onChange:e=>{const r=e.target.value;t(r)}})},x=({data:e,loading:t})=>{var r;return(0,a.tZ)(Z.Z,{rowcount:null!=(r=null==e?void 0:e.length)?r:0,loading:t,suffix:(0,i.t)("rows retrieved")})};var F;!function(e){e[e.Formatted=0]="Formatted",e[e.Original=1]="Original"}(F||(F={}));const A=({onChange:e,value:t})=>(0,a.tZ)(f.Y.Group,{value:t,onChange:e},(0,a.tZ)(p.T,{direction:"vertical"},(0,a.tZ)(f.Y,{value:F.Original},(0,i.t)("Original value")),(0,a.tZ)(f.Y,{value:F.Formatted},(0,i.t)("Formatted date")))),P=n.iK.div`
  display: flex;
  flex-direction: column;

  padding: ${({theme:e})=>4*e.gridUnit+"px"};
`,O=n.iK.span`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  color: ${({theme:e})=>e.colors.grayscale.base};
  margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  text-transform: uppercase;
`,$=({columnName:e,datasourceId:t,timeFormattedColumnIndex:r})=>{const s=(0,n.Fg)(),l=(0,h.I0)(),d=r>-1,c=(0,o.useCallback)((a=>{t&&(a.target.value===F.Original&&d?l((0,C.unsetTimeFormattedColumn)(t,r)):a.target.value!==F.Formatted||d||l((0,C.setTimeFormattedColumn)(t,e)))}),[r,e,t,l,d]),u=(0,o.useMemo)((()=>t?(0,a.tZ)(P,{onClick:e=>e.stopPropagation()},(0,a.tZ)(a.xB,{styles:a.iv`
              .column-formatting-popover .ant-popover-inner-content {
                padding: 0;
              }
            `}),(0,a.tZ)(O,null,(0,i.t)("Column Formatting")),(0,a.tZ)(A,{onChange:c,value:d?F.Formatted:F.Original})):null),[t,d,c]);return t?(0,a.tZ)("span",null,(0,a.tZ)(b.ZP,{overlayClassName:"column-formatting-popover",trigger:"click",content:u,placement:"bottomLeft",arrowPointAtCenter:!0},(0,a.tZ)(v.Z.SettingOutlined,{iconSize:"m",iconColor:s.colors.grayscale.light1,css:(0,a.iv)({marginRight:`${s.gridUnit}px`},"",""),onClick:e=>e.stopPropagation()})),e):(0,a.tZ)("span",null,e)},k=(e,t)=>{const r=(0,o.useMemo)((()=>{var e;return null!=(e=null==t?void 0:t.map((e=>Object.values(e).map((e=>e?e.toString().toLowerCase():(0,i.t)("N/A"))))))?e:[]}),[t]);return(0,o.useMemo)((()=>null!=t&&t.length?t.filter(((t,a)=>r[a].some((t=>null==t?void 0:t.includes(e.toLowerCase()))))):[]),[t,e,r])},I=(0,s.bt)(l.Z.DATABASE_DATETIME),U=(e,t,r,n,i=[],s)=>(0,o.useMemo)((()=>e&&null!=r&&r.length?e.filter((e=>Object.keys(r[0]).includes(e))).map(((e,r)=>{const o=(null==t?void 0:t[r])===d.Z.TEMPORAL?i.indexOf(e):-1;return{id:e,accessor:t=>t[e],Header:(null==t?void 0:t[r])===d.Z.TEMPORAL?(0,a.tZ)($,{columnName:e,datasourceId:n,timeFormattedColumnIndex:o}):e,Cell:({value:e})=>!0===e?g.Ly:!1===e?g.gz:null===e?(0,a.tZ)(E,null,g.Wq):o>-1?I(e):String(e),...null==s?void 0:s[e]}})):[]),[e,r,t,n,s,i])},33891:(e,t,r)=>{r.d(t,{Z:()=>l}),r(67294);var a=r(61988),o=r(67190),n=r(37921),i=r(58593),s=r(11965);function l(e){const{rowcount:t=0,limit:r,suffix:l=(0,a.t)("rows"),loading:d}=e,c=t===r,u=c||0===t&&!d?"danger":"default",h=(0,o.JB)()(t),p=(0,s.tZ)("span",null,c&&(0,s.tZ)("div",null,(0,a.t)("Limit reached")),d?"Loading":t);return(0,s.tZ)(i.u,{id:"tt-rowcount-tooltip",title:p},(0,s.tZ)(n.Z,{type:u},d?"Loading...":`${h} ${l}`))}},15423:(e,t,r)=>{r.d(t,{Z:()=>Z});var a=r(67294),o=r(51995),n=r(55786),i=r(61988),s=r(42110),l=r(120),d=r(13433),c=r(38703),u=r(50909),h=r(98286),p=r(52256),m=r(53459),g=r(49889),f=r(33743),v=r(22489),y=r(11965);const b=(0,o.iK)(u.qi)`
  && {
    margin: 0 0 ${({theme:e})=>e.gridUnit}px;
  }
`;s.Z.registerLanguage("markdown",m.Z),s.Z.registerLanguage("html",g.Z),s.Z.registerLanguage("sql",f.Z),s.Z.registerLanguage("json",v.Z);const T=o.iK.div`
  height: 100%;
`,S=(0,o.iK)(s.Z)`
  height: calc(100% - 26px); // 100% - clipboard height
`,Z=e=>{const[t,r]=(0,a.useState)([]),[o,s]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null);return(0,a.useEffect)((()=>{s(!0),(0,p.getChartDataRequest)({formData:e.latestQueryFormData,resultFormat:"json",resultType:"query"}).then((({json:e})=>{r((0,n.Z)(e.result)),s(!1),m(null)})).catch((e=>{(0,h.O)(e).then((({error:t,message:r})=>{m(t||r||e.statusText||(0,i.t)("Sorry, An error occurred")),s(!1)}))}))}),[JSON.stringify(e.latestQueryFormData)]),o?(0,y.tZ)(c.Z,null):u?(0,y.tZ)("pre",null,u):(0,y.tZ)(a.Fragment,null,t.map((e=>e.query?(0,y.tZ)(T,{key:e.query},(0,y.tZ)(d.Z,{text:e.query,shouldShowText:!1,copyNode:(0,y.tZ)(b,{buttonSize:"xsmall"},(0,y.tZ)("i",{className:"fa fa-clipboard"}))}),(0,y.tZ)(S,{language:e.language||void 0,style:l.Z},e.query)):null)))}},40219:(e,t,r)=>{r.d(t,{nv:()=>c,LW:()=>u});var a=r(57557),o=r.n(a),n=r(31069);const i=["url_params"],s=e=>o()(e,i),l=(e,t)=>{let r="api/v1/explore/form_data";return e&&(r=r.concat(`/${e}`)),t&&(r=r.concat(`?tab_id=${t}`)),r},d=(e,t,r)=>{const a={dataset_id:e,form_data:JSON.stringify(s(t))};return r&&(a.chart_id=r),a},c=(e,t,r,a)=>n.Z.post({endpoint:l(void 0,a),jsonPayload:d(e,t,r)}).then((e=>e.json.key)),u=(e,t,r,a,o)=>n.Z.put({endpoint:l(t,o),jsonPayload:d(e,r,a)}).then((e=>e.json.message))},28615:(e,t,r)=>{r.d(t,{S:()=>n});var a=r(67294),o=r(60812);function n(e,t){const r=(0,o.D)(e);(0,a.useEffect)((()=>{e!==r&&t(r,e)}),[e,r,t])}},6954:(e,t,r)=>{r.d(t,{z:()=>n});var a=r(67294);const o=new(r(11133).g0)("tab_id_channel");function n(){const[e,t]=(0,a.useState)();return(0,a.useEffect)((()=>{const r=()=>{const e=window.localStorage.getItem("last_tab_id"),r=String(e?Number.parseInt(e,10)+1:1);window.sessionStorage.setItem("tab_id",r),window.localStorage.setItem("last_tab_id",r),t(r)},a=window.sessionStorage.getItem("tab_id");a?(o.postMessage({type:"REQUESTING_TAB_ID",tabId:a}),t(a)):r(),o.onmessage=t=>{if(t.tabId===e)if("REQUESTING_TAB_ID"===t.type){const e={type:"TAB_ID_DENIED",tabId:t.tabId};o.postMessage(e)}else"TAB_ID_DENIED"===t.type&&r()}}),[e]),e}},56727:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(29306),o=r.n(a),n=r(21804),i=r.n(n),s=r(61988),l=r(72570);function d(e,t,r={},a=!1){return r=>{const n=a?document.querySelector(e):r.currentTarget.closest(e);return n?o().toJpeg(n,{quality:.95,bgcolor:"#F5F5F5",filter:e=>"string"!=typeof e.className||"mapboxgl-control-container"!==e.className&&!e.className.includes("ant-dropdown")}).then((e=>{const r=document.createElement("a");r.download=`${((e,t=new Date)=>`${i()(e)}-${t.toISOString().replace(/[: ]/g,"-")}`)(t)}.jpg`,r.href=e,r.click()})).catch((e=>{console.error("Creating image failed",e)})):(0,l.Dz)((0,s.t)("Image download failed, please refresh and try again."))}}}}]);