{"version":3,"file":"7649.a2fe008e0479df868dc0.entry.js","mappings":"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","sources":["webpack://superset/./src/components/MessageToasts/Toast.tsx","webpack://superset/./src/components/MessageToasts/ToastContainer.tsx","webpack://superset/./src/components/MessageToasts/ToastPresenter.tsx","webpack://superset/./src/explore/components/PropertiesModal/index.tsx","webpack://superset/./src/hooks/useComponentDidMount/useComponentDidMount.ts","webpack://superset/./src/utils/localStorageHelpers.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\nimport cx from 'classnames';\nimport Interweave from 'interweave';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Icons from 'src/components/Icons';\nimport { ToastType, ToastMeta } from './types';\n\nconst ToastContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  span {\n    padding: 0 11px;\n  }\n`;\n\nconst StyledIcon = (theme: SupersetTheme) => css`\n  min-width: ${theme.gridUnit * 5}px;\n  color: ${theme.colors.grayscale.base};\n`;\n\ninterface ToastPresenterProps {\n  toast: ToastMeta;\n  onCloseToast: (id: string) => void;\n}\n\nexport default function Toast({ toast, onCloseToast }: ToastPresenterProps) {\n  const hideTimer = useRef<ReturnType<typeof setTimeout>>();\n  const [visible, setVisible] = useState(false);\n  const showToast = () => {\n    setVisible(true);\n  };\n\n  const handleClosePress = useCallback(() => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n    // Wait for the transition\n    setVisible(() => {\n      setTimeout(() => {\n        onCloseToast(toast.id);\n      }, 150);\n      return false;\n    });\n  }, [onCloseToast, toast.id]);\n\n  useEffect(() => {\n    setTimeout(showToast);\n\n    if (toast.duration > 0) {\n      hideTimer.current = setTimeout(handleClosePress, toast.duration);\n    }\n    return () => {\n      if (hideTimer.current) {\n        clearTimeout(hideTimer.current);\n      }\n    };\n  }, [handleClosePress, toast.duration]);\n\n  let className = 'toast--success';\n  let icon = <Icons.CircleCheckSolid css={theme => StyledIcon(theme)} />;\n\n  if (toast.toastType === ToastType.WARNING) {\n    icon = <Icons.WarningSolid css={StyledIcon} />;\n    className = 'toast--warning';\n  } else if (toast.toastType === ToastType.DANGER) {\n    icon = <Icons.ErrorSolid css={StyledIcon} />;\n    className = 'toast--danger';\n  } else if (toast.toastType === ToastType.INFO) {\n    icon = <Icons.InfoSolid css={StyledIcon} />;\n    className = 'toast--info';\n  }\n\n  return (\n    <ToastContainer\n      className={cx('alert', 'toast', visible && 'toast--visible', className)}\n      data-test=\"toast-container\"\n      role=\"alert\"\n    >\n      {icon}\n      <Interweave content={toast.text} />\n      <i\n        className=\"fa fa-close pull-right pointer\"\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleClosePress}\n        aria-label=\"Close\"\n        data-test=\"close-button\"\n      />\n    </ToastContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport ToastPresenter from './ToastPresenter';\n\nimport { removeToast } from './actions';\n\nconst ToastContainer = connect(\n  ({ messageToasts: toasts }: any) => ({ toasts }),\n  dispatch => bindActionCreators({ removeToast }, dispatch),\n)(ToastPresenter);\n\nexport default ToastContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { ToastMeta } from 'src/components/MessageToasts/types';\nimport Toast from './Toast';\n\nexport interface VisualProps {\n  position: 'bottom' | 'top';\n}\n\nconst StyledToastPresenter = styled.div<VisualProps>`\n  max-width: 600px;\n  position: fixed;\n  ${({ position }) => (position === 'bottom' ? 'bottom' : 'top')}: 0px;\n  right: 0px;\n  margin-right: 50px;\n  margin-bottom: 50px;\n  z-index: ${({ theme }) => theme.zIndex.max};\n  word-break: break-word;\n\n  .toast {\n    background: ${({ theme }) => theme.colors.grayscale.dark1};\n    border-radius: ${({ theme }) => theme.borderRadius};\n    box-shadow: 0 2px 4px 0\n      fade(\n        ${({ theme }) => theme.colors.grayscale.dark2},\n        ${({ theme }) => theme.opacity.mediumLight}\n      );\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    opacity: 0;\n    position: relative;\n    transform: translateY(-100%);\n    white-space: pre-line;\n    will-change: transform, opacity;\n    transition: transform ${({ theme }) => theme.transitionTiming}s,\n      opacity ${({ theme }) => theme.transitionTiming}s;\n\n    &:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 6px;\n      height: 100%;\n    }\n  }\n\n  .toast > button {\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    opacity: 1;\n  }\n\n  .toast--visible {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n\ntype ToastPresenterProps = Partial<VisualProps> & {\n  toasts: Array<ToastMeta>;\n  removeToast: () => any;\n};\n\nexport default function ToastPresenter({\n  toasts,\n  removeToast,\n  position = 'bottom',\n}: ToastPresenterProps) {\n  return (\n    <>\n      {toasts.length > 0 && (\n        <StyledToastPresenter id=\"toast-presenter\" position={position}>\n          {toasts.map(toast => (\n            <Toast key={toast.id} toast={toast} onCloseToast={removeToast} />\n          ))}\n        </StyledToastPresenter>\n      )}\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { Select, Row, Col, AntdForm } from 'src/components';\nimport { SelectValue } from 'antd/lib/select';\nimport rison from 'rison';\nimport { t, SupersetClient, styled } from '@superset-ui/core';\nimport Chart, { Slice } from 'src/types/Chart';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport withToasts from 'src/components/MessageToasts/withToasts';\n\nexport type PropertiesModalProps = {\n  slice: Slice;\n  show: boolean;\n  onHide: () => void;\n  onSave: (chart: Chart) => void;\n  permissionsError?: string;\n  existingOwners?: SelectValue;\n  addSuccessToast: (msg: string) => void;\n};\n\nconst FormItem = AntdForm.Item;\n\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\n\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;\n\nfunction PropertiesModal({\n  slice,\n  onHide,\n  onSave,\n  show,\n  addSuccessToast,\n}: PropertiesModalProps) {\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState<SelectValue | null>(\n    null,\n  );\n\n  function showError({ error, statusText, message }: any) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: 'Error',\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' },\n    });\n  }\n\n  const fetchChartOwners = useCallback(\n    async function fetchChartOwners() {\n      try {\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n        });\n        const chart = response.json.result;\n        setSelectedOwners(\n          chart?.owners?.map((owner: any) => ({\n            value: owner.id,\n            label: `${owner.first_name} ${owner.last_name}`,\n          })),\n        );\n      } catch (response) {\n        const clientError = await getClientErrorObject(response);\n        showError(clientError);\n      }\n    },\n    [slice.slice_id],\n  );\n\n  const loadOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/chart/related/owners?q=${query}`,\n        }).then(response => ({\n          data: response.json.result.map(\n            (item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            }),\n          ),\n          totalCount: response.json.count,\n        }));\n      },\n    [],\n  );\n\n  const onSubmit = async (values: {\n    certified_by?: string;\n    certification_details?: string;\n    description?: string;\n    cache_timeout?: number;\n  }) => {\n    setSubmitting(true);\n    const {\n      certified_by: certifiedBy,\n      certification_details: certificationDetails,\n      description,\n      cache_timeout: cacheTimeout,\n    } = values;\n    const payload: { [key: string]: any } = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details:\n        certifiedBy && certificationDetails ? certificationDetails : null,\n    };\n    if (selectedOwners) {\n      payload.owners = (\n        selectedOwners as {\n          value: number;\n          label: string;\n        }[]\n      ).map(o => o.value);\n    }\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        id: slice.slice_id,\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    } catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n\n  const ownersLabel = t('Owners');\n\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      title=\"Edit Chart Properties\"\n      footer={\n        <>\n          <Button\n            data-test=\"properties-modal-cancel-button\"\n            htmlType=\"button\"\n            buttonSize=\"small\"\n            onClick={onHide}\n            cta\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            data-test=\"properties-modal-save-button\"\n            htmlType=\"submit\"\n            buttonSize=\"small\"\n            buttonStyle=\"primary\"\n            onClick={form.submit}\n            disabled={submitting || !name || slice.is_managed_externally}\n            tooltip={\n              slice.is_managed_externally\n                ? t(\n                    \"This chart is managed externally, and can't be edited in Superset\",\n                  )\n                : ''\n            }\n            cta\n          >\n            {t('Save')}\n          </Button>\n        </>\n      }\n      responsive\n      wrapProps={{ 'data-test': 'properties-edit-modal' }}\n    >\n      <AntdForm\n        form={form}\n        onFinish={onSubmit}\n        layout=\"vertical\"\n        initialValues={{\n          name: slice.slice_name || '',\n          description: slice.description || '',\n          cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n          certified_by: slice.certified_by || '',\n          certification_details:\n            slice.certified_by && slice.certification_details\n              ? slice.certification_details\n              : '',\n        }}\n      >\n        <Row gutter={16}>\n          <Col xs={24} md={12}>\n            <h3>{t('Basic information')}</h3>\n            <FormItem label={t('Name')} required>\n              <Input\n                aria-label={t('Name')}\n                name=\"name\"\n                data-test=\"properties-modal-name-input\"\n                type=\"text\"\n                value={name}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                  setName(event.target.value ?? '')\n                }\n              />\n            </FormItem>\n            <FormItem>\n              <StyledFormItem label={t('Description')} name=\"description\">\n                <TextArea rows={3} style={{ maxWidth: '100%' }} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'The description can be displayed as widget headers in the dashboard view. Supports markdown.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3>{t('Certification')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Certified by')} name=\"certified_by\">\n                <Input aria-label={t('Certified by')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t('Person or group that has certified this chart.')}\n              </StyledHelpBlock>\n            </FormItem>\n            <FormItem>\n              <StyledFormItem\n                label={t('Certification details')}\n                name=\"certification_details\"\n              >\n                <Input aria-label={t('Certification details')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'Any additional detail to show in the certification tooltip.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n          <Col xs={24} md={12}>\n            <h3>{t('Configuration')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Cache timeout')} name=\"cache_timeout\">\n                <Input aria-label=\"Cache timeout\" />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  \"Duration (in seconds) of the caching timeout for this chart. Note this defaults to the dataset's timeout if undefined.\",\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3 style={{ marginTop: '1em' }}>{t('Access')}</h3>\n            <FormItem label={ownersLabel}>\n              <Select\n                ariaLabel={ownersLabel}\n                mode=\"multiple\"\n                name=\"owners\"\n                value={selectedOwners || []}\n                onChange={setSelectedOwners}\n                options={loadOptions}\n                disabled={!selectedOwners}\n                allowClear\n              />\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'A list of users who can alter the chart. Searchable by name or username.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n        </Row>\n      </AntdForm>\n    </Modal>\n  );\n}\n\nexport default withToasts(PropertiesModal);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { EffectCallback, useEffect } from 'react';\n\nexport const useComponentDidMount = (effect: EffectCallback) => {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(effect, []);\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TableTabTypes } from 'src/views/CRUD/types';\nimport { SetTabType } from 'src/views/CRUD/welcome/ActivityTable';\n\nexport enum LocalStorageKeys {\n  /**\n   * START LEGACY LOCAL STORAGE KEYS\n   *\n   * Do not follow the patterns here for key names. Keys should instead be namespaced to avoid\n   * collisions.\n   *\n   * TODO: Update all local storage keys to follow the new pattern. This is a breaking change,\n   * and therefore should be done in a major release.\n   */\n  filter_box_transition_snoozed_at = 'filter_box_transition_snoozed_at',\n  chart_split_sizes = 'chart_split_sizes',\n  controls_width = 'controls_width',\n  datasource_width = 'datasource_width',\n  is_datapanel_open = 'is_datapanel_open',\n  homepage_chart_filter = 'homepage_chart_filter',\n  homepage_dashboard_filter = 'homepage_dashboard_filter',\n  homepage_collapse_state = 'homepage_collapse_state',\n  homepage_activity_filter = 'homepage_activity_filter',\n  /** END LEGACY LOCAL STORAGE KEYS */\n\n  /**\n   * New local storage keys should be namespaced to avoid collisions. Keys should be named in the\n   * form [namespace]__[key].\n   *\n   * Example:\n   * sqllab__is_autocomplete_enabled\n   */\n  sqllab__is_autocomplete_enabled = 'sqllab__is_autocomplete_enabled',\n  explore__data_table_original_formatted_time_columns = 'explore__data_table_original_formatted_time_columns',\n}\n\nexport type LocalStorageValues = {\n  filter_box_transition_snoozed_at: Record<number, number>;\n  chart_split_sizes: [number, number];\n  controls_width: number;\n  datasource_width: number;\n  is_datapanel_open: boolean;\n  homepage_chart_filter: TableTabTypes;\n  homepage_dashboard_filter: TableTabTypes;\n  homepage_collapse_state: string[];\n  homepage_activity_filter: SetTabType | null;\n  sqllab__is_autocomplete_enabled: boolean;\n  explore__data_table_original_formatted_time_columns: Record<string, string[]>;\n};\n\n/*\n * This function should not be used directly, as it doesn't provide any type safety or any\n * guarantees that the globally namespaced localstorage key is correct.\n *\n * Instead, use getItem and setItem. Any legacy uses should be updated/migrated in future\n * Superset versions (as they may require breaking changes).\n * */\nexport function dangerouslyGetItemDoNotUse(\n  key: string,\n  defaultValue: any,\n): any {\n  try {\n    const value = localStorage.getItem(key);\n    if (value === null) {\n      return defaultValue;\n    }\n    return JSON.parse(value);\n  } catch {\n    return defaultValue;\n  }\n}\n\n/*\n * This function should not be used directly, as it doesn't provide any type safety or any\n * guarantees that the globally namespaced localstorage key is correct.\n *\n * Instead, use getItem and setItem. Any legacy uses should be updated/migrated in future\n * Superset versions (as they may require breaking changes).\n * */\nexport function dangerouslySetItemDoNotUse(key: string, value: any): void {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch {\n    // Catch in case localStorage is unavailable\n  }\n}\n\nexport function getItem<K extends LocalStorageKeys>(\n  key: K,\n  defaultValue: LocalStorageValues[K],\n): LocalStorageValues[K] {\n  return dangerouslyGetItemDoNotUse(key, defaultValue);\n}\n\nexport function setItem<K extends LocalStorageKeys>(\n  key: K,\n  value: LocalStorageValues[K],\n): void {\n  dangerouslySetItemDoNotUse(key, value);\n}\n"],"names":["ToastContainer","StyledIcon","theme","gridUnit","colors","grayscale","base","Toast","toast","onCloseToast","hideTimer","useRef","visible","setVisible","useState","showToast","handleClosePress","useCallback","current","clearTimeout","setTimeout","id","useEffect","duration","className","icon","css","toastType","role","content","text","tabIndex","onClick","messageToasts","toasts","dispatch","removeToast","StyledToastPresenter","position","zIndex","max","dark1","borderRadius","dark2","opacity","mediumLight","light5","transitionTiming","ToastPresenter","length","map","key","FormItem","StyledFormItem","StyledHelpBlock","slice","onHide","onSave","show","addSuccessToast","submitting","setSubmitting","form","name","setName","slice_name","selectedOwners","setSelectedOwners","showError","error","statusText","message","errorText","t","title","okButtonProps","danger","fetchChartOwners","async","chart","endpoint","slice_id","json","result","owners","owner","value","label","first_name","last_name","response","loadOptions","useMemo","input","page","pageSize","query","filter","page_size","then","data","item","totalCount","count","ownersLabel","footer","htmlType","buttonSize","cta","buttonStyle","submit","disabled","is_managed_externally","tooltip","responsive","wrapProps","onFinish","values","certified_by","certifiedBy","certification_details","certificationDetails","description","cache_timeout","cacheTimeout","payload","o","res","headers","body","JSON","stringify","updatedChart","layout","initialValues","gutter","xs","md","required","type","onChange","event","target","rows","style","maxWidth","marginTop","ariaLabel","mode","options","allowClear","useComponentDidMount","effect","LocalStorageKeys","dangerouslyGetItemDoNotUse","defaultValue","localStorage","getItem","parse","dangerouslySetItemDoNotUse","setItem"],"sourceRoot":""}