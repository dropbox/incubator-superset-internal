"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9574],{99574:(t,e,r)=>{r.r(e),r.d(e,{default:()=>T});var a=r(67294);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};var o=r(27029),l=function(t,e){return a.createElement(o.Z,Object.assign({},t,{ref:e,icon:n}))};l.displayName="PlusSquareOutlined";const i=a.forwardRef(l),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};var u=function(t,e){return a.createElement(o.Z,Object.assign({},t,{ref:e,icon:s}))};u.displayName="MinusSquareOutlined";const c=a.forwardRef(u);var f=r(37840),p=r(50855),h=r(83460),d=r.n(h),g=r(90108),v=r(98164),m=r(11965);const y=f.iK.div`
  ${({height:t,width:e,margin:r})=>`\n      margin: ${r}px;\n      height: ${t-2*r}px;\n      width: ${"string"==typeof e?parseInt(e,10):e-2*r}px;\n `}
`,b=f.iK.div`
  height: 100%;
  max-width: fit-content;
  overflow: auto;
`,w="metric",O={stroke:"black",strokeWidth:"16px"},S=t=>({Count:g.aggregatorTemplates.count(t),"Count Unique Values":g.aggregatorTemplates.countUnique(t),"List Unique Values":g.aggregatorTemplates.listUnique(", ",t),Sum:g.aggregatorTemplates.sum(t),Average:g.aggregatorTemplates.average(t),Median:g.aggregatorTemplates.median(t),"Sample Variance":g.aggregatorTemplates.var(1,t),"Sample Standard Deviation":g.aggregatorTemplates.stdev(1,t),Minimum:g.aggregatorTemplates.min(t),Maximum:g.aggregatorTemplates.max(t),First:g.aggregatorTemplates.first(t),Last:g.aggregatorTemplates.last(t),"Sum as Fraction of Total":g.aggregatorTemplates.fractionOf(g.aggregatorTemplates.sum(),"total",t),"Sum as Fraction of Rows":g.aggregatorTemplates.fractionOf(g.aggregatorTemplates.sum(),"row",t),"Sum as Fraction of Columns":g.aggregatorTemplates.fractionOf(g.aggregatorTemplates.sum(),"col",t),"Count as Fraction of Total":g.aggregatorTemplates.fractionOf(g.aggregatorTemplates.count(),"total",t),"Count as Fraction of Rows":g.aggregatorTemplates.fractionOf(g.aggregatorTemplates.count(),"row",t),"Count as Fraction of Columns":g.aggregatorTemplates.fractionOf(g.aggregatorTemplates.count(),"col",t)});function T(t){const{data:e,height:r,width:n,groupbyRows:o,groupbyColumns:l,metrics:s,colOrder:u,rowOrder:h,aggregateFunction:T,transposePivot:k,combineMetric:C,rowSubtotalPosition:A,colSubtotalPosition:M,colTotals:j,rowTotals:_,valueFormat:N,emitFilter:x,setDataMask:H,selectedFilters:E,verboseMap:K,columnFormats:F,metricsLayout:P,metricColorFormatters:R,dateFormatters:D}=t,q=(0,f.Fg)(),z=(0,p.JB)(N),B=Object.entries(F),L=B.length>0,V=L&&Object.fromEntries(B.map((([t,e])=>[t,(0,p.JB)(e)]))),I=(0,a.useMemo)((()=>s.map((t=>"string"==typeof t?t:t.label))),[s]),U=(0,a.useMemo)((()=>e.reduce(((t,e)=>[...t,...I.map((t=>({...e,[w]:t,value:e[t]}))).filter((t=>null!==t.value))]),[])),[e,I]);let[W,G]=k?[l,o]:[o,l];P===v.Q.ROWS?W=C?[...W,w]:[w,...W]:G=C?[...G,w]:[w,...G];const Z=(0,a.useCallback)((t=>{const e=Object.keys(t);H({extraFormData:{filters:0===e.length?void 0:e.map((e=>{const r=null==t?void 0:t[e];return null==r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}}))},filterState:{value:t&&Object.keys(t).length?Object.values(t):null,selectedFilters:t&&Object.keys(t).length?t:null}})}),[H]),$=(0,a.useCallback)(((t,e,r,a,n,o)=>{if(n||o||!x)return;const l={...r};delete l.metric;const i=Object.entries(l);if(0===i.length)return;const[s,u]=i[i.length-1];let c={...E||{}};c=E&&((t,e)=>{var r;return!!E&&(null==(r=E[t])?void 0:r.includes(e))})(s,u)?{}:{[s]:[u]},Array.isArray(c[s])&&0===c[s].length&&delete c[s],Z(c)}),[x,E,Z]);return(0,m.tZ)(y,{height:r,width:n,margin:4*q.gridUnit},(0,m.tZ)(b,null,(0,m.tZ)(d(),{data:U,rows:W,cols:G,aggregatorsFactory:S,defaultFormatter:z,customFormatters:L?{[w]:V}:void 0,aggregatorName:T,vals:["value"],rendererName:"Table With Subtotal",colOrder:u,rowOrder:h,sorters:{metric:(0,g.sortAs)(I)},tableOptions:{clickRowHeaderCallback:$,clickColumnHeaderCallback:$,colTotals:j,rowTotals:_,highlightHeaderCellsOnHover:x,highlightedHeaderCells:E,omittedHighlightHeaderGroups:[w],cellColorFormatters:{[w]:R},dateFormatters:D},subtotalOptions:{colSubtotalDisplay:{displayOnTop:M},rowSubtotalDisplay:{displayOnTop:A},arrowCollapsed:(0,m.tZ)(i,{style:O}),arrowExpanded:(0,m.tZ)(c,{style:O})},namesMapping:K})))}},83460:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=s(r(67294)),o=s(r(45697)),l=r(90108),i=s(r(36097));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var f=function(t){function e(){return u(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"render",value:function(){var t=this.props.renderers[this.props.rendererName in this.props.renderers?this.props.rendererName:Object.keys(this.props.renderers)[0]];return n.default.createElement(t,this.props)}}]),e}(n.default.PureComponent);f.propTypes=Object.assign({},l.PivotData.propTypes,{rendererName:o.default.string,renderers:o.default.objectOf(o.default.func)}),f.defaultProps=Object.assign({},l.PivotData.defaultProps,{rendererName:"Table",renderers:i.default}),e.default=f,t.exports=e.default},36097:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=s(r(67294)),l=s(r(45697)),i=r(90108);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t){var e=Math.min.apply(Math,t),r=Math.max.apply(Math,t);return function(t){var a=255-Math.round(255*(t-e)/(r-e));return{backgroundColor:"rgb(255,"+a+","+a+")"}}}var g=function(t){return"number"==typeof t||"string"==typeof t?t:String(t)};function v(t){var e=Math.min.apply(Math,t),r=Math.max.apply(Math,t),a=e<0?r-e:Math.max(r,0),n=100/1.4,l=function(t){return Math.min(n,n*(t/a))};return function(t,r){var a="gray",n=0;return e<0&&(n=l(-e)),t<0&&(n+=l(t),a="darkred"),o.default.createElement("div",{style:{position:"relative",height:"100%"}},o.default.createElement("div",{style:{position:"absolute",bottom:n+"%",left:0,right:0,height:l(Math.abs(t))+"%",backgroundColor:a}}),o.default.createElement("div",{style:{position:"relative",padding:"0 5px"}},r))}}function m(t,e,r,a,n){var l=n[a]||a;return t?o.default.createElement("span",{className:"toggle-wrapper"},o.default.createElement("span",{className:"toggle",onClick:r},e),o.default.createElement("span",{className:"toggle-val"},g(l))):g(l)}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(e){function r(t){f(this,r);var e=p(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return e.state={collapsedRows:{},collapsedCols:{}},e.clickHeaderHandler=e.clickHeaderHandler.bind(e),e.clickHandler=e.clickHandler.bind(e),e}return h(r,e),n(r,[{key:"getBasePivotSettings",value:function(){var e=this.props,a=e.cols,n=e.rows,o=Object.assign({rowTotals:!0,colTotals:!0},e.tableOptions),l=o.rowTotals||0===a.length,s=o.colTotals||0===n.length,u=e.namesMapping||{},c=Object.assign({arrowCollapsed:"▲",arrowExpanded:"▼"},e.subtotalOptions),f=Object.assign({displayOnTop:!1,enabled:l,hideOnExpand:!1},c.colSubtotalDisplay),p=Object.assign({displayOnTop:!1,enabled:s,hideOnExpand:!1},c.rowSubtotalDisplay),h=new i.PivotData(e,t.subtotals?{rowEnabled:p.enabled,colEnabled:f.enabled,rowPartialOnTop:p.displayOnTop,colPartialOnTop:f.displayOnTop}:{}),d=h.getRowKeys(),g=h.getColKeys(),v={},m={},y={},b=null;if(o.clickCallback){var w=!0,O=!1,S=void 0;try{for(var T,k=d[Symbol.iterator]();!(w=(T=k.next()).done);w=!0){var C=T.value,A=(0,i.flatKey)(C);A in v||(v[A]={});var M=!0,j=!1,_=void 0;try{for(var N,x=g[Symbol.iterator]();!(M=(N=x.next()).done);M=!0){var H=N.value;v[A][(0,i.flatKey)(H)]=this.clickHandler(h,C,H)}}catch(t){j=!0,_=t}finally{try{!M&&x.return&&x.return()}finally{if(j)throw _}}}}catch(t){O=!0,S=t}finally{try{!w&&k.return&&k.return()}finally{if(O)throw S}}if(l){var E=!0,K=!1,F=void 0;try{for(var P,R=d[Symbol.iterator]();!(E=(P=R.next()).done);E=!0){var D=P.value;m[(0,i.flatKey)(D)]=this.clickHandler(h,D,[])}}catch(t){K=!0,F=t}finally{try{!E&&R.return&&R.return()}finally{if(K)throw F}}}if(s){var q=!0,z=!1,B=void 0;try{for(var L,V=g[Symbol.iterator]();!(q=(L=V.next()).done);q=!0){var I=L.value;y[(0,i.flatKey)(I)]=this.clickHandler(h,[],I)}}catch(t){z=!0,B=t}finally{try{!q&&V.return&&V.return()}finally{if(z)throw B}}}l&&s&&(b=this.clickHandler(h,[],[]))}return Object.assign({pivotData:h,colAttrs:a,rowAttrs:n,colKeys:g,rowKeys:d,rowTotals:l,colTotals:s,arrowCollapsed:c.arrowCollapsed,arrowExpanded:c.arrowExpanded,colSubtotalDisplay:f,rowSubtotalDisplay:p,cellCallbacks:v,rowTotalCallbacks:m,colTotalCallbacks:y,grandTotalCallback:b,namesMapping:u},r.heatmapMappers(h,e.tableColorScaleGenerator,s,l),r.barchartMapper(h,e.barScaleGenerator,s,l))}},{key:"clickHandler",value:function(t,e,r){for(var a=this,n=this.props.cols,o=this.props.rows,l=t.getAggregator(e,r).value(),i={},s=Math.min(n.length,r.length),u=0;u<s;u++){var c=n[u];null!==r[u]&&(i[c]=r[u])}for(var f=Math.min(o.length,e.length),p=0;p<f;p++){var h=o[p];null!==e[p]&&(i[h]=e[p])}return function(e){return a.props.tableOptions.clickCallback(e,l,i,t)}}},{key:"clickHeaderHandler",value:function(t,e,r,a,n){for(var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i={},s=0;s<=a;s++){var u=r[s];i[u]=e[s]}return function(r){return n(r,e[a],i,t,o,l)}}},{key:"collapseAttr",value:function(t,e,r){var a=this;return function(n){n.stopPropagation();var o=e+1,l=r.filter((function(t){return t.length===o})).map(i.flatKey),s={};l.forEach((function(t){s[t]=!0})),t?a.setState((function(t){return{collapsedRows:Object.assign({},t.collapsedRows,s)}})):a.setState((function(t){return{collapsedCols:Object.assign({},t.collapsedCols,s)}}))}}},{key:"expandAttr",value:function(t,e,r){var a=this;return function(n){n.stopPropagation();var o={};r.forEach((function(t){for(var r=0;r<=e;r++)o[(0,i.flatKey)(t.slice(0,r+1))]=!1})),t?a.setState((function(t){return{collapsedRows:Object.assign({},t.collapsedRows,o)}})):a.setState((function(t){return{collapsedCols:Object.assign({},t.collapsedCols,o)}}))}}},{key:"toggleRowKey",value:function(t){var e=this;return function(r){r.stopPropagation(),e.setState((function(e){return{collapsedRows:Object.assign({},e.collapsedRows,c({},t,!e.collapsedRows[t]))}}))}}},{key:"toggleColKey",value:function(t){var e=this;return function(r){r.stopPropagation(),e.setState((function(e){return{collapsedCols:Object.assign({},e.collapsedCols,c({},t,!e.collapsedCols[t]))}}))}}},{key:"calcAttrSpans",value:function(t,e){for(var r=[],a=Array(e).map((function(){return 0})),n=Array(e).map((function(){return null})),o=0;o<t.length;o++){for(var l=t[o],i=[],s=0,u=Math.min(n.length,l.length);s<u&&n[s]===l[s];)i.push(-1),r[a[s]][s]++,s++;for(;s<l.length;)a[s]=o,i.push(1),s++;r.push(i),n=l}return r}},{key:"renderColHeaderRow",value:function(e,r,a){var n=a.rowAttrs,l=a.colAttrs,s=a.colKeys,u=a.visibleColKeys,c=a.colAttrSpans,f=a.rowTotals,p=a.arrowExpanded,h=a.arrowCollapsed,d=a.colSubtotalDisplay,g=a.maxColVisible,v=a.pivotData,y=a.namesMapping,b=this.props.tableOptions,w=b.highlightHeaderCellsOnHover,O=b.omittedHighlightHeaderGroups,S=void 0===O?[]:O,T=b.highlightedHeaderCells,k=b.dateFormatters,C=0===r&&0!==n.length?o.default.createElement("th",{key:"padding",colSpan:n.length,rowSpan:l.length}):null,A=t.subtotals&&d.enabled&&r!==l.length-1,M=null,j=null;A&&(M=r+1<g?this.collapseAttr(!1,r,s):this.expandAttr(!1,r,s),j=r+1<g?p:h);for(var _=o.default.createElement("th",{key:"label",className:"pvtAxisLabel"},m(A,j,M,e,y)),N=[],x=0!==n.length?1:0,H=0;H<u.length;){var E=u[H],K=r<E.length?c[H][r]:1,F="pvtColLabel";if(r<E.length){w&&!S.includes(l[r])&&(F+=" hoverable"),T&&Array.isArray(T[l[r]])&&T[l[r]].includes(E[r])&&(F+=" active");var P=1+(r===l.length-1?x:0),R=(0,i.flatKey)(E.slice(0,r+1)),D=A?this.toggleColKey(R):null,q=k&&k[e]&&"function"==typeof k[e]?k[e](E[r]):E[r];N.push(o.default.createElement("th",{className:F,key:"colKey-"+R,colSpan:K,rowSpan:P,onClick:this.clickHeaderHandler(v,E,this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback)},m(A,this.state.collapsedCols[R]?h:p,D,q,y)))}else if(r===E.length){var z=l.length-E.length+x;N.push(o.default.createElement("th",{className:F+" pvtSubtotalLabel",key:"colKeyBuffer-"+(0,i.flatKey)(E),colSpan:K,rowSpan:z,onClick:this.clickHeaderHandler(v,E,this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback,!0)},"Subtotal"))}H+=K}var B=0===r&&f?o.default.createElement("th",{key:"total",className:"pvtTotalLabel",rowSpan:l.length+Math.min(n.length,1),onClick:this.clickHeaderHandler(v,[],this.props.cols,r,this.props.tableOptions.clickColumnHeaderCallback,!1,!0)},"Total ("+this.props.aggregatorName+")"):null,L=[C,_].concat(N,[B]);return o.default.createElement("tr",{key:"colAttr-"+r},L)}},{key:"renderRowHeaderRow",value:function(e){var r=this,a=e.rowAttrs,n=e.colAttrs,l=e.rowKeys,i=e.arrowCollapsed,s=e.arrowExpanded,u=e.rowSubtotalDisplay,c=e.maxRowVisible,f=e.pivotData,p=e.namesMapping;return o.default.createElement("tr",{key:"rowHdr"},a.map((function(e,n){var f=t.subtotals&&u.enabled&&n!==a.length-1,h=null,d=null;return f&&(h=n+1<c?r.collapseAttr(!0,n,l):r.expandAttr(!0,n,l),d=n+1<c?s:i),o.default.createElement("th",{className:"pvtAxisLabel",key:"rowAttr-"+n},m(f,d,h,e,p))})),o.default.createElement("th",{className:"pvtTotalLabel",key:"padding",onClick:this.clickHeaderHandler(f,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},0===n.length?"Total ("+this.props.aggregatorName+")":null))}},{key:"renderTableRow",value:function(e,r,a){var n=this,l=a.rowAttrs,s=a.colAttrs,c=a.rowAttrSpans,f=a.visibleColKeys,p=a.pivotData,h=a.rowTotals,d=a.rowSubtotalDisplay,g=a.valueCellColors,v=a.cellStyle,y=a.valueCellBar,b=a.arrowExpanded,w=a.arrowCollapsed,O=a.cellCallbacks,S=a.rowTotalCallbacks,T=a.namesMapping,k=this.props.tableOptions,C=k.highlightHeaderCellsOnHover,A=k.omittedHighlightHeaderGroups,M=void 0===A?[]:A,j=k.highlightedHeaderCells,_=k.cellColorFormatters,N=k.dateFormatters,x=(0,i.flatKey)(e),H=0!==s.length?1:0,E=e.map((function(a,s){var u="pvtRowLabel";C&&!M.includes(l[s])&&(u+=" hoverable"),j&&Array.isArray(j[l[s]])&&j[l[s]].includes(a)&&(u+=" active");var f=c[r][s];if(f>0){var h=(0,i.flatKey)(e.slice(0,s+1)),g=1+(s===l.length-1?H:0),v=t.subtotals&&d.enabled&&s!==l.length-1,y=v?n.toggleRowKey(h):null,O=N&&N[l[s]]?N[l[s]](a):a;return o.default.createElement("th",{key:"rowKeyLabel-"+s,className:u,rowSpan:f,colSpan:g,onClick:n.clickHeaderHandler(p,e,n.props.rows,s,n.props.tableOptions.clickRowHeaderCallback)},m(v,n.state.collapsedRows[h]?w:b,y,O,T))}return null})),K=e.length<l.length?o.default.createElement("th",{className:"pvtRowLabel pvtSubtotalLabel",key:"rowKeyBuffer",colSpan:l.length-e.length+H,rowSpan:1,onClick:this.clickHeaderHandler(p,e,this.props.rows,e.length,this.props.tableOptions.clickRowHeaderCallback,!0)},"Subtotal"):null,F=O[x]||{},P=f.map((function(t){var r=(0,i.flatKey)(t),a=p.getAggregator(e,t),n=a.value(),l=void 0,s=[].concat(u(e),u(t));_&&Object.values(_).forEach((function(t){if(Array.isArray(t)){var e=function(e){if(t.filter((function(t){return t.column===e})).forEach((function(t){var e=t.getColorFromValue(n);e&&(l=e)})),l)return"break"},r=!0,a=!1,o=void 0;try{for(var i,u=s[Symbol.iterator]();!(r=(i=u.next()).done)&&"break"!==e(i.value);r=!0);}catch(t){a=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}}}));var c=Object.assign({},a.isSubtotal?{fontWeight:"bold"}:g(e,t,n),a.isSubtotal?{}:{backgroundColor:l},v);return o.default.createElement("td",{className:"pvtVal",key:"pvtVal-"+r,onClick:F[r],style:c},a.isSubtotal?a.format(n):y(e,t,n,a.format(n)))})),R=null;if(h){var D=p.getAggregator(e,[]),q=D.value();R=o.default.createElement("td",{key:"total",className:"pvtTotal",onClick:S[x],style:v},D.format(q))}var z=[].concat(u(E),[K],u(P),[R]);return o.default.createElement("tr",{key:"keyRow-"+x},z)}},{key:"renderTotalsRow",value:function(t){var e=t.rowAttrs,r=t.colAttrs,a=t.visibleColKeys,n=t.rowTotals,l=t.pivotData,s=t.cellStyle,c=t.colTotalCallbacks,f=t.grandTotalCallback,p=o.default.createElement("th",{key:"label",className:"pvtTotalLabel pvtRowTotalLabel",colSpan:e.length+Math.min(r.length,1),onClick:this.clickHeaderHandler(l,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},"Total ("+this.props.aggregatorName+")"),h=Object.assign({},s,{padding:"5px"}),d=a.map((function(t){var e=(0,i.flatKey)(t),r=l.getAggregator([],t),a=r.value();return o.default.createElement("td",{className:"pvtTotal pvtRowTotal",key:"total-"+e,onClick:c[e],style:h},r.format(a))})),g=null;if(n){var v=l.getAggregator([],[]),m=v.value();g=o.default.createElement("td",{key:"total",className:"pvtGrandTotal pvtRowTotal",onClick:f},v.format(m))}var y=[p].concat(u(d),[g]);return o.default.createElement("tr",{key:"total",className:"pvtRowTotals"},y)}},{key:"visibleKeys",value:function(t,e,r,a){return t.filter((function(t){return!t.some((function(r,a){return e[(0,i.flatKey)(t.slice(0,a))]}))&&(t.length===r||(0,i.flatKey)(t)in e||!a.hideOnExpand)}))}},{key:"render",value:function(){var e=this;this.cachedProps!==this.props&&(this.cachedProps=this.props,this.cachedBasePivotSettings=this.getBasePivotSettings());var r=this.cachedBasePivotSettings,a=r.colAttrs,n=r.rowAttrs,l=r.rowKeys,i=r.colKeys,s=r.colTotals,c=r.rowSubtotalDisplay,f=r.colSubtotalDisplay,p=t.subtotals?this.visibleKeys(l,this.state.collapsedRows,n.length,c):l,h=t.subtotals?this.visibleKeys(i,this.state.collapsedCols,a.length,f):i,d=Object.assign({visibleRowKeys:p,maxRowVisible:Math.max.apply(Math,u(p.map((function(t){return t.length})))),visibleColKeys:h,maxColVisible:Math.max.apply(Math,u(h.map((function(t){return t.length})))),rowAttrSpans:this.calcAttrSpans(p,n.length),colAttrSpans:this.calcAttrSpans(h,a.length)},this.cachedBasePivotSettings);return o.default.createElement("table",{className:"pvtTable"},o.default.createElement("thead",null,a.map((function(t,r){return e.renderColHeaderRow(t,r,d)})),0!==n.length&&this.renderRowHeaderRow(d)),o.default.createElement("tbody",null,p.map((function(t,r){return e.renderTableRow(t,r,d)})),s&&this.renderTotalsRow(d)))}}],[{key:"heatmapMappers",value:function(e,r,n,o){var l=function(){return{}},s=function(){return{}},u=function(){return{}};if(t.heatmapMode){if(n){var c=Object.values(e.colTotals).map((function(t){return t.value()}));u=r(c)}if(o){var f=Object.values(e.rowTotals).map((function(t){return t.value()}));s=r(f)}if("full"===t.heatmapMode){var p=[];Object.values(e.tree).map((function(t){return Object.values(t).map((function(t){return!t.isSubtotal&&p.push(t.value())}))}));var h=r(p);l=function(t,e,r){return h(r)}}else if("row"===t.heatmapMode){var d={};Object.entries(e.tree).map((function(t){var e=a(t,2),n=e[0],o=e[1],l=Object.values(o).map((function(t){return!t.isSubtotal&&t.value()}));d[n]=r(l)})),l=function(t,e,r){return d[(0,i.flatKey)(t)](r)}}else if("col"===t.heatmapMode){var g={},v={};for(var m in Object.values(e.tree).map((function(t){return Object.entries(t).map((function(t){var e=a(t,2),r=e[0],n=e[1];r in v||(v[r]=[]),n.isSubtotal||v[r].push(n.value())}))})),v)g[m]=r(v[m]);l=function(t,e,r){return g[(0,i.flatKey)(e)](r)}}}return{valueCellColors:l,rowTotalColors:s,colTotalColors:u}}},{key:"barchartMapper",value:function(e,r,n,o){var l={},s=function(t,e,r,a){return a},u=function(t,e){return e},c=function(t,e){return e};if(t.barchartMode){if(l={textAlign:"center",padding:0,paddingTop:"5px",height:"60px"},n){var f=Object.values(e.colTotals).filter((function(t){return!t.isSubtotal})).map((function(t){return t.value()}));c=r(f)}if(o){var p=Object.values(e.rowTotals).filter((function(t){return!t.isSubtotal})).map((function(t){return t.value()}));u=r(p)}if("full"===t.barchartMode){var h=[];Object.values(e.tree).map((function(t){return Object.values(t).map((function(t){return!t.isSubtotal&&h.push(t.value())}))}));var d=r(h);s=function(t,e,r,a){return d(r,a)}}else if("row"===t.barchartMode){var g={};Object.entries(e.tree).map((function(t){var e=a(t,2),n=e[0],o=e[1],l=Object.values(o).map((function(t){return!t.isSubtotal&&t.value()}));g[n]=r(l)})),s=function(t,e,r,a){return g[(0,i.flatKey)(t)](r,a)}}else if("col"===t.barchartMode){var v={},m={};for(var y in Object.values(e.tree).map((function(t){return Object.entries(t).map((function(t){var e=a(t,2),r=e[0],n=e[1];r in m||(m[r]=[]),n.isSubtotal||m[r].push(n.value())}))})),m)v[y]=r(m[y]);s=function(t,e,r,a){return v[(0,i.flatKey)(e)](r,a)}}}return{cellStyle:l,valueCellBar:s,rowTotalBar:u,colTotalBar:c}}}]),r}(o.default.Component);return e.defaultProps=i.PivotData.defaultProps,e.propTypes=i.PivotData.propTypes,e.defaultProps.tableColorScaleGenerator=d,e.defaultProps.barScaleGenerator=v,e.defaultProps.tableOptions={},e.propTypes.tableColorScaleGenerator=l.default.func,e.propTypes.tableOptions=l.default.object,e}var b=function(t){function e(){return f(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return h(e,t),n(e,[{key:"render",value:function(){var t=new i.PivotData(this.props),e=t.getRowKeys(),r=t.getColKeys();0===e.length&&e.push([]),0===r.length&&r.push([]);var a=t.props.rows.map((function(t){return t}));1===r.length&&0===r[0].length?a.push(this.props.aggregatorName):r.map((function(t){return a.push(t.join("-"))}));var n=e.map((function(e){var a=e.map((function(t){return t}));return r.map((function(r){var n=t.getAggregator(e,r).value();a.push(n||"")})),a}));return n.unshift(a),o.default.createElement("textarea",{value:n.map((function(t){return t.join("\t")})).join("\n"),style:{width:window.innerWidth/2,height:window.innerHeight/2},readOnly:!0})}}]),e}(o.default.PureComponent);b.defaultProps=i.PivotData.defaultProps,b.propTypes=i.PivotData.propTypes,e.default={Table:y(),"Table Heatmap":y({heatmapMode:"full"}),"Table Col Heatmap":y({heatmapMode:"col"}),"Table Row Heatmap":y({heatmapMode:"row"}),"Table Barchart":y({barchartMode:"full"}),"Table Col Barchart":y({barchartMode:"col"}),"Table Row Barchart":y({barchartMode:"row"}),"Table With Subtotal":y({subtotals:!0}),"Table With Subtotal Heatmap":y({heatmapMode:"full",subtotals:!0}),"Table With Subtotal Col Heatmap":y({heatmapMode:"col",subtotals:!0}),"Table With Subtotal Row Heatmap":y({heatmapMode:"row",subtotals:!0}),"Table With Subtotal Barchart":y({barchartMode:"full",subtotals:!0}),"Table With Subtotal Col Barchart":y({barchartMode:"col",subtotals:!0}),"Table With Subtotal Row Barchart":y({barchartMode:"row",subtotals:!0}),"Exportable TSV":b},t.exports=e.default},90108:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PivotData=e.flatKey=e.sortAs=e.getSort=e.numberFormat=e.naturalSort=e.locales=e.derivers=e.aggregators=e.aggregatorTemplates=void 0;var a,n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=(a=r(45697))&&a.__esModule?a:{default:a};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var u,c=function(t){var e=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},t);return function(t){if(isNaN(t)||!isFinite(t))return"";var r=function(t,e,r){for(var a=String(t).split("."),n=a[0],o=a.length>1?r+a[1]:"",l=/(\d+)(\d{3})/;l.test(n);)n=n.replace(l,"$1"+e+"$2");return n+o}((e.scaler*t).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep);return""+e.prefix+r+e.suffix}},f=/(\d+)|(\D+)/g,p=/\d/,h=/^0/,d=function(t,e){if(null!==e&&null===t)return-1;if(null!==t&&null===e)return 1;if("number"==typeof t&&isNaN(t))return-1;if("number"==typeof e&&isNaN(e))return 1;var r=Number(t),a=Number(e);if(r<a)return-1;if(r>a)return 1;if("number"==typeof t&&"number"!=typeof e)return-1;if("number"==typeof e&&"number"!=typeof t)return 1;if("number"==typeof t&&"number"==typeof e)return 0;if(isNaN(a)&&!isNaN(r))return-1;if(isNaN(r)&&!isNaN(a))return 1;var n=String(t),o=String(e);if(n===o)return 0;if(!p.test(n)||!p.test(o))return n>o?1:-1;for(n=n.match(f),o=o.match(f);n.length&&o.length;){var l=n.shift(),i=o.shift();if(l!==i)return p.test(l)&&p.test(i)?l.replace(h,".0")-i.replace(h,".0"):l>i?1:-1}return n.length-o.length},g=function(t,e){if(t)if("function"==typeof t){var r=t(e);if("function"==typeof r)return r}else if(e in t)return t[e];return d},v=c(),m=c({digitsAfterDecimal:0}),y=c({digitsAfterDecimal:1,scaler:100,suffix:"%"}),b={count:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return function(){return function(){return{count:0,push:function(){this.count++},value:function(){return this.count},format:t}}}},uniques:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return function(r){var a=o(r,1)[0];return function(){return{uniq:[],push:function(t){Array.from(this.uniq).includes(t[a])||this.uniq.push(t[a])},value:function(){return t(this.uniq)},format:e,numInputs:void 0!==a?0:1}}}},sum:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return function(e){var r=o(e,1)[0];return function(){return{sum:0,push:function(t){isNaN(parseFloat(t[r]))||(this.sum+=parseFloat(t[r]))},value:function(){return this.sum},format:t,numInputs:void 0!==r?0:1}}}},extremes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;return function(r){var a=o(r,1)[0];return function(r){return{val:null,sorter:g(void 0!==r?r.sorters:null,a),push:function(e){var r=e[a];["min","max"].includes(t)&&(r=parseFloat(r),isNaN(r)||(this.val=Math[t](r,null!==this.val?this.val:r))),"first"===t&&this.sorter(r,null!==this.val?this.val:r)<=0&&(this.val=r),"last"===t&&this.sorter(r,null!==this.val?this.val:r)>=0&&(this.val=r)},value:function(){return this.val},format:function(t){return isNaN(t)?t:e(t)},numInputs:void 0!==a?0:1}}}},quantile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;return function(r){var a=o(r,1)[0];return function(){return{vals:[],push:function(t){var e=parseFloat(t[a]);isNaN(e)||this.vals.push(e)},value:function(){if(0===this.vals.length)return null;this.vals.sort((function(t,e){return t-e}));var e=(this.vals.length-1)*t;return(this.vals[Math.floor(e)]+this.vals[Math.ceil(e)])/2},format:e,numInputs:void 0!==a?0:1}}}},runningStat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mean",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return function(a){var n=o(a,1)[0];return function(){return{n:0,m:0,s:0,push:function(t){var e=parseFloat(t[n]);if(!isNaN(e)){this.n+=1,1===this.n&&(this.m=e);var r=this.m+(e-this.m)/this.n;this.s=this.s+(e-this.m)*(e-r),this.m=r}},value:function(){if("mean"===t)return 0===this.n?NaN:this.m;if(this.n<=e)return 0;switch(t){case"var":return this.s/(this.n-e);case"stdev":return Math.sqrt(this.s/(this.n-e));default:throw new Error("unknown mode for runningStat")}},format:r,numInputs:void 0!==n?0:1}}}},sumOverSum:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return function(e){var r=o(e,2),a=r[0],n=r[1];return function(){return{sumNum:0,sumDenom:0,push:function(t){isNaN(parseFloat(t[a]))||(this.sumNum+=parseFloat(t[a])),isNaN(parseFloat(t[n]))||(this.sumDenom+=parseFloat(t[n]))},value:function(){return this.sumNum/this.sumDenom},format:t,numInputs:void 0!==a&&void 0!==n?0:2}}}},fractionOf:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"total",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return function(){for(var a=arguments.length,n=Array(a),o=0;o<a;o++)n[o]=arguments[o];return function(a,o,l){return{selector:{total:[[],[]],row:[o,[]],col:[[],l]}[e],inner:t.apply(void 0,s(Array.from(n||[])))(a,o,l),push:function(t){this.inner.push(t)},format:r,value:function(){return this.inner.value()/a.getAggregator.apply(a,s(Array.from(this.selector||[]))).inner.value()},numInputs:t.apply(void 0,s(Array.from(n||[])))().numInputs}}}},countUnique:function(t){return b.uniques((function(t){return t.length}),t)},listUnique:function(t,e){return b.uniques((function(e){return e.join(t)}),e||function(t){return t})},max:function(t){return b.extremes("max",t)},min:function(t){return b.extremes("min",t)},first:function(t){return b.extremes("first",t)},last:function(t){return b.extremes("last",t)},median:function(t){return b.quantile(.5,t)},average:function(t){return b.runningStat("mean",1,t)},var:function(t,e){return b.runningStat("var",t,e)},stdev:function(t,e){return b.runningStat("stdev",t,e)}},w={Count:(u=b).count(m),"Count Unique Values":u.countUnique(m),"List Unique Values":u.listUnique(", "),Sum:u.sum(v),"Integer Sum":u.sum(m),Average:u.average(v),Median:u.median(v),"Sample Variance":u.var(1,v),"Sample Standard Deviation":u.stdev(1,v),Minimum:u.min(v),Maximum:u.max(v),First:u.first(v),Last:u.last(v),"Sum over Sum":u.sumOverSum(v),"Sum as Fraction of Total":u.fractionOf(u.sum(),"total",y),"Sum as Fraction of Rows":u.fractionOf(u.sum(),"row",y),"Sum as Fraction of Columns":u.fractionOf(u.sum(),"col",y),"Count as Fraction of Total":u.fractionOf(u.count(),"total",y),"Count as Fraction of Rows":u.fractionOf(u.count(),"row",y),"Count as Fraction of Columns":u.fractionOf(u.count(),"col",y)},O={en:{aggregators:w,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",apply:"Apply",cancel:"Cancel",totals:"Totals",vs:"vs",by:"by"}}},S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=function(t){return("0"+t).substr(-2,2)},C={bin:function(t,e){return function(r){return r[t]-r[t]%e}},dateFormat:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T,o=r?"UTC":"";return function(r){var l=new Date(Date.parse(r[t]));return isNaN(l)?"":e.replace(/%(.)/g,(function(t,e){switch(e){case"y":return l["get"+o+"FullYear"]();case"m":return k(l["get"+o+"Month"]()+1);case"n":return a[l["get"+o+"Month"]()];case"d":return k(l["get"+o+"Date"]());case"w":return n[l["get"+o+"Day"]()];case"x":return l["get"+o+"Day"]();case"H":return k(l["get"+o+"Hours"]());case"M":return k(l["get"+o+"Minutes"]());case"S":return k(l["get"+o+"Seconds"]());default:return"%"+e}}))}}},A=function(t){return t.join(String.fromCharCode(0))},M=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.props=Object.assign({},t.defaultProps,r),l.default.checkPropTypes(t.propTypes,this.props,"prop","PivotData"),this.aggregator=this.props.aggregatorsFactory(this.props.defaultFormatter)[this.props.aggregatorName](this.props.vals),this.formattedAggregators=this.props.customFormatters&&Object.entries(this.props.customFormatters).reduce((function(t,r){var a=o(r,2),n=a[0],l=a[1];return t[n]={},Object.entries(l).forEach((function(r){var a=o(r,2),l=a[0],i=a[1];t[n][l]=e.props.aggregatorsFactory(i)[e.props.aggregatorName](e.props.vals)})),t}),{}),this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(this,[],[]),this.subtotals=a,this.sorted=!1,t.forEachRecord(this.props.data,this.props.derivedAttributes,(function(t){e.filter(t)&&e.processRecord(t)}))}return n(t,[{key:"filter",value:function(t){for(var e in this.props.valueFilter)if(t[e]in this.props.valueFilter[e])return!1;return!0}},{key:"getFormattedAggregator",value:function(t,e){var r=this;if(!this.formattedAggregators)return this.aggregator;var a=Object.entries(t).find((function(t){var e=o(t,2),a=e[0],n=e[1];return r.formattedAggregators[a]&&r.formattedAggregators[a][n]}))||[],n=o(a,2),l=n[0],i=n[1];return!l||!i||e&&!e.includes(i)?this.aggregator:this.formattedAggregators[l][i]||this.aggregator}},{key:"forEachMatchingRecord",value:function(e,r){var a=this;return t.forEachRecord(this.props.data,this.props.derivedAttributes,(function(t){if(a.filter(t)){for(var n in e)if(e[n]!==(n in t?t[n]:"null"))return;r(t)}}))}},{key:"arrSort",value:function(t,e){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map((function(t){return g(r.props.sorters,t)}));return function(t,r){for(var o=Math.min(t.length,r.length),l=0;l<o;l++){var i=n[l],s=a?i(r[l],t[l]):i(t[l],r[l]);if(0!==s)return s}return e?t.length-r.length:r.length-t.length}}},{key:"sortKeys",value:function(){var t=this;if(!this.sorted){this.sorted=!0;var e=function(e,r){return t.getAggregator(e,r).value()};switch(this.props.rowOrder){case"key_z_to_a":this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop,!0));break;case"value_a_to_z":this.rowKeys.sort((function(t,r){return d(e(t,[]),e(r,[]))}));break;case"value_z_to_a":this.rowKeys.sort((function(t,r){return-d(e(t,[]),e(r,[]))}));break;default:this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop))}switch(this.props.colOrder){case"key_z_to_a":this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop,!0));break;case"value_a_to_z":this.colKeys.sort((function(t,r){return d(e([],t),e([],r))}));break;case"value_z_to_a":this.colKeys.sort((function(t,r){return-d(e([],t),e([],r))}));break;default:this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop))}}}},{key:"getColKeys",value:function(){return this.sortKeys(),this.colKeys}},{key:"getRowKeys",value:function(){return this.sortKeys(),this.rowKeys}},{key:"processRecord",value:function(t){var e=[],r=[],a=!0,n=!1,o=void 0;try{for(var l,i=this.props.cols[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;e.push(s in t?t[s]:"null")}}catch(t){n=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}var u=!0,c=!1,f=void 0;try{for(var p,h=this.props.rows[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var d=p.value;r.push(d in t?t[d]:"null")}}catch(t){c=!0,f=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw f}}this.allTotal.push(t);for(var g=this.subtotals.rowEnabled?1:Math.max(1,r.length),v=this.subtotals.colEnabled?1:Math.max(1,e.length),m=void 0,y=void 0,b=g;b<=r.length;b++){m=b<r.length;var w=r.slice(0,b),O=A(w);this.rowTotals[O]||(this.rowKeys.push(w),this.rowTotals[O]=this.getFormattedAggregator(t,r)(this,w,[])),this.rowTotals[O].push(t),this.rowTotals[O].isSubtotal=m}for(var S=v;S<=e.length;S++){y=S<e.length;var T=e.slice(0,S),k=A(T);this.colTotals[k]||(this.colKeys.push(T),this.colTotals[k]=this.getFormattedAggregator(t,e)(this,[],T)),this.colTotals[k].push(t),this.colTotals[k].isSubtotal=y}for(var C=g;C<=r.length;C++){m=C<r.length;var M=r.slice(0,C),j=A(M);this.tree[j]||(this.tree[j]={});for(var _=v;_<=e.length;_++){y=_<e.length;var N=e.slice(0,_),x=A(N);this.tree[j][x]||(this.tree[j][x]=this.getFormattedAggregator(t)(this,M,N)),this.tree[j][x].push(t),this.tree[j][x].isRowSubtotal=m,this.tree[j][x].isColSubtotal=y,this.tree[j][x].isSubtotal=m||y}}}},{key:"getAggregator",value:function(t,e){var r=A(t),a=A(e);return(0===t.length&&0===e.length?this.allTotal:0===t.length?this.colTotals[a]:0===e.length?this.rowTotals[r]:this.tree[r][a])||{value:function(){return null},format:function(){return""}}}}]),t}();M.forEachRecord=function(t,e,r){var a=void 0,n=void 0;if(a=0===Object.getOwnPropertyNames(e).length?r:function(t){for(var a in e){var n=e[a](t);null!==n&&(t[a]=n)}return r(t)},"function"==typeof t)return t(a);if(Array.isArray(t))return Array.isArray(t[0])?function(){var e=[],r=!0,o=!1,l=void 0;try{for(var i,s=Object.keys(t||{})[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value,c=t[u];if(u>0){n={};var f=!0,p=!1,h=void 0;try{for(var d,g=Object.keys(t[0]||{})[Symbol.iterator]();!(f=(d=g.next()).done);f=!0){var v=d.value,m=t[0][v];n[m]=c[v]}}catch(t){p=!0,h=t}finally{try{!f&&g.return&&g.return()}finally{if(p)throw h}}e.push(a(n))}}}catch(t){o=!0,l=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw l}}return e}():function(){var e=[],r=!0,o=!1,l=void 0;try{for(var i,s=Array.from(t)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)n=i.value,e.push(a(n))}catch(t){o=!0,l=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw l}}return e}();throw new Error("unknown input format")},M.defaultProps={aggregators:w,cols:[],rows:[],vals:[],aggregatorName:"Count",sorters:{},valueFilter:{},rowOrder:"key_a_to_z",colOrder:"key_a_to_z",derivedAttributes:{}},M.propTypes={data:l.default.oneOfType([l.default.array,l.default.object,l.default.func]).isRequired,aggregatorName:l.default.string,cols:l.default.arrayOf(l.default.string),rows:l.default.arrayOf(l.default.string),vals:l.default.arrayOf(l.default.string),valueFilter:l.default.objectOf(l.default.objectOf(l.default.bool)),sorters:l.default.oneOfType([l.default.func,l.default.objectOf(l.default.func)]),derivedAttributes:l.default.objectOf(l.default.func),rowOrder:l.default.oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"]),colOrder:l.default.oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"])},e.aggregatorTemplates=b,e.aggregators=w,e.derivers=C,e.locales=O,e.naturalSort=d,e.numberFormat=c,e.getSort=g,e.sortAs=function(t){var e={},r={};for(var a in t){var n=t[a];e[n]=a,"string"==typeof n&&(r[n.toLowerCase()]=a)}return function(t,a){return t in e&&a in e?e[t]-e[a]:t in e?-1:a in e?1:t in r&&a in r?r[t]-r[a]:t in r?-1:a in r?1:d(t,a)}},e.flatKey=A,e.PivotData=M}}]);