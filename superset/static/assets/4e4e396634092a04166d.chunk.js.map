{"version":3,"file":"4e4e396634092a04166d.chunk.js","mappings":"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","sources":["webpack://superset/./src/components/DatabaseSelector/index.tsx","webpack://superset/./src/components/ImportModal/styles.ts","webpack://superset/./src/components/ImportModal/ErrorAlert.tsx","webpack://superset/./src/components/ImportModal/index.tsx","webpack://superset/./src/components/RefreshLabel/index.tsx","webpack://superset/./src/components/TableSelector/index.tsx","webpack://superset/./src/views/CRUD/data/common.ts","webpack://superset/./src/views/CRUD/data/dataset/AddDatasetModal.tsx","webpack://superset/./src/views/CRUD/data/dataset/DatasetList.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode, useState, useMemo, useEffect } from 'react';\nimport { styled, SupersetClient, t } from '@superset-ui/core';\nimport rison from 'rison';\nimport { Select } from 'src/components';\nimport Label from 'src/components/Label';\nimport { FormLabel } from 'src/components/Form';\nimport RefreshLabel from 'src/components/RefreshLabel';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\n\nconst DatabaseSelectorWrapper = styled.div`\n  ${({ theme }) => `\n    .refresh {\n      display: flex;\n      align-items: center;\n      width: 30px;\n      margin-left: ${theme.gridUnit}px;\n      margin-top: ${theme.gridUnit * 5}px;\n    }\n\n    .section {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n\n    .select {\n      width: calc(100% - 30px - ${theme.gridUnit}px);\n      flex: 1;\n    }\n\n    & > div {\n      margin-bottom: ${theme.gridUnit * 4}px;\n    }\n  `}\n`;\n\nconst LabelStyle = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-left: ${({ theme }) => theme.gridUnit - 2}px;\n\n  .backend {\n    overflow: visible;\n  }\n\n  .name {\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\n\ntype DatabaseValue = {\n  label: React.ReactNode;\n  value: number;\n  id: number;\n  database_name: string;\n  backend: string;\n  allow_multi_schema_metadata_fetch: boolean;\n};\n\nexport type DatabaseObject = {\n  id: number;\n  database_name: string;\n  backend: string;\n  allow_multi_schema_metadata_fetch: boolean;\n};\n\ntype SchemaValue = { label: string; value: string };\n\nexport interface DatabaseSelectorProps {\n  db?: DatabaseObject;\n  emptyState?: ReactNode;\n  formMode?: boolean;\n  getDbList?: (arg0: any) => {};\n  handleError: (msg: string) => void;\n  isDatabaseSelectEnabled?: boolean;\n  onDbChange?: (db: DatabaseObject) => void;\n  onEmptyResults?: (searchText?: string) => void;\n  onSchemaChange?: (schema?: string) => void;\n  onSchemasLoad?: (schemas: Array<object>) => void;\n  readOnly?: boolean;\n  schema?: string;\n  sqlLabMode?: boolean;\n}\n\nconst SelectLabel = ({\n  backend,\n  databaseName,\n}: {\n  backend: string;\n  databaseName: string;\n}) => (\n  <LabelStyle>\n    <Label className=\"backend\">{backend}</Label>\n    <span className=\"name\" title={databaseName}>\n      {databaseName}\n    </span>\n  </LabelStyle>\n);\n\nexport default function DatabaseSelector({\n  db,\n  formMode = false,\n  emptyState,\n  getDbList,\n  handleError,\n  isDatabaseSelectEnabled = true,\n  onDbChange,\n  onEmptyResults,\n  onSchemaChange,\n  onSchemasLoad,\n  readOnly = false,\n  schema,\n  sqlLabMode = false,\n}: DatabaseSelectorProps) {\n  const [loadingSchemas, setLoadingSchemas] = useState(false);\n  const [schemaOptions, setSchemaOptions] = useState<SchemaValue[]>([]);\n  const [currentDb, setCurrentDb] = useState<DatabaseValue | undefined>(\n    db\n      ? {\n          label: (\n            <SelectLabel backend={db.backend} databaseName={db.database_name} />\n          ),\n          value: db.id,\n          ...db,\n        }\n      : undefined,\n  );\n  const [currentSchema, setCurrentSchema] = useState<SchemaValue | undefined>(\n    schema ? { label: schema, value: schema } : undefined,\n  );\n  const [refresh, setRefresh] = useState(0);\n  const { addSuccessToast } = useToasts();\n\n  const loadDatabases = useMemo(\n    () =>\n      async (\n        search: string,\n        page: number,\n        pageSize: number,\n      ): Promise<{\n        data: DatabaseValue[];\n        totalCount: number;\n      }> => {\n        const queryParams = rison.encode({\n          order_columns: 'database_name',\n          order_direction: 'asc',\n          page,\n          page_size: pageSize,\n          ...(formMode || !sqlLabMode\n            ? { filters: [{ col: 'database_name', opr: 'ct', value: search }] }\n            : {\n                filters: [\n                  { col: 'database_name', opr: 'ct', value: search },\n                  {\n                    col: 'expose_in_sqllab',\n                    opr: 'eq',\n                    value: true,\n                  },\n                ],\n              }),\n        });\n        const endpoint = `/api/v1/database/?q=${queryParams}`;\n        return SupersetClient.get({ endpoint }).then(({ json }) => {\n          const { result } = json;\n          if (getDbList) {\n            getDbList(result);\n          }\n          if (result.length === 0) {\n            if (onEmptyResults) onEmptyResults(search);\n          }\n          const options = result.map((row: DatabaseObject) => ({\n            label: (\n              <SelectLabel\n                backend={row.backend}\n                databaseName={row.database_name}\n              />\n            ),\n            value: row.id,\n            id: row.id,\n            database_name: row.database_name,\n            backend: row.backend,\n            allow_multi_schema_metadata_fetch:\n              row.allow_multi_schema_metadata_fetch,\n          }));\n\n          return {\n            data: options,\n            totalCount: options.length,\n          };\n        });\n      },\n    [formMode, getDbList, sqlLabMode],\n  );\n\n  useEffect(() => {\n    if (currentDb) {\n      setLoadingSchemas(true);\n      const queryParams = rison.encode({ force: refresh > 0 });\n      const endpoint = `/api/v1/database/${currentDb.value}/schemas/?q=${queryParams}`;\n\n      // TODO: Would be nice to add pagination in a follow-up. Needs endpoint changes.\n      SupersetClient.get({ endpoint })\n        .then(({ json }) => {\n          const options = json.result.map((s: string) => ({\n            value: s,\n            label: s,\n            title: s,\n          }));\n          if (onSchemasLoad) {\n            onSchemasLoad(options);\n          }\n          setSchemaOptions(options);\n          setLoadingSchemas(false);\n          if (refresh > 0) addSuccessToast('List refreshed');\n        })\n        .catch(() => {\n          setLoadingSchemas(false);\n          handleError(t('There was an error loading the schemas'));\n        });\n    }\n  }, [currentDb, onSchemasLoad, refresh]);\n\n  function changeDataBase(\n    value: { label: string; value: number },\n    database: DatabaseValue,\n  ) {\n    setCurrentDb(database);\n    setCurrentSchema(undefined);\n    if (onDbChange) {\n      onDbChange(database);\n    }\n    if (onSchemaChange) {\n      onSchemaChange(undefined);\n    }\n  }\n\n  function changeSchema(schema: SchemaValue) {\n    setCurrentSchema(schema);\n    if (onSchemaChange) {\n      onSchemaChange(schema.value);\n    }\n  }\n\n  function renderSelectRow(select: ReactNode, refreshBtn: ReactNode) {\n    return (\n      <div className=\"section\">\n        <span className=\"select\">{select}</span>\n        <span className=\"refresh\">{refreshBtn}</span>\n      </div>\n    );\n  }\n\n  function renderDatabaseSelect() {\n    return renderSelectRow(\n      <Select\n        ariaLabel={t('Select database or type database name')}\n        optionFilterProps={['database_name', 'value']}\n        data-test=\"select-database\"\n        header={<FormLabel>{t('Database')}</FormLabel>}\n        lazyLoading={false}\n        notFoundContent={emptyState}\n        onChange={changeDataBase}\n        value={currentDb}\n        placeholder={t('Select database or type database name')}\n        disabled={!isDatabaseSelectEnabled || readOnly}\n        options={loadDatabases}\n      />,\n      null,\n    );\n  }\n\n  function renderSchemaSelect() {\n    const refreshIcon = !formMode && !readOnly && (\n      <RefreshLabel\n        onClick={() => setRefresh(refresh + 1)}\n        tooltipContent={t('Force refresh schema list')}\n      />\n    );\n    return renderSelectRow(\n      <Select\n        ariaLabel={t('Select schema or type schema name')}\n        disabled={!currentDb || readOnly}\n        header={<FormLabel>{t('Schema')}</FormLabel>}\n        labelInValue\n        lazyLoading={false}\n        loading={loadingSchemas}\n        name=\"select-schema\"\n        placeholder={t('Select schema or type schema name')}\n        onChange={item => changeSchema(item as SchemaValue)}\n        options={schemaOptions}\n        showSearch\n        value={currentSchema}\n      />,\n      refreshIcon,\n    );\n  }\n\n  return (\n    <DatabaseSelectorWrapper data-test=\"DatabaseSelector\">\n      {renderDatabaseSelect()}\n      {renderSchemaSelect()}\n    </DatabaseSelectorWrapper>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { css, SupersetTheme } from '@superset-ui/core';\n\nexport const antdWarningAlertStyles = (theme: SupersetTheme) => css`\n  border: 1px solid ${theme.colors.warning.light1};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 4}px 0;\n  color: ${theme.colors.warning.dark2};\n\n  .ant-alert-message {\n    margin: 0;\n  }\n\n  .ant-alert-description {\n    font-size: ${theme.typography.sizes.s + 1}px;\n    line-height: ${theme.gridUnit * 4}px;\n\n    .ant-alert-icon {\n      margin-right: ${theme.gridUnit * 2.5}px;\n      font-size: ${theme.typography.sizes.l + 1}px;\n      position: relative;\n      top: ${theme.gridUnit / 4}px;\n    }\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { FunctionComponent } from 'react';\nimport { t, SupersetTheme } from '@superset-ui/core';\n\nimport { getDatabaseDocumentationLinks } from 'src/views/CRUD/hooks';\nimport Alert from 'src/components/Alert';\nimport { antdWarningAlertStyles } from './styles';\n\nconst supersetTextDocs = getDatabaseDocumentationLinks();\nexport const DOCUMENTATION_LINK = supersetTextDocs\n  ? supersetTextDocs.support\n  : 'https://superset.apache.org/docs/databases/installing-database-drivers';\n\nexport interface IProps {\n  errorMessage: string;\n  showDbInstallInstructions: boolean;\n}\n\nconst ErrorAlert: FunctionComponent<IProps> = ({\n  errorMessage,\n  showDbInstallInstructions,\n}) => (\n  <Alert\n    closable={false}\n    css={(theme: SupersetTheme) => antdWarningAlertStyles(theme)}\n    type=\"error\"\n    showIcon\n    message={errorMessage}\n    description={\n      showDbInstallInstructions ? (\n        <>\n          <br />\n          {t(\n            'Database driver for importing maybe not installed. Visit the Superset documentation page for installation instructions:',\n          )}\n          <a\n            href={DOCUMENTATION_LINK}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"additional-fields-alert-description\"\n          >\n            {t('here')}\n          </a>\n          .\n        </>\n      ) : (\n        ''\n      )\n    }\n  />\n);\n\nexport default ErrorAlert;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FunctionComponent, useEffect, useState } from 'react';\nimport { UploadChangeParam, UploadFile } from 'antd/lib/upload/interface';\nimport { styled, t } from '@superset-ui/core';\n\nimport Button from 'src/components/Button';\nimport Modal from 'src/components/Modal';\nimport { Upload } from 'src/components';\nimport { useImportResource } from 'src/views/CRUD/hooks';\nimport { ImportResourceName } from 'src/views/CRUD/types';\nimport ErrorAlert from './ErrorAlert';\n\nconst HelperMessage = styled.div`\n  display: block;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n`;\n\nconst StyledInputContainer = styled.div`\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\n\n  & > div {\n    margin: ${({ theme }) => theme.gridUnit}px 0;\n  }\n\n  &.extra-container {\n    padding-top: 8px;\n  }\n\n  .confirm-overwrite {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  .input-container {\n    display: flex;\n    align-items: center;\n\n    label {\n      display: flex;\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n\n    i {\n      margin: 0 ${({ theme }) => theme.gridUnit}px;\n    }\n  }\n\n  input,\n  textarea {\n    flex: 1 1 auto;\n  }\n\n  textarea {\n    height: 160px;\n    resize: none;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n  }\n\n  textarea,\n  input[type='text'],\n  input[type='number'] {\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 2}px;\n    border-style: none;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n\n    &[name='name'] {\n      flex: 0 1 auto;\n      width: 40%;\n    }\n\n    &[name='sqlalchemy_uri'] {\n      margin-right: ${({ theme }) => theme.gridUnit * 3}px;\n    }\n  }\n`;\n\nexport interface ImportModelsModalProps {\n  resourceName: ImportResourceName;\n  resourceLabel: string;\n  passwordsNeededMessage: string;\n  confirmOverwriteMessage: string;\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  onModelImport: () => void;\n  show: boolean;\n  onHide: () => void;\n  passwordFields?: string[];\n  setPasswordFields?: (passwordFields: string[]) => void;\n}\n\nconst ImportModelsModal: FunctionComponent<ImportModelsModalProps> = ({\n  resourceName,\n  resourceLabel,\n  passwordsNeededMessage,\n  confirmOverwriteMessage,\n  onModelImport,\n  show,\n  onHide,\n  passwordFields = [],\n  setPasswordFields = () => {},\n}) => {\n  const [isHidden, setIsHidden] = useState<boolean>(true);\n  const [passwords, setPasswords] = useState<Record<string, string>>({});\n  const [needsOverwriteConfirm, setNeedsOverwriteConfirm] =\n    useState<boolean>(false);\n  const [confirmedOverwrite, setConfirmedOverwrite] = useState<boolean>(false);\n  const [fileList, setFileList] = useState<UploadFile[]>([]);\n  const [importingModel, setImportingModel] = useState<boolean>(false);\n  const [errorMessage, setErrorMessage] = useState<string>();\n\n  const clearModal = () => {\n    setFileList([]);\n    setPasswordFields([]);\n    setPasswords({});\n    setNeedsOverwriteConfirm(false);\n    setConfirmedOverwrite(false);\n    setImportingModel(false);\n    setErrorMessage('');\n  };\n\n  const handleErrorMsg = (msg: string) => {\n    setErrorMessage(msg);\n  };\n\n  const {\n    state: { alreadyExists, passwordsNeeded },\n    importResource,\n  } = useImportResource(resourceName, resourceLabel, handleErrorMsg);\n\n  useEffect(() => {\n    setPasswordFields(passwordsNeeded);\n    if (passwordsNeeded.length > 0) {\n      setImportingModel(false);\n    }\n  }, [passwordsNeeded, setPasswordFields]);\n\n  useEffect(() => {\n    setNeedsOverwriteConfirm(alreadyExists.length > 0);\n    if (alreadyExists.length > 0) {\n      setImportingModel(false);\n    }\n  }, [alreadyExists, setNeedsOverwriteConfirm]);\n\n  // Functions\n  const hide = () => {\n    setIsHidden(true);\n    onHide();\n    clearModal();\n  };\n\n  const onUpload = () => {\n    if (!(fileList[0]?.originFileObj instanceof File)) {\n      return;\n    }\n\n    setImportingModel(true);\n    importResource(\n      fileList[0].originFileObj,\n      passwords,\n      confirmedOverwrite,\n    ).then(result => {\n      if (result) {\n        clearModal();\n        onModelImport();\n      }\n    });\n  };\n\n  const changeFile = (info: UploadChangeParam) => {\n    setFileList([\n      {\n        ...info.file,\n        status: 'done',\n      },\n    ]);\n  };\n\n  const removeFile = (removedFile: UploadFile) => {\n    setFileList(fileList.filter(file => file.uid !== removedFile.uid));\n    return false;\n  };\n\n  const confirmOverwrite = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const targetValue = (event.currentTarget?.value as string) ?? '';\n    setConfirmedOverwrite(targetValue.toUpperCase() === t('OVERWRITE'));\n  };\n\n  const renderPasswordFields = () => {\n    if (passwordFields.length === 0) {\n      return null;\n    }\n\n    return (\n      <>\n        <h5>Database passwords</h5>\n        <HelperMessage>{passwordsNeededMessage}</HelperMessage>\n        {passwordFields.map(fileName => (\n          <StyledInputContainer key={`password-for-${fileName}`}>\n            <div className=\"control-label\">\n              {fileName}\n              <span className=\"required\">*</span>\n            </div>\n            <input\n              name={`password-${fileName}`}\n              autoComplete={`password-${fileName}`}\n              type=\"password\"\n              value={passwords[fileName]}\n              onChange={event =>\n                setPasswords({ ...passwords, [fileName]: event.target.value })\n              }\n            />\n          </StyledInputContainer>\n        ))}\n      </>\n    );\n  };\n\n  const renderOverwriteConfirmation = () => {\n    if (!needsOverwriteConfirm) {\n      return null;\n    }\n\n    return (\n      <>\n        <StyledInputContainer>\n          <div className=\"confirm-overwrite\">{confirmOverwriteMessage}</div>\n          <div className=\"control-label\">\n            {t('Type \"%s\" to confirm', t('OVERWRITE'))}\n          </div>\n          <input\n            data-test=\"overwrite-modal-input\"\n            id=\"overwrite\"\n            type=\"text\"\n            onChange={confirmOverwrite}\n          />\n        </StyledInputContainer>\n      </>\n    );\n  };\n\n  // Show/hide\n  if (isHidden && show) {\n    setIsHidden(false);\n  }\n\n  return (\n    <Modal\n      name=\"model\"\n      className=\"import-model-modal\"\n      disablePrimaryButton={\n        fileList.length === 0 ||\n        (needsOverwriteConfirm && !confirmedOverwrite) ||\n        importingModel\n      }\n      onHandledPrimaryAction={onUpload}\n      onHide={hide}\n      primaryButtonName={needsOverwriteConfirm ? t('Overwrite') : t('Import')}\n      primaryButtonType={needsOverwriteConfirm ? 'danger' : 'primary'}\n      width=\"750px\"\n      show={show}\n      title={<h4>{t('Import %s', resourceLabel)}</h4>}\n    >\n      <StyledInputContainer>\n        <Upload\n          name=\"modelFile\"\n          id=\"modelFile\"\n          data-test=\"model-file-input\"\n          accept=\".yaml,.json,.yml,.zip\"\n          fileList={fileList}\n          onChange={changeFile}\n          onRemove={removeFile}\n          // upload is handled by hook\n          customRequest={() => {}}\n          disabled={importingModel}\n        >\n          <Button loading={importingModel}>Select file</Button>\n        </Upload>\n      </StyledInputContainer>\n      {errorMessage && (\n        <ErrorAlert\n          errorMessage={errorMessage}\n          showDbInstallInstructions={passwordFields.length > 0}\n        />\n      )}\n      {renderPasswordFields()}\n      {renderOverwriteConfirmation()}\n    </Modal>\n  );\n};\n\nexport default ImportModelsModal;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { MouseEventHandler, forwardRef } from 'react';\nimport { SupersetTheme } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons, { IconType } from 'src/components/Icons';\n\nexport interface RefreshLabelProps {\n  onClick: MouseEventHandler<HTMLSpanElement>;\n  tooltipContent: string;\n}\n\nconst RefreshLabel = ({ onClick, tooltipContent }: RefreshLabelProps) => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const IconWithoutRef = forwardRef((props: IconType, ref: any) => (\n    <Icons.Refresh {...props} />\n  ));\n\n  return (\n    <Tooltip title={tooltipContent}>\n      <IconWithoutRef\n        role=\"button\"\n        onClick={onClick}\n        css={(theme: SupersetTheme) => ({\n          cursor: 'pointer',\n          color: theme.colors.grayscale.base,\n          '&:hover': { color: theme.colors.primary.base },\n        })}\n      />\n    </Tooltip>\n  );\n};\n\nexport default RefreshLabel;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  FunctionComponent,\n  useState,\n  ReactNode,\n  useMemo,\n  useEffect,\n} from 'react';\nimport { SelectValue } from 'antd/lib/select';\n\nimport { styled, SupersetClient, t } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport Icons from 'src/components/Icons';\nimport DatabaseSelector, {\n  DatabaseObject,\n} from 'src/components/DatabaseSelector';\nimport RefreshLabel from 'src/components/RefreshLabel';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\n\nconst TableSelectorWrapper = styled.div`\n  ${({ theme }) => `\n    .refresh {\n      display: flex;\n      align-items: center;\n      width: 30px;\n      margin-left: ${theme.gridUnit}px;\n      margin-top: ${theme.gridUnit * 5}px;\n    }\n\n    .section {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n\n    .divider {\n      border-bottom: 1px solid ${theme.colors.secondary.light5};\n      margin: 15px 0;\n    }\n\n    .table-length {\n      color: ${theme.colors.grayscale.light1};\n    }\n\n    .select {\n      flex: 1;\n    }\n  `}\n`;\n\nconst TableLabel = styled.span`\n  align-items: center;\n  display: flex;\n  white-space: nowrap;\n\n  svg,\n  small {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\ninterface TableSelectorProps {\n  clearable?: boolean;\n  database?: DatabaseObject;\n  emptyState?: ReactNode;\n  formMode?: boolean;\n  getDbList?: (arg0: any) => {};\n  handleError: (msg: string) => void;\n  isDatabaseSelectEnabled?: boolean;\n  onDbChange?: (db: DatabaseObject) => void;\n  onSchemaChange?: (schema?: string) => void;\n  onSchemasLoad?: () => void;\n  onTablesLoad?: (options: Array<any>) => void;\n  readOnly?: boolean;\n  schema?: string;\n  onEmptyResults?: (searchText?: string) => void;\n  sqlLabMode?: boolean;\n  tableValue?: string | string[];\n  onTableSelectChange?: (value?: string | string[], schema?: string) => void;\n  tableSelectMode?: 'single' | 'multiple';\n}\n\ninterface Table {\n  label: string;\n  value: string;\n  type: string;\n  extra?: {\n    certification?: {\n      certified_by: string;\n      details: string;\n    };\n    warning_markdown?: string;\n  };\n}\n\ninterface TableOption {\n  label: JSX.Element;\n  text: string;\n  value: string;\n}\n\nconst TableOption = ({ table }: { table: Table }) => {\n  const { label, type, extra } = table;\n  return (\n    <TableLabel title={label}>\n      {type === 'view' ? (\n        <Icons.Eye iconSize=\"m\" />\n      ) : (\n        <Icons.Table iconSize=\"m\" />\n      )}\n      {extra?.certification && (\n        <CertifiedBadge\n          certifiedBy={extra.certification.certified_by}\n          details={extra.certification.details}\n          size=\"l\"\n        />\n      )}\n      {extra?.warning_markdown && (\n        <WarningIconWithTooltip\n          warningMarkdown={extra.warning_markdown}\n          size=\"l\"\n        />\n      )}\n      {label}\n    </TableLabel>\n  );\n};\n\nconst TableSelector: FunctionComponent<TableSelectorProps> = ({\n  database,\n  emptyState,\n  formMode = false,\n  getDbList,\n  handleError,\n  isDatabaseSelectEnabled = true,\n  onDbChange,\n  onSchemaChange,\n  onSchemasLoad,\n  onTablesLoad,\n  readOnly = false,\n  onEmptyResults,\n  schema,\n  sqlLabMode = true,\n  tableSelectMode = 'single',\n  tableValue = undefined,\n  onTableSelectChange,\n}) => {\n  const [currentDatabase, setCurrentDatabase] = useState<\n    DatabaseObject | undefined\n  >(database);\n  const [currentSchema, setCurrentSchema] = useState<string | undefined>(\n    schema,\n  );\n\n  const [tableOptions, setTableOptions] = useState<TableOption[]>([]);\n  const [tableSelectValue, setTableSelectValue] = useState<\n    SelectValue | undefined\n  >(undefined);\n  const [refresh, setRefresh] = useState(0);\n  const [previousRefresh, setPreviousRefresh] = useState(0);\n  const [loadingTables, setLoadingTables] = useState(false);\n  const { addSuccessToast } = useToasts();\n\n  useEffect(() => {\n    // reset selections\n    if (database === undefined) {\n      setCurrentDatabase(undefined);\n      setCurrentSchema(undefined);\n      setTableSelectValue(undefined);\n    }\n  }, [database, tableSelectMode]);\n\n  useEffect(() => {\n    if (tableSelectMode === 'single') {\n      setTableSelectValue(\n        tableOptions.find(option => option.value === tableValue),\n      );\n    } else {\n      setTableSelectValue(\n        tableOptions?.filter(\n          option => option && tableValue?.includes(option.value),\n        ) || [],\n      );\n    }\n  }, [tableOptions, tableValue, tableSelectMode]);\n\n  useEffect(() => {\n    if (currentDatabase && currentSchema) {\n      setLoadingTables(true);\n      const encodedSchema = encodeURIComponent(currentSchema);\n      const forceRefresh = refresh !== previousRefresh;\n      // TODO: Would be nice to add pagination in a follow-up. Needs endpoint changes.\n      const endpoint = encodeURI(\n        `/superset/tables/${currentDatabase.id}/${encodedSchema}/undefined/${forceRefresh}/`,\n      );\n\n      if (previousRefresh !== refresh) {\n        setPreviousRefresh(refresh);\n      }\n\n      SupersetClient.get({ endpoint })\n        .then(({ json }) => {\n          const options: TableOption[] = json.options.map((table: Table) => {\n            const option: TableOption = {\n              value: table.value,\n              label: <TableOption table={table} />,\n              text: table.label,\n            };\n\n            return option;\n          });\n\n          onTablesLoad?.(json.options);\n          setTableOptions(options);\n          setLoadingTables(false);\n          if (forceRefresh) addSuccessToast('List updated');\n        })\n        .catch(() => {\n          setLoadingTables(false);\n          handleError(t('There was an error loading the tables'));\n        });\n    }\n    // We are using the refresh state to re-trigger the query\n    // previousRefresh should be out of dependencies array\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentDatabase, currentSchema, onTablesLoad, setTableOptions, refresh]);\n\n  function renderSelectRow(select: ReactNode, refreshBtn: ReactNode) {\n    return (\n      <div className=\"section\">\n        <span className=\"select\">{select}</span>\n        <span className=\"refresh\">{refreshBtn}</span>\n      </div>\n    );\n  }\n\n  const internalTableChange = (\n    selectedOptions: TableOption | TableOption[] | undefined,\n  ) => {\n    if (currentSchema) {\n      onTableSelectChange?.(\n        Array.isArray(selectedOptions)\n          ? selectedOptions.map(option => option?.value)\n          : selectedOptions?.value,\n        currentSchema,\n      );\n    } else {\n      setTableSelectValue(selectedOptions);\n    }\n  };\n\n  const internalDbChange = (db: DatabaseObject) => {\n    setCurrentDatabase(db);\n    if (onDbChange) {\n      onDbChange(db);\n    }\n  };\n\n  const internalSchemaChange = (schema?: string) => {\n    setCurrentSchema(schema);\n    if (onSchemaChange) {\n      onSchemaChange(schema);\n    }\n\n    internalTableChange(undefined);\n  };\n\n  function renderDatabaseSelector() {\n    return (\n      <DatabaseSelector\n        key={currentDatabase?.id}\n        db={currentDatabase}\n        emptyState={emptyState}\n        formMode={formMode}\n        getDbList={getDbList}\n        handleError={handleError}\n        onDbChange={readOnly ? undefined : internalDbChange}\n        onEmptyResults={onEmptyResults}\n        onSchemaChange={readOnly ? undefined : internalSchemaChange}\n        onSchemasLoad={onSchemasLoad}\n        schema={currentSchema}\n        sqlLabMode={sqlLabMode}\n        isDatabaseSelectEnabled={isDatabaseSelectEnabled && !readOnly}\n        readOnly={readOnly}\n      />\n    );\n  }\n\n  const handleFilterOption = useMemo(\n    () => (search: string, option: TableOption) => {\n      const searchValue = search.trim().toLowerCase();\n      const { text } = option;\n      return text.toLowerCase().includes(searchValue);\n    },\n    [],\n  );\n\n  function renderTableSelect() {\n    const disabled =\n      (currentSchema && !formMode && readOnly) ||\n      (!currentSchema && !database?.allow_multi_schema_metadata_fetch);\n\n    const header = sqlLabMode ? (\n      <FormLabel>{t('See table schema')}</FormLabel>\n    ) : (\n      <FormLabel>{t('Table')}</FormLabel>\n    );\n\n    const select = (\n      <Select\n        ariaLabel={t('Select table or type table name')}\n        disabled={disabled}\n        filterOption={handleFilterOption}\n        header={header}\n        labelInValue\n        lazyLoading={false}\n        loading={loadingTables}\n        name=\"select-table\"\n        onChange={(options: TableOption | TableOption[]) =>\n          internalTableChange(options)\n        }\n        options={tableOptions}\n        placeholder={t('Select table or type table name')}\n        showSearch\n        mode={tableSelectMode}\n        value={tableSelectValue}\n        allowClear={tableSelectMode === 'multiple'}\n      />\n    );\n\n    const refreshLabel = !formMode && !readOnly && (\n      <RefreshLabel\n        onClick={() => setRefresh(refresh + 1)}\n        tooltipContent={t('Force refresh table list')}\n      />\n    );\n\n    return renderSelectRow(select, refreshLabel);\n  }\n\n  return (\n    <TableSelectorWrapper>\n      {renderDatabaseSelector()}\n      {sqlLabMode && !formMode && <div className=\"divider\" />}\n      {renderTableSelect()}\n    </TableSelectorWrapper>\n  );\n};\n\nexport const TableSelectorMultiple: FunctionComponent<TableSelectorProps> =\n  props => <TableSelector tableSelectMode=\"multiple\" {...props} />;\n\nexport default TableSelector;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\n\nexport const commonMenuData = {\n  name: t('Data'),\n  tabs: [\n    {\n      name: 'Databases',\n      label: t('Databases'),\n      url: '/databaseview/list/',\n      usesRouter: true,\n    },\n    {\n      name: 'Datasets',\n      label: t('Datasets'),\n      url: '/tablemodelview/list/',\n      usesRouter: true,\n    },\n    {\n      name: 'Saved queries',\n      label: t('Saved queries'),\n      url: '/savedqueryview/list/',\n      usesRouter: true,\n    },\n    {\n      name: 'Query history',\n      label: t('Query history'),\n      url: '/superset/sqllab/history/',\n      usesRouter: true,\n    },\n  ],\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FunctionComponent, useState, useEffect } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { useSingleViewResource } from 'src/views/CRUD/hooks';\nimport Modal from 'src/components/Modal';\nimport TableSelector from 'src/components/TableSelector';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { DatabaseObject } from 'src/components/DatabaseSelector';\n\ntype DatasetAddObject = {\n  id: number;\n  database: number;\n  schema: string;\n  table_name: string;\n};\ninterface DatasetModalProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  onDatasetAdd?: (dataset: DatasetAddObject) => void;\n  onHide: () => void;\n  show: boolean;\n}\n\nconst TableSelectorContainer = styled.div`\n  padding-bottom: 340px;\n  width: 65%;\n`;\n\nconst DatasetModal: FunctionComponent<DatasetModalProps> = ({\n  addDangerToast,\n  addSuccessToast,\n  onDatasetAdd,\n  onHide,\n  show,\n}) => {\n  const [currentDatabase, setCurrentDatabase] = useState<\n    DatabaseObject | undefined\n  >();\n  const [currentSchema, setSchema] = useState<string | undefined>('');\n  const [currentTableName, setTableName] = useState('');\n  const [disableSave, setDisableSave] = useState(true);\n  const {\n    createResource,\n    state: { loading },\n  } = useSingleViewResource<Partial<DatasetAddObject>>(\n    'dataset',\n    t('dataset'),\n    addDangerToast,\n  );\n\n  useEffect(() => {\n    setDisableSave(currentDatabase === undefined || currentTableName === '');\n  }, [currentTableName, currentDatabase]);\n\n  const onDbChange = (db: DatabaseObject) => {\n    setCurrentDatabase(db);\n  };\n\n  const onSchemaChange = (schema?: string) => {\n    setSchema(schema);\n  };\n\n  const onTableChange = (tableName: string) => {\n    setTableName(tableName);\n  };\n\n  const clearModal = () => {\n    setSchema('');\n    setTableName('');\n    setCurrentDatabase(undefined);\n    setDisableSave(true);\n  };\n\n  const hide = () => {\n    clearModal();\n    onHide();\n  };\n\n  const onSave = () => {\n    if (currentDatabase === undefined) {\n      return;\n    }\n    const data = {\n      database: currentDatabase.id,\n      ...(currentSchema ? { schema: currentSchema } : {}),\n      table_name: currentTableName,\n    };\n    createResource(data).then(response => {\n      if (!response) {\n        return;\n      }\n      if (onDatasetAdd) {\n        onDatasetAdd({ id: response.id, ...response });\n      }\n      addSuccessToast(t('The dataset has been saved'));\n      hide();\n    });\n  };\n\n  return (\n    <Modal\n      disablePrimaryButton={disableSave}\n      primaryButtonLoading={loading}\n      onHandledPrimaryAction={onSave}\n      onHide={hide}\n      primaryButtonName={t('Add')}\n      show={show}\n      title={t('Add dataset')}\n    >\n      <TableSelectorContainer>\n        <TableSelector\n          clearable={false}\n          formMode\n          database={currentDatabase}\n          schema={currentSchema}\n          tableValue={currentTableName}\n          onDbChange={onDbChange}\n          onSchemaChange={onSchemaChange}\n          onTableSelectChange={onTableChange}\n          handleError={addDangerToast}\n        />\n      </TableSelectorContainer>\n    </Modal>\n  );\n};\n\nexport default withToasts(DatasetModal);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient, t, styled } from '@superset-ui/core';\nimport React, {\n  FunctionComponent,\n  useState,\n  useMemo,\n  useCallback,\n} from 'react';\nimport rison from 'rison';\nimport {\n  createFetchRelated,\n  createFetchDistinct,\n  createErrorHandler,\n} from 'src/views/CRUD/utils';\nimport { ColumnObject } from 'src/views/CRUD/data/dataset/types';\nimport { useListViewResource } from 'src/views/CRUD/hooks';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport { DatasourceModal } from 'src/components/Datasource';\nimport DeleteModal from 'src/components/DeleteModal';\nimport handleResourceExport from 'src/utils/export';\nimport ListView, {\n  ListViewProps,\n  Filters,\n  FilterOperator,\n} from 'src/components/ListView';\nimport Loading from 'src/components/Loading';\nimport SubMenu, {\n  SubMenuProps,\n  ButtonProps,\n} from 'src/views/components/SubMenu';\nimport { commonMenuData } from 'src/views/CRUD/data/common';\nimport Owner from 'src/types/Owner';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport FacePile from 'src/components/FacePile';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport ImportModelsModal from 'src/components/ImportModal/index';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport WarningIconWithTooltip from 'src/components/WarningIconWithTooltip';\nimport { isUserAdmin } from 'src/dashboard/util/findPermission';\nimport AddDatasetModal from './AddDatasetModal';\n\nimport {\n  PAGE_SIZE,\n  SORT_BY,\n  PASSWORDS_NEEDED_MESSAGE,\n  CONFIRM_OVERWRITE_MESSAGE,\n} from './constants';\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst Actions = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n\n  .disabled {\n    svg,\n    i {\n      &:hover {\n        path {\n          fill: ${({ theme }) => theme.colors.grayscale.light1};\n        }\n      }\n    }\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n    .ant-menu-item:hover {\n      color: ${({ theme }) => theme.colors.grayscale.light1};\n      cursor: default;\n    }\n    &::after {\n      color: ${({ theme }) => theme.colors.grayscale.light1};\n    }\n  }\n`;\n\ntype Dataset = {\n  changed_by_name: string;\n  changed_by_url: string;\n  changed_by: string;\n  changed_on_delta_humanized: string;\n  database: {\n    id: string;\n    database_name: string;\n  };\n  kind: string;\n  explore_url: string;\n  id: number;\n  owners: Array<Owner>;\n  schema: string;\n  table_name: string;\n};\n\ninterface DatasetListProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  user: {\n    userId: string | number;\n    firstName: string;\n    lastName: string;\n  };\n}\n\nconst DatasetList: FunctionComponent<DatasetListProps> = ({\n  addDangerToast,\n  addSuccessToast,\n  user,\n}) => {\n  const {\n    state: {\n      loading,\n      resourceCount: datasetCount,\n      resourceCollection: datasets,\n      bulkSelectEnabled,\n    },\n    hasPerm,\n    fetchData,\n    toggleBulkSelect,\n    refreshData,\n  } = useListViewResource<Dataset>('dataset', t('dataset'), addDangerToast);\n\n  const [datasetAddModalOpen, setDatasetAddModalOpen] =\n    useState<boolean>(false);\n\n  const [datasetCurrentlyDeleting, setDatasetCurrentlyDeleting] = useState<\n    (Dataset & { chart_count: number; dashboard_count: number }) | null\n  >(null);\n\n  const [datasetCurrentlyEditing, setDatasetCurrentlyEditing] =\n    useState<Dataset | null>(null);\n\n  const [importingDataset, showImportModal] = useState<boolean>(false);\n  const [passwordFields, setPasswordFields] = useState<string[]>([]);\n  const [preparingExport, setPreparingExport] = useState<boolean>(false);\n\n  const openDatasetImportModal = () => {\n    showImportModal(true);\n  };\n\n  const closeDatasetImportModal = () => {\n    showImportModal(false);\n  };\n\n  const handleDatasetImport = () => {\n    showImportModal(false);\n    refreshData();\n    addSuccessToast(t('Dataset imported'));\n  };\n\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canCreate = hasPerm('can_write');\n  const canExport =\n    hasPerm('can_export') && isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT);\n\n  const initialSort = SORT_BY;\n\n  const openDatasetEditModal = useCallback(\n    ({ id }: Dataset) => {\n      SupersetClient.get({\n        endpoint: `/api/v1/dataset/${id}`,\n      })\n        .then(({ json = {} }) => {\n          const addCertificationFields = json.result.columns.map(\n            (column: ColumnObject) => {\n              const {\n                certification: { details = '', certified_by = '' } = {},\n              } = JSON.parse(column.extra || '{}') || {};\n              return {\n                ...column,\n                certification_details: details || '',\n                certified_by: certified_by || '',\n                is_certified: details || certified_by,\n              };\n            },\n          );\n          // eslint-disable-next-line no-param-reassign\n          json.result.columns = [...addCertificationFields];\n          setDatasetCurrentlyEditing(json.result);\n        })\n        .catch(() => {\n          addDangerToast(\n            t('An error occurred while fetching dataset related data'),\n          );\n        });\n    },\n    [addDangerToast],\n  );\n\n  const openDatasetDeleteModal = (dataset: Dataset) =>\n    SupersetClient.get({\n      endpoint: `/api/v1/dataset/${dataset.id}/related_objects`,\n    })\n      .then(({ json = {} }) => {\n        setDatasetCurrentlyDeleting({\n          ...dataset,\n          chart_count: json.charts.count,\n          dashboard_count: json.dashboards.count,\n        });\n      })\n      .catch(\n        createErrorHandler(errMsg =>\n          t(\n            'An error occurred while fetching dataset related data: %s',\n            errMsg,\n          ),\n        ),\n      );\n\n  const handleBulkDatasetExport = (datasetsToExport: Dataset[]) => {\n    const ids = datasetsToExport.map(({ id }) => id);\n    handleResourceExport('dataset', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n\n  const columns = useMemo(\n    () => [\n      {\n        Cell: ({\n          row: {\n            original: { kind },\n          },\n        }: any) => {\n          if (kind === 'physical') {\n            return (\n              <Tooltip\n                id=\"physical-dataset-tooltip\"\n                title={t('Physical dataset')}\n              >\n                <Icons.DatasetPhysical />\n              </Tooltip>\n            );\n          }\n\n          return (\n            <Tooltip id=\"virtual-dataset-tooltip\" title={t('Virtual dataset')}>\n              <Icons.DatasetVirtual />\n            </Tooltip>\n          );\n        },\n        accessor: 'kind_icon',\n        disableSortBy: true,\n        size: 'xs',\n        id: 'id',\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              extra,\n              table_name: datasetTitle,\n              description,\n              explore_url: exploreURL,\n            },\n          },\n        }: any) => {\n          const titleLink = <a href={exploreURL}>{datasetTitle}</a>;\n          try {\n            const parsedExtra = JSON.parse(extra);\n            return (\n              <FlexRowContainer>\n                {parsedExtra?.certification && (\n                  <CertifiedBadge\n                    certifiedBy={parsedExtra.certification.certified_by}\n                    details={parsedExtra.certification.details}\n                    size=\"l\"\n                  />\n                )}\n                {parsedExtra?.warning_markdown && (\n                  <WarningIconWithTooltip\n                    warningMarkdown={parsedExtra.warning_markdown}\n                    size=\"l\"\n                  />\n                )}\n                {titleLink}\n                {description && (\n                  <InfoTooltip tooltip={description} viewBox=\"0 -1 24 24\" />\n                )}\n              </FlexRowContainer>\n            );\n          } catch {\n            return titleLink;\n          }\n        },\n        Header: t('Name'),\n        accessor: 'table_name',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { kind },\n          },\n        }: any) => kind[0]?.toUpperCase() + kind.slice(1),\n        Header: t('Type'),\n        accessor: 'kind',\n        disableSortBy: true,\n        size: 'md',\n      },\n      {\n        Header: t('Database'),\n        accessor: 'database.database_name',\n        size: 'lg',\n      },\n      {\n        Header: t('Schema'),\n        accessor: 'schema',\n        size: 'lg',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { changed_on_delta_humanized: changedOn },\n          },\n        }: any) => <span className=\"no-wrap\">{changedOn}</span>,\n        Header: t('Modified'),\n        accessor: 'changed_on_delta_humanized',\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { changed_by_name: changedByName },\n          },\n        }: any) => changedByName,\n        Header: t('Modified by'),\n        accessor: 'changed_by.first_name',\n        size: 'xl',\n      },\n      {\n        accessor: 'database',\n        disableSortBy: true,\n        hidden: true,\n      },\n      {\n        Cell: ({\n          row: {\n            original: { owners = [] },\n          },\n        }: any) => <FacePile users={owners} />,\n        Header: t('Owners'),\n        id: 'owners',\n        disableSortBy: true,\n        size: 'lg',\n      },\n      {\n        accessor: 'sql',\n        hidden: true,\n        disableSortBy: true,\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          // Verify owner or isAdmin\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          const handleEdit = () => openDatasetEditModal(original);\n          const handleDelete = () => openDatasetDeleteModal(original);\n          const handleExport = () => handleBulkDatasetExport([original]);\n          if (!canEdit && !canDelete && !canExport) {\n            return null;\n          }\n          return (\n            <Actions className=\"actions\">\n              {canDelete && (\n                <Tooltip\n                  id=\"delete-action-tooltip\"\n                  title={t('Delete')}\n                  placement=\"bottom\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"action-button\"\n                    onClick={handleDelete}\n                  >\n                    <Icons.Trash />\n                  </span>\n                </Tooltip>\n              )}\n              {canExport && (\n                <Tooltip\n                  id=\"export-action-tooltip\"\n                  title={t('Export')}\n                  placement=\"bottom\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"action-button\"\n                    onClick={handleExport}\n                  >\n                    <Icons.Share />\n                  </span>\n                </Tooltip>\n              )}\n              {canEdit && (\n                <Tooltip\n                  id=\"edit-action-tooltip\"\n                  title={\n                    allowEdit\n                      ? t('Edit')\n                      : t(\n                          'You must be a dataset owner in order to edit. Please reach out to a dataset owner to request modifications or edit access.',\n                        )\n                  }\n                  placement=\"bottomRight\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className={allowEdit ? 'action-button' : 'disabled'}\n                    onClick={allowEdit ? handleEdit : undefined}\n                  >\n                    <Icons.EditAlt />\n                  </span>\n                </Tooltip>\n              )}\n            </Actions>\n          );\n        },\n        Header: t('Actions'),\n        id: 'actions',\n        hidden: !canEdit && !canDelete,\n        disableSortBy: true,\n      },\n    ],\n    [canEdit, canDelete, canExport, openDatasetEditModal],\n  );\n\n  const filterTypes: Filters = useMemo(\n    () => [\n      {\n        Header: t('Owner'),\n        id: 'owners',\n        input: 'select',\n        operator: FilterOperator.relationManyMany,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchRelated(\n          'dataset',\n          'owners',\n          createErrorHandler(errMsg =>\n            t(\n              'An error occurred while fetching dataset owner values: %s',\n              errMsg,\n            ),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Database'),\n        id: 'database',\n        input: 'select',\n        operator: FilterOperator.relationOneMany,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchRelated(\n          'dataset',\n          'database',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching datasets: %s', errMsg),\n          ),\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Schema'),\n        id: 'schema',\n        input: 'select',\n        operator: FilterOperator.equals,\n        unfilteredLabel: 'All',\n        fetchSelects: createFetchDistinct(\n          'dataset',\n          'schema',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching schema values: %s', errMsg),\n          ),\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Type'),\n        id: 'sql',\n        input: 'select',\n        operator: FilterOperator.datasetIsNullOrEmpty,\n        unfilteredLabel: 'All',\n        selects: [\n          { label: 'Virtual', value: false },\n          { label: 'Physical', value: true },\n        ],\n      },\n      {\n        Header: t('Certified'),\n        id: 'id',\n        urlDisplay: 'certified',\n        input: 'select',\n        operator: FilterOperator.datasetIsCertified,\n        unfilteredLabel: t('Any'),\n        selects: [\n          { label: t('Yes'), value: true },\n          { label: t('No'), value: false },\n        ],\n      },\n      {\n        Header: t('Search'),\n        id: 'table_name',\n        input: 'search',\n        operator: FilterOperator.contains,\n      },\n    ],\n    [],\n  );\n\n  const menuData: SubMenuProps = {\n    activeChild: 'Datasets',\n    ...commonMenuData,\n  };\n\n  const buttonArr: Array<ButtonProps> = [];\n\n  if (canDelete || canExport) {\n    buttonArr.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary',\n    });\n  }\n\n  if (canCreate) {\n    buttonArr.push({\n      name: (\n        <>\n          <i className=\"fa fa-plus\" /> {t('Dataset')}{' '}\n        </>\n      ),\n      onClick: () => setDatasetAddModalOpen(true),\n      buttonStyle: 'primary',\n    });\n\n    if (isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT)) {\n      buttonArr.push({\n        name: (\n          <Tooltip\n            id=\"import-tooltip\"\n            title={t('Import datasets')}\n            placement=\"bottomRight\"\n          >\n            <Icons.Import data-test=\"import-button\" />\n          </Tooltip>\n        ),\n        buttonStyle: 'link',\n        onClick: openDatasetImportModal,\n      });\n    }\n  }\n\n  menuData.buttons = buttonArr;\n\n  const closeDatasetDeleteModal = () => {\n    setDatasetCurrentlyDeleting(null);\n  };\n\n  const closeDatasetEditModal = () => {\n    setDatasetCurrentlyEditing(null);\n  };\n\n  const handleDatasetDelete = ({ id, table_name: tableName }: Dataset) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/dataset/${id}`,\n    }).then(\n      () => {\n        refreshData();\n        setDatasetCurrentlyDeleting(null);\n        addSuccessToast(t('Deleted: %s', tableName));\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t('There was an issue deleting %s: %s', tableName, errMsg),\n        ),\n      ),\n    );\n  };\n\n  const handleBulkDatasetDelete = (datasetsToDelete: Dataset[]) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/dataset/?q=${rison.encode(\n        datasetsToDelete.map(({ id }) => id),\n      )}`,\n    }).then(\n      ({ json = {} }) => {\n        refreshData();\n        addSuccessToast(json.message);\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t('There was an issue deleting the selected datasets: %s', errMsg),\n        ),\n      ),\n    );\n  };\n\n  return (\n    <>\n      <SubMenu {...menuData} />\n      <AddDatasetModal\n        show={datasetAddModalOpen}\n        onHide={() => setDatasetAddModalOpen(false)}\n        onDatasetAdd={refreshData}\n      />\n      {datasetCurrentlyDeleting && (\n        <DeleteModal\n          description={t(\n            'The dataset %s is linked to %s charts that appear on %s dashboards. Are you sure you want to continue? Deleting the dataset will break those objects.',\n            datasetCurrentlyDeleting.table_name,\n            datasetCurrentlyDeleting.chart_count,\n            datasetCurrentlyDeleting.dashboard_count,\n          )}\n          onConfirm={() => {\n            if (datasetCurrentlyDeleting) {\n              handleDatasetDelete(datasetCurrentlyDeleting);\n            }\n          }}\n          onHide={closeDatasetDeleteModal}\n          open\n          title={t('Delete Dataset?')}\n        />\n      )}\n      {datasetCurrentlyEditing && (\n        <DatasourceModal\n          datasource={datasetCurrentlyEditing}\n          onDatasourceSave={refreshData}\n          onHide={closeDatasetEditModal}\n          show\n        />\n      )}\n      <ConfirmStatusChange\n        title={t('Please confirm')}\n        description={t(\n          'Are you sure you want to delete the selected datasets?',\n        )}\n        onConfirm={handleBulkDatasetDelete}\n      >\n        {confirmDelete => {\n          const bulkActions: ListViewProps['bulkActions'] = [];\n          if (canDelete) {\n            bulkActions.push({\n              key: 'delete',\n              name: t('Delete'),\n              onSelect: confirmDelete,\n              type: 'danger',\n            });\n          }\n          if (canExport) {\n            bulkActions.push({\n              key: 'export',\n              name: t('Export'),\n              type: 'primary',\n              onSelect: handleBulkDatasetExport,\n            });\n          }\n          return (\n            <ListView<Dataset>\n              className=\"dataset-list-view\"\n              columns={columns}\n              data={datasets}\n              count={datasetCount}\n              pageSize={PAGE_SIZE}\n              fetchData={fetchData}\n              filters={filterTypes}\n              loading={loading}\n              initialSort={initialSort}\n              bulkActions={bulkActions}\n              bulkSelectEnabled={bulkSelectEnabled}\n              disableBulkSelect={toggleBulkSelect}\n              renderBulkSelectCopy={selected => {\n                const { virtualCount, physicalCount } = selected.reduce(\n                  (acc, e) => {\n                    if (e.original.kind === 'physical') acc.physicalCount += 1;\n                    else if (e.original.kind === 'virtual') {\n                      acc.virtualCount += 1;\n                    }\n                    return acc;\n                  },\n                  { virtualCount: 0, physicalCount: 0 },\n                );\n\n                if (!selected.length) {\n                  return t('0 Selected');\n                }\n                if (virtualCount && !physicalCount) {\n                  return t(\n                    '%s Selected (Virtual)',\n                    selected.length,\n                    virtualCount,\n                  );\n                }\n                if (physicalCount && !virtualCount) {\n                  return t(\n                    '%s Selected (Physical)',\n                    selected.length,\n                    physicalCount,\n                  );\n                }\n\n                return t(\n                  '%s Selected (%s Physical, %s Virtual)',\n                  selected.length,\n                  physicalCount,\n                  virtualCount,\n                );\n              }}\n            />\n          );\n        }}\n      </ConfirmStatusChange>\n\n      <ImportModelsModal\n        resourceName=\"dataset\"\n        resourceLabel={t('dataset')}\n        passwordsNeededMessage={PASSWORDS_NEEDED_MESSAGE}\n        confirmOverwriteMessage={CONFIRM_OVERWRITE_MESSAGE}\n        addDangerToast={addDangerToast}\n        addSuccessToast={addSuccessToast}\n        onModelImport={handleDatasetImport}\n        show={importingDataset}\n        onHide={closeDatasetImportModal}\n        passwordFields={passwordFields}\n        setPasswordFields={setPasswordFields}\n      />\n      {preparingExport && <Loading />}\n    </>\n  );\n};\n\nexport default withToasts(DatasetList);\n"],"names":["DatabaseSelectorWrapper","theme","gridUnit","LabelStyle","SelectLabel","backend","databaseName","className","title","DatabaseSelector","db","formMode","emptyState","getDbList","handleError","isDatabaseSelectEnabled","onDbChange","onEmptyResults","onSchemaChange","onSchemasLoad","readOnly","schema","sqlLabMode","loadingSchemas","setLoadingSchemas","useState","schemaOptions","setSchemaOptions","currentDb","setCurrentDb","label","database_name","value","id","undefined","currentSchema","setCurrentSchema","refresh","setRefresh","addSuccessToast","loadDatabases","useMemo","async","search","page","pageSize","endpoint","order_columns","order_direction","page_size","filters","col","opr","then","json","result","length","options","map","row","allow_multi_schema_metadata_fetch","data","totalCount","renderSelectRow","select","refreshBtn","useEffect","queryParams","force","s","catch","t","ariaLabel","optionFilterProps","header","lazyLoading","notFoundContent","onChange","database","placeholder","disabled","refreshIcon","onClick","tooltipContent","labelInValue","loading","name","item","changeSchema","showSearch","renderSchemaSelect","supersetTextDocs","DOCUMENTATION_LINK","support","errorMessage","showDbInstallInstructions","Alert","closable","css","colors","warning","light1","dark2","typography","sizes","l","antdWarningAlertStyles","type","showIcon","message","description","href","target","rel","HelperMessage","style","grayscale","base","StyledInputContainer","light2","resourceName","resourceLabel","passwordsNeededMessage","confirmOverwriteMessage","onModelImport","show","onHide","passwordFields","setPasswordFields","isHidden","setIsHidden","passwords","setPasswords","needsOverwriteConfirm","setNeedsOverwriteConfirm","confirmedOverwrite","setConfirmedOverwrite","fileList","setFileList","importingModel","setImportingModel","setErrorMessage","clearModal","state","alreadyExists","passwordsNeeded","importResource","msg","Modal","disablePrimaryButton","onHandledPrimaryAction","originFileObj","File","primaryButtonName","primaryButtonType","width","accept","info","file","status","onRemove","removedFile","filter","uid","customRequest","Button","fileName","key","autoComplete","event","targetValue","currentTarget","toUpperCase","IconWithoutRef","forwardRef","props","ref","role","cursor","color","primary","TableSelectorWrapper","secondary","light5","TableLabel","TableOption","table","extra","iconSize","certification","certifiedBy","certified_by","details","size","warning_markdown","warningMarkdown","TableSelector","onTablesLoad","tableSelectMode","tableValue","onTableSelectChange","currentDatabase","setCurrentDatabase","tableOptions","setTableOptions","tableSelectValue","setTableSelectValue","previousRefresh","setPreviousRefresh","loadingTables","setLoadingTables","find","option","includes","encodedSchema","encodeURIComponent","forceRefresh","encodeURI","text","internalTableChange","selectedOptions","Array","isArray","handleFilterOption","searchValue","trim","toLowerCase","filterOption","mode","allowClear","renderTableSelect","TableSelectorMultiple","commonMenuData","tabs","url","usesRouter","TableSelectorContainer","withToasts","addDangerToast","onDatasetAdd","setSchema","currentTableName","setTableName","disableSave","setDisableSave","createResource","hide","primaryButtonLoading","table_name","response","clearable","tableName","FlexRowContainer","Actions","user","resourceCount","datasetCount","resourceCollection","datasets","bulkSelectEnabled","hasPerm","fetchData","toggleBulkSelect","refreshData","datasetAddModalOpen","setDatasetAddModalOpen","datasetCurrentlyDeleting","setDatasetCurrentlyDeleting","datasetCurrentlyEditing","setDatasetCurrentlyEditing","importingDataset","showImportModal","preparingExport","setPreparingExport","canEdit","canDelete","canCreate","canExport","initialSort","openDatasetEditModal","useCallback","SupersetClient","addCertificationFields","columns","column","JSON","parse","certification_details","is_certified","handleBulkDatasetExport","datasetsToExport","ids","Cell","original","kind","Tooltip","Icons","accessor","disableSortBy","datasetTitle","explore_url","exploreURL","titleLink","parsedExtra","CertifiedBadge","WarningIconWithTooltip","InfoTooltip","tooltip","viewBox","Header","slice","changed_on_delta_humanized","changedOn","changed_by_name","changedByName","hidden","owners","FacePile","users","allowEdit","o","userId","placement","tabIndex","openDatasetDeleteModal","dataset","chart_count","charts","count","dashboard_count","dashboards","errMsg","filterTypes","input","operator","unfilteredLabel","fetchSelects","paginate","selects","urlDisplay","menuData","activeChild","common","buttonArr","push","buttonStyle","buttons","SubMenu","AddDatasetModal","DeleteModal","onConfirm","handleDatasetDelete","open","Datasource","datasource","onDatasourceSave","ConfirmStatusChange","datasetsToDelete","confirmDelete","bulkActions","onSelect","ListView","disableBulkSelect","renderBulkSelectCopy","selected","virtualCount","physicalCount","reduce","acc","e","Loading"],"sourceRoot":""}